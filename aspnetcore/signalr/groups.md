---
title: Управление пользователями и группами в SignalR
author: bradygaster
description: Общие сведения о ASP.NET Core SignalR пользователей и групп управления.
monikerRange: '>= aspnetcore-2.1'
ms.author: bradyg
ms.custom: mvc
ms.date: 06/04/2018
uid: signalr/groups
ms.openlocfilehash: 45f2bb44e03a586b7fc186525fdd3a2645c820d5
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57030211"
---
# <a name="manage-users-and-groups-in-signalr"></a>Управление пользователями и группами в SignalR

По [Бреннан Конрой](https://github.com/BrennanConroy)

SignalR позволяет сообщения отправляться на все подключения, связанные с конкретным пользователем, а также с именем группы подключений.

[Просмотреть или скачать образец кода](https://github.com/aspnet/Docs/tree/master/aspnetcore/signalr/groups/sample/) [(способ загрузки)](xref:index#how-to-download-a-sample)

## <a name="users-in-signalr"></a>Пользователи в SignalR

SignalR позволяет отправлять сообщения для всех подключений, связанных с конкретным пользователем. По умолчанию использует SignalR `ClaimTypes.NameIdentifier` из `ClaimsPrincipal` связан с соединением в качестве идентификатора пользователя. Один пользователь может иметь несколько подключений к приложению SignalR. Например пользователь может подключаться на их рабочем столе, а также свой телефон. Каждое устройство имеет отдельное соединение SignalR, но они все связанные с тем же пользователем. Если сообщение отправляется пользователю, все подключения, связанный с данным пользователем сообщение. Идентификатор пользователя для подключения может осуществляться `Context.UserIdentifier` свойство в концентраторе.

Отправить сообщение конкретному пользователю, передав идентификатор пользователя для `User` функции в методе концентратора, как показано в следующем примере:

> [!NOTE]
> Идентификатор пользователя с учетом регистра.

[!code-csharp[Configure service](groups/sample/hubs/chathub.cs?range=29-32)]

## <a name="groups-in-signalr"></a>Группами в SignalR

Группа — коллекция соединений, связанный с именем. Сообщения могут отправляться для всех подключений в группе. Группы — рекомендуемый способ отправить подключения или несколько подключений, так как группы управляются приложением. Соединение может быть членом нескольких групп. Это делает групп идеальной для примерно приложения чата, где каждой комнате, можно представить в виде группы. Соединения можно добавлять к или удалены из групп с помощью `AddToGroupAsync` и `RemoveFromGroupAsync` методы.

[!code-csharp[Hub methods](groups/sample/hubs/chathub.cs?range=15-27)]

Членство в группе не сохраняется при повторном подключении. Подключение должно повторно присоединиться к группе, когда она будет восстановлена. Число членов группы, так как эта информация недоступна, если приложение масштабируется на несколько серверов невозможна.

Чтобы защитить доступ к ресурсам при использовании групп, используйте [проверки подлинности и авторизации](xref:signalr/authn-and-authz) функциональные возможности в ASP.NET Core. Если только добавление пользователей в группу при учетные данные действительны для этой группы сообщений, отправляемых в эту группу только перейдет авторизованным пользователям. Однако группы не являются функцией безопасности. Проверка подлинности утверждений содержат функции, которые группы этого не сделать, например окончания срока действия и отзыв прав доступа. Если отменяется разрешение пользователя для доступа к группе, необходимо вручную обнаружит это и удалить их из группы.

> [!NOTE]
> Имена групп учитывается регистр.

## <a name="related-resources"></a>Связанные ресурсы

* [Начало работы](xref:tutorials/signalr)
* [Центры](xref:signalr/hubs)
* [Публикация в Azure](xref:signalr/publish-to-azure-web-app)
