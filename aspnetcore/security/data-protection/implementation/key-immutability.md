---
title: Неизменность ключа и настройки параметров в ASP.NET Core
author: rick-anderson
description: Узнайте подробности реализации неизменность ключа защиты данных в ASP.NET Core API-интерфейсы.
ms.author: riande
ms.date: 10/14/2016
uid: security/data-protection/implementation/key-immutability
ms.openlocfilehash: 7796cb102c0f6f03809704016fd36b28c7a82438
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57035931"
---
# <a name="key-immutability-and-key-settings-in-aspnet-core"></a>Неизменность ключа и настройки параметров в ASP.NET Core

Когда объект сохраняется в резервное хранилище, его представление навсегда является фиксированным. Новые данные добавляются в хранилище, но существующие данные никогда не может быть изменено. Основное назначение такого поведения является избежание повреждения данных.

Следствием этого поведения является то, что после ключ записывается в резервное хранилище, он станет неизменяемым. Даты создания, активации и истечения срока действия не может быть изменено, хотя он может быть отменено с помощью `IKeyManager`. Кроме того его сведений о базовом алгоритмической, материала основного и шифрование на свойства rest также являются неизменяемыми.

Если разработчик изменяет параметров, которые влияют на постоянство ключа, эти изменения не вступают в силу до следующего создается ключ, либо с помощью явного вызова `IKeyManager.CreateNewKey` или с помощью система защиты данных в собственном [ключ автоматической Создание](xref:security/data-protection/implementation/key-management#data-protection-implementation-key-management) поведение. Ниже приведены параметры, которые влияют на постоянство ключа.

* [Время существования ключа по умолчанию](xref:security/data-protection/implementation/key-management#data-protection-implementation-key-management)

* [Шифрование ключей при механизм rest](xref:security/data-protection/implementation/key-encryption-at-rest)

* [Алгоритмического сведения, содержащиеся в ключ](xref:security/data-protection/configuration/overview#changing-algorithms-with-usecryptographicalgorithms)

Если требуется, чтобы эти параметры, чтобы запустить более ранних, чем следующий ключ автоматическое скользящее время, имеет смысл сделать явный вызов `IKeyManager.CreateNewKey` для принудительного создания нового ключа. Необходимо указать дату явной активации ({теперь + 2 дня} — это хорошее проверенное правило для выделить время на распространение изменения) и дату окончания срока действия в вызове.

>[!TIP]
> Все приложения, касаясь репозитория следует указать те же параметры, с помощью `IDataProtectionBuilder` методы расширения. В противном случае свойства постоянный ключ будет зависеть от конкретного приложения, вызвавший процедуры создания ключей.
