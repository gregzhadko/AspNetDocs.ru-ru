---
title: Использование LibMan с ASP.NET Core в Visual Studio
author: scottaddie
description: Сведения об использовании LibMan в проекте ASP.NET Core с помощью Visual Studio.
ms.author: scaddie
ms.custom: mvc
ms.date: 08/20/2018
uid: client-side/libman/libman-vs
ms.openlocfilehash: 727bd80b7f37f6ebd9d37b7aab1aa6c33b85678c
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57045121"
---
# <a name="use-libman-with-aspnet-core-in-visual-studio"></a>Использование LibMan с ASP.NET Core в Visual Studio

Автор: [Скотт Адди](https://twitter.com/Scott_Addie) (Scott Addie)

Visual Studio имеет встроенную поддержку [LibMan](xref:client-side/libman/index) в проектах ASP.NET Core, включая:

* Поддержка по настройке и выполнению операции восстановления LibMan в сборки.
* Пункты меню для активации LibMan восстановление и очистка операций.
* Диалоговое окно поиска для поиска библиотек и добавления файлов в проект.
* Для редактирования *libman.json*&mdash;LibMan файл манифеста.

[Просмотреть или скачать образец кода](https://github.com/aspnet/Docs/tree/master/aspnetcore/client-side/libman/samples/) [(способ загрузки)](xref:index#how-to-download-a-sample)

## <a name="prerequisites"></a>Предварительные требования

* Visual Studio 2017 версии 15,8 или более поздней версии с **ASP.NET и веб-разработка** рабочей нагрузки

## <a name="add-library-files"></a>Добавьте файлы библиотеки

Файлы библиотеки могут добавляться в проект ASP.NET Core двумя разными способами:

1. [Используйте диалоговое окно Добавление библиотеки на стороне клиента](#use-the-add-client-side-library-dialog)
1. [Вручную настроить LibMan записи файла манифеста](#manually-configure-libman-manifest-file-entries)

### <a name="use-the-add-client-side-library-dialog"></a>Используйте диалоговое окно Добавление библиотеки на стороне клиента

Выполните следующие действия, чтобы установить клиентскую библиотеку.

* В **обозревателе решений**, щелкните правой кнопкой мыши папку проекта, в которой должны добавляться файлы. Выберите **добавить** > **клиентская библиотека**. **Добавьте клиентскую библиотеку** откроется диалоговое окно:

  ![Клиентская библиотека диалоговое окно добавления](_static/add-library-dialog.png)

* Выберите поставщика библиотеки из **поставщика** раскрывающийся список. CDNJS является поставщиком по умолчанию.
* Введите имя библиотеки, необходимо получить в **библиотеки** текстовое поле. Технология IntelliSense предоставляет список библиотек, начиная с заданного текста.
* В списке IntelliSense, выберите библиотеку. Обратите внимание, что имеет суффикс имени библиотеки `@` символов и последняя стабильная версия известные с выбранным поставщиком.
* Решите, какие файлы следует включать:
  * Выберите **Включение всех файлов библиотеки** переключатель, чтобы включить все файлы библиотеки.
  * Выберите **выбрать определенные файлы** переключатель, чтобы включить подмножество файлов библиотеки. Если выбран переключатель, дерево селектор файлов включен. Установите флажки слева от имен файлов для загрузки.
* Укажите папку для хранения файлов в проект **целевое расположение** текстовое поле. Как рекомендации храните каждую библиотеку в отдельной папке.

  Предложенные **целевое расположение** папки зависит от расположения, из которого запускается диалогового окна:

  * Если запускается из корневой папки проекта:
    * *wwwroot/lib* используется, если *wwwroot* существует.
    * *LIB* используется, если *wwwroot* не существует.
  * Если запускается из папки проекта используется имя соответствующей папки.

  Предложение папка имеет суффикс имени библиотеки. В следующей таблице показаны варианты папку при установке jQuery в проекта Razor Pages.
  
  |Место запуска                           |Предлагаемые папки      |
  |------------------------------------------|----------------------|
  |корневой каталог проекта (если *wwwroot* существует)        |*wwwroot/lib/jquery /* |
  |корневой каталог проекта (если *wwwroot* не существует) |*LIB/jquery /*         |
  |*Страницы* папку в проекте                 |*Страниц/jquery /*       |

* Нажмите кнопку **установить** кнопку, чтобы загрузить файлы, каждой конфигурации в *libman.json*.
* Просмотрите **диспетчер библиотек** веб-канала из **вывода** окно для сведения об установке. Пример:

  ```console
  Restore operation started...
  Restoring libraries for project LibManSample
  Restoring library jquery@3.3.1... (LibManSample)
  wwwroot/lib/jquery/jquery.min.js written to destination (LibManSample)
  wwwroot/lib/jquery/jquery.js written to destination (LibManSample)
  wwwroot/lib/jquery/jquery.min.map written to destination (LibManSample)
  Restore operation completed
  1 libraries restored in 2.32 seconds
  ```

### <a name="manually-configure-libman-manifest-file-entries"></a>Вручную настроить LibMan записи файла манифеста

Все операции LibMan в Visual Studio на основе содержимого манифеста LibMan корневой каталог проекта (*libman.json*). Можно вручную изменить *libman.json* настроить файлы библиотек проекта. Visual Studio восстанавливает все файлы библиотек, один раз *libman.json* сохраняется.

Чтобы открыть *libman.json* для редактирования, имеются следующие варианты:

* Дважды щелкните *libman.json* файл **обозревателе решений**.
* Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **управление клиентские библиотеки**. **&#8224;**
* Выберите **управление клиентские библиотеки** из Visual Studio **проекта** меню. **&#8224;**

**&#8224;** Если *libman.json* файл в корневую папку проекта еще не существует, он будет создан с содержимым шаблонов элемента по умолчанию.

Visual Studio предлагает широкие возможности JSON, поддержка, такие как Раскраска редактирования, форматирование, IntelliSense и проверки схемы. Схема JSON манифесте LibMan находится по адресу [ http://json.schemastore.org/libman ](http://json.schemastore.org/libman).

В следующем файле манифеста, LibMan извлекает файлы в конфигурацию, определенную в `libraries` свойство. Объяснение объектных литералов, определенные в `libraries` ниже:

* Подмножество [jQuery](https://jquery.com/) версии 3.3.1 извлекается из CDNJS поставщика. Подмножество определяется в `files` свойство&mdash;*jquery.min.js*, *jquery.js*, и *jquery.min.map*. Файлы помещаются в проекте *wwwroot/lib/jquery* папки.
* Полностью [начальной загрузки](https://getbootstrap.com/) и помещает его в версии 4.1.3 *wwwroot/lib/bootstrap* папки. Объектный литерал `provider` переопределения свойств `defaultProvider` значение свойства. LibMan извлекает начальной загрузки файлов от поставщика unpkg.
* Подмножество [Lodash](https://lodash.com/) был утвержден, управляющий текст внутри организации. *Lodash.js* и *lodash.min.js* файлы загружаются из локальной файловой системы в *C:\\temp\\lodash\\*. Файлы копируются в проект *wwwroot/lib/lodash* папки.

[!code-json[](samples/LibManSample/libman.json)]

> [!NOTE]
> LibMan поддерживает только одну версию каждой библиотеки из каждого поставщика. *Libman.json* файла не выполняется проверка схемы, если он содержит две библиотеки с тем же именем библиотеки для данного поставщика.

## <a name="restore-library-files"></a>Восстановить файлы библиотеки

Чтобы восстановить файлы библиотеки в Visual Studio, должен иметь допустимый *libman.json* файл в корневом каталоге проекта. Восстановленные файлы помещаются в проект в расположении, указанном для каждой библиотеки.

Можно восстановить файлы библиотеки в проекте ASP.NET Core, двумя способами:

1. [Восстановление файлов во время сборки](#restore-files-during-build)
1. [Восстановить файлы вручную](#restore-files-manually)

### <a name="restore-files-during-build"></a>Восстановление файлов во время сборки

LibMan можно восстановить файлы библиотеки, определенные как часть процесса построения. По умолчанию *восстановления при построении* поведение можно отключить.

Чтобы включить и проверить поведение восстановления при построении.

* Щелкните правой кнопкой мыши *libman.json* в **обозревателе решений** и выберите **включить восстановление клиентские библиотеки для построения** в контекстном меню.
* Нажмите кнопку **Да** кнопки, когда будет предложено установить пакет NuGet. [Microsoft.Web.LibraryManager.Build](https://www.nuget.org/packages/Microsoft.Web.LibraryManager.Build/) NuGet-пакет добавляется в проект:

  [!code-xml[](samples/LibManSample/LibManSample.csproj?name=snippet_RestoreOnBuildPackage)]

* Постройте проект, чтобы убедиться, что происходит восстановление файлов LibMan. `Microsoft.Web.LibraryManager.Build` Пакета внедряет целевой объект MSBuild, который выполняется LibMan во время операции построения проекта.
* Просмотрите **построения** веб-канала из **вывода** окно журнала действий LibMan:

  ```console
  1>------ Build started: Project: LibManSample, Configuration: Debug Any CPU ------
  1>
  1>Restore operation started...
  1>Restoring library jquery@3.3.1...
  1>Restoring library bootstrap@4.1.3...
  1>
  1>2 libraries restored in 10.66 seconds
  1>LibManSample -> C:\LibManSample\bin\Debug\netcoreapp2.1\LibManSample.dll
  ========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========
  ```

При включении восстановления при построении поведение *libman.json* отображает контекстное меню **отключить восстановление клиентские библиотеки для построения** параметр. Выбор этого варианта удаляет `Microsoft.Web.LibraryManager.Build` ссылка из файла проекта пакет. Следовательно клиентские библиотеки больше не будут восстановлены при каждом построении.

Независимо от настройки восстановления на build, можно восстановить вручную в любое время с *libman.json* контекстного меню. Дополнительные сведения см. в разделе [восстановить файлы вручную](#restore-files-manually).

### <a name="restore-files-manually"></a>Восстановить файлы вручную

Чтобы вручную восстановить файлы библиотеки:

* Для всех проектов в решении:
  * Щелкните правой кнопкой мыши имя решения в **обозревателе решений**.
  * Выберите **восстановить клиентские библиотеки** параметр.
* Для конкретного проекта:
  * Щелкните правой кнопкой мыши *libman.json* файл **обозревателе решений**.
  * Выберите **восстановить клиентские библиотеки** параметр.

Во время выполнения операции восстановления:

* Значок центра состояния задач (TSC) в строке состояния Visual Studio будет анимироваться и будет считывать *запуска операции восстановления*. При выборе значка открывается со списком известных фоновых задач всплывающей подсказки.
* Сообщения будут отправляться в строке состояния и **диспетчер библиотек** веб-канала из **вывода** окна. Пример:

  ```console
  Restore operation started...
  Restoring libraries for project LibManSample
  Restoring library jquery@3.3.1... (LibManSample)
  wwwroot/lib/jquery/jquery.min.js written to destination (LibManSample)
  wwwroot/lib/jquery/jquery.js written to destination (LibManSample)
  wwwroot/lib/jquery/jquery.min.map written to destination (LibManSample)
  Restore operation completed
  1 libraries restored in 2.32 seconds
  ```

## <a name="delete-library-files"></a>Удалить файлы библиотеки

Для выполнения *чистой* операцию, которая удаляет файлы библиотек, ранее восстановлена в Visual Studio:

* Щелкните правой кнопкой мыши *libman.json* файл **обозревателе решений**.
* Выберите **чистой клиентские библиотеки** параметр.

Во избежание непреднамеренного удаления файлов не является библиотекой операции очистки не удаляет каталоги целиком. Удаляет только файлы, которые были включены в предыдущее восстановление.

Во время выполнения операции очистки:

* Значок TSC в строке состояния Visual Studio будет анимироваться и будет считывать *начала операции библиотеки клиента*. При выборе значка открывается со списком известных фоновых задач всплывающей подсказки.
* Сообщения отправляются в строке состояния и **диспетчер библиотек** веб-канала из **вывода** окна. Пример:

```console
Clean libraries operation started...
Clean libraries operation completed
2 libraries were successfully deleted in 1.91 secs
```

Операции очистки удаляет только файлы из проекта. Файлы библиотек остаются в кэше для ускорения извлечения для операции восстановления в будущем. Чтобы управлять файлы библиотек, хранящиеся в кэше на локальном компьютере, используйте [LibMan CLI](xref:client-side/libman/libman-cli).

## <a name="uninstall-library-files"></a>Удалите файлы библиотеки

Чтобы удалить файлы библиотеки:

* Откройте *libman.json*.
* Поместите курсор внутри соответствующего `libraries` литерала объекта.
* Щелкните значок лампочки, который отображается в левом поле и выберите **удаления \<library_name > @\<library_version >**:

  ![Удаление библиотеки контекстного меню](_static/uninstall-menu-option.png)

Кроме того, можно вручную изменить и сохранить манифест LibMan (*libman.json*). [Операции восстановления](#restore-library-files) выполняется при сохранении файла. Файлы библиотек, которые больше не определяются в *libman.json* удаляются из проекта.

## <a name="update-library-version"></a>Обновить версию библиотеки

Чтобы проверить версию обновленной библиотеки:

* Откройте *libman.json*.
* Поместите курсор внутри соответствующего `libraries` литерала объекта.
* Щелкните значок лампочки, который отображается в левом поле. Наведите указатель мыши **проверять наличие обновлений**.

LibMan проверяет наличие более новой версией, установленной версии библиотеки. Возможны следующие результаты.

* Объект **обновления не найдены** сообщение появляется, если уже установлена последняя версия.
* Последняя стабильная версия отображается, если не установлен.

  ![Проверить наличие обновлений в контекстном меню](_static/update-menu-option.png)

* При наличии предварительной версии, новее, чем установленная версия отображается предварительного выпуска.

Чтобы понизить до более ранней версии библиотеки, вручную измените *libman.json* файла. При сохранении файла LibMan [операции восстановления](#restore-library-files):

* Удаляет избыточные файлов из предыдущей версии.
* Добавление новых и обновленных файлов из новой версии.

## <a name="additional-resources"></a>Дополнительные ресурсы

* <xref:client-side/libman/libman-cli>
* [Репозиторий LibMan на GitHub](https://github.com/aspnet/LibraryManager)
