---
title: Компоненты Razor, размещения моделей
author: guardrex
description: Сведения о Blazor на стороне клиента и сервера ASP.NET Core Razor компоненты на стороне размещения моделей.
monikerRange: '>= aspnetcore-3.0'
ms.author: riande
ms.custom: mvc
ms.date: 01/29/2019
uid: razor-components/hosting-models
ms.openlocfilehash: d1e0c472d7d10eeb4cef0da735cf703c98dd1645
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57042441"
---
# <a name="razor-components-hosting-models"></a>Компоненты Razor, размещения моделей

По [Дэниэл рот](https://github.com/danroth27)

Компоненты Razor — это веб-платформа, предназначен для запуска на стороне клиента в браузере в среде выполнения .NET на основе WebAssembly (*Blazor*) или на сервере в ASP.NET Core (*ASP.NET Core Razor компоненты*). Независимо от модели размещения модель, приложения и компонента *остаются теми же*. В этой статье рассматриваются доступные модели размещения.

## <a name="client-side-hosting-model"></a>Модель размещения на стороне клиента

[!INCLUDE[](~/includes/razor-components-preview-notice.md)]

Основной модели размещения для Blazor — выполнение стороне клиента в браузере. В этой модели Blazor приложение, его зависимости и среды выполнения .NET, загружаются в браузер. Приложение выполняется непосредственно в потоке пользовательского интерфейса браузера. Все обновления пользовательского интерфейса и обработка событий происходит в одном процессе. Ресурсы приложения можно развернуть в качестве статических файлов с помощью любого веб-сервера является предпочтительным (см. в разделе [узла и развертывать](xref:host-and-deploy/razor-components/index)).

![Blazor со стороны клиента: Blazor приложение выполняется в потоке пользовательского интерфейса в браузере.](hosting-models/_static/client-side.png)

Чтобы создать приложение Blazor, используя модель размещения на стороне клиента, используйте **Blazor** или **Blazor (ASP.NET Core с размещением)** шаблоны проектов (`blazor` или `blazorhosted` шаблон при использовании [команды dotnet new](/dotnet/core/tools/dotnet-new) команду в командной строке). Включенные *blazor.webassembly.js* дескрипторы сценариев:

* Загрузка среды выполнения .NET, приложения и его зависимости.
* Инициализация среды выполнения для запуска приложения.

Модель размещения клиентского обладает рядом преимуществ. Blazor на стороне клиента:

* Имеет не зависят от .NET на стороне сервера.
* Имеет широкие возможности интерактивного пользовательского интерфейса.
* Полностью использует ресурсы клиента и функции.
* Разгрузка работать с сервера клиенту.
* Поддерживает сценарии автономной работы.

Есть и недостатки, касающиеся размещения на стороне клиента. Blazor на стороне клиента:

* Ограничивает его возможности браузера.
* Требуется клиент с поддержкой оборудования и программного обеспечения (например, WebAssembly поддержка).
* Имеет больший размер загрузки и больше приложений время загрузки.
* Имеет меньше даже сложные среды выполнения .NET и средства поддержки (например, ограничения поддержки .NET Standard и отладки).

Visual Studio включает в себя **Blazor (ASP.NET Core размещенных)** шаблон проекта для создания приложения Blazor, которая выполняется на WebAssembly и размещается на сервере ASP.NET Core. Приложение ASP.NET Core предоставляет Blazor приложение клиентам, но в противном случае — это отдельный процесс. Blazor клиентского приложения могут взаимодействовать с сервером по сети с помощью вызовов веб-API или подключениями SignalR.

> [!IMPORTANT]
> Если приложения на стороне клиента Blazor обслуживается приложение ASP.NET Core, размещенное как приложение sub IIS, отключите унаследованный обработчик из модуля ASP.NET Core. Задать базовый путь приложения в нем Blazor *index.html* файл псевдоним IIS, используемый при настройке дочернего приложения в IIS.
>
> Дополнительные сведения см. в разделе [основной путь приложения](xref:host-and-deploy/razor-components/index#app-base-path).

## <a name="server-side-hosting-model"></a>Модель размещения на сервере

В модели размещения ASP.NET Core Razor компонентов на сервере приложение выполняется на сервере в приложение ASP.NET Core. Обновление элементов пользовательского интерфейса, обработка событий и вызовы JavaScript обрабатываются через подключение SignalR.

![ASP.NET Core Razor компонентов на сервере: Браузер взаимодействует с приложением (размещенный внутри приложения ASP.NET Core) на сервере подключения SignalR.](hosting-models/_static/server-side.png)

Чтобы создать приложение Razor компоненты, используя модель размещения на сервере, используйте **Blazor (на сервере в ASP.NET Core)** шаблона (`blazorserver` при использовании [команды dotnet new](/dotnet/core/tools/dotnet-new) в командной строке). Приложения ASP.NET Core размещено приложение на сервере компонентов Razor и задает конечную точку SignalR, где клиенты подключаются. Приложение ASP.NET Core ссылается на приложения `Startup` добавляемый класс:

* Службы компонентов Razor на стороне сервера.
* Приложение, чтобы конвейер обработки запросов.

[!code-csharp[](hosting-models/samples_snapshot/Startup.cs?highlight=5,27)]

*Blazor.server.js* скрипт&dagger; устанавливает соединение с клиентом. Это приложение отвечает за сохранение и восстановление состояние приложения при необходимости (например, в случае потери сетевого подключения).

Модель размещения на сервере имеет несколько преимуществ.

* Позволяет разработчикам писать приложения целиком, с помощью .NET и C# с помощью модели компонентов.
* Обеспечивает широкие возможности интерактивный пользовательский интерфейс и избежать обновления ненужные страницы.
* Имеет значительно меньший размер приложения, чем Blazor приложения на стороне клиента и загружается гораздо быстрее.
* Логикой компонента можно использовать все возможности сервера, включая использование любого совместимых API .NET Core.
* Выполняется на .NET Core на сервере, поэтому существующие .NET, оборудование, например, отладка, работает правильно.
* Работает с тонкие клиенты (например, браузеры, которые не поддерживают WebAssembly и ресурсов ограничение устройств).

Есть и недостатки, касающиеся размещения на сервере:

* Имеет большее время задержки: Любое действие пользователя прыжок сети.
* Предоставляет не поддержку автономной работы. В случае сбоя подключения клиента, приложение перестает работать.
* Обладает уменьшенной масштабируемости: Сервер управления подключениями нескольких клиентов и обработки состояния клиента.
* Требуется ASP.NET Core сервер для обслуживания приложения. Развертывание без сервера (например, из сети доставки Содержимого) невозможно.

&dagger;*Blazor.server.js* скрипт публикуется по следующему пути: *bin / {Отладка | Выпуск} / {ЦЕЛЕВОЙ ПЛАТФОРМЫ} /publish/ {имя_приложения}. Приложения/dist/_платформа*.
