---
uid: whitepapers/mvc3-release-notes
title: ASP.NET MVC 3 | Документация Майкрософт
author: rick-anderson
description: ''
ms.author: riande
ms.date: 10/06/2010
ms.assetid: f44c166e-7e91-48a0-a6f8-d9285f3594e5
msc.legacyurl: /whitepapers/mvc3-release-notes
msc.type: content
ms.openlocfilehash: 504202068f5db4f8614bba02e8066ffecfd15b48
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78501042"
---
# <a name="aspnet-mvc-3"></a>ASP.NET MVC 3

- [Обзор](#overview)
- [Заметки об установке](#installation-notes)
- [Требования к программному обеспечению](#software-requirements)
- [Документация](#documentation)
- [Поддержка](#support)
- [Обновление проекта ASP.NET MVC 2 до ASP.NET инструментов MVC 3](#upgrading)
- [Обновление инструментов ASP.NET MVC 3 (12 апреля, 2011)](#tu-changes)

    - [Диалоговое окно "Добавление контроллера" теперь может формировать контроллеры с представлениями и кодом доступа к данным.](#tu-AddControllerDialog)
    - [Улучшения в диалоговом окне "Создание проекта ASP.NET MVC 3"](#tu-ImprovementsNewDialogBox)
    - [Шаблоны проектов теперь включают Modernizr 1,7](#tu-Modernizr)
    - [Шаблоны проектов включают обновленные версии jQuery, пользовательского интерфейса jQuery и проверки jQuery.](#tu-UpdatedJQuery)
    - [Шаблоны проектов теперь включают ADO.NET Entity Framework 4,1 в качестве предварительно установленного пакета NuGet.](#tu-EF)
    - [Шаблоны проектов включают библиотеки JavaScript в виде предварительно установленных пакетов NuGet.](#tu-JavaScriptLibsNuget)
    - [Известные проблемы](#tu-KI)
- [ASP.NET MVC 3 RTM (13 января, 2011)](#MVC3RTM)

    - [Изменение: обновлена версия пользовательского интерфейса jQuery до 1.8.7](#RTM-1)
    - [Изменение: изменено значение по умолчанию Моделметадатапровидер обратно на Датааннотатионсмоделметадатапровидер](#RTM-2)
    - [Исправлено: вставленная часть выражения Razor, содержащая пробелы, приводит к его отмене.](#RTM-3)
    - [Исправлено. Переименование файла Razor, открытого в редакторе, отключает раскраску синтаксиса и IntelliSense](#RTM-4)
    - [Известные проблемы](#RTM-KI)
    - [Критические изменения](#RTM-BC)
- [ASP.NET MVC 3, версия-кандидат 2 (10 декабря 2010 г.)](#_Toc2)

    - [Шаблоны проектов изменились для включения jQuery 1.4.4, jQuery Validation 1,7 и jQuery UI 1.8.6 y UI 1.8.6](#_Toc2_1)
    - [Добавлен класс "Аддитионалметадатааттрибуте"](#_Toc2_2)
    - [Улучшенное формирование шаблонов представлений](#_Toc2_3)
    - [Добавлен метод HTML. RAW](#_Toc2_3)
    - [Переименование свойства Controller. ViewModel и свойства "View" в "ViewBag"](#_Toc2_4)
    - [Переименование класса "Контроллерсессионстатеаттрибуте" в "Сессионстатеаттрибуте"](#_Toc2_5)
    - [Переименование свойства "Fields" Ремотеаттрибуте в "Аддитионалфиелдс"](#_Toc2_6)
    - [Переименование "Скипрекуествалидатионаттрибуте" в "Алловхтмлаттрибуте"](#_Toc2_7)
    - [Изменен метод "HTML. Валидатионмессаже" для вывода первого полезного сообщения об ошибке](#_Toc2_8)
    - [Исправлено @model объявление, чтобы не добавлять пробелы в документ](#_Toc2_9)
    - [Добавлено свойство "FileExtensions" для просмотра модулей, поддерживающих имена файлов, относящиеся к подсистеме](#_Toc2_10)
    - [Исправлена вспомогательный метод "Лабелфор" для выдачи правильного значения для атрибута "for"](#_Toc2_11)
    - [Исправлен метод "RenderAction", чтобы явно задать приоритет значений во время привязки модели](#_Toc2_12)
    - [Критические изменения](#_Toc2_BC)
    - [Известные проблемы](#_Toc2_KI)
- [Версия-кандидат ASP.NET MVC 3 (Ноя 9, 2010)](#TOC_ASP_NET_3_RC)

    - [Новые возможности в версии-КАНДИДАТе ASP.NET MVC 3](#_Toc276711785)
    - [диспетчер пакетов NuGet](#_Toc276711786);
    - [Улучшено диалоговое окно "Создание проекта"](#_Toc276711787)
    - [Контроллеры, не имеющие сеансов](#_Toc276711788)
    - [Новые атрибуты проверки](#_Toc276711789)
    - [Новые перегрузки для методов "Лабелфор" и "Лабелформодел"](#_Toc276711790)
    - [Кэширование вывода дочерних действий](#_Toc276711791)
    - [Улучшения диалогового окна "Добавление представления"](#_Toc276711792)
    - [Детализированная проверка запросов](#_Toc276711793)
    - [Критические изменения](#_Toc276711794)
    - [Известные проблемы](#_Toc276711795)
- [Сценарии. Заметки о бета-версии MVC 3 (Oct 6, 2010)](#TOC_ASP_NET_3_Beta)

    - [Новые возможности в ASP.NET MVC 3 Beta](#0.1__Toc274034215)
    - [Диспетчер пакетов Нупакк](#0.1__Toc274034216)
    - [Диалоговое окно "Улучшенный новый проект"](#0.1__Toc274034217)
    - [Упрощенный способ указания строго типизированных моделей в представлениях Razor](#0.1__Toc274034218)
    - [Поддержка новых вспомогательных методов веб-страницы ASP.NET](#0.1__Toc274034219)
    - [Дополнительная поддержка введения зависимостей](#0.1__Toc274034220)
    - [Новая поддержка для ненавязчивой технологии AJAX на основе jQuery](#0.1__Toc274034221)
    - [Новая поддержка ненавязчивой проверки jQuery](#0.1__Toc274034222)
    - [Новые флаги на уровне приложения для проверки клиента и ненавязчивого JavaScript](#0.1__Toc274034223)
    - [Новая поддержка кода, выполняемого перед выполнением представлений](#0.1__Toc274034224)
    - [Новая поддержка синтаксиса для VBHTML Razor](#0.1__Toc274034225)
    - [Более детализированный контроль над Валидатеинпутаттрибуте](#0.1__Toc274034226)
    - [Вспомогательные индексы преобразуют знаки подчеркивания в дефисы для имен атрибутов HTML, заданных с помощью анонимных объектов](#0.1__Toc274034227)
    - [Исправления ошибок](#0.1__Toc274034228)
    - [Критические изменения](#0.1__Toc274034229)
    - [Известные проблемы](#0.1__Toc274034230)
- [Заявление об отказе](#0.1__Toc274034231)

<a id="overview"></a>
## <a name="overview"></a>Обзор

В этом документе описывается выпуск ASP.NET MVC 3 RTM для Visual Studio 2010. ASP.NET MVC — это платформа для разработки веб-приложений, использующая шаблон Model-View-Controller (MVC). Установщик ASP.NET MVC 3 содержит следующие компоненты:

- Компоненты среды выполнения MVC 3 ASP.NET
- ASP.NET MVC 3 средства Visual Studio 2010
- Веб-страницы ASP.NET компонентов времени выполнения
- Веб-страницы ASP.NET средств Visual Studio 2010
- Диспетчер пакетов Microsoft для .NET (NuGet)
- Обновление для Visual Studio 2010, которое обеспечивает поддержку синтаксис Razor. (Дополнительные сведения см. в статье базы знаний 2483190.)

Полный набор заметок о выпуске для каждой предварительной версии ASP.NET MVC 3 см. на веб-сайте ASP.NET по URL-адресу:

https://www.asp.net/learn/whitepapers/mvc3-release-notes

<a id="installation-notes"></a>
## <a name="installation-notes"></a>Замечания по установке

Чтобы установить ASP.NET MVC 3 RTM с помощью установщика веб-платформы (Web PI), посетите следующую страницу:

[https://www.microsoft.com/web/gallery/install.aspx?appid=MVC3](https://www.microsoft.com/web/gallery/install.aspx?appid=MVC3)

Кроме того, можно скачать установщик для ASP.NET MVC 3 RTM для Visual Studio 2010 со следующей страницы:

https://go.microsoft.com/fwlink/?LinkID=208140

ASP.NET MVC 3 можно установить и выполнять параллельно с ASP.NET MVC 2.

<a id="software-requirements"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

Для компонентов времени выполнения ASP.NET MVC 3 требуется следующее программное обеспечение:

- .NET Framework версии 4. 

    Для ASP.NET MVC 3 Tools Visual Studio 2010 требуется следующее программное обеспечение:
- Visual Studio 2010 или Visual Web Developer 2010 Express.

<a id="documentation"></a>
## <a name="documentation"></a>Документация

Документация по ASP.NET MVC доступна на веб-сайте MSDN по следующему URL-адресу:

[https://go.microsoft.com/fwlink/?LinkId=205717](https://go.microsoft.com/fwlink/?LinkId=205717)

Руководства и другие сведения о ASP.NET MVC доступны на странице MVC веб-сайта ASP.NET по следующему URL-адресу:

[https://www.asp.net/mvc/](../mvc/index.md)

<a id="support"></a>
## <a name="support"></a>Поддержка

Этот выпуск полностью поддерживается. Сведения о получении технической поддержки можно найти на [веб-сайте Служба поддержки Майкрософт](https://support.microsoft.com/).

Задавайте вопросы об этом выпуске на форуме ASP.NET MVC, где участники сообщества ASP.NET помогают друг другу, предоставляя полезные сведения:

[https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)

<a id="upgrading"></a>
## <a name="upgrading-an-aspnet-mvc-2-project-to-aspnet-mvc-3-tools-update"></a>Обновление проекта ASP.NET MVC 2 до ASP.NET инструментов MVC 3

ASP.NET MVC 3 можно установить параллельно с ASP.NET MVC 2 на том же компьютере, что дает гибкость в выборе времени обновления приложения ASP.NET MVC 2 до ASP.NET MVC 3.

Чтобы вручную обновить существующее приложение ASP.NET MVC 2 до версии 3, выполните следующие действия.

1. Создайте на компьютере пустой проект ASP.NET MVC 3. Этот проект будет содержать некоторые файлы, необходимые для обновления.
2. Скопируйте следующие файлы из проекта ASP.NET MVC 3 в папку проекта ASP.NET MVC 2. Необходимо обновить все ссылки на библиотеку jQuery с указанием нового имени файла ( jQuery-1.5.1.js): 

    - /Views/Web.config
    - /packages.config
    - /скриптс/\*. js
    - \*/контент/семес/.\*
3. Скопируйте папку *packages* из корневого решения проекта ASP.NET MVC 3 в корень решения, расположенного в каталоге, где находится SLN-файл решения.
4. Если проект ASP.NET MVC 2 содержит какие бы то ни было области, скопируйте файл/Виевс/веб.конфиг в папку *views* каждой области.
5. В файлах Web. config в проекте ASP.NET MVC 2 Глобальный поиск и замена версии ASP.NET MVC. Выполните поиск следующих данных: 

    [!code-console[Main](mvc3-release-notes/samples/sample1.cmd)]

    Замените его следующим кодом:

    [!code-console[Main](mvc3-release-notes/samples/sample2.cmd)]
6. В обозреватель решений удалите ссылку на *System. Web. MVC* (которая указывает на библиотеку DLL из версии 2), а затем добавьте ссылку на *System. Web. MVC* (v 3.0.0.0).
7. Добавьте ссылку на System. Web. веб-страницы. dll и System. Web. Вспомогательныеs. dll. Эти сборки расположены в следующих папках: 

    - %ProgramFiles%\ Microsoft ASP.NET\ASP.NET MVC 3\Assemblies
    - %ProgramFiles%\ Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies
8. В Обозревателе решений щелкните правой кнопкой имя проекта и выберите команду  Выгрузить проект. Затем еще раз щелкните имя проекта правой кнопкой мыши и выберите пункт изменить *имя_проекта*. csproj.
9. Укажите элемент *ProjectTypeGuids* и замените {F85E285D-A4E0-4152-9332-AB1D724D3325} на {E53F8FEA-EAE0-44A6-8774-FFD645390401}.
10. Сохраните изменения, щелкните правой кнопкой проект и выберите команду Перезагрузить проект.
11. В корневом файле Web. config приложения добавьте следующие параметры в раздел *сборки* . 

    [!code-xml[Main](mvc3-release-notes/samples/sample3.xml)]
12. Если проект ссылается на сторонние библиотеки, скомпилированные с помощью ASP.NET MVC 2, добавьте следующий выделенный элемент *bindingRedirect* в файл Web. config в корне приложения в разделе *конфигурации* : 

    [!code-xml[Main](mvc3-release-notes/samples/sample4.xml)]

<a id="tu-changes"></a>
## <a name="changes-in-aspnet-mvc-3-tools-update"></a>Изменения в ASP.NET MVC 3 Tools Update

В этом разделе описаны изменения, внесенные в выпуск обновления средств ASP.NET MVC 3 с момента выпуска ASP.NET MVC 3 RTM.

<a id="tu-AddControllerDialog"></a>
### <a name="add-controller-dialog-box-can-now-scaffold-controllers-with-views-and-data-access-code"></a>Диалоговое окно "Добавление контроллера" теперь позволяет формировать контроллеры с представлениями и кодом доступа к данным.

Формирование шаблонов — это быстрый способ формирования контроллеров и представления для приложения. После создания кода его можно изменить в соответствии с требованиями проекта.

Чтобы открыть диалоговое окно *Добавление контроллера* в ASP.NET MVC 3, щелкните правой кнопкой мыши папку *controllers* в *Обозреватель решений*, нажмите кнопку *Добавить*, а затем выберите пункт *контроллер*. Это диалоговое окно улучшено и теперь предоставляет дополнительные параметры формирования шаблонов.

![](mvc3-release-notes/_static/image1.png)

По умолчанию доступно три шаблона.

#### <a name="empty-controller"></a>Пустой контроллер

Этот шаблон создает пустой файл контроллера. Этот шаблон эквивалентен не проверке *добавления действий для сценариев создания, редактирования, сведений и удаления* в предыдущих версиях ASP.NET MVC. При выборе данного шаблона другие параметры недоступны.

#### <a name="controller-with-empty-readwrite-actions"></a>Контроллер с пустыми действиями чтения и записи

Этот шаблон создает файл контроллера со всеми необходимыми методами, но без реализации их кода. Этот шаблон эквивалентен проверке *добавления действий для создания, изменения, сведения и удаления сценариев* в предыдущих версиях ASP.NET MVC. При выборе данного шаблона другие параметры недоступны.

#### <a name="controller-with-readwrite-actions-and-views-using-entity-framework"></a>Контроллер с действиями чтения и записи и представлениями с использованием платформы Entity Framework

Этот шаблон позволяет быстро создавать интерфейс пользователя для ввода данных. Он создает код, обрабатывающий ряд общих требований и сценариев, таких как следующие:

- *Доступ к данным*. Созданный код читает сущности из базы данных и записывает их. Он работает с Entity Framework Code First подходом, если выбрать существующий класс контекста данных или если вы разрешите шаблону создать новый класс *DbContext* . Он также работает с Entity Framework Database First или Model First подходом, если выбрать существующий класс *ObjectContext* .
- *Проверка*. Созданный код использует привязку к модели ASP.NET MVC и метаданные для проверки передачи форм в соответствии с правилами, объявленными в классе модели. Сюда входят встроенные правила проверки, такие как *обязательные* и *StringLength* атрибуты, а также пользовательские правила проверки.
- *Связи «один ко многим*». Если определить связи "один ко многим" внешнего ключа между классами модели, созданный код сформирует раскрывающиеся списки для выбора связанных сущностей. Например, можно определить следующие классы модели в соответствии с соглашениями Entity Framework Code First: 

    [!code-csharp[Main](mvc3-release-notes/samples/sample5.cs)]

    После формирования шаблона контроллера для класса *Product* его представления позволят пользователям выбрать объект *категории* для каждого экземпляра *продукта* .

    Этот шаблон включает дополнительные параметры в диалоговом окне *Добавление контроллера* . Для *класса Model*можно выбрать любой класс модели в решении, определяющий тип данных, которые пользователи могут создавать или изменять.
- Если используется Entity Framework Code First, можно выбрать любой класс модели.
- При использовании подхода Entity Framework Database First или Entity Framework Model First следует выбрать класс сущности, определенный в концептуальной модели.

Для *класса контекста данных*можно выбрать следующие параметры:

- Если вы хотите использовать Code First и не имеете существующего класса контекста данных, выберите * * новый контекст данных * *. После этого будет создан контекста класса данных.
- Если применяется подход Code First и существует класс контекста данных, выберите его. Он будет загружен для использования выбранного класса модели.
- При использовании подхода Database First или Model First выберите класс контекста объекта.

Для представлений выберите модуль просмотра, который будет использоваться, или параметр Нет, если не требуется формировать представления.

Можно выбрать дополнительно найдете указать дополнительные параметры для создаваемых представлений. Например, можно выбрать макет или главную страницу.

<a id="tu-ImprovementsNewDialogBox"></a>
### <a name="improvements-to-the-aspnet-mvc-3-new-project-dialog-box"></a>Усовершенствования диалогового окна "Создание проекта ASP.NET MVC 3"

Диалоговое окно, используемое для создания новых проектов ASP.NET MVC 3, включает несколько усовершенствований, как указано ниже.

![](mvc3-release-notes/_static/image2.png)

#### <a name="new-intranet-project-template"></a>Новый шаблон "Проект интрасети"

В списке Шаблон проекта содержится новый шаблон Приложение интрасети. Он содержит параметры для создания веб-приложения с использованием проверки подлинности Windows вместо проверки подлинности на основе форм. Поскольку приложению интрасети требуются некоторые параметры IIS, которые не могут быть инкапсулированы в шаблоне проекта, шаблон содержит файл readme с инструкциями о том, как сделать шаблон проекта работоспособным в службах IIS. Документация для нового шаблона приложения в интрасети доступна на веб-сайте MSDN по следующему URL-адресу:

[https://msdn.microsoft.com/library/gg703322(VS.98).aspx](https://msdn.microsoft.com/library/gg703322(VS.98).aspx)

#### <a name="project-templates-are-now-html5-enabled"></a>Шаблоны проектов теперь поддерживают HTML5

Диалоговое окно создания проекта теперь содержит параметр добавления функций HTML5 в шаблоны проектов. Выбор параметра приводит к созданию представлений, содержащих новые элементы `<header>`, `<footer>`и `<navigation>` HTML5.

Учтите, более ранние версии браузеров не поддерживают теги HTML5. Для устранения этой проблемы шаблоны проектов HTML5 содержат ссылку на библиотеку Modernizr. (См. следующий раздел).

<a id="tu-Modernizr"></a>
### <a name="project-templates-now-include-modernizr-17"></a>В шаблоны проектов добавлена библиотека Modernizr 1.7

Modernizr — это библиотека JavaScript, которая обеспечивает поддержку CSS 3 и HTML5 в браузерах, которые пока не поддерживают эти функции. Эта библиотека включена в качестве предварительно установленного пакета NuGet в шаблоны для проектов ASP.NET MVC 3. Дополнительные сведения о Modernizr см. в разделе [http://www.modernizr.com/](http://www.modernizr.com/).

<a id="tu-UpdatedJQuery"></a>
### <a name="project-templates-include-updated-versions-of-jquery-jquery-ui-and-jquery-validation"></a>В шаблоны проектов включены обновленные версии jQuery, jQuery UI и jQuery Validation

Шаблоны проектов теперь содержат следующие версии скриптов jQuery:

- jQuery 1.5.1;
- jQuery Validation 1.8;
- jQuery UI 1.8.11.

Эти библиотеки включены в виде предустановленных пакетов NuGet.

<a id="tu-EF"></a>
### <a name="project-templates-now-include-adonet-entity-framework-41-as-a-pre-installed-nuget-package"></a>В шаблоны проектов добавлена платформа ADO.NET Entity Framework 4.1 в виде предустановленного пакета NuGet

ADO.NET Entity Framework 4,1 включает функцию Code First. Code First — это новый шаблон разработки для платформы ADO.NET Entity Framework, предоставляющий альтернативу существующим шаблонам Database First и Model First.

Шаблон Code First предназначен для определения модели с помощью классов POCO ("старые объекты CLR"), написанных на Visual Basic или C#. Эти классы затем можно сопоставить с существующей базой данных или использовать для создании схемы базы данных. Дополнительную конфигурацию можно указать с помощью атрибутов *заметок* к данным или с помощью интерфейсов API Fluent.

Документация по использованию кода Фирствис ASP.NET MVC доступна на веб-сайте ASP.NET по следующим URL-адресам:

[https://www.asp.net/mvc/tutorials/getting-started-with-mvc3-part1-cs](../mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) [https://www.asp.net/entity-framework/tutorials/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](../mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md)

<a id="tu-JavaScriptLibsNuget"></a>
### <a name="project-templates-include-javascript-libraries-as-pre-installed-nuget-packages"></a>В шаблоны проектов включены библиотеки JavaScript в виде предустановленных пакетов NuGet

При создании нового проекта ASP.NET MVC 3 проект включает файлы JavaScript, упомянутые ранее (например, библиотеку Modernizr), устанавливая их с помощью NuGet вместо непосредственного добавления скриптов в папку Scripts в шаблоне проекта. содержимое. Это позволяет использовать NuGet для обновления скриптов до последних версий при их выходе.

Например, с учетом частоты выхода новых выпусков jQuery версия jQuery, включенная в шаблон проекта, через какое-то время устареет. Но так как компонент jQuery включен как устанавливаемый пакет NuGet, пользователь будет уведомлен в диалоговом окне NuGet о доступности новых версий jQuery.

Так как jQuery включает номер версии в имя файла, обновление jQuery до последней версии также требует обновления тега `<script>`, который ссылается на файл jQuery, для использования нового имени файла. Другие включенные библиотеки скриптов не содержат номер версии в имени скрипта, поэтому их можно легко обновить до последних версий.

<a id="tu-KI"></a>
## <a name="known-issues"></a>Известные проблемы

- В некоторых случаях установка может завершиться ошибкой с сообщением об ошибке "сбой установки с кодом ошибки (0x80070643)". Сведения о том, как обойти эту ошибку, см. в [статье базы знаний 2531566](https://support.microsoft.com/kb/2531566).
- При формировании шаблонов для добавления контроллера не формируются сущности, использующие преимущества поддержки наследования сущностей в платформе Entity Framework. Например, при наличии базового класса *Person* , наследуемого классом *Student* , формирование шаблонов для класса *Student* приведет к созданию кода, который не будет компилироваться.
- Создание нового проекта ASP.NET MVC 3 в папке решения вызывает ошибку *NullReferenceException* . Обходной путь состоит в том, чтобы создать проект ASP.NET MVC 3 в корне решения, а затем переместить его в папку решения.
- Синтаксис IntelliSense и Razor не работает, если установлен ReSharper. Если вы уже установили и хотите воспользоваться преимуществами поддержки Razor IntelliSense в ASP.NET MVC 3, ознакомьтесь с записью [Razor IntelliSense и четче](https://blogs.jetbrains.com/dotnet/2010/11/razor-intellisense-and-resharper/) в блоге Хади Харири, где обсуждаются способы их совместного использования.
- Во время установки условия лицензионного соглашения отображаются в меньшем окне, чем это требуется.
- При редактировании представления Razor (. cshtml или. *VBHTML* -файл), представления. ASP.NET MVC 3 не включает фрагменты для представлений Razor. аспксселектинг фрагмент кода для ASP.NET MVC покажет фрагменты для
- Если установить ASP.NET MVC 3 для Visual Web Developer Express на компьютер, на котором не установлен Visual Studio, а затем установить Visual Studio, необходимо переустановить ASP.NET MVC 3. Компоненты Visual Studio и Visual Web Developer Express для совместного использования, обновленные установщиком ASP.NET MVC 3. Эта же ситуация возникает при установке ASP.NET MVC 3 для Visual Studio на компьютере, на котором не установлен Visual Web Developer Express, и последующей установке Visual Web Developer Express.

<a id="MVC3RTM"></a>
## <a name="changes-in-aspnet-mvc-3-rtm"></a>Изменения в ASP.NET MVC 3 RTM

В этом разделе описаны изменения и исправления ошибок, внесенные в выпуске ASP.NET MVC 3 RTM с момента выпуска RC2.

<a id="RTM-1"></a>
### <a name="change-updated-the-version-of-jquery-ui-to-187"></a>Изменение: обновлена версия пользовательского интерфейса jQuery до 1.8.7

Шаблоны проектов ASP.NET MVC для Visual Studio были обновлены для включения последней версии библиотеки пользовательского интерфейса jQuery. Шаблоны также включают минимальный набор файлов ресурсов, необходимый для работы пользовательского интерфейса jQuery, например связанные файлы CSS и изображения.

<a id="RTM-2"></a>
### <a name="change-changed-the-default-modelmetadataprovider-back-to-dataannotationsmodelmetadataprovider"></a>Изменение: изменено значение по умолчанию Моделметадатапровидер обратно на Датааннотатионсмоделметадатапровидер

В выпуске RC2 ASP.NET MVC 3 появился класс *качеддатааннотатионсметадатапровидер* , который предоставил кэширование поверх существующего класса *датааннотатионсмоделметадатапровидер* в качестве улучшения производительности. Однако в этой реализации были обнаружены некоторые ошибки, поэтому изменение было отменено и перемещено в проект будущих проектов MVC, который доступен в [ASP.NET](https://github.com/aspnet/AspNetWebStack).

<a id="RTM-3"></a>
### <a name="fixed-pasting-part-of-a-razor-expression-that-contains-whitespace-results-in-it-being-reversed"></a>Исправлено: вставленная часть выражения Razor, содержащая пробелы, приводит к его отмене.

В предварительных версиях ASP.NET MVC 3 при вставке части выражения Razor, содержащего пробелы, в файл Razor результирующее выражение будет отменено. Например, рассмотрим следующий блок кода Razor:

[!code-cshtml[Main](mvc3-release-notes/samples/sample6.cshtml)]

Если выбрать текст "First param" в первом методе и вставить его в качестве аргумента во второй метод, результат будет следующим:

[!code-cshtml[Main](mvc3-release-notes/samples/sample7.cshtml)]

Правильное поведение заключается в том, что операция вставки должна привести к следующим результатам:

[!code-cshtml[Main](mvc3-release-notes/samples/sample8.cshtml)]

Эта проблема была исправлена в выпуске RTM, чтобы правильно сохранить выражение во время операции вставки.

<a id="RTM-4"></a>
### <a name="fixed-renaming-a-razor-file-that-is-opened-in-the-editor-disables-syntax-colorization-and-intellisense"></a>Исправлено. Переименование файла Razor, открытого в редакторе, отключает раскраску синтаксиса и IntelliSense

Переименование файла Razor с помощью обозреватель решений во время открытия файла в окне редактора приводит к тому, что выделение синтаксиса и IntelliSense перестают работать с этим файлом. Это было исправлено, поэтому выделение и технология IntelliSense сохраняются после переименования.

<a id="RTM-KI"></a>
## <a name="known-issues"></a>Известные проблемы

- Если закрыть бета-версию Visual Studio 2010 с пакетом обновления 1 (SP1), пока открыта консоль диспетчера пакетов NuGet, Visual Studio выполнит сбой и попытается перезапуститься. Это будет исправлено в выпуске RTM Visual Studio 2010 с пакетом обновления 1 (SP1).
- Установщик ASP.NET MVC 3 может установить только начальную версию диспетчера пакетов NuGet. После установки начальной версии NuGet можно установить и обновить с помощью диспетчера расширений Visual Studio. Если у вас уже установлен NuGet, перейдите в коллекцию расширений Visual Studio, чтобы обновить ее до последней версии NuGet.
- Создание нового проекта ASP.NET MVC 3 в папке решения вызывает ошибку *NullReferenceException* . Обходной путь состоит в том, чтобы создать проект ASP.NET MVC 3 в корне решения, а затем переместить его в папку решения.
- Выполнение установщика может занять намного больше времени, чем предыдущие версии ASP.NET MVC. Это связано с тем, что обновляет компоненты Visual Studio 2010.
- Синтаксис IntelliSense и Razor не работает, если установлен ReSharper. Если вы уже установили и хотите воспользоваться преимуществами поддержки Razor IntelliSense в ASP.NET MVC 3, ознакомьтесь с записью [Razor IntelliSense и четче](https://blogs.jetbrains.com/dotnet/2010/11/razor-intellisense-and-resharper/) в блоге Хади Харири, где обсуждаются способы их совместного использования.
- В представлениях ККШТМЛ и VBHTML, созданных с помощью бета-версии ASP.NET MVC 3, действия сборки не заданы правильно, в результате чего эти типы представлений будут пропущены при публикации проекта. Значение действия сборки для этих файлов должно быть равно "Content". ASP.NET MVC 3 RTM устраняет эту проблему для новых файлов, но не корректирует параметр для существующих файлов проекта, созданного с предварительными версиями.
- ![](mvc3-release-notes/_static/image3.png)
- Во время установки условия лицензионного соглашения отображаются в меньшем окне, чем это требуется.
- При редактировании представления Razor (файл. cshtml) пункт меню Перейти к контроллеру в Visual Studio будет недоступен, а фрагменты кода не будут отображаться.
- Если установить ASP.NET MVC 3 для Visual Web Developer Express на компьютер, на котором не установлен Visual Studio, а затем установить Visual Studio, необходимо переустановить ASP.NET MVC 3. Компоненты Visual Studio и Visual Web Developer Express для совместного использования, обновленные установщиком ASP.NET MVC 3. Эта же ситуация возникает при установке ASP.NET MVC 3 для Visual Studio на компьютере, на котором не установлен Visual Web Developer Express, и последующей установке Visual Web Developer Express.

<a id="RTM-BC"></a>
## <a name="breaking-changes"></a>Критические изменения

- В предыдущих версиях ASP.NET MVC фильтры действий создаются для каждого запроса, за исключением нескольких случаев. Такое поведение никогда не было гарантированно, но только сведения о реализации и контракт для фильтров были рассматривать их без отслеживания состояния. В ASP.NET MVC 3 фильтры кэшируются более агрессивно. Таким образом, любые фильтры настраиваемых действий, которые неправильно хранят состояние экземпляра, могут быть разорваны.
- Порядок выполнения фильтров исключений изменился для фильтров исключений с одинаковым значением *порядка* . В ASP.NET MVC 2 и более ранних версиях фильтры исключений на контроллере, имеющие то же значение *порядка* , что и в методе действия, выполняются перед фильтрами исключений в методе действия. Обычно это происходит, когда фильтры исключений применяются без заданного значения *порядка* . В ASP.NET MVC 3 этот порядок был отменен, чтобы сначала выполнялся наиболее конкретный обработчик исключений. Как и в предыдущих версиях, если свойство *Order* задано явно, фильтры выполняются в указанном порядке.
- В базовый класс *виртуалпаспровидервиевенгине* было добавлено новое свойство с именем *FileExtensions* . Когда ASP.NET ищет представление по пути (не по имени), учитываются только представления с расширением файла, содержащиеся в списке, указанном этим новым свойством. Это критическое изменение в приложениях, где зарегистрирован пользовательский поставщик сборки, чтобы включить пользовательское расширение файла для представлений веб-форм и где поставщик ссылается на эти представления, используя полный путь, а не имя. Чтобы решить эту проблему, измените значение свойства *FileExtensions* , включив в него расширение пользовательского файла.
- Пользовательские реализации фабрики контроллеров, которые напрямую реализуют интерфейс *иконтроллерфактори* , должны предоставить реализацию нового метода *жетконтроллерсессионбехавиор* , который был добавлен в интерфейс в этом выпуске. Как правило, рекомендуется не реализовывать этот интерфейс напрямую, а создавать производный класс от *дефаултконтроллерфактори*.

<a id="_Toc2"></a>
## <a name="changes-in-aspnet-mvc-3-rc2"></a>Изменения в ASP.NET MVC 3 RC2

В этом разделе описываются изменения (новые функции и исправления ошибок), внесенные в выпуске ASP.NET MVC 3 RC2 с момента выпуска версии-КАНДИДАТа.

<a id="_Toc2_1"></a>
### <a name="project-templates-changed-to-include-jquery-144-jquery-validation-17-and-jquery-ui-186"></a>Шаблоны проектов изменены для включения jQuery 1.4.4, jQuery Validation 1,7 и 1.8.6 пользовательского интерфейса jQuery.

Шаблоны проектов для ASP.NET MVC 3 теперь включают последние версии jQuery, jQuery Validation и UI jQuery. Пользовательский интерфейс jQuery — это новое дополнение к шаблонам проекта, которое предоставляет полезные мини-приложения пользовательского интерфейса. Дополнительные сведения о пользовательском интерфейсе jQuery см. на странице домашней страницы: [http://jqueryui.com/](http://jqueryui.com/).

<a id="_Toc2_2"></a>
### <a name="added-additionalmetadataattribute-class"></a>Добавлен класс "Аддитионалметадатааттрибуте"

Для заполнения словаря *ModelMetadata. аддитионалвалуес* для свойства модели можно использовать класс *аддитионалметадатааттрибуте* .

Например, предположим, что модель представления имеет свойства, которые должны отображаться только для администратора. Эту модель можно снабдить новым атрибутом, используя Админонли в качестве ключа и значением true в качестве значения, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample9.cs)]

Эти метаданные доступны любому шаблону отображения или редактора при отрисовке модели представления продукта. Разработчик приложения может интерпретировать сведения о метаданных.

<a id="_Toc2_3"></a>
### <a name="improved-view-scaffolding"></a>Улучшенное формирование шаблонов представлений

Шаблоны T4, используемые для представлений формирования шаблонов, теперь создают вызовы вспомогательных методов шаблона, таких как *едиторфор* , а не вспомогательные методы, такие как *текстбоксфор*. Это изменение улучшает поддержку метаданных модели в форме атрибутов заметки к данным, когда диалоговое окно Добавление представления создает представление.

Формирование шаблонов добавления представления также включает улучшенное обнаружение и использование сведений о первичном ключе модели на основе соглашения. Например, диалоговое окно Добавление представления использует эти сведения, чтобы гарантировать, что значение первичного ключа не будет сформировано как редактируемое поле формы.

Шаблоны редактирования и создания по умолчанию включают ссылки на скрипты jQuery, необходимые для проверки клиента.

<a id="_Toc2_4"></a>
### <a name="added-htmlraw-method"></a>Добавлен метод HTML. RAW

По умолчанию модуль представления Razor HTML кодирует все значения. Например, следующий фрагмент кода кодирует HTML внутри переменной приветствия, чтобы он отображался на странице как `<strong>Hello World!</strong>`.

[!code-cshtml[Main](mvc3-release-notes/samples/sample10.cshtml)]

Новый метод *HTML. RAW* предоставляет простой способ отображения незакодированного HTML, когда содержимое известно как надежное. В следующем примере отображается та же строка, но строка отображается как разметка:

[!code-cshtml[Main](mvc3-release-notes/samples/sample11.cshtml)]

<a id="_Toc2_5"></a>
### <a name="renamed-controllerviewmodel-property-and-the-view-property-to-viewbag"></a>Переименование свойства Controller. ViewModel и свойства "View" в "ViewBag"

Ранее свойство *ViewModel* *контроллера* соответствует свойству *View* представления. Оба эти свойства предоставляют способ доступа к значениям объекта *ViewDataDictionary* с помощью динамического синтаксиса доступа к свойствам. Оба свойства были переименованы для того, чтобы избежать путаницы и быть более согласованными.

<a id="_Toc2_6"></a>
### <a name="renamed-controllersessionstateattribute-class-to-sessionstateattribute"></a>Переименование класса "Контроллерсессионстатеаттрибуте" в "Сессионстатеаттрибуте"

Класс *контроллерсессионстатеаттрибуте* появился в версии-кандидате ASP.NET MVC 3. Свойство было переименовано для более краткого приведения.

<a id="_Toc2_7"></a>
### <a name="renamed-remoteattribute-fields-property-to-additionalfields"></a>Переименование свойства "Fields" Ремотеаттрибуте в "Аддитионалфиелдс"

Свойство *Fields* класса *ремотеаттрибуте* привело к путанице между пользователями. Переименование этого свойства в *аддитионалфиелдс* объясняет его намерение.

<a id="_Toc2_8"></a>
### <a name="renamed-skiprequestvalidationattribute-to-allowhtmlattribute"></a>Переименование "Скипрекуествалидатионаттрибуте" в "Алловхтмлаттрибуте"

Атрибут *скипрекуествалидатионаттрибуте* был переименован в *алловхтмлаттрибуте* , чтобы лучше представить предполагаемое использование.

<a id="_Toc2_9"></a>
### <a name="changed-htmlvalidationmessage-method-to-display-the-first-useful-error-message"></a>Изменен метод "HTML. Валидатионмессаже" для вывода первого полезного сообщения об ошибке

Метод *HTML. валидатионмессаже* был исправлен для отображения первого полезного сообщения об ошибке вместо простого отображения первой ошибки.

Во время привязки модели словарь *ModelState* может быть заполнен из нескольких источников с сообщениями об ошибках для свойства, включая из самой модели (если она реализует *ивалидатаблеобжект*), от атрибутов проверки, примененных к свойству, и от исключений, создаваемых при доступе к свойству.

Когда метод *HTML. валидатионмессаже* отображает сообщение проверки, он пропускает записи состояния модели, содержащие исключение, так как они обычно не предназначены для конечного пользователя. Вместо этого метод ищет первое сообщение проверки, не связанное с исключением, и отображает это сообщение. Если такое сообщение не найдено, по умолчанию используется общее сообщение об ошибке, связанное с первым исключением.

<a id="_Toc2_10"></a>
### <a name="fixed-model-declaration-to-not-add-whitespace-to-the-document"></a>Исправлено @model объявление, чтобы не добавлять пробелы в документ

В более ранних выпусках объявление `@model` в верхней части представления добавило пустую строку в отображаемые выходные данные HTML. Это было исправлено, поэтому объявление не вводит пробел.

<a id="_Toc2_11"></a>
### <a name="added-fileextensions-property-to-view-engines-to-support-engine-specific-file-names"></a>Добавлено свойство "FileExtensions" для просмотра модулей, поддерживающих имена файлов, относящиеся к подсистеме

Обработчик представлений может возвращать представление, используя явный путь к представлению, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample12.cs)]

Первый обработчик представлений всегда пытается отобразить представление. По умолчанию обработчик представлений веб-форм является первым обработчиком представлений. так как обработчик веб-форм не может визуализировать представление Razor, возникает ошибка. Обработчики представлений теперь имеют свойство *FileExtensions* , которое используется для указания расширений файлов, которые они поддерживают. Это свойство проверяется, когда ASP.NET определяет, может ли обработчик представлений визуализировать файл. Это критическое изменение, и дополнительные сведения содержатся в разделе [критические изменения](#_Toc2_BC) этого документа.

<a id="_Toc2_12"></a>
### <a name="fixed-labelfor-helper-to-emit-the-correct-value-for-the-for-attribute"></a>Исправлена вспомогательный метод "Лабелфор" для выдачи правильного значения для атрибута "for"

Ошибка исправлена в том месте, когда метод *лабелфор* подготовит атрибут *для* атрибута, который соответствует атрибуту *имени* элемента *ввода* , а не его идентификатору. В соответствии с W3C атрибут *for* должен соответствовать идентификатору *входного* элемента.

<a id="_Toc2_13"></a>
### <a name="fixed-renderaction-method-to-give-explicit-values-precedence-during-model-binding"></a>Исправлен метод "RenderAction", чтобы явно задать приоритет значений во время привязки модели

В более ранних версиях явное значение, переданное в метод *RenderAction* , было пропущено в пользу значений текущих форм во время привязки модели в дочернем действии. Это исправление гарантирует, что явные значения имеют приоритет во время привязки модели.

<a id="_Toc2_BC"></a>
## <a name="breaking-changes"></a>Критические изменения

- В предыдущих версиях ASP.NET MVC фильтры действий были созданы для каждого запроса, за исключением нескольких случаев. Такое поведение никогда не было гарантированно, но только сведения о реализации и контракт для фильтров были рассматривать их без отслеживания состояния. В ASP.NET MVC 3 фильтры кэшируются более агрессивно. Таким образом, любые фильтры настраиваемых действий, которые неправильно хранят состояние экземпляра, могут быть разорваны.
- Порядок выполнения фильтров исключений изменился для фильтров исключений с одинаковым значением *порядка* . В ASP.NET MVC 2 и более ранних версиях фильтры исключений на контроллере, имеющие то же значение *порядка* , что и в методе действия, были выполнены до фильтров исключений для метода действия. Обычно это происходит, когда фильтры исключений были применены без заданного значения *порядка* . В ASP.NET MVC 3 этот порядок был отменен, чтобы сначала выполнялся наиболее конкретный обработчик исключений. Как и в предыдущих версиях, если свойство *Order* задано явно, фильтры выполняются в указанном порядке.
- В базовый класс *виртуалпаспровидервиевенгине* было добавлено новое свойство с именем *FileExtensions* . Когда ASP.NET ищет представление по пути (не по имени), учитываются только представления с расширением файла, содержащиеся в списке, указанном этим новым свойством. Это критическое изменение в приложениях, где зарегистрирован пользовательский поставщик сборки, чтобы включить пользовательское расширение файла для представлений веб-форм и где поставщик ссылается на эти представления, используя полный путь, а не имя. Чтобы решить эту проблему, измените значение свойства *FileExtensions* , включив в него расширение пользовательского файла.
- Пользовательские реализации фабрики контроллеров, которые напрямую реализуют интерфейс *иконтроллерфактори* , должны предоставить реализацию нового метода *жетконтроллерсессионбехавиор* , который был добавлен в интерфейс в этом выпуске. Как правило, рекомендуется не реализовывать этот интерфейс напрямую, а создавать производный класс от *дефаултконтроллерфактори*.

<a id="_Toc2_KI"></a>
## <a name="known-issues"></a>Известные проблемы

- Установщик ASP.NET MVC 3 может установить только начальную версию диспетчера пакетов NuGet. После установки начальной версии NuGet можно установить и обновить с помощью диспетчера расширений Visual Studio. Если у вас уже установлен NuGet, перейдите в коллекцию расширений Visual Studio, чтобы обновить ее до последней версии NuGet.
- Создание нового проекта ASP.NET MVC 3 в папке решения вызывает ошибку *NullReferenceException* . Обходной путь состоит в том, чтобы создать проект ASP.NET MVC 3 в корне решения, а затем переместить его в папку решения.
- Выполнение установщика может занять намного больше времени, чем предыдущие версии ASP.NET MVC. Это связано с тем, что обновляет компоненты Visual Studio 2010.
- Синтаксис IntelliSense и Razor не работает, если установлен ReSharper. Если вы уже установили и хотите воспользоваться преимуществами поддержки Razor IntelliSense в ASP.NET MVC 3 RC2, ознакомьтесь с записью [Razor IntelliSense и четче](https://blogs.jetbrains.com/dotnet/2010/11/razor-intellisense-and-resharper/) в блоге Хади Харири, где обсуждаются способы их совместного использования.
- В представлениях CSHTML и VBHTML, созданных с помощью бета-версии ASP.NET MVC 3, действия сборки не заданы правильно, в результате чего эти типы представлений будут пропущены при публикации проекта. Значение *действия сборки* для этих файлов должно быть равно Content. ASP.NET MVC 3 RC2 устраняет эту проблему для новых файлов, но не корректирует параметр для существующих файлов проекта, созданного с помощью бета-версии.![](mvc3-release-notes/_static/image4.png)
- Во время установки условия лицензионного соглашения отображаются в меньшем окне, чем это требуется.
- При редактировании представления Razor (файл. cshtml) пункт меню Перейти к контроллеру в Visual Studio будет недоступен, а фрагменты кода не будут отображаться.
- Если установить ASP.NET MVC 3 для Visual Web Developer Express на компьютер, на котором не установлен Visual Studio, а затем установить Visual Studio, необходимо переустановить ASP.NET MVC 3. Компоненты Visual Studio и Visual Web Developer Express для совместного использования, обновленные установщиком ASP.NET MVC 3. Эта же ситуация возникает при установке ASP.NET MVC 3 для Visual Studio на компьютере, на котором не установлен Visual Web Developer Express, и последующей установке Visual Web Developer Express.
- При установке ASP.NET MVC 3 RC 2 не обновляется NuGet, если он уже установлен. Чтобы обновить NuGet, перейдите в Диспетчер расширений Visual Studio, и он должен отобразиться как доступное обновление. Вы можете обновить NuGet до последнего выпуска.

<a id="TOC_ASP_NET_3_RC"></a>
## <a name="aspnet-mvc-3-release-candidate"></a>Версия-кандидат ASP.NET MVC 3

Версия-кандидат ASP.NET MVC выпущена 9 ноября 2010.

<a id="_Toc276711785"></a>
## <a name="new-features-in-aspnet-mvc-3-rc"></a>Новые возможности в версии-КАНДИДАТе ASP.NET MVC 3

В этом разделе описаны функции, которые появились в выпуске ASP.NET MVC 3 с момента выпуска бета-версии.

<a id="_Toc276711786"></a>
### <a name="nuget-package-manager"></a>Диспетчер пакетов NuGet

ASP.NET MVC 3 включает диспетчер пакетов NuGet (прежнее название — Нупакк), который представляет собой интегрированное средство управления пакетами для добавления библиотек и средств в проекты Visual Studio. Это средство автоматизирует действия, выполняемые разработчиками сегодня для получения библиотеки в исходное дерево.

Вы можете работать с NuGet в качестве программы командной строки, как интегрированное окно консоли в Visual Studio 2010, из контекстного меню Visual Studio и как набор командлетов PowerShell.

Дополнительные сведения о NuGet см. в [документации по NuGet](https://docs.microsoft.com/nuget/).

<a id="_Toc276711787"></a>
### <a name="improved-new-project-dialog-box"></a>Улучшено диалоговое окно "Создание проекта"

При создании нового проекта диалоговое окно Новый проект теперь позволяет указать обработчик представлений, а также тип проекта ASP.NET MVC.

![](mvc3-release-notes/_static/image5.png)

В этом выпуске включена поддержка изменения списка шаблонов и обработчиков представлений, перечисленных в диалоговом окне.

По умолчанию используются следующие шаблоны:

Пустой. Содержит минимальный набор файлов для проекта MVC ASP.NET, включая структуру каталогов по умолчанию для проектов ASP.NET MVC, файл Site. CSS, содержащий стили по умолчанию ASP.NET MVC и каталог Scripts, который содержит файлы JavaScript по умолчанию.

Интернет – приложение. Содержит образец функциональности, демонстрирующий использование поставщика членства с ASP.NET MVC.

Список шаблонов проектов, отображаемых в диалоговом окне, указывается в реестре Windows.

<a id="_Toc276711788"></a>
### <a name="sessionless-controllers"></a>Контроллеры, не имеющие сеансов

Новый *контроллерсессионстатеаттрибуте* предоставляет больший контроль над поведением состояния сеанса для контроллеров, указывая значение перечисления [System. Web. sessionState. сессионстатебехавиор](https://msdn.microsoft.com/library/system.web.sessionstate.sessionstatebehavior.aspx) .

В следующем примере показано, как отключить состояние сеанса для всех запросов к контроллеру.

[!code-csharp[Main](mvc3-release-notes/samples/sample13.cs)]

В следующем примере показано, как задать состояние сеанса только для чтения для всех запросов к контроллеру.

[!code-csharp[Main](mvc3-release-notes/samples/sample14.cs)]

<a id="_Toc276711789"></a>
### <a name="new-validation-attributes"></a>Новые атрибуты проверки

#### <a name="compareattribute"></a>компареаттрибуте

Новый атрибут проверки *компареаттрибуте* позволяет сравнивать значения двух различных свойств модели. В следующем примере свойство *компарепассворд* должно соответствовать полю *пароля* , чтобы быть допустимым.

[!code-csharp[Main](mvc3-release-notes/samples/sample15.cs)]

#### <a name="remoteattribute"></a>ремотеаттрибуте

Новый атрибут проверки *ремотеаттрибуте* использует функцию удаленного проверяющего модуля проверки JQuery, которая позволяет выполнять проверку на стороне клиента для вызова метода на сервере, который выполняет реальную логику проверки.

В следующем примере к свойству *username* применяется *ремотеаттрибуте* . При изменении этого свойства в представлении редактирования клиентская проверка вызывает действие с именем *усернамеаваилабле* для класса *усерсконтроллер* , чтобы проверить это поле.

[!code-csharp[Main](mvc3-release-notes/samples/sample16.cs)]

В следующем примере показан соответствующий контроллер.

[!code-csharp[Main](mvc3-release-notes/samples/sample17.cs)]

По умолчанию имя свойства, к которому применяется атрибут, отправляется в метод действия в виде параметра строки запроса.

<a id="_Toc276711790"></a>
### <a name="new-overloads-for-labelfor-and-labelformodel-methods"></a>Новые перегрузки для методов "Лабелфор" и "Лабелформодел"

Для методов *лабелфор* и *лабелформодел* были добавлены новые перегрузки, позволяющие указать текст метки. В следующем примере показано, как использовать эти перегрузки.

[!code-cshtml[Main](mvc3-release-notes/samples/sample18.cshtml)]

<a id="_Toc276711791"></a>
### <a name="child-action-output-caching"></a>Кэширование вывода дочерних действий

*Аутпуткачеаттрибуте* поддерживает кэширование вывода дочерних действий, которые вызываются с помощью вспомогательных методов *HTML. RenderAction* или *HTML. Action* . В следующем примере показано представление, вызывающее другое действие.

[!code-cshtml[Main](mvc3-release-notes/samples/sample19.cshtml)]

Действие *GETDATE* помечается с помощью *аутпуткачеаттрибуте*:

[!code-csharp[Main](mvc3-release-notes/samples/sample20.cs)]

При выполнении этого кода результат вызова HTML. Action ("GETDATE") кэшируется в течение 100 секунд.

<a id="_Toc276711792"></a>
### <a name="add-view-dialog-box-improvements"></a>Улучшения диалогового окна "Добавление представления"

При добавлении строго типизированного представления диалоговое окно Добавление представления фильтрует больше неприменимых типов, чем в предыдущих выпусках, таких как количество основных типов .NET Framework. Кроме того, список теперь сортируется по имени класса, а не по полному имени типа, что упрощает поиск типов. Например, имя типа теперь отображается, как показано в следующем примере:

ClassName (пространство имен)

В более ранних выпусках это было бы показано следующим образом:

Namespace. ClassName

<a id="_Toc276711793"></a>
### <a name="granular-request-validation"></a>Детализированная проверка запросов

Свойство *Exclude* объекта *валидатеинпутаттрибуте* больше не существует. Вместо этого, чтобы проверка запроса пропускалась для определенных свойств модели во время привязки модели, используйте новый *скипрекуествалидатионаттрибуте*.

Например, предположим, что для изменения записи блога используется метод действия:

[!code-csharp[Main](mvc3-release-notes/samples/sample21.cs)]

В следующем примере показана модель представления для записи блога.

[!code-csharp[Main](mvc3-release-notes/samples/sample22.cs)]

Когда пользователь отправляет некоторую разметку для свойства Description, привязка модели не будет выполнена из-за проверки запроса. Чтобы отключить проверку запроса во время привязки модели для описания записи блога, примените *скипрекупествалидатионаттрибуте* к свойству, как показано в следующем примере:.

[!code-csharp[Main](mvc3-release-notes/samples/sample23.cs)]

Кроме того, чтобы отключить проверку запросов для каждого свойства модели, примените *валидатеинпутаттрибуте* со значением *false* к методу Action:

[!code-csharp[Main](mvc3-release-notes/samples/sample24.cs)]

<a id="_Toc276711794"></a>
## <a name="breaking-changes"></a>Критические изменения

- Порядок выполнения фильтров исключений изменился для фильтров исключений с одинаковым значением *порядка* . В ASP.NET MVC 2 и более ранних версиях фильтры исключений на контроллере с таким же *порядком* , как и в методе действия, были выполнены до фильтров исключений для метода действия. Обычно это происходит, когда фильтры исключений были применены без заданного значения *порядка* . В ASP.NET MVC 3 этот порядок был отменен, чтобы сначала выполнялся наиболее конкретный обработчик исключений. Как и в предыдущих версиях, если свойство *Order* задано явно, фильтры выполняются в указанном порядке.
- Добавлено новое свойство с именем *FileExtensions* в базовый класс *виртуалпаспровидервиевенгине* . При поиске представления по пути (а не по имени) учитывается только представление с расширением файла, содержащееся в списке, указанном этим новым свойством. Это критическое изменение для тех, кто регистрирует пользовательский поставщик сборки для включения пользовательского расширения файла для представлений веб-форм и ссылающихся на эти представления, используя полный путь, а не имя. Чтобы решить эту проблему, измените значение свойства *FileExtensions* , включив в него расширение пользовательского файла.

<a id="_Toc276711795"></a>
## <a name="known-issues"></a>Известные проблемы

- Выполнение установщика может занять намного больше времени, чем предыдущие версии ASP.NET MVC, поскольку оно обновляет компоненты Visual Studio 2010.
- Формирование шаблонов представления при выборе астронгли представлений шаблонов с типом "только запись". Они всегда должны игнорироваться формированием шаблонов. При создании представления "Изменить" или "создать" диалоговое окно Добавить представление также формирует шаблоны только для чтения. Свойства только для чтения должны формироваться только для представлений отображения и списков.
- Отладка не работает при установке ASP.NET MVC 3 вместе с асинхронной CTP-версией. ASP.NET MVC 3 нельзя установить параллельно с асинхронной CTP-версией. Удалите асинхронную CTP-версию, чтобы исправить отладку. Дополнительные сведения см. в [этой записи блога](http://drew-prog.blogspot.com/2010/11/how-to-uninstall-microsoft-aspnet-mvc-3.html) об удалении всех частей версии-кандидата ASP.NET MVC 3.
- Функция Razor IntelliSense не работает при установке более резки. Если вы уже установили и хотите воспользоваться преимуществами поддержки Razor IntelliSense в версии-КАНДИДАТе ASP.NET MVC 3, ознакомьтесь с [этой записью блога](https://blogs.jetbrains.com/dotnet/2010/11/razor-intellisense-and-resharper/) из JetBrains, в которой обсуждаются способы их совместного использования в настоящее время.
- В представлениях CSHTML и VBHTML, созданных с помощью бета-версии ASP.NET MVC 3, нет корректного действия сборки, что не позволяет исключить их из публикации. *Действие сборки* для этих файлов должно иметь значение "Content". ASP.NET MVC 3 RC решает эту проблему для новых файлов, но не корректирует параметр для существующих файлов проекта, созданного с помощью бета-версии.
- Выполнение установщика может занять намного больше времени, чем предыдущие версии ASP.NET MVC, поскольку оно обновляет компоненты Visual Studio 2010.
- Формирование шаблонов представления при выборе шаблонов представлений со строгой типизацией "Изменить" только для чтения. Аналогично, свойства только для записи обрабатываются для представлений "Отображение".
- Во время установки условия лицензионного соглашения отображаются в меньшем окне, чем это требуется.
- Установка Visual Studio Async CTP вызывает конфликт с выпуском Razor, который входит в состав установки средств ASP.NET MVC 3. Убедитесь, что вы не пытаетесь установить Visual Studio Async CTP и выпуски Razor на одном компьютере.
- При редактировании представления Razor (файл. cshtml) пункт меню Перейти к контроллеру в Visual Studio будет недоступен, а фрагменты кода не будут отображаться.

<a id="TOC_ASP_NET_3_Beta"></a>
## <a name="aspnet-mvc-3-beta"></a>Бета-версия ASP.NET MVC 3

Бета-версия ASP.NET MVC 3 была выпущена 6 октября 2010 г. Следующие примечания относятся только к бета-версии и распространяются на любые обновления или изменения, упоминаемые в разделе ASP.NET MVC 3 Release Candidate выше.

## <a id="0.1__Toc274034215"></a>Новые возможности ASP.NET MVC 3 Beta

<a id="0.1__Default_validation_system"></a>В этом разделе описаны функции, которые появились в бета-версии ASP.NET MVC 3.

### <a id="0.1__Toc274034216"></a>Диспетчер пакетов NuGet

ASP.NET MVC 3 включает диспетчер пакетов NuGet, который представляет собой интегрированное средство управления пакетами для добавления библиотек и средств в проекты Visual Studio. В большинстве случаев он автоматизирует действия, выполняемые разработчиками сегодня для получения библиотеки в исходное дерево.

Вы можете работать с NuGet в качестве средства командной строки, как интегрированное окно консоли в Visual Studio 2010, из контекстного меню Visual Studio и как набор командлетов PowerShell.

Дополнительные сведения о NuGet см. в [документации по NuGet](https://docs.microsoft.com/nuget/).

### <a id="0.1__Toc274034217"></a>Диалоговое окно "Улучшенный новый проект"

При создании нового проекта диалоговое окно Новый проект теперь позволяет указать обработчик представлений, а также тип проекта ASP.NET MVC.

![](mvc3-release-notes/_static/image6.png)

Поддержка изменения списка шаблонов и обработчиков представлений, перечисленных в диалоговом окне, не включена в этот выпуск.

По умолчанию используются следующие шаблоны:

Пустой. Содержит минимальный набор файлов для проекта MVC ASP.NET, включая структуру каталогов по умолчанию для проектов ASP.NET MVC, небольшой файл Site. CSS, содержащий стили по умолчанию ASP.NET MVC и каталог Scripts, который содержит файлы JavaScript по умолчанию.

Интернет – приложение. Содержит образец функциональности, демонстрирующий использование поставщика членства в ASP.NET MVC.

### <a id="0.1__Toc274034218"></a>Упрощенный способ указания строго типизированных моделей в представлениях Razor

Способ указания типа модели для строго типизированных представлений Razor упрощен с помощью новой директивы @model для представлений CSHTML и @ModelType директивы для представлений VBHTML. В более ранних версиях ASP.NET MVC для представлений Razor следовало бы указать строго типизированную модель следующим образом:

[!code-cshtml[Main](mvc3-release-notes/samples/sample25.cshtml)]

В этом выпуске можно использовать следующий синтаксис:

[!code-cshtml[Main](mvc3-release-notes/samples/sample26.cshtml)]

### <a id="0.1__Toc274034219"></a>Поддержка новых вспомогательных методов веб-страницы ASP.NET

Новая технология веб-страницы ASP.NET включает набор вспомогательных методов, которые полезны для добавления часто используемых функциональных возможностей к представлениям и контроллерам. ASP.NET MVC 3 поддерживает использование этих вспомогательных методов в контроллерах и представлениях (при необходимости). Эти методы содержатся в сборке System. Web. Вспомогательныеs. В следующей таблице перечислены некоторые из вспомогательных методов веб-страницы ASP.NET.

| **Модуля** | **Описание** |
| --- | --- |
| Диаграмма | Визуализирует диаграмму в представлении. Содержит такие методы, как Chart. Товебимаже, Chart. Save и Chart. Write. |
| Nудаленный | Использует алгоритмы хэширования для создания правильных и хэшированных паролей. |
| WebGrid | Подготавливает к просмотру коллекцию объектов (обычно данных из базы данных) в виде сетки. Поддерживает разбиение по страницам и сортировку. |
| Изображение | Визуализирует изображение. |
| WebMail | Отправляет электронное сообщение. |

Краткий справочник, в котором перечислены вспомогательные методы и базовый синтаксис, доступны в составе ASP.NET синтаксис Razor документации по следующему URL-адресу:

[https://www.asp.net/webmatrix/tutorials/asp-net-web-pages-api-reference](../web-pages/overview/api-reference/asp-net-web-pages-api-reference.md)

### <a id="0.1__Toc274034220"></a>Дополнительная поддержка введения зависимостей

Основываясь на выпуске ASP.NET MVC 3 Preview 1, в текущем выпуске добавлена поддержка двух новых служб и четырех существующих служб, а также улучшена поддержка разрешения зависимостей и общего указателя службы.

#### <a name="new-icontrolleractivator-interface-for-fine-grained-controller-instantiation"></a>Новый интерфейс Иконтроллерактиватор для точного создания экземпляра контроллера

Новый интерфейс Иконтроллерактиватор обеспечивает более детализированный контроль над созданием экземпляров контроллеров с помощью внедрения зависимостей. В следующем примере показан интерфейс:

[!code-csharp[Main](mvc3-release-notes/samples/sample27.cs)]

Сравните это с ролью фабрики контроллеров. Фабрика контроллеров — это реализация интерфейса Иконтроллерфактори, который отвечает как за обнаружение типа контроллера, так и на экземпляре экземпляра этого типа.

Активаторы контроллера отвечают только за создание экземпляра типа контроллера. Они не выполняют поиск типа контроллера. После обнаружения соответствующего типа контроллера фабрики контроллеров должны делегировать экземпляру Иконтроллерактиватор для управления фактическим созданием экземпляра контроллера.

Класс Дефаултконтроллерфактори содержит новый конструктор, принимающий экземпляр Иконтроллерфактори. Это позволяет применять внедрение зависимостей для управления этим аспектом создания контроллера без переопределения поведения поиска по умолчанию для типа контроллера.

#### <a name="iservicelocator-interface-replaced-with-idependencyresolver"></a>Интерфейс Исервицелокатор заменен на IDependencyResolver

Основываясь на отзывах сообщества, бета-версия ASP.NET MVC 3 заменяет использование интерфейса Исервицелокатор облегченных интерфейсом IDependencyResolver, относящимся к потребностям ASP.NET MVC. В следующем примере показан новый интерфейс:

[!code-csharp[Main](mvc3-release-notes/samples/sample28.cs)]

В рамках этого изменения класс Сервицелокатор был также заменен классом Депенденциресолвер. Регистрация сопоставителя зависимостей аналогична более ранним версиям ASP.NET MVC:

[!code-csharp[Main](mvc3-release-notes/samples/sample29.cs)]

Реализации этого интерфейса должны просто делегироваться базовому контейнеру внедрения зависимостей, чтобы предоставить зарегистрированную службу для запрошенного типа.

Если нет зарегистрированных служб запрошенного типа, ASP.NET MVC предписывает реализации этого интерфейса, возвращающие NULL из службы и возвращающие пустую коллекцию из служб.

Новый класс Депенденциресолвер позволяет регистрировать классы, реализующие новый интерфейс IDependencyResolver или общий интерфейс локатора службы (Исервицелокатор). Дополнительные сведения об Локаторе общих служб см. [в разделе коммонсервицелокатор на GitHub](https://github.com/unitycontainer/commonservicelocator).

<a id="0.1__Breaking_Changes"></a>

#### <a name="new-iviewactivator-interface-for-fine-grained-view-page-instantiation"></a>Новый интерфейс Ивиевактиватор для точного создания экземпляра страницы представления

Новый интерфейс Ивиевпажеактиватор обеспечивает более детализированный контроль над созданием экземпляров страниц представления с помощью внедрения зависимостей. Это относится к экземплярам Разорвиев и экземплярам объектов FormView. В следующем примере показан новый интерфейс:

[!code-csharp[Main](mvc3-release-notes/samples/sample30.cs)]

Теперь эти классы принимают аргумент конструктора Ивиевпажеактиватор, который позволяет использовать внедрение зависимостей для управления созданием экземпляров типов СтраницаПредставления, Виевусерконтрол и Вебвиевпаже.

#### <a name="new-dependency-resolver-support-for-existing-services"></a>Поддержка нового сопоставителя зависимостей для существующих служб

Новый выпуск включает в себя поддержку разрешения зависимостей для следующих служб:

- Поставщики проверки модели. Классы, реализующие Моделвалидаторпровидер, можно зарегистрировать в сопоставителе зависимостей, и система будет использовать их для поддержки проверки на стороне клиента и сервера.
- Поставщик метаданных модели. Один класс, реализующий Моделметадатапровидер, можно зарегистрировать в сопоставителе зависимостей, и система будет использовать ее для предоставления метаданных для систем шаблонов и проверки.
- Поставщики значений. Классы, реализующие Валуепровидерфактори, могут быть зарегистрированы в сопоставителе зависимостей, и система будет использовать их для создания поставщиков значений, используемых контроллером и при привязке модели.
- Связыватели моделей. Классы, реализующие Имоделбиндерпровидер, могут быть зарегистрированы в сопоставителе зависимостей, и система будет использовать их для создания привязок моделей, используемых системой привязки модели.

### <a id="0.1__Toc274034221"></a>Новая поддержка для ненавязчивой технологии AJAX на основе jQuery

ASP.NET MVC включает вспомогательные методы AJAX, например следующие:

- AJAX. ActionLink
- AJAX. Раутелинк
- AJAX. Бегинформ
- AJAX. Бегинраутеформ

Эти методы используют JavaScript для вызова метода действия на сервере, а не для использования полной обратной передачи. Эта функция была обновлена для ненавязчивого использования jQuery. Вместо того, чтобы создавать встроенные клиентские скрипты, эти вспомогательные методы разделяют поведение разметки путем передачи атрибутов HTML5 с помощью префикса *AJAX для данных* . Затем поведение применяется к разметке путем ссылки на соответствующие файлы JavaScript. Убедитесь, что имеются ссылки на следующие файлы JavaScript:

- jquery-1.4.1.js
- jquery.unobtrusive.ajax.js

Эта функция включена по умолчанию в файле Web. config в шаблонах новых проектов ASP.NET MVC 3, но по умолчанию отключена для существующих проектов. Дополнительные сведения см. в разделе [добавлены флаги уровня приложения для проверки клиента и ненавязчивый JavaScript](#0.1_AddedApplicationWideFlagsForClientValida) далее в этом документе.

### <a id="0.1__Toc274034222"></a>Новая поддержка ненавязчивой проверки jQuery

По умолчанию ASP.NET MVC 3 Beta использует проверку jQuery ненавязчивым образом для выполнения проверки на стороне клиента. Чтобы включить ненавязчивую проверку клиента, выполните в представлении вызов, подобный следующему:

[!code-csharp[Main](mvc3-release-notes/samples/sample31.cs)]

Для этого необходимо, чтобы свойство Виевконтекст. Унобтрусивежаваскриптенаблед было установлено в значение true, что можно сделать, выполнив следующий вызов:

[!code-csharp[Main](mvc3-release-notes/samples/sample32.cs)]

Также убедитесь, что имеются ссылки на следующие файлы JavaScript.

- jquery-1.4.1.js
- jquery.validate.js
- jquery.validate.unobtrusive.js

Эта функция включена по умолчанию в файле Web. config в шаблонах новых проектов ASP.NET MVC 3, но по умолчанию для существующих проектов отключено. Дополнительные сведения см. в разделе [новые флаги уровня приложения для проверки клиента и ненавязчивый JavaScript](#0.1_AddedApplicationWideFlagsForClientValida) далее в этом документе.

<a id="0.1__Toc274034223"></a>

### <a id="0.1_AddedApplicationWideFlagsForClientValida"></a>Новые флаги на уровне приложения для проверки клиента и ненавязчивого JavaScript

Вы можете включить или отключить проверку клиента и ненавязчивый JavaScript глобально, используя статические члены класса HtmlHelper, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample33.cs)]

Шаблоны проектов по умолчанию по умолчанию позволяют использовать ненавязчивый JavaScript. Вы также можете включить или отключить эти функции в корневом файле Web. config приложения, используя следующие параметры:

[!code-xml[Main](mvc3-release-notes/samples/sample34.xml)]

Поскольку эти функции можно включить по умолчанию, в класс HtmlHelper появились новые перегрузки, позволяющие переопределить параметры по умолчанию, как показано в следующих примерах.

[!code-csharp[Main](mvc3-release-notes/samples/sample35.cs)]

Для обеспечения обратной совместимости обе эти функции по умолчанию отключены.

### <a id="0.1__Toc274034224"></a>Новая поддержка кода, выполняемого перед выполнением представлений

Теперь можно поместить файл с именем \_виевстарт. cshtml (или \_виевстарт. vbhtml) в каталог views и добавить в него код, который будет совместно использоваться несколькими представлениями в этом каталоге и его подкаталогах. Например, следующий код можно разместить на странице \_виевстарт. cshtml в папке ~/views:

[!code-cshtml[Main](mvc3-release-notes/samples/sample36.cshtml)]

Таким путем рекурсивно устанавливается страница макета для каждого представления в папке Views и всех вложенных в нее папок. Когда представление готовится к просмотру, код в файле \_виевстарт. cshtml выполняется перед выполнением кода представления. Код \_виевстарт. cshtml применяется ко всем представлениям в этой папке.

По умолчанию код в файле \_виевстарт. cshtml также применяется к представлениям во всех вложенных папках. Однако отдельные вложенные папки могут иметь собственную версию файла \_виевстарт. cshtml; в этом случае приоритет имеет локальную версию. Например, чтобы выполнить код, который является общим для всех представлений HomeController, вставьте файл \_виевстарт. cshtml в папку ~/Виевс/Хоме.

### <a id="0.1__Toc274034225"></a>Новая поддержка синтаксиса для VBHTML Razor

Предыдущая Предварительная версия ASP.NET MVC включала поддержку представлений C#, использующих синтаксис Razor на основе. В этих представлениях используется расширение файла. cshtml. В рамках текущей работы для поддержки Razor бета-версия ASP.NET MVC 3 предоставляет поддержку синтаксис Razor в Visual Basic, которая использует файл с расширением. VBHTML.

Общие сведения об использовании синтаксиса Visual Basic на страницах VBHTML см. в руководстве по следующему URL-адресу:

[https://www.asp.net/webmatrix/tutorials/asp-net-web-pages-visual-basic](../web-pages/overview/getting-started/introducing-razor-syntax-vb.md)

### <a id="0.1__Toc274034226"></a>Более детализированный контроль над Валидатеинпутаттрибуте

В ASP.NET MVC всегда включен класс Валидатеинпутаттрибуте, который вызывает базовую инфраструктуру проверки запросов ASP.NET, чтобы убедиться, что входящий запрос не содержит потенциально вредоносных входных данных. По умолчанию проверка входных данных включена. Проверку запросов можно отключить с помощью атрибута Валидатеинпутаттрибуте, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample37.cs)]

Однако многие веб-приложения имеют отдельные поля формы, которые должны разрешать HTML, а оставшиеся поля — нет. Класс Валидатеинпутаттрибуте теперь позволяет указать список полей, которые не должны включаться в проверку запроса.

Например, при разработке подсистемы блогов может потребоваться разрешить разметку в полях Body и Summary. Эти поля могут быть представлены двумя элементами ввода, каждый из которых имеет атрибут Name, соответствующий имени свойства ("Body" и "Summary"). Чтобы отключить проверку запросов для этих полей, укажите имена (разделенные запятыми) в свойстве Exclude класса ValidateInput, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample38.cs)]

### <a id="0.1__Toc274034227"></a>Вспомогательные индексы преобразуют знаки подчеркивания в дефисы для имен атрибутов HTML, заданных с помощью анонимных объектов

Вспомогательные методы позволяют указать пары "имя-значение" атрибута с помощью анонимного объекта, как показано в следующем примере:

[!code-csharp[Main](mvc3-release-notes/samples/sample39.cs)]

Такой подход не позволяет использовать дефисы в имени атрибута, так как дефис не может использоваться для имени свойства в ASP.NET. Однако для пользовательских атрибутов HTML5 важны дефисы. Например, в HTML5 используется префикс "Data-".

В то же время символы подчеркивания нельзя использовать для имен атрибутов в HTML, но являются допустимыми в именах свойств. Поэтому при указании атрибутов с помощью анонимного объекта, а также если имена атрибутов содержат символ подчеркивания, вспомогательные методы преобразуют символы подчеркивания в дефисы. Например, следующий вспомогательный синтаксис использует символ подчеркивания:

[!code-csharp[Main](mvc3-release-notes/samples/sample40.cs)]

В предыдущем примере отображается следующая разметка при запуске вспомогательного метода:

[!code-html[Main](mvc3-release-notes/samples/sample41.html)]

## <a id="0.1__Toc274034228"></a>Исправления ошибок

Шаблон объекта по умолчанию для вспомогательных функций шаблонов Едиторфор и DisplayFor теперь поддерживает порядок, указанный в свойстве Дисплайаттрибуте. Order. (В предыдущих версиях Настройка порядка не использовалась.)

Проверка клиента теперь поддерживает проверку переопределенных свойств, к которым применены атрибуты проверки.

Жсонвалуепровидерфактори теперь зарегистрирован по умолчанию.

## <a id="0.1__Toc274034229"></a>Критические изменения

Порядок выполнения фильтров исключений изменился для фильтров исключений с одинаковым значением порядка. В ASP.NET MVC 2 и более ранних версиях фильтры исключений на контроллере с тем же порядком, что и в методе действия, были выполнены до фильтров исключений для метода действия. Обычно это происходит, когда фильтры исключений были применены без заданного значения порядка. В ASP.NET MVC 3 этот порядок был отменен, чтобы сначала выполнялся наиболее конкретный обработчик исключений. Как и в предыдущих версиях, если свойство Order задано явно, фильтры выполняются в указанном порядке.

## <a id="0.1__Toc274034230"></a> Известные проблемы

Во время установки условия лицензионного соглашения отображаются в меньшем окне, чем это требуется.

В представлениях Razor не поддерживается поддержка IntelliSense и выделение синтаксиса. Предполагается, что поддержка синтаксис Razor в Visual Studio будет включена в состав более поздней версии.

При редактировании представления Razor (файл CSHTML) <a id="0.1__Toc224729061"></a> <a id="0.1__Toc238051347"></a> пункт меню Перейти к контроллеру в Visual Studio будет недоступен, а фрагменты кода не будут отображаться.

При использовании синтаксиса @model для указания строго типизированного представления CSHTML, сочетания, зависящие от языка, для типов не распознаются. Например, @model int не будет работать, но @model Int32 будет работать. Обходной путь для этой ошибки заключается в использовании фактического имени типа при указании типа модели.

При использовании синтаксиса @model для указания строго типизированного представления CSHTML (или @ModelType для указания строго типизированного представления в формате VBHTML) типы, допускающие значение null, и объявления массивов не поддерживаются. Например, @model int? не поддерживается. Вместо этого используйте `@model Nullable<Int32>`. Синтаксис @model String [] также не поддерживается; Вместо этого используйте `@model IList<string>`.

При обновлении проекта ASP.NET MVC 2 до ASP.NET MVC 3 Убедитесь, что в раздел appSettings файла Web. config добавлены следующие файлы:

[!code-xml[Main](mvc3-release-notes/samples/sample42.xml)]

Существует известная ситуация, из-за которой проверка подлинности с помощью форм всегда перенаправляет пользователей без проверки подлинности в ~/аккаунт/логин, игнорируя параметр проверки подлинности с помощью форм, используемый в файле Web. config Чтобы устранить эту проблему, добавьте следующий параметр приложения.

[!code-xml[Main](mvc3-release-notes/samples/sample43.xml)]

## <a id="0.1__Toc274034231"></a>Заявление об отказе

© Корпорация Майкрософт (Microsoft Corporation), 2011. Все права защищены. Данный документ предоставляется "как есть". Сведения и мнения, содержащиеся в этом документе, включая URL-адреса и другие ссылки на веб-сайты, могут быть изменены без предварительного уведомления. Вы принимаете на себя риски их использования.

Настоящий документ не предоставляет юридических прав на интеллектуальную собственность в отношении продуктов корпорации Майкрософт. Вы можете скопировать и использовать данный документ для внутренних справочных целей.
