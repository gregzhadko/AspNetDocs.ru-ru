---
uid: whitepapers/mvc4-beta-release-notes
title: ASP.NET MVC 4 | Документация Майкрософт
author: rick-anderson
description: В этом документе описывается в выпуске бета-версии ASP.NET MVC 4 для Visual Studio 2010.
ms.author: riande
ms.date: 09/09/2011
ms.assetid: 666407bb-81de-4319-89ba-0302c382a208
msc.legacyurl: /whitepapers/mvc4-beta-release-notes
msc.type: content
ms.openlocfilehash: b7722d5c282f07b35dd18d08911fa562dae6afc2
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59387936"
---
# <a name="aspnet-mvc-4"></a>ASP.NET MVC 4

> В этом документе описывается в выпуске бета-версии ASP.NET MVC 4 для Visual Studio 2010.
> 
> > [!NOTE]
> > Это не самая последняя версия. Заметки о выпуске ASP.NET MVC 4, версия-Кандидат доступны [здесь](mvc4-release-notes.md).


- [Замечания по установке](#_Toc303253802)
- [Документация](#_Toc303253803)
- [Поддержка](#_Toc303253804)
- [Требования к программному обеспечению](#_Toc303253805)
- [Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4](#_Toc303253806)
- [Новые возможности в бета-версия ASP.NET MVC 4](#_Toc303253807)

    - [ASP.NET Web API](#_Toc317096197)
    - [Страницы ASP.NET одного приложения](#_Toc317096198)
    - [Усовершенствования в шаблоны проектов по умолчанию](#_Toc303253808)
    - [Шаблон проекта для мобильных устройств](#_Toc303253809)
    - [Режимы отображения](#_Toc303253810)
    - [jQuery Mobile, переключателя и переопределения браузера](#_Toc303253811)
    - [Рецепты для создания кода в Visual Studio](#_Toc303253812)
    - [Поддержка задачи для асинхронных контроллеров](#_Toc303253813)
    - [Пакет SDK для Azure](#_Toc303253814)
    - [Известные проблемы и критические изменения](#_Toc303253815)

<a id="_Toc303253802"></a>
## <a name="installation-notes"></a>Замечания по установке

Бета-версии 4 MVC ASP.NET для Visual Studio 2010 можно установить из [Домашняя страница ASP.NET MVC 4](../mvc/mvc4.md) с помощью установщика веб-платформы.

Необходимо удалить все ранее установленные предварительные версии ASP.NET MVC 4, перед установкой бета-версия ASP.NET MVC 4.

Этот выпуск не совместим с .NET Framework 4.5 Developer Preview. Перед установкой бета-версия ASP.NET MVC 4, необходимо удалить .NET 4.5 Developer Preview.

ASP.NET MVC 4, можно установить и можно запустить side-by-side с ASP.NET MVC 3.

<a id="_Toc303253803"></a>
## <a name="documentation"></a>Документация

Документация по ASP.NET MVC доступна на веб-сайте MSDN по АДРЕСУ:

[https://go.microsoft.com/fwlink/?LinkID=243043](https://go.microsoft.com/fwlink/?LinkID=243043)

Учебники и другие сведения о ASP.NET MVC доступны на странице веб-сайта ASP.NET MVC 4 ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md)).

<a id="_Toc303253804"></a>
## <a name="support"></a>Поддержка

Это является предварительной и официально не поддерживается. Если у вас есть вопросы о работе с этим выпуском, отправлять их на форуме ASP.NET MVC ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)), где участники сообщества ASP.NET помогают друг другу, предоставляя полезные сведения.

<a id="_Toc303253805"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

Компоненты ASP.NET MVC 4 для Visual Studio требуется PowerShell 2.0, а также Visual Studio 2010 с пакетом обновления 1 или Visual Web Developer Express 2010 с пакетом обновления 1.

<a id="_Toc303253806"></a>
## <a name="upgrading-an-aspnet-mvc-3-project-to-aspnet-mvc-4"></a>Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4

ASP.NET MVC 4 может устанавливаться параллельно с ASP.NET MVC 3 на одном компьютере, который обеспечивает гибкость в выборе, когда следует обновить приложение ASP.NET MVC 3 до ASP.NET MVC 4.

Самый простой способ обновления — для создания нового проекта ASP.NET MVC 4 и скопируйте все представления, контроллеры, кода и содержимое файлов из существующего проекта MVC 3 в новый проект и затем обновление ссылок на сборку в новый проект в соответствии с старого проекта. Если вы внесли изменения в файл Web.config в проекте MVC 3, необходимо также слияние этих изменений в файл Web.config в проекте MVC 4.

Чтобы вручную обновить существующее приложение ASP.NET MVC 3 до версии 4, сделайте следующее:

1. Во всех файлах Web.config в проекте (имеется в корневом каталоге проекта, в папке Views и в папке Views каждой области в проекте) замените все вхождения следующий текст:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample1.cmd)]

    соответствующие следующим текстом:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample2.cmd)]
2. В корневом файле Web.config, обновить *webPages:Version* элемент «2.0.0.0» и добавьте новую *PreserveLoginUrl* ключом, имеющим значение «true»:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample3.xml)]
3. В обозревателе решений удалите ссылку на *System.Web.Mvc* (который указывает на версию 3 DLL). Затем добавьте ссылку на *System.Web.Mvc* (v4.0.0.0). В частности внесите следующие изменения для обновления ссылок на сборки. Подробности приведены ниже:

    1. В обозревателе решений удалите ссылки на следующие сборки: 

        - *System.Web.Mvc*(v3.0.0.0)
        - *System.Web.WebPages*(v1.0.0.0)
        - *System.Web.Razor*(v1.0.0.0)
        - *System.Web.WebPages.Deployment*(v1.0.0.0)
        - *System.Web.WebPages.Razor*(v1.0.0.0)
    2. Добавьте ссылки на следующие сборки: 

        - *System.Web.Mvc*(v4.0.0.0)
        - *System.Web.WebPages*(v2.0.0.0)
        - *System.Web.Razor*(v2.0.0.0)
        - *System.Web.WebPages.Deployment*(v2.0.0.0)
        - *System.Web.WebPages.Razor*(v2.0.0.0)
4. В обозревателе решений щелкните правой кнопкой мыши имя проекта и затем выберите команду Выгрузить проект. Затем щелкните правой кнопкой мыши имя и выберите "Правка" *имя_проекта*.csproj.
5. Найдите *ProjectTypeGuids* и замените {E53F8FEA-EAE0-44A6-8774-FFD645390401} с {E3E379DF-F4C6-4180-9B81-6769533ABE47}.
6. Сохраните изменения, закройте файл проекта (csproj), которую вы изменяете, щелкните правой кнопкой мыши проект и выберите команду перезагрузить проект.
7. Если проект ссылается на все библиотеки сторонних производителей скомпилированы с помощью предыдущих версий ASP.NET MVC, откройте в корневом файле Web.config и добавьте следующие три *bindingRedirect* элементов под  *Конфигурация* раздел: 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample4.xml)]

<a id="_Toc303253807"></a>
## <a name="new-features-in-aspnet-mvc-4-beta"></a>Новые возможности в бета-версия ASP.NET MVC 4

В этом разделе описаны возможности, которые были введены в ASP.NET MVC 4, бета-версии.

<a id="_Toc317096197"></a>
### <a name="aspnet-web-api"></a>ASP.NET Web API

ASP.NET MVC 4 теперь включает в себя веб-API ASP.NET, новую платформу для создания служб HTTP, которое может достигать широкого круга клиентов, включая браузеры и мобильные устройства. Веб-API ASP.NET также является идеальной платформой для создания служб RESTful.

Веб-API ASP.NET включает в себя поддержку следующих функций:

- **Современную модель программирования HTTP:** Непосредственно доступа и управления HTTP-запросы и ответы в веб-API с помощью объектной модели новой, строго типизированный HTTP. Соответствует модели программирования и конвейер HTTP симметрично доступна на стороне клиента с помощью нового типа HttpClient.
- **Полная поддержка маршруты**: Веб-API теперь поддерживают полный набор возможностей маршрута, которые были частью веб-стек, включая параметры маршрута и ограничения. Кроме того сопоставления для действия имеет полную поддержку соглашения, поэтому вам больше не нужно применять атрибуты, такие как [HttpPost] для классов и методов.
- **Согласование содержимого**: Чтобы определить корректный формат данных, возвращаемых из API клиента и сервера могут работать совместно. Мы предоставляем поддержку по умолчанию для XML, JSON и форматы форму URL-адреса и расширения этой поддержки, добавив собственные модули форматирования, или даже заменить стратегии согласование содержимого по умолчанию.
- **Модель привязки и проверки:** Связыватели моделей обеспечивают простой способ извлечения данных из различных частей HTTP-запроса и преобразования этих частей сообщения в объекты .NET, которые могут использоваться при выполнении действий веб-API.
- **Фильтры:** Веб-API теперь поддерживает фильтры, включая хорошо известных фильтры, такие как атрибут [Authorize]. Можно создать и подключить собственные фильтры действий, авторизации и обработки исключений.
- **Построение запроса:** Путем простого возврата IQueryable&lt;T&gt;, веб-API будет поддерживать запросов через соглашения URL-адрес OData.
- **Улучшенные возможности тестирования сведений о HTTP:** Вместо того чтобы задавать сведения о HTTP в статическом контексте объектов, веб-интерфейса API теперь можно работать с экземплярами HttpRequestMessage и HttpResponseMessage. Для работы с помощью пользовательских типов в дополнение к типам HTTP также существуют универсальные версии этих объектов.
- **Улучшенная инверсии управления (IoC) с помощью DependencyResolver:** Веб-API теперь использует схемы обнаружения службы, реализуемый Сопоставитель зависимостей MVC для получения экземпляров для многих различных средств.
- **Конфигурация на основе кода:** Веб-API конфигурации осуществляется исключительно через код, оставив свои файлы config очистки.
- **Резидентного размещения:** Веб-API может размещаться в собственном процессе в дополнение к IIS, при этом используя всю мощь маршруты и другие возможности веб-API.

См. Дополнительные сведения о веб-API ASP.NET [ https://www.asp.net/web-api ](../web-api/index.md).

<a id="_Toc317096198"></a>
### <a name="aspnet-single-page-application"></a>Страницы ASP.NET одного приложения

ASP.NET MVC 4 теперь включает Предварительная версия возможности для построения одностраничных приложений с значительные взаимодействие на стороне клиента, с помощью JavaScript и веб-API. Эта поддержка включает:

- Набор библиотек JavaScript для более широкие локального взаимодействия с кэшированными данными
- Дополнительные компоненты веб-API для единица работы и поддержки DAL
- Шаблон проекта MVC с помощью формирования шаблонов для быстрого начала работы

Дополнительные сведения о одностраничного приложения поддержку в ASP.NET MVC 4 см. на [ https://www.asp.net/single-page-application ](../single-page-application/index.md).

<a id="_Toc303253808"></a>
### <a name="enhancements-to-default-project-templates"></a>Усовершенствования в шаблоны проектов по умолчанию

Шаблон, который используется для создания новых проектов ASP.NET MVC 4 был обновлен для создания более современных веб-сайта:

![](mvc4-beta-release-notes/_static/image1.png)

В дополнение к финальных включает улучшенную функциональность в новый шаблон. Шаблон использует методику адаптивной отрисовки для поиска подходят для использования в классических браузерах и браузеры мобильных устройств без какой-либо настройки.

![](mvc4-beta-release-notes/_static/image2.png)

См. в разделе адаптивной рендеринг в действии, можно использовать эмулятор мобильных устройств или просто попробуйте изменить размер окна классического браузера меньше. При получении окна браузера достаточно небольшой, разметку страницы изменится.

Другое усовершенствование шаблоне проекта по умолчанию является использование JavaScript, обеспечивающая широкие пользовательского интерфейса. Вход и регистрация ссылки, которые используются в шаблоне приведены примеры того, как использовать диалоговое окно пользовательского интерфейса jQuery для представления экран входа с широкими возможностями.

![](mvc4-beta-release-notes/_static/image3.png)

<a id="_Toc303253809"></a>
### <a name="mobile-project-template"></a>Шаблон проекта для мобильных устройств

Если вы начинаете новый проект и создать на сайте специально для мобильных устройств и браузеров tablet, можно использовать новый шаблон проекта мобильного приложения. Это основано на jQuery Mobile, библиотеки с открытым исходным кодом для создания оптимизированных для сенсорных экранов пользовательского интерфейса:

![](mvc4-beta-release-notes/_static/image4.png)

Этот шаблон содержит ту же структуру приложения, как шаблон веб-приложение (и код контроллера практически идентичен), но это оформленных с помощью jQuery Mobile хорошо выглядят и ведут себя для мобильных устройств с сенсорным управлением. Дополнительные сведения о том, как структуры и стиля мобильного пользовательского интерфейса, см. в разделе [веб-сайт jQuery мобильного проекта](http://jquerymobile.com/).

При наличии сайта, ориентированных на рабочий стол, что вы хотите добавить представления, оптимизированный для мобильных устройств, чтобы, или если вы хотите создать один сайт, который выступает по-разному оформленного представлений для настольных и мобильных браузеров, можно использовать новую функцию режимов отображения. (См. следующий раздел).

<a id="_Toc303253810"></a>
### <a name="display-modes"></a>Режимы отображения

Новая функция режимов отображения для работы приложения выберите представления, в зависимости от браузера, отправляющая запрос. Например если классический браузер запрашивает на домашнюю страницу, в приложении можно использовать шаблон Views\Home\Index.cshtml. Если браузер мобильного устройства запрашивает на домашнюю страницу, приложение может возвратить Views\Home\Index.mobile.cshtml шаблона.

Макетов и частичных представлений можно также переопределить для конкретного браузера типов. Пример:

- Если папка Views\Shared содержит оба \_Layout.cshtml и \_Layout.mobile.cshtml шаблоны по умолчанию, то приложение будет использовать \_Layout.mobile.cshtml во время запросов из браузеров мобильных устройств и \_Layout.cshtml во время других запросов.
- Если папка содержит оба \_MyPartial.cshtml и \_MyPartial.mobile.cshtml, инструкция @Html.Partial(»\_MyPartial») будут отображаться \_MyPartial.mobile.cshtml во время запросы от мобильных устройств обозреватели, и \_MyPartial.cshtml во время других запросов.

Если вы хотите создать более конкретные представления, макетов и частичных представлений для других устройств, можно зарегистрировать новый *DefaultDisplayMode* экземпляра, чтобы указать, какое имя будет поиска, если запрос удовлетворяет определенным условиям. Например, можно добавить следующий код, чтобы *приложения\_запустить* метод в файле Global.asax, чтобы зарегистрировать строку «iPhone» в качестве режим просмотра, который применяется при браузера Apple iPhone запроса:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample5.cs)]

После выполнения этого кода, когда это Apple iPhone браузер отправляет запрос, приложение будет использовать Views\Shared\\_Layout.iPhone.cshtml макета (если он существует).

<a id="_Toc303253811"></a>
### <a name="jquery-mobile-the-view-switcher-and-browser-overriding"></a>jQuery Mobile, переключателя и переопределения браузера

jQuery Mobile — это библиотека открытым исходным кодом для создания веб-оптимизированных для сенсорных экранов пользовательского интерфейса. Если вы хотите использовать jQuery Mobile с приложением ASP.NET MVC 4, можно загрузить и установить пакет NuGet, который поможет вам приступить к работе. Чтобы установить его из консоли диспетчера пакетов Visual Studio, введите следующую команду:

[!code-powershell[Main](mvc4-beta-release-notes/samples/sample6.ps1)]

Это устанавливает jQuery Mobile и некоторые вспомогательные файлы, включая следующие:

- Views/Shared/\_Layout.Mobile.cshtml, являющийся макета на базе мобильных технологий jQuery.
- Это компонент переключателя, который состоит изViews/Shared/\_ViewSwitcher.cshtml частичного представления и контроллера ViewSwitcherController.cs.

После установки пакета, запустите приложение с помощью браузера мобильного устройства (или аналогичный, таких как Firefox [переключателя агента пользователя](http://chrispederick.com/work/user-agent-switcher/) надстройки). Вы увидите, что на страницах отличаться, так как jQuery Mobile обрабатывает макет и оформление. Чтобы воспользоваться этим, можно сделать следующее:

- Создание мобильных обозревателей Просмотр переопределений, как описано в разделе [режимов отображения](#_Toc303253810) ранее (например, создать Views\Home\Index.mobile.cshtml для переопределения Views\Home\Index.cshtml для браузеров мобильных устройств).
- Чтение [jQuery мобильных документации](http://jquerymobile.com/) Дополнительные сведения о том, как добавить элементы пользовательского интерфейса, оптимизированных для сенсорных экранов мобильных представлений.

Соглашение для веб-страниц, оптимизированных для мобильных устройств — Добавление ссылки которых указано что-то как представление рабочего стола или режиме весь сайт, который позволяет пользователям переключиться в настольной версии страницы. Пакет jQuery.Mobile.MVC содержит образец компонента переключателя для этой цели. Он используется в используемом по умолчанию Views\Shared\\_Layout.Mobile.cshtml представления, и при отображении страницы выглядит следующим образом:

![](mvc4-beta-release-notes/_static/image5.png)

Если посетители щелкните ссылку, они выполняется переключение на настольной версии той же странице.

Поскольку макет рабочего стола не будет включать представление переключателя по умолчанию, посетители, ничего не способ получить мобильных режиму. Чтобы включить эту функцию, добавьте следующую ссылку на  *\_ViewSwitcher* макет рабочего стола, просто внутри *&lt;текст&gt;* элемент:

[!code-cshtml[Main](mvc4-beta-release-notes/samples/sample7.cshtml)]

Просмотреть переключатель используется новая функция, называемая переопределения браузера. Эта функция позволяет приложению рассматривать запросы, как если бы они поступали от другой браузер (агент пользователя), чем они появляются из. Ниже перечислены методы, предоставляемые переопределения браузера.

| `HttpContext.SetOverriddenBrowser(userAgentString)` | Переопределяет значение агента пользователя запроса, с указанием указанного агента пользователя. |
| --- | --- |
| `HttpContext.GetOverriddenUserAgent()` | Возвращает значение переопределения агента пользователя в запросе, или строку агента пользователя, если переопределение не был указан. |
| `HttpContext.GetOverriddenBrowser()` | Возвращает *HttpBrowserCapabilitiesBase* , соответствующего агента пользователя, заданных в настоящее время для запроса (фактические или переопределено). Это значение можно использовать для получения свойств, таких как *IsMobileDevice*. |
| `HttpContext.ClearOverriddenBrowser()` | Удаляет все переопределенные агенты пользователя для текущего запроса. |

Подмена браузера является базовой функцией ASP.NET MVC 4 и доступен, даже если вы не установите пакет jQuery.Mobile.MVC. Тем не менее, он затрагивает только "представления", "Макет" и "Выбор частичного представления, он не влияет на любые другие функции ASP.NET, который зависит от *Request.Browser* объекта.

По умолчанию агент пользователя переопределение хранится с использованием файла cookie. Если вы хотите сохранять переопределения в другом месте (например, в базе данных), можно заменить поставщика по умолчанию (*BrowserOverrideStores.Current*). Документация для данного поставщика, будет прилагаются более поздний выпуск ASP.NET MVC.

<a id="_Toc303253812"></a>
### <a name="recipes-for-code-generation-in-visual-studio"></a>Рецепты для создания кода в Visual Studio

Новая функция рецепты позволяет Visual Studio для создания кода конкретного решения с учетом пакетов, которые можно установить с помощью NuGet. Рецепты framework позволяет разработчикам создавать подключаемые модули для создания кода, которые также можно использовать для замены генераторы встроенный код для добавления области, добавление контроллера и Добавление представления. Так как рецепты развертываются в виде пакетов NuGet, их можно легко в системе управления версиями и предоставлен всем разработчикам в проект автоматически. Они также доступны на основе каждого решения.

<a id="_Toc303253813"></a>
### <a name="task-support-for-asynchronous-controllers"></a>Поддержка задачи для асинхронных контроллеров

Теперь можно написать асинхронные методы действия, как единый методы, которые возвращают объект типа *задачи* или *задачи&lt;ActionResult&gt;*.

Например, если вы используете Visual C# 5 (или с помощью [Async CTP](https://msdn.microsoft.com/vstudio/async.aspx)), можно создать асинхронный метод, который выглядит следующим образом:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample8.cs)]

В предыдущем методе действия, вызовы *newsService.GetHeadlinesAsync* и *sportsService.GetScoresAsync* вызываются асинхронно и не блокируют поток из пула потоков.

Асинхронные методы действия, которые возвращают *задачи* экземпляров также может поддерживать время ожидания. Чтобы сделать метод действия будет поддерживать отмену, добавьте параметр типа *CancellationToken* в сигнатуру метода действия. В следующем примере показано асинхронного метода действия, имеет время ожидания в миллисекундах 2500 и, отображающий *TimedOut* просмотреть клиенту, если время ожидания.

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample9.cs)]

<a id="_Toc303253814"></a>
### <a name="azure-sdk"></a>Пакет SDK для Azure

Бета-версии 4 ASP.NET MVC поддерживает выпуск сентября 2011 г. 1.5 пакета SDK для Windows Azure.

<a id="_Toc303253815"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

- **После установки бета-версии ASP.NET MVC 4, редактор CSHTML и VBHTML в редакторе Visual Studio 2010 Service Pack 1 CSHTML и VBHTML может приостановить в течение длительного времени после ввода фрагмента или JavaScript в файлах cshtml и vbhtml.** Это происходит только в приложениях ASP.NET MVC 4, которые были недавно созданы и еще не скомпилированы.

    Обходной путь — скомпилировать проект, чтобы получить сборки в папке bin. Обратите внимание, что если вы очистите проект, который удаляет сборки из папки bin, проблема редактор будет восстановлен.

    Эта ошибка будет исправлена в следующем выпуске.
- **Шаблоны проектов C# для Visual Studio 11 Beta содержать неправильных строк подключения в файле Global.asax.cs.** Подключения по умолчанию, указанной в приложении\_метод Start для проектов, созданных в Visual Studio 11 Beta содержит строку подключения LocalDB, которая содержит без escape-символов обратной косой черты (\) символ. Это приводит к ошибке соединения после попытки доступа к Entity Framework DbContext, который приводит к возникновению ошибки SqlException.

    Чтобы исправить эту проблему, escape-символ обратной косой черты в приложении\_запустить метод Global.asax.cs, таким образом, чтобы она имела следующий вид:

    [!code-csharp[Main](mvc4-beta-release-notes/samples/sample10.cs)]
- **Приложения ASP.NET MVC 4, которые предназначен для .NET 4.5 вызывает исключение FileLoadException при попытке доступа к сборке System.Net.Http.dll, при работе под .NET 4.0.** Приложения ASP.NET MVC 4, созданные в .NET 4.5 содержат привязку перенаправления, которая становится причиной FileLoadException, который, сообщающее «не удалось загрузить файл или сборку «System.Net.Http» или одну из ее зависимостей.» Когда приложение выполняется в системе с установленным .NET 4.0. Чтобы устранить эту проблему, удалите следующее перенаправление привязки из файла web.config:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample11.xml)]

    Элемент привязки сборки в измененный файл web.config должен выглядеть следующим образом:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample12.xml)]
- <strong>Шаблон элемента «Добавление контроллера» в проектах Visual Basic создает неправильное пространство имен при вызове</strong><strong>из внутри области.</strong> При добавлении контроллера в область, в проекте ASP.NET MVC с помощью Visual Basic, шаблон элемента вставляет неправильное пространство имен в контроллер. Результатом является ошибка «файл не найден» при переходе к любому действию контроллера.  
  
  Сформированное пространство имен исключает все, что после корневое пространство имен. Например, является пространство имен созданных *RootNamespace* , но должно быть *RootNamespace.Areas.AreaName.Controllers* .
- **Критические изменения в модуль представлений Razor.** Как часть перезаписи средство синтаксического анализа Razor, были удалены следующие типы из *System.Web.Mvc.Razor*: 

    - *ModelSpan*
    - *MvcVBRazorCodeGenerator*
    - *MvcCSharpRazorCodeGenerator*
    - *MvcVBRazorCodeParser*

  Также были удалены следующие методы: 

    - *MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*
    - *MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*
    - *MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*
- **Если WebMatrix.WebData.dll включен в каталоге/Bin приложения ASP.NET MVC 4, она имеет над URL-адрес для проверки подлинности форм.** Добавление сборки WebMatrix.WebData.dll приложения (например, выбрав «ASP.NET веб-страницы с синтаксисом Razor» при использовании диалогового окна Добавление развертываемых зависимостей) будет переопределять перенаправления входа проверки подлинности/учетная запись входа в систему вместо / Учетная запись или имя пользователя по умолчанию ASP.NET MVC учетной записи контроллера должным образом. Чтобы предотвратить такое поведение и использовать URL-адрес уже указан в разделе проверки подлинности файла Web.config, можно добавить appSetting с именем PreserveLoginUrl и присвойте ему значение true: 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample13.xml)]
- **Диспетчер пакетов NuGet не устанавливается при установке ASP.NET MVC 4 для параллельных установок Visual Studio 2010 и Visual Web Developer 2010.** Для запуска Visual Studio 2010 и Visual Web Developer 2010 параллельно с ASP.NET MVC 4 необходимо установить ASP.NET MVC 4 после уже были установлены обе версии Visual Studio.
- **При удалении ASP.NET MVC 4 завершается ошибкой, если необходимые компоненты уже был удален.** Чтобы полностью удалить ASP.NET MVC 4you необходимо удалить перед удалением Visual Studio ASP.NET MVC 4.
- **Запуск проекта веб-API по умолчанию показывает инструкции, неправильно направлять пользователя для добавления маршрутов с помощью метода RegisterApis, который не существует.** Маршруты должны быть добавлены в методе RegisterRoutes, с помощью таблицы маршрутов ASP.NET.
- **Установка бета-версия ASP.NET MVC 4 прерывает приложения ASP.NET MVC 3 RTM.** Приложения ASP.NET MVC 3, которые были созданы с RTM выпуска (не с выпуском обновления средств ASP.NET MVC 3) следующие изменения для работы требуется side-by-side, с помощью бета-версии ASP.NET MVC 4. Построение проекта без сохранения результатов обновления в ошибки компиляции. 

    **Необходимые обновления**

  1. В корневом файле Web.config, добавьте новый *&lt;appSettings&gt;* запись с ключом *webPages:Version* и значение *1.0.0.0*.

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample14.xml)]
  2. В обозревателе решений щелкните правой кнопкой мыши имя проекта и затем выберите команду Выгрузить проект. Затем щелкните правой кнопкой мыши имя и выберите "Правка" *имя_проекта*.csproj.
  3. Найдите ссылки на следующие сборки: 

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample15.xml)]

      Замените их следующим кодом:

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample16.xml)]
  4. Сохраните изменения, закройте файл проекта (csproj), редактирования, а затем щелкните правой кнопкой мыши проект и выберите перезагрузить.
