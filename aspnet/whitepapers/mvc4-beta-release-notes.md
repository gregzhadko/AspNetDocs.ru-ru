---
uid: whitepapers/mvc4-beta-release-notes
title: ASP.NET MVC 4 | Документация Майкрософт
author: rick-anderson
description: В этом документе описывается выпуск бета-версии ASP.NET MVC 4 для Visual Studio 2010.
ms.author: riande
ms.date: 09/09/2011
ms.assetid: 666407bb-81de-4319-89ba-0302c382a208
msc.legacyurl: /whitepapers/mvc4-beta-release-notes
msc.type: content
ms.openlocfilehash: 17800dfe091bbb7afb25f7f41e3bd885b882edb0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78419844"
---
# <a name="aspnet-mvc-4"></a>ASP.NET MVC 4

> В этом документе описывается выпуск бета-версии ASP.NET MVC 4 для Visual Studio 2010.
> 
> > [!NOTE]
> > Это не самая последняя версия. Заметки о выпуске ASP.NET MVC 4 версии-КАНДИДАТа доступны [здесь](mvc4-release-notes.md).

- [Заметки об установке](#_Toc303253802)
- [Документация](#_Toc303253803)
- [Поддержка](#_Toc303253804)
- [Требования к программному обеспечению](#_Toc303253805)
- [Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4](#_Toc303253806)
- [Новые возможности в ASP.NET MVC 4 Beta](#_Toc303253807)

    - [ASP.NET Web API](#_Toc317096197)
    - [Одностраничное приложение ASP.NET](#_Toc317096198)
    - [Усовершенствования шаблонов проектов по умолчанию](#_Toc303253808)
    - [Шаблон мобильного проекта](#_Toc303253809)
    - [Режимы экрана](#_Toc303253810)
    - [jQuery Mobile, переключатель представлений и переопределение браузера](#_Toc303253811)
    - [Рецепты для создания кода в Visual Studio](#_Toc303253812)
    - [Поддержка задач для асинхронных контроллеров](#_Toc303253813)
    - [Пакет Azure SDK](#_Toc303253814)
    - [Известные проблемы и критические изменения](#_Toc303253815)

<a id="_Toc303253802"></a>
## <a name="installation-notes"></a>Замечания по установке

Бета-версию ASP.NET MVC 4 для Visual Studio 2010 можно установить с [домашней страницы ASP.NET MVC 4](../mvc/mvc4.md) с помощью установщика веб – платформы.

Перед установкой бета-версии ASP.NET MVC 4 необходимо удалить все ранее установленные предварительные версии ASP.NET MVC 4.

Этот выпуск несовместим с предварительной версией для разработчиков .NET Framework 4,5. Перед установкой бета-версии ASP.NET MVC 4 необходимо удалить предварительную версию для разработчиков .NET 4,5.

ASP.NET MVC 4 можно установить и выполнять параллельно с ASP.NET MVC 3.

<a id="_Toc303253803"></a>
## <a name="documentation"></a>Документация

Документацию по ASP.NET MVC доступна на веб-сайте MSDN по URL-адресу:

[https://go.microsoft.com/fwlink/?LinkID=243043](https://go.microsoft.com/fwlink/?LinkID=243043)

Руководства и другие сведения о ASP.NET MVC доступны на странице MVC 4 веб-сайта ASP.NET ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md)).

<a id="_Toc303253804"></a>
## <a name="support"></a>Поддержка

Это предварительный выпуск, который официально не поддерживается. Если у вас возникли вопросы о работе с этим выпуском, опубликуйте их на форуме ASP.NET MVC ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)), где участники сообщества ASP.NET часто могут предоставлять неофициальную поддержку.

<a id="_Toc303253805"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

Для компонентов ASP.NET MVC 4 для Visual Studio требуется PowerShell 2,0 и Visual Studio 2010 с пакетом обновления 1 (SP1) или Visual Web Developer Express 2010 с пакетом обновления 1 (SP1).

<a id="_Toc303253806"></a>
## <a name="upgrading-an-aspnet-mvc-3-project-to-aspnet-mvc-4"></a>Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4

ASP.NET MVC 4 можно установить параллельно с ASP.NET MVC 3 на том же компьютере, что дает гибкость в выборе времени обновления приложения ASP.NET MVC 3 до ASP.NET MVC 4.

Самый простой способ обновления — создать новый проект ASP.NET MVC 4 и скопировать все представления, контроллеры, код и файлы содержимого из существующего проекта MVC 3 в новый проект, а затем обновить ссылки на сборки в новом проекте, чтобы они соответствовали старому проекту. Если вы внесли изменения в файл Web. config в проекте MVC 3, необходимо также объединить эти изменения в файл Web. config в проекте MVC 4.

Чтобы вручную обновить существующее приложение ASP.NET MVC 3 до версии 4, выполните следующие действия.

1. Во всех файлах Web. config в проекте (один в корне проекта, один в папке Views, а другой — в папке Views для каждой области проекта) замените каждый экземпляр следующего текста:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample1.cmd)]

    со следующим соответствующим текстом:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample2.cmd)]
2. В корневом файле Web. config обновите элемент веб *-страницы: Version* на "2.0.0.0" и добавьте новый ключ *пресервелогинурл* со значением "true":

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample3.xml)]
3. В обозреватель решений удалите ссылку на *System. Web. MVC* (которая указывает на библиотеку DLL версии 3). Затем добавьте ссылку на *System. Web. MVC* (v 4.0.0.0). В частности, внесите следующие изменения, чтобы обновить ссылки на сборки. Дополнительные сведения:

    1. В обозреватель решений удалите ссылки на следующие сборки: 

        - *System. Web. MVC*(v 3.0.0.0)
        - *System. Web. веб-страницы*(v 1.0.0.0)
        - *System. Web. Razor*(v 1.0.0.0)
        - *System. Web. веб-страницы. Развертывание*(v 1.0.0.0)
        - *System. Web. веб-страницы. Razor*(v 1.0.0.0)
    2. Добавьте ссылки на следующие сборки: 

        - *System. Web. MVC*(v 4.0.0.0)
        - *System. Web. веб-страницы*(v 2.0.0.0)
        - *System. Web. Razor*(v 2.0.0.0)
        - *System. Web. веб-страницы. Развертывание*(v 2.0.0.0)
        - *System. Web. веб-страницы. Razor*(v 2.0.0.0)
4. В обозреватель решений щелкните правой кнопкой мыши имя проекта и выберите команду Выгрузить проект. Затем щелкните имя правой кнопкой мыши и выберите пункт изменить *имя_проекта*. csproj.
5. Укажите элемент *ProjectTypeGuids* и замените {E53F8FEA-EAE0-44A6-8774-FFD645390401} на {E3E379DF-F4C6-4180-9B81-6769533ABE47}.
6. Сохраните изменения, закройте файл проекта (. csproj), который вы редактировали, щелкните правой кнопкой мыши проект и выберите Перезагрузить проект.
7. Если проект ссылается на сторонние библиотеки, скомпилированные с помощью предыдущих версий ASP.NET MVC, откройте корневой файл Web. config и добавьте в раздел *конфигурации* следующие три элемента *bindingRedirect* : 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample4.xml)]

<a id="_Toc303253807"></a>
## <a name="new-features-in-aspnet-mvc-4-beta"></a>Новые возможности в ASP.NET MVC 4 Beta

В этом разделе описываются функции, которые появились в бета-версии ASP.NET MVC 4.

<a id="_Toc317096197"></a>
### <a name="aspnet-web-api"></a>Веб-API ASP.NET

ASP.NET MVC 4 теперь включает веб-API ASP.NET, новую платформу для создания служб HTTP, которые могут обращаться к широкому спектру клиентов, включая браузеры и мобильные устройства. Веб-API ASP.NET также является идеальной платформой для создания служб RESTFUL.

Веб-API ASP.NET включает поддержку следующих функций:

- **Современная модель программирования http:** Прямой доступ и обработка запросов HTTP и ответов в веб-API с помощью новой, строго типизированной объектной модели HTTP. Одна и та же модель программирования и конвейер HTTP симметрично доступны на клиенте через новый тип HttpClient.
- **Полная поддержка маршрутов**: веб-API теперь поддерживают полный набор возможностей маршрута, которые всегда были частью веб-стека, включая параметры маршрута и ограничения. Кроме того, сопоставление с действиями полностью поддерживает соглашения, поэтому вам больше не нужно применять атрибуты, такие как [HttpPost], к классам и методам.
- **Согласование содержимого**. Клиент и сервер могут совместно работать, чтобы определить правильный формат данных, возвращаемых API. Мы предоставляем поддержку по умолчанию для форматов в формате URL, JSON и форм, и вы можете расширить эту поддержку, добавив собственные модули форматирования или даже заменив стратегию согласования содержимого по умолчанию.
- **Привязка и проверка модели:** Связыватели моделей предоставляют простой способ извлечения данных из различных частей HTTP-запроса и преобразования этих частей сообщений в объекты .NET, которые могут использоваться действиями веб-API.
- **Фильтры:** Веб-API теперь поддерживает фильтры, включая хорошо известные фильтры, такие как атрибут [авторизовать]. Вы можете создавать и подключать собственные фильтры для действий, авторизации и обработки исключений.
- **Композиция запросов:** Просто возвращая IQueryable&lt;T&gt;, веб-API будет поддерживать запросы с помощью соглашений об URL-адресах OData.
- **Улучшение тестирования сведений http:** Вместо настройки сведений HTTP в статических объектах контекста действия веб-API теперь могут работать с экземплярами HttpRequestMessage и HttpResponseMessage. Также существуют универсальные версии этих объектов, позволяющие работать с пользовательскими типами в дополнение к типам HTTP.
- **Улучшенная инверсия управления (IOC) через депенденциресолвер:** Теперь веб-API использует шаблон локатора служб, реализованный сопоставительом зависимостей MVC, для получения экземпляров для множества различных возможностей.
- **Конфигурация на основе кода:** Настройка веб-API выполняется исключительно с помощью кода, что обеспечивает очистку файлов конфигурации.
- **Самостоятельный узел:** Веб-API можно размещать в собственном процессе в дополнение к службам IIS, используя все возможности маршрутов и другие функции веб-API.

Дополнительные сведения о веб-API ASP.NET см. [https://www.asp.net/web-api](../web-api/index.md).

<a id="_Toc317096198"></a>
### <a name="aspnet-single-page-application"></a>Одностраничное приложение ASP.NET

ASP.NET MVC 4 теперь включает в себя предварительную версию процесса создания одностраничных приложений с значительными взаимодействиями на стороне клиента с помощью JavaScript и веб-API. Эта поддержка включает в себя:

- Набор библиотек JavaScript для более тесных локальных взаимодействий с кэшированными данными
- Дополнительные компоненты веб-API для поддержки единиц работы и DAL
- Шаблон проекта MVC с формированием шаблонов для быстрого начала работы

Дополнительные сведения о поддержке одностраничных приложений в ASP.NET MVC 4 см. [https://www.asp.net/single-page-application](../single-page-application/index.md).

<a id="_Toc303253808"></a>
### <a name="enhancements-to-default-project-templates"></a>Усовершенствования шаблонов проектов по умолчанию

Шаблон, используемый для создания новых проектов ASP.NET MVC 4, был обновлен для создания более современной веб-сайта:

![](mvc4-beta-release-notes/_static/image1.png)

Помимо косметических улучшений, в новом шаблоне улучшены функциональные возможности. Шаблон использует метод, называемый адаптивной отрисовкой, для удобного поиска в настольных браузерах и в мобильных браузерах без каких-либо настроек.

![](mvc4-beta-release-notes/_static/image2.png)

Чтобы увидеть адаптивную визуализацию в действии, можно использовать эмулятор мобильного устройства или просто попытаться уменьшить размер окна браузера настольных систем. Когда окно браузера становится достаточно малым, макет страницы изменится.

Еще одним усовершенствованием шаблона проекта по умолчанию является использование JavaScript для предоставления расширенного пользовательского интерфейса. Ссылки для входа и регистрации, используемые в шаблоне, являются примерами того, как использовать диалоговое окно пользовательского интерфейса jQuery для представления многофункционального экрана входа:

![](mvc4-beta-release-notes/_static/image3.png)

<a id="_Toc303253809"></a>
### <a name="mobile-project-template"></a>Шаблон мобильного проекта

Если вы запускаете новый проект и хотите создать сайт специально для мобильных и планшетных браузеров, можно использовать новый шаблон проекта мобильного приложения. Это основано на jQuery Mobile, библиотеке с открытым исходным кодом для создания пользовательского интерфейса, оптимизированного для сенсорного ввода:

![](mvc4-beta-release-notes/_static/image4.png)

Этот шаблон содержит ту же структуру приложения, что и шаблон Интернет-приложения (и код контроллера практически идентичен), но он использует jQuery Mobile, чтобы выглядеть хорошо и хорошо работать на мобильных устройствах с поддержкой сенсорного ввода. Дополнительные сведения о структурировании и стиле мобильного пользовательского интерфейса см. на [веб-сайте мобильного проекта jQuery](http://jquerymobile.com/).

Если у вас уже есть сайт, ориентированный на Рабочий стол, в который нужно добавить представления, оптимизированные для мобильных устройств, или вы хотите создать отдельный сайт, который будет работать с другими представлениями для настольных и мобильных браузеров, можно использовать новые режимы отображения. (См. следующий раздел).

<a id="_Toc303253810"></a>
### <a name="display-modes"></a>Режимы экрана

Новая функция режима отображения позволяет приложению выбирать представления в зависимости от браузера, выполняющего запрос. Например, если браузер настольных систем запрашивает домашнюю страницу, приложение может использовать шаблон Views\Home\Index.cshtml. Если браузер мобильного устройства запрашивает домашнюю страницу, приложение может вернуть шаблон Виевс\хоме\индекс.Мобиле.кштмл.

Макеты и части можно также переопределять для конкретных типов браузеров. Пример:

- Если папка Views\Shared содержит шаблоны \_Layout. cshtml и \_Layout. Mobile. cshtml, по умолчанию приложение будет использовать \_Layout. Mobile. cshtml во время запросов от мобильных браузеров и \_Layout. cshtml во время других запросов.
- Если папка содержит как \_Мипартиал. cshtml, так и \_Мипартиал. Mobile. cshtml, инструкция @Html.Partial("\_Мипартиал") будет отображать \_Мипартиал. Mobile. cshtml во время запросов от мобильных браузеров и \_Мипартиал. cshtml во время других запросов.

Если вы хотите создать более конкретные представления, макеты или частичные представления для других устройств, можно зарегистрировать новый экземпляр *дефаултдисплаймоде* , чтобы указать, какое имя следует искать, когда запрос удовлетворяет определенным условиям. Например, можно добавить следующий код в метод *\_запуска приложения* в файле Global. asax, чтобы зарегистрировать строку "iPhone" в качестве режима экрана, который применяется при выполнении в браузере Apple iPhone запроса:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample5.cs)]

После выполнения этого кода, когда браузер Apple iPhone выполняет запрос, приложение будет использовать макет Views\Shared\\_Layout. iPhone. cshtml (если он существует).

<a id="_Toc303253811"></a>
### <a name="jquery-mobile-the-view-switcher-and-browser-overriding"></a>jQuery Mobile, переключатель представлений и переопределение браузера

jQuery Mobile — это библиотека с открытым исходным кодом для создания веб-интерфейса, оптимизированного для сенсорного ввода. Если вы хотите использовать jQuery Mobile с приложением ASP.NET MVC 4, можно скачать и установить пакет NuGet, который поможет приступить к работе. Чтобы установить его из консоли диспетчера пакетов Visual Studio, введите следующую команду:

[!code-powershell[Main](mvc4-beta-release-notes/samples/sample6.ps1)]

Это устанавливает jQuery Mobile и некоторые вспомогательные файлы, включая следующие:

- Views/Shared/\_Layout. Mobile. cshtml — макет на основе jQuery Mobile.
- Компонент-переключатель представления, который состоит из частичного представления views/Shared/\_Виевсвитчер. cshtml и контроллера ViewSwitcherController.cs.

После установки пакета запустите приложение с помощью браузера для мобильных устройств (или аналогичного, например надстройки [агента пользователя](http://chrispederick.com/work/user-agent-switcher/) Firefox). Вы увидите, что страницы выглядят совершенно иначе, так как jQuery Mobile обрабатывает макет и стилизацию. Чтобы воспользоваться этим преимуществом, можно выполнить следующие действия.

- Создавайте представления для мобильных устройств, как описано в разделе [режимы отображения](#_Toc303253810) ранее (например, CREATE виевс\хоме\индекс.Мобиле.кштмл to reoverride Views\Home\Index.cshtml для мобильных браузеров).
- Дополнительные сведения о добавлении элементов пользовательского интерфейса, оптимизированных с помощью сенсорного ввода в мобильных представлениях, см. в [документации по jQuery Mobile](http://jquerymobile.com/) .

В качестве соглашения для веб-страниц, оптимизированных для мобильных устройств, можно добавить ссылку, текст которой похож на вид рабочего стола или полного режима сайта, позволяющий пользователям переключаться на настольную версию страницы. Пакет jQuery. Mobile. MVC содержит пример компонента-переключателя представления для этой цели. Он используется в представлении по умолчанию Views\Shared\\_Layout. Mobile. cshtml и выглядит следующим образом при подготовке страницы к просмотру:

![](mvc4-beta-release-notes/_static/image5.png)

Если посетитель щелкает ссылку, он переключается на настольную версию той же страницы.

Так как макет рабочего стола не будет включать переключатель представления по умолчанию, посетители не смогут перейти на мобильный режим. Чтобы включить эту функцию, добавьте следующую ссылку на *\_виевсвитчер* в макет рабочего стола, непосредственно внутри элемента *&lt;Body&gt;* :

[!code-cshtml[Main](mvc4-beta-release-notes/samples/sample7.cshtml)]

Переключатель представлений использует новую функцию, называемую переопределением браузера. Эта функция позволяет приложению обрабатывать запросы так, как будто они поступили из другого браузера (агента пользователя), отличного от того, на котором они действительно находятся. В следующей таблице перечислены методы, предоставляемые переопределением браузера.

| `HttpContext.SetOverriddenBrowser(userAgentString)` | Переопределяет значение агента пользователя в запросе с указанием указанного агента пользователя. |
| --- | --- |
| `HttpContext.GetOverriddenUserAgent()` | Возвращает значение переопределения агента пользователя запроса или фактическую строку агента пользователя, если переопределение не задано. |
| `HttpContext.GetOverriddenBrowser()` | Возвращает экземпляр *хттпбровсеркапабилитиесбасе* , соответствующий агенту пользователя, заданному в настоящий момент для запроса (фактический или переопределенный). Это значение можно использовать для получения таких свойств, как *исмобиледевице*. |
| `HttpContext.ClearOverriddenBrowser()` | Удаляет все переопределенные агенты пользователя для текущего запроса. |

Переопределение обозревателя является основной функцией ASP.NET MVC 4 и доступна даже в том случае, если не устанавливается пакет jQuery. Mobile. MVC. Однако он влияет только на представление, макет и частичное представление — оно не влияет на другие функции ASP.NET, которые зависят от объекта *request. browser* .

По умолчанию переопределение агента пользователя хранится с помощью файла cookie. Если вы хотите сохранить переопределение в других местах (например, в базе данных), можно заменить поставщик по умолчанию (*бровсероверридесторес. Current*). Документация для этого поставщика будет доступна для последующего выпуска ASP.NET MVC.

<a id="_Toc303253812"></a>
### <a name="recipes-for-code-generation-in-visual-studio"></a>Рецепты для создания кода в Visual Studio

Новая функция рецептов позволяет Visual Studio создавать код, зависящий от решения, на основе пакетов, которые можно установить с помощью NuGet. Платформа рецептов упрощает разработчикам написание подключаемых модулей для создания кода, которые также можно использовать для замены встроенных генераторов кода для добавления области, добавления контроллера и добавления представления. Поскольку рецепты развертываются как пакеты NuGet, их можно легко вернуть в систему управления версиями и предоставить доступ всем разработчикам в проекте автоматически. Они также доступны для каждого решения.

<a id="_Toc303253813"></a>
### <a name="task-support-for-asynchronous-controllers"></a>Поддержка задач для асинхронных контроллеров

Теперь можно писать асинхронные методы действий в виде отдельных методов, возвращающих объект типа *Task* или *task&lt;ActionResult&gt;* .

Например, если вы используете Visual C# 5 (или [Async CTP](https://msdn.microsoft.com/vstudio/async.aspx)), то можете создать асинхронный метод действия, который выглядит следующим образом:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample8.cs)]

В предыдущем методе действия вызовы *невссервице. жесеадлинесасинк* и *спортссервице. жетскоресасинк* вызываются асинхронно и не блокируют поток из пула потоков.

Асинхронные методы действия, возвращающие экземпляры *задачи* , также могут поддерживать время ожидания. Чтобы метод действия можно было отменять, добавьте параметр типа *CancellationToken* в сигнатуру метода действия. В следующем примере показан асинхронный метод действия, который имеет время ожидания 2500 миллисекунд и отображает *timedOut* представление клиенту в случае истечения времени ожидания.

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample9.cs)]

<a id="_Toc303253814"></a>
### <a name="azure-sdk"></a>Пакет SDK Azure

Бета-версия ASP.NET MVC 4 поддерживает выпуск пакета SDK для Windows Azure за Сентябрь 2011 1,5.

<a id="_Toc303253815"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

- **После установки бета-версии ASP.NET MVC 4 редактор CSHTML/VBHTML в Visual Studio 2010 с пакетом обновления 1 CSHTML/VBHTML может приостановиться в течение длительного времени после ввода фрагмента или JavaScript в файлах CSHTML или VBHTML.** Это происходит только в приложениях ASP.NET MVC 4, которые были только что созданы и еще не скомпилированы.

    Обходной путь заключается в компиляции проекта для получения сборок в папке bin. Обратите внимание, что при очистке проекта, который удаляет сборки из папки Bin, проблема с редактором будет восстановлена.

    Это будет исправлено в следующем выпуске.
- **C#Шаблоны проектов для бета-версии Visual Studio 11 содержат неверную строку подключения в Global.asax.cs.** Соединение по умолчанию, указанное в методе запуска\_приложения для проектов, созданных в бета-версии Visual Studio 11, содержит строку подключения LocalDB, которая содержит обратную косую черту без escape-последовательности (\) символ. Это приводит к ошибке соединения при попытке доступа к Entity Framework DbContext, которая создает SqlException.

    Чтобы устранить эту ошибку, следует отформатировать обратную косую черту в методе\_запуска приложения Global.asax.cs, чтобы он пропускался следующим образом:

    [!code-csharp[Main](mvc4-beta-release-notes/samples/sample10.cs)]
- **Приложения ASP.NET MVC 4, предназначенные для .NET 4,5, вызовут FileLoadException при попытке получить доступ к сборке System. NET. http. dll при запуске в среде .NET 4,0.** Приложения ASP.NET MVC 4, созданные в .NET 4,5, содержат перенаправление привязки, которое приведет к тому, что FileLoadException не сможет загрузить файл или сборку System .NET. http или одну из ее зависимостей. Когда приложение выполняется в системе с установленным .NET 4,0. Чтобы устранить эту ошибку, удалите следующее перенаправление привязки из файла Web. config:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample11.xml)]

    Элемент привязки сборки в измененном файле Web. config должен выглядеть следующим образом:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample12.xml)]
- <strong>Шаблон элемента "Добавление контроллера" в Visual Basic проектах создает неверное пространство имен при вызове</strong><strong>из области.</strong> При добавлении контроллера в область в проекте ASP.NET MVC, использующем Visual Basic, шаблон элемента вставляет в контроллер неправильное пространство имен. Результат — ошибка "файл не найден" при переходе к любому действию в контроллере.  
  
  Созданное пространство имен пропускает все после корневого пространства имен. Например, создаваемое пространство имен — *RootNamespace* , но должно быть *RootNamespace. Areas. ареанаме. Controllers* .
- **Критические изменения в подсистеме представления Razor.** В процессе перезаписи средства синтаксического анализа Razor следующие типы были удалены из *System. Web. MVC. Razor*: 

    - *моделспан*
    - *мвквбразоркодеженератор*
    - *мвккшарпразоркодеженератор*
    - *мвквбразоркодепарсер*

  Также были удалены следующие методы: 

    - *Мвккшарпразоркодепарсер. Парсеинхеритсстатемент (System. Web. Razor. Parser. Кодеблоккинфо)*
    - *Мвквебпажеразорхост. Декоратекодеженератор (System. Web. Razor. Generator. Разоркодеженератор)*
    - *Мвквбразоркодепарсер. Парсеинхеритсстатемент (System. Web. Razor. Parser. Кодеблоккинфо)*
- **Когда WebMatrix. dll включается в каталог "ASP.NET" приложений MVC 4, он принимает по URL-адресу для проверки подлинности с помощью форм.** Добавление сборки WebMatrix. WebDeploy. dll в приложение (например, при выборе "веб-страницы ASP.NET с синтаксисом Razor" при использовании диалогового окна Добавление развертываемых зависимостей) переопределяет перенаправление входа в систему проверки подлинности на/аккаунт/Логон, а не/аккаунт/логин, как ожидалось контроллером учетной записи ASP.NET MVC по умолчанию. Чтобы предотвратить такое поведение и использовать URL-адрес, который уже указан в разделе Authentication файла Web. config, можно добавить appSetting с именем Пресервелогинурл и задать для него значение true: 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample13.xml)]
- **Не удается установить диспетчер пакетов NuGet при попытке установить ASP.NET MVC 4 для параллельных установок Visual Studio 2010 и Visual Web Developer 2010.** Чтобы запустить Visual Studio 2010 и Visual Web Developer 2010 параллельно с ASP.NET MVC 4, необходимо установить ASP.NET MVC 4 после того, как обе версии Visual Studio уже установлены.
- **Удаление ASP.NET MVC 4 завершается сбоем, если предварительные условия уже удалены.** Чтобы аккуратно удалить ASP.NET MVC 4you, перед удалением Visual Studio необходимо удалить ASP.NET MVC 4.
- **При запуске проекта веб-API по умолчанию отображаются инструкции, которые неправильно направляют пользователя на добавление маршрутов с помощью метода Регистерапис, который не существует.** Маршруты должны быть добавлены в метод Регистерраутес с помощью таблицы маршрутов ASP.NET.
- **Установка ASP.NET MVC 4 Beta прерывает приложения ASP.NET MVC 3 RTM.** Приложения ASP.NET MVC 3, созданные в выпуске RTM (а не в версии средства ASP.NET MVC 3 Tools Update), для параллельной работы с бета-версией ASP.NET MVC 4 должны внести следующие изменения. Сборка проекта без выполнения этих обновлений приведет к ошибкам компиляции. 

    **Обязательные обновления**

  1. В корневом файле Web. config добавьте новую запись *&lt;appSettings&gt;* с ключевыми *веб-страницами: Version* и Value *1.0.0.0*.

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample14.xml)]
  2. В обозреватель решений щелкните правой кнопкой мыши имя проекта и выберите команду Выгрузить проект. Затем щелкните имя правой кнопкой мыши и выберите пункт изменить *имя_проекта*. csproj.
  3. Нахождение следующих ссылок на сборки: 

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample15.xml)]

      Замените их следующим:

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample16.xml)]
  4. Сохраните изменения, закройте файл проекта (. csproj), который вы редактировали, и щелкните правой кнопкой мыши проект и выберите перезагрузить.
