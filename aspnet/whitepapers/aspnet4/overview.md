---
uid: whitepapers/aspnet4/overview
title: Общие сведения о веб-разработке ASP.NET 4 и Visual Studio 2010 | Документация Майкрософт
author: rick-anderson
description: В этом документе представлен обзор многих новых функций для ASP.NET, которые включены в the.NET Framework 4 и Visual Studio 2010.
ms.author: riande
ms.date: 02/10/2010
ms.assetid: d7729af4-1eda-4ff2-8b61-dbbe4fc11d10
msc.legacyurl: /whitepapers/aspnet4
msc.type: content
ms.openlocfilehash: 8c93952adb33d1ce7008ebff9d032a71eb2a5f74
ms.sourcegitcommit: b67ffd5b2c5cff01ec4c8eb12a21f693f2e11887
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2019
ms.locfileid: "69995415"
---
# <a name="aspnet-4-and-visual-studio-2010-web-development-overview"></a><span data-ttu-id="1f6af-103">Общие сведения о веб-разработке в ASP.NET 4 и Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="1f6af-103">ASP.NET 4 and Visual Studio 2010 Web Development Overview</span></span>

> <span data-ttu-id="1f6af-104">В этом документе представлен обзор многих новых функций для ASP.NET, которые включены в the.NET Framework 4 и Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1f6af-104">This document provides an overview of many of the new features for ASP.NET that are included in the.NET Framework 4 and in Visual Studio 2010.</span></span>
> 
> [<span data-ttu-id="1f6af-105">Загрузить этот технический документ</span><span class="sxs-lookup"><span data-stu-id="1f6af-105">Download This Whitepaper</span></span>](https://download.microsoft.com/download/7/1/A/71A105A9-89D6-4201-9CC5-AD6A3B7E2F22/ASP_NET_4_and_Visual_Studio_2010_Web_Development_Overview.pdf)

<span data-ttu-id="1f6af-106">**Содержание**</span><span class="sxs-lookup"><span data-stu-id="1f6af-106">**Contents**</span></span>

<span data-ttu-id="1f6af-107">**[Основные службы] (#0.2__Toc253429238 "_Toc253429238")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-107">**[Core Services](#0.2__Toc253429238 "_Toc253429238")**</span></span>  
<span data-ttu-id="1f6af-108">[Рефакторинг файла Web. config] (#0.2__Toc253429239 "_Toc253429239")</span><span class="sxs-lookup"><span data-stu-id="1f6af-108">[Web.config File Refactoring](#0.2__Toc253429239 "_Toc253429239")</span></span>  
<span data-ttu-id="1f6af-109">[Расширяемое кэширование вывода] (#0.2__Toc253429240 "_Toc253429240")</span><span class="sxs-lookup"><span data-stu-id="1f6af-109">[Extensible Output Caching](#0.2__Toc253429240 "_Toc253429240")</span></span>  
<span data-ttu-id="1f6af-110">[Автоматический запуск веб-приложений] (#0.2__Toc253429241 "_Toc253429241")</span><span class="sxs-lookup"><span data-stu-id="1f6af-110">[Auto-Start Web Applications](#0.2__Toc253429241 "_Toc253429241")</span></span>  
<span data-ttu-id="1f6af-111">[Окончательное перенаправление страницы] (#0.2__Toc253429242 "_Toc253429242")</span><span class="sxs-lookup"><span data-stu-id="1f6af-111">[Permanently Redirecting a Page](#0.2__Toc253429242 "_Toc253429242")</span></span>  
<span data-ttu-id="1f6af-112">[Сжатие состояния сеанса] (#0.2__Toc253429243 "_Toc253429243")</span><span class="sxs-lookup"><span data-stu-id="1f6af-112">[Shrinking Session State](#0.2__Toc253429243 "_Toc253429243")</span></span>  
<span data-ttu-id="1f6af-113">[Расширение диапазона допустимых URL-адресов] (#0.2__Toc253429244 "_Toc253429244")</span><span class="sxs-lookup"><span data-stu-id="1f6af-113">[Expanding the Range of Allowable URLs](#0.2__Toc253429244 "_Toc253429244")</span></span>  
<span data-ttu-id="1f6af-114">[Расширяемая проверка запросов] (#0.2__Toc253429245 "_Toc253429245")</span><span class="sxs-lookup"><span data-stu-id="1f6af-114">[Extensible Request Validation](#0.2__Toc253429245 "_Toc253429245")</span></span>  
<span data-ttu-id="1f6af-115">[Кэширование объектов и расширяемость кэширования объектов] (#0.2__Toc253429246 "_Toc253429246")</span><span class="sxs-lookup"><span data-stu-id="1f6af-115">[Object Caching and Object Caching Extensibility](#0.2__Toc253429246 "_Toc253429246")</span></span>  
<span data-ttu-id="1f6af-116">[Расширяемость кодирования HTML, URL-адреса и заголовка HTTP] (#0.2__Toc253429247 "_Toc253429247")</span><span class="sxs-lookup"><span data-stu-id="1f6af-116">[Extensible HTML, URL, and HTTP Header Encoding](#0.2__Toc253429247 "_Toc253429247")</span></span>  
<span data-ttu-id="1f6af-117">[Мониторинг производительности отдельных приложений в одном рабочем процессе] (#0.2__Toc253429248 "_Toc253429248")</span><span class="sxs-lookup"><span data-stu-id="1f6af-117">[Performance Monitoring for Individual Applications in a Single Worker Process](#0.2__Toc253429248 "_Toc253429248")</span></span>  
<span data-ttu-id="1f6af-118">[Настройка для различных версий] (#0.2__Toc253429249 "_Toc253429249")</span><span class="sxs-lookup"><span data-stu-id="1f6af-118">[Multi-Targeting](#0.2__Toc253429249 "_Toc253429249")</span></span>

<span data-ttu-id="1f6af-119">**[AJAX] (#0.2__Toc253429250 "_Toc253429250")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-119">**[Ajax](#0.2__Toc253429250 "_Toc253429250")**</span></span>  
<span data-ttu-id="1f6af-120">[jQuery, поставляемый с веб-формами и MVC] (#0.2__Toc253429251 "_Toc253429251")</span><span class="sxs-lookup"><span data-stu-id="1f6af-120">[jQuery Included with Web Forms and MVC](#0.2__Toc253429251 "_Toc253429251")</span></span>  
<span data-ttu-id="1f6af-121">[Поддержка сети доставки содержимого] (#0.2__Toc253429252 "_Toc253429252")</span><span class="sxs-lookup"><span data-stu-id="1f6af-121">[Content Delivery Network Support](#0.2__Toc253429252 "_Toc253429252")</span></span>  
<span data-ttu-id="1f6af-122">[Явные скрипты ScriptManager] (#0.2__Toc253429253 "_Toc253429253")</span><span class="sxs-lookup"><span data-stu-id="1f6af-122">[ScriptManager Explicit Scripts](#0.2__Toc253429253 "_Toc253429253")</span></span>

<span data-ttu-id="1f6af-123">**[Веб-формы] (#0.2__Toc253429256 "_Toc253429256")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-123">**[Web Forms](#0.2__Toc253429256 "_Toc253429256")**</span></span>  
<span data-ttu-id="1f6af-124">[Установка тегов META с помощью свойств Page. кратко и Page. метадескриптион] (#0.2__Toc253429257 "_Toc253429257")</span><span class="sxs-lookup"><span data-stu-id="1f6af-124">[Setting Meta Tags with the Page.MetaKeywords and Page.MetaDescription Properties](#0.2__Toc253429257 "_Toc253429257")</span></span>  
<span data-ttu-id="1f6af-125">[Включение состояния представления для отдельных элементов управления] (#0.2__Toc253429258 "_Toc253429258")</span><span class="sxs-lookup"><span data-stu-id="1f6af-125">[Enabling View State for Individual Controls](#0.2__Toc253429258 "_Toc253429258")</span></span>  
<span data-ttu-id="1f6af-126">[Изменения возможностей браузера] (#0.2__Toc253429259 "_Toc253429259")</span><span class="sxs-lookup"><span data-stu-id="1f6af-126">[Changes to Browser Capabilities](#0.2__Toc253429259 "_Toc253429259")</span></span>  
<span data-ttu-id="1f6af-127">[Маршрутизация в ASP.NET 4] (#0.2__Toc253429260 "_Toc253429260")</span><span class="sxs-lookup"><span data-stu-id="1f6af-127">[Routing in ASP.NET 4](#0.2__Toc253429260 "_Toc253429260")</span></span>  
<span data-ttu-id="1f6af-128">[Настройка идентификаторов клиентов] (#0.2__Toc253429261 "_Toc253429261")</span><span class="sxs-lookup"><span data-stu-id="1f6af-128">[Setting Client IDs](#0.2__Toc253429261 "_Toc253429261")</span></span>  
<span data-ttu-id="1f6af-129">[Сохранение выбора строк в элементах управления данными] (#0.2__Toc253429262 "_Toc253429262")</span><span class="sxs-lookup"><span data-stu-id="1f6af-129">[Persisting Row Selection in Data Controls](#0.2__Toc253429262 "_Toc253429262")</span></span>  
<span data-ttu-id="1f6af-130">[Элемент управления диаграммы ASP.NET] (#0.2__Toc253429263 "_Toc253429263")</span><span class="sxs-lookup"><span data-stu-id="1f6af-130">[ASP.NET Chart Control](#0.2__Toc253429263 "_Toc253429263")</span></span>  
<span data-ttu-id="1f6af-131">[Фильтрация данных с помощью элемента управления элемента] (#0.2__Toc253429264 "_Toc253429264")</span><span class="sxs-lookup"><span data-stu-id="1f6af-131">[Filtering Data with the QueryExtender Control](#0.2__Toc253429264 "_Toc253429264")</span></span>  
<span data-ttu-id="1f6af-132">[Выражения кода в кодировке HTML] (#0.2__Toc253429265 "_Toc253429265")</span><span class="sxs-lookup"><span data-stu-id="1f6af-132">[Html Encoded Code Expressions](#0.2__Toc253429265 "_Toc253429265")</span></span>  
<span data-ttu-id="1f6af-133">[Изменения в шаблоне проекта] (#0.2__Toc253429266 "_Toc253429266")</span><span class="sxs-lookup"><span data-stu-id="1f6af-133">[Project Template Changes](#0.2__Toc253429266 "_Toc253429266")</span></span>  
<span data-ttu-id="1f6af-134">[Усовершенствования CSS] (#0.2__Toc253429267 "_Toc253429267")</span><span class="sxs-lookup"><span data-stu-id="1f6af-134">[CSS Improvements](#0.2__Toc253429267 "_Toc253429267")</span></span>  
<span data-ttu-id="1f6af-135">[Скрытие элементов div вокруг скрытых полей] (#0.2__Toc253429268 "_Toc253429268")</span><span class="sxs-lookup"><span data-stu-id="1f6af-135">[Hiding div Elements Around Hidden Fields](#0.2__Toc253429268 "_Toc253429268")</span></span>  
<span data-ttu-id="1f6af-136">[Отрисовка внешней таблицы для шаблонных элементов управления] (#0.2__Toc253429269 "_Toc253429269")</span><span class="sxs-lookup"><span data-stu-id="1f6af-136">[Rendering an Outer Table for Templated Controls](#0.2__Toc253429269 "_Toc253429269")</span></span>  
<span data-ttu-id="1f6af-137">[Улучшения элемента управления ListView] (#0.2__Toc253429270 "_Toc253429270")</span><span class="sxs-lookup"><span data-stu-id="1f6af-137">[ListView Control Enhancements](#0.2__Toc253429270 "_Toc253429270")</span></span>  
<span data-ttu-id="1f6af-138">[Улучшения элементов управления CheckBoxList и RadioButtonList] (#0.2__Toc253429271 "_Toc253429271")</span><span class="sxs-lookup"><span data-stu-id="1f6af-138">[CheckBoxList and RadioButtonList Control Enhancements](#0.2__Toc253429271 "_Toc253429271")</span></span>  
<span data-ttu-id="1f6af-139">[Улучшения элемента управления Menu] (#0.2__Toc253429272 "_Toc253429272")</span><span class="sxs-lookup"><span data-stu-id="1f6af-139">[Menu Control Improvements](#0.2__Toc253429272 "_Toc253429272")</span></span>  
<span data-ttu-id="1f6af-140">[Элементы управления Wizard и CreateUserWizard 56] (#0.2__Toc253429273 "_Toc253429273")</span><span class="sxs-lookup"><span data-stu-id="1f6af-140">[Wizard and CreateUserWizard Controls 56](#0.2__Toc253429273 "_Toc253429273")</span></span>

<span data-ttu-id="1f6af-141">**[ASP.NET MVC](#0.2__Toc253429274 "_Toc253429274")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-141">**[ASP.NET MVC](#0.2__Toc253429274 "_Toc253429274")**</span></span>  
<span data-ttu-id="1f6af-142">[Поддержка областей] (#0.2__Toc253429275 "_Toc253429275")</span><span class="sxs-lookup"><span data-stu-id="1f6af-142">[Areas Support](#0.2__Toc253429275 "_Toc253429275")</span></span>  
<span data-ttu-id="1f6af-143">[Поддержка проверки атрибутов] в заметках данных (#0.2__Toc253429276 "_Toc253429276")</span><span class="sxs-lookup"><span data-stu-id="1f6af-143">[Data-Annotation Attribute Validation Support](#0.2__Toc253429276 "_Toc253429276")</span></span>  
<span data-ttu-id="1f6af-144">[Шаблоны вспомогательных] функций (#0.2__Toc253429277 "_Toc253429277")</span><span class="sxs-lookup"><span data-stu-id="1f6af-144">[Templated Helpers](#0.2__Toc253429277 "_Toc253429277")</span></span>

<span data-ttu-id="1f6af-145">**[Платформа динамических данных] (#0.2__Toc253429278 "_Toc253429278")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-145">**[Dynamic Data](#0.2__Toc253429278 "_Toc253429278")**</span></span>  
<span data-ttu-id="1f6af-146">[Включение платформа динамических данных для существующих проектов] (#0.2__Toc253429279 "_Toc253429279")</span><span class="sxs-lookup"><span data-stu-id="1f6af-146">[Enabling Dynamic Data for Existing Projects](#0.2__Toc253429279 "_Toc253429279")</span></span>  
<span data-ttu-id="1f6af-147">[Декларативный синтаксис элемента управления DynamicDataManager] (#0.2__Toc253429280 "_Toc253429280")</span><span class="sxs-lookup"><span data-stu-id="1f6af-147">[Declarative DynamicDataManager Control Syntax](#0.2__Toc253429280 "_Toc253429280")</span></span>  
<span data-ttu-id="1f6af-148">[Шаблоны сущностей] (#0.2__Toc253429281 "_Toc253429281")</span><span class="sxs-lookup"><span data-stu-id="1f6af-148">[Entity Templates](#0.2__Toc253429281 "_Toc253429281")</span></span>  
<span data-ttu-id="1f6af-149">[Новые шаблоны полей для URL-адресов и адресов электронной почты] (#0.2__Toc253429282 "_Toc253429282")</span><span class="sxs-lookup"><span data-stu-id="1f6af-149">[New Field Templates for URLs and E-mail Addresses](#0.2__Toc253429282 "_Toc253429282")</span></span>  
<span data-ttu-id="1f6af-150">[Создание ссылок с помощью элемента управления DynamicHyperLink] (#0.2__Toc253429283 "_Toc253429283")</span><span class="sxs-lookup"><span data-stu-id="1f6af-150">[Creating Links with the DynamicHyperLink Control](#0.2__Toc253429283 "_Toc253429283")</span></span>  
<span data-ttu-id="1f6af-151">[Поддержка наследования в модели данных] (#0.2__Toc253429284 "_Toc253429284")</span><span class="sxs-lookup"><span data-stu-id="1f6af-151">[Support for Inheritance in the Data Model](#0.2__Toc253429284 "_Toc253429284")</span></span>  
<span data-ttu-id="1f6af-152">[Поддержка связей "многие ко многим" (только Entity Framework)] (#0.2__Toc253429285 "_Toc253429285")</span><span class="sxs-lookup"><span data-stu-id="1f6af-152">[Support for Many-to-Many Relationships (Entity Framework Only)](#0.2__Toc253429285 "_Toc253429285")</span></span>  
<span data-ttu-id="1f6af-153">[Новые атрибуты для управления отображением и поддержкой] перечислений (#0.2__Toc253429286 "_Toc253429286")</span><span class="sxs-lookup"><span data-stu-id="1f6af-153">[New Attributes to Control Display and Support Enumerations](#0.2__Toc253429286 "_Toc253429286")</span></span>  
<span data-ttu-id="1f6af-154">[Улучшенная поддержка фильтров] (#0.2__Toc253429287 "_Toc253429287")</span><span class="sxs-lookup"><span data-stu-id="1f6af-154">[Enhanced Support for Filters](#0.2__Toc253429287 "_Toc253429287")</span></span>

<span data-ttu-id="1f6af-155">**[Усовершенствования веб-разработки в Visual Studio 2010] (#0.2__Toc253429288 "_Toc253429288")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-155">**[Visual Studio 2010 Web Development Improvements](#0.2__Toc253429288 "_Toc253429288")**</span></span>  
<span data-ttu-id="1f6af-156">[Улучшенная совместимость с CSS] (#0.2__Toc253429289 "_Toc253429289")</span><span class="sxs-lookup"><span data-stu-id="1f6af-156">[Improved CSS Compatibility](#0.2__Toc253429289 "_Toc253429289")</span></span>  
<span data-ttu-id="1f6af-157">[Фрагменты кода HTML и JavaScript] (#0.2__Toc253429290 "_Toc253429290")</span><span class="sxs-lookup"><span data-stu-id="1f6af-157">[HTML and JavaScript Snippets](#0.2__Toc253429290 "_Toc253429290")</span></span>  
<span data-ttu-id="1f6af-158">[Усовершенствования IntelliSense в JavaScript] (#0.2__Toc253429291 "_Toc253429291")</span><span class="sxs-lookup"><span data-stu-id="1f6af-158">[JavaScript IntelliSense Enhancements](#0.2__Toc253429291 "_Toc253429291")</span></span>

<span data-ttu-id="1f6af-159">**[Развертывание веб-приложений с помощью Visual Studio 2010] (#0.2__Toc253429292 "_Toc253429292")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-159">**[Web Application Deployment with Visual Studio 2010](#0.2__Toc253429292 "_Toc253429292")**</span></span>  
<span data-ttu-id="1f6af-160">[Веб-упаковка] (#0.2__Toc253429293 "_Toc253429293")</span><span class="sxs-lookup"><span data-stu-id="1f6af-160">[Web Packaging](#0.2__Toc253429293 "_Toc253429293")</span></span>  
<span data-ttu-id="1f6af-161">[Преобразование web. config] (#0.2__Toc253429294 "_Toc253429294")</span><span class="sxs-lookup"><span data-stu-id="1f6af-161">[Web.config Transformation](#0.2__Toc253429294 "_Toc253429294")</span></span>  
<span data-ttu-id="1f6af-162">[Развертывание базы данных] (#0.2__Toc253429295 "_Toc253429295")</span><span class="sxs-lookup"><span data-stu-id="1f6af-162">[Database Deployment](#0.2__Toc253429295 "_Toc253429295")</span></span>  
<span data-ttu-id="1f6af-163">[Публикация одним щелчком для веб-приложений] (#0.2__Toc253429296 "_Toc253429296")</span><span class="sxs-lookup"><span data-stu-id="1f6af-163">[One-Click Publish for Web Applications](#0.2__Toc253429296 "_Toc253429296")</span></span>  
<span data-ttu-id="1f6af-164">[Ресурсы] (#0.2__Toc253429297 "_Toc253429297")</span><span class="sxs-lookup"><span data-stu-id="1f6af-164">[Resources](#0.2__Toc253429297 "_Toc253429297")</span></span>

<span data-ttu-id="1f6af-165">**[Disclaimer](#0.2__Toc253429298 "_Toc253429298")**</span><span class="sxs-lookup"><span data-stu-id="1f6af-165">**[Disclaimer](#0.2__Toc253429298 "_Toc253429298")**</span></span>

<a id="0.2__Toc224729018"></a><a id="0.2__Toc253429238"></a><a id="0.2__Toc243304612"></a>

## <a name="core-services"></a><span data-ttu-id="1f6af-166">Основные службы</span><span class="sxs-lookup"><span data-stu-id="1f6af-166">Core Services</span></span>

<span data-ttu-id="1f6af-167">В ASP.NET 4 введен ряд функций, которые улучшают основные ASP.NET службы, такие как кэширование вывода и хранилище состояний сеанса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-167">ASP.NET 4 introduces a number of features that improve core ASP.NET services such as output caching and session-state storage.</span></span>

<a id="0.2__Toc243304613"></a><a id="0.2__Toc253429239"></a><a id="0.2__Toc224729019"></a>

### <a name="webconfig-file-refactoring"></a><span data-ttu-id="1f6af-168">Рефакторинг файла Web. config</span><span class="sxs-lookup"><span data-stu-id="1f6af-168">Web.config File Refactoring</span></span>

<span data-ttu-id="1f6af-169">`Web.config` Файл, содержащий конфигурацию веб-приложения, значительно увеличился за последние несколько выпусков .NET Framework по мере добавления новых функций, таких как AJAX, маршрутизация и интеграция с IIS 7.</span><span class="sxs-lookup"><span data-stu-id="1f6af-169">The `Web.config` file that contains the configuration for a Web application has grown considerably over the past few releases of the .NET Framework as new features have been added, such as Ajax, routing, and integration with IIS 7.</span></span> <span data-ttu-id="1f6af-170">Это усложняет настройку или запуск новых веб-приложений без таких средств, как Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f6af-170">This has made it harder to configure or start new Web applications without a tool like Visual Studio.</span></span> <span data-ttu-id="1f6af-171">В .NET Framework 4 основные элементы конфигурации были перемещены в `machine.config` файл, а теперь приложения наследуют эти параметры.</span><span class="sxs-lookup"><span data-stu-id="1f6af-171">In .the NET Framework 4, the major configuration elements have been moved to the `machine.config` file, and applications now inherit these settings.</span></span> <span data-ttu-id="1f6af-172">Это позволяет `Web.config` файлу в приложениях ASP.NET 4 быть пустым или содержать только следующие строки, которые указывают версию платформы, для которой предназначено приложение, в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f6af-172">This allows the `Web.config` file in ASP.NET 4 applications either to be empty or to contain just the following lines, which specify for Visual Studio what version of the framework the application is targeting:</span></span>

[!code-xml[Main](overview/samples/sample1.xml)]

<a id="0.2__Toc253429240"></a><a id="0.2__Toc243304614"></a>

### <a name="extensible-output-caching"></a><span data-ttu-id="1f6af-173">Расширяемое кэширование вывода</span><span class="sxs-lookup"><span data-stu-id="1f6af-173">Extensible Output Caching</span></span>

<span data-ttu-id="1f6af-174">С момента выпуска ASP.NET 1,0, кэширование выходных данных позволило разработчикам сохранять сформированные выходные данные страниц, элементов управления и HTTP-ответов в памяти.</span><span class="sxs-lookup"><span data-stu-id="1f6af-174">Since the time that ASP.NET 1.0 was released, output caching has enabled developers to store the generated output of pages, controls, and HTTP responses in memory.</span></span> <span data-ttu-id="1f6af-175">В последующих веб-запросах ASP.NET может быстрее обслуживать содержимое, получая созданные выходные данные из памяти вместо повторного создания выходных данных с нуля.</span><span class="sxs-lookup"><span data-stu-id="1f6af-175">On subsequent Web requests, ASP.NET can serve content more quickly by retrieving the generated output from memory instead of regenerating the output from scratch.</span></span> <span data-ttu-id="1f6af-176">Однако этот подход имеет ограничение — сгенерированное содержимое всегда должно храниться в памяти, а на серверах, на которых наблюдается интенсивный объем трафика, память, потребляемая кэшем вывода, может конкурировать с требованиями к памяти из других частей веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-176">However, this approach has a limitation — generated content always has to be stored in memory, and on servers that are experiencing heavy traffic, the memory consumed by output caching can compete with memory demands from other portions of a Web application.</span></span>

<span data-ttu-id="1f6af-177">ASP.NET 4 добавляет точку расширения в кэширование вывода, позволяющую настроить один или несколько пользовательских поставщиков кэша вывода.</span><span class="sxs-lookup"><span data-stu-id="1f6af-177">ASP.NET 4 adds an extensibility point to output caching that enables you to configure one or more custom output-cache providers.</span></span> <span data-ttu-id="1f6af-178">Поставщики кэша вывода могут использовать любой механизм хранения для сохранения содержимого HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-178">Output-cache providers can use any storage mechanism to persist HTML content.</span></span> <span data-ttu-id="1f6af-179">Это позволяет создавать пользовательские поставщики кэша вывода для различных механизмов сохранения, которые могут включать локальные или удаленные диски, облачное хранилище и механизмы распределенного кэша.</span><span class="sxs-lookup"><span data-stu-id="1f6af-179">This makes it possible to create custom output-cache providers for diverse persistence mechanisms, which can include local or remote disks, cloud storage, and distributed cache engines.</span></span>

<span data-ttu-id="1f6af-180">Пользовательский поставщик кэша вывода создается как класс, производный от нового типа *System. Web. Caching. OutputCacheProvider* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-180">You create a custom output-cache provider as a class that derives from the new *System.Web.Caching.OutputCacheProvider* type.</span></span> <span data-ttu-id="1f6af-181">Затем можно настроить поставщик в `Web.config` файле с помощью подраздела "новые *поставщики* " элемента *OutputCache* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-181">You can then configure the provider in the `Web.config` file by using the new *providers* subsection of the *outputCache* element, as shown in the following example:</span></span>

[!code-xml[Main](overview/samples/sample2.xml)]

<span data-ttu-id="1f6af-182">По умолчанию в ASP.NET 4 все HTTP-ответы, отображаемые страницы и элементы управления используют кэш вывода в памяти, как показано в предыдущем примере, где атрибут *defaultProvider* имеет значение аспнетинтерналпровидер.</span><span class="sxs-lookup"><span data-stu-id="1f6af-182">By default in ASP.NET 4, all HTTP responses, rendered pages, and controls use the in-memory output cache, as shown in the previous example, where the *defaultProvider* attribute is set to AspNetInternalProvider.</span></span> <span data-ttu-id="1f6af-183">Вы можете изменить используемый по умолчанию поставщик кэша вывода для веб-приложения, указав другое имя поставщика для *defaultProvider*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-183">You can change the default output-cache provider used for a Web application by specifying a different provider name for *defaultProvider*.</span></span>

<span data-ttu-id="1f6af-184">Кроме того, можно выбрать разные поставщики кэша вывода для каждого элемента управления и для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-184">In addition, you can select different output-cache providers per control and per request.</span></span> <span data-ttu-id="1f6af-185">Самый простой способ выбрать другого поставщика кэша вывода для различных пользовательских веб-элементов управления — это сделать декларативно с помощью нового атрибута *providerName* в директиве Control, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-185">The easiest way to choose a different output-cache provider for different Web user controls is to do so declaratively by using the new *providerName* attribute in a control directive, as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample3.aspx)]

<span data-ttu-id="1f6af-186">Указание другого поставщика кэша вывода для HTTP-запроса требует немного больше усилий.</span><span class="sxs-lookup"><span data-stu-id="1f6af-186">Specifying a different output cache provider for an HTTP request requires a little more work.</span></span> <span data-ttu-id="1f6af-187">Вместо декларативного указания поставщика необходимо переопределить новый метод *жетаупуткачепровидернаме* в `Global.asax` файле, чтобы программно указать, какой поставщик использовать для конкретного запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-187">Instead of declaratively specifying the provider, you override the new *GetOuputCacheProviderName* method in the `Global.asax` file to programmatically specify which provider to use for a specific request.</span></span> <span data-ttu-id="1f6af-188">Следующий пример показывает, как это сделать.</span><span class="sxs-lookup"><span data-stu-id="1f6af-188">The following example shows how to do this.</span></span>

[!code-csharp[Main](overview/samples/sample4.cs)]

<span data-ttu-id="1f6af-189">С добавлением расширения поставщика кэша вывода в ASP.NET 4 теперь можно попытаться более агрессивно и более интеллектуальные стратегии кэширования вывода для веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-189">With the addition of output-cache provider extensibility to ASP.NET 4, you can now pursue more aggressive and more intelligent output-caching strategies for your Web sites.</span></span> <span data-ttu-id="1f6af-190">Например, теперь можно кэшировать «10 основных» страниц сайта в памяти, при этом кэшируются страницы, получающие меньший объем трафика на диске.</span><span class="sxs-lookup"><span data-stu-id="1f6af-190">For example, it is now possible to cache the "Top 10" pages of a site in memory, while caching pages that get lower traffic on disk.</span></span> <span data-ttu-id="1f6af-191">Кроме того, можно кэшировать каждое изменение в зависимости от отображаемой страницы, но использовать распределенный кэш таким образом, чтобы потребление памяти было разгружаться из интерфейсных веб-серверов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-191">Alternatively, you can cache every vary-by combination for a rendered page, but use a distributed cache so that the memory consumption is offloaded from front-end Web servers.</span></span>

<a id="0.2__Toc224729020"></a><a id="0.2__Toc253429241"></a><a id="0.2__Toc243304615"></a>

### <a name="auto-start-web-applications"></a><span data-ttu-id="1f6af-192">Автоматический запуск веб-приложений</span><span class="sxs-lookup"><span data-stu-id="1f6af-192">Auto-Start Web Applications</span></span>

<span data-ttu-id="1f6af-193">Некоторым веб-приложениям необходимо загружать большие объемы данных или выполнять дорогостоящую обработку инициализации перед обслуживанием первого запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-193">Some Web applications need to load large amounts of data or perform expensive initialization processing before serving the first request.</span></span> <span data-ttu-id="1f6af-194">В более ранних версиях ASP.NET для таких ситуаций пришлось бы разработать пользовательские подходы для «пробуждения» приложения ASP.NET, а затем запустить код инициализации во время метода *загрузки\_приложения* в `Global.asax` файле.</span><span class="sxs-lookup"><span data-stu-id="1f6af-194">In earlier versions of ASP.NET, for these situations you had to devise custom approaches to "wake up" an ASP.NET application and then run initialization code during the *Application\_Load* method in the `Global.asax` file.</span></span>

<span data-ttu-id="1f6af-195">Новая функция масштабируемости, которая напрямую обращается к этому сценарию, доступна, если ASP.NET 4 работает в IIS 7,5 на Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="1f6af-195">A new scalability feature named *auto-start* that directly addresses this scenario is available when ASP.NET 4 runs on IIS 7.5 on Windows Server 2008 R2.</span></span> <span data-ttu-id="1f6af-196">Функция автоматического запуска предоставляет управляемый подход к запуску пула приложений, инициализации приложения ASP.NET и последующему принятию HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-196">The auto-start feature provides a controlled approach for starting up an application pool, initializing an ASP.NET application, and then accepting HTTP requests.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="1f6af-197">Модуль прогрева приложения IIS для IIS 7,5</span><span class="sxs-lookup"><span data-stu-id="1f6af-197">IIS Application Warm-Up Module for IIS 7.5</span></span>
> 
> <span data-ttu-id="1f6af-198">Группа IIS выпустила первую бета-версию модуля прогрева приложения для IIS 7,5.</span><span class="sxs-lookup"><span data-stu-id="1f6af-198">The IIS team has released the first beta test version of the Application Warm-Up Module for IIS 7.5.</span></span> <span data-ttu-id="1f6af-199">Это делает все приложения еще проще, чем было описано ранее.</span><span class="sxs-lookup"><span data-stu-id="1f6af-199">This makes warming up your applications even easier than previously described.</span></span> <span data-ttu-id="1f6af-200">Вместо написания пользовательского кода необходимо указать URL-адреса ресурсов для выполнения, прежде чем веб-приложение будет принимать запросы от сети.</span><span class="sxs-lookup"><span data-stu-id="1f6af-200">Instead of writing custom code, you specify the URLs of resources to execute before the Web application accepts requests from the network.</span></span> <span data-ttu-id="1f6af-201">Это прогрев происходит во время запуска службы IIS (если пул приложений IIS был настроен как *алвайсруннинг*) и при повторном запуске рабочего процесса IIS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-201">This warm-up occurs during startup of the IIS service (if you configured the IIS application pool as *AlwaysRunning*) and when an IIS worker process recycles.</span></span> <span data-ttu-id="1f6af-202">Во время перезапуска старый рабочий процесс IIS по-прежнему будет выполнять запросы до тех пор, пока вновь порожденный рабочий процесс не будет полностью включен, чтобы приложения не выполняли перерывы или другие проблемы, связанные с непростыми кэшами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-202">During recycle, the old IIS worker process continues to execute requests until the newly spawned worker process is fully warmed up, so that applications experience no interruptions or other issues due to unprimed caches.</span></span> <span data-ttu-id="1f6af-203">Обратите внимание, что этот модуль работает с любой версией ASP.NET, начиная с версии 2,0.</span><span class="sxs-lookup"><span data-stu-id="1f6af-203">Note that this module works with any version of ASP.NET, starting with version 2.0.</span></span>
> 
> <span data-ttu-id="1f6af-204">Дополнительные сведения см. в разделе [Application прогрев](https://www.iis.net/extensions/applicationwarmup%20on%20the%20IIS.net) на веб-сайте IIS.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-204">For more information, see [Application Warm-Up](https://www.iis.net/extensions/applicationwarmup%20on%20the%20IIS.net) on the IIS.net Web site.</span></span> <span data-ttu-id="1f6af-205">Пошаговое руководство, в котором показано, как использовать функцию прогрева, см. в разделе [Начало работы с помощью модуля прогрева приложений IIS 7,5](https://www.iis.net/learn/manage) на веб-сайте IIS.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-205">For a walkthrough that illustrates how to use the warm-up feature, see [Getting Started with the IIS 7.5 Application Warm-Up Module](https://www.iis.net/learn/manage) on the IIS.net Web site.</span></span>

<span data-ttu-id="1f6af-206">Чтобы использовать функцию автоматического запуска, администратор IIS задает автоматический запуск пула приложений в IIS 7,5, используя следующую конфигурацию в `applicationHost.config` файле:</span><span class="sxs-lookup"><span data-stu-id="1f6af-206">To use the auto-start feature, an IIS administrator sets an application pool in IIS 7.5 to be automatically started by using the following configuration in the `applicationHost.config` file:</span></span>

[!code-xml[Main](overview/samples/sample5.xml)]

<span data-ttu-id="1f6af-207">Поскольку один пул приложений может содержать несколько приложений, вы указываете, что отдельные приложения будут автоматически запускаться с помощью следующей конфигурации в `applicationHost.config` файле:</span><span class="sxs-lookup"><span data-stu-id="1f6af-207">Because a single application pool can contain multiple applications, you specify individual applications to be automatically started by using the following configuration in the `applicationHost.config` file:</span></span>

[!code-xml[Main](overview/samples/sample6.xml)]

<span data-ttu-id="1f6af-208">При холодном запуске сервера IIS 7,5 или при перезапуске отдельного пула приложений IIS 7,5 использует сведения в `applicationHost.config` файле, чтобы определить, какие веб-приложения должны быть запущены автоматически.</span><span class="sxs-lookup"><span data-stu-id="1f6af-208">When an IIS 7.5 server is cold-started or when an individual application pool is recycled, IIS 7.5 uses the information in the `applicationHost.config` file to determine which Web applications need to be automatically started.</span></span> <span data-ttu-id="1f6af-209">Для каждого приложения, помеченного для автоматического запуска, IIS 7.5 отправляет запрос в ASP.NET 4 для запуска приложения в состоянии, в течение которого приложение временно не принимает HTTP-запросы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-209">For each application that is marked for auto-start, IIS7.5 sends a request to ASP.NET 4 to start the application in a state during which the application temporarily does not accept HTTP requests.</span></span> <span data-ttu-id="1f6af-210">Когда он находится в этом состоянии, ASP.NET создает экземпляр типа, определенного атрибутом *сервицеаутостартпровидер* (как показано в предыдущем примере), и вызывает его открытую точку входа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-210">When it is in this state, ASP.NET instantiates the type defined by the *serviceAutoStartProvider* attribute (as shown in the previous example) and calls into its public entry point.</span></span>

<span data-ttu-id="1f6af-211">Вы создаете управляемый тип автоматического запуска с необходимой точкой входа, реализуя интерфейс *ипроцесшостпрелоадклиент* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-211">You create a managed auto-start type with the necessary entry point by implementing the *IProcessHostPreloadClient* interface, as shown in the following example:</span></span>

[!code-csharp[Main](overview/samples/sample7.cs)]

<span data-ttu-id="1f6af-212">После выполнения кода инициализации в методе *предварительной загрузки* и возврата методом приложение ASP.NET готово к обработке запросов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-212">After your initialization code runs in the *Preload* method and the method returns, the ASP.NET application is ready to process requests.</span></span>

<span data-ttu-id="1f6af-213">Благодаря добавлению автоматического запуска в IIS 0,5 и ASP.NET 4 теперь у вас есть четко определенный подход к выполнению ресурсоемких инициализаций приложений перед обработкой первого HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-213">With the addition of auto-start to IIS .5 and ASP.NET 4, you now have a well-defined approach for performing expensive application initialization prior to processing the first HTTP request.</span></span> <span data-ttu-id="1f6af-214">Например, можно использовать новую функцию автоматического запуска для инициализации приложения, а затем сообщить подсистеме балансировки нагрузки о том, что приложение инициализировано и готово к приему трафика HTTP.</span><span class="sxs-lookup"><span data-stu-id="1f6af-214">For example, you can use the new auto-start feature to initialize an application and then signal a load-balancer that the application was initialized and ready to accept HTTP traffic.</span></span>

<a id="0.2__Toc224729021"></a><a id="0.2__Toc253429242"></a><a id="0.2__Toc243304616"></a>

### <a name="permanently-redirecting-a-page"></a><span data-ttu-id="1f6af-215">Окончательное перенаправление страницы</span><span class="sxs-lookup"><span data-stu-id="1f6af-215">Permanently Redirecting a Page</span></span>

<span data-ttu-id="1f6af-216">Обычно веб-приложения позволяют перемещать страницы и другое содержимое по времени, что может привести к накоплению устаревших ссылок в поисковых системах.</span><span class="sxs-lookup"><span data-stu-id="1f6af-216">It is common practice in Web applications to move pages and other content around over time, which can lead to an accumulation of stale links in search engines.</span></span> <span data-ttu-id="1f6af-217">В ASP.NET разработчики традиционно обрабатывали запросы к старым URL-адресам, используя метод *Response. Redirect* для пересылки запроса на новый URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="1f6af-217">In ASP.NET, developers have traditionally handled requests to old URLs by using by using the *Response.Redirect* method to forward a request to the new URL.</span></span> <span data-ttu-id="1f6af-218">Однако метод *перенаправления* выдает ответ HTTP 302, найденный (временный перенаправление), что приводит к появлению дополнительного кругового пути HTTP, когда пользователи пытаются получить доступ к старым URL-адресам.</span><span class="sxs-lookup"><span data-stu-id="1f6af-218">However, the *Redirect* method issues an HTTP 302 Found (temporary redirect) response, which results in an extra HTTP round trip when users attempt to access the old URLs.</span></span>

<span data-ttu-id="1f6af-219">ASP.NET 4 добавляет новый вспомогательный метод *редиректперманент* , который позволяет легко выдавать ошибки HTTP 301, которые перемещают безвозвратные ответы, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-219">ASP.NET 4 adds a new *RedirectPermanent* helper method that makes it easy to issue HTTP 301 Moved Permanently responses, as in the following example:</span></span>

[!code-csharp[Main](overview/samples/sample8.cs)]

<span data-ttu-id="1f6af-220">Поисковые системы и другие агенты пользователей, которые распознают постоянные перенаправления, сохраняют новый URL-адрес, связанный с содержимым, что позволяет избежать ненужного кругового пути, сделанного браузером для временных перенаправлений.</span><span class="sxs-lookup"><span data-stu-id="1f6af-220">Search engines and other user agents that recognize permanent redirects will store the new URL that is associated with the content, which eliminates the unnecessary round trip made by the browser for temporary redirects.</span></span>

<a id="0.2__Toc224729022"></a><a id="0.2__Toc253429243"></a><a id="0.2__Toc243304617"></a>

### <a name="shrinking-session-state"></a><span data-ttu-id="1f6af-221">Сжатие состояния сеанса</span><span class="sxs-lookup"><span data-stu-id="1f6af-221">Shrinking Session State</span></span>

<span data-ttu-id="1f6af-222">ASP.NET предоставляет два варианта по умолчанию для хранения состояния сеанса в веб-ферме: поставщик состояния сеанса, который вызывает сервер внешнего состояния сеанса и поставщик состояний сеанса, который хранит данные в Microsoft SQL Server базе данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-222">ASP.NET provides two default options for storing session state across a Web farm: a session-state provider that invokes an out-of-process session-state server, and a session-state provider that stores data in a Microsoft SQL Server database.</span></span> <span data-ttu-id="1f6af-223">Так как оба варианта предполагают хранение сведений о состоянии вне рабочего процесса веб-приложения, необходимо сериализовать состояние сеанса перед его отправкой в удаленное хранилище.</span><span class="sxs-lookup"><span data-stu-id="1f6af-223">Because both options involve storing state information outside a Web application's worker process, session state has to be serialized before it is sent to remote storage.</span></span> <span data-ttu-id="1f6af-224">В зависимости от объема информации, которую разработчик сохраняет в состоянии сеанса, размер сериализованных данных может быть довольно большим.</span><span class="sxs-lookup"><span data-stu-id="1f6af-224">Depending on how much information a developer saves in session state, the size of the serialized data can grow quite large.</span></span>

<span data-ttu-id="1f6af-225">В ASP.NET 4 появился новый вариант сжатия для обоих типов необработанных поставщиков состояний сеансов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-225">ASP.NET 4 introduces a new compression option for both kinds of out-of-process session-state providers.</span></span> <span data-ttu-id="1f6af-226">Если параметр конфигурации *компрессионенаблед* , показанный в следующем примере, имеет значение *true*, ASP.NET будет сжимать (и распаковывать) сериализованное состояние сеанса с помощью класса .NET Framework *System. IO. Compression. GZipStream.* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-226">When the *compressionEnabled* configuration option shown in the following example is set to *true*, ASP.NET will compress (and decompress) serialized session state by using the .NET Framework *System.IO.Compression.GZipStream* class.</span></span>

[!code-xml[Main](overview/samples/sample9.xml)]

<span data-ttu-id="1f6af-227">Благодаря простому добавлению нового атрибута в `Web.config` файл приложения с запасными циклами ЦП на веб-серверах могут существенно сократить размер сериализованных данных состояния сеанса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-227">With the simple addition of the new attribute to the `Web.config` file, applications with spare CPU cycles on Web servers can realize substantial reductions in the size of serialized session-state data.</span></span>

<a id="0.2__Toc253429244"></a><a id="0.2__Toc243304618"></a>

### <a name="expanding-the-range-of-allowable-urls"></a><span data-ttu-id="1f6af-228">Расширение диапазона допустимых URL-адресов</span><span class="sxs-lookup"><span data-stu-id="1f6af-228">Expanding the Range of Allowable URLs</span></span>

<span data-ttu-id="1f6af-229">В ASP.NET 4 появились новые возможности для увеличения размера URL-адресов приложений.</span><span class="sxs-lookup"><span data-stu-id="1f6af-229">ASP.NET 4 introduces new options for expanding the size of application URLs.</span></span> <span data-ttu-id="1f6af-230">Предыдущие версии ASP.NET с ограниченными длинами URL-пути — 260 символов, основанных на ограничении пути к файлам NTFS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-230">Previous versions of ASP.NET constrained URL path lengths to 260 characters, based on the NTFS file-path limit.</span></span> <span data-ttu-id="1f6af-231">В ASP.NET 4 вы можете увеличить (или уменьшить) это ограничение, подходящее для ваших приложений, используя два новых атрибута конфигурации *httpRuntime* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-231">In ASP.NET 4, you have the option to increase (or decrease) this limit as appropriate for your applications, using two new *httpRuntime* configuration attributes.</span></span> <span data-ttu-id="1f6af-232">В следующем примере показаны эти новые атрибуты.</span><span class="sxs-lookup"><span data-stu-id="1f6af-232">The following example shows these new attributes.</span></span>

[!code-xml[Main](overview/samples/sample10.xml)]

<span data-ttu-id="1f6af-233">Чтобы разрешить более длинные или короткие пути (часть URL-адреса, не включающую протокол, имя сервера и строку запроса), измените атрибут *[максурлленгс](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.maxurllength.aspx)* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-233">To allow longer or shorter paths (the portion of the URL that does not include protocol, server name, and query string), modify the *[maxUrlLength](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.maxurllength.aspx)* attribute.</span></span> <span data-ttu-id="1f6af-234">Чтобы разрешить более длинные или более короткие строки запроса, измените значение атрибута *[макскуеристрингленгс](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.maxquerystringlength.aspx)* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-234">To allow longer or shorter query strings, modify the value of the *[maxQueryStringLength](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.maxquerystringlength.aspx)* attribute.</span></span>

<span data-ttu-id="1f6af-235">ASP.NET 4 также позволяет настроить символы, используемые при проверке символов URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-235">ASP.NET 4 also enables you to configure the characters that are used by the URL character check.</span></span> <span data-ttu-id="1f6af-236">Когда ASP.NET находит недопустимый символ в части пути URL-адреса, он отклоняет запрос и выдает ошибку HTTP 400.</span><span class="sxs-lookup"><span data-stu-id="1f6af-236">When ASP.NET finds an invalid character in the path portion of a URL, it rejects the request and issues an HTTP 400 error.</span></span> <span data-ttu-id="1f6af-237">В предыдущих версиях ASP.NET проверки символов URL-адреса были ограничены фиксированным набором символов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-237">In previous versions of ASP.NET, the URL character checks were limited to a fixed set of characters.</span></span> <span data-ttu-id="1f6af-238">В ASP.NET 4 можно настроить набор допустимых символов с помощью нового атрибута *рекуестпасинвалидчарактерс* элемента конфигурации *httpRuntime* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-238">In ASP.NET 4, you can customize the set of valid characters using the new *requestPathInvalidCharacters* attribute of the *httpRuntime* configuration element, as shown in the following example:</span></span>

[!code-xml[Main](overview/samples/sample11.xml)]

<span data-ttu-id="1f6af-239">По умолчанию атрибут *рекуестпасинвалидчарактерс* определяет восемь символов как недопустимые.</span><span class="sxs-lookup"><span data-stu-id="1f6af-239">By default, the *requestPathInvalidCharacters* attribute defines eight characters as invalid.</span></span> <span data-ttu-id="1f6af-240">(В строке, назначенной *рекуестпасинвалидчарактерс* по умолчанию, символы "меньше чем&lt;", "больше чем" (&gt;) и амперсанд (&amp;) кодируются, так как `Web.config` файл является XML-файлом.) При необходимости можно настроить набор недопустимых символов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-240">(In the string that is assigned to *requestPathInvalidCharacters* by default, the less than (&lt;), greater than (&gt;), and ampersand (&amp;) characters are encoded, because the `Web.config` file is an XML file.) You can customize the set of invalid characters as needed.</span></span>

> [!NOTE]
> <span data-ttu-id="1f6af-241">Примечание. ASP.NET 4 всегда отклоняет пути URL-адресов, которые содержат символы в диапазоне от 0x00 до 0x1F, так как они являются недопустимыми символами URL-адреса,[http://www.ietf.org/rfc/rfc2396.txt](http://www.ietf.org/rfc/rfc2396.txt)как определено в RFC 2396 IETF ().</span><span class="sxs-lookup"><span data-stu-id="1f6af-241">Note ASP.NET 4 always rejects URL paths that contain characters in the ASCII range of 0x00 to 0x1F, because those are invalid URL characters as defined in RFC 2396 of the IETF ([http://www.ietf.org/rfc/rfc2396.txt](http://www.ietf.org/rfc/rfc2396.txt)).</span></span> <span data-ttu-id="1f6af-242">В версиях Windows Server, работающих под управлением IIS 6 или более поздней версии, драйвер устройства протокола HTTP. sys автоматически отклоняет URL-адреса с этими символами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-242">On versions of Windows Server that run IIS 6 or higher, the http.sys protocol device driver automatically rejects URLs with these characters.</span></span>

<a id="0.2__Toc253429245"></a><a id="0.2__Toc243304619"></a>

### <a name="extensible-request-validation"></a><span data-ttu-id="1f6af-243">Расширяемая проверка запросов</span><span class="sxs-lookup"><span data-stu-id="1f6af-243">Extensible Request Validation</span></span>

<span data-ttu-id="1f6af-244">Проверка запроса ASP.NET ищет входящие данные HTTP-запроса для строк, которые обычно используются в атаках межсайтовых сценариев (XSS).</span><span class="sxs-lookup"><span data-stu-id="1f6af-244">ASP.NET request validation searches incoming HTTP request data for strings that are commonly used in cross-site scripting (XSS) attacks.</span></span> <span data-ttu-id="1f6af-245">Если обнаружены потенциальные строки XSS, то при проверке запроса помечается подозрительная строка и возвращается ошибка.</span><span class="sxs-lookup"><span data-stu-id="1f6af-245">If potential XSS strings are found, request validation flags the suspect string and returns an error.</span></span> <span data-ttu-id="1f6af-246">Встроенная проверка запросов возвращает ошибку только при обнаружении наиболее распространенных строк, используемых в атаках XSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-246">The built-in request validation returns an error only when it finds the most common strings used in XSS attacks.</span></span> <span data-ttu-id="1f6af-247">Предыдущие попытки сделать проверку XSS более агрессивными привели к тому, что слишком много ложных срабатываний.</span><span class="sxs-lookup"><span data-stu-id="1f6af-247">Previous attempts to make the XSS validation more aggressive resulted in too many false positives.</span></span> <span data-ttu-id="1f6af-248">Однако клиентам может потребоваться проверка запросов, которая более агрессивна, или наоборот, может потребоваться намеренно ослабить проверки XSS для конкретных страниц или для запросов конкретного типа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-248">However, customers might want request validation that is more aggressive, or conversely might want to intentionally relax XSS checks for specific pages or for specific types of requests.</span></span>

<span data-ttu-id="1f6af-249">В ASP.NET 4 функция проверки запросов стала расширяемой, чтобы можно было использовать настраиваемую логику проверки запросов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-249">In ASP.NET 4, the request validation feature has been made extensible so that you can use custom request-validation logic.</span></span> <span data-ttu-id="1f6af-250">Чтобы расширить проверку запросов, создайте класс, производный от нового типа *System. Web. util. рекуествалидатор* , и настройте приложение (в `Web.config` разделе *httpRuntime* файла) для использования пользовательского типа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-250">To extend request validation, you create a class that derives from the new *System.Web.Util.RequestValidator* type, and you configure the application (in the *httpRuntime* section of the `Web.config` file) to use the custom type.</span></span> <span data-ttu-id="1f6af-251">В следующем примере показано, как настроить пользовательский класс проверки запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-251">The following example shows how to configure a custom request-validation class:</span></span>

[!code-xml[Main](overview/samples/sample12.xml)]

<span data-ttu-id="1f6af-252">Для нового атрибута *рекуествалидатионтипе* требуется стандартная строка идентификатора типа .NET Framework, указывающая класс, который предоставляет настраиваемую проверку запросов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-252">The new *requestValidationType* attribute requires a standard .NET Framework type identifier string that specifies the class that provides custom request validation.</span></span> <span data-ttu-id="1f6af-253">Для каждого запроса ASP.NET вызывает пользовательский тип для обработки каждой части входящих данных HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-253">For each request, ASP.NET invokes the custom type to process each piece of incoming HTTP request data.</span></span> <span data-ttu-id="1f6af-254">Входящий URL-адрес, все заголовки HTTP (файлы cookie и пользовательские заголовки) и текст сущности доступны для проверки с помощью класса проверки пользовательского запроса, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-254">The incoming URL, all the HTTP headers (both cookies and custom headers), and the entity body are all available for inspection by a custom request validation class like that shown in the following example:</span></span>

[!code-csharp[Main](overview/samples/sample13.cs)]

<span data-ttu-id="1f6af-255">Для случаев, когда не нужно проверять часть входящих HTTP-данных, класс запроса-проверки может вернуться к выполнению проверки запроса ASP.NET по умолчанию, просто вызвав *base. Исвалидрекуестстринг.*</span><span class="sxs-lookup"><span data-stu-id="1f6af-255">For cases where you do not want to inspect a piece of incoming HTTP data, the request-validation class can fall back to let the ASP.NET default request validation run by simply calling *base.IsValidRequestString.*</span></span>

<a id="0.2__Toc253429246"></a><a id="0.2__Toc243304620"></a>

### <a name="object-caching-and-object-caching-extensibility"></a><span data-ttu-id="1f6af-256">Кэширование объектов и расширяемость кэширования объектов</span><span class="sxs-lookup"><span data-stu-id="1f6af-256">Object Caching and Object Caching Extensibility</span></span>

<span data-ttu-id="1f6af-257">С момента первого выпуска ASP.NET включал в себя мощный кэш объектов в памяти (*System. Web. Caching. Cache*).</span><span class="sxs-lookup"><span data-stu-id="1f6af-257">Since its first release, ASP.NET has included a powerful in-memory object cache (*System.Web.Caching.Cache*).</span></span> <span data-ttu-id="1f6af-258">Реализация кэша настолько популярна, что она использовалась в приложениях, не являющихся веб-приложениями.</span><span class="sxs-lookup"><span data-stu-id="1f6af-258">The cache implementation has been so popular that it has been used in non-Web applications.</span></span> <span data-ttu-id="1f6af-259">Однако Windows Forms или WPF-приложение неудобно включать ссылку `System.Web.dll` , чтобы иметь возможность использовать кэш объектов ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-259">However, it is awkward for a Windows Forms or WPF application to include a reference to `System.Web.dll` just to be able to use the ASP.NET object cache.</span></span>

<span data-ttu-id="1f6af-260">Чтобы сделать кэширование доступным для всех приложений, .NET Framework 4 вводит новую сборку, новое пространство имен, некоторые базовые типы и конкретную реализацию кэширования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-260">To make caching available for all applications, the .NET Framework 4 introduces a new assembly, a new namespace, some base types, and a concrete caching implementation.</span></span> <span data-ttu-id="1f6af-261">Новая `System.Runtime.Caching.dll` сборка содержит новый API кэширования в пространстве имен *System. Runtime. Caching* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-261">The new `System.Runtime.Caching.dll` assembly contains a new caching API in the *System.Runtime.Caching* namespace.</span></span> <span data-ttu-id="1f6af-262">Пространство имен содержит два основных набора классов:</span><span class="sxs-lookup"><span data-stu-id="1f6af-262">The namespace contains two core sets of classes:</span></span>

- <span data-ttu-id="1f6af-263">Абстрактные типы, предоставляющие основу для создания любых типов пользовательских реализаций кэша.</span><span class="sxs-lookup"><span data-stu-id="1f6af-263">Abstract types that provide the foundation for building any type of custom cache implementation.</span></span>
- <span data-ttu-id="1f6af-264">Конкретная реализация кэша объектов в памяти (класс *System. Runtime. Caching. MemoryCache* ).</span><span class="sxs-lookup"><span data-stu-id="1f6af-264">A concrete in-memory object cache implementation (the *System.Runtime.Caching.MemoryCache* class).</span></span>

<span data-ttu-id="1f6af-265">Новый класс *MemoryCache* тесно моделируется в кэше ASP.NET и использует большую часть внутренней логики обработчика кэша с ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-265">The new *MemoryCache* class is modeled closely on the ASP.NET cache, and it shares much of the internal cache engine logic with ASP.NET.</span></span> <span data-ttu-id="1f6af-266">Хотя интерфейсы API общедоступного кэширования в *System. Runtime. Caching* были обновлены для поддержки разработки пользовательских кэшей, если вы использовали объект *кэша* ASP.NET, вы увидите привычные концепции в новых API.</span><span class="sxs-lookup"><span data-stu-id="1f6af-266">Although the public caching APIs in *System.Runtime.Caching* have been updated to support development of custom caches, if you have used the ASP.NET *Cache* object, you will find familiar concepts in the new APIs.</span></span>

<span data-ttu-id="1f6af-267">Подробное обсуждение нового класса *MemoryCache* и поддержки базовых API-интерфейсов потребовало бы всего документа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-267">An in-depth discussion of the new *MemoryCache* class and supporting base APIs would require an entire document.</span></span> <span data-ttu-id="1f6af-268">Однако в следующем примере показано, как работает новый API кэша.</span><span class="sxs-lookup"><span data-stu-id="1f6af-268">However, the following example gives you an idea of how the new cache API works.</span></span> <span data-ttu-id="1f6af-269">Пример был написан для Windows Forms приложения без каких-либо зависимостей от `System.Web.dll`.</span><span class="sxs-lookup"><span data-stu-id="1f6af-269">The example was written for a Windows Forms application, without any dependency on `System.Web.dll`.</span></span>

[!code-csharp[Main](overview/samples/sample14.cs)]

<a id="0.2__Toc253429247"></a><a id="0.2__Toc243304621"></a>

### <a name="extensible-html-url-and-http-header-encoding"></a><span data-ttu-id="1f6af-270">Расширяемость кодирования HTML, URL-адреса и заголовка HTTP</span><span class="sxs-lookup"><span data-stu-id="1f6af-270">Extensible HTML, URL, and HTTP Header Encoding</span></span>

<span data-ttu-id="1f6af-271">В ASP.NET 4 можно создавать пользовательские подпрограммы кодирования для следующих стандартных задач кодирования текста:</span><span class="sxs-lookup"><span data-stu-id="1f6af-271">In ASP.NET 4, you can create custom encoding routines for the following common text-encoding tasks:</span></span>

- <span data-ttu-id="1f6af-272">Кодировка HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-272">HTML encoding.</span></span>
- <span data-ttu-id="1f6af-273">Кодирование URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-273">URL encoding.</span></span>
- <span data-ttu-id="1f6af-274">Кодировка атрибута HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-274">HTML attribute encoding.</span></span>
- <span data-ttu-id="1f6af-275">Кодирование исходящих заголовков HTTP.</span><span class="sxs-lookup"><span data-stu-id="1f6af-275">Encoding outbound HTTP headers.</span></span>

<span data-ttu-id="1f6af-276">Вы можете создать пользовательский кодировщик, производный от нового типа *System. Web. util. хттпенкодер* , а затем настроив ASP.NET для использования пользовательского типа в `Web.config` разделе *httpRuntime* файла, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-276">You can create a custom encoder by deriving from the new *System.Web.Util.HttpEncoder* type and then configuring ASP.NET to use the custom type in the *httpRuntime* section of the `Web.config` file, as shown in the following example:</span></span>

[!code-xml[Main](overview/samples/sample15.xml)]

<span data-ttu-id="1f6af-277">После настройки пользовательского кодировщика ASP.NET автоматически вызывает пользовательскую реализацию кодирования, когда вызываются открытые методы кодирования классов *System. Web. HttpUtility* или *System. Web. HttpServerUtility* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-277">After a custom encoder has been configured, ASP.NET automatically calls the custom encoding implementation whenever public encoding methods of the *System.Web.HttpUtility* or *System.Web.HttpServerUtility* classes are called.</span></span> <span data-ttu-id="1f6af-278">Это позволяет одной части группы разработки веб-разработчиков создать пользовательский кодировщик, реализующий агрессивную кодировку символов, а остальная часть группы разработки веб-приложений продолжит использовать общедоступные интерфейсы API кодирования ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-278">This lets one part of a Web development team create a custom encoder that implements aggressive character encoding, while the rest of the Web development team continues to use the public ASP.NET encoding APIs.</span></span> <span data-ttu-id="1f6af-279">Централизованная настройка пользовательского кодировщика в элементе *httpRuntime* гарантирует, что все вызовы кодирования текста из общедоступных api кодирования ASP.NET направляются через пользовательский кодировщик.</span><span class="sxs-lookup"><span data-stu-id="1f6af-279">By centrally configuring a custom encoder in the *httpRuntime* element, you are guaranteed that all text-encoding calls from the public ASP.NET encoding APIs are routed through the custom encoder.</span></span>

<a id="0.2__Toc253429248"></a><a id="0.2__Toc243304622"></a>

### <a name="performance-monitoring-for-individual-applications-in-a-single-worker-process"></a><span data-ttu-id="1f6af-280">Мониторинг производительности отдельных приложений в одном рабочем процессе</span><span class="sxs-lookup"><span data-stu-id="1f6af-280">Performance Monitoring for Individual Applications in a Single Worker Process</span></span>

<span data-ttu-id="1f6af-281">Чтобы увеличить количество веб-сайтов, которые могут размещаться на одном сервере, многие из поставщиков услуг размещения запускают несколько приложений ASP.NET в одном рабочем процессе.</span><span class="sxs-lookup"><span data-stu-id="1f6af-281">In order to increase the number of Web sites that can be hosted on a single server, many hosters run multiple ASP.NET applications in a single worker process.</span></span> <span data-ttu-id="1f6af-282">Однако если несколько приложений используют один общий рабочий процесс, администраторам сервера сложно обнаружить отдельное приложение, в котором возникают проблемы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-282">However, if multiple applications use a single shared worker process, it is difficult for server administrators to identify an individual application that is experiencing problems.</span></span>

<span data-ttu-id="1f6af-283">ASP.NET 4 использует новые функции мониторинга ресурсов, представленные средой CLR.</span><span class="sxs-lookup"><span data-stu-id="1f6af-283">ASP.NET 4 leverages new resource-monitoring functionality introduced by the CLR.</span></span> <span data-ttu-id="1f6af-284">Чтобы включить эту функцию, в файл `aspnet.config` конфигурации можно добавить следующий фрагмент XML-кода конфигурации.</span><span class="sxs-lookup"><span data-stu-id="1f6af-284">To enable this functionality, you can add the following XML configuration snippet to the `aspnet.config` configuration file.</span></span>

[!code-xml[Main](overview/samples/sample16.xml)]

> [!NOTE]
> <span data-ttu-id="1f6af-285">Обратите `aspnet.config` внимание, что файл находится в каталоге, где установлен .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1f6af-285">Note The `aspnet.config` file is in the directory where the .NET Framework is installed.</span></span> <span data-ttu-id="1f6af-286">Это не `Web.config` файл.</span><span class="sxs-lookup"><span data-stu-id="1f6af-286">It is not the `Web.config` file.</span></span>

<span data-ttu-id="1f6af-287">После включения функции *аппдомаинресаурцемониторинг* в категории производительности "приложения ASP.NET" доступны два новых счетчика производительности: *% управляемое процессорное время* и используемая управляемая *память*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-287">When the *appDomainResourceMonitoring* feature has been enabled, two new performance counters are available in the "ASP.NET Applications" performance category: *% Managed Processor Time* and *Managed Memory Used*.</span></span> <span data-ttu-id="1f6af-288">Оба этих счетчика производительности используют новую функцию управления ресурсами доменного приложения CLR для мониторинга предполагаемого времени ЦП и использования управляемой памяти отдельными ASP.NET приложениями.</span><span class="sxs-lookup"><span data-stu-id="1f6af-288">Both of these performance counters use the new CLR application-domain resource management feature to track estimated CPU time and managed memory utilization of individual ASP.NET applications.</span></span> <span data-ttu-id="1f6af-289">В результате, благодаря ASP.NET 4 администраторы получают более детализированное представление о потреблении ресурсов отдельными приложениями, работающими в одном рабочем процессе.</span><span class="sxs-lookup"><span data-stu-id="1f6af-289">As a result, with ASP.NET 4, administrators now have a more granular view into the resource consumption of individual applications running in a single worker process.</span></span>

<a id="0.2__Toc253429249"></a><a id="0.2__Toc243304623"></a>

### <a name="multi-targeting"></a><span data-ttu-id="1f6af-290">Нацеливание на несколько версий</span><span class="sxs-lookup"><span data-stu-id="1f6af-290">Multi-Targeting</span></span>

<span data-ttu-id="1f6af-291">Можно создать приложение, предназначенное для конкретной версии .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1f6af-291">You can create an application that targets a specific version of the .NET Framework.</span></span> <span data-ttu-id="1f6af-292">В ASP.NET 4 новый атрибут в элементе `Web.config` *compilation* файла позволяет ориентироваться на .NET Framework 4 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="1f6af-292">In ASP.NET 4, a new attribute in the *compilation* element of the `Web.config` file lets you target the .NET Framework 4 and later.</span></span> <span data-ttu-id="1f6af-293">Если явно указать .NET Framework 4 и включить в `Web.config` файл дополнительные элементы, такие как записи для *System. CodeDom*, эти элементы должны быть правильными для .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-293">If you explicitly target the .NET Framework 4, and if you include optional elements in the `Web.config` file such as the entries for *system.codedom*, these elements must be correct for the .NET Framework 4.</span></span> <span data-ttu-id="1f6af-294">(Если вы явно не нацеливание на .NET Framework 4, Целевая платформа выводится из-за отсутствия записи в `Web.config` файле.)</span><span class="sxs-lookup"><span data-stu-id="1f6af-294">(If you do not explicitly target the .NET Framework 4, the target framework is inferred from the lack of an entry in the `Web.config` file.)</span></span>

<span data-ttu-id="1f6af-295">В следующем примере показано использование атрибута *targetFramework* в `Web.config` элементе *compilation* файла.</span><span class="sxs-lookup"><span data-stu-id="1f6af-295">The following example shows the use of the *targetFramework* attribute in the *compilation* element of the `Web.config` file.</span></span>

[!code-xml[Main](overview/samples/sample17.xml)]

<span data-ttu-id="1f6af-296">Обратите внимание на следующие особенности для конкретной версии .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="1f6af-296">Note the following about targeting a specific version of the .NET Framework:</span></span>

- <span data-ttu-id="1f6af-297">В пуле приложений .NET Framework 4 система сборки ASP.NET предполагает, что .NET Framework 4 в качестве целевого объекта, если `Web.config` файл не содержит `Web.config` атрибут *targetFramework* или если файл отсутствует.</span><span class="sxs-lookup"><span data-stu-id="1f6af-297">In a .NET Framework 4 application pool, the ASP.NET build system assumes the .NET Framework 4 as a target if the `Web.config` file does not include the *targetFramework* attribute or if the `Web.config` file is missing.</span></span> <span data-ttu-id="1f6af-298">(Может потребоваться внести изменения в код приложения, чтобы сделать его запущенным в .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="1f6af-298">(You might have to make coding changes to your application to make it run under the .NET Framework 4.)</span></span>
- <span data-ttu-id="1f6af-299">Если включить атрибут *targetFramework* и в `Web.config` файле определен элемент *System. codeDom* , этот файл должен содержать правильные записи для .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-299">If you do include the *targetFramework* attribute, and if the *system.codeDom* element is defined in the `Web.config` file, this file must contain the correct entries for the .NET Framework 4.</span></span>
- <span data-ttu-id="1f6af-300">Если вы используете команду *компилятора ASPNET\_* для предварительной компиляции приложения (например, в среде сборки), необходимо использовать правильную версию команды *ASPNET\_Compiler* для целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-300">If you are using the *aspnet\_compiler* command to precompile your application (such as in a build environment), you must use the correct version of the *aspnet\_compiler* command for the target framework.</span></span> <span data-ttu-id="1f6af-301">Используйте компилятор, поставляемый с .NET Framework 2,0 (%WINDIR%\Microsoft.NET\Framework\v2.0.50727) для компиляции для .NET Framework 3,5 и более ранних версий.</span><span class="sxs-lookup"><span data-stu-id="1f6af-301">Use the compiler that shipped with the .NET Framework 2.0 (%WINDIR%\Microsoft.NET\Framework\v2.0.50727) to compile for the .NET Framework 3.5 and earlier versions.</span></span> <span data-ttu-id="1f6af-302">Используйте компилятор, входящий в состав .NET Framework 4, для компиляции приложений, созданных с помощью этой платформы, или с помощью более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="1f6af-302">Use the compiler that ships with the .NET Framework 4 to compile applications created using that framework or using later versions.</span></span>
- <span data-ttu-id="1f6af-303">Во время выполнения компилятор использует последние сборки платформы, установленные на компьютере (и, следовательно, в GAC).</span><span class="sxs-lookup"><span data-stu-id="1f6af-303">At run time, the compiler uses the latest framework assemblies that are installed on the computer (and therefore in the GAC).</span></span> <span data-ttu-id="1f6af-304">Если обновление для платформы будет выполнено позже (например, установлена гипотетическая версия 4,1), вы сможете использовать функции в более новой версии платформы, несмотря на то, что атрибут *targetFramework* предназначен для более ранней версии (например, 4,0).</span><span class="sxs-lookup"><span data-stu-id="1f6af-304">If an update is made later to the framework (for example, a hypothetical version 4.1 is installed), you will be able to use features in the newer version of the framework even though the *targetFramework* attribute targets a lower version (such as 4.0).</span></span> <span data-ttu-id="1f6af-305">(Однако во время разработки в Visual Studio 2010 или при использовании команды *компилятора ASPNET\_* использование новых функций платформы вызовет ошибки компилятора).</span><span class="sxs-lookup"><span data-stu-id="1f6af-305">(However, at design time in Visual Studio 2010 or when you use the *aspnet\_compiler* command, using newer features of the framework will cause compiler errors).</span></span>

<a id="0.2__Toc224729023"></a><a id="0.2__Toc253429250"></a><a id="0.2__Toc243304624"></a>

## <a name="ajax"></a><span data-ttu-id="1f6af-306">Ajax</span><span class="sxs-lookup"><span data-stu-id="1f6af-306">Ajax</span></span>

<a id="0.2__Toc253429251"></a><a id="0.2__Toc243304625"></a>

### <a name="jquery-included-with-web-forms-and-mvc"></a><span data-ttu-id="1f6af-307">jQuery, поставляемый с веб-формами и MVC</span><span class="sxs-lookup"><span data-stu-id="1f6af-307">jQuery Included with Web Forms and MVC</span></span>

<span data-ttu-id="1f6af-308">Шаблоны Visual Studio для веб-форм и MVC включают библиотеку jQuery с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="1f6af-308">The Visual Studio templates for both Web Forms and MVC include the open-source jQuery library.</span></span> <span data-ttu-id="1f6af-309">При создании нового веб-сайта или проекта создается папка Scripts, содержащая три следующих файла:</span><span class="sxs-lookup"><span data-stu-id="1f6af-309">When you create a new website or project, a Scripts folder containing the following 3 files is created:</span></span>

- <span data-ttu-id="1f6af-310">Жкуери-1.4.1. js — это версия библиотеки jQuery, доступная для восприятия и унминифиед.</span><span class="sxs-lookup"><span data-stu-id="1f6af-310">jQuery-1.4.1.js – The human-readable, unminified version of the jQuery library.</span></span>
- <span data-ttu-id="1f6af-311">Жкуери-14,1. min. js — версия минифицированные библиотеки jQuery.</span><span class="sxs-lookup"><span data-stu-id="1f6af-311">jQuery-14.1.min.js – The minified version of the jQuery library.</span></span>
- <span data-ttu-id="1f6af-312">Жкуери-1.4.1-всдок. js — файл документации IntelliSense для библиотеки jQuery.</span><span class="sxs-lookup"><span data-stu-id="1f6af-312">jQuery-1.4.1-vsdoc.js – The Intellisense documentation file for the jQuery library.</span></span>

<span data-ttu-id="1f6af-313">Включите версию унминифиед jQuery во время разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-313">Include the unminified version of jQuery while developing an application.</span></span> <span data-ttu-id="1f6af-314">Включите минифицированные версию jQuery для рабочих приложений.</span><span class="sxs-lookup"><span data-stu-id="1f6af-314">Include the minified version of jQuery for production applications.</span></span>

<span data-ttu-id="1f6af-315">Например, на следующей странице веб-форм показано, как можно использовать jQuery, чтобы изменить цвет фона для элементов управления TextBox ASP.NET на желтый, если они находятся в фокусе.</span><span class="sxs-lookup"><span data-stu-id="1f6af-315">For example, the following Web Forms page illustrates how you can use jQuery to change the background color of ASP.NET TextBox controls to yellow when they have focus.</span></span>

[!code-aspx[Main](overview/samples/sample18.aspx)]

<a id="0.2__Toc253429252"></a><a id="0.2__Toc243304626"></a>

### <a name="content-delivery-network-support"></a><span data-ttu-id="1f6af-316">Поддержка сети доставки содержимого</span><span class="sxs-lookup"><span data-stu-id="1f6af-316">Content Delivery Network Support</span></span>

<span data-ttu-id="1f6af-317">Сеть доставки содержимого (CDN) Microsoft AJAX позволяет легко добавлять сценарии ASP.NET AJAX и jQuery в веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-317">The Microsoft Ajax Content Delivery Network (CDN) enables you to easily add ASP.NET Ajax and jQuery scripts to your Web applications.</span></span> <span data-ttu-id="1f6af-318">Например, вы можете начать использовать библиотеку jQuery, просто добавив `<script>` тег на страницу, который указывает на AJAX.Microsoft.com следующим образом:</span><span class="sxs-lookup"><span data-stu-id="1f6af-318">For example, you can start using the jQuery library simply by adding a `<script>` tag to your page that points to Ajax.microsoft.com like this:</span></span>

[!code-html[Main](overview/samples/sample19.html)]

<span data-ttu-id="1f6af-319">Благодаря преимуществам Microsoft Ajax CDN можно значительно повысить производительность приложений AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-319">By taking advantage of the Microsoft Ajax CDN, you can significantly improve the performance of your Ajax applications.</span></span> <span data-ttu-id="1f6af-320">Содержимое CDN Microsoft AJAX кэшируется на серверах, расположенных по всему миру.</span><span class="sxs-lookup"><span data-stu-id="1f6af-320">The contents of the Microsoft Ajax CDN are cached on servers located around the world.</span></span> <span data-ttu-id="1f6af-321">Кроме того, сеть CDN Microsoft AJAX позволяет браузерам повторно использовать кэшированные файлы JavaScript для веб-сайтов, расположенных в разных доменах.</span><span class="sxs-lookup"><span data-stu-id="1f6af-321">In addition, the Microsoft Ajax CDN enables browsers to reuse cached JavaScript files for Web sites that are located in different domains.</span></span>

<span data-ttu-id="1f6af-322">Сеть доставки содержимого Microsoft Ajax поддерживает протокол SSL (HTTPS), если необходимо обслуживать веб-страницу с помощью SSL.</span><span class="sxs-lookup"><span data-stu-id="1f6af-322">The Microsoft Ajax Content Delivery Network supports SSL (HTTPS) in case you need to serve a web page using the Secure Sockets Layer.</span></span>

<span data-ttu-id="1f6af-323">Реализуйте откат, если сеть CDN недоступна.</span><span class="sxs-lookup"><span data-stu-id="1f6af-323">Implement a fallback when the CDN is unavailable.</span></span> <span data-ttu-id="1f6af-324">Проверьте резервный вариант.</span><span class="sxs-lookup"><span data-stu-id="1f6af-324">Test the fallback.</span></span>

<span data-ttu-id="1f6af-325">Дополнительные сведения о сети CDN Microsoft AJAX см. на следующем веб-сайте:</span><span class="sxs-lookup"><span data-stu-id="1f6af-325">To learn more about the Microsoft Ajax CDN, visit the following website:</span></span>

[https://www.asp.net/ajaxlibrary/CDN.ashx](../../ajax/cdn/overview.md)

<span data-ttu-id="1f6af-326">ScriptManager ASP.NET поддерживает сеть CDN Microsoft AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-326">The ASP.NET ScriptManager supports the Microsoft Ajax CDN.</span></span> <span data-ttu-id="1f6af-327">Просто установив одно свойство, свойство Енаблекдн, можно получить все файлы JavaScript ASP.NET Framework из CDN:</span><span class="sxs-lookup"><span data-stu-id="1f6af-327">Simply by setting one property, the EnableCdn property, you can retrieve all ASP.NET framework JavaScript files from the CDN:</span></span>

[!code-aspx[Main](overview/samples/sample20.aspx)]

<span data-ttu-id="1f6af-328">После установки для свойства Енаблекдн значения true платформа ASP.NET будет получать все файлы JavaScript платформы ASP.NET из CDN, включая все файлы JavaScript, используемые для проверки и UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="1f6af-328">After you set the EnableCdn property to the value true, the ASP.NET framework will retrieve all ASP.NET framework JavaScript files from the CDN including all JavaScript files used for validation and the UpdatePanel.</span></span> <span data-ttu-id="1f6af-329">Установка этого свойства может существенно повлиять на производительность веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-329">Setting this one property can have a dramatic impact on the performance of your web application.</span></span>

<span data-ttu-id="1f6af-330">Путь CDN для собственных файлов JavaScript можно задать с помощью атрибута веб – ресурса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-330">You can set the CDN path for your own JavaScript files by using the WebResource attribute.</span></span> <span data-ttu-id="1f6af-331">Новое свойство Кднпас указывает путь к сети CDN, используемой, если для свойства Енаблекдн задано значение true:</span><span class="sxs-lookup"><span data-stu-id="1f6af-331">The new CdnPath property specifies the path to the CDN used when you set the EnableCdn property to the value true:</span></span>

[!code-csharp[Main](overview/samples/sample21.cs)]

<a id="0.2__Toc253429253"></a><a id="0.2__Toc243304627"></a>

### <a name="scriptmanager-explicit-scripts"></a><span data-ttu-id="1f6af-332">Явные скрипты ScriptManager</span><span class="sxs-lookup"><span data-stu-id="1f6af-332">ScriptManager Explicit Scripts</span></span>

<span data-ttu-id="1f6af-333">В прошлом, если вы использовали ASP.NET Скриптманжер, необходимо было загрузить всю монолитную библиотеку ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-333">In the past, if you used the ASP.NET ScriptManger then you were required to load the entire monolithic ASP.NET Ajax Library.</span></span> <span data-ttu-id="1f6af-334">Используя преимущества нового свойства ScriptManager. Ажаксфрамеворкмоде, можно точно контролировать, какие компоненты библиотеки ASP.NET AJAX загружаются, и загружать только необходимые компоненты библиотеки ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-334">By taking advantage of the new ScriptManager.AjaxFrameworkMode property, you can control exactly which components of the ASP.NET Ajax Library are loaded and load only the components of the ASP.NET Ajax Library that you need.</span></span>

<span data-ttu-id="1f6af-335">Свойству ScriptManager. Ажаксфрамеворкмоде можно присвоить следующие значения:</span><span class="sxs-lookup"><span data-stu-id="1f6af-335">The ScriptManager.AjaxFrameworkMode property can be set to the following values:</span></span>

- <span data-ttu-id="1f6af-336">Enabled (включено) — указывает, что элемент управления ScriptManager автоматически включает файл скрипта MicrosoftAjax. js, который представляет собой объединенный файл скрипта для каждого сценария основной платформы (поведение прежних версий).</span><span class="sxs-lookup"><span data-stu-id="1f6af-336">Enabled -- Specifies that the ScriptManager control automatically includes the MicrosoftAjax.js script file, which is a combined script file of every core framework script (legacy behavior).</span></span>
- <span data-ttu-id="1f6af-337">Disabled — указывает, что все функции скриптов Microsoft AJAX отключены и элемент управления ScriptManager не ссылается на какие-либо скрипты автоматически.</span><span class="sxs-lookup"><span data-stu-id="1f6af-337">Disabled -- Specifies that all Microsoft Ajax script features are disabled and that the ScriptManager control does not reference any scripts automatically.</span></span>
- <span data-ttu-id="1f6af-338">Явное — указывает, что вы явно включаете ссылки на скрипты в отдельный файл скрипта основной среды, который требуется вашей странице, и включает ссылки на зависимости, необходимые для каждого файла скрипта.</span><span class="sxs-lookup"><span data-stu-id="1f6af-338">Explicit -- Specifies that you will explicitly include script references to individual framework core script file that your page requires, and that you will include references to the dependencies that each script file requires.</span></span>

<span data-ttu-id="1f6af-339">Например, если свойству Ажаксфрамеворкмоде присвоить значение EXPLICIT, можно указать необходимые скрипты ASP.NET компонентов AJAX:</span><span class="sxs-lookup"><span data-stu-id="1f6af-339">For example, if you set the AjaxFrameworkMode property to the value Explicit then you can specify the particular ASP.NET Ajax component scripts that you need:</span></span>

[!code-aspx[Main](overview/samples/sample22.aspx)]

<a id="0.2__The_DataView_Control"></a><a id="0.2__The_DataContext_and"></a><a id="0.2__Refactoring_the_Microsoft"></a><a id="0.2__Toc224729032"></a><a id="0.2__Toc253429256"></a><a id="0.2__Toc243304630"></a>

## <a name="web-forms"></a><span data-ttu-id="1f6af-340">Веб-формы</span><span class="sxs-lookup"><span data-stu-id="1f6af-340">Web Forms</span></span>

<span data-ttu-id="1f6af-341">Веб-формы — это основная функция в ASP.NET с момента выпуска ASP.NET 1,0.</span><span class="sxs-lookup"><span data-stu-id="1f6af-341">Web Forms has been a core feature in ASP.NET since the release of ASP.NET 1.0.</span></span> <span data-ttu-id="1f6af-342">В этой области для ASP.NET 4 были внесены многие улучшения, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="1f6af-342">Many enhancements have been in this area for ASP.NET 4, including the following:</span></span>

- <span data-ttu-id="1f6af-343">Возможность задавать теги *meta* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-343">The ability to set *meta* tags.</span></span>
- <span data-ttu-id="1f6af-344">Более полный контроль состояния представления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-344">More control over view state.</span></span>
- <span data-ttu-id="1f6af-345">Более простые способы работы с возможностями браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-345">Easier ways to work with browser capabilities.</span></span>
- <span data-ttu-id="1f6af-346">Поддержка использования ASP.NET маршрутизации с помощью веб-форм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-346">Support for using ASP.NET routing with Web Forms.</span></span>
- <span data-ttu-id="1f6af-347">Более полный контроль над создаваемыми идентификаторами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-347">More control over generated IDs.</span></span>
- <span data-ttu-id="1f6af-348">Возможность сохранения выбранных строк в элементах управления данными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-348">The ability to persist selected rows in data controls.</span></span>
- <span data-ttu-id="1f6af-349">Больший контроль над визуализированным HTML в элементах управления *FormView* и *ListView* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-349">More control over rendered HTML in the *FormView* and *ListView* controls.</span></span>
- <span data-ttu-id="1f6af-350">Поддержка фильтрации элементов управления источниками данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-350">Filtering support for data source controls.</span></span>

<a id="0.2__Toc224729033"></a><a id="0.2__Toc253429257"></a><a id="0.2__Toc243304631"></a>

### <a name="setting-meta-tags-with-the-pagemetakeywords-and-pagemetadescription-properties"></a><span data-ttu-id="1f6af-351">Установка тегов META с помощью свойств Page. кратко и Page. Метадескриптион</span><span class="sxs-lookup"><span data-stu-id="1f6af-351">Setting Meta Tags with the Page.MetaKeywords and Page.MetaDescription Properties</span></span>

<span data-ttu-id="1f6af-352">ASP.NET 4 добавляет два свойства в класс *страницы* , *кратко* и *метадескриптион*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-352">ASP.NET 4 adds two properties to the *Page* class, *MetaKeywords* and *MetaDescription*.</span></span> <span data-ttu-id="1f6af-353">Эти два свойства представляют соответствующие *meta* -Теги на странице, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-353">These two properties represent corresponding *meta* tags in your page, as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample23.aspx)]

<span data-ttu-id="1f6af-354">Эти два свойства работают так же, как и свойство *Title* страницы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-354">These two properties work the same way that the page's *Title* property does.</span></span> <span data-ttu-id="1f6af-355">Они следуют следующим правилам:</span><span class="sxs-lookup"><span data-stu-id="1f6af-355">They follow these rules:</span></span>

1. <span data-ttu-id="1f6af-356">Если в элементе *head* нет *meta* -тегов, соответствующих именам свойств (то есть Name = "keywords" для *Page. кратко* и Name = "Description" для *Page. метадескриптион*, то есть эти свойства не были заданы). ) Теги *meta* будут добавлены на страницу при подготовке к просмотру.</span><span class="sxs-lookup"><span data-stu-id="1f6af-356">If there are no *meta* tags in the *head* element that match the property names (that is, name="keywords" for *Page.MetaKeywords* and name="description" for *Page.MetaDescription*, meaning that these properties have not been set), the *meta* tags will be added to the page when it is rendered.</span></span>
2. <span data-ttu-id="1f6af-357">Если с этими именами уже есть теги *meta* , эти свойства выступают как методы get и Set для содержимого существующих тегов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-357">If there are already *meta* tags with these names, these properties act as get and set methods for the contents of the existing tags.</span></span>

<span data-ttu-id="1f6af-358">Эти свойства можно задать во время выполнения, что позволяет получать содержимое из базы данных или другого источника, что позволяет динамически задавать теги, чтобы описать конкретную страницу.</span><span class="sxs-lookup"><span data-stu-id="1f6af-358">You can set these properties at run time, which lets you get the content from a database or other source, and which lets you set the tags dynamically to describe what a particular page is for.</span></span>

<span data-ttu-id="1f6af-359">Можно также задать *Ключевые слова* и свойства *описания* в директиве *@ Page* в верхней части разметки страницы Web Forms, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-359">You can also set the *Keywords* and *Description* properties in the *@ Page* directive at the top of the Web Forms page markup, as in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample24.aspx)]

<span data-ttu-id="1f6af-360">Это переопределит содержимое тега *meta* (если таковое имеется), уже объявленное на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-360">This will override the *meta* tag contents (if any) already declared in the page.</span></span>

<span data-ttu-id="1f6af-361">Содержимое тега *meta* Description используется для улучшения предварительных версий списка поиска в Google.</span><span class="sxs-lookup"><span data-stu-id="1f6af-361">The contents of the description *meta* tag are used for improving search listing previews in Google.</span></span> <span data-ttu-id="1f6af-362">(Дополнительные сведения см. в разделе [улучшение фрагментов с помощью Meta Description преобразование](http://googlewebmastercentral.blogspot.com/2007/09/improve-snippets-with-meta-description.html) в центре блогов Google.) Google и Windows Live Search не используют содержимое ключевых слов для чего-либо, но другие поисковые системы могут.</span><span class="sxs-lookup"><span data-stu-id="1f6af-362">(For details, see [Improve snippets with a meta description makeover](http://googlewebmastercentral.blogspot.com/2007/09/improve-snippets-with-meta-description.html) on the Google Webmaster Central blog.) Google and Windows Live Search do not use the contents of the keywords for anything, but other search engines might.</span></span> <span data-ttu-id="1f6af-363">Дополнительные сведения см. в разделе [рекомендации по ключевым словам meta](http://www.searchengineguide.com/richard-ball/meta-keywords-a.php) на веб-сайте руководств поисковых систем.</span><span class="sxs-lookup"><span data-stu-id="1f6af-363">For more information, see [Meta Keywords Advice](http://www.searchengineguide.com/richard-ball/meta-keywords-a.php) on the Search Engine Guide Web site.</span></span>

<span data-ttu-id="1f6af-364">Эти новые свойства являются простой функцией, но они сохраняют вас от необходимости добавлять их вручную или писать собственный код для создания тегов *meta* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-364">These new properties are a simple feature, but they save you from the requirement to add these manually or from writing your own code to create the *meta* tags.</span></span>

<a id="0.2__Toc224729034"></a><a id="0.2__Toc253429258"></a><a id="0.2__Toc243304632"></a>

### <a name="enabling-view-state-for-individual-controls"></a><span data-ttu-id="1f6af-365">Включение состояния представления для отдельных элементов управления</span><span class="sxs-lookup"><span data-stu-id="1f6af-365">Enabling View State for Individual Controls</span></span>

<span data-ttu-id="1f6af-366">По умолчанию состояние представления включено для страницы, в результате чего каждый элемент управления на странице потенциально сохраняет состояние представления, даже если оно не требуется для приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-366">By default, view state is enabled for the page, with the result that each control on the page potentially stores view state even if it is not required for the application.</span></span> <span data-ttu-id="1f6af-367">Данные состояния представления включаются в разметку, формируемую страницей, и увеличивают время, затрачиваемое на отправку страницы клиенту и обратное их размещение.</span><span class="sxs-lookup"><span data-stu-id="1f6af-367">View state data is included in the markup that a page generates and increases the amount of time it takes to send a page to the client and post it back.</span></span> <span data-ttu-id="1f6af-368">Хранение большего состояния представления, чем необходимо, может привести к значительному снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="1f6af-368">Storing more view state than is necessary can cause significant performance degradation.</span></span> <span data-ttu-id="1f6af-369">В более ранних версиях ASP.NET разработчики могли отключить состояние просмотра для отдельных элементов управления, чтобы уменьшить размер страницы, но это было необходимо сделать явным образом для отдельных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-369">In earlier versions of ASP.NET, developers could disable view state for individual controls in order to reduce page size, but had to do so explicitly for individual controls.</span></span> <span data-ttu-id="1f6af-370">В ASP.NET 4 элементы управления веб-сервера включают свойство *виевстатемоде* , которое позволяет отключать состояние просмотра по умолчанию, а затем включать его только для тех элементов управления, которые нуждаются в этой странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-370">In ASP.NET 4, Web server controls include a *ViewStateMode* property that lets you disable view state by default and then enable it only for the controls that require it in the page.</span></span>

<span data-ttu-id="1f6af-371">Свойство *виевстатемоде* принимает перечисление, которое имеет три значения: *Включены*, *отключены*инаследуются.</span><span class="sxs-lookup"><span data-stu-id="1f6af-371">The *ViewStateMode* property takes an enumeration that has three values: *Enabled*, *Disabled*, and *Inherit*.</span></span> <span data-ttu-id="1f6af-372">*Enabled* включает состояние представления для этого элемента управления и для всех дочерних элементов управления, для которых задано наследование или не задано ничего.</span><span class="sxs-lookup"><span data-stu-id="1f6af-372">*Enabled* enables view state for that control and for any child controls that are set to *Inherit* or that have nothing set.</span></span> <span data-ttu-id="1f6af-373">*Disabled* отключает состояние представления, а *inherit* указывает, что элемент управления использует параметр *виевстатемоде* из родительского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-373">*Disabled* disables view state, and *Inherit* specifies that the control uses the *ViewStateMode* setting from the parent control.</span></span>

<span data-ttu-id="1f6af-374">В следующем примере показано, как работает свойство *виевстатемоде* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-374">The following example shows how the *ViewStateMode* property works.</span></span> <span data-ttu-id="1f6af-375">Разметка и код для элементов управления на следующей странице содержит значения для свойства *виевстатемоде* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-375">The markup and code for the controls in the following page includes values for the *ViewStateMode* property:</span></span>

[!code-aspx[Main](overview/samples/sample25.aspx)]

<span data-ttu-id="1f6af-376">Как видите, код отключает состояние просмотра для элемента управления PlaceHolder1.</span><span class="sxs-lookup"><span data-stu-id="1f6af-376">As you can see, the code disables view state for the PlaceHolder1 control.</span></span> <span data-ttu-id="1f6af-377">Дочерний элемент управления Label1 наследует это значение свойства (*inherit* является значением по умолчанию для *виевстатемоде* для элементов управления) и поэтому не сохраняет состояние представления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-377">The child label1 control inherits this property value (*Inherit* is the default value for *ViewStateMode* for controls.) and therefore saves no view state.</span></span> <span data-ttu-id="1f6af-378">В элементе управления PlaceHolder2 параметр *виевстатемоде* имеет значение *Enabled*, поэтому ярлык2 наследует это свойство и сохранит состояние представления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-378">In the PlaceHolder2 control, *ViewStateMode* is set to *Enabled*, so label2 inherits this property and saves view state.</span></span> <span data-ttu-id="1f6af-379">При первой загрузке страницы свойство *Text* обоих элементов управления *Label* устанавливается в строку "[DynamicValue]".</span><span class="sxs-lookup"><span data-stu-id="1f6af-379">When the page is first loaded, the *Text* property of both *Label* controls is set to the string "[DynamicValue]".</span></span>

<span data-ttu-id="1f6af-380">Результатом этих настроек является то, что когда страница загружается в первый раз, в браузере отображаются следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="1f6af-380">The effect of these settings is that when the page loads the first time, the following output is displayed in the browser:</span></span>

<span data-ttu-id="1f6af-381">Доступ`: [DynamicValue]`</span><span class="sxs-lookup"><span data-stu-id="1f6af-381">Disabled `: [DynamicValue]`</span></span>

<span data-ttu-id="1f6af-382">Доступной`[DynamicValue]`</span><span class="sxs-lookup"><span data-stu-id="1f6af-382">Enabled:`[DynamicValue]`</span></span>

<span data-ttu-id="1f6af-383">Однако после обратной передачи отображаются следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="1f6af-383">After a postback, however, the following output is displayed:</span></span>

<span data-ttu-id="1f6af-384">Доступ`: [DeclaredValue]`</span><span class="sxs-lookup"><span data-stu-id="1f6af-384">Disabled `: [DeclaredValue]`</span></span>

<span data-ttu-id="1f6af-385">Доступной`[DynamicValue]`</span><span class="sxs-lookup"><span data-stu-id="1f6af-385">Enabled:`[DynamicValue]`</span></span>

<span data-ttu-id="1f6af-386">Элемент управления Label1 (у которого значение *виевстатемоде* заданокак disabled) не сохранил значение, которое было задано в коде.</span><span class="sxs-lookup"><span data-stu-id="1f6af-386">The label1 control (whose *ViewStateMode* value is set to *Disabled*) has not preserved the value that it was set to in code.</span></span> <span data-ttu-id="1f6af-387">Однако состояние элемента управления ярлык2 (для которого задано значение *Enabled*) сохранилось.</span><span class="sxs-lookup"><span data-stu-id="1f6af-387">However, the label2 control (whose *ViewStateMode* value is set to *Enabled*) has preserved its state.</span></span>

<span data-ttu-id="1f6af-388">Можно также задать *виевстатемоде* в директиве *@ Page* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-388">You can also set *ViewStateMode* in the *@ Page* directive, as in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample26.aspx)]

<span data-ttu-id="1f6af-389">Класс *страницы* — это просто другой элемент управления; Он выступает в качестве родительского элемента управления для всех остальных элементов управления на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-389">The *Page* class is just another control; it acts as the parent control for all the other controls in the page.</span></span> <span data-ttu-id="1f6af-390">Значение по умолчанию *Виевстатемоде* *включено* для экземпляров *страницы*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-390">The default value of *ViewStateMode* is *Enabled* for instances of *Page*.</span></span> <span data-ttu-id="1f6af-391">Поскольку элементы управления поумолчанию наследуют, элементы управления наследуют значение *включенного* свойства, если только не задано значение *виевстатемоде* на уровне страницы или элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-391">Because controls default to *Inherit*, controls will inherit the *Enabled* property value unless you set *ViewStateMode* at page or control level.</span></span>

<span data-ttu-id="1f6af-392">Значение свойства *виевстатемоде* определяет, поддерживается ли состояние представления только в том случае, если свойство *EnableViewState* имеет значение *true*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-392">The value of the *ViewStateMode* property determines if view state is maintained only if the *EnableViewState* property is set to *true*.</span></span> <span data-ttu-id="1f6af-393">Если свойство *EnableViewState* имеет значение *false*, состояние представления не будет поддерживаться, даже если для *виевстатемоде* задано значение *Enabled*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-393">If the *EnableViewState* property is set to *false*, view state will not be maintained even if *ViewStateMode* is set to *Enabled*.</span></span>

<span data-ttu-id="1f6af-394">Хорошим использованием этой функции является использование элементов управления *ContentPlaceHolder* на главных страницах, где можно установить *Виевстатемоде* в значение *disabled* для главной страницы, а затем включить ее по отдельности для элементов управления *ContentPlaceHolder* , которые в свою очередь содержит элементы управления, для которых требуется состояние представления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-394">A good use for this feature is with *ContentPlaceHolder* controls in master pages, where you can set *ViewStateMode* to *Disabled* for the master page and then enable it individually for *ContentPlaceHolder* controls that in turn contain controls that require view state.</span></span>

<a id="0.2__Toc224729035"></a><a id="0.2__Toc253429259"></a><a id="0.2__Toc243304633"></a>

### <a name="changes-to-browser-capabilities"></a><span data-ttu-id="1f6af-395">Изменения возможностей браузера</span><span class="sxs-lookup"><span data-stu-id="1f6af-395">Changes to Browser Capabilities</span></span>

<span data-ttu-id="1f6af-396">ASP.NET определяет возможности браузера, которые пользователь использует для просмотра сайта, с помощью функции, которая называется « *возможности браузера*».</span><span class="sxs-lookup"><span data-stu-id="1f6af-396">ASP.NET determines the capabilities of the browser that a user is using to browse your site by using a feature called *browser capabilities*.</span></span> <span data-ttu-id="1f6af-397">Возможности браузера представлены объектом *хттпбровсеркапабилитиес* (предоставленным свойством *request. browser* ).</span><span class="sxs-lookup"><span data-stu-id="1f6af-397">Browser capabilities are represented by the *HttpBrowserCapabilities* object (exposed by the *Request.Browser* property).</span></span> <span data-ttu-id="1f6af-398">Например, можно использовать объект *хттпбровсеркапабилитиес* , чтобы определить, поддерживает ли тип и версия текущего браузера конкретную версию JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1f6af-398">For example, you can use the *HttpBrowserCapabilities* object to determine whether the type and version of the current browser supports a particular version of JavaScript.</span></span> <span data-ttu-id="1f6af-399">Также можно использовать объект *хттпбровсеркапабилитиес* , чтобы определить, поступил ли запрос с мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="1f6af-399">Or, you can use the *HttpBrowserCapabilities* object to determine whether the request originated from a mobile device.</span></span>

<span data-ttu-id="1f6af-400">Объект *хттпбровсеркапабилитиес* управляется набором файлов определения браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-400">The *HttpBrowserCapabilities* object is driven by a set of browser definition files.</span></span> <span data-ttu-id="1f6af-401">Эти файлы содержат сведения о возможностях определенных браузеров.</span><span class="sxs-lookup"><span data-stu-id="1f6af-401">These files contain information about the capabilities of particular browsers.</span></span> <span data-ttu-id="1f6af-402">В ASP.NET 4 эти файлы определения браузера были обновлены и содержат сведения о недавно появившихся браузерах и устройствах, таких как Google Chrome, исследование в смартфонах с движением BlackBerry и Apple iPhone.</span><span class="sxs-lookup"><span data-stu-id="1f6af-402">In ASP.NET 4, these browser definition files have been updated to contain information about recently introduced browsers and devices such as Google Chrome, Research in Motion BlackBerry smartphones, and Apple iPhone.</span></span>

<span data-ttu-id="1f6af-403">В следующем списке показаны новые файлы определения браузера:</span><span class="sxs-lookup"><span data-stu-id="1f6af-403">The following list shows new browser definition files:</span></span>

- <span data-ttu-id="1f6af-404">*BlackBerry. browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-404">*blackberry.browser*</span></span>
- <span data-ttu-id="1f6af-405">*chrome.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-405">*chrome.browser*</span></span>
- <span data-ttu-id="1f6af-406">*Default. browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-406">*Default.browser*</span></span>
- <span data-ttu-id="1f6af-407">*firefox.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-407">*firefox.browser*</span></span>
- <span data-ttu-id="1f6af-408">*gateway.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-408">*gateway.browser*</span></span>
- <span data-ttu-id="1f6af-409">*generic.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-409">*generic.browser*</span></span>
- <span data-ttu-id="1f6af-410">*ie.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-410">*ie.browser*</span></span>
- <span data-ttu-id="1f6af-411">*iemobile.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-411">*iemobile.browser*</span></span>
- <span data-ttu-id="1f6af-412">*iphone.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-412">*iphone.browser*</span></span>
- <span data-ttu-id="1f6af-413">*opera.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-413">*opera.browser*</span></span>
- <span data-ttu-id="1f6af-414">*safari.browser*</span><span class="sxs-lookup"><span data-stu-id="1f6af-414">*safari.browser*</span></span>

#### <a name="using-browser-capabilities-providers"></a><span data-ttu-id="1f6af-415">Использование поставщиков возможностей браузера</span><span class="sxs-lookup"><span data-stu-id="1f6af-415">Using Browser Capabilities Providers</span></span>

<span data-ttu-id="1f6af-416">В ASP.NET версии 3,5 с пакетом обновления 1 (SP1) можно определить возможности браузера следующими способами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-416">In ASP.NET version 3.5 Service Pack 1, you can define the capabilities that a browser has in the following ways:</span></span>

- <span data-ttu-id="1f6af-417">На уровне компьютера вы создаете или обновляете `.browser` XML-файл в следующей папке:</span><span class="sxs-lookup"><span data-stu-id="1f6af-417">At the computer level, you create or update a `.browser` XML file in the following folder:</span></span>

- [!code-console[Main](overview/samples/sample27.cmd)]

- <span data-ttu-id="1f6af-418">Определив возможности браузера, выполните следующую команду из командной строки Visual Studio, чтобы перестроить сборку возможностей браузера и добавить ее в глобальный кэш сборок:</span><span class="sxs-lookup"><span data-stu-id="1f6af-418">After you define the browser capability, you run the following command from the Visual Studio Command Prompt in order to rebuild the browser capabilities assembly and add it to the GAC:</span></span>

- [!code-console[Main](overview/samples/sample28.cmd)]

- <span data-ttu-id="1f6af-419">Для отдельного приложения в `.browser` `App_Browsers` папке приложения создается файл.</span><span class="sxs-lookup"><span data-stu-id="1f6af-419">For an individual application, you create a `.browser` file in the application's `App_Browsers` folder.</span></span>

<span data-ttu-id="1f6af-420">Для этих подходов требуется изменить XML-файлы, а для изменений на уровне компьютера необходимо перезапустить приложение после запуска процесса ASPNET\_регбровсерс. exe.</span><span class="sxs-lookup"><span data-stu-id="1f6af-420">These approaches require you to change XML files, and for computer-level changes, you must restart the application after you run the aspnet\_regbrowsers.exe process.</span></span>

<span data-ttu-id="1f6af-421">ASP.NET 4 включает в себя функцию, называемую *поставщиками возможностей браузера*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-421">ASP.NET 4 includes a feature referred to as *browser capabilities providers*.</span></span> <span data-ttu-id="1f6af-422">Как видно из названия, это позволяет создать поставщик, который, в свою очередь, позволяет использовать собственный код для определения возможностей браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-422">As the name suggests, this lets you build a provider that in turn lets you use your own code to determine browser capabilities.</span></span>

<span data-ttu-id="1f6af-423">На практике разработчики часто не определяют возможности пользовательского браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-423">In practice, developers often do not define custom browser capabilities.</span></span> <span data-ttu-id="1f6af-424">Файлы браузера трудно обновлять, процесс их обновления довольно сложен, а синтаксис XML для `.browser` файлов может быть сложным для использования и определения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-424">Browser files are hard to update, the process for updating them is fairly complicated, and the XML syntax for `.browser` files can be complex to use and define.</span></span> <span data-ttu-id="1f6af-425">Что сделает этот процесс намного проще, если существовал общий синтаксис определения браузера или база данных, содержащая актуальные определения браузера или даже веб-службу для такой базы данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-425">What would make this process much easier is if there were a common browser definition syntax, or a database that contained up-to-date browser definitions, or even a Web service for such a database.</span></span> <span data-ttu-id="1f6af-426">Новая функция поставщиков возможностей браузера делает эти сценарии возможными и практичными для сторонних разработчиков.</span><span class="sxs-lookup"><span data-stu-id="1f6af-426">The new browser capabilities providers feature makes these scenarios possible and practical for third-party developers.</span></span>

<span data-ttu-id="1f6af-427">Существует два основных подхода к использованию новой функции поставщика возможностей браузера ASP.NET 4: расширение возможностей определения возможностей браузера ASP.NET или его замена.</span><span class="sxs-lookup"><span data-stu-id="1f6af-427">There are two main approaches for using the new ASP.NET 4 browser capabilities provider feature: extending the ASP.NET browser capabilities definition functionality, or totally replacing it.</span></span> <span data-ttu-id="1f6af-428">В следующих разделах описано, как заменить функциональность, а затем расширить ее.</span><span class="sxs-lookup"><span data-stu-id="1f6af-428">The following sections describe first how to replace the functionality, and then how to extend it.</span></span>

#### <a name="replacing-the-aspnet-browser-capabilities-functionality"></a><span data-ttu-id="1f6af-429">Замена возможностей возможностей браузера ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1f6af-429">Replacing the ASP.NET Browser Capabilities Functionality</span></span>

<span data-ttu-id="1f6af-430">Чтобы полностью заменить функциональность определения возможностей браузера ASP.NET, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="1f6af-430">To replace the ASP.NET browser capabilities definition functionality completely, follow these steps:</span></span>

1. <span data-ttu-id="1f6af-431">Создайте класс поставщика, производный от *хттпкапабилитиеспровидер* , который переопределяет метод *жетбровсеркапабилитиес* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-431">Create a provider class that derives from *HttpCapabilitiesProvider* and that overrides the *GetBrowserCapabilities* method, as in the following example:</span></span> 

    [!code-csharp[Main](overview/samples/sample29.cs)]

    <span data-ttu-id="1f6af-432">Код в этом примере создает новый объект *хттпбровсеркапабилитиес* , указывая только возможность с именем Browser и устанавливая эту возможность в микустомбровсер.</span><span class="sxs-lookup"><span data-stu-id="1f6af-432">The code in this example creates a new *HttpBrowserCapabilities* object, specifying only the capability named browser and setting that capability to MyCustomBrowser.</span></span>
2. <span data-ttu-id="1f6af-433">Зарегистрируйте поставщик в приложении.</span><span class="sxs-lookup"><span data-stu-id="1f6af-433">Register the provider with the application.</span></span> 

    <span data-ttu-id="1f6af-434">Чтобы использовать поставщик с приложением, необходимо добавить атрибут *поставщика* в `Web.config` раздел browserCaps в файлах или. `Machine.config`</span><span class="sxs-lookup"><span data-stu-id="1f6af-434">In order to use a provider with an application, you must add the *provider* attribute to the *browserCaps* section in the `Web.config` or `Machine.config` files.</span></span> <span data-ttu-id="1f6af-435">(Атрибуты поставщика можно также определить в элементе *Location* для определенных каталогов в приложении, например в папке для конкретного мобильного устройства.) В следующем примере показано, как задать атрибут *provider* в файле конфигурации:</span><span class="sxs-lookup"><span data-stu-id="1f6af-435">(You can also define the provider attributes in a *location* element for specific directories in application, such as in a folder for a specific mobile device.) The following example shows how to set the *provider* attribute in a configuration file:</span></span>

    [!code-xml[Main](overview/samples/sample30.xml)]

    <span data-ttu-id="1f6af-436">Другим способом регистрации нового определения возможностей браузера является использование кода, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-436">Another way to register the new browser capability definition is to use code, as shown in the following example:</span></span>

    [!code-csharp[Main](overview/samples/sample31.cs)]

    <span data-ttu-id="1f6af-437">Этот код должен выполняться в событии `Global.asax` *запуска приложения\_* файла.</span><span class="sxs-lookup"><span data-stu-id="1f6af-437">This code must run in the *Application\_Start* event of the `Global.asax` file.</span></span> <span data-ttu-id="1f6af-438">Любое изменение класса *бровсеркапабилитиеспровидер* должно происходить перед выполнением любого кода в приложении, чтобы убедиться, что кэш остается в допустимом состоянии для разрешенного объекта *хттпкапабилитиесбасе* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-438">Any change to the *BrowserCapabilitiesProvider* class must occur before any code in the application executes, in order to make sure that the cache remains in a valid state for the resolved *HttpCapabilitiesBase* object.</span></span>

#### <a name="caching-the-httpbrowsercapabilities-object"></a><span data-ttu-id="1f6af-439">Кэширование объекта Хттпбровсеркапабилитиес</span><span class="sxs-lookup"><span data-stu-id="1f6af-439">Caching the HttpBrowserCapabilities Object</span></span>

<span data-ttu-id="1f6af-440">В предыдущем примере есть одна проблема, которая заключается в том, что код будет выполняться каждый раз при вызове пользовательского поставщика для получения объекта *хттпбровсеркапабилитиес* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-440">The preceding example has one problem, which is that the code would run each time the custom provider is invoked in order to get the *HttpBrowserCapabilities* object.</span></span> <span data-ttu-id="1f6af-441">Это может происходить несколько раз во время каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-441">This can happen multiple times during each request.</span></span> <span data-ttu-id="1f6af-442">В этом примере код для поставщика не выполняет много действий.</span><span class="sxs-lookup"><span data-stu-id="1f6af-442">In the example, the code for the provider does not do much.</span></span> <span data-ttu-id="1f6af-443">Однако если код пользовательского поставщика выполняет значительную работу, чтобы получить объект *хттпбровсеркапабилитиес* , это может повлиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="1f6af-443">However, if the code in your custom provider performs significant work in order to get the *HttpBrowserCapabilities* object, this can affect performance.</span></span> <span data-ttu-id="1f6af-444">Чтобы предотвратить это, можно кэшировать объект *хттпбровсеркапабилитиес* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-444">To prevent this from happening, you can cache the *HttpBrowserCapabilities* object.</span></span> <span data-ttu-id="1f6af-445">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="1f6af-445">Follow these steps:</span></span>

1. <span data-ttu-id="1f6af-446">Создайте класс, производный от *хттпкапабилитиеспровидер*, как в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-446">Create a class that derives from *HttpCapabilitiesProvider*, like the one in the following example:</span></span> 

    [!code-csharp[Main](overview/samples/sample32.cs)]

    <span data-ttu-id="1f6af-447">В примере код создает ключ кэша путем вызова пользовательского метода Буилдкачекэй и получает продолжительность кэширования путем вызова пользовательского метода Жеткачетиме.</span><span class="sxs-lookup"><span data-stu-id="1f6af-447">In the example, the code generates a cache key by calling a custom BuildCacheKey method, and it gets the length of time to cache by calling a custom GetCacheTime method.</span></span> <span data-ttu-id="1f6af-448">Затем код добавляет разрешенный объект *хттпбровсеркапабилитиес* в кэш.</span><span class="sxs-lookup"><span data-stu-id="1f6af-448">The code then adds the resolved *HttpBrowserCapabilities* object to the cache.</span></span> <span data-ttu-id="1f6af-449">Объект можно получить из кэша и повторно использовать при последующих запросах, использующих настраиваемый поставщик.</span><span class="sxs-lookup"><span data-stu-id="1f6af-449">The object can be retrieved from the cache and reused on subsequent requests that make use of the custom provider.</span></span>
2. <span data-ttu-id="1f6af-450">Зарегистрируйте поставщик в приложении, как описано в предыдущей процедуре.</span><span class="sxs-lookup"><span data-stu-id="1f6af-450">Register the provider with the application as described in the preceding procedure.</span></span>

#### <a name="extending-aspnet-browser-capabilities-functionality"></a><span data-ttu-id="1f6af-451">Расширение возможностей возможностей браузера ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1f6af-451">Extending ASP.NET Browser Capabilities Functionality</span></span>

<span data-ttu-id="1f6af-452">В предыдущем разделе было описано, как создать новый объект *хттпбровсеркапабилитиес* в ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-452">The previous section described how to create a new *HttpBrowserCapabilities* object in ASP.NET 4.</span></span> <span data-ttu-id="1f6af-453">Можно также расширить функциональные возможности обозревателя ASP.NET, добавив новые определения возможностей браузера в те, которые уже находятся в ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-453">You can also extend the ASP.NET browser capabilities functionality by adding new browser capabilities definitions to those that are already in ASP.NET.</span></span> <span data-ttu-id="1f6af-454">Это можно сделать без использования определений браузера XML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-454">You can do this without using the XML browser definitions.</span></span> <span data-ttu-id="1f6af-455">В следующей процедуре показано, как это делать.</span><span class="sxs-lookup"><span data-stu-id="1f6af-455">The following procedure shows how.</span></span>

1. <span data-ttu-id="1f6af-456">Создайте класс, производный от *хттпкапабилитиесевалуатор* и переопределяющий метод *жетбровсеркапабилитиес* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-456">Create a class that derives from *HttpCapabilitiesEvaluator* and that overrides the *GetBrowserCapabilities* method, as shown in the following example:</span></span> 

    [!code-csharp[Main](overview/samples/sample33.cs)]

    <span data-ttu-id="1f6af-457">В этом коде сначала используется функция возможностей браузера ASP.NET, чтобы попытаться опознать браузер.</span><span class="sxs-lookup"><span data-stu-id="1f6af-457">This code first uses the ASP.NET browser capabilities functionality to try to identify the browser.</span></span> <span data-ttu-id="1f6af-458">Однако если браузер не определен на основе сведений, определенных в запросе (то есть если свойство *Browser* объекта *хттпбровсеркапабилитиес* является строкой "Unknown"), код вызывает настраиваемый поставщик ( Мибровсеркапабилитиесевалуатор) для обнаружения браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-458">However, if no browser is identified based on the information defined in the request (that is, if the *Browser* property of the *HttpBrowserCapabilities* object is the string "Unknown"), the code calls the custom provider (MyBrowserCapabilitiesEvaluator) to identify the browser.</span></span>
2. <span data-ttu-id="1f6af-459">Зарегистрируйте поставщик в приложении, как описано в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="1f6af-459">Register the provider with the application as described in the previous example.</span></span>

#### <a name="extending-browser-capabilities-functionality-by-adding-new-capabilities-to-existing-capabilities-definitions"></a><span data-ttu-id="1f6af-460">Расширение функциональности возможностей браузера путем добавления новых возможностей к существующим определениям возможностей</span><span class="sxs-lookup"><span data-stu-id="1f6af-460">Extending Browser Capabilities Functionality by Adding New Capabilities to Existing Capabilities Definitions</span></span>

<span data-ttu-id="1f6af-461">Помимо создания пользовательского поставщика определений браузера и динамического создания новых определений браузеров, можно расширить существующие определения браузера с помощью дополнительных возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-461">In addition to creating a custom browser definition provider and to dynamically creating new browser definitions, you can extend existing browser definitions with additional capabilities.</span></span> <span data-ttu-id="1f6af-462">Это позволяет использовать определение, близкое к желаемому, но в нем не хватает нескольких возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-462">This lets you use a definition that is close to what you want but lacks only a few capabilities.</span></span> <span data-ttu-id="1f6af-463">Для этого выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="1f6af-463">To do this, use the following steps.</span></span>

1. <span data-ttu-id="1f6af-464">Создайте класс, производный от *хттпкапабилитиесевалуатор* и переопределяющий метод *жетбровсеркапабилитиес* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-464">Create a class that derives from *HttpCapabilitiesEvaluator* and that overrides the *GetBrowserCapabilities* method, as shown in the following example:</span></span> 

    [!code-csharp[Main](overview/samples/sample34.cs)]

    <span data-ttu-id="1f6af-465">Код в примере расширяет существующий класс ASP.NET *хттпкапабилитиесевалуатор* и получает объект *хттпбровсеркапабилитиес* , соответствующий текущему определению запроса, с помощью следующего кода:</span><span class="sxs-lookup"><span data-stu-id="1f6af-465">The example code extends the existing ASP.NET *HttpCapabilitiesEvaluator* class and gets the *HttpBrowserCapabilities* object that matches the current request definition by using the following code:</span></span>

    [!code-csharp[Main](overview/samples/sample35.cs)]

    <span data-ttu-id="1f6af-466">Затем код может добавить или изменить возможность для этого браузера.</span><span class="sxs-lookup"><span data-stu-id="1f6af-466">The code can then add or modify a capability for this browser.</span></span> <span data-ttu-id="1f6af-467">Существует два способа указания новой возможности браузера:</span><span class="sxs-lookup"><span data-stu-id="1f6af-467">There are two ways to specify a new browser capability:</span></span>

    - <span data-ttu-id="1f6af-468">Добавьте пару "ключ-значение" в объект *IDictionary* , предоставляемый свойством *capabilities* объекта *хттпкапабилитиесбасе* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-468">Add a key/value pair to the *IDictionary* object that is exposed by the *Capabilities* property of the *HttpCapabilitiesBase* object.</span></span> <span data-ttu-id="1f6af-469">В предыдущем примере код добавляет возможность с именем Мультисенсорная и значением *true*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-469">In the previous example, the code adds a capability named MultiTouch with a value of *true*.</span></span>
    - <span data-ttu-id="1f6af-470">Установка существующих свойств объекта *хттпкапабилитиесбасе* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-470">Set existing properties of the *HttpCapabilitiesBase* object.</span></span> <span data-ttu-id="1f6af-471">В предыдущем примере код устанавливает для свойства frames значение *true*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-471">In the previous example, the code sets the *Frames* property to *true*.</span></span> <span data-ttu-id="1f6af-472">Это свойство представляет собой просто метод доступа для объекта *IDictionary* , предоставляемого свойством *capabilities* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-472">This property is simply an accessor for the *IDictionary* object that is exposed by the *Capabilities* property.</span></span> 

        > [!NOTE]
        > <span data-ttu-id="1f6af-473">Примечание. Эта модель применяется к любому свойству *хттпбровсеркапабилитиес*, включая адаптеры элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-473">Note This model applies to any property of *HttpBrowserCapabilities*, including control adapters.</span></span>
2. <span data-ttu-id="1f6af-474">Зарегистрируйте поставщик в приложении, как описано в предыдущей процедуре.</span><span class="sxs-lookup"><span data-stu-id="1f6af-474">Register the provider with the application as described in the earlier procedure.</span></span>

<a id="0.2__Toc224729036"></a><a id="0.2__Toc253429260"></a><a id="0.2__Toc243304634"></a>

### <a name="routing-in-aspnet-4"></a><span data-ttu-id="1f6af-475">Маршрутизация в ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="1f6af-475">Routing in ASP.NET 4</span></span>

<span data-ttu-id="1f6af-476">В ASP.NET 4 добавлена встроенная поддержка для использования маршрутизации с помощью веб-форм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-476">ASP.NET 4 adds built-in support for using routing with Web Forms.</span></span> <span data-ttu-id="1f6af-477">Маршрутизация позволяет настроить приложение для приема URL-адресов запросов, которые не сопоставляются с физическими файлами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-477">Routing lets you configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="1f6af-478">Вместо этого можно использовать маршрутизацию для определения URL-адресов, которые являются значимыми для пользователей и которые могут помочь в оптимизации поисковой системы (SEO) для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-478">Instead, you can use routing to define URLs that are meaningful to users and that can help with search-engine optimization (SEO) for your application.</span></span> <span data-ttu-id="1f6af-479">Например, URL-адрес страницы, отображающей категории продуктов в существующем приложении, может выглядеть, как в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-479">For example, the URL for a page that displays product categories in an existing application might look like the following example:</span></span>

[!code-console[Main](overview/samples/sample36.cmd)]

<span data-ttu-id="1f6af-480">Используя маршрутизацию, можно настроить приложение на прием следующего URL-адреса для отображения той же информации:</span><span class="sxs-lookup"><span data-stu-id="1f6af-480">By using routing, you can configure the application to accept the following URL to render the same information:</span></span>

[!code-console[Main](overview/samples/sample37.cmd)]

<span data-ttu-id="1f6af-481">Маршрутизация была доступна начиная с ASP.NET 3,5 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1f6af-481">Routing has been available starting with ASP.NET 3.5 SP1.</span></span> <span data-ttu-id="1f6af-482">(Пример использования маршрутизации в ASP.NET 3,5 с пакетом обновления 1 (SP1) см. в разделе запись [с использованием маршрутизации с]заголовком «WebForms»(http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx "этой записи.")</span><span class="sxs-lookup"><span data-stu-id="1f6af-482">(For an example of how to use routing in ASP.NET 3.5 SP1, see the entry [Using Routing With WebForms](http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx "Title of this entry.")</span></span> <span data-ttu-id="1f6af-483">в блоге по Фил Хаак.) Однако ASP.NET 4 включает некоторые функции, упрощающие использование маршрутизации, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="1f6af-483">on Phil Haack's blog.) However, ASP.NET 4 includes some features that make it easier to use routing, including the following:</span></span>

- <span data-ttu-id="1f6af-484">Класс *пажераутехандлер* , который является простым обработчиком HTTP, который используется при определении маршрутов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-484">The *PageRouteHandler* class, which is a simple HTTP handler that you use when you define routes.</span></span> <span data-ttu-id="1f6af-485">Класс передает данные на страницу, к которой направляется запрос.</span><span class="sxs-lookup"><span data-stu-id="1f6af-485">The class passes data to the page that the request is routed to.</span></span>
- <span data-ttu-id="1f6af-486">Новые свойства *HttpRequest. RequestContext* и *Page. RouteData* (это прокси-сервер для объекта *HttpRequest. RequestContext. RouteData* ).</span><span class="sxs-lookup"><span data-stu-id="1f6af-486">The new properties *HttpRequest.RequestContext* and *Page.RouteData* (which is a proxy for the *HttpRequest.RequestContext.RouteData* object).</span></span> <span data-ttu-id="1f6af-487">Эти свойства упрощают доступ к информации, передаваемой из маршрута.</span><span class="sxs-lookup"><span data-stu-id="1f6af-487">These properties make it easier to access information that is passed from the route.</span></span>
- <span data-ttu-id="1f6af-488">Следующие новые построители выражений, определенные в *System. Web. Compilation. раутеурлекспрессионбуилдер* и *System. Web. Compilation. раутевалуикспрессионбуилдер*:</span><span class="sxs-lookup"><span data-stu-id="1f6af-488">The following new expression builders, which are defined in *System.Web.Compilation.RouteUrlExpressionBuilder* and *System.Web.Compilation.RouteValueExpressionBuilder*:</span></span>
- <span data-ttu-id="1f6af-489">*RouteUrl*, который предоставляет простой способ создания URL-адреса, соответствующего URL-адресу маршрута в серверном элементе управления ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-489">*RouteUrl*, which provides a simple way to create a URL that corresponds to a route URL within an ASP.NET server control.</span></span>
- <span data-ttu-id="1f6af-490">*RouteValue*, который предоставляет простой способ извлечения информации из объекта *раутеконтекст* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-490">*RouteValue*, which provides a simple way to extract information from the *RouteContext* object.</span></span>
- <span data-ttu-id="1f6af-491">Класс *раутепараметер* , который упрощает передачу данных, содержащихся в объекте *раутеконтекст* , в запрос для элемента управления источника данных (аналогично [*формпараметер*](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formparameter.aspx)).</span><span class="sxs-lookup"><span data-stu-id="1f6af-491">The *RouteParameter* class, which makes it easier to pass data contained in a *RouteContext* object to a query for a data source control (similar to [*FormParameter*](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formparameter.aspx)).</span></span>

#### <a name="routing-for-web-forms-pages"></a><span data-ttu-id="1f6af-492">Маршрутизация для страниц веб-форм</span><span class="sxs-lookup"><span data-stu-id="1f6af-492">Routing for Web Forms Pages</span></span>

<span data-ttu-id="1f6af-493">В следующем примере показано, как определить маршрут веб-форм с помощью нового метода *маппажерауте* класса *Route* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-493">The following example shows how to define a Web Forms route by using the new *MapPageRoute* method of the *Route* class:</span></span>

[!code-csharp[Main](overview/samples/sample38.cs)]

<span data-ttu-id="1f6af-494">В ASP.NET 4 появился метод *маппажерауте* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-494">ASP.NET 4 introduces the *MapPageRoute* method.</span></span> <span data-ttu-id="1f6af-495">Следующий пример эквивалентен определению Сеарчрауте, показанному в предыдущем примере, но использует класс *пажераутехандлер* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-495">The following example is equivalent to the SearchRoute definition shown in the previous example, but uses the *PageRouteHandler* class.</span></span>

[!code-csharp[Main](overview/samples/sample39.cs)]

<span data-ttu-id="1f6af-496">Код в примере сопоставляет маршрут с физической страницей (в первом маршруте к `~/search.aspx`).</span><span class="sxs-lookup"><span data-stu-id="1f6af-496">The code in the example maps the route to a physical page (in the first route, to `~/search.aspx`).</span></span> <span data-ttu-id="1f6af-497">Первое определение маршрута также указывает, что параметр с именем searchterm должен быть извлечен из URL-адреса и передан на страницу.</span><span class="sxs-lookup"><span data-stu-id="1f6af-497">The first route definition also specifies that the parameter named searchterm should be extracted from the URL and passed to the page.</span></span>

<span data-ttu-id="1f6af-498">Метод *маппажерауте* поддерживает следующие перегрузки метода:</span><span class="sxs-lookup"><span data-stu-id="1f6af-498">The *MapPageRoute* method supports the following method overloads:</span></span>

- <span data-ttu-id="1f6af-499">*Маппажерауте (строка routeName, строка routeUrl, строка physicalFile, bool Чеккфисикалурлакцесс)*</span><span class="sxs-lookup"><span data-stu-id="1f6af-499">*MapPageRoute(string routeName, string routeUrl, string physicalFile, bool checkPhysicalUrlAccess)*</span></span>
- <span data-ttu-id="1f6af-500">*Маппажерауте (строка routeName, строка routeUrl, строка physicalFile, bool Чеккфисикалурлакцесс, значения по умолчанию для Раутевалуедиктионари)*</span><span class="sxs-lookup"><span data-stu-id="1f6af-500">*MapPageRoute(string routeName, string routeUrl, string physicalFile, bool checkPhysicalUrlAccess, RouteValueDictionary defaults)*</span></span>
- <span data-ttu-id="1f6af-501">*Маппажерауте (строка routeName, строка routeUrl, строка physicalFile, bool Чеккфисикалурлакцесс, значения по умолчанию раутевалуедиктионари, ограничения Раутевалуедиктионари)*</span><span class="sxs-lookup"><span data-stu-id="1f6af-501">*MapPageRoute(string routeName, string routeUrl, string physicalFile, bool checkPhysicalUrlAccess, RouteValueDictionary defaults, RouteValueDictionary constraints)*</span></span>

<span data-ttu-id="1f6af-502">Параметр *чеккфисикалурлакцесс* указывает, должен ли маршрут проверять разрешения безопасности для физической страницы, к которой выполняется маршрутизация (в данном случае это Search. aspx), и разрешения для входящего URL-адреса (в данном случае это поиск/{searchterm}).</span><span class="sxs-lookup"><span data-stu-id="1f6af-502">The *checkPhysicalUrlAccess* parameter specifies whether the route should check the security permissions for the physical page being routed to (in this case, search.aspx) and the permissions on the incoming URL (in this case, search/{searchterm}).</span></span> <span data-ttu-id="1f6af-503">Если значение *чеккфисикалурлакцесс* равно *false*, будут проверяться только разрешения входящего URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-503">If the value of *checkPhysicalUrlAccess* is *false*, only the permissions of the incoming URL will be checked.</span></span> <span data-ttu-id="1f6af-504">Эти разрешения определяются в `Web.config` файле с помощью следующих параметров:</span><span class="sxs-lookup"><span data-stu-id="1f6af-504">These permissions are defined in the `Web.config` file using settings such as the following:</span></span>

[!code-xml[Main](overview/samples/sample40.xml)]

<span data-ttu-id="1f6af-505">В примере конфигурации отказано в доступе к физической странице `search.aspx` для всех пользователей, за исключением тех, которые входят в роль администратора.</span><span class="sxs-lookup"><span data-stu-id="1f6af-505">In the example configuration, access is denied to the physical page `search.aspx` for all users except those who are in the admin role.</span></span> <span data-ttu-id="1f6af-506">Если параметр *чеккфисикалурлакцесс* имеет значение *true* (по умолчанию), доступ к URL-адресу/СЕАРЧ/{сеарчтерм} разрешен только пользователям с правами администратора, так как физический Поиск страницы. aspx ограничен только пользователями этой роли.</span><span class="sxs-lookup"><span data-stu-id="1f6af-506">When the *checkPhysicalUrlAccess* parameter is set to *true* (which is its default value), only admin users are allowed to access the URL /search/{searchterm}, because the physical page search.aspx is restricted to users in that role.</span></span> <span data-ttu-id="1f6af-507">Если для *чеккфисикалурлакцесс* задано *значение false* и сайт настроен, как показано в предыдущем примере, всем прошедшим проверку подлинности пользователям будет разрешен доступ к URL-адресу/СЕАРЧ/{сеарчтерм}.</span><span class="sxs-lookup"><span data-stu-id="1f6af-507">If *checkPhysicalUrlAccess* is set to *false* and the site is configured as shown in the previous example, all authenticated users are allowed to access the URL /search/{searchterm}.</span></span>

#### <a name="reading-routing-information-in-a-web-forms-page"></a><span data-ttu-id="1f6af-508">Чтение сведений о маршрутизации на странице веб-форм</span><span class="sxs-lookup"><span data-stu-id="1f6af-508">Reading Routing Information in a Web Forms Page</span></span>

<span data-ttu-id="1f6af-509">В коде физической страницы веб-форм можно получить доступ к информации, извлеченной из URL-адреса (или другой информации, добавленной другим объектом в объект *RouteData* ), с помощью двух новых свойств: *HttpRequest. RequestContext* и *Page. RouteData*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-509">In the code of the Web Forms physical page, you can access the information that routing has extracted from the URL (or other information that another object has added to the *RouteData* object) by using two new properties: *HttpRequest.RequestContext* and *Page.RouteData*.</span></span> <span data-ttu-id="1f6af-510">(*Page. RouteData* заключает *HttpRequest. RequestContext. RouteData*.) В следующем примере показано, как использовать *Page. RouteData*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-510">(*Page.RouteData* wraps *HttpRequest.RequestContext.RouteData*.) The following example shows how to use *Page.RouteData*.</span></span>

[!code-csharp[Main](overview/samples/sample41.cs)]

<span data-ttu-id="1f6af-511">Код извлекает значение, переданное для параметра searchterm, как определено ранее в примере маршрута.</span><span class="sxs-lookup"><span data-stu-id="1f6af-511">The code extracts the value that was passed for the searchterm parameter, as defined in the example route earlier.</span></span> <span data-ttu-id="1f6af-512">Рассмотрим следующий URL-адрес запроса:</span><span class="sxs-lookup"><span data-stu-id="1f6af-512">Consider the following request URL:</span></span>

[!code-console[Main](overview/samples/sample42.cmd)]

<span data-ttu-id="1f6af-513">При выполнении этого запроса на `search.aspx` странице будет отображено слово «Скотт».</span><span class="sxs-lookup"><span data-stu-id="1f6af-513">When this request is made, the word "scott" would be rendered in the `search.aspx` page.</span></span>

#### <a name="accessing-routing-information-in-markup"></a><span data-ttu-id="1f6af-514">Доступ к сведениям о маршрутизации в разметке</span><span class="sxs-lookup"><span data-stu-id="1f6af-514">Accessing Routing Information in Markup</span></span>

<span data-ttu-id="1f6af-515">Метод, описанный в предыдущем разделе, показывает, как получить данные маршрута в коде на странице веб-форм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-515">The method described in the previous section shows how to get route data in code in a Web Forms page.</span></span> <span data-ttu-id="1f6af-516">Можно также использовать выражения в разметке, которые предоставляют доступ к одной и той же информации.</span><span class="sxs-lookup"><span data-stu-id="1f6af-516">You can also use expressions in markup that give you access to the same information.</span></span> <span data-ttu-id="1f6af-517">Построители выражений — это мощный и изящный способ работы с декларативным кодом.</span><span class="sxs-lookup"><span data-stu-id="1f6af-517">Expression builders are a powerful and elegant way to work with declarative code.</span></span> <span data-ttu-id="1f6af-518">(Дополнительные сведения см. в записи самостоятельного выражения [с пользовательскими построителями выражений](http://haacked.com/archive/2006/11/29/Express_Yourself_With_Custom_Expression_Builders.aspx) в блоге по Фил Хаак.)</span><span class="sxs-lookup"><span data-stu-id="1f6af-518">(For more information, see the entry [Express Yourself With Custom Expression Builders](http://haacked.com/archive/2006/11/29/Express_Yourself_With_Custom_Expression_Builders.aspx) on Phil Haack's blog.)</span></span>

<span data-ttu-id="1f6af-519">ASP.NET 4 содержит два новых построителей выражений для маршрутизации веб-форм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-519">ASP.NET 4 includes two new expression builders for Web Forms routing.</span></span> <span data-ttu-id="1f6af-520">В следующем примере показано, как использовать их.</span><span class="sxs-lookup"><span data-stu-id="1f6af-520">The following example shows how to use them.</span></span>

[!code-aspx[Main](overview/samples/sample43.aspx)]

<span data-ttu-id="1f6af-521">В этом примере выражение *RouteUrl* используется для определения URL-адреса, основанного на параметре маршрута.</span><span class="sxs-lookup"><span data-stu-id="1f6af-521">In the example, the *RouteUrl* expression is used to define a URL that is based on a route parameter.</span></span> <span data-ttu-id="1f6af-522">Это избавляет от необходимости жестко кодировать полный URL-адрес в разметку и позволяет изменить структуру URL-адреса позже, не требуя изменения этой ссылки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-522">This saves you from having to hard-code the complete URL into the markup, and lets you change the URL structure later without requiring any change to this link.</span></span>

<span data-ttu-id="1f6af-523">На основе маршрута, определенного ранее, эта разметка создает следующий URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="1f6af-523">Based on the route defined earlier, this markup generates the following URL:</span></span>

[!code-console[Main](overview/samples/sample44.cmd)]

<span data-ttu-id="1f6af-524">ASP.NET автоматически работает с правильным маршрутом (то есть создает правильный URL-адрес) на основе входных параметров.</span><span class="sxs-lookup"><span data-stu-id="1f6af-524">ASP.NET automatically works out the correct route (that is, it generates the correct URL) based on the input parameters.</span></span> <span data-ttu-id="1f6af-525">В выражение можно также включить имя маршрута, которое позволяет указать маршрут для использования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-525">You can also include a route name in the expression, which lets you specify a route to use.</span></span>

<span data-ttu-id="1f6af-526">В следующем примере показано, как использовать выражение *RouteValue* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-526">The following example shows how to use the *RouteValue* expression.</span></span>

[!code-aspx[Main](overview/samples/sample45.aspx)]

<span data-ttu-id="1f6af-527">Когда выполняется страница, содержащая этот элемент управления, в метке отображается значение «Скотт».</span><span class="sxs-lookup"><span data-stu-id="1f6af-527">When the page that contains this control runs, the value "scott" is displayed in the label.</span></span>

<span data-ttu-id="1f6af-528">Выражение *RouteValue* упрощает использование данных маршрута в разметке и позволяет избежать необходимости работать с более сложным синтаксисом Page. RouteData ["x"] в разметке.</span><span class="sxs-lookup"><span data-stu-id="1f6af-528">The *RouteValue* expression makes it simple to use route data in markup, and it avoids having to work with the more complex Page.RouteData["x"] syntax in markup.</span></span>

#### <a name="using-route-data-for-data-source-control-parameters"></a><span data-ttu-id="1f6af-529">Использование данных маршрута для параметров элемента управления источниками данных</span><span class="sxs-lookup"><span data-stu-id="1f6af-529">Using Route Data for Data Source Control Parameters</span></span>

<span data-ttu-id="1f6af-530">Класс *раутепараметер* позволяет указать данные маршрута в качестве значения параметра для запросов в элементе управления источниками данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-530">The *RouteParameter* class lets you specify route data as a parameter value for queries in a data source control.</span></span> <span data-ttu-id="1f6af-531">Он [работает во многом подобно](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formparameter.aspx) классу, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-531">It [works much like the](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formparameter.aspx) class, as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample46.aspx)]

<span data-ttu-id="1f6af-532">В этом случае значение параметра маршрута searchterm будет использоваться для @companyname параметра в инструкции *SELECT* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-532">In this case, the value of the route parameter searchterm will be used for the @companyname parameter in the *Select* statement.</span></span>

<a id="0.2__Toc224729037"></a><a id="0.2__Toc253429261"></a><a id="0.2__Toc243304635"></a>

### <a name="setting-client-ids"></a><span data-ttu-id="1f6af-533">Настройка идентификаторов клиентов</span><span class="sxs-lookup"><span data-stu-id="1f6af-533">Setting Client IDs</span></span>

<span data-ttu-id="1f6af-534">Новое свойство *ClientIDMode* предназначено для долгосрочной проблемы в ASP.NET, а именно о том, как элементы управления создают атрибут *ID* для элементов, которые они отображают.</span><span class="sxs-lookup"><span data-stu-id="1f6af-534">The new *ClientIDMode* property addresses a long-standing issue in ASP.NET, namely how controls create the *id* attribute for elements that they render.</span></span> <span data-ttu-id="1f6af-535">Знание атрибута *ID* для отображаемых элементов важно, если приложение включает клиентский скрипт, который ссылается на эти элементы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-535">Knowing the *id* attribute for rendered elements is important if your application includes client script that references these elements.</span></span>

<span data-ttu-id="1f6af-536">Атрибут *ID* в HTML, отображаемый для серверных веб-элементов управления, создается на основе свойства *ClientID* элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-536">The *id* attribute in HTML that is rendered for Web server controls is generated based on the *ClientID* property of the control.</span></span> <span data-ttu-id="1f6af-537">До ASP.NET 4 алгоритм создания атрибута *ID* из свойства *ClientID* присоединяет контейнер именования (если таковой имеется) с идентификатором и в случае повторяющихся элементов управления (как в элементах управления данными) для добавления префикса и последовательного Нумерация.</span><span class="sxs-lookup"><span data-stu-id="1f6af-537">Until ASP.NET 4, the algorithm for generating the *id* attribute from the *ClientID* property has been to concatenate the naming container (if any) with the ID, and in the case of repeated controls (as in data controls), to add a prefix and a sequential number.</span></span> <span data-ttu-id="1f6af-538">Хотя в этом случае всегда гарантировано, что идентификаторы элементов управления на странице уникальны, алгоритм привел к тому, что идентификаторы управления не были прогнозируемыми и, следовательно, трудно ссылаться в клиентском скрипте.</span><span class="sxs-lookup"><span data-stu-id="1f6af-538">While this has always guaranteed that the IDs of controls in the page are unique, the algorithm has resulted in control IDs that were not predictable, and were therefore difficult to reference in client script.</span></span>

<span data-ttu-id="1f6af-539">Новое свойство *ClientIDMode* позволяет точно указать, как идентификатор клиента создается для элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-539">The new *ClientIDMode* property lets you specify more precisely how the client ID is generated for controls.</span></span> <span data-ttu-id="1f6af-540">Свойство *ClientIDMode* можно задать для любого элемента управления, в том числе для страницы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-540">You can set the *ClientIDMode* property for any control, including for the page.</span></span> <span data-ttu-id="1f6af-541">Возможны следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="1f6af-541">Possible settings are the following:</span></span>

- <span data-ttu-id="1f6af-542">*AutoID* — это эквивалентно алгоритму создания значений свойств *ClientID* , которые использовались в более ранних версиях ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-542">*AutoID* – This is equivalent to the algorithm for generating *ClientID* property values that was used in earlier versions of ASP.NET.</span></span>
- <span data-ttu-id="1f6af-543">*Static* — указывает, что значение *ClientID* будет таким же, как идентификатор, без сцепления идентификаторов родительских контейнеров именования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-543">*Static* – This specifies that the *ClientID* value will be the same as the ID without concatenating the IDs of parent naming containers.</span></span> <span data-ttu-id="1f6af-544">Это может быть полезно в пользовательских веб-элементах управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-544">This can be useful in Web user controls.</span></span> <span data-ttu-id="1f6af-545">Поскольку пользовательский веб-элемент управления может размещаться на разных страницах и в различных контейнерных элементах управления, может быть трудно написать клиентский скрипт для элементов управления, использующих алгоритм *AutoID* , поскольку нельзя предсказать, какие значения идентификаторов будут использоваться.</span><span class="sxs-lookup"><span data-stu-id="1f6af-545">Because a Web user control can be located on different pages and in different container controls, it can be difficult to write client script for controls that use the *AutoID* algorithm because you cannot predict what the ID values will be.</span></span>
- <span data-ttu-id="1f6af-546">*Прогнозируемый* — этот параметр предназначен главным образом для использования в элементах управления данными, использующих повторяющиеся шаблоны.</span><span class="sxs-lookup"><span data-stu-id="1f6af-546">*Predictable* – This option is primarily for use in data controls that use repeating templates.</span></span> <span data-ttu-id="1f6af-547">Он объединяет свойства идентификатора контейнеров именования элемента управления, но созданные значения *ClientID* не содержат строк, таких как "ктлкскскс".</span><span class="sxs-lookup"><span data-stu-id="1f6af-547">It concatenates the ID properties of the control's naming containers, but generated *ClientID* values do not contain strings like "ctlxxx".</span></span> <span data-ttu-id="1f6af-548">Этот параметр работает совместно со свойством *ClientIDRowSuffix* элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-548">This setting works in conjunction with the *ClientIDRowSuffix* property of the control.</span></span> <span data-ttu-id="1f6af-549">Для свойства *ClientIDRowSuffix* задается имя поля данных, а значение этого поля используется в качестве суффикса для созданного значения *ClientID* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-549">You set the *ClientIDRowSuffix* property to the name of a data field, and the value of that field is used as the suffix for the generated *ClientID* value.</span></span> <span data-ttu-id="1f6af-550">Обычно в качестве значения *ClientIDRowSuffix* используется первичный ключ записи данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-550">Typically you would use the primary key of a data record as the *ClientIDRowSuffix* value.</span></span>
- <span data-ttu-id="1f6af-551">*Inherit* — этот параметр является поведением по умолчанию для элементов управления; Он указывает, что создание идентификатора элемента управления совпадает с его родителем.</span><span class="sxs-lookup"><span data-stu-id="1f6af-551">*Inherit* – This setting is the default behavior for controls; it specifies that a control's ID generation is the same as its parent.</span></span>

<span data-ttu-id="1f6af-552">Свойство *ClientIDMode* можно задать на уровне страницы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-552">You can set the *ClientIDMode* property at the page level.</span></span> <span data-ttu-id="1f6af-553">Это определяет значение *ClientIDMode* по умолчанию для всех элементов управления на текущей странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-553">This defines the default *ClientIDMode* value for all controls in the current page.</span></span>

<span data-ttu-id="1f6af-554">Значение *ClientIDMode* по умолчанию на уровне страницы — *AutoID*, а значение *ClientIDMode* по умолчанию на уровне элемента управления — *inherit*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-554">The default *ClientIDMode* value at the page level is *AutoID*, and the default *ClientIDMode* value at the control level is *Inherit*.</span></span> <span data-ttu-id="1f6af-555">В результате, если вы не задаете это свойство в любом месте кода, все элементы управления будут по умолчанию использовать алгоритм *AutoID* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-555">As a result, if you do not set this property anywhere in your code, all controls will default to the *AutoID* algorithm.</span></span>

<span data-ttu-id="1f6af-556">Значение уровня страницы задается в директиве *@ Page* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-556">You set the page-level value in the *@ Page* directive, as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample47.aspx)]

<span data-ttu-id="1f6af-557">Можно также задать значение *ClientIDMode* в файле конфигурации либо на уровне компьютера (компьютера), либо на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-557">You can also set the *ClientIDMode* value in the configuration file, either at the computer (machine) level or at the application level.</span></span> <span data-ttu-id="1f6af-558">Он определяет параметр *ClientIDMode* по умолчанию для всех элементов управления во всех страницах приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-558">This defines the default *ClientIDMode* setting for all controls in all pages in the application.</span></span> <span data-ttu-id="1f6af-559">Если задать значение на уровне компьютера, он определяет параметр *ClientIDMode* по умолчанию для всех веб-сайтов на этом компьютере.</span><span class="sxs-lookup"><span data-stu-id="1f6af-559">If you set the value at the computer level, it defines the default *ClientIDMode* setting for all Web sites on that computer.</span></span> <span data-ttu-id="1f6af-560">В следующем примере показан параметр *ClientIDMode* в файле конфигурации:</span><span class="sxs-lookup"><span data-stu-id="1f6af-560">The following example shows the *ClientIDMode* setting in the configuration file:</span></span>

[!code-xml[Main](overview/samples/sample48.xml)]

<span data-ttu-id="1f6af-561">Как отмечалось ранее, значение свойства *ClientID* является производным от контейнера именования для родителя элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-561">As noted earlier, the value of the *ClientID* property is derived from the naming container for a control's parent.</span></span> <span data-ttu-id="1f6af-562">В некоторых сценариях, например при использовании главных страниц, элементы управления могут использовать идентификаторы, подобные приведенным в следующем отображенном HTML-коде:</span><span class="sxs-lookup"><span data-stu-id="1f6af-562">In some scenarios, such as when you are using master pages, controls can end up with IDs like those in the following rendered HTML:</span></span>

[!code-html[Main](overview/samples/sample49.html)]

<span data-ttu-id="1f6af-563">Несмотря на то, что элемент *ввода* , показанный в разметке (из элемента управления *TextBox* ), является только двумя контейнерами именования на странице (вложенные элементы управления *ContentPlaceHolder* ), из-за обработки главных страниц конечным результатом будет Идентификатор элемента управления следующим образом:</span><span class="sxs-lookup"><span data-stu-id="1f6af-563">Even though the *input* element shown in the markup (from a *TextBox* control) is only two naming containers deep in the page (the nested *ContentPlaceholder* controls), because of the way master pages are processed, the end result is a control ID like the following:</span></span>

[!code-console[Main](overview/samples/sample50.cmd)]

<span data-ttu-id="1f6af-564">Этот идентификатор гарантированно уникален на странице, но не обязательно должен быть длинным для большинства целей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-564">This ID is guaranteed to be unique in the page, but is unnecessarily long for most purposes.</span></span> <span data-ttu-id="1f6af-565">Представьте, что необходимо уменьшить длину отображаемого идентификатора и получить больший контроль над способом создания идентификатора.</span><span class="sxs-lookup"><span data-stu-id="1f6af-565">Imagine that you want to reduce the length of the rendered ID, and to have more control over how the ID is generated.</span></span> <span data-ttu-id="1f6af-566">(Например, необходимо исключить префиксы "ктлкскскс".) Самый простой способ добиться этого — задать свойство *ClientIDMode* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-566">(For example, you want to eliminate "ctlxxx" prefixes.) The easiest way to achieve this is by setting the *ClientIDMode* property as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample51.aspx)]

<span data-ttu-id="1f6af-567">В этом примере свойство *ClientIDMode* имеет значение *static* для самого внешнего элемента *намингпанел* и для него задано значение *Predict* для внутреннего элемента *намингконтрол* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-567">In this sample, the *ClientIDMode* property is set to *Static* for the outermost *NamingPanel* element, and set to *Predictable* for the inner *NamingControl* element.</span></span> <span data-ttu-id="1f6af-568">Эти параметры приводят к следующей разметке (остальная часть страницы и Главная страница считаются теми же, что и в предыдущем примере):</span><span class="sxs-lookup"><span data-stu-id="1f6af-568">These settings result in the following markup (the rest of the page and the master page is assumed to be the same as in the previous example):</span></span>

[!code-html[Main](overview/samples/sample52.html)]

<span data-ttu-id="1f6af-569">*Статический* параметр влияет на сброс иерархии именования для всех элементов управления внутри внешнего элемента *намингпанел* и за исключением идентификаторов *ContentPlaceHolder* и *MasterPage* из созданного идентификатора.</span><span class="sxs-lookup"><span data-stu-id="1f6af-569">The *Static* setting has the effect of resetting the naming hierarchy for any controls inside the outermost *NamingPanel* element, and of eliminating the *ContentPlaceHolder* and *MasterPage* IDs from the generated ID.</span></span> <span data-ttu-id="1f6af-570">(Атрибут *Name* отображаемых элементов не изменяется, поэтому обычные функции ASP.NET сохранены для событий, состояния представления и т. д.) Побочный результат сброса иерархии имен заключается в том, что даже если вы перемещаете разметку для элементов *намингпанел* в другой элемент управления *ContentPlaceHolder* , отображаемые идентификаторы клиентов остаются неизменными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-570">(The *name* attribute of rendered elements is unaffected, so the normal ASP.NET functionality is retained for events, view state, and so on.) A side effect of resetting the naming hierarchy is that even if you move the markup for the *NamingPanel* elements to a different *ContentPlaceholder* control, the rendered client IDs remain the same.</span></span>

> [!NOTE]
> <span data-ttu-id="1f6af-571">Обратите внимание, что вы должны убедиться, что отображаемые идентификаторы элементов управления являются уникальными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-571">Note It is up to you to make sure that the rendered control IDs are unique.</span></span> <span data-ttu-id="1f6af-572">Если это не так, это может привести к нарушению функциональных возможностей, требующих уникальных идентификаторов для отдельных элементов HTML, таких как функция Client *Document. getElementById* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-572">If they are not, it can break any functionality that requires unique IDs for individual HTML elements, such as the client *document.getElementById* function.</span></span>

#### <a name="creating-predictable-client-ids-in-data-bound-controls"></a><span data-ttu-id="1f6af-573">Создание прогнозируемых идентификаторов клиентов в элементах управления с привязкой к данным</span><span class="sxs-lookup"><span data-stu-id="1f6af-573">Creating Predictable Client IDs in Data-Bound Controls</span></span>

<span data-ttu-id="1f6af-574">Значения *ClientID* , которые создаются для элементов управления в элементе управления списка с привязкой к данным, могут быть длинными и непредсказуемыми.</span><span class="sxs-lookup"><span data-stu-id="1f6af-574">The *ClientID* values that are generated for controls in a data-bound list control by the legacy algorithm can be long and are not really predictable.</span></span> <span data-ttu-id="1f6af-575">Функция *ClientIDMode* позволяет получить более полный контроль над созданием этих идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-575">The *ClientIDMode* functionality can help you have more control over how these IDs are generated.</span></span>

<span data-ttu-id="1f6af-576">Разметка в следующем примере включает элемент управления *ListView* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-576">The markup in the following example includes a *ListView* control:</span></span>

[!code-aspx[Main](overview/samples/sample53.aspx)]

<span data-ttu-id="1f6af-577">В предыдущем примере свойства *ClientIDMode* и *ровклиентидровсуффикс* задаются в разметке.</span><span class="sxs-lookup"><span data-stu-id="1f6af-577">In the previous example, the *ClientIDMode* and *RowClientIDRowSuffix* properties are set in markup.</span></span> <span data-ttu-id="1f6af-578">Свойство *ClientIDRowSuffix* может использоваться только в элементах управления с привязкой к данным, и его поведение зависит от того, какой элемент управления используется.</span><span class="sxs-lookup"><span data-stu-id="1f6af-578">The *ClientIDRowSuffix* property can be used only in data-bound controls, and its behavior differs depending on which control you are using.</span></span> <span data-ttu-id="1f6af-579">Ниже приведены различия.</span><span class="sxs-lookup"><span data-stu-id="1f6af-579">The differences are these:</span></span>

- <span data-ttu-id="1f6af-580">Элемент управления *GridView* — можно указать имя одного или нескольких столбцов в источнике данных, которые объединяются во время выполнения для создания идентификаторов клиентов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-580">*GridView* control — You can specify the name of one or more columns in the data source, which are combined at run time to create the client IDs.</span></span> <span data-ttu-id="1f6af-581">Например, если задать для *ровклиентидровсуффикс* значение "ProductName, ProductID", идентификаторы элементов управления для отображаемых элементов будут иметь следующий формат:</span><span class="sxs-lookup"><span data-stu-id="1f6af-581">For example, if you set *RowClientIDRowSuffix* to "ProductName, ProductId", control IDs for rendered elements will have a format like the following:</span></span>

- [!code-console[Main](overview/samples/sample54.cmd)]

- <span data-ttu-id="1f6af-582">Элемент управления *ListView* — можно указать один столбец в источнике данных, добавляемый к идентификатору клиента.</span><span class="sxs-lookup"><span data-stu-id="1f6af-582">*ListView* control — You can specify a single column in the data source that is appended to the client ID.</span></span> <span data-ttu-id="1f6af-583">Например, если задать для *ClientIDRowSuffix* значение "ProductName", то отображаемые идентификаторы элементов управления будут выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="1f6af-583">For example, if you set *ClientIDRowSuffix* to "ProductName", the rendered control IDs will have a format like the following:</span></span>

- [!code-console[Main](overview/samples/sample55.cmd)]

- <span data-ttu-id="1f6af-584">В этом случае конец 1 является производным от идентификатора продукта текущего элемента данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-584">In this case the trailing 1 is derived from the product ID of the current data item.</span></span>

- <span data-ttu-id="1f6af-585">Элемент управления *Repeater* — этот элемент управления не поддерживает свойство *ClientIDRowSuffix* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-585">*Repeater* control— This control does not support the *ClientIDRowSuffix* property.</span></span> <span data-ttu-id="1f6af-586">В элементе управления *Repeater* используется индекс текущей строки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-586">In a *Repeater* control, the index of the current row is used.</span></span> <span data-ttu-id="1f6af-587">При использовании ClientIDMode = "прогнозируемый" с элементом управления *Repeater* создаются идентификаторы клиентов, имеющие следующий формат:</span><span class="sxs-lookup"><span data-stu-id="1f6af-587">When you use ClientIDMode="Predictable" with a *Repeater* control, client IDs are generated that have the following format:</span></span>

- [!code-console[Main](overview/samples/sample56.cmd)]

- <span data-ttu-id="1f6af-588">Замыкающий 0 — это индекс текущей строки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-588">The trailing 0 is the index of the current row.</span></span>

<span data-ttu-id="1f6af-589">Элементы управления *FormView* и *DetailsView* не отображают несколько строк, поэтому они не поддерживают свойство *ClientIDRowSuffix* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-589">The *FormView* and *DetailsView* controls do not display multiple rows, so they do not support the *ClientIDRowSuffix* property.</span></span>

<a id="0.2__Toc224729038"></a><a id="0.2__Toc253429262"></a><a id="0.2__Toc243304636"></a>

### <a name="persisting-row-selection-in-data-controls"></a><span data-ttu-id="1f6af-590">Сохранение выбора строк в элементах управления данными</span><span class="sxs-lookup"><span data-stu-id="1f6af-590">Persisting Row Selection in Data Controls</span></span>

<span data-ttu-id="1f6af-591">Элементы управления *GridView* и *ListView* позволяют пользователям выбрать строку.</span><span class="sxs-lookup"><span data-stu-id="1f6af-591">The *GridView* and *ListView* controls can let users select a row.</span></span> <span data-ttu-id="1f6af-592">В предыдущих версиях ASP.NET выбор был основан на индексе строки на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-592">In previous versions of ASP.NET, selection has been based on the row index on the page.</span></span> <span data-ttu-id="1f6af-593">Например, если выбрать третий элемент на странице 1, а затем перейти на страницу 2, выбирается третий элемент на этой странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-593">For example, if you select the third item on page 1 and then move to page 2, the third item on that page is selected.</span></span>

<span data-ttu-id="1f6af-594">Сохраненный выбор изначально поддерживается только в платформа динамических данных проектах в .NET Framework 3,5 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1f6af-594">Persisted selection was initially supported only in Dynamic Data projects in the .NET Framework 3.5 SP1.</span></span> <span data-ttu-id="1f6af-595">Если эта функция включена, текущий выбранный элемент основывается на ключе данных элемента.</span><span class="sxs-lookup"><span data-stu-id="1f6af-595">When this feature is enabled, the current selected item is based on the data key for the item.</span></span> <span data-ttu-id="1f6af-596">Это означает, что если выбрать третью строку на странице 1 и перейти на страницу 2, на странице 2 ничего не выделено.</span><span class="sxs-lookup"><span data-stu-id="1f6af-596">This means that if you select the third row on page 1 and move to page 2, nothing is selected on page 2.</span></span> <span data-ttu-id="1f6af-597">При переходе назад на страницу 1 Третья строка остается выбранной.</span><span class="sxs-lookup"><span data-stu-id="1f6af-597">When you move back to page 1, the third row is still selected.</span></span> <span data-ttu-id="1f6af-598">Сохраняемый выбор теперь поддерживается для элементов управления *GridView* и *ListView* во всех проектах с помощью свойства *енаблеперсистедселектион* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-598">Persisted selection is now supported for the *GridView* and *ListView* controls in all projects by using the *EnablePersistedSelection* property, as shown in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample57.aspx)]

<a id="0.2__Toc253429263"></a><a id="0.2__Toc243304637"></a>

### <a name="aspnet-chart-control"></a><span data-ttu-id="1f6af-599">Элемент управления диаграммы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1f6af-599">ASP.NET Chart Control</span></span>

<span data-ttu-id="1f6af-600">Элемент управления *диаграммы* ASP.net расширяет предложения визуализации данных в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1f6af-600">The ASP.NET *Chart* control expands the data-visualization offerings in the .NET Framework.</span></span> <span data-ttu-id="1f6af-601">С помощью элемента управления *диаграммы* можно создавать страницы ASP.NET, имеющие интуитивно понятные и визуально привлекательные диаграммы для сложного статистического или финансового анализа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-601">Using the *Chart* control, you can create ASP.NET pages that have intuitive and visually compelling charts for complex statistical or financial analysis.</span></span> <span data-ttu-id="1f6af-602">Элемент управления " *диаграмма* ASP.NET" появился в качестве надстройки для выпуска .NET Framework версии 3,5 с пакетом обновления 1 (SP1) и является частью выпуска .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-602">The ASP.NET *Chart* control was introduced as an add-on to the .NET Framework version 3.5 SP1 release and is part of the .NET Framework 4 release.</span></span>

<span data-ttu-id="1f6af-603">Элемент управления включает следующие функции:</span><span class="sxs-lookup"><span data-stu-id="1f6af-603">The control includes the following features:</span></span>

- <span data-ttu-id="1f6af-604">35 различных типов диаграмм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-604">35 distinct chart types.</span></span>
- <span data-ttu-id="1f6af-605">Неограниченное количество областей диаграммы, заголовков, условных обозначений и заметок.</span><span class="sxs-lookup"><span data-stu-id="1f6af-605">An unlimited number of chart areas, titles, legends, and annotations.</span></span>
- <span data-ttu-id="1f6af-606">Широкий спектр параметров внешнего вида для всех элементов диаграммы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-606">A wide variety of appearance settings for all chart elements.</span></span>
- <span data-ttu-id="1f6af-607">Трехмерная поддержка большинства типов диаграмм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-607">3-D support for most chart types.</span></span>
- <span data-ttu-id="1f6af-608">Метки смарт-данных, которые могут автоматически помещаться вокруг точек данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-608">Smart data labels that can automatically fit around data points.</span></span>
- <span data-ttu-id="1f6af-609">Полосковые линии, разрывы шкалы и логарифмическое масштабирование.</span><span class="sxs-lookup"><span data-stu-id="1f6af-609">Strip lines, scale breaks, and logarithmic scaling.</span></span>
- <span data-ttu-id="1f6af-610">Более 50 финансовых и статистических формул для анализа данных и преобразования данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-610">More than 50 financial and statistical formulas for data analysis and transformation.</span></span>
- <span data-ttu-id="1f6af-611">Простая привязка и обработка данных диаграммы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-611">Simple binding and manipulation of chart data.</span></span>
- <span data-ttu-id="1f6af-612">Поддержка общих форматов данных, таких как даты, время и валюта.</span><span class="sxs-lookup"><span data-stu-id="1f6af-612">Support for common data formats such as dates, times, and currency.</span></span>
- <span data-ttu-id="1f6af-613">Поддержка интерактивной настройки, управляемой событиями, включая события щелчка клиента с помощью AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-613">Support for interactivity and event-driven customization, including client click events using Ajax.</span></span>
- <span data-ttu-id="1f6af-614">Управление состоянием.</span><span class="sxs-lookup"><span data-stu-id="1f6af-614">State management.</span></span>
- <span data-ttu-id="1f6af-615">Двоичные потоки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-615">Binary streaming.</span></span>

<span data-ttu-id="1f6af-616">На следующих рисунках показаны примеры финансовых диаграмм, создаваемых элементом управления диаграммы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-616">The following figures show examples of financial charts that are produced by the ASP.NET Chart control.</span></span>

<a id="0.2_graphic17"></a>![](overview/_static/image1.png)

<span data-ttu-id="1f6af-617">Рис. 2. Примеры элементов управления диаграммы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1f6af-617">Figure 2: ASP.NET Chart control examples</span></span>

<span data-ttu-id="1f6af-618">Чтобы получить дополнительные примеры использования элемента управления диаграммы ASP.NET, Скачайте пример кода на странице «образцы» [для элементов управления диаграммы Microsoft](https://go.microsoft.com/fwlink/?LinkId=128300) на веб-сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="1f6af-618">For more examples of how to use the ASP.NET Chart control, download the sample code on the [Samples Environment for Microsoft Chart Controls](https://go.microsoft.com/fwlink/?LinkId=128300) page on the MSDN Web site.</span></span> <span data-ttu-id="1f6af-619">Дополнительные примеры содержимого сообщества можно найти на [форуме по элементу управления диаграммой](https://go.microsoft.com/fwlink/?LinkId=128713).</span><span class="sxs-lookup"><span data-stu-id="1f6af-619">You can find more samples of community content at the [Chart Control Forum](https://go.microsoft.com/fwlink/?LinkId=128713).</span></span>

#### <a name="adding-the-chart-control-to-an-aspnet-page"></a><span data-ttu-id="1f6af-620">Добавление элемента управления диаграммы на страницу ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1f6af-620">Adding the Chart Control to an ASP.NET Page</span></span>

<span data-ttu-id="1f6af-621">В следующем примере показано, как добавить элемент управления *диаграммы* на страницу ASP.NET с помощью разметки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-621">The following example shows how to add a *Chart* control to an ASP.NET page by using markup.</span></span> <span data-ttu-id="1f6af-622">В этом примере элемент управления *диаграммы* создает гистограмму для статических точек данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-622">In the example, the *Chart* control produces a column chart for static data points.</span></span>

[!code-aspx[Main](overview/samples/sample58.aspx)]

#### <a name="using-3-d-charts"></a><span data-ttu-id="1f6af-623">Использование трехмерных диаграмм</span><span class="sxs-lookup"><span data-stu-id="1f6af-623">Using 3-D Charts</span></span>

<span data-ttu-id="1f6af-624">Элемент управления *Chart* содержит коллекцию *чартареас* , которая может содержать объекты *ChartArea* , определяющие характеристики областей диаграммы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-624">The *Chart* control contains a *ChartAreas* collection, which can contain *ChartArea* objects that define characteristics of chart areas.</span></span> <span data-ttu-id="1f6af-625">Например, чтобы использовать трехмерную диаграмму для области диаграммы, используйте свойство *Area3DStyle* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-625">For example, to use 3-D for a chart area, use the *Area3DStyle* property as in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample59.aspx)]

<span data-ttu-id="1f6af-626">На рисунке ниже показана трехмерная диаграмма с четырьмя рядами типа линейчатой диаграммы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-626">The figure below shows a 3-D chart with four series of the *Bar* chart type.</span></span>

<a id="0.2_graphic18"></a>![](overview/_static/image2.png)

<span data-ttu-id="1f6af-627">Рис. 3. Трехмерная линейчатая диаграмма</span><span class="sxs-lookup"><span data-stu-id="1f6af-627">Figure 3: 3-D Bar Chart</span></span>

#### <a name="using-scale-breaks-and-logarithmic-scales"></a><span data-ttu-id="1f6af-628">Использование разрывов шкалы и логарифмических шкал</span><span class="sxs-lookup"><span data-stu-id="1f6af-628">Using Scale Breaks and Logarithmic Scales</span></span>

<span data-ttu-id="1f6af-629">Разрывы шкалы и логарифмические шкалы — это два дополнительных способа добавления в диаграмму более изощренных возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-629">Scale breaks and logarithmic scales are two additional ways to add sophistication to the chart.</span></span> <span data-ttu-id="1f6af-630">Эти функции относятся к каждой оси в области диаграммы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-630">These features are specific to each axis in a chart area.</span></span> <span data-ttu-id="1f6af-631">Например, чтобы использовать эти функции на основной оси Y области диаграммы, используйте свойства *Axis. логарифмический* и *ScaleBreakStyle* в объекте *ChartArea* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-631">For example, to use these features on the primary Y axis of a chart area, use the *AxisY.IsLogarithmic* and *ScaleBreakStyle* properties in a *ChartArea* object.</span></span> <span data-ttu-id="1f6af-632">В следующем фрагменте кода показано, как использовать разрывы шкалы на основной оси Y.</span><span class="sxs-lookup"><span data-stu-id="1f6af-632">The following snippet shows how to use scale breaks on the primary Y axis.</span></span>

[!code-aspx[Main](overview/samples/sample60.aspx)]

<span data-ttu-id="1f6af-633">На рисунке ниже показана ось Y с включенными разрывами шкалы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-633">The figure below shows the Y axis with scale breaks enabled.</span></span>

<a id="0.2_graphic19"></a>![](overview/_static/image3.png)

<span data-ttu-id="1f6af-634">Рис. 4. Разрывы шкалы</span><span class="sxs-lookup"><span data-stu-id="1f6af-634">Figure 4: Scale Breaks</span></span>

<a id="0.2__QueryExtender"></a><a id="0.2__Toc224729041"></a><a id="0.2__Toc253429264"></a><a id="0.2__Toc243304638"></a>

### <a name="filtering-data-with-the-queryextender-control"></a><span data-ttu-id="1f6af-635">Фильтрация данных с помощью элемента управления элемента</span><span class="sxs-lookup"><span data-stu-id="1f6af-635">Filtering Data with the QueryExtender Control</span></span>

<span data-ttu-id="1f6af-636">Очень распространенной задачей для разработчиков, создающих управляемые данными веб-страницы, является фильтрация данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-636">A very common task for developers who create data-driven Web pages is to filter data.</span></span> <span data-ttu-id="1f6af-637">Это традиционно было выполнено путем создания предложений *WHERE* в элементах управления источниками данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-637">This traditionally has been performed by building *Where* clauses in data source controls.</span></span> <span data-ttu-id="1f6af-638">Этот подход может быть сложным, и в некоторых случаях синтаксис *WHERE* не позволяет воспользоваться всеми возможностями базовой базы данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-638">This approach can be complicated, and in some cases the *Where* syntax does not let you take advantage of the full functionality of the underlying database.</span></span>

<span data-ttu-id="1f6af-639">Чтобы упростить фильтрацию, в ASP.NET 4 был добавлен новый элемент управления *элемента* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-639">To make filtering easier, a new *QueryExtender* control has been added in ASP.NET 4.</span></span> <span data-ttu-id="1f6af-640">Этот элемент управления может быть добавлен к элементам управления *EntityDataSource* или *LinqDataSource* для фильтрации данных, возвращаемых этими элементами управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-640">This control can be added to *EntityDataSource* or *LinqDataSource* controls in order to filter the data returned by these controls.</span></span> <span data-ttu-id="1f6af-641">Поскольку элемент управления *элемента* основан на LINQ, фильтр применяется к серверу базы данных до отправки данных на страницу, что приводит к очень эффективным операциям.</span><span class="sxs-lookup"><span data-stu-id="1f6af-641">Because the *QueryExtender* control relies on LINQ, the filter is applied on the database server before the data is sent to the page, which results in very efficient operations.</span></span>

<span data-ttu-id="1f6af-642">Элемент управления *элемента* поддерживает различные параметры фильтра.</span><span class="sxs-lookup"><span data-stu-id="1f6af-642">The *QueryExtender* control supports a variety of filter options.</span></span> <span data-ttu-id="1f6af-643">В следующих разделах описываются эти параметры и приводятся примеры их использования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-643">The following sections describe these options and provide examples of how to use them.</span></span>

#### <a name="search"></a><span data-ttu-id="1f6af-644">Поиск</span><span class="sxs-lookup"><span data-stu-id="1f6af-644">Search</span></span>

<span data-ttu-id="1f6af-645">Для параметра поиска элемент управления *элемента* выполняет поиск в указанных полях.</span><span class="sxs-lookup"><span data-stu-id="1f6af-645">For the search option, the *QueryExtender* control performs a search in specified fields.</span></span> <span data-ttu-id="1f6af-646">В следующем примере элемент управления использует текст, который был указан в элементе управления текстбокссеарч, и ищет его содержимое в `ProductName` столбцах и `Supplier.CompanyName` в данных, возвращаемых из элемента управления *LinqDataSource* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-646">In the following example, the control uses the text that is entered in the TextBoxSearch control and searches for its contents in the `ProductName` and `Supplier.CompanyName` columns in the data that is returned from the *LinqDataSource* control.</span></span>

[!code-aspx[Main](overview/samples/sample61.aspx)]

#### <a name="range"></a><span data-ttu-id="1f6af-647">Диапазон</span><span class="sxs-lookup"><span data-stu-id="1f6af-647">Range</span></span>

<span data-ttu-id="1f6af-648">Параметр range аналогичен параметру поиска, но указывает пару значений для определения диапазона.</span><span class="sxs-lookup"><span data-stu-id="1f6af-648">The range option is similar to the search option, but specifies a pair of values to define the range.</span></span> <span data-ttu-id="1f6af-649">В следующем примере элемент управления *элемента* ищет `UnitPrice` столбец в данных, возвращаемых элементом управления *LinqDataSource* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-649">In the following example, the *QueryExtender* control searches the `UnitPrice` column in the data returned from the *LinqDataSource* control.</span></span> <span data-ttu-id="1f6af-650">Диапазон считывается из элементов управления Текстбоксфром и Текстбоксто на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-650">The range is read from the TextBoxFrom and TextBoxTo controls on the page.</span></span>

[!code-aspx[Main](overview/samples/sample62.aspx)]

#### <a name="propertyexpression"></a><span data-ttu-id="1f6af-651">PropertyExpression</span><span class="sxs-lookup"><span data-stu-id="1f6af-651">PropertyExpression</span></span>

<span data-ttu-id="1f6af-652">Параметр выражения свойства позволяет определить сравнение со значением свойства.</span><span class="sxs-lookup"><span data-stu-id="1f6af-652">The property expression option lets you define a comparison to a property value.</span></span> <span data-ttu-id="1f6af-653">Если результатом вычисления выражения является *true*, то возвращаются анализируемые данные.</span><span class="sxs-lookup"><span data-stu-id="1f6af-653">If the expression evaluates to *true*, the data that is being examined is returned.</span></span> <span data-ttu-id="1f6af-654">В следующем примере элемент управления *элемента* фильтрует данные, сравнивая данные в `Discontinued` столбце со значением из элемента управления чеккбоксдисконтинуед на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-654">In the following example, the *QueryExtender* control filters data by comparing the data in the `Discontinued` column to the value from the CheckBoxDiscontinued control on the page.</span></span>

[!code-aspx[Main](overview/samples/sample63.aspx)]

#### <a name="customexpression"></a><span data-ttu-id="1f6af-655">кустомекспрессион</span><span class="sxs-lookup"><span data-stu-id="1f6af-655">CustomExpression</span></span>

<span data-ttu-id="1f6af-656">Наконец, можно указать пользовательское выражение для использования с элементом управления *элемента* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-656">Finally, you can specify a custom expression to use with the *QueryExtender* control.</span></span> <span data-ttu-id="1f6af-657">Этот параметр позволяет вызвать функцию на странице, которая определяет логику настраиваемого фильтра.</span><span class="sxs-lookup"><span data-stu-id="1f6af-657">This option lets you call a function in the page that defines custom filter logic.</span></span> <span data-ttu-id="1f6af-658">В следующем примере показано, как декларативно указать пользовательское выражение в элементе управления *элемента* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-658">The following example shows how to declaratively specify a custom expression in the *QueryExtender* control.</span></span>

[!code-aspx[Main](overview/samples/sample64.aspx)]

<span data-ttu-id="1f6af-659">В следующем примере показана пользовательская функция, которая вызывается элементом управления *элемента* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-659">The following example shows the custom function that is invoked by the *QueryExtender* control.</span></span> <span data-ttu-id="1f6af-660">В этом случае вместо использования запроса к базе данных, включающего предложение *WHERE* , код использует запрос LINQ для фильтрации данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-660">In this case, instead of using a database query that includes a *Where* clause, the code uses a LINQ query to filter the data.</span></span>

[!code-csharp[Main](overview/samples/sample65.cs)]

<span data-ttu-id="1f6af-661">В этих примерах показано только одно выражение, используемое в элементе управления *элемента* за раз.</span><span class="sxs-lookup"><span data-stu-id="1f6af-661">These examples show only one expression being used in the *QueryExtender* control at a time.</span></span> <span data-ttu-id="1f6af-662">Однако в элемент управления *элемента* можно включить несколько выражений.</span><span class="sxs-lookup"><span data-stu-id="1f6af-662">However, you can include multiple expressions inside the *QueryExtender* control.</span></span>

<a id="0.2__Toc253429265"></a><a id="0.2__Toc243304639"></a>

### <a name="html-encoded-code-expressions"></a><span data-ttu-id="1f6af-663">Выражения кода в кодировке HTML</span><span class="sxs-lookup"><span data-stu-id="1f6af-663">Html Encoded Code Expressions</span></span>

<span data-ttu-id="1f6af-664">Некоторые сайты ASP.NET (особенно с ASP.NET MVC) полагаются на `<%` использование =  `expression %>` синтаксиса (часто именуемого «Code кусочки») для записи некоторого текста в ответ.</span><span class="sxs-lookup"><span data-stu-id="1f6af-664">Some ASP.NET sites (especially with ASP.NET MVC) rely heavily on using `<%`= `expression %>` syntax (often called "code nuggets") to write some text to the response.</span></span> <span data-ttu-id="1f6af-665">При использовании выражений кода можно легко забыть HTML-кодировать текст, если текст поступает из пользовательского ввода, он может оставлять страницы открытыми для атаки с помощью XSS (межсайтовых сценариев).</span><span class="sxs-lookup"><span data-stu-id="1f6af-665">When you use code expressions, it is easy to forget to HTML-encode the text, If the text comes from user input, it can leave pages open to an XSS (Cross Site Scripting) attack.</span></span>

<span data-ttu-id="1f6af-666">В ASP.NET 4 представлен следующий новый синтаксис для выражений кода:</span><span class="sxs-lookup"><span data-stu-id="1f6af-666">ASP.NET 4 introduces the following new syntax for code expressions:</span></span>

[!code-aspx[Main](overview/samples/sample66.aspx)]

<span data-ttu-id="1f6af-667">При записи в ответ этот синтаксис по умолчанию использует кодировку HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-667">This syntax uses HTML encoding by default when writing to the response.</span></span> <span data-ttu-id="1f6af-668">Это новое выражение фактически преобразуется в следующее:</span><span class="sxs-lookup"><span data-stu-id="1f6af-668">This new expression effectively translates to the following:</span></span>

[!code-aspx[Main](overview/samples/sample67.aspx)]

<span data-ttu-id="1f6af-669">Например, &lt;%: Request ["UserInput"]%&gt; выполняет кодирование HTML для значения *request ["UserInput"]* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-669">For example, &lt;%: Request["UserInput"] %&gt; performs HTML encoding on the value of *Request["UserInput"]*.</span></span>

<span data-ttu-id="1f6af-670">Целью этой функции является возможность заменить все экземпляры старого синтаксиса новым синтаксисом, чтобы не приходилось выбирать на каждом шаге, который следует использовать.</span><span class="sxs-lookup"><span data-stu-id="1f6af-670">The goal of this feature is to make it possible to replace all instances of the old syntax with the new syntax so that you are not forced to decide at every step which one to use.</span></span> <span data-ttu-id="1f6af-671">Однако бывают случаи, в которых выводимый текст предназначен для HTML или уже закодирован. в этом случае это может привести к удвоенному кодированию.</span><span class="sxs-lookup"><span data-stu-id="1f6af-671">However, there are cases in which the text being output is meant to be HTML or is already encoded, in which case this could lead to double encoding.</span></span>

<span data-ttu-id="1f6af-672">В таких случаях в ASP.NET 4 появился новый интерфейс *ихтмлстринг*, а также конкретная реализация *хтмлстринг*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-672">For those cases, ASP.NET 4 introduces a new interface, *IHtmlString*, along with a concrete implementation, *HtmlString*.</span></span> <span data-ttu-id="1f6af-673">Экземпляры этих типов позволяют указать, что возвращаемое значение уже закодировано правильно (или просматривается иным образом) для отображения в виде HTML, поэтому значение не должно повторно кодироваться в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-673">Instances of these types let you indicate that the return value is already properly encoded (or otherwise examined) for displaying as HTML, and that therefore the value should not be HTML-encoded again.</span></span> <span data-ttu-id="1f6af-674">Например, следующее не должно быть (и не является) в кодировке HTML:</span><span class="sxs-lookup"><span data-stu-id="1f6af-674">For example, the following should not be (and is not) HTML encoded:</span></span>

[!code-aspx[Main](overview/samples/sample68.aspx)]

<span data-ttu-id="1f6af-675">Вспомогательные методы ASP.NET MVC 2 были обновлены для работы с этим новым синтаксисом, поэтому они не кодируются двойным кодированием, но только при использовании ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-675">ASP.NET MVC 2 helper methods have been updated to work with this new syntax so that they are not double encoded, but only when you are running ASP.NET 4.</span></span> <span data-ttu-id="1f6af-676">Этот новый синтаксис не работает при запуске приложения с помощью ASP.NET 3,5 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1f6af-676">This new syntax does not work when you run an application using ASP.NET 3.5 SP1.</span></span>

<span data-ttu-id="1f6af-677">Помните, что это не гарантирует защиту от атак XSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-677">Keep in mind that this does not guarantee protection from XSS attacks.</span></span> <span data-ttu-id="1f6af-678">Например, HTML-код, использующий значения атрибутов, которые не заключены в кавычки, может содержать вводимые пользователем данные, которые по-прежнему являются уязвимыми.</span><span class="sxs-lookup"><span data-stu-id="1f6af-678">For example, HTML that uses attribute values that are not in quotation marks can contain user input that is still susceptible.</span></span> <span data-ttu-id="1f6af-679">Обратите внимание, что выходные данные элементов управления ASP.NET и ASP.NETs вспомогательные методы MVC всегда содержат значения атрибутов в кавычках, что является рекомендуемым подходом.</span><span class="sxs-lookup"><span data-stu-id="1f6af-679">Note that the output of ASP.NET controls and ASP.NET MVC helpers always includes attribute values in quotation marks, which is the recommended approach.</span></span>

<span data-ttu-id="1f6af-680">Аналогичным образом, этот синтаксис не выполняет кодирование JavaScript, например, при создании строки JavaScript на основе вводимых пользователем данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-680">Likewise, this syntax does not perform JavaScript encoding, such as when you create a JavaScript string based on user input.</span></span>

<a id="0.2__Toc253429266"></a><a id="0.2__Toc243304640"></a>

### <a name="project-template-changes"></a><span data-ttu-id="1f6af-681">Изменения в шаблоне проекта</span><span class="sxs-lookup"><span data-stu-id="1f6af-681">Project Template Changes</span></span>

<span data-ttu-id="1f6af-682">В более ранних версиях ASP.NET при использовании Visual Studio для создания нового проекта веб-сайта или проекта веб-приложения результирующие проекты содержат только страницу Default. aspx, файл по умолчанию `Web.config` `App_Data` и папку, как показано ниже. приведен</span><span class="sxs-lookup"><span data-stu-id="1f6af-682">In earlier versions of ASP.NET, when you use Visual Studio to create a new Web Site project or Web Application project, the resulting projects contain only a Default.aspx page, a default `Web.config` file, and the `App_Data` folder, as shown in the following illustration:</span></span>

<a id="0.2_graphic1A"></a>![](overview/_static/image4.png)

<span data-ttu-id="1f6af-683">Visual Studio также поддерживает пустой тип проекта веб-сайта, который не содержит ни одного файла, как показано на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="1f6af-683">Visual Studio also supports an Empty Web Site project type, which contains no files at all, as shown in the following figure:</span></span>

<a id="0.2_graphic1B"></a>![](overview/_static/image5.png)

<span data-ttu-id="1f6af-684">В результате для начинающих существует очень небольшое руководство по созданию рабочего веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-684">The result is that for the beginner, there is very little guidance on how to build a production Web application.</span></span> <span data-ttu-id="1f6af-685">Таким образом, в ASP.NET 4 появились три новых шаблона: один для пустого проекта веб-приложения и по одному для веб-приложения и проекта веб-узла.</span><span class="sxs-lookup"><span data-stu-id="1f6af-685">Therefore, ASP.NET 4 introduces three new templates, one for an empty Web application project, and one each for a Web Application and Web Site project.</span></span>

#### <a name="empty-web-application-template"></a><span data-ttu-id="1f6af-686">Шаблон пустого веб-приложения</span><span class="sxs-lookup"><span data-stu-id="1f6af-686">Empty Web Application Template</span></span>

<span data-ttu-id="1f6af-687">Как видно из названия, шаблон пустого веб-приложения является разворачивающимся проектом веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-687">As the name suggests, the Empty Web Application template is a stripped-down Web Application project.</span></span> <span data-ttu-id="1f6af-688">Этот шаблон проекта выбирается из диалогового окна Новый проект Visual Studio, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="1f6af-688">You select this project template from the Visual Studio New Project dialog box, as shown in the following figure:</span></span>

[![](overview/_static/image7.png)](overview/_static/image6.png)

<span data-ttu-id="1f6af-689">([Щелкните, чтобы просмотреть изображение с полным размером](overview/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="1f6af-689">([Click to view full-size image](overview/_static/image8.png))</span></span>

<span data-ttu-id="1f6af-690">При создании пустого веб-приложения ASP.NET Visual Studio создает следующий макет папки:</span><span class="sxs-lookup"><span data-stu-id="1f6af-690">When you create an Empty ASP.NET Web Application, Visual Studio creates the following folder layout:</span></span>

<a id="0.2_graphic1D"></a>![](overview/_static/image9.png)

<span data-ttu-id="1f6af-691">Это похоже на пустой макет веб-узла из более ранних версий ASP.NET с одним исключением.</span><span class="sxs-lookup"><span data-stu-id="1f6af-691">This is similar to the Empty Web Site layout from earlier versions of ASP.NET, with one exception.</span></span> <span data-ttu-id="1f6af-692">В Visual Studio 2010 пустое веб-приложение и пустые проекты веб-сайтов содержат следующий `Web.config` минимальный файл, содержащий сведения, используемые Visual Studio для определения платформы, для которой предназначен проект.</span><span class="sxs-lookup"><span data-stu-id="1f6af-692">In Visual Studio 2010, Empty Web Application and Empty Web Site projects contain the following minimal `Web.config` file that contains information used by Visual Studio to identify the framework that the project is targeting:</span></span>

<a id="0.2_graphic1E"></a>![](overview/_static/image10.png)

<span data-ttu-id="1f6af-693">Без этого свойства *targetFramework* Visual Studio по умолчанию будет нацелено на .NET Framework 2,0, чтобы сохранить совместимость при открытии старых приложений.</span><span class="sxs-lookup"><span data-stu-id="1f6af-693">Without this *targetFramework* property, Visual Studio defaults to targeting the .NET Framework 2.0 in order to preserve compatibility when opening older applications.</span></span>

#### <a name="web-application-and-web-site-project-templates"></a><span data-ttu-id="1f6af-694">Шаблоны проектов веб-приложений и веб-сайтов</span><span class="sxs-lookup"><span data-stu-id="1f6af-694">Web Application and Web Site Project Templates</span></span>

<span data-ttu-id="1f6af-695">Два других новых шаблона проектов, поставляемых с Visual Studio 2010, содержат значительные изменения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-695">The other two new project templates that are shipped with Visual Studio 2010 contain major changes.</span></span> <span data-ttu-id="1f6af-696">На следующем рисунке показан макет проекта, который создается при создании нового проекта веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-696">The following figure shows the project layout that is created when you create a new Web Application project.</span></span> <span data-ttu-id="1f6af-697">(Макет для проекта веб-сайта практически идентичен.)</span><span class="sxs-lookup"><span data-stu-id="1f6af-697">(The layout for a Web Site project is virtually identical.)</span></span>

- <a id="0.2_graphic1F"></a>![](overview/_static/image11.png)

<span data-ttu-id="1f6af-698">Проект содержит несколько файлов, которые не были созданы в более ранних версиях.</span><span class="sxs-lookup"><span data-stu-id="1f6af-698">The project includes a number of files that were not created in earlier versions.</span></span> <span data-ttu-id="1f6af-699">Кроме того, в новом проекте веб-приложения настраивается базовая функциональность членства, что позволяет быстро приступить к защите доступа к новому приложению.</span><span class="sxs-lookup"><span data-stu-id="1f6af-699">In addition, the new Web Application project is configured with basic membership functionality, which lets you quickly get started in securing access to the new application.</span></span> <span data-ttu-id="1f6af-700">По `Web.config` этой причине файл для нового проекта включает записи, используемые для настройки членства, ролей и профилей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-700">Because of this inclusion, the `Web.config` file for the new project includes entries that are used to configure membership, roles, and profiles.</span></span> <span data-ttu-id="1f6af-701">В следующем примере показан `Web.config` файл для нового проекта веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-701">The following example shows the `Web.config` file for a new Web Application project.</span></span> <span data-ttu-id="1f6af-702">(В данном случае *roleManager* отключен.)</span><span class="sxs-lookup"><span data-stu-id="1f6af-702">(In this case, *roleManager* is disabled.)</span></span>

[![](overview/_static/image13.png)](overview/_static/image12.png)

<span data-ttu-id="1f6af-703">([Щелкните, чтобы просмотреть изображение с полным размером](overview/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="1f6af-703">([Click to view full-size image](overview/_static/image14.png))</span></span>

<span data-ttu-id="1f6af-704">Проект также содержит второй `Web.config` файл `Account` в каталоге.</span><span class="sxs-lookup"><span data-stu-id="1f6af-704">The project also contains a second `Web.config` file in the `Account` directory.</span></span> <span data-ttu-id="1f6af-705">Второй файл конфигурации предоставляет способ защиты доступа к странице ChangePassword. aspx для пользователей, не вошедших в систему.</span><span class="sxs-lookup"><span data-stu-id="1f6af-705">The second configuration file provides a way to secure access to the ChangePassword.aspx page for non-logged in users.</span></span> <span data-ttu-id="1f6af-706">В следующем примере показано содержимое второго `Web.config` файла.</span><span class="sxs-lookup"><span data-stu-id="1f6af-706">The following example shows the contents of the second `Web.config` file.</span></span>

![](overview/_static/image15.png)

<span data-ttu-id="1f6af-707">Страницы, созданные по умолчанию в новых шаблонах проектов, также содержат больше содержимого, чем в предыдущих версиях.</span><span class="sxs-lookup"><span data-stu-id="1f6af-707">The pages created by default in the new project templates also contain more content than in previous versions.</span></span> <span data-ttu-id="1f6af-708">Проект содержит главную страницу по умолчанию и файл CSS, а страница по умолчанию (Default. aspx) по умолчанию настроена на использование главной страницы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-708">The project contains a default master page and CSS file, and the default page (Default.aspx) is configured to use the master page by default.</span></span> <span data-ttu-id="1f6af-709">В результате при первом запуске веб-приложения или веб-сайта страница по умолчанию (Главная) уже работает.</span><span class="sxs-lookup"><span data-stu-id="1f6af-709">The result is that when you run the Web application or Web site for the first time, the default (home) page is already functional.</span></span> <span data-ttu-id="1f6af-710">На самом деле он похож на страницу по умолчанию, которая отображается при запуске нового приложения MVC.</span><span class="sxs-lookup"><span data-stu-id="1f6af-710">In fact, it is similar to the default page you see when you start up a new MVC application.</span></span>

[![](overview/_static/image17.png)](overview/_static/image16.png)

<span data-ttu-id="1f6af-711">([Щелкните, чтобы просмотреть изображение с полным размером](overview/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="1f6af-711">([Click to view full-size image](overview/_static/image18.png))</span></span>

<span data-ttu-id="1f6af-712">Цель этих изменений в шаблонах проектов — предоставить руководство по началу создания нового веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-712">The intention of these changes to the project templates is to provide guidance on how to start building a new Web application.</span></span> <span data-ttu-id="1f6af-713">В случае семантической корректной разметки, совместимой с XHTML 1,0, и с макетом, заданным с помощью CSS, страницы в шаблонах представляют собой рекомендации по созданию веб-приложений ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-713">With semantically correct, strict XHTML 1.0-compliant markup and with layout that is specified using CSS, the pages in the templates represent best practices for building ASP.NET 4 Web applications.</span></span> <span data-ttu-id="1f6af-714">Страницы по умолчанию также имеют макет с двумя столбцами, который можно легко настроить.</span><span class="sxs-lookup"><span data-stu-id="1f6af-714">The default pages also have a two-column layout that you can easily customize.</span></span>

<span data-ttu-id="1f6af-715">Например, предположим, что для нового веб-приложения необходимо изменить некоторые цвета и вставить логотип компании вместо логотипа приложения My ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-715">For example, imagine that for a new Web Application you want to change some of the colors and insert your company logo in place of the My ASP.NET Application logo.</span></span> <span data-ttu-id="1f6af-716">Для этого создайте новый каталог `Content` для хранения изображения логотипа:</span><span class="sxs-lookup"><span data-stu-id="1f6af-716">To do this, you create a new directory under `Content` to store your logo image:</span></span>

<a id="0.2_graphic23"></a>![](overview/_static/image19.png)

<span data-ttu-id="1f6af-717">Чтобы добавить изображение на страницу, откройте `Site.Master` файл, найдите место, где определен текст приложения My ASP.NET, и замените его элементом *Image* , для которого в качестве атрибута *src* задано новое изображение логотипа, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-717">To add the image to the page, you then open the `Site.Master` file, find where the My ASP.NET Application text is defined, and replace it with an *image* element whose *src* attribute is set to the new logo image, as in the following example:</span></span>

[![](overview/_static/image21.png)](overview/_static/image20.png)

<span data-ttu-id="1f6af-718">([Щелкните, чтобы просмотреть изображение с полным размером](overview/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="1f6af-718">([Click to view full-size image](overview/_static/image22.png))</span></span>

<span data-ttu-id="1f6af-719">Затем можно перейти в файл Site. CSS и изменить определения классов CSS, чтобы изменить цвет фона страницы, а также заголовок.</span><span class="sxs-lookup"><span data-stu-id="1f6af-719">You can then go into the Site.css file and modify CSS class definitions to change the background color of the page as well as that of the header.</span></span>

<span data-ttu-id="1f6af-720">В результате этих изменений можно отобразить настроенную домашнюю страницу с минимальными усилиями:</span><span class="sxs-lookup"><span data-stu-id="1f6af-720">The result of these changes is that you can display a customized home page with very little effort:</span></span>

[![](overview/_static/image24.png)](overview/_static/image23.png)

<span data-ttu-id="1f6af-721">([Щелкните, чтобы просмотреть изображение с полным размером](overview/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="1f6af-721">([Click to view full-size image](overview/_static/image25.png))</span></span>

<a id="0.2__Toc253429267"></a><a id="0.2__Toc243304641"></a>

### <a name="css-improvements"></a><span data-ttu-id="1f6af-722">Усовершенствования CSS</span><span class="sxs-lookup"><span data-stu-id="1f6af-722">CSS Improvements</span></span>

<span data-ttu-id="1f6af-723">Одной из основных областей работы в ASP.NET 4 было помощь в визуализации HTML, совместимого с последними стандартами HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-723">One of the major areas of work in ASP.NET 4 has been to help render HTML that is compliant with the latest HTML standards.</span></span> <span data-ttu-id="1f6af-724">Сюда входят изменения в том, как ASP.NET веб-серверные элементы управления используют стили CSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-724">This includes changes to how ASP.NET Web server controls use CSS styles.</span></span>

#### <a name="compatibility-setting-for-rendering"></a><span data-ttu-id="1f6af-725">Параметр совместимости для подготовки к просмотру</span><span class="sxs-lookup"><span data-stu-id="1f6af-725">Compatibility Setting for Rendering</span></span>

<span data-ttu-id="1f6af-726">По умолчанию, когда веб-приложение или веб-сайт предназначен для .NET Framework 4, атрибуту *контролрендерингкомпатибилитиверсион* элемента *pages* присваивается значение «4,0».</span><span class="sxs-lookup"><span data-stu-id="1f6af-726">By default, when a Web application or Web site targets the .NET Framework 4, the *controlRenderingCompatibilityVersion* attribute of the *pages* element is set to "4.0".</span></span> <span data-ttu-id="1f6af-727">Этот элемент определен в файле уровня `Web.config` компьютера, и по умолчанию применяется ко всем приложениям ASP.NET 4:</span><span class="sxs-lookup"><span data-stu-id="1f6af-727">This element is defined in the machine-level `Web.config` file and by default applies to all ASP.NET 4 applications:</span></span>

[!code-xml[Main](overview/samples/sample69.xml)]

<span data-ttu-id="1f6af-728">Значение для *контролрендерингкомпатибилити* — это строка, которая позволяет создавать новые определения версий в будущих выпусках.</span><span class="sxs-lookup"><span data-stu-id="1f6af-728">The value for *controlRenderingCompatibility* is a string, which allows potential new version definitions in future releases.</span></span> <span data-ttu-id="1f6af-729">В текущем выпуске для этого свойства поддерживаются следующие значения:</span><span class="sxs-lookup"><span data-stu-id="1f6af-729">In the current release, the following values are supported for this property:</span></span>

- <span data-ttu-id="1f6af-730">"3.5".</span><span class="sxs-lookup"><span data-stu-id="1f6af-730">"3.5".</span></span> <span data-ttu-id="1f6af-731">Этот параметр указывает устаревшую отрисовку и разметку.</span><span class="sxs-lookup"><span data-stu-id="1f6af-731">This setting indicates legacy rendering and markup.</span></span> <span data-ttu-id="1f6af-732">Разметка, отображаемая элементами управления, обеспечивает обратную совместимость в 100%, а параметр свойства *ксхтмлконформанце* учитывается.</span><span class="sxs-lookup"><span data-stu-id="1f6af-732">Markup rendered by controls is 100% backward compatible, and the setting of the *xhtmlConformance* property is honored.</span></span>
- <span data-ttu-id="1f6af-733">"4.0".</span><span class="sxs-lookup"><span data-stu-id="1f6af-733">"4.0".</span></span> <span data-ttu-id="1f6af-734">Если свойство имеет этот параметр, серверные веб-элементы управления ASP.NET выполняют следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1f6af-734">If the property has this setting, ASP.NET Web server controls do the following:</span></span>
- <span data-ttu-id="1f6af-735">Свойство *ксхтмлконформанце* всегда обрабатывается как "умеренное".</span><span class="sxs-lookup"><span data-stu-id="1f6af-735">The *xhtmlConformance* property is always treated as "Strict".</span></span> <span data-ttu-id="1f6af-736">В результате элементы управления визуализируют разметку XHTML 1,0.</span><span class="sxs-lookup"><span data-stu-id="1f6af-736">As a result, controls render XHTML 1.0 Strict markup.</span></span>
- <span data-ttu-id="1f6af-737">Отключение элементов управления, не являющихся входными данными, больше не отображает недопустимые стили.</span><span class="sxs-lookup"><span data-stu-id="1f6af-737">Disabling non-input controls no longer renders invalid styles.</span></span>
- <span data-ttu-id="1f6af-738">элементы *div* вокруг скрытых полей теперь являются стилями, поэтому они не влияют на созданные пользователем правила CSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-738">*div* elements around hidden fields are now styled so they do not interfere with user-created CSS rules.</span></span>
- <span data-ttu-id="1f6af-739">Элементы управления Menu отображают разметку, которая семантически верна и соответствует правилам специальных возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-739">Menu controls render markup that is semantically correct and compliant with accessibility guidelines.</span></span>
- <span data-ttu-id="1f6af-740">Элементы управления проверки не отображают встроенные стили.</span><span class="sxs-lookup"><span data-stu-id="1f6af-740">Validation controls do not render inline styles.</span></span>
- <span data-ttu-id="1f6af-741">Элементы управления, которые ранее отрисовывает границу = "0" (элементы управления, производные от элемента управления *таблицы* ASP.NET и элемента управления *Image* ASP.NET), больше не отображают этот атрибут.</span><span class="sxs-lookup"><span data-stu-id="1f6af-741">Controls that previously rendered border="0" (controls that derive from the ASP.NET *Table* control, and the ASP.NET *Image* control) no longer render this attribute.</span></span>

#### <a name="disabling-controls"></a><span data-ttu-id="1f6af-742">Отключение элементов управления</span><span class="sxs-lookup"><span data-stu-id="1f6af-742">Disabling Controls</span></span>

<span data-ttu-id="1f6af-743">В ASP.NET 3,5 с пакетом обновления 1 (SP1) и более ранних версиях платформа визуализирует атрибут Disabled в разметке HTML для любого элемента управления, для которого свойство *Enabled* установлено в *значение false*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-743">In ASP.NET 3.5 SP1 and earlier versions, the framework renders the *disabled* attribute in the HTML markup for any control whose *Enabled* property set to *false*.</span></span> <span data-ttu-id="1f6af-744">Однако в соответствии со спецификацией HTML 4,01 этот атрибут должен иметь только входные элементы.</span><span class="sxs-lookup"><span data-stu-id="1f6af-744">However, according to the HTML 4.01 specification, only *input* elements should have this attribute.</span></span>

<span data-ttu-id="1f6af-745">В ASP.NET 4 можно присвоить свойству *контролрендерингкомпатибилитиверсион* значение "3,5", как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-745">In ASP.NET 4, you can set the *controlRenderingCompatibilityVersion* property to "3.5", as in the following example:</span></span>

[!code-xml[Main](overview/samples/sample70.xml)]

<span data-ttu-id="1f6af-746">Разметку для элемента управления *Label* можно создать следующим образом, что отключает элемент управления:</span><span class="sxs-lookup"><span data-stu-id="1f6af-746">You might create markup for a *Label* control like the following, which disables the control:</span></span>

[!code-aspx[Main](overview/samples/sample71.aspx)]

<span data-ttu-id="1f6af-747">Элемент управления " *Метка* " выводит следующий код HTML:</span><span class="sxs-lookup"><span data-stu-id="1f6af-747">The *Label* control would render the following HTML:</span></span>

[!code-html[Main](overview/samples/sample72.html)]

<span data-ttu-id="1f6af-748">В ASP.NET 4 можно установить *контролрендерингкомпатибилитиверсион* в значение "4,0".</span><span class="sxs-lookup"><span data-stu-id="1f6af-748">In ASP.NET 4, you can set the *controlRenderingCompatibilityVersion* to "4.0".</span></span> <span data-ttu-id="1f6af-749">В этом случае только элементы управления, которые визуализируют входные элементы, будут отображать *отключенный* атрибут, если свойство *Enabled* элемента управления имеет значение *false*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-749">In that case, only controls that render *input* elements will render a *disabled* attribute when the control's *Enabled* property is set to *false*.</span></span> <span data-ttu-id="1f6af-750">Элементы управления, которые не отображают HTML-элементы *ввода* , вместо этого отображают атрибут *класса* , ссылающийся на класс CSS, который можно использовать для определения отключенного вида элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-750">Controls that do not render HTML *input* elements instead render a *class* attribute that references a CSS class that you can use to define a disabled look for the control.</span></span> <span data-ttu-id="1f6af-751">Например, элемент управления *Label* , показанный в предыдущем примере, создаст следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="1f6af-751">For example, the *Label* control shown in the earlier example would generate the following markup:</span></span>

[!code-html[Main](overview/samples/sample73.html)]

<span data-ttu-id="1f6af-752">Значение по умолчанию для класса, указанного для этого элемента управления, — "Аспнетдисаблед".</span><span class="sxs-lookup"><span data-stu-id="1f6af-752">The default value for the class that specified for this control is "aspNetDisabled".</span></span> <span data-ttu-id="1f6af-753">Однако это значение по умолчанию можно изменить, задав статическое свойство static *дисабледксскласс* класса *WebControl* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-753">However, you can change this default value by setting the static *DisabledCssClass* static property of the *WebControl* class.</span></span> <span data-ttu-id="1f6af-754">Для разработчиков элементов управления поведение, используемое для конкретного элемента управления, также может быть определено с помощью свойства *суппортсдисабледаттрибуте* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-754">For control developers, the behavior to use for a specific control can also be defined using the *SupportsDisabledAttribute* property.</span></span>

<a id="0.2__Toc253429268"></a><a id="0.2__Toc243304642"></a>

### <a name="hiding-div-elements-around-hidden-fields"></a><span data-ttu-id="1f6af-755">Скрытие элементов div вокруг скрытых полей</span><span class="sxs-lookup"><span data-stu-id="1f6af-755">Hiding div Elements Around Hidden Fields</span></span>

<span data-ttu-id="1f6af-756">ASP.NET 2,0 и более поздние версии визуализируют скрытые поля, связанные с системой (например, *скрытый* элемент, используемый для хранения сведений о состоянии представления) в элементе *div* , чтобы соответствовать стандарту XHTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-756">ASP.NET 2.0 and later versions render system-specific hidden fields (such as the *hidden* element used to store view state information) inside *div* element in order to comply with the XHTML standard.</span></span> <span data-ttu-id="1f6af-757">Однако это может привести к проблеме, когда правило CSS влияет на элементы *div* на странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-757">However, this can cause a problem when a CSS rule affects *div* elements on a page.</span></span> <span data-ttu-id="1f6af-758">Например, это может привести к появлению однопиксельной линии на странице вокруг скрытых элементов *div* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-758">For example, it can result in a one-pixel line appearing in the page around hidden *div* elements.</span></span> <span data-ttu-id="1f6af-759">В ASP.NET 4 элементы *div* , которые заключают скрытые поля, созданные ASP.NET, добавляют ссылку на класс CSS, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-759">In ASP.NET 4, *div* elements that enclose the hidden fields generated by ASP.NET add a CSS class reference as in the following example:</span></span>

[!code-html[Main](overview/samples/sample74.html)]

<span data-ttu-id="1f6af-760">Затем можно определить класс CSS, который применяется только к *скрытым* элементам, создаваемым ASP.NET, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-760">You can then define a CSS class that applies only to the *hidden* elements that are generated by ASP.NET, as in the following example:</span></span>

[!code-css[Main](overview/samples/sample75.css)]

<a id="0.2__Toc253429269"></a><a id="0.2__Toc243304643"></a>

### <a name="rendering-an-outer-table-for-templated-controls"></a><span data-ttu-id="1f6af-761">Отрисовка внешней таблицы для шаблонных элементов управления</span><span class="sxs-lookup"><span data-stu-id="1f6af-761">Rendering an Outer Table for Templated Controls</span></span>

<span data-ttu-id="1f6af-762">По умолчанию следующие элементы управления веб-сервера ASP.NET, поддерживающие шаблоны, автоматически упаковываются во внешнюю таблицу, которая используется для применения встроенных стилей:</span><span class="sxs-lookup"><span data-stu-id="1f6af-762">By default, the following ASP.NET Web server controls that support templates are automatically wrapped in an outer table that is used to apply inline styles:</span></span>

- <span data-ttu-id="1f6af-763">*C*</span><span class="sxs-lookup"><span data-stu-id="1f6af-763">*FormView*</span></span>
- <span data-ttu-id="1f6af-764">*Пользователей*</span><span class="sxs-lookup"><span data-stu-id="1f6af-764">*Login*</span></span>
- <span data-ttu-id="1f6af-765">*пассвордрековери*</span><span class="sxs-lookup"><span data-stu-id="1f6af-765">*PasswordRecovery*</span></span>
- <span data-ttu-id="1f6af-766">*Пароля*</span><span class="sxs-lookup"><span data-stu-id="1f6af-766">*ChangePassword*</span></span>
- <span data-ttu-id="1f6af-767">*Удается*</span><span class="sxs-lookup"><span data-stu-id="1f6af-767">*Wizard*</span></span>
- <span data-ttu-id="1f6af-768">*CreateUserWizard*</span><span class="sxs-lookup"><span data-stu-id="1f6af-768">*CreateUserWizard*</span></span>

<span data-ttu-id="1f6af-769">В эти элементы управления было добавлено новое свойство с именем *RenderOuterTable* , позволяющее удалить внешнюю таблицу из разметки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-769">A new property named *RenderOuterTable* has been added to these controls that allows the outer table to be removed from the markup.</span></span> <span data-ttu-id="1f6af-770">Например, рассмотрим следующий пример элемента управления *FormView* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-770">For example, consider the following example of a *FormView* control:</span></span>

[!code-aspx[Main](overview/samples/sample76.aspx)]

<span data-ttu-id="1f6af-771">Эта разметка отображает следующие выходные данные на странице, в том числе HTML-таблицу:</span><span class="sxs-lookup"><span data-stu-id="1f6af-771">This markup renders the following output to the page, which includes an HTML table:</span></span>

[!code-html[Main](overview/samples/sample77.html)]

<span data-ttu-id="1f6af-772">Чтобы предотвратить визуализацию таблицы, можно задать свойство *RenderOuterTable* элемента управления *FormView* , как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-772">To prevent the table from being rendered, you can set the *FormView* control's *RenderOuterTable* property, as in the following example:</span></span>

[!code-aspx[Main](overview/samples/sample78.aspx)]

<span data-ttu-id="1f6af-773">В предыдущем примере отображаются следующие выходные данные без элементов *Table*, *tr*и *TD* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-773">The previous example renders the following output, without the *table*, *tr*, and *td* elements:</span></span>

> <span data-ttu-id="1f6af-774">Content</span><span class="sxs-lookup"><span data-stu-id="1f6af-774">Content</span></span>

<span data-ttu-id="1f6af-775">Это улучшение позволяет упростить стиль стиля содержимого элемента управления с помощью CSS, поскольку элемент управления не визуализирует непредвиденные Теги.</span><span class="sxs-lookup"><span data-stu-id="1f6af-775">This enhancement can make it easier to style the content of the control with CSS, because no unexpected tags are rendered by the control.</span></span>

> [!NOTE]
> <span data-ttu-id="1f6af-776">Обратите внимание, что это изменение отключает поддержку функции автоформатирования в конструкторе Visual Studio 2010, поскольку больше нет элемента *Table* , который может размещать атрибуты стиля, созданные с помощью параметра автоматического форматирования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-776">Note This change disables support for the auto-format function in the Visual Studio 2010 designer, because there is no longer a *table* element that can host style attributes that are generated by the auto-format option.</span></span>

<a id="0.2__Toc253429270"></a><a id="0.2__Toc243304644"></a>

### <a name="listview-control-enhancements"></a><span data-ttu-id="1f6af-777">Улучшения элемента управления ListView</span><span class="sxs-lookup"><span data-stu-id="1f6af-777">ListView Control Enhancements</span></span>

<span data-ttu-id="1f6af-778">Элемент управления *ListView* стал проще в использовании в ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="1f6af-778">The *ListView* control has been made easier to use in ASP.NET 4.</span></span> <span data-ttu-id="1f6af-779">В более ранней версии элемента управления требовалось указать шаблон макета, содержащий серверный элемент управления с известным ИДЕНТИФИКАТОРом.</span><span class="sxs-lookup"><span data-stu-id="1f6af-779">The earlier version of the control required that you specify a layout template that contained a server control with a known ID.</span></span> <span data-ttu-id="1f6af-780">В следующей разметке показан типичный пример использования элемента управления *ListView* в ASP.NET 3,5.</span><span class="sxs-lookup"><span data-stu-id="1f6af-780">The following markup shows a typical example of how to use the *ListView* control in ASP.NET 3.5.</span></span>

[!code-aspx[Main](overview/samples/sample79.aspx)]

<span data-ttu-id="1f6af-781">В ASP.NET 4 для элемента управления *ListView* не требуется шаблон макета.</span><span class="sxs-lookup"><span data-stu-id="1f6af-781">In ASP.NET 4, the *ListView* control does not require a layout template.</span></span> <span data-ttu-id="1f6af-782">Разметка, показанная в предыдущем примере, может быть заменена следующей разметкой:</span><span class="sxs-lookup"><span data-stu-id="1f6af-782">The markup shown in the previous example can be replaced with the following markup:</span></span>

[!code-aspx[Main](overview/samples/sample80.aspx)]

<a id="0.2__Toc253429271"></a><a id="0.2__Toc243304645"></a>

### <a name="checkboxlist-and-radiobuttonlist-control-enhancements"></a><span data-ttu-id="1f6af-783">Улучшения элементов управления CheckBoxList и RadioButtonList</span><span class="sxs-lookup"><span data-stu-id="1f6af-783">CheckBoxList and RadioButtonList Control Enhancements</span></span>

<span data-ttu-id="1f6af-784">В ASP.NET 3,5 можно указать макет для *CheckBoxList* и *RadioButtonList* , используя следующие два параметра:</span><span class="sxs-lookup"><span data-stu-id="1f6af-784">In ASP.NET 3.5, you can specify layout for the *CheckBoxList* and *RadioButtonList* using the following two settings:</span></span>

- <span data-ttu-id="1f6af-785">*Flow*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-785">*Flow*.</span></span> <span data-ttu-id="1f6af-786">Элемент управления визуализирует элементы *span* , чтобы они содержали его содержимое.</span><span class="sxs-lookup"><span data-stu-id="1f6af-786">The control renders *span* elements to contain its content.</span></span>
- <span data-ttu-id="1f6af-787">*Таблица*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-787">*Table*.</span></span> <span data-ttu-id="1f6af-788">Элемент управления визуализирует элемент *Table* для хранения его содержимого.</span><span class="sxs-lookup"><span data-stu-id="1f6af-788">The control renders a *table* element to contain its content.</span></span>

<span data-ttu-id="1f6af-789">В следующем примере показана разметка для каждого из этих элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-789">The following example shows markup for each of these controls.</span></span>

[!code-aspx[Main](overview/samples/sample81.aspx)]

<span data-ttu-id="1f6af-790">По умолчанию элементы управления отображают HTML, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="1f6af-790">By default, the controls render HTML similar to the following:</span></span>

[!code-html[Main](overview/samples/sample82.html)]

<span data-ttu-id="1f6af-791">Поскольку эти элементы управления содержат списки элементов для визуализации семантически правильного кода HTML, они должны визуализировать свое содержимое с помощью элементов списка HTML (*Li*).</span><span class="sxs-lookup"><span data-stu-id="1f6af-791">Because these controls contain lists of items, to render semantically correct HTML, they should render their contents using HTML list (*li*) elements.</span></span> <span data-ttu-id="1f6af-792">Это упрощает для пользователей, которые читают веб-страницы с помощью вспомогательной технологии, и упрощает стиль элементов управления с помощью CSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-792">This makes it easier for users who read Web pages using assistive technology, and makes the controls easier to style using CSS.</span></span>

<span data-ttu-id="1f6af-793">В ASP.NET 4 элементы управления *CheckBoxList* и *RadioButtonList* поддерживают следующие новые значения для свойства *репеатлайаут* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-793">In ASP.NET 4, the *CheckBoxList* and *RadioButtonList* controls support the following new values for the *RepeatLayout* property:</span></span>

- <span data-ttu-id="1f6af-794">*OrderedList* — содержимое подготавливается к просмотру в виде элементов *Li* в элементе *OL* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-794">*OrderedList* – The content is rendered as *li* elements within an *ol* element.</span></span>
- <span data-ttu-id="1f6af-795">*Шаблонах unorderedlist* — содержимое подготавливается к просмотру в виде элементов *Li* в элементе *UL* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-795">*UnorderedList* – The content is rendered as *li* elements within a *ul* element.</span></span>

<span data-ttu-id="1f6af-796">В следующем примере показано, как использовать эти новые значения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-796">The following example shows how to use these new values.</span></span>

[!code-aspx[Main](overview/samples/sample83.aspx)]

<span data-ttu-id="1f6af-797">Приведенная выше разметка создает следующий код HTML:</span><span class="sxs-lookup"><span data-stu-id="1f6af-797">The preceding markup generates the following HTML:</span></span>

[!code-html[Main](overview/samples/sample84.html)]

> [!NOTE]
> <span data-ttu-id="1f6af-798">Примечание. Если задать для *репеатлайаут* значение *OrderedList* или *шаблонах unorderedlist*, свойство *RepeatDirection* больше не будет использоваться и вызовет исключение во время выполнения, если свойство было задано в разметке или коде.</span><span class="sxs-lookup"><span data-stu-id="1f6af-798">Note If you set *RepeatLayout* to *OrderedList* or *UnorderedList*, the *RepeatDirection* property can no longer be used and will throw an exception at run time if the property has been set within your markup or code.</span></span> <span data-ttu-id="1f6af-799">Свойство не будет иметь значения, так как визуальный макет этих элементов управления определяется с помощью CSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-799">The property would have no value because the visual layout of these controls is defined using CSS instead.</span></span>

<a id="0.2__Toc253429272"></a><a id="0.2__Toc243304646"></a>

### <a name="menu-control-improvements"></a><span data-ttu-id="1f6af-800">Улучшения элемента управления Menu</span><span class="sxs-lookup"><span data-stu-id="1f6af-800">Menu Control Improvements</span></span>

<span data-ttu-id="1f6af-801">До ASP.NET 4 элемент управления *Menu* отрисовывает ряд HTML-таблиц.</span><span class="sxs-lookup"><span data-stu-id="1f6af-801">Before ASP.NET 4, the *Menu* control rendered a series of HTML tables.</span></span> <span data-ttu-id="1f6af-802">Это усложняет применение стилей CSS за пределами встроенных свойств и также не соответствует стандартам специальных возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-802">This made it more difficult to apply CSS styles outside of setting inline properties and was also not compliant with accessibility standards.</span></span>

<span data-ttu-id="1f6af-803">В ASP.NET 4 элемент управления теперь отображает HTML с помощью семантической разметки, состоящей из неупорядоченного списка и элементов списка.</span><span class="sxs-lookup"><span data-stu-id="1f6af-803">In ASP.NET 4, the control now renders HTML using semantic markup that consists of an unordered list and list elements.</span></span> <span data-ttu-id="1f6af-804">В следующем примере показана разметка на странице ASP.NET для элемента управления *Menu* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-804">The following example shows markup in an ASP.NET page for the *Menu* control.</span></span>

[!code-aspx[Main](overview/samples/sample85.aspx)]

<span data-ttu-id="1f6af-805">При отрисовке страницы элемент управления создает следующий код HTML (для ясности не был указан фрагмент кода OnClick):</span><span class="sxs-lookup"><span data-stu-id="1f6af-805">When the page renders, the control produces the following HTML (the *onclick* code has been omitted for clarity):</span></span>

[!code-html[Main](overview/samples/sample86.html)]

<span data-ttu-id="1f6af-806">Помимо улучшений отрисовки, Навигация с помощью клавиатуры в меню была улучшена благодаря управлению фокусом.</span><span class="sxs-lookup"><span data-stu-id="1f6af-806">In addition to rendering improvements, keyboard navigation of the menu has been improved using focus management.</span></span> <span data-ttu-id="1f6af-807">Когда элемент управления *Menu* получает фокус, для навигации по элементам можно использовать клавиши со стрелками.</span><span class="sxs-lookup"><span data-stu-id="1f6af-807">When the *Menu* control gets focus, you can use the arrow keys to navigate elements.</span></span> <span data-ttu-id="1f6af-808">Теперь элемент управления Menu (« *меню»* ) также присоединяет доступные широкие роли и атрибуты Интернет-приложений (ARIA)[, использова в](http://www.w3.org/TR/wai-aria-practices/#menu "меню рекомендации по ARIA")для улучшения специальных возможностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-808">The *Menu* control also now attaches accessible rich internet applications (ARIA) roles and attributes follo[wing the](http://www.w3.org/TR/wai-aria-practices/#menu "Menu ARIA guidelines")for improved accessibility.</span></span>

<span data-ttu-id="1f6af-809">Стили для элемента управления Menu отображаются в блоке style в верхней части страницы, а не в строке с готовыми элементами HTML.</span><span class="sxs-lookup"><span data-stu-id="1f6af-809">Styles for the menu control are rendered in a style block at the top of the page, rather than in line with the rendered HTML elements.</span></span> <span data-ttu-id="1f6af-810">Если вы хотите получить полный контроль над стилями элемента управления, можно установить новое свойство *инклудестилеблокк* в *значение false*, в этом случае блок style не будет выдаваться.</span><span class="sxs-lookup"><span data-stu-id="1f6af-810">If you want to take full control over the styling for the control, you can set the new *IncludeStyleBlock* property to *false*, in which case the style block is not emitted.</span></span> <span data-ttu-id="1f6af-811">Одним из способов использования этого свойства является использование функции автоматического форматирования в конструкторе Visual Studio для установки внешнего вида меню.</span><span class="sxs-lookup"><span data-stu-id="1f6af-811">One way to use this property is to use the auto-format feature in the Visual Studio designer to set the appearance of the menu.</span></span> <span data-ttu-id="1f6af-812">Затем можно запустить страницу, открыть источник страницы, а затем скопировать готовый блок стиля во внешний файл CSS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-812">You can then run the page, open the page source, and then copy the rendered style block to an external CSS file.</span></span> <span data-ttu-id="1f6af-813">В Visual Studio отмените стиль и задайте для *инклудестилеблокк* значение *false*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-813">In Visual Studio, undo the styling and set *IncludeStyleBlock* to *false*.</span></span> <span data-ttu-id="1f6af-814">В результате внешний вид меню определяется с помощью стилей во внешней таблице стилей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-814">The result is that the menu appearance is defined using styles in an external style sheet.</span></span>

<a id="0.2__Toc253429273"></a><a id="0.2__Toc243304647"></a>

### <a name="wizard-and-createuserwizard-controls"></a><span data-ttu-id="1f6af-815">Мастер и элементы управления CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="1f6af-815">Wizard and CreateUserWizard Controls</span></span>

<span data-ttu-id="1f6af-816">*Мастер* ASP.NET и элементы управления *CreateUserWizard* поддерживают шаблоны, позволяющие определить HTML-код, который они отображают.</span><span class="sxs-lookup"><span data-stu-id="1f6af-816">The ASP.NET *Wizard* and *CreateUserWizard* controls support templates that let you define the HTML that they render.</span></span> <span data-ttu-id="1f6af-817">(*CreateUserWizard* является производным от *мастера*.) В следующем примере показана разметка для полностью шаблонного элемента управления *CreateUserWizard* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-817">(*CreateUserWizard* derives from *Wizard*.) The following example shows the markup for a fully templated *CreateUserWizard* control:</span></span>

[!code-aspx[Main](overview/samples/sample87.aspx)]

<span data-ttu-id="1f6af-818">Элемент управления визуализирует HTML-код, аналогичный следующему:</span><span class="sxs-lookup"><span data-stu-id="1f6af-818">The control renders HTML similar to the following:</span></span>

[!code-html[Main](overview/samples/sample88.html)]

<span data-ttu-id="1f6af-819">В ASP.NET 3,5 с пакетом обновления 1 (SP1), хотя вы можете изменить содержимое шаблона, вы по-прежнему имеете ограниченный контроль над выходными данными элемента управления *Wizard* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-819">In ASP.NET 3.5 SP1, although you can change the template contents, you still have limited control over the output of the *Wizard* control.</span></span> <span data-ttu-id="1f6af-820">В ASP.NET 4 можно создать шаблон *LayoutTemplate* и вставить элементы управления *PlaceHolder* (с помощью зарезервированных имен), чтобы указать, как должен отображаться *элемент управления мастера* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-820">In ASP.NET 4, you can create a *LayoutTemplate* template and insert *PlaceHolder* controls (using reserved names) to specify how you want the *Wizard control* to render.</span></span> <span data-ttu-id="1f6af-821">Это показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-821">The following example shows this:</span></span>

[!code-aspx[Main](overview/samples/sample89.aspx)]

<span data-ttu-id="1f6af-822">Пример содержит следующие именованные заполнители в элементе *LayoutTemplate* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-822">The example contains the following named placeholders in the *LayoutTemplate* element:</span></span>

- <span data-ttu-id="1f6af-823">*хеадерплацехолдер* — во время выполнения это заменяется содержимым элемента *HeaderTemplate* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-823">*headerPlaceholder* – At run time, this is replaced by the contents of the *HeaderTemplate* element.</span></span>
- <span data-ttu-id="1f6af-824">*сидебарплацехолдер* — во время выполнения это заменяется содержимым элемента *SideBarTemplate* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-824">*sideBarPlaceholder* – At run time, this is replaced by the contents of the *SideBarTemplate* element.</span></span>
- <span data-ttu-id="1f6af-825">*визардстепплацехолдер* — во время выполнения это заменяется содержимым элемента *визардстептемплате* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-825">*wizardStepPlaceHolder* – At run time, this is replaced by the contents of the *WizardStepTemplate* element.</span></span>
- <span data-ttu-id="1f6af-826">*навигатионплацехолдер* — во время выполнения это заменяется любыми заданными вами шаблонами навигации.</span><span class="sxs-lookup"><span data-stu-id="1f6af-826">*navigationPlaceholder* – At run time, this is replaced by any navigation templates that you have defined.</span></span>

<span data-ttu-id="1f6af-827">Разметка в примере, в которой используются заполнители, отображает следующий HTML (без содержимого, фактически определенного в шаблонах):</span><span class="sxs-lookup"><span data-stu-id="1f6af-827">The markup in the example that uses placeholders renders the following HTML (without the content actually defined in the templates):</span></span>

[!code-html[Main](overview/samples/sample90.html)]

<span data-ttu-id="1f6af-828">Единственный HTML, который теперь не является определяемым пользователем, — это элемент *span* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-828">The only HTML that is now not user-defined is a *span* element.</span></span> <span data-ttu-id="1f6af-829">(Мы предполагаем, что в будущих выпусках даже элемент *span* не будет визуализирован.) Теперь вы получаете полный контроль над содержимым, созданным элементом управления *мастера* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-829">(We anticipate that in future releases, even the *span* element will not be rendered.) This now gives you full control over virtually all the content that is generated by the *Wizard* control.</span></span>

<a id="0.2_dyndata"></a><a id="0.2__Toc253429274"></a><a id="0.2__Toc243304648"></a><a id="0.2__Toc224729042"></a>

## <a name="aspnet-mvc"></a><span data-ttu-id="1f6af-830">ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="1f6af-830">ASP.NET MVC</span></span>

<span data-ttu-id="1f6af-831">ASP.NET MVC впервые появился в качестве надстройки для ASP.NET 3,5 с пакетом обновления 1 (SP1) в марте 2009.</span><span class="sxs-lookup"><span data-stu-id="1f6af-831">ASP.NET MVC was introduced as an add-on framework to ASP.NET 3.5 SP1 in March 2009.</span></span> <span data-ttu-id="1f6af-832">Visual Studio 2010 включает ASP.NET MVC 2, который включает в себя новые функции и возможности.</span><span class="sxs-lookup"><span data-stu-id="1f6af-832">Visual Studio 2010 includes ASP.NET MVC 2, which includes new features and capabilities.</span></span>

<a id="0.2__Toc253429275"></a>

### <a name="areas-support"></a><span data-ttu-id="1f6af-833">Поддержка областей</span><span class="sxs-lookup"><span data-stu-id="1f6af-833">Areas Support</span></span>

<span data-ttu-id="1f6af-834">Области позволяют группировать контроллеры и представления в разделы крупного приложения с относительным уровнем изоляции от других разделов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-834">Areas let you group controllers and views into sections of a large application in relative isolation from other sections.</span></span> <span data-ttu-id="1f6af-835">Каждая область может быть реализована как отдельный проект ASP.NET MVC, на который затем может ссылаться основное приложение.</span><span class="sxs-lookup"><span data-stu-id="1f6af-835">Each area can be implemented as a separate ASP.NET MVC project that can then be referenced by the main application.</span></span> <span data-ttu-id="1f6af-836">Это помогает управлять сложностью при создании большого приложения и упрощает совместную работу нескольких групп в одном приложении.</span><span class="sxs-lookup"><span data-stu-id="1f6af-836">This helps manage complexity when you build a large application and makes it easier for multiple teams to work together on a single application.</span></span>

<a id="0.2__Toc253429276"></a>

### <a name="data-annotation-attribute-validation-support"></a><span data-ttu-id="1f6af-837">Поддержка проверки атрибутов в заметках данных</span><span class="sxs-lookup"><span data-stu-id="1f6af-837">Data-Annotation Attribute Validation Support</span></span>

<span data-ttu-id="1f6af-838">Атрибуты примечаний позволяют присоединить логику проверки к модели с помощью атрибутов метаданных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-838">*DataAnnotations* attributes let you attach validation logic to a model by using metadata attributes.</span></span> <span data-ttu-id="1f6af-839">Атрибуты примечаний появились в ASP.NET платформа динамических данных в ASP.NET 3,5 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1f6af-839">*DataAnnotations* attributes were introduced in ASP.NET Dynamic Data in ASP.NET 3.5 SP1.</span></span> <span data-ttu-id="1f6af-840">Эти атрибуты были интегрированы в связыватель модели по умолчанию и предоставляют управляемые метаданными средства для проверки вводимых пользователем данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-840">These attributes have been integrated into the default model binder and provide a metadata-driven means to validate user input.</span></span>

<a id="0.2__Toc253429277"></a>

### <a name="templated-helpers"></a><span data-ttu-id="1f6af-841">Шаблоны вспомогательных функций</span><span class="sxs-lookup"><span data-stu-id="1f6af-841">Templated Helpers</span></span>

<span data-ttu-id="1f6af-842">Шаблонные вспомогательные методы позволяют автоматически связывать шаблоны правки и вывода с типами данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-842">Templated helpers let you automatically associate edit and display templates with data types.</span></span> <span data-ttu-id="1f6af-843">Например, можно использовать вспомогательный метод шаблона, чтобы указать, что элемент пользовательского интерфейса средства выбора даты автоматически визуализируется для значения *System. DateTime* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-843">For example, you can use a template helper to specify that a date-picker UI element is automatically rendered for a *System.DateTime* value.</span></span> <span data-ttu-id="1f6af-844">Это похоже на шаблоны полей в ASP.NET платформа динамических данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-844">This is similar to field templates in ASP.NET Dynamic Data.</span></span>

<span data-ttu-id="1f6af-845">Вспомогательные методы *HTML. едиторфор* и *HTML. DisplayFor* имеют встроенную поддержку визуализации стандартных типов данных, а также сложных объектов с несколькими свойствами.</span><span class="sxs-lookup"><span data-stu-id="1f6af-845">The *Html.EditorFor* and *Html.DisplayFor* helper methods have built-in support for rendering standard data types as well as complex objects with multiple properties.</span></span> <span data-ttu-id="1f6af-846">Они также настраивают отрисовку, позволяя применять атрибуты аннотации данных, такие как *DisplayName* и *скаффолдколумн* , к объекту *ViewModel* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-846">They also customize rendering by letting you apply data-annotation attributes like *DisplayName* and *ScaffoldColumn* to the *ViewModel* object.</span></span>

<span data-ttu-id="1f6af-847">Часто требуется настроить вывод вспомогательных функций пользовательского интерфейса, а также получить полный контроль над созданными данными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-847">Often you want to customize the output from UI helpers even further and have complete control over what is generated.</span></span> <span data-ttu-id="1f6af-848">Вспомогательные методы *HTML. едиторфор* и *HTML. DisplayFor* поддерживают это с помощью механизма шаблонов, который позволяет определять внешние шаблоны, которые могут переопределять и контролировать отображаемые выходные данные.</span><span class="sxs-lookup"><span data-stu-id="1f6af-848">The *Html.EditorFor* and *Html.DisplayFor* helper methods support this using a templating mechanism that lets you define external templates that can override and control the output rendered.</span></span> <span data-ttu-id="1f6af-849">Шаблоны можно отрисовывать по отдельности для класса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-849">The templates can be rendered individually for a class.</span></span>

<a id="0.2__Toc253429278"></a><a id="0.2__Toc243304649"></a>

## <a name="dynamic-data"></a><span data-ttu-id="1f6af-850">динамические данные</span><span class="sxs-lookup"><span data-stu-id="1f6af-850">Dynamic Data</span></span>

<span data-ttu-id="1f6af-851">Платформа динамических данных был представлен в выпуске .NET Framework 3,5 с пакетом обновления 1 (SP1) в середине 2008.</span><span class="sxs-lookup"><span data-stu-id="1f6af-851">Dynamic Data was introduced in the .NET Framework 3.5 SP1 release in mid-2008.</span></span> <span data-ttu-id="1f6af-852">Эта функция предоставляет множество улучшений для создания приложений на основе данных, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="1f6af-852">This feature provides many enhancements for creating data-driven applications, including the following:</span></span>

- <span data-ttu-id="1f6af-853">Интерфейс RAD для быстрого создания веб-сайта, управляемого данными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-853">A RAD experience for quickly building a data-driven Web site.</span></span>
- <span data-ttu-id="1f6af-854">Автоматическая проверка, основанная на ограничениях, определенных в модели данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-854">Automatic validation that is based on constraints defined in the data model.</span></span>
- <span data-ttu-id="1f6af-855">Возможность легко изменять разметку, создаваемую для полей в элементах управления *GridView* и *DetailsView* , с помощью шаблонов полей, которые являются частью проекта платформа динамических данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-855">The ability to easily change the markup that is generated for fields in the *GridView* and *DetailsView* controls by using field templates that are part of your Dynamic Data project.</span></span>

> [!NOTE]
> <span data-ttu-id="1f6af-856">Примечание. Дополнительные сведения см. в [документации по платформа динамических данных](https://msdn.microsoft.com/library/cc488545.aspx) в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="1f6af-856">Note For more information, see the [Dynamic Data documentation](https://msdn.microsoft.com/library/cc488545.aspx) in the MSDN Library.</span></span>

<span data-ttu-id="1f6af-857">Для ASP.NET 4 платформа динамических данных был усовершенствован, чтобы предоставить разработчикам еще больше возможностей для быстрого создания веб-узлов, управляемых данными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-857">For ASP.NET 4, Dynamic Data has been enhanced to give developers even more power for quickly building data-driven Web sites.</span></span>

<a id="0.2__Toc253429279"></a><a id="0.2__Toc243304650"></a>

### <a name="enabling-dynamic-data-for-existing-projects"></a><span data-ttu-id="1f6af-858">Включение платформа динамических данных для существующих проектов</span><span class="sxs-lookup"><span data-stu-id="1f6af-858">Enabling Dynamic Data for Existing Projects</span></span>

<span data-ttu-id="1f6af-859">Платформа динамических данных функции, поставляемые в .NET Framework 3,5 с пакетом обновления 1 (SP1), добавлены следующие новые функции:</span><span class="sxs-lookup"><span data-stu-id="1f6af-859">Dynamic Data features that shipped in the .NET Framework 3.5 SP1 brought new features such as the following:</span></span>

- <span data-ttu-id="1f6af-860">Шаблоны полей — предоставляют шаблоны на основе типов данных для элементов управления с привязкой к данным.</span><span class="sxs-lookup"><span data-stu-id="1f6af-860">Field templates – These provide data-type-based templates for data-bound controls.</span></span> <span data-ttu-id="1f6af-861">Шаблоны полей предоставляют более простой способ настройки вида элементов управления данными, чем использование полей шаблона для каждого поля.</span><span class="sxs-lookup"><span data-stu-id="1f6af-861">Field templates provide a simpler way to customize the look of data controls than using template fields for each field.</span></span>
- <span data-ttu-id="1f6af-862">Проверка — платформа динамических данных позволяет использовать атрибуты в классах данных для указания проверки распространенных сценариев, таких как обязательные поля, проверка диапазона, проверка типов, сопоставление шаблонов с помощью регулярных выражений и пользовательская проверка.</span><span class="sxs-lookup"><span data-stu-id="1f6af-862">Validation – Dynamic Data lets you use attributes on data classes to specify validation for common scenarios like required fields, range checking, type checking, pattern matching using regular expressions, and custom validation.</span></span> <span data-ttu-id="1f6af-863">Проверка обеспечивается элементами управления данными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-863">Validation is enforced by the data controls.</span></span>

<span data-ttu-id="1f6af-864">Однако для этих функций предъявляются следующие требования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-864">However, these features had the following requirements:</span></span>

- <span data-ttu-id="1f6af-865">Уровень доступа к данным должен быть основан на Entity Framework или LINQ to SQL.</span><span class="sxs-lookup"><span data-stu-id="1f6af-865">The data-access layer had to be based on Entity Framework or LINQ to SQL.</span></span>
- <span data-ttu-id="1f6af-866">Единственными элементами управления источниками данных, поддерживаемыми для этих функций, являются элементы управления *EntityDataSource* или *LinqDataSource* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-866">The only data source controls supported for these features were the *EntityDataSource* or *LinqDataSource* controls.</span></span>
- <span data-ttu-id="1f6af-867">Функции, необходимые для веб-проекта, созданного с помощью платформа динамических данных или платформа динамических данных шаблонов сущностей, для получения всех файлов, необходимых для поддержки этой функции.</span><span class="sxs-lookup"><span data-stu-id="1f6af-867">The features required a Web project that had been created using the Dynamic Data or Dynamic Data Entities templates in order to have all the files that were required to support the feature.</span></span>

<span data-ttu-id="1f6af-868">Основной целью поддержки платформа динамических данных в ASP.NET 4 является включение новых функций платформа динамических данных для любого приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-868">A major goal of Dynamic Data support in ASP.NET 4 is to enable the new functionality of Dynamic Data for any ASP.NET application.</span></span> <span data-ttu-id="1f6af-869">В следующем примере показана разметка для элементов управления, которые могут использовать преимущества платформа динамических данных функциональных возможностей на существующей странице.</span><span class="sxs-lookup"><span data-stu-id="1f6af-869">The following example shows markup for controls that can take advantage of Dynamic Data functionality in an existing page.</span></span>

[!code-aspx[Main](overview/samples/sample91.aspx)]

<span data-ttu-id="1f6af-870">В коде для страницы необходимо добавить следующий код, чтобы включить поддержку платформа динамических данных для этих элементов управления:</span><span class="sxs-lookup"><span data-stu-id="1f6af-870">In the code for the page, the following code must be added in order to enable Dynamic Data support for these controls:</span></span>

[!code-csharp[Main](overview/samples/sample92.cs)]

<span data-ttu-id="1f6af-871">Когда элемент управления *GridView* находится в режиме редактирования, платформа динамических данных автоматически проверяет правильность вводимых данных в соответствующем формате.</span><span class="sxs-lookup"><span data-stu-id="1f6af-871">When the *GridView* control is in edit mode, Dynamic Data automatically validates that the data entered is in the proper format.</span></span> <span data-ttu-id="1f6af-872">Если это не так, выводится сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="1f6af-872">If it is not, an error message is displayed.</span></span>

<span data-ttu-id="1f6af-873">Эта функция также предоставляет другие преимущества, например возможность указывать значения по умолчанию для режима вставки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-873">This functionality also provides other benefits, such as being able to specify default values for insert mode.</span></span> <span data-ttu-id="1f6af-874">Без платформа динамических данных для реализации значения по умолчанию для поля необходимо присоединиться к событию, определить элемент управления (с помощью *финдконтрол*) и задать его значение.</span><span class="sxs-lookup"><span data-stu-id="1f6af-874">Without Dynamic Data, to implement a default value for a field, you must attach to an event, locate the control (using *FindControl*), and set its value.</span></span> <span data-ttu-id="1f6af-875">В ASP.NET 4 вызов *енаблединамикдата* поддерживает второй параметр, который позволяет передавать значения по умолчанию для любого поля объекта, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-875">In ASP.NET 4, the *EnableDynamicData* call supports a second parameter that lets you pass default values for any field on the object, as shown in this example:</span></span>

[!code-csharp[Main](overview/samples/sample93.cs)]

<a id="0.2__Toc224729043"></a><a id="0.2__Toc253429280"></a><a id="0.2__Toc243304651"></a>

### <a name="declarative-dynamicdatamanager-control-syntax"></a><span data-ttu-id="1f6af-876">Декларативный синтаксис элемента управления DynamicDataManager</span><span class="sxs-lookup"><span data-stu-id="1f6af-876">Declarative DynamicDataManager Control Syntax</span></span>

<span data-ttu-id="1f6af-877">Элемент управления *DynamicDataManager* был усовершенствован, поэтому его можно настроить декларативно, как и большинство элементов управления в ASP.NET, а не только в коде.</span><span class="sxs-lookup"><span data-stu-id="1f6af-877">The *DynamicDataManager* control has been enhanced so that you can configure it declaratively, as with most controls in ASP.NET, instead of only in code.</span></span> <span data-ttu-id="1f6af-878">Разметка для элемента управления *DynamicDataManager* выглядит как в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="1f6af-878">The markup for the *DynamicDataManager* control looks like the following example:</span></span>

[!code-aspx[Main](overview/samples/sample94.aspx)]

<span data-ttu-id="1f6af-879">Эта разметка включает платформа динамических данныхное поведение для элемента управления GridView1, на который указывает ссылка в разделе " *элементы управления* " элемента управления *DynamicDataManager* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-879">This markup enables Dynamic Data behavior for the GridView1 control that is referenced in the *DataControls* section of the *DynamicDataManager* control.</span></span>

<a id="0.2__Toc224729044"></a><a id="0.2__Toc253429281"></a><a id="0.2__Toc243304652"></a>

### <a name="entity-templates"></a><span data-ttu-id="1f6af-880">Шаблоны сущностей</span><span class="sxs-lookup"><span data-stu-id="1f6af-880">Entity Templates</span></span>

<span data-ttu-id="1f6af-881">Шаблоны сущностей предлагают новый способ настройки макета данных без необходимости создавать пользовательскую страницу.</span><span class="sxs-lookup"><span data-stu-id="1f6af-881">Entity templates offer a new way to customize the layout of data without requiring you to create a custom page.</span></span> <span data-ttu-id="1f6af-882">Шаблоны страниц используют элемент управления *FormView* (вместо элемента управления *DetailsView* , который используется в шаблонах страниц в более ранних версиях платформа динамических данных) и элемент управления *DynamicControl* для отрисовки шаблонов сущностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-882">Page templates use the *FormView* control (instead of the *DetailsView* control, as used in page templates in earlier versions of Dynamic Data) and the *DynamicEntity* control to render Entity templates.</span></span> <span data-ttu-id="1f6af-883">Это обеспечивает более полный контроль над разметкой, отображаемой платформа динамических данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-883">This gives you more control over the markup that is rendered by Dynamic Data.</span></span>

<span data-ttu-id="1f6af-884">В следующем списке показан новый макет каталога проекта, содержащий шаблоны сущностей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-884">The following list shows the new project directory layout that contains entity templates:</span></span>

[!code-console[Main](overview/samples/sample95.cmd)]

<span data-ttu-id="1f6af-885">`EntityTemplate` Каталог содержит шаблоны для отображения объектов модели данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-885">The `EntityTemplate` directory contains templates for how to display data model objects.</span></span> <span data-ttu-id="1f6af-886">По умолчанию объекты подготавливаются с помощью `Default.ascx` шаблона, который предоставляет разметку, которая выглядит так же, как разметка, созданная элементом управления *DetailsView* , используемой платформа динамических данных в ASP.NET 3,5 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1f6af-886">By default, objects are rendered by using the `Default.ascx` template, which provides markup that looks just like the markup created by the *DetailsView* control used by Dynamic Data in ASP.NET 3.5 SP1.</span></span> <span data-ttu-id="1f6af-887">В следующем примере показана разметка для `Default.ascx` элемента управления:</span><span class="sxs-lookup"><span data-stu-id="1f6af-887">The following example shows the markup for the `Default.ascx` control:</span></span>

[!code-aspx[Main](overview/samples/sample96.aspx)]

<span data-ttu-id="1f6af-888">Шаблоны по умолчанию можно изменять для изменения внешнего вида и поведения всего сайта.</span><span class="sxs-lookup"><span data-stu-id="1f6af-888">The default templates can be edited to change the look and feel for the entire site.</span></span> <span data-ttu-id="1f6af-889">Существуют шаблоны для операций вывода, редактирования и вставки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-889">There are templates for display, edit, and insert operations.</span></span> <span data-ttu-id="1f6af-890">Новые шаблоны можно добавлять на основе имени объекта данных, чтобы изменить внешний вид всего одного типа объекта.</span><span class="sxs-lookup"><span data-stu-id="1f6af-890">New templates can be added based on the name of the data object in order to change the look and feel of just one type of object.</span></span> <span data-ttu-id="1f6af-891">Например, можно добавить следующий шаблон:</span><span class="sxs-lookup"><span data-stu-id="1f6af-891">For example, you can add the following template:</span></span>

[!code-console[Main](overview/samples/sample97.cmd)]

<span data-ttu-id="1f6af-892">Шаблон может содержать следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="1f6af-892">The template might contain the following markup:</span></span>

[!code-aspx[Main](overview/samples/sample98.aspx)]

<span data-ttu-id="1f6af-893">Новые шаблоны сущностей отображаются на странице с помощью нового элемента управления *DynamicControl* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-893">The new entity templates are displayed on a page by using the new *DynamicEntity* control.</span></span> <span data-ttu-id="1f6af-894">Во время выполнения этот элемент управления заменяется содержимым шаблона сущности.</span><span class="sxs-lookup"><span data-stu-id="1f6af-894">At run time, this control is replaced with the contents of the entity template.</span></span> <span data-ttu-id="1f6af-895">В следующей разметке показан элемент управления FormView `Detail.aspx` в шаблоне страницы, который использует шаблон сущности.</span><span class="sxs-lookup"><span data-stu-id="1f6af-895">The following markup shows the *FormView* control in the `Detail.aspx` page template that uses the entity template.</span></span> <span data-ttu-id="1f6af-896">Обратите внимание на элемент *DynamicControl* в разметке.</span><span class="sxs-lookup"><span data-stu-id="1f6af-896">Notice the *DynamicEntity* element in the markup.</span></span>

[!code-aspx[Main](overview/samples/sample99.aspx)]

<a id="0.2__Toc224729045"></a><a id="0.2__Toc253429282"></a><a id="0.2__Toc243304653"></a>

### <a name="new-field-templates-for-urls-and-email-addresses"></a><span data-ttu-id="1f6af-897">Новые шаблоны полей для URL-адресов и адресов электронной почты</span><span class="sxs-lookup"><span data-stu-id="1f6af-897">New Field Templates for URLs and Email Addresses</span></span>

<span data-ttu-id="1f6af-898">В `EmailAddress.ascx` ASP.NET 4 появились два новых встроенных шаблона полей и `Url.ascx`.</span><span class="sxs-lookup"><span data-stu-id="1f6af-898">ASP.NET 4 introduces two new built-in field templates, `EmailAddress.ascx` and `Url.ascx`.</span></span> <span data-ttu-id="1f6af-899">Эти шаблоны используются для полей, которые помечены как *EmailAddress* или *URL-адрес* с атрибутом *DataType* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-899">These templates are used for fields that are marked as *EmailAddress* or *Url* with the *DataType* attribute.</span></span> <span data-ttu-id="1f6af-900">Для объектов *EmailAddress* поле отображается как гиперссылка, созданная с помощью протокола *mailto:* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-900">For *EmailAddress* objects, the field is displayed as a hyperlink that is created by using the *mailto:* protocol.</span></span> <span data-ttu-id="1f6af-901">Когда пользователь щелкнул ссылку, он открывает почтовый клиент пользователя и создает каркас сообщения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-901">When users click the link, it opens the user's email client and creates a skeleton message.</span></span> <span data-ttu-id="1f6af-902">Объекты, типизированные как *URL-адреса* , отображаются как обычные гиперссылки.</span><span class="sxs-lookup"><span data-stu-id="1f6af-902">Objects typed as *Url* are displayed as ordinary hyperlinks.</span></span>

<span data-ttu-id="1f6af-903">В следующем примере показано, как будут помечены поля.</span><span class="sxs-lookup"><span data-stu-id="1f6af-903">The following example shows how fields would be marked.</span></span>

[!code-csharp[Main](overview/samples/sample100.cs)]

<a id="0.2__Toc224729046"></a><a id="0.2__Toc253429283"></a><a id="0.2__Toc243304654"></a>

### <a name="creating-links-with-the-dynamichyperlink-control"></a><span data-ttu-id="1f6af-904">Создание ссылок с помощью элемента управления DynamicHyperLink</span><span class="sxs-lookup"><span data-stu-id="1f6af-904">Creating Links with the DynamicHyperLink Control</span></span>

<span data-ttu-id="1f6af-905">Платформа динамических данных использует новую функцию маршрутизации, добавленную в .NET Framework 3,5 с пакетом обновления 1 (SP1), для управления URL-адресами, которые конечные пользователи видят при доступе к веб-сайту.</span><span class="sxs-lookup"><span data-stu-id="1f6af-905">Dynamic Data uses the new routing feature that was added in the .NET Framework 3.5 SP1 to control the URLs that end users see when they access the Web site.</span></span> <span data-ttu-id="1f6af-906">Новый элемент управления *DynamicHyperLink* упрощает создание ссылок на страницы на платформа динамических данных сайте.</span><span class="sxs-lookup"><span data-stu-id="1f6af-906">The new *DynamicHyperLink* control makes it easy to build links to pages in a Dynamic Data site.</span></span> <span data-ttu-id="1f6af-907">В следующем примере показано, как использовать элемент управления *DynamicHyperLink* :</span><span class="sxs-lookup"><span data-stu-id="1f6af-907">The following example shows how to use the *DynamicHyperLink* control:</span></span>

[!code-aspx[Main](overview/samples/sample101.aspx)]

<span data-ttu-id="1f6af-908">Эта разметка создает ссылку, которая указывает на страницу списка для `Products` таблицы на основе маршрутов, определенных `Global.asax` в файле.</span><span class="sxs-lookup"><span data-stu-id="1f6af-908">This markup creates a link that points to the List page for the `Products` table based on routes that are defined in the `Global.asax` file.</span></span> <span data-ttu-id="1f6af-909">Элемент управления автоматически использует имя таблицы по умолчанию, на которой основана платформа динамических данных страница.</span><span class="sxs-lookup"><span data-stu-id="1f6af-909">The control automatically uses the default table name that the Dynamic Data page is based on.</span></span>

<a id="0.2__Toc224729047"></a><a id="0.2__Toc253429284"></a><a id="0.2__Toc243304655"></a>

### <a name="support-for-inheritance-in-the-data-model"></a><span data-ttu-id="1f6af-910">Поддержка наследования в модели данных</span><span class="sxs-lookup"><span data-stu-id="1f6af-910">Support for Inheritance in the Data Model</span></span>

<span data-ttu-id="1f6af-911">Entity Framework и LINQ to SQL поддерживают наследование в моделях данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-911">Both the Entity Framework and LINQ to SQL support inheritance in their data models.</span></span> <span data-ttu-id="1f6af-912">Примером может быть база данных с `InsurancePolicy` таблицей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-912">An example of this might be a database that has an `InsurancePolicy` table.</span></span> <span data-ttu-id="1f6af-913">Он также может содержать `CarPolicy` таблицы `HousePolicy` и, имеющие те же поля, `InsurancePolicy` что и, а затем добавлять дополнительные поля.</span><span class="sxs-lookup"><span data-stu-id="1f6af-913">It might also contain `CarPolicy` and `HousePolicy` tables that have the same fields as `InsurancePolicy` and then add more fields.</span></span> <span data-ttu-id="1f6af-914">Платформа динамических данных были изменены, чтобы понять унаследованные объекты в модели данных и поддерживать формирование шаблонов для наследуемых таблиц.</span><span class="sxs-lookup"><span data-stu-id="1f6af-914">Dynamic Data has been modified to understand inherited objects in the data model and to support scaffolding for the inherited tables.</span></span>

<a id="0.2__Toc224729048"></a><a id="0.2__Toc253429285"></a><a id="0.2__Toc243304656"></a>

### <a name="support-for-many-to-many-relationships-entity-framework-only"></a><span data-ttu-id="1f6af-915">Поддержка связей "многие ко многим" (только Entity Framework)</span><span class="sxs-lookup"><span data-stu-id="1f6af-915">Support for Many-to-Many Relationships (Entity Framework Only)</span></span>

<span data-ttu-id="1f6af-916">Entity Framework имеет широкую поддержку связей "многие ко многим" между таблицами, которая реализуется путем предоставления связи в виде коллекции объекта *сущности* .</span><span class="sxs-lookup"><span data-stu-id="1f6af-916">The Entity Framework has rich support for many-to-many relationships between tables, which is implemented by exposing the relationship as a collection on an *Entity* object.</span></span> <span data-ttu-id="1f6af-917">Добавлены новые `ManyToMany.ascx` шаблоны полей,обеспечивающиеподдержкуотображенияиредактированияданных,участвующихвсвязях«многиекомногим».`ManyToMany_Edit.ascx`</span><span class="sxs-lookup"><span data-stu-id="1f6af-917">New `ManyToMany.ascx` and `ManyToMany_Edit.ascx` field templates have been added to provide support for displaying and editing data that is involved in many-to-many relationships.</span></span>

<a id="0.2__Toc224729049"></a><a id="0.2__Toc253429286"></a><a id="0.2__Toc243304657"></a>

### <a name="new-attributes-to-control-display-and-support-enumerations"></a><span data-ttu-id="1f6af-918">Новые атрибуты для управления отображением и поддержкой перечислений</span><span class="sxs-lookup"><span data-stu-id="1f6af-918">New Attributes to Control Display and Support Enumerations</span></span>

<span data-ttu-id="1f6af-919">*Дисплайаттрибуте* был добавлен для предоставления дополнительного контроля над отображением полей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-919">The *DisplayAttribute* has been added to give you additional control over how fields are displayed.</span></span> <span data-ttu-id="1f6af-920">Атрибут *DisplayName* в более ранних версиях платформа динамических данных позволял изменить имя, которое будет использоваться в качестве заголовка поля.</span><span class="sxs-lookup"><span data-stu-id="1f6af-920">The *DisplayName* attribute in earlier versions of Dynamic Data allowed you to change the name that is used as a caption for a field.</span></span> <span data-ttu-id="1f6af-921">Новый класс *дисплайаттрибуте* позволяет задать дополнительные параметры для отображения поля, например порядок, в котором отображается поле, а также указать, будет ли поле использоваться в качестве фильтра.</span><span class="sxs-lookup"><span data-stu-id="1f6af-921">The new *DisplayAttribute* class lets you specify more options for displaying a field, such as the order in which a field is displayed and whether a field will be used as a filter.</span></span> <span data-ttu-id="1f6af-922">Атрибут также предоставляет независимый контроль над именем, используемым для меток в элементе управления *GridView* , имя, используемое в элементе управления *DetailsView* , текст справки для поля и знак, используемый для поля (если поле допускает ввод текста).</span><span class="sxs-lookup"><span data-stu-id="1f6af-922">The attribute also provides independent control of the name used for the labels in a *GridView* control, the name used in a *DetailsView* control, the help text for the field, and the watermark used for the field (if the field accepts text input).</span></span>

<span data-ttu-id="1f6af-923">Добавлен класс *енумдататипеаттрибуте* , позволяющий сопоставлять поля с перечислениями.</span><span class="sxs-lookup"><span data-stu-id="1f6af-923">The *EnumDataTypeAttribute* class has been added to let you map fields to enumerations.</span></span> <span data-ttu-id="1f6af-924">При применении этого атрибута к полю указывается тип перечисления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-924">When you apply this attribute to a field, you specify an enumeration type.</span></span> <span data-ttu-id="1f6af-925">Платформа динамических данных использует новый `Enumeration.ascx` шаблон поля для создания пользовательского интерфейса для отображения и редактирования значений перечисления.</span><span class="sxs-lookup"><span data-stu-id="1f6af-925">Dynamic Data uses the new `Enumeration.ascx` field template to create UI for displaying and editing enumeration values.</span></span> <span data-ttu-id="1f6af-926">Шаблон сопоставляет значения из базы данных с именами в перечислении.</span><span class="sxs-lookup"><span data-stu-id="1f6af-926">The template maps the values from the database to the names in the enumeration.</span></span>

<a id="0.2__Toc224729050"></a><a id="0.2__Toc253429287"></a><a id="0.2__Toc243304658"></a>

### <a name="enhanced-support-for-filters"></a><span data-ttu-id="1f6af-927">Улучшенная поддержка фильтров</span><span class="sxs-lookup"><span data-stu-id="1f6af-927">Enhanced Support for Filters</span></span>

<span data-ttu-id="1f6af-928">Платформа динамических данных 1,0 поставляется со встроенными фильтрами для логических столбцов и столбцов внешнего ключа.</span><span class="sxs-lookup"><span data-stu-id="1f6af-928">Dynamic Data 1.0 shipped with built-in filters for Boolean columns and foreign-key columns.</span></span> <span data-ttu-id="1f6af-929">Фильтры не позволяли указывать, отображаются ли они или в каком порядке они отображались.</span><span class="sxs-lookup"><span data-stu-id="1f6af-929">The filters did not allow you to specify whether they were displayed or in what order they were displayed.</span></span> <span data-ttu-id="1f6af-930">Новый атрибут *дисплайаттрибуте* решает эти проблемы, позволяя контролировать, отображается ли столбец в качестве фильтра и в каком порядке он будет отображаться.</span><span class="sxs-lookup"><span data-stu-id="1f6af-930">The new *DisplayAttribute* attribute addresses both of these issues by giving you control over whether a column is displayed as a filter and in what order it will be displayed.</span></span>

<span data-ttu-id="1f6af-931">Дополнительное улучшение заключается в том, что поддержка фильтрации была[переписана для использования новой](#0.2__QueryExtender "_QueryExtender") функции веб-форм.</span><span class="sxs-lookup"><span data-stu-id="1f6af-931">An additional enhancement is that filtering support has been re[written to use the new](#0.2__QueryExtender "_QueryExtender") feature of Web Forms.</span></span> <span data-ttu-id="1f6af-932">Это позволяет создавать фильтры, не требуя знания элементов управления источниками данных, с которыми будут использоваться фильтры.</span><span class="sxs-lookup"><span data-stu-id="1f6af-932">This lets you create filters without requiring knowledge of the data source control that the filters will be used with.</span></span> <span data-ttu-id="1f6af-933">Помимо этих расширений, фильтры также были включены в элементы управления шаблонами, что позволяет добавлять новые.</span><span class="sxs-lookup"><span data-stu-id="1f6af-933">Along with these extensions, filters have also been turned into template controls, which allows you to add new ones.</span></span> <span data-ttu-id="1f6af-934">Наконец, упомянутый выше класс *дисплайаттрибуте* позволяет переопределять фильтр по умолчанию так же, как *UIHint* позволяет переопределять шаблон поля по умолчанию для столбца.</span><span class="sxs-lookup"><span data-stu-id="1f6af-934">Finally, the *DisplayAttribute* class mentioned earlier allows the default filter to be overridden, in the same way that *UIHint* allows the default field template for a column to be overridden.</span></span>

<a id="0.2__Toc224729051"></a><a id="0.2__Toc253429288"></a><a id="0.2__Toc243304659"></a>

## <a name="visual-studio-2010-web-development-improvements"></a><span data-ttu-id="1f6af-935">Усовершенствования веб-разработки в Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="1f6af-935">Visual Studio 2010 Web Development Improvements</span></span>

<span data-ttu-id="1f6af-936">Веб-разработка в Visual Studio 2010 была улучшена для обеспечения большей совместимости с CSS, повышения производительности с помощью фрагментов кода разметки HTML и ASP.NET и нового динамического IntelliSense JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1f6af-936">Web development in Visual Studio 2010 has been enhanced for greater CSS compatibility, increased productivity through HTML and ASP.NET markup snippets and new dynamic IntelliSense JavaScript.</span></span>

<a id="0.2__Toc224729052"></a><a id="0.2__Toc253429289"></a><a id="0.2__Toc243304660"></a>

### <a name="improved-css-compatibility"></a><span data-ttu-id="1f6af-937">Улучшенная совместимость с CSS</span><span class="sxs-lookup"><span data-stu-id="1f6af-937">Improved CSS Compatibility</span></span>

<span data-ttu-id="1f6af-938">В Visual Studio 2010 был обновлен конструктор Visual Web Developer для улучшения соответствия стандартам CSS 2,1.</span><span class="sxs-lookup"><span data-stu-id="1f6af-938">The Visual Web Developer designer in Visual Studio 2010 has been updated to improve CSS 2.1 standards compliance.</span></span> <span data-ttu-id="1f6af-939">Конструктор лучше сохраняет целостность исходного кода HTML и является более надежным, чем в предыдущих версиях Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f6af-939">The designer better preserves integrity of the HTML source and is more robust than in previous versions of Visual Studio.</span></span> <span data-ttu-id="1f6af-940">Помимо прочего, улучшены архитектурные улучшения, которые улучшат будущие улучшения отрисовки, макета и обслуживания.</span><span class="sxs-lookup"><span data-stu-id="1f6af-940">Under the hood, architectural improvements have also been made that will better enable future enhancements in rendering, layout, and serviceability.</span></span>

<a id="0.2__Toc224729053"></a><a id="0.2__Toc253429290"></a><a id="0.2__Toc243304661"></a>

### <a name="html-and-javascript-snippets"></a><span data-ttu-id="1f6af-941">Фрагменты кода HTML и JavaScript</span><span class="sxs-lookup"><span data-stu-id="1f6af-941">HTML and JavaScript Snippets</span></span>

<span data-ttu-id="1f6af-942">В редакторе HTML функция IntelliSense Auto завершает имена тегов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-942">In the HTML editor, IntelliSense auto-completes tag names.</span></span> <span data-ttu-id="1f6af-943">Функция IntelliSense выполняет автоматическое заполнение всех тегов и многое другое.</span><span class="sxs-lookup"><span data-stu-id="1f6af-943">The IntelliSense Snippets feature auto-completes entire tags and more.</span></span> <span data-ttu-id="1f6af-944">В Visual Studio 2010 фрагменты IntelliSense поддерживаются для JavaScript наряду C# с Visual Basic, которые поддерживались в более ранних версиях Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f6af-944">In Visual Studio 2010, IntelliSense snippets are supported for JavaScript, alongside C# and Visual Basic, which were supported in earlier versions of Visual Studio.</span></span>

<span data-ttu-id="1f6af-945">Visual Studio 2010 включает более 200 фрагментов кода, которые помогают в автоматическом заполнении стандартных тегов ASP.NET и HTML, включая необходимые атрибуты (например, runat = "Server") и общие атрибуты, относящиеся к тегу (например, *ID*, *DataSourceID*,  *ControlToValidate*и *Text*).</span><span class="sxs-lookup"><span data-stu-id="1f6af-945">Visual Studio 2010 includes over 200 snippets that help you auto-complete common ASP.NET and HTML tags, including required attributes (such as runat="server") and common attributes specific to a tag (such as *ID*, *DataSourceID*, *ControlToValidate*, and *Text*).</span></span>

<span data-ttu-id="1f6af-946">Вы можете скачать дополнительные фрагменты кода или написать собственные фрагменты кода, которые инкапсулируют блоки разметки, используемые вами или вашей командой для выполнения общих задач.</span><span class="sxs-lookup"><span data-stu-id="1f6af-946">You can download additional snippets, or you can write your own snippets that encapsulate the blocks of markup that you or your team use for common tasks.</span></span>

<a id="0.2__Toc224729054"></a><a id="0.2__Toc253429291"></a><a id="0.2__Toc243304662"></a>

### <a name="javascript-intellisense-enhancements"></a><span data-ttu-id="1f6af-947">Усовершенствования IntelliSense в JavaScript</span><span class="sxs-lookup"><span data-stu-id="1f6af-947">JavaScript IntelliSense Enhancements</span></span>

<span data-ttu-id="1f6af-948">В Visual 2010 технология JavaScript IntelliSense была переработана, чтобы обеспечить более широкие возможности редактирования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-948">In Visual 2010, JavaScript IntelliSense has been redesigned to provide an even richer editing experience.</span></span> <span data-ttu-id="1f6af-949">IntelliSense теперь распознает объекты, которые были динамически созданы такими методами, как *регистернамеспаце* , и аналогичными методами, используемыми другими платформами JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1f6af-949">IntelliSense now recognizes objects that have been dynamically generated by methods such as *registerNamespace* and by similar techniques used by other JavaScript frameworks.</span></span> <span data-ttu-id="1f6af-950">Улучшена производительность для анализа больших библиотек сценариев и отображения IntelliSense с минимальной задержкой обработки или без нее.</span><span class="sxs-lookup"><span data-stu-id="1f6af-950">Performance has been improved to analyze large libraries of script and to display IntelliSense with little or no processing delay.</span></span> <span data-ttu-id="1f6af-951">Совместимость значительно увеличилась для поддержки практически всех библиотек сторонних производителей и поддержки различных стилей программирования.</span><span class="sxs-lookup"><span data-stu-id="1f6af-951">Compatibility has been dramatically increased to support nearly all third-party libraries and to support diverse coding styles.</span></span> <span data-ttu-id="1f6af-952">Комментарии к документации теперь анализируются при вводе и немедленно используются технологией IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="1f6af-952">Documentation comments are now parsed as you type and are immediately leveraged by IntelliSense.</span></span>

<a id="0.2__Toc224729055"></a><a id="0.2__Toc253429292"></a><a id="0.2__Toc243304663"></a>

## <a name="web-application-deployment-with-visual-studio-2010"></a><span data-ttu-id="1f6af-953">Развертывание веб-приложений с помощью Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="1f6af-953">Web Application Deployment with Visual Studio 2010</span></span>

<span data-ttu-id="1f6af-954">При развертывании веб-приложения ASP.NET разработчики часто сталкиваются с такими проблемами:</span><span class="sxs-lookup"><span data-stu-id="1f6af-954">When ASP.NET developers deploy a Web application, they often find that they encounter issues such as the following:</span></span>

- <span data-ttu-id="1f6af-955">Для развертывания на общем сайте размещения требуются такие технологии, как FTP, которые могут быть слишком длительными.</span><span class="sxs-lookup"><span data-stu-id="1f6af-955">Deploying to a shared hosting site requires technologies such as FTP, which can be slow.</span></span> <span data-ttu-id="1f6af-956">Кроме того, необходимо вручную выполнять такие задачи, как выполнение скриптов SQL для настройки базы данных, и необходимо изменить параметры IIS, такие как Настройка папки виртуального каталога в качестве приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-956">In addition, you must manually perform tasks such as running SQL scripts to configure a database and you must change IIS settings, such as configuring a virtual directory folder as an application.</span></span>
- <span data-ttu-id="1f6af-957">В среде предприятия, помимо развертывания файлов веб-приложений, администраторы часто должны изменять файлы конфигурации ASP.NET и параметры IIS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-957">In an enterprise environment, in addition to deploying the Web application files, administrators frequently must modify ASP.NET configuration files and IIS settings.</span></span> <span data-ttu-id="1f6af-958">Для запуска базы данных приложения администраторы баз данных должны выполнить ряд сценариев SQL.</span><span class="sxs-lookup"><span data-stu-id="1f6af-958">Database administrators must run a series of SQL scripts to get the application database running.</span></span> <span data-ttu-id="1f6af-959">Такие установки требуют интенсивного выполнения операций, и их необходимо тщательно задокументировать.</span><span class="sxs-lookup"><span data-stu-id="1f6af-959">Such installations are labor intensive, often take hours to complete, and must be carefully documented.</span></span>

<span data-ttu-id="1f6af-960">Visual Studio 2010 включает в себя технологии, которые устраняют эти проблемы и позволяют без проблем развертывать веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-960">Visual Studio 2010 includes technologies that address these issues and that let you seamlessly deploy Web applications.</span></span> <span data-ttu-id="1f6af-961">Одной из этих технологий является средство веб-развертывания IIS (MsDeploy. exe).</span><span class="sxs-lookup"><span data-stu-id="1f6af-961">One of these technologies is the IIS Web Deployment Tool (MsDeploy.exe).</span></span>

<span data-ttu-id="1f6af-962">Функции веб-развертывания в Visual Studio 2010 включают в себя следующие основные области:</span><span class="sxs-lookup"><span data-stu-id="1f6af-962">Web deployment features in Visual Studio 2010 include the following major areas:</span></span>

- <span data-ttu-id="1f6af-963">Веб-упаковка</span><span class="sxs-lookup"><span data-stu-id="1f6af-963">Web packaging</span></span>
- <span data-ttu-id="1f6af-964">Преобразование web. config</span><span class="sxs-lookup"><span data-stu-id="1f6af-964">Web.config transformation</span></span>
- <span data-ttu-id="1f6af-965">Развертывание базы данных</span><span class="sxs-lookup"><span data-stu-id="1f6af-965">Database deployment</span></span>
- <span data-ttu-id="1f6af-966">Публикация одним щелчком для веб-приложений</span><span class="sxs-lookup"><span data-stu-id="1f6af-966">One-click publish for Web applications</span></span>

<span data-ttu-id="1f6af-967">Следующие разделы содержат сведения об этих функциях.</span><span class="sxs-lookup"><span data-stu-id="1f6af-967">The following sections provide details about these features.</span></span>

<a id="0.2__Toc224729056"></a><a id="0.2__Toc253429293"></a><a id="0.2__Toc243304664"></a>

### <a name="web-packaging"></a><span data-ttu-id="1f6af-968">Веб-упаковка</span><span class="sxs-lookup"><span data-stu-id="1f6af-968">Web Packaging</span></span>

<span data-ttu-id="1f6af-969">Visual Studio 2010 использует средство MSDeploy для создания сжатого файла (ZIP) для приложения, который называется *веб-пакетом*.</span><span class="sxs-lookup"><span data-stu-id="1f6af-969">Visual Studio 2010 uses the MSDeploy tool to create a compressed (.zip) file for your application, which is referred to as a *Web package*.</span></span> <span data-ttu-id="1f6af-970">Файл пакета содержит метаданные о приложении, а также следующее содержимое:</span><span class="sxs-lookup"><span data-stu-id="1f6af-970">The package file contains metadata about your application plus the following content:</span></span>

- <span data-ttu-id="1f6af-971">Параметры IIS, включая параметры пула приложений, параметры страницы ошибок и т. д.</span><span class="sxs-lookup"><span data-stu-id="1f6af-971">IIS settings, which includes application pool settings, error page settings, and so on.</span></span>
- <span data-ttu-id="1f6af-972">Реальное веб-содержимое, которое включает веб-страницы, пользовательские элементы управления, статическое содержимое (изображения и HTML-файлы) и т. д.</span><span class="sxs-lookup"><span data-stu-id="1f6af-972">The actual Web content, which includes Web pages, user controls, static content (images and HTML files), and so on.</span></span>
- <span data-ttu-id="1f6af-973">SQL Server схемы и данные баз данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-973">SQL Server database schemas and data.</span></span>
- <span data-ttu-id="1f6af-974">Сертификаты безопасности, компоненты для установки в глобальном кэше сборок, параметры реестра и т. д.</span><span class="sxs-lookup"><span data-stu-id="1f6af-974">Security certificates, components to install in the GAC, registry settings, and so on.</span></span>

<span data-ttu-id="1f6af-975">Веб-пакет можно скопировать на любой сервер, а затем установить вручную с помощью диспетчера служб IIS.</span><span class="sxs-lookup"><span data-stu-id="1f6af-975">A Web package can be copied to any server and then installed manually by using IIS Manager.</span></span> <span data-ttu-id="1f6af-976">Кроме того, для автоматического развертывания пакет можно установить с помощью команд командной строки или с помощью API-интерфейсов развертывания.</span><span class="sxs-lookup"><span data-stu-id="1f6af-976">Alternatively, for automated deployment, the package can be installed by using command-line commands or by using deployment APIs.</span></span>

<span data-ttu-id="1f6af-977">Visual Studio 2010 предоставляет встроенные задачи и целевые объекты MSBuild для создания веб-пакетов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-977">Visual Studio 2010 provides built in MSBuild tasks and targets to create Web packages.</span></span> <span data-ttu-id="1f6af-978">Дополнительные сведения см. в разделе [Обзор развертывания проекта веб-приложения ASP.NET](https://msdn.microsoft.com/library/dd394698%28VS.100%29.aspx) на веб-сайте MSDN и [10 + 20 причин, по которым следует создать веб-пакет](http://vishaljoshi.blogspot.com/2009/07/10-20-reasons-why-you-should-create-web.html) в блоге Вишал Джоши.</span><span class="sxs-lookup"><span data-stu-id="1f6af-978">For more information, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698%28VS.100%29.aspx) on the MSDN Web site and [10 + 20 reasons why you should create a Web Package](http://vishaljoshi.blogspot.com/2009/07/10-20-reasons-why-you-should-create-web.html) on Vishal Joshi's blog.</span></span>

<a id="0.2__Toc224729057"></a><a id="0.2__Toc253429294"></a><a id="0.2__Toc243304665"></a>

### <a name="webconfig-transformation"></a><span data-ttu-id="1f6af-979">Преобразование web. config</span><span class="sxs-lookup"><span data-stu-id="1f6af-979">Web.config Transformation</span></span>

<span data-ttu-id="1f6af-980">Для развертывания веб-приложений Visual Studio 2010 вводит [Преобразование XML-документов (xdt)](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html), которое представляет собой компонент, позволяющий преобразовать `Web.config` файл из параметров разработки в параметры рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="1f6af-980">For Web application deployment, Visual Studio 2010 introduces [XML Document Transform (XDT)](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html), which is a feature that lets you transform a `Web.config` file from development settings to production settings.</span></span> <span data-ttu-id="1f6af-981">Параметры преобразования указываются в файлах преобразования с `web.debug.config`именами `web.release.config`, и т. д.</span><span class="sxs-lookup"><span data-stu-id="1f6af-981">Transformation settings are specified in transform files named `web.debug.config`, `web.release.config`, and so on.</span></span> <span data-ttu-id="1f6af-982">(Имена этих файлов соответствуют конфигурациям MSBuild.) Файл преобразования включает только изменения, которые необходимо внести в развернутый `Web.config` файл.</span><span class="sxs-lookup"><span data-stu-id="1f6af-982">(The names of these files match MSBuild configurations.) A transform file includes just the changes that you need to make to a deployed `Web.config` file.</span></span> <span data-ttu-id="1f6af-983">Изменения задаются с помощью простого синтаксиса.</span><span class="sxs-lookup"><span data-stu-id="1f6af-983">You specify the changes by using simple syntax.</span></span>

<span data-ttu-id="1f6af-984">В следующем примере показана часть `web.release.config` файла, которая может быть создана для развертывания конфигурации выпуска.</span><span class="sxs-lookup"><span data-stu-id="1f6af-984">The following example shows a portion of a `web.release.config` file that might be produced for deployment of your release configuration.</span></span> <span data-ttu-id="1f6af-985">Ключевое слово Replace в примере указывает, что во время развертывания узел ConnectionString `Web.config` в файле будет заменен значениями, перечисленными в примере.</span><span class="sxs-lookup"><span data-stu-id="1f6af-985">The Replace keyword in the example specifies that during deployment the *connectionString* node in the `Web.config` file will be replaced with the values that are listed in the example.</span></span>

[!code-xml[Main](overview/samples/sample102.xml)]

<span data-ttu-id="1f6af-986">Дополнительные сведения см. в статье [синтаксис преобразования Web. config для развертывания проекта веб-приложения](https://msdn.microsoft.com/library/dd465326%28VS.100%29.aspx) на <a id="0.2_a"></a> веб-сайте[MSDN и в веб-развертывании. Преобразование](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html) Web. config в блоге по Вишал Джоши.</span><span class="sxs-lookup"><span data-stu-id="1f6af-986">For more information, see [Web.config Transformation Syntax for Web Application Project Deployment](https://msdn.microsoft.com/library/dd465326%28VS.100%29.aspx) on the MSDN <a id="0.2_a"></a> Web site and[Web Deployment: Web.Config Transformation](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html) on Vishal Joshi's blog.</span></span>

<a id="0.2__Toc224729058"></a><a id="0.2__Toc253429295"></a><a id="0.2__Toc243304666"></a>

### <a name="database-deployment"></a><span data-ttu-id="1f6af-987">Развертывание базы данных</span><span class="sxs-lookup"><span data-stu-id="1f6af-987">Database Deployment</span></span>

<span data-ttu-id="1f6af-988">Пакет развертывания Visual Studio 2010 может включать зависимости от SQL Server баз данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-988">A Visual Studio 2010 deployment package can include dependencies on SQL Server databases.</span></span> <span data-ttu-id="1f6af-989">В рамках определения пакета вы предоставляете строку подключения для базы данных источника.</span><span class="sxs-lookup"><span data-stu-id="1f6af-989">As part of the package definition, you provide the connection string for your source database.</span></span> <span data-ttu-id="1f6af-990">При создании веб-пакета Visual Studio 2010 создает скрипты SQL для схемы базы данных и (необязательно) для данных, а затем добавляет их в пакет.</span><span class="sxs-lookup"><span data-stu-id="1f6af-990">When you create the Web package, Visual Studio 2010 creates SQL scripts for the database schema and optionally for the data, and then adds these to the package.</span></span> <span data-ttu-id="1f6af-991">Можно также предоставить пользовательские скрипты SQL и указать последовательность, в которой они должны выполняться на сервере.</span><span class="sxs-lookup"><span data-stu-id="1f6af-991">You can also provide custom SQL scripts and specify the sequence in which they should run on the server.</span></span> <span data-ttu-id="1f6af-992">Во время развертывания вы предоставляете строку подключения, соответствующую целевому серверу. Затем процесс развертывания использует эту строку подключения для выполнения скриптов, которые создают схему базы данных и добавляют данные.</span><span class="sxs-lookup"><span data-stu-id="1f6af-992">At deployment time, you provide a connection string that is appropriate for the target server; the deployment process then uses this connection string to run the scripts that create the database schema and add the data.</span></span>

<span data-ttu-id="1f6af-993">Кроме того, с помощью публикации одним щелчком можно настроить развертывание для публикации базы данных непосредственно при публикации приложения на удаленном общем сайте.</span><span class="sxs-lookup"><span data-stu-id="1f6af-993">In addition, by using one-click publish, you can configure deployment to publish your database directly when the application is published to a remote shared hosting site.</span></span> <span data-ttu-id="1f6af-994">Дополнительные сведения см. в разделе [Практическое руководство. Развертывание базы данных с проектом](https://msdn.microsoft.com/library/dd465343%28VS.100%29.aspx) веб-приложения на веб-сайте MSDN и [развертывание базы данных с помощью VS 2010](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html) в блоге по Вишал Джоши.</span><span class="sxs-lookup"><span data-stu-id="1f6af-994">For more information, see [How to: Deploy a Database With a Web Application Project](https://msdn.microsoft.com/library/dd465343%28VS.100%29.aspx) on the MSDN Web site and [Database Deployment with VS 2010](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html) on Vishal Joshi's blog.</span></span>

<a id="0.2__Toc224729059"></a><a id="0.2__Toc253429296"></a><a id="0.2__Toc243304667"></a>

### <a name="one-click-publish-for-web-applications"></a><span data-ttu-id="1f6af-995">Публикация одним щелчком для веб-приложений</span><span class="sxs-lookup"><span data-stu-id="1f6af-995">One-Click Publish for Web Applications</span></span>

<span data-ttu-id="1f6af-996">Visual Studio 2010 также позволяет использовать службу удаленного управления IIS для публикации веб-приложения на удаленном сервере.</span><span class="sxs-lookup"><span data-stu-id="1f6af-996">Visual Studio 2010 also lets you use the IIS remote management service to publish a Web application to a remote server.</span></span> <span data-ttu-id="1f6af-997">Вы можете создать профиль публикации для учетной записи размещения или для тестовых серверов или промежуточных серверов.</span><span class="sxs-lookup"><span data-stu-id="1f6af-997">You can create a publish profile for your hosting account or for testing servers or staging servers.</span></span> <span data-ttu-id="1f6af-998">Каждый профиль может безопасно сохранять соответствующие учетные данные.</span><span class="sxs-lookup"><span data-stu-id="1f6af-998">Each profile can save appropriate credentials securely.</span></span> <span data-ttu-id="1f6af-999">Затем можно выполнить развертывание на любом из целевых серверов одним щелчком мыши, используя веб-панель инструментов публикации одним щелчком.</span><span class="sxs-lookup"><span data-stu-id="1f6af-999">You can then deploy to any of the target servers with one click by using the Web one-click publish toolbar.</span></span> <span data-ttu-id="1f6af-1000">В Visual Studio 2010 можно также выполнить публикацию с помощью командной строки MSBuild.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1000">With Visual Studio 2010, you can also publish by using the MSBuild command line.</span></span> <span data-ttu-id="1f6af-1001">Это позволяет настроить среду сборки группы для включения публикации в модель непрерывной интеграции.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1001">This lets you configure your team build environment to include publishing in a continuous-integration model.</span></span>

<span data-ttu-id="1f6af-1002">Дополнительные сведения см. в разделе [Практическое руководство. Развертывание проекта веб-приложения с помощью единого щелчка Publish and](https://msdn.microsoft.com/library/dd465337%28VS.100%29.aspx) веб-развертывание на веб-сайте MSDN и веб-сайта [1. Щелкните Опубликовать с помощью VS 2010](http://vishaljoshi.blogspot.com/2009/05/web-1-click-publish-with-vs-2010.html) в блоге по Вишал Джоши.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1002">For more information, see [How to: Deploy a Web Application Project Using One-Click Publish and Web Deploy](https://msdn.microsoft.com/library/dd465337%28VS.100%29.aspx) on the MSDN Web site and [Web 1-Click Publish with VS 2010](http://vishaljoshi.blogspot.com/2009/05/web-1-click-publish-with-vs-2010.html) on Vishal Joshi's blog.</span></span> <span data-ttu-id="1f6af-1003">Чтобы просмотреть видеопрезентации о развертывании веб-приложений в Visual Studio 2010, ознакомьтесь с разделом [VS 2010 для предварительного просмотра веб-разработчиков](http://vishaljoshi.blogspot.com/2008/12/vs-2010-for-web-developer-previews.html) в блоге по Вишал Джоши.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1003">To view video presentations about Web application deployment in Visual Studio 2010, see [VS 2010 for Web Developer Previews](http://vishaljoshi.blogspot.com/2008/12/vs-2010-for-web-developer-previews.html) on Vishal Joshi's blog.</span></span>

<a id="0.2__Toc224729060"></a><a id="0.2__Toc253429297"></a><a id="0.2__Toc243304668"></a>

### <a name="resources"></a><span data-ttu-id="1f6af-1004">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="1f6af-1004">Resources</span></span>

<span data-ttu-id="1f6af-1005">Следующие веб-сайты содержат дополнительные сведения о ASP.NET 4 и Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1005">The following Web sites provide additional information about ASP.NET 4 and Visual Studio 2010.</span></span>

- <span data-ttu-id="1f6af-1006">[ASP.NET 4](https://msdn.microsoft.com/library/ee532866%28VS.100%29.aspx) — официальная документация по ASP.NET 4 на веб-сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1006">[ASP.NET 4](https://msdn.microsoft.com/library/ee532866%28VS.100%29.aspx) — The official documentation for ASP.NET 4 on the MSDN Web site.</span></span>
- <span data-ttu-id="1f6af-1007">[https://www.asp.net/](https://www.asp.net/)— Собственный веб-сайт команды ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1007">[https://www.asp.net/](https://www.asp.net/) — The ASP.NET team's own Web site.</span></span>
- <span data-ttu-id="1f6af-1008">[https://www.asp.net/dynamicdata/](https://msdn.microsoft.com/library/cc488545.aspx)и [ASP.NET платформа динамических данных карту содержимого](https://msdn.microsoft.com/library/cc488545%28VS.100%29.aspx) — Интернет-ресурсы на сайте группы ASP.NET и официальная документация по ASP.NET платформа динамических данных.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1008">[https://www.asp.net/dynamicdata/](https://msdn.microsoft.com/library/cc488545.aspx) and [ASP.NET Dynamic Data Content Map](https://msdn.microsoft.com/library/cc488545%28VS.100%29.aspx) — Online resources on the ASP.NET team site and in the official documentation for ASP.NET Dynamic Data.</span></span>
- <span data-ttu-id="1f6af-1009">[https://www.asp.net/ajax/](../../ajax/index.md)— Основной веб-ресурс для разработки ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1009">[https://www.asp.net/ajax/](../../ajax/index.md) — The main Web resource for ASP.NET Ajax development.</span></span>
- <span data-ttu-id="1f6af-1010">[https://blogs.msdn.com/webdevtools/](https://blogs.msdn.com/webdevtools/)— Блог группы разработчиков Visual Web Developer, который содержит сведения о функциях Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1010">[https://blogs.msdn.com/webdevtools/](https://blogs.msdn.com/webdevtools/) — The Visual Web Developer Team blog, which includes information about features in Visual Studio 2010.</span></span>
- <span data-ttu-id="1f6af-1011">[ASP.NET Web Stack](https://github.com/aspnet/AspNetWebStack) — основной веб-ресурс для предварительных выпусков ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1011">[ASP.NET WebStack](https://github.com/aspnet/AspNetWebStack) — The main Web resource for preview releases of ASP.NET.</span></span>

<a id="0.2__Toc224729061"></a><a id="0.2__Toc253429298"></a><a id="0.2__Toc243304669"></a>

## <a name="disclaimer"></a><span data-ttu-id="1f6af-1012">Отказ от ответственности</span><span class="sxs-lookup"><span data-stu-id="1f6af-1012">Disclaimer</span></span>

<span data-ttu-id="1f6af-1013">Это предварительный документ, он может быть существенно изменен до выхода окончательного коммерческого выпуска описанного здесь программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1013">This is a preliminary document and may be changed substantially prior to final commercial release of the software described herein.</span></span>

<span data-ttu-id="1f6af-1014">Сведения, содержащиеся в этом документе, отражают представление корпорации Майкрософт по описанным здесь вопросам на дату публикации.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1014">The information contained in this document represents the current view of Microsoft Corporation on the issues discussed as of the date of publication.</span></span> <span data-ttu-id="1f6af-1015">Поскольку корпорация Майкрософт должна реагировать на изменяющиеся рыночные условия, данный документ не должен интерпретироваться как обязательство со стороны Майкрософт, и корпорация Майкрософт не может гарантировать точность любой информации, представленной после даты публикации.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1015">Because Microsoft must respond to changing market conditions, it should not be interpreted to be a commitment on the part of Microsoft, and Microsoft cannot guarantee the accuracy of any information presented after the date of publication.</span></span>

<span data-ttu-id="1f6af-1016">Данный технический документ предназначен только для ознакомительных целей.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1016">This White Paper is for informational purposes only.</span></span> <span data-ttu-id="1f6af-1017">МАЙКРОСОФТ НЕ ПРЕДОСТАВЛЯЕТ НИКАКИХ ГАРАНТИЙ, ЯВНЫХ ИЛИ ПРЕДУСМОТРЕННЫХ ЗАКОНОДАТЕЛЬСТВОМ, ОТНОСИТЕЛЬНО СВЕДЕНИЙ, СОДЕРЖАЩИХСЯ В ДАННОМ ДОКУМЕНТЕ.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1017">MICROSOFT MAKES NO WARRANTIES, EXPRESS, IMPLIED OR STATUTORY, AS TO THE INFORMATION IN THIS DOCUMENT.</span></span>

<span data-ttu-id="1f6af-1018">Ответственность за соблюдение всех авторских прав и прав на интеллектуальную собственность целиком и полностью несет пользователь.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1018">Complying with all applicable copyright laws is the responsibility of the user.</span></span> <span data-ttu-id="1f6af-1019">Ни одна из частей этого документа не может быть воспроизведена, сохранена или использована в системах поиска или передана в любой форме, любыми способами (электронными, механическими, в виде фотокопии, в виде записи или любыми другими) и для любых целей без соблюдения ограничений авторских прав и письменного разрешения корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1019">Without limiting the rights under copyright, no part of this document may be reproduced, stored in or introduced into a retrieval system, or transmitted in any form or by any means (electronic, mechanical, photocopying, recording, or otherwise), or for any purpose, without the express written permission of Microsoft Corporation.</span></span>

<span data-ttu-id="1f6af-1020">В настоящем документе могут упоминаться запатентованные или патентуемые технологии, товарные знаки, авторские права или другие права интеллектуальной собственности корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1020">Microsoft may have patents, patent applications, trademarks, copyrights, or other intellectual property rights covering subject matter in this document.</span></span> <span data-ttu-id="1f6af-1021">Если иного явно не указано в письменном лицензионном соглашении корпорации Майкрософт, данный документ не предоставляет лицензии на эти патенты, товарные знаки, авторские права или другие права интеллектуальной собственности.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1021">Except as expressly provided in any written license agreement from Microsoft, the furnishing of this document does not give you any license to these patents, trademarks, copyrights, or other intellectual property.</span></span>

<span data-ttu-id="1f6af-1022">Если не указано иное, примеры компаний, организаций, продуктов, доменных имен, адресов электронной почты, логотипов, людей, мест и событий являются вымышленными и без связи с реальными компаниями, организациями, продуктами, именами доменов, электронной почтой. адрес, Эмблема, лицо, место или событие должны быть выведены на случай.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1022">Unless otherwise noted, the example companies, organizations, products, domain names, email addresses, logos, people, places and events depicted herein are fictitious, and no association with any real company, organization, product, domain name, email address, logo, person, place or event is intended or should be inferred.</span></span>

<span data-ttu-id="1f6af-1023">© 2009 Корпорация Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1023">© 2009 Microsoft Corporation.</span></span> <span data-ttu-id="1f6af-1024">Все права защищены.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1024">All rights reserved.</span></span>

<span data-ttu-id="1f6af-1025">Microsoft и Windows являются охраняемыми товарными знаками корпорации Майкрософт в США и других странах.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1025">Microsoft and Windows are either registered trademarks or trademarks of Microsoft Corporation in the United States and/or other countries.</span></span>

<span data-ttu-id="1f6af-1026">Названия фактических компаний и продуктов, упомянутые здесь, могут являться охраняемыми товарными знаками соответствующих владельцев.</span><span class="sxs-lookup"><span data-stu-id="1f6af-1026">The names of actual companies and products mentioned herein may be the trademarks of their respective owners.</span></span>
