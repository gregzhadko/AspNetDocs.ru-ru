---
uid: whitepapers/aspnet-and-iis6
title: Запуск ASP.NET 1,1 с IIS 6,0 | Документация Майкрософт
author: rick-anderson
description: Хотя Windows Server 2003 включает как IIS 6,0, так и ASP.NET 1,1, эти компоненты по умолчанию отключены. В этом техническом документе описано, как включить IIS 6,0...
ms.author: riande
ms.date: 02/10/2010
ms.assetid: 5a5537bf-2aaa-49e7-839f-9e6522b829d8
msc.legacyurl: /whitepapers/aspnet-and-iis6
msc.type: content
ms.openlocfilehash: 2e7812f34481afe9a71927c0d9ba2a9abc9632e4
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78419850"
---
# <a name="running-aspnet-11-with-iis-60"></a>Запуск ASP.NET 1.1 со службами IIS 6.0

> Хотя Windows Server 2003 включает как IIS 6,0, так и ASP.NET 1,1, эти компоненты по умолчанию отключены. В этом техническом документе описано, как включить службы IIS 6,0 и ASP.NET 1,1, а также рекомендации по нескольким параметрам конфигурации, чтобы обеспечить оптимальную производительность служб IIS и ASP.NET.
> 
> Применяется к ASP.NET 1,1 и IIS 6,0.

ASP.NET 1,1 поставляется с Windows Server 2003, который также включает последнюю версию Internet Information Server (IIS) версии 6,0. Службы IIS 6,0 и ASP.NET 1,1 разработаны для беспрепятственной интеграции и ASP.NET теперь по умолчанию используют новую модель рабочего процесса IIS 6,0.

## <a name="aspnet-11-is-not-installed-by-default"></a>ASP.NET 1,1 не устанавливается по умолчанию

В отличие от предыдущих версий серверных операционных систем Майкрософт, сервер IIS не включен по умолчанию. и не является ASP.NET 1,1. Существует два варианта включения служб IIS.

### <a name="enabling-iis-option-1---configure-your-server-wizard"></a>Включение служб IIS, параметр #1-мастер настройки сервера

В состав Windows Server 2003 входит новый мастер настройки сервера, позволяющий правильно настроить сервер в нужном режиме.

Чтобы запустить мастер, заметьте, что для запуска мастера необходимо войти в систему с правами администратора. перейти к: запуск | Программы | Средства администрирования и выберите "настроить сервер".

После выбора вы увидите экран мастера настройки сервера:

![](aspnet-and-iis6/_static/image1.jpg)

Нажмите кнопку "далее &gt;":

![](aspnet-and-iis6/_static/image2.jpg)

Нажмите кнопку "далее &gt;".

![](aspnet-and-iis6/_static/image3.jpg)

На этом экране необходимо выбрать "сервер приложений (IIS, ASP.NET)" в качестве параметров для настройки.

Нажмите кнопку "далее &gt;".

![](aspnet-and-iis6/_static/image4.jpg)

После выбора настройки сервера в качестве сервера приложений на экране отобразится запрос на ввод дополнительных возможностей, которые следует установить. По умолчанию ни один из этих параметров не выбран. Чтобы включить ASP.NET автоматически, необходимо выбрать параметр "включить ASP. NET ".

Нажмите кнопку "далее &gt;".

![](aspnet-and-iis6/_static/image5.jpg)

На этом экране отображаются параметры, которые необходимо установить.

Нажмите кнопку "далее &gt;".

![](aspnet-and-iis6/_static/image6.jpg)

Вы увидите этот экран во время установки выбранных параметров. Обычные диалоговые окна отображаются, когда устанавливаются службы. Кроме того, вам может быть предложено указать расположение установочного компакт-диска Windows 2003 Server.

По завершении нажмите кнопку "далее &gt;".

![](aspnet-and-iis6/_static/image7.jpg)

Нажмите кнопку "Готово" — теперь Windows Server 2003 настроен для поддержки IIS 6,0 и ASP.NET 1,1.

### <a name="enabling-iis-option-2---manually-configuring-iis-and-aspnet"></a>Включение служб IIS, #2 параметров — Настройка IIS и ASP.NET вручную

Если вы не хотите использовать мастер настройки сервера, можно дополнительно установить IIS 6,0 и ASP.NET 1,1 с помощью компонента "Установка и удаление программ" на панели управления.

Сначала откройте панель управления:

![](aspnet-and-iis6/_static/image8.jpg)

Затем нажмите кнопку "Добавить/удалить компоненты Windows", которая откроет мастер компонентов Windows:

![](aspnet-and-iis6/_static/image9.jpg)

Выделите и проверьте "сервер приложений", а затем щелкните "сведения". переключатель

![](aspnet-and-iis6/_static/image10.jpg)

Чтобы установить ASP.NET, установите флажок "ASP. NET ".

Нажмите кнопку "ОК", чтобы вернуться к мастеру компонентов Windows. Чтобы начать установку, нажмите кнопку "далее &gt;" в мастере компонентов Windows:

![](aspnet-and-iis6/_static/image11.jpg)

Обычные диалоговые окна отображаются, когда устанавливаются службы. Кроме того, вам может быть предложено указать расположение установочного компакт-диска Windows 2003 Server.

После завершения установки вы увидите последний экран мастера компонентов Windows:

![](aspnet-and-iis6/_static/image12.jpg)

Службы IIS 6,0 и ASP.NET 1,1 теперь настроены и доступны.

## <a name="recommended-settings"></a>Рекомендуемые параметры

При запуске ASP.NET 1,1 с IIS 6,0 для достижения оптимальной производительности из ASP.NET рекомендуется использовать несколько параметров конфигурации.

- Настройка ограничений памяти для рабочих процессов
- Настройка повторного запуска рабочих процессов

### <a name="configuring-worker-process-memory-limits"></a>Настройка ограничений памяти для рабочих процессов

По умолчанию IIS 6,0 не устанавливает ограничение на объем памяти, который может использовать IIS. Сценарии. Функция кэширования в сети основана на ограничении памяти, поэтому кэш может заранее удалить неиспользуемые элементы из памяти.

Рекомендуется настроить функцию повторного использования памяти в IIS 6,0. Настройка этого открытого диспетчера службы IIS (Start | Программы | Администрирование | Службы IIS). После открытия разверните папку "пулы приложений":

Для каждого пула приложений:

![](aspnet-and-iis6/_static/image13.jpg)

1. Щелкните правой кнопкой мыши пул приложений, например "DefaultAppPool", и выберите "Свойства":

![](aspnet-and-iis6/_static/image14.jpg)

2. Затем включите повторное использование памяти, щелкнув "максимальный объем используемой памяти (в мегабайтах)": ". Значение не должно быть больше объема физической (невиртуальной) памяти на сервере, а оптимальное приближение — 60% от физической памяти, т. е. для сервера с физической памятью 512 МБ выберите 310. Кроме того, при использовании пространства адресов размером 2 ГБ рекомендуется не более 800MB. Если адресное пространство памяти сервера равно 3 ГБ, максимальный предел памяти для рабочего процесса может быть таким же, как 1, 800MB:

![](aspnet-and-iis6/_static/image15.jpg)

Нажмите кнопку "Применить" и "ОК", чтобы закрыть диалоговое окно свойств. Повторите эти действия для всех доступных пулов приложений.

### <a name="configuring-worker-recycling"></a>Настройка повторного использования рабочих ролей

По умолчанию IIS 6,0 настроен на повторный запуск рабочего процесса каждые 29 часов. Это немного агрессивно для приложения, в котором выполняется ASP.NET, и рекомендуется отключить автоматический перезапуск рабочих процессов.

Чтобы отключить автоматический перезапуск рабочих процессов, сначала откройте диспетчер службы IIS (Start | Программы | Администрирование | Службы IIS). После открытия разверните папку "пулы приложений":

![](aspnet-and-iis6/_static/image16.jpg)

Для каждого пула приложений:

1. Щелкните правой кнопкой мыши пул приложений, например "DefaultAppPool", и выберите "Свойства":

![](aspnet-and-iis6/_static/image17.jpg)

2. Снимите флажок "перезапустить рабочий процесс (в минутах)":

![](aspnet-and-iis6/_static/image18.jpg)

Нажмите кнопку "Применить" и "ОК", чтобы закрыть диалоговое окно свойств. Повторите эти действия для всех доступных пулов приложений.

## <a name="granting-write-access-to-the-file-system"></a>Предоставление доступа на запись файловой системе

Если приложению требуется доступ на запись в файловой системе и используется NTFS, необходимо изменить список управления доступом (ACL) в папке или файле, чтобы предоставить ASP.NET доступ.

Например, чтобы предоставить ASP.NET доступ на запись к папке c:\inetpub\wwwroot, которая находится в первом открытом обозревателе, и перейдите в каталог:

![](aspnet-and-iis6/_static/image19.jpg)

Затем щелкните правой кнопкой мыши каталог, например wwwroot, и выберите пункт Свойства. После открытия диалогового окна свойств перейдите на вкладку "безопасность":

![](aspnet-and-iis6/_static/image20.jpg)

Каталог к:\инетпуб\ввврут\ является особым каталогом, в котором для специальной группы IIS 6,0 WPG "\_IIS &amp; Execute" уже предоставлен доступ на чтение, просмотр содержимого папки и разрешение на чтение. Однако для предоставления разрешения на запись необходимо установить флажок Разрешить для записи:

![](aspnet-and-iis6/_static/image21.jpg)

IIS 6,0 теперь имеет разрешение на запись в эту папку. Чтобы предоставить разрешения на запись для других папок, выполните следующие действия. Обратите внимание, что может потребоваться добавить группу IIS\_WPG, если она еще не создана.

> [!CAUTION]
> Предоставление разрешения на запись в IIS\_WPG позволит любому приложению ASP.NET записывать в этот каталог.

## <a name="supporting-integrated-authentication-with-sql-server"></a>Поддержка встроенной проверки подлинности с помощью SQL Server

Встроенная проверка подлинности позволяет SQL Server использовать проверку подлинности Windows NT для проверки SQL Server учетных записей входа. Это позволяет пользователю обходить стандартный процесс входа SQL Server. При таком подходе сетевой пользователь может получить доступ к SQL Server базе данных без указания отдельной идентификации или пароля, поскольку SQL Server получает сведения о пользователях и паролях из процесса сетевой безопасности Windows NT.

Выбор встроенной проверки подлинности для приложений ASP.NET является хорошим выбором, так как в строке подключения приложения не хранятся учетные данные. Строка подключения, используемая для подключения к SQL, будет выглядеть следующим образом:

`"server=localhost; database=Northwind;Trusted_Connection=true"`

Эта строка подключения указывает SQL Server использовать учетные данные Windows приложения, пытающегося получить доступ к SQL Server. В случае с ASP.NET/IIS 6 это будет учетная запись в группе IIS\_WPG.

Чтобы включить встроенную проверку подлинности между SQL Server и ASP.NET, необходимо сначала убедиться, что SQL Server настроена для встроенной проверки подлинности или смешанного режима проверки подлинности. чтобы определить это, обратитесь к администратору базы данных. Если SQL Server находится в одном из этих двух режимов, можно использовать встроенную проверку подлинности.

Открыть диспетчер SQL Server Enterprise (Start | Программы | Microsoft SQL Server | Enterprise Manager), выберите соответствующий сервер и разверните папку Безопасность:

![](aspnet-and-iis6/_static/image22.jpg)

Если группа "БУИЛТИНТ\ИИС\_WPG" отсутствует в списке, щелкните имена входа правой кнопкой мыши и выберите "создать login:

![](aspnet-and-iis6/_static/image23.jpg)

В текстовом поле "имя:" введите "[имя сервера или домена] \ИИС\_WPG" или нажмите кнопку "многоточие", чтобы открыть средство выбора пользователей или групп Windows NT:

![](aspnet-and-iis6/_static/image24.jpg)

Выберите группу IIS\_WPG в текущем компьютере и нажмите кнопку "Добавить" и ОК, чтобы закрыть средство выбора.

Необходимо также задать базу данных по умолчанию и разрешения на доступ к базе данных. Чтобы задать базу данных по умолчанию, выберите в раскрывающемся списке пункт ниже, например Northwind.

![](aspnet-and-iis6/_static/image25.jpg)

Затем перейдите на вкладку доступ к базе данных:

![](aspnet-and-iis6/_static/image26.jpg)

Установите флажок Разрешить для каждой базы данных, доступ к которой требуется разрешить. Кроме того, необходимо выбрать роли базы данных, после чего проверка владельца\_DB обеспечит наличие у вашего имени входа всех необходимых разрешений для управления и использования выбранной базы данных.

Нажмите кнопку ОК, чтобы закрыть диалоговое окно Свойства. Теперь приложение ASP.NET настроено для поддержки встроенной проверки подлинности SQL Server.

## <a name="dont-run-aspnet-10-in-iis-60-native-mode"></a>Не запускать ASP.NET 1,0 в собственном режиме IIS 6,0

ASP.NET 1,0 для IIS 6,0 поддерживается только в режиме совместимости IIS 5.

Чтобы настроить ASP.NET 1,0 для работы в режиме совместимости с IIS 5,0, откройте диспетчер служб Интернета и щелкните правой кнопкой мыши веб-сайты и выберите пункт Свойства:

![](aspnet-and-iis6/_static/image27.jpg)

Перейти на вкладку "служба" и проверить? Запускать веб-службу в режиме изоляции IIS 5,0?:

![](aspnet-and-iis6/_static/image28.jpg)
