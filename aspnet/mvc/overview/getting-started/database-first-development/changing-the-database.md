---
uid: mvc/overview/getting-started/database-first-development/changing-the-database
title: Учебник. Изменить базу данных для EF Database First с помощью приложения ASP.NET MVC
description: Это руководство посвящено выполнении обновления структуры базы данных и распространение этого изменения на протяжении всего веб-приложения.
author: Rick-Anderson
ms.author: riande
ms.date: 01/28/2019
ms.topic: tutorial
ms.assetid: cfd5c083-a319-482e-8f25-5b38caa93954
msc.legacyurl: /mvc/overview/getting-started/database-first-development/changing-the-database
msc.type: authoredcontent
ms.openlocfilehash: 52cad1120908cf0d4f85770f8e2690f9415c5f56
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57038711"
---
# <a name="tutorial-change-the-database-for-ef-database-first-with-aspnet-mvc-app"></a>Учебник. Изменить базу данных для EF Database First с помощью приложения ASP.NET MVC

С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям для отображения, изменения и создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.

Это руководство посвящено выполнении обновления структуры базы данных и распространение этого изменения на протяжении всего веб-приложения.

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Добавление столбца
> * Добавьте свойство к представлениям

## <a name="prerequisites"></a>Предварительные требования

* [Создание представлений](generating-views.md)

## <a name="add-a-column"></a>Добавление столбца

Если обновить структуру таблицы в базе данных, необходимо убедиться, что изменение распространяется на модели данных, представления и контроллера.

В этом учебнике вы добавите нового столбца на таблицу "Student" для записи отчество учащегося. Чтобы добавить этот столбец, откройте проект базы данных и откройте файл Student.sql. Через конструктор или кода T-SQL, добавьте столбец с именем **MiddleName** , NVARCHAR(50) и допускает значения NULL.

Разверните это изменение в локальную базу данных, запустив проект базы данных (или F5). Новое поле добавляется в таблицу. Если вы не видите его в обозревателе объектов SQL Server, нажмите кнопку "Обновить" в области.

![Показать новый столбец](changing-the-database/_static/image2.png)

Новый столбец существует в таблице базы данных, но он не существует в классе модели данных. Необходимо обновить модель, чтобы включить новый столбец. В **моделей** откройте **ContosoModel.edmx** файл для отображения на схеме модели. Обратите внимание на то, что модель Student не содержит свойство MiddleName. Щелкните правой кнопкой мыши в области конструктора и выберите **обновить модель из базы данных**.

В мастере обновлений, выберите **обновить** , а затем — **таблиц** > **dbo** > **учащихся**. Нажмите кнопку **Готово**.

После завершения процесса обновления схемы базы данных включает в себя новый **MiddleName** свойство. Сохранить **ContosoModel.edmx** файла. Сохраните этот файл для нового свойства передаются на **Student.cs** класса. Теперь обновления базы данных и модели.

Постройте решение.

## <a name="add-the-property-to-the-views"></a>Добавьте свойство к представлениям

К сожалению, представления по-прежнему не содержат новое свойство. Для обновления представления можно двумя способами - можно повторно создать представления, снова добавив формирования шаблонов для класса Student, или можно вручную добавить новое свойство в существующие представления. В этом руководстве вы добавите формирование шаблонов еще раз, так как не были внесены настраиваемые изменения в представления, автоматически создается. Можно вручную добавить свойство, когда были внесены изменения в представления и не хотите потерять внесенные изменения.

Чтобы обеспечить представления создаются повторно, удалите **учащихся** папке **представления**и удалить **StudentsController**. Щелкните, правой кнопкой мыши **контроллеров** папки и добавление формирования шаблонов для **учащихся** модели. Опять же, назовите контроллер **StudentsController**. Нажмите **Добавить**.

Сборку решения еще раз. Представлений теперь содержит указанное свойство MiddleName.

![Показать отчество](changing-the-database/_static/image5.png)

## <a name="next-steps"></a>Следующие шаги

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Добавлен столбец
> * Добавлено свойство к представлениям

Перейдите к следующему руководству, чтобы узнать, как настраивать представление для отображения сведений о записи учащегося.
> [!div class="nextstepaction"]
> [Настройка представления](customizing-a-view.md)