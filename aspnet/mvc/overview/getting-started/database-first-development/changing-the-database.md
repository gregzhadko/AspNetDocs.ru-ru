---
uid: mvc/overview/getting-started/database-first-development/changing-the-database
title: Руководство. изменение базы данных для EF Database First с помощью приложения ASP.NET MVC
description: В этом учебнике рассматривается обновление структуры базы данных и распространение изменений по всему веб-приложению.
author: Rick-Anderson
ms.author: riande
ms.date: 01/28/2019
ms.topic: tutorial
ms.assetid: cfd5c083-a319-482e-8f25-5b38caa93954
msc.legacyurl: /mvc/overview/getting-started/database-first-development/changing-the-database
msc.type: authoredcontent
ms.openlocfilehash: 52cad1120908cf0d4f85770f8e2690f9415c5f56
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78499524"
---
# <a name="tutorial-change-the-database-for-ef-database-first-with-aspnet-mvc-app"></a>Руководство. изменение базы данных для EF Database First с помощью приложения ASP.NET MVC

С помощью MVC, Entity Framework и шаблонов ASP.NET можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям отображать, изменять, создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.

В этом учебнике рассматривается обновление структуры базы данных и распространение изменений по всему веб-приложению.

Изучив это руководство, вы:

> [!div class="checklist"]
> * Добавление столбца
> * Добавление свойства в представления

## <a name="prerequisites"></a>предварительные требования

* [Создание представлений](generating-views.md)

## <a name="add-a-column"></a>Добавление столбца

При обновлении структуры таблицы в базе данных необходимо убедиться, что изменение распространяется на модель данных, представления и контроллер.

В этом руководстве вы добавите новый столбец в таблицу Student, чтобы записать отчество учащегося. Чтобы добавить этот столбец, откройте проект базы данных и откройте файл Student. SQL. С помощью конструктора или кода T-SQL добавьте столбец с именем **MiddleName** , который имеет тип nvarchar (50) и допускает значения NULL.

Разверните это изменение в локальной базе данных, запустив проект базы данных (или нажав клавишу F5). Новое поле будет добавлено в таблицу. Если вы не видите его в обозреватель объектов SQL Server, нажмите кнопку Обновить на панели.

![отобразить новый столбец](changing-the-database/_static/image2.png)

Новый столбец существует в таблице базы данных, но в настоящее время он не существует в классе модели данных. Необходимо обновить модель, включив в нее новый столбец. В папке **Models** откройте файл **контосомодел. EDMX** , чтобы отобразить диаграмму модели. Обратите внимание, что модель Student не содержит свойство MiddleName. Щелкните правой кнопкой мыши в любом месте области конструктора и выберите пункт **Обновить модель из базы данных**.

В мастере обновления перейдите на вкладку **Обновление** , а затем выберите **таблицы** > **dbo** > **Student**. Нажмите кнопку **Готово**.

После завершения процесса обновления диаграмма базы данных включает новое свойство **MiddleName** . Сохраните файл **контосомодел. EDMX** . Необходимо сохранить этот файл, чтобы новое свойство распространялось на класс **Student.CS** . Теперь база данных и модель обновлены.

Создайте решение.

## <a name="add-the-property-to-the-views"></a>Добавление свойства в представления

К сожалению, представления по-прежнему не содержат нового свойства. Чтобы обновить представления с двумя параметрами, можно либо повторно создать представления, снова добавив формирование шаблонов для класса Student, либо добавить новое свойство в существующие представления вручную. В этом учебнике вы добавите формирование шаблонов еще раз, так как вы не внесли какие-либо изменения в автоматически создаваемые представления. Вы можете добавить свойство вручную, когда вы внесли изменения в представления и не хотите потерять эти изменения.

Чтобы убедиться, что представления созданы повторно, удалите папку **students** в области **представления**и удалите **StudentsController**. Затем щелкните правой кнопкой мыши папку **Controllers** и добавьте формирование шаблонов для модели **учащихся** . Снова назовите контроллер **StudentsController**. Выберите **Добавить**.

Выполните повторную сборку решения. Представления теперь содержат свойство MiddleName.

![показывать отчество](changing-the-database/_static/image5.png)

## <a name="next-steps"></a>Дальнейшие действия

Изучив это руководство, вы:

> [!div class="checklist"]
> * Добавлен столбец
> * Добавлено свойство в представления

Перейдите к следующему руководству, чтобы узнать, как настроить представление для отображения сведений о записи учащегося.
> [!div class="nextstepaction"]
> [Настройка представления](customizing-a-view.md)