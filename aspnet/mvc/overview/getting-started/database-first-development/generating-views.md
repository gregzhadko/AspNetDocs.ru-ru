---
uid: mvc/overview/getting-started/database-first-development/generating-views
title: Учебник. Создание представлений для EF Database First с помощью приложения ASP.NET MVC
description: В этом учебнике рассматривается использование формирования шаблонов ASP.NET для создания контроллеров и представлений.
author: Rick-Anderson
ms.author: riande
ms.date: 01/28/2019
ms.topic: tutorial
ms.assetid: 669367cf-8e30-4eb6-821d-10a7d9bb906c
msc.legacyurl: /mvc/overview/getting-started/database-first-development/generating-views
msc.type: authoredcontent
ms.openlocfilehash: e71e13e22d8a72e1699cfc70d4d93af603edba5b
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78499476"
---
# <a name="tutorial-generate-views-for-ef-database-first-with-aspnet-mvc-app"></a>Учебник. Создание представлений для EF Database First с помощью приложения ASP.NET MVC

С помощью MVC, Entity Framework и шаблонов ASP.NET можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям отображать, изменять, создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.

В этом учебнике рассматривается использование формирования шаблонов ASP.NET для создания контроллеров и представлений.

Изучив это руководство, вы:

> [!div class="checklist"]
> * Добавление шаблона
> * Добавить ссылки на новые представления
> * Отображение представлений учащихся
> * Отображение представлений регистрации

## <a name="prerequisite"></a>Предварительные требования

* [Создание веб-приложения и моделей данных](creating-the-web-application.md)

## <a name="add-scaffold"></a>Добавление шаблона

Все готово для создания кода, который предоставит стандартные операции с данными для классов модели. Код добавляется путем добавления элемента шаблона. Существует множество параметров для типа шаблонов, которые можно добавить. в этом руководстве шаблон будет включать контроллер и представления, соответствующие моделям учащихся и регистраций, созданным в предыдущем разделе.

Чтобы обеспечить согласованность в проекте, необходимо добавить новый контроллер в папку существующие **контроллеры** . Щелкните правой кнопкой мыши папку **Controllers** и выберите **Добавить** > **Новый**шаблонный элемент.

Выберите **контроллер MVC 5 с представлениями с помощью параметра Entity Framework** . Этот параметр позволяет создать контроллер и представления для обновления, удаления, создания и отображения данных в модели.

![Добавление контроллера MVC](generating-views/_static/image2.png)

Выберите **Student (контососите. Models)** для класса Model и выберите **контосауниверситидатаентитиес (контососите. Models)** для класса контекста. В качестве имени контроллера следует использовать **StudentsController**.

Нажмите кнопку **Добавить**.

Если появляется сообщение об ошибке, это может быть вызвано тем, что проект не был построен в предыдущем разделе. Если да, попробуйте выполнить сборку проекта, а затем снова добавьте шаблонный элемент.

После завершения создания кода вы увидите новый контроллер и представления в **контроллерах** и **представлениях** проекта > **учащихся** .

Выполните те же действия еще раз, но добавьте шаблон для класса **регистрации** . По завершении вы получите файл **EnrollmentsController.CS** и папку в **представлениях** с именами **регистрации** с представлениями создание, удаление, сведения, редактирование и индекс.

## <a name="add-links-to-new-views"></a>Добавить ссылки на новые представления

Чтобы упростить переход к новым представлениям, можно добавить пару гиперссылок в представления индекса для учащихся и регистраций. Откройте файл в **представлении** > **Домашняя** > *index. cshtml*, который является домашней страницей для сайта. Добавьте следующий код под Jumbotron.

[!code-cshtml[Main](generating-views/samples/sample1.cshtml)]

Для метода ActionLink первым параметром является текст, отображаемый в ссылке. Вторым параметром является действие, а третий параметр — имя контроллера. Например, первая ссылка указывает на действие index в StudentsController. Фактическая гиперссылка создается на основе этих значений. Первая ссылка в конечном итоге переводит пользователей в файл **index. cshtml** в папке **views/Students** .

## <a name="display-student-views"></a>Отображение представлений учащихся

Вы убедитесь, что код, добавленный в проект, правильно отображает список учащихся и позволяет пользователям изменять, создавать или удалять записи учащихся в базе данных.

Щелкните правой кнопкой мыши файл **views** > **Home** > *index. cshtml* и выберите **Просмотреть в браузере**. На домашней странице приложения выберите **список учащихся**.

![](generating-views/_static/image6.png)

На странице **индекс** Обратите внимание на список учащихся и ссылок для изменения этих данных. Выберите ссылку **создать** и укажите некоторые значения для нового учащегося. Нажмите кнопку **создать**и обратите внимание, что новый учащийся добавлен в список.

Вернитесь на страницу **индекса** , щелкните ссылку **изменить** и измените некоторые значения учащегося. Нажмите кнопку **сохранить**и обратите внимание, что запись учащегося изменена.

Наконец, выберите ссылку **Удалить** и подтвердите, что вы хотите удалить запись, нажав кнопку **Удалить** .

Без написания кода вы добавили представления, которые выполняют общие операции с данными в таблице Student.

Возможно, вы заметили, что текстовая метка для поля основана на свойстве базы данных (например, **LastName**), которое не обязательно должно отображаться на веб-странице. Например, имя метки может быть **фамилией**. Вы сможете устранить эту проблему с отображением позже в этом руководстве.

## <a name="display-enrollment-views"></a>Отображение представлений регистрации

База данных включает связь «один ко многим» между таблицами учащихся и регистраций, а также связь «один ко многим» между таблицами «курс» и «регистрация». Представления для регистрации правильно обрабатывали эти связи. Перейдите на домашнюю страницу сайта и выберите ссылку на **список регистраций** , а затем щелкните **создать** ссылку.

Представление отображает форму для создания новой записи регистрации. В частности, обратите внимание, что форма содержит раскрывающийся список **CourseID** и раскрывающийся список **StudentId** . Оба значения заполняются значениями из связанных таблиц.

Кроме того, проверка указанных значений автоматически применяется в зависимости от типа данных поля. **Оценка** требует числового значения, поэтому при попытке предоставить несовместимое значение выводится сообщение об ошибке: *поле Grade должно быть числом.*

Вы проверили, что автоматически создаваемые представления позволяют пользователям работать с данными в базе данных. В следующем учебнике этой серии будет обновлена база данных и внесены соответствующие изменения в веб-приложение.

## <a name="next-steps"></a>Дальнейшие действия

Изучив это руководство, вы:

> [!div class="checklist"]
> * Добавлен шаблон
> * Добавлены ссылки на новые представления
> * Отображаемые представления учащихся
> * Отображаемые представления регистрации

Перейдите к следующему руководству, чтобы узнать, как изменить базу данных.
> [!div class="nextstepaction"]
> [Изменение базы данных](changing-the-database.md)