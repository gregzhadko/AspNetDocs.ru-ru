---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: Учебник. Начало работы с EF Database First с помощью MVC 5
description: Этом руководстве показано, как начать с существующей базы данных и быстро создавать веб-приложения, который позволяет пользователям взаимодействовать с данными.
author: Rick-Anderson
ms.author: riande
ms.date: 01/15/2019
ms.topic: tutorial
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: a760767839a834a9c7e9fe358a3fd806a833261f
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121175"
---
# <a name="tutorial-get-started-with-ef-database-first-using-mvc-5"></a>Учебник. Начало работы с EF Database First с помощью MVC 5

С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям для отображения, изменения и создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных. В последней части серии вы узнаете, как добавлять заметки к данным в модели данных, чтобы указать требования к проверке и формат отображения. Когда все будет готово, можно перейти к Azure статья и Дополнительные сведения о развертывании приложений .NET и базы данных SQL в службе приложений Azure.

Этом руководстве показано, как начать с существующей базы данных и быстро создавать веб-приложения, который позволяет пользователям взаимодействовать с данными. Создание веб-приложения использует Entity Framework 6 и MVC 5. Компонент формирования шаблонов ASP.NET позволяет автоматически создавать код для отображения, обновления, создания и удаления данных. С помощью средства публикации в Visual Studio, вы можете легко развернуть сайта и базы данных в Azure.

Части этой серии рассматривается создание базы данных и заполнение его данными.

В этой серии было написано с материалами из том Дайкстра и Рик Андерсон. Она была улучшена зависимости на отзывы от пользователей в разделе "Примечания".

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Настройка базы данных

## <a name="prerequisites"></a>Предварительные требования

[Visual Studio 2017](https://visualstudio.microsoft.com/downloads/)

## <a name="set-up-the-database"></a>Настройка базы данных

Чтобы имитировать среду размещения существующей базы данных, сначала создать базу данных с предварительно заполняется данными и затем создать веб-приложения, которое подключается к базе данных.

Этот учебник был разработан использование LocalDB с Visual Studio 2017. Вместо LocalDB можно использовать существующий сервер базы данных, но в зависимости от установленной версии Visual Studio и тип базы данных, все средства анализа данных в Visual Studio может не поддерживаться. Если средства недоступны для базы данных, может потребоваться выполнить некоторые шаги конкретной базы данных в пакет управления для базы данных.

Если у вас есть проблема с инструменты для баз данных в вашей версии Visual Studio, убедитесь, что вы установили последнюю версию инструменты для баз данных. Сведения об обновлении или установке инструменты для баз данных, см. в разделе [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).

Запустите Visual Studio и создайте **проект базы данных SQL Server**. Назовите проект **ContosoUniversityData**.

![Создать проект базы данных](setting-up-database/_static/image1.png)

Теперь у вас есть пустая база данных. Чтобы убедиться, что эта база данных можно развернуть в Azure, необходимо установить базу данных SQL Azure в качестве целевой платформы для проекта. Задание целевой платформы не развертывает фактически базы данных; Это только означает, что проект базы данных будет убедитесь, что структуры базы данных совместим с целевой платформой. Чтобы задать целевую платформу, откройте **свойства** для проекта и выберите **базы данных SQL Microsoft Azure** для целевой платформы.

Можно создавать таблицы, необходимых для этого руководства путем добавления скриптов SQL, которые определяют таблицы. Щелкните правой кнопкой мыши проект и добавить новый элемент. Выберите **таблиц и представлений** > **таблицы** и назовите его *учащихся*.

В файле таблицы замените следующий код, чтобы создать таблицу команду T-SQL.

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

Обратите внимание, что окне конструктора автоматически синхронизирует с кодом. Вы можете работать с код или конструктор.

![Показать код и Дизайн](setting-up-database/_static/image5.png)

Добавьте другой таблицы. Время, назовите его курс и используйте следующую команду T-SQL.

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

И повторить еще раз, чтобы создать таблицу с именем регистрации.

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

Можно заполнить базу данных данными через сценарий, выполняемый после развертывания базы данных. Добавьте сценарий после развертывания проекта. Щелкните правой кнопкой мыши проект и добавить новый элемент. Выберите **пользовательские скрипты** > **скрипт после развертывания**. Можно использовать имя по умолчанию.

Добавьте следующий код T-SQL в скрипт после развертывания. Этот скрипт просто добавляет данные в базу данных при обнаружении нет соответствующей записи. Он не перезаписать или удалить все данные, введенные в базу данных.

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

Важно отметить, что сценарий после развертывания выполняется каждый раз при развертывании проекта базы данных. Таким образом необходимо тщательно проанализировать требования к при записи этого скрипта. В некоторых случаях вы можете начинать с набором известных данных, каждый раз при развертывании проекта. В других случаях можно не изменять существующие данные любым способом. На основе требований, можно решить, необходим ли сценарий после развертывания или что необходимо для включения в скрипт. Дополнительные сведения о заполнении базы данных с помощью скрипта после развертывания см. в разделе [данных, включая, в проект базы данных SQL Server](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).

Теперь у вас есть 4 файлов скриптов SQL, но не фактический таблицы. Все готово для развертывания проекта базы данных localdb. В Visual Studio щелкните кнопку "Пуск" (или F5) для создания и развертывания проекта базы данных. Проверьте **вывода** tab, чтобы убедиться в успешном построения и развертывания.

Для просмотра, создания новой базы данных, откройте **обозреватель объектов SQL Server** и найдите имя проекта в нужной базе данных локального сервера (в данном случае **\ProjectsV13 (localdb)**).

Чтобы увидеть, что таблицы заполняются данными, щелкните правой кнопкой мыши таблицу и выберите **данные представления**.

![Показать таблицу данных](setting-up-database/_static/image9.png)

Редактируемое представление таблицы отображается. Например, если вы выберите **таблиц** > **dbo.course** > **данные представления**, вы увидите таблицу с тремя столбцами (**курс**, **Title**, и **кредиты**) и четырьмя строками.

## <a name="additional-resources"></a>Дополнительные ресурсы

Вводный пример шаблона разработки Code First, см. в разделе [Приступая к работе с ASP.NET MVC 5](../introduction/getting-started.md). Более сложный пример, см. в разделе [Создание модели данных Entity Framework для приложения ASP.NET MVC 4](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).

Рекомендации по выбору подхода Entity Framework, см. в разделе [принципы разработки с использованием Entity Framework](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).

## <a name="next-steps"></a>Следующие шаги

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Настройка базы данных

Перейдите к следующему руководству, чтобы научиться создавать веб-приложение и модели данных.
> [!div class="nextstepaction"]
> [Создание веб-приложение и модели данных](creating-the-web-application.md)
