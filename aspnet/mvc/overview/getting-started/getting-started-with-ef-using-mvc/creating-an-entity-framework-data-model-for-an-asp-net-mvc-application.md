---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
title: Учебник. Начало работы с Entity Framework 6 Code First с помощью MVC 5 | Документация Майкрософт
description: В этой серии руководств вы узнаете, как создать приложение ASP.NET MVC 5, использующий Entity Framework 6 для доступа к данным.
author: tdykstra
ms.author: riande
ms.date: 01/22/2019
ms.topic: tutorial
ms.assetid: 00bc8b51-32ed-4fd3-9745-be4c2a9c1eaf
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: a00a5a3aa295c2584b90abbf931c258c9e1b58ca
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57057971"
---
# <a name="tutorial-get-started-with-entity-framework-6-code-first-using-mvc-5"></a>Учебник. Начало работы с Entity Framework 6 Code First с помощью MVC 5

> [!NOTE]
> Для разработки новых приложений мы рекомендуем [ASP.NET Core Razor Pages](/aspnet/core/razor-pages) по ASP.NET MVC контроллеры и представления. Для следующего вида серии руководств см. в разделе с помощью Razor Pages, [руководства: Начало работы с Razor Pages в ASP.NET Core](/aspnet/core/tutorials/razor-pages/razor-pages-start). Новый учебник.
> * проще для выполнения;
> * содержит больше рекомендаций по EF Core;
> * использует более эффективные запросы;
> * более актуально, так как используются новейшие API;
> * охватывает дополнительные возможности;
> * является предпочтительным подходом для разработки новых приложений.

В этой серии руководств вы узнаете, как создать приложение ASP.NET MVC 5, использующий Entity Framework 6 для доступа к данным. В этом учебнике используется Code First рабочего процесса. Сведения о том, как выбрать Code First, Database First или Model First, см. в разделе [создать модель](/ef/ef6/modeling/).

В этой серии руководств описывается построение примера приложения университета Contoso. Пример приложения веб-сайт простой университета. С ним вы можете просматривать и обновлять учащихся, курсах и сведения о преподавателе. Ниже приведены два созданных экранов.

![Students_Index_page](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image1.png)

![Изменение параметров учащегося](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image2.png)

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Создать веб-приложение MVC
> * Настройка стиля сайта
> * Установка Entity Framework 6
> * Создание модели данных
> * Создание контекста базы данных
> * Инициализация базы данных с тестовыми данными
> * Настройка EF 6 для использования LocalDB
> * Создание контроллера и представлений
> * Просмотр базы данных

## <a name="prerequisites"></a>Предварительные требования

* [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017)

## <a name="create-an-mvc-web-app"></a>Создать веб-приложение MVC

1. Откройте Visual Studio и создайте C# веб-проекта с помощью **веб-приложение ASP.NET (.NET Framework)** шаблона. Назовите проект *ContosoUniversity* и выберите **ОК**.

   !["Новый проект диалоговое окно" в Visual Studio](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/new-project-dialog.png)

1. В **новый веб-приложение ASP.NET - ContosoUniversity**выберите **MVC**.

   ![Web app диалоговое окно нового в Visual Studio](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/new-web-app-dialog.png)

    > [!NOTE]
    > По умолчанию **проверки подлинности** параметру присваивается **без проверки подлинности**. В этом учебнике веб-приложение не требует пользователи выполняли вход. Кроме того он не ограничивает доступ, в зависимости от того, кто выполнил вход.

1. Нажмите кнопку **ОК**, чтобы создать проект.

## <a name="set-up-the-site-style"></a>Настройка стиля сайта

Выполните незначительную настройку меню, макета и домашней страницы сайта.

1. Откройте *Views\Shared\\_Layout.cshtml*и внесите следующие изменения:

   - Замените все вхождения «My ASP.NET Application» и «Имя приложения» на «Contoso University».
   - Добавление пунктов меню для учащихся, курсов, преподавателей и отделов и удалите запись контакта.

   Изменения выделены в следующем фрагменте кода:

   [!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample1.cshtml?highlight=6,19,24-27,38)]

2. В *Views\Home\Index.cshtml*, замените содержимое файла следующим кодом, который заменяет текст о ASP.NET и MVC об этом приложении:

   [!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample2.cshtml)]

3. Нажмите клавиши Ctrl + F5 для запуска веб-сайта. Появится домашняя страница с меню.

## <a name="install-entity-framework-6"></a>Установка Entity Framework 6

1. Из **средства** меню, выберите **диспетчер пакетов NuGet**, а затем выберите **консоль диспетчера пакетов**.

2. В **консоль диспетчера пакетов** окно, введите следующую команду:

   ```text
   Install-Package EntityFramework
   ```

Этот шаг является одним из нескольких шагов с учебником можно сделать вручную, но, могло быть сделано автоматически с помощью функции формирования шаблонов ASP.NET MVC. Вы выполняете их вручную, чтобы вы могли видеть шаги, необходимые для использования Entity Framework (EF). Вы воспользуетесь формирования шаблонов позже для создания контроллера и представлений MVC. Альтернативным вариантом является для формирования шаблонов автоматически установить пакет EF NuGet создать класс контекста базы данных и создания строки подключения. Когда вы будете готовы сделать это таким образом, что необходимо сделать всего лишь пропустить эти шаги и сформировать шаблон контроллера MVC после создания классов сущностей.

## <a name="create-the-data-model"></a>Создание модели данных

Теперь необходимо создать классы сущностей для приложения университета Contoso. Сначала вы возьмете следующих трех сущностей:

**Курс** <-> **регистрации** <-> **учащегося**

| Сущности | Relationship |
| -------- | ------------ |
| Курс для регистрации | один ко многим |
| Учащегося для регистрации | один ко многим |

Между сущностями `Student` и `Enrollment`, а также между сущностями `Course` и `Enrollment` существует отношение "один ко многим". Другими словами, учащийся может быть зарегистрирован в любом количестве курсов, а в отдельном курсе может быть зарегистрировано любое количество учащихся.

В следующих разделах вы создадите класс для каждого из этих сущностей.

> [!NOTE]
> При попытке компиляции проекта до завершения создания всех этих классов сущностей, вы получите ошибки компилятора.

### <a name="the-student-entity"></a>Сущность Student

- В *моделей* папке создайте файл класса с именем *Student.cs* щелкнув правой кнопкой папку, в **обозревателе решений** и выбрав **добавить**  >  **Класс**. Замените код шаблона следующим кодом:

   [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample3.cs)]

Свойство `ID` будет использоваться в качестве столбца первичного ключа в таблице базы данных, соответствующей этому классу. По умолчанию Entity Framework интерпретирует свойство с именем `ID` или *classname* `ID` как первичный ключ.

Свойство `Enrollments` является *свойством навигации*. Свойства навигации содержат другие сущности, связанные с этой сущностью. В этом случае `Enrollments` свойство `Student` сущность будет содержать все `Enrollment` сущностей, которые связаны `Student` сущности. Другими словами если заданный `Student` строк в базе данных имеет два связанных `Enrollment` строк (значение строки, которые содержат первичный ключ этого учащегося в их `StudentID` внешний ключевой столбец), в котором `Student` сущности `Enrollments` свойство навигации будет содержать две этих `Enrollment` сущностей.

Свойства навигации, обычно определяются как `virtual` таким образом, чтобы они можно воспользоваться преимуществами определенные функциональные возможности Entity Framework, такие как *отложенная загрузка*. (Отложенная загрузка, будет рассматриваться далее в [чтение связанных данных](reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) далее в этой серии руководств.)

Если свойство навигации может содержать несколько сущностей (как в отношениях "многие ко многим" или "один ко многим"), оно должно иметь тип списка, допускающий добавление, удаление и обновление записей, такой как `ICollection`.

### <a name="the-enrollment-entity"></a>Сущность Enrollment

- В папке *Models* создайте файл *Enrollment.cs* и замените существующий код следующим кодом:

   [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample4.cs)]

`EnrollmentID` Свойство будет иметь первичный ключ; эта сущность использует *classname* `ID` шаблонов вместо `ID` , как вы видели в `Student` сущности. Как правило, следует выбирать один шаблон, который будет использоваться в рамках всей модели данных. В этом случае демонстрируется возможность использования любого из шаблонов. В этом руководстве, вы увидите как с помощью `ID` без `classname` позволяет упростить реализацию наследования в модели данных.

`Grade` Свойство [перечисления](/ef/ef6/modeling/code-first/data-types/enums). Знак вопроса после `Grade` объявление типа указывает, что `Grade` свойство [допускает значения NULL](/dotnet/csharp/programming-guide/nullable-types/using-nullable-types). Корпоративного класса, который имеет значение null отличается от нулевой оценки тем — значение null означает, что это оценка не известна или еще не назначена.

Свойство `StudentID` представляет собой внешний ключ. Ему соответствует свойство навигации `Student`. Сущность `Enrollment` связана с одной сущностью `Student`, поэтому это свойство может содержать одну сущность `Student` (в отличие от представленного ранее свойства навигации `Student.Enrollments`, которое может содержать несколько сущностей `Enrollment`).

Свойство `CourseID` представляет собой внешний ключ. Ему соответствует свойство навигации `Course`. Сущность `Enrollment` связана с одной сущностью `Course`.

Платформа Entity Framework интерпретирует свойство как свойство внешнего ключа, если оно имеет имя *&lt;имя свойства навигации&gt;&lt;имя свойство первичного ключа&gt;* (например, `StudentID`для `Student` свойство навигации с момента `Student` — первичный ключ сущности `ID`). Свойства внешнего ключа также могут называться так же просто *&lt;имя свойство первичного ключа&gt;* (например, `CourseID` поскольку `Course` — первичный ключ сущности `CourseID`).

### <a name="the-course-entity"></a>Сущность Course

- В *моделей* папке создайте *Course.cs*, заменив код шаблона следующим кодом:

   [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample5.cs)]

Свойство `Enrollments` является свойством навигации. Сущность `Course` может быть связана с любым числом сущностей `Enrollment`.

Мы скажем: сведения о <xref:System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute> атрибута в этом руководстве этой серии. Фактически, этот атрибут позволяет ввести первичный ключ для курса, а не использовать базу данных, чтобы создать его.

## <a name="create-the-database-context"></a>Создание контекста базы данных

Основным классом, который координирует функциональные возможности Entity Framework для заданной модели данных является *контекст базы данных* класса. Этот класс создается путем наследования от [System.Data.Entity.DbContext](https://msdn.microsoft.com/library/system.data.entity.dbcontext(v=vs.113).aspx) класса. В коде указываются сущности, которые включаются в модель данных. Также вы можете настроить реакцию платформы Entity Framework на некоторые события. В этом проекте соответствующий класс называется `SchoolContext`.

- Чтобы создать папку в проекте ContosoUniversity, щелкните правой кнопкой мыши проект в **обозревателе решений** и нажмите кнопку **добавить**, а затем нажмите кнопку **новую папку**. Назовите новую папку *DAL* (для уровня доступа к данным). В этой папке создайте новый файл класса с именем *SchoolContext.cs*и замените код шаблона следующим кодом:

   [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample6.cs)]

### <a name="specify-entity-sets"></a>Укажите наборы сущностей

Этот код создает [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.113).aspx) свойство для каждого набора сущностей. В терминологии Entity Framework *набор сущностей* обычно соответствует таблице базы данных и *сущности* соответствует строке в таблице.

> [!NOTE]
>
> Можно опустить `DbSet<Enrollment>` и `DbSet<Course>` инструкций и он будет работать так же. Платформа Entity Framework включает эти инструкции неявно поскольку `Student` ссылки на сущности `Enrollment` сущности и `Enrollment` ссылки на сущности `Course` сущности.

### <a name="specify-the-connection-string"></a>Укажите строку подключения

Имя строки подключения (который вы добавите в файл Web.config более поздней версии), переданный в конструктор.

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample7.cs?highlight=1)]

Можно также передавать в строке подключения вместо имени он хранится в файле Web.config. Дополнительные сведения о параметрах для указания базы данных для использования, см. в разделе [строки подключения и модели](/ef/ef6/fundamentals/configuring/connection-strings).

Если явно не указать строку подключения или имя одного, Entity Framework предполагает, что имя строки подключения — это же имя класса. Имя строки подключения по умолчанию в этом примере будут `SchoolContext`, так же, как то, что при указании явным образом.

### <a name="specify-singular-table-names"></a>Укажите имена таблиц в единственном числе

`modelBuilder.Conventions.Remove` Инструкции в [OnModelCreating](https://msdn.microsoft.com/library/system.data.entity.dbcontext.onmodelcreating(v=vs.103).aspx) метод предотвращает имена таблиц имена во множественном числе. Если вы не сделаете этого, созданные таблицы в базе данных будет назван `Students`, `Courses`, и `Enrollments`. Вместо этого будет имена таблиц `Student`, `Course`, и `Enrollment`. В среде разработчиков нет единого мнения о том, следует ли использовать имена таблиц во множественном числе. В этом руководстве используется существительные в единственном числе, но важно то, что вы можете выбрать любую форму, вы предпочитаете, включая или исключая эту строку кода.

## <a name="initialize-db-with-test-data"></a>Инициализация базы данных с тестовыми данными

Entity Framework можно автоматически создать (или удалить и повторно создать) базы данных автоматически при запуске приложения. Можно указать, что это следует делать каждый раз при запуске приложения или только в том случае, если модель не синхронизирован с существующей базой данных. Можно также написать `Seed` метод, Entity Framework вызывает автоматически после создания базы данных заполняет ее тестовыми данными.

Поведение по умолчанию — создать базу данных только в том случае, если он не существует (и создания исключения, если модель данных была изменена, и база данных уже существует). В этом разделе вы указываете, что базы данных нужно удалить и повторно создается при каждом изменении модели. Удаление базы данных приводит к потере всех данных. Обычно это хорошо во время разработки, так как `Seed` метод выполняется в том случае, если база данных создается заново и повторно создают тестовые данные. Однако в рабочей среде вы обычно не хотите потерять все данные каждый раз, когда необходимо изменить схему базы данных. Позже вы узнаете, как обрабатывать изменения модели с помощью Code First Migrations для изменения схемы базы данных вместо удаления и повторного создания базы данных.

1. В папке DAL, создайте новый файл класса с именем *SchoolInitializer.cs* и замените код шаблона следующим кодом, что приводит к базе данных создается при необходимости, и загружает тестовые данные в новую базу данных.

   [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample8.cs)]

   `Seed` Метод принимает объект контекста базы данных как входной параметр и код в метод использует этот объект для добавления новых сущностей в базу данных. Для каждого типа сущности, код создает коллекцию новых сущностей, добавляет их в соответствующий `DbSet` свойства, а затем сохраняет изменения в базе данных. Нет необходимости вызывать `SaveChanges` метод после каждой группы сущностей, как показано здесь, но это поможет вам найти источник проблемы, если возникает исключение, когда код записывает в базу данных.

2. Чтобы сообщить Entity Framework использовать инициализатор класса, добавьте элемент для `entityFramework` элемент в приложении *Web.config* файл (в корневой папке проекта), как показано в следующем примере:

   [!code-xml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample9.xml?highlight=2-6)]

   `context type` Указывает контекст полное имя класса и сборки, он находится, и `databaseinitializer type` указывает полное имя инициализатор класса и сборки, он выполняется. (Если вы не хотите использовать инициализатор EF, можно задать атрибут на `context` элемент: `disableDatabaseInitialization="true"`.) Дополнительные сведения см. в разделе [параметры файла конфигурации](/ef/ef6/fundamentals/configuring/config-file).

   Вместо установки инициализатор *Web.config* файл — это в коде, добавив `Database.SetInitializer` инструкцию, чтобы `Application_Start` метод в *Global.asax.cs* файл. Дополнительные сведения см. в разделе [инициализаторы основные сведения о базе данных в Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm).

Приложение теперь настроен так, что при доступе к базе данных в первый раз прогоне приложения, Entity Framework сравнивает базы данных в модель (вашей `SchoolContext` и классов сущностей). Если есть различия, приложение удаляет и повторно создает базу данных.

> [!NOTE]
> При развертывании приложения на веб-сервере в рабочей среде, необходимо удалить или отключить код, который удаляет и повторно создает базу данных. Можно сделать в следующем руководстве этой серии.

## <a name="set-up-ef-6-to-use-localdb"></a>Настройка EF 6 для использования LocalDB

[LocalDB](/sql/database-engine/configure-windows/sql-server-2016-express-localdb?view=sql-server-2017) — это облегченная версия СУБД SQL Server Express. Ее легко установить и настроить запускается по запросу и работает в пользовательском режиме. LocalDB выполняется в специального режима выполнения SQL Server Express, которая позволяет работать с базами данных как *.mdf* файлов. Файлы базы данных LocalDB можно поместить в *приложения\_данных* папку веб-проекта, если вы хотите иметь возможность копирования базы данных с проектом. Функции пользовательского экземпляра в SQL Server Express также позволяет работать с *.mdf* файлы, но функции пользовательского экземпляра устарело; таким образом, рекомендуется использовать LocalDB для работы с *.mdf* файлов. LocalDB устанавливается по умолчанию с помощью Visual Studio.

Как правило SQL Server Express не используется для рабочих веб-приложений. LocalDB в частности не рекомендуется для использования в рабочей среде с веб-приложение, так как он не предназначен для работы со службами IIS.

- В этом руководстве вы будете работать с LocalDB. Откройте приложение *Web.config* файл и добавьте `connectionStrings` элементом, предшествующим `appSettings` элемента, как показано в следующем примере. (Обязательно обновите *Web.config* файл в корневой папке проекта. Имеется также *Web.config* файл *представления* вложенную папку, не нужно обновлять.)

   [!code-xml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample10.xml?highlight=1-3)]

В строке подключения, вы добавили указано, что платформа Entity Framework будет использовать базу данных LocalDB с именем *ContosoUniversity1.mdf*. (Еще не существует базы данных, но он будет создан EF). Если вы хотите создать базу данных в вашей *приложения\_данных* папки, можно добавить `AttachDBFilename=|DataDirectory|\ContosoUniversity1.mdf` к строке подключения. Дополнительные сведения о строках подключения см. в разделе [строки подключения SQL Server для веб-приложений ASP.NET](/previous-versions/aspnet/jj653752(v=vs.110)).

Вам не нужен строку подключения в *Web.config* файл. Если вы не указали строку подключения, Entity Framework использует строку подключения по умолчанию, на основании класса контекста. Дополнительные сведения см. в разделе [Code First для новой базы данных](/ef/ef6/modeling/code-first/workflows/new-database).

## <a name="create-controller-and-views"></a>Создание контроллера и представлений

Теперь вы создадите веб-страницы для отображения данных. Процесс запроса данных автоматически инициирует создание базы данных. Вы начнете с создания нового контроллера. Но перед этим, построение проекта, чтобы сделать доступными для формирования шаблонов контроллера MVC классы модели и контексту.

1. Щелкните правой кнопкой мыши **контроллеров** папку в **обозревателе решений**выберите **добавить**и нажмите кнопку **создать шаблонный элемент**.
2. В **Добавление шаблона** выберите **контроллер MVC 5 с представлениями, использующий Entity Framework**, а затем выберите **добавить**.

     ![Добавление элемента формирования шаблонов диалогового окна в Visual Studio](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/add-scaffold.png)

3. В **Добавление контроллера** диалоговом окне задайте следующие параметры и нажмите **добавить**:

   - Класс модели: **Учащегося (ContosoUniversity.Models)**. (Если вы не видите этот параметр в раскрывающемся списке, постройте проект и повторите попытку.)
   - Класс контекста данных: **SchoolContext (ContosoUniversity.DAL)**.
   - Имя контроллера: **StudentController** (не StudentsController).
   - Оставьте значения по умолчанию для других полей.

     При нажатии кнопки **добавить**, создает шаблон *StudentController.cs* файл и набор представлений (*.cshtml* файлы), будут работать с контроллером. В будущем при создании проектов, использующих Entity Framework, вы можете также воспользоваться преимуществами некоторые дополнительные функции шаблон: создать свой первый класс модели, не создать строку подключения, а затем в **Добавление контроллера** укажите **новый контекст данных** , выбрав **+** рядом с пунктом **класс контекста данных**. Шаблон создаст вашей `DbContext` класс и подключение к строка, а также контроллеры и представления.
4. Visual Studio открывает *Controllers\StudentController.cs* файла. Вы увидите, что переменной класса был создан, создающий экземпляр объекта контекста базы данных:

     [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample11.cs)]

     `Index` Метод действия Получает список учащихся из *учащихся* сущности, установки по `Students` свойство экземпляра контекста базы данных:

     [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample12.cs)]

     *Student\Index.cshtml* представление отображает этот список в таблице:

     [!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample13.cshtml)]
5. Нажмите клавиши Ctrl + F5, чтобы запустить проект. (Если появится сообщение об ошибке «Не удается создать теневую копию», закройте браузер и повторите попытку.)

     Нажмите кнопку **учащихся** tab, чтобы просмотреть тестовые данные, `Seed` добавленные методом. В зависимости от размеров от — окно браузера, вы увидите ссылку на вкладку учащегося в верхнем адреса или вам придется щелкните в правом верхнем углу, чтобы увидеть эту ссылку.

     ![Кнопки меню](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image14.png)

## <a name="view-the-database"></a>Просмотр базы данных

При запуске на страницу учащихся и приложение пытается получить доступ к базе данных, EF обнаружил, что база данных отсутствует и создан. EF выполнили метод заполнения для заполнения базы данных с данными.

Можно использовать либо **обозревателя серверов** или **обозреватель объектов SQL Server** (SSOX) для просмотра базы данных в Visual Studio. В этом учебнике будет использоваться **обозревателя серверов**.

1. Закройте браузер.
2. В **обозревателя серверов**, разверните **подключения к данным** (может потребоваться сначала выберите «Обновить»), разверните **School контекста (ContosoUniversity)** и затем разверните  **Таблицы** отображения таблиц в новой базе данных.

3. Щелкните правой кнопкой мыши **учащихся** таблицы и нажмите кнопку **Показать таблицу данных** Чтобы просмотреть созданные столбцы и строки, которые были вставлены в таблицу.

4. Закрыть **обозревателя серверов** подключения.

*ContosoUniversity1.mdf* и *.ldf* файлы базы данных находятся в *% USERPROFILE %* папки.

Так как вы используете `DropCreateDatabaseIfModelChanges` инициализатора, теперь вы можете внести изменения в `Student` класса, снова запустить приложение и базы данных автоматически будет создана повторно в соответствии с внесенными изменениями. Например, если вы добавите `EmailAddress` свойства `Student` класса, снова запустите на страницу учащихся и снова посмотрим на таблицы еще раз, вы увидите новую `EmailAddress` столбца.

## <a name="conventions"></a>Соглашения

Объем кода, нужно было написать в платформе Entity Framework иметь возможность создать для вас всей базы данных сводится к минимуму из-за *соглашения*, или предположения, сделанные в Entity Framework. Некоторые из них уже было отмечено, или был использован без вашего сведений о них:

- Во множественном числе форм имен классов сущностей используются в качестве имен таблиц.
- В качестве имен столбцов используются имена свойств сущностей.
- Свойства сущности, которые называются `ID` или *classname* `ID` распознаются как свойства первичного ключа.
- Свойство интерпретируется как свойство внешнего ключа, если оно имеет имя *&lt;имя свойства навигации&gt;&lt;имя свойство первичного ключа&gt;* (например, `StudentID` для `Student` свойство навигации с момента `Student` — первичный ключ сущности `ID`). Свойства внешнего ключа также могут называться так же просто &lt;имя свойство первичного ключа&gt; (например, `EnrollmentID` поскольку `Enrollment` — первичный ключ сущности `EnrollmentID`).

Вы видели, что соглашения могут быть переопределены. Например, вы указали, что имена таблиц не должны быть имена во множественном числе, и вы увидите Далее как явным образом пометить свойство как свойство внешнего ключа.

## <a name="get-the-code"></a>Получение кода

[Скачать завершенный проект](https://webpifeed.blob.core.windows.net/webpifeed/Partners/ASP.NET%20MVC%20Application%20Using%20Entity%20Framework%20Code%20First.zip)

## <a name="additional-resources"></a>Дополнительные ресурсы

Дополнительные сведения о EF 6 см. в статьях:

* [Доступ к данным ASP.NET. Рекомендуемые ресурсы](../../../../whitepapers/aspnet-data-access-content-map.md)

* [Первый соглашения о коде](/ef/ef6/modeling/code-first/conventions/built-in)

* [Создание более сложной модели данных](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)

## <a name="next-steps"></a>Следующие шаги

В этом учебнике рассмотрены следующие задачи.

> [!div class="checklist"]
> * Создали веб-приложение MVC
> * Настройка стиля сайта
> * Установленные Entity Framework 6
> * Создание модели данных
> * Создание контекста базы данных
> * Инициализация базы данных с тестовыми данными
> * Настройка EF 6 для использования LocalDB
> * Создание контроллера и представлений
> * Просмотр базы данных

Перейдите к следующей статье, чтобы научиться просмотрите и настроить создание, чтение, обновление и удаление кода (CRUD) в контроллерах и представлениях.
> [!div class="nextstepaction"]
> [Реализация базовых функций CRUD](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)