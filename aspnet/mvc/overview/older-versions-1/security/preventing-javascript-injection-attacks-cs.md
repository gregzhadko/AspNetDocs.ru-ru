---
uid: mvc/overview/older-versions-1/security/preventing-javascript-injection-attacks-cs
title: Предотвращение атак путем внедрения кодаC#JavaScript () | Документация Майкрософт
author: StephenWalther
description: Предотвращение атак путем внедрения кода JavaScript и атак с использованием межузловых сценариев. В этом руководстве Стивен Вальтер объясняет, как можно легко отменять...
ms.author: riande
ms.date: 08/19/2008
ms.assetid: d0136da6-81a4-4815-b002-baa84744c09e
msc.legacyurl: /mvc/overview/older-versions-1/security/preventing-javascript-injection-attacks-cs
msc.type: authoredcontent
ms.openlocfilehash: fb00ee8a7e3d678e824052060eb5d9fd5d4b6a42
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74594857"
---
# <a name="preventing-javascript-injection-attacks-c"></a><span data-ttu-id="aa9d9-104">Предотвращение атак, осуществляемых путем внедрения кода JavaScript (C#)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-104">Preventing JavaScript Injection Attacks (C#)</span></span>

<span data-ttu-id="aa9d9-105">по [Стивен Вальтер](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="aa9d9-106">Загрузить PDF-файл</span><span class="sxs-lookup"><span data-stu-id="aa9d9-106">Download PDF</span></span>](https://download.microsoft.com/download/8/4/8/84843d8d-1575-426c-bcb5-9d0c42e51416/ASPNET_MVC_Tutorial_06_CS.pdf)

> <span data-ttu-id="aa9d9-107">Предотвращение атак путем внедрения кода JavaScript и атак с использованием межузловых сценариев.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-107">Prevent JavaScript Injection Attacks and Cross-Site Scripting Attacks from happening to you.</span></span> <span data-ttu-id="aa9d9-108">В этом руководстве Стивен Вальтер объясняет, как можно легко отвергнуться атакам такого типа с помощью HTML-кодирования содержимого.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-108">In this tutorial, Stephen Walther explains how you can easily defeat these types of attacks by HTML encoding your content.</span></span>

<span data-ttu-id="aa9d9-109">Цель этого руководства — объяснить, как можно предотвратить атаки путем внедрения кода JavaScript в приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-109">The goal of this tutorial is to explain how you can prevent JavaScript injection attacks in your ASP.NET MVC applications.</span></span> <span data-ttu-id="aa9d9-110">В этом учебнике обсуждаются два подхода к защите веб-сайта от атак путем внедрения кода JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-110">This tutorial discusses two approaches to defending your website against a JavaScript injection attack.</span></span> <span data-ttu-id="aa9d9-111">Вы узнаете, как предотвратить атаки путем внедрения кода JavaScript путем кодирования отображаемых данных.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-111">You learn how to prevent JavaScript injection attacks by encoding the data that you display.</span></span> <span data-ttu-id="aa9d9-112">Вы также узнаете, как предотвратить атаки путем внедрения кода JavaScript путем кодирования принимаемых данных.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-112">You also learn how to prevent JavaScript injection attacks by encoding the data that you accept.</span></span>

## <a name="what-is-a-javascript-injection-attack"></a><span data-ttu-id="aa9d9-113">Что такое атака путем внедрения кода JavaScript?</span><span class="sxs-lookup"><span data-stu-id="aa9d9-113">What is a JavaScript Injection Attack?</span></span>

<span data-ttu-id="aa9d9-114">Всякий раз, когда вы принимаете ввод пользователя и повторно отображаете введенные данные, вы открываете веб-сайт для атак путем внедрения кода JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-114">Whenever you accept user input and redisplay the user input, you open your website to JavaScript injection attacks.</span></span> <span data-ttu-id="aa9d9-115">Давайте рассмотрим конкретное приложение, открытое для атак путем внедрения кода JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-115">Let's examine a concrete application that is open to JavaScript injection attacks.</span></span>

<span data-ttu-id="aa9d9-116">Представьте, что вы создали веб-сайт отзывов клиентов (см. рис. 1).</span><span class="sxs-lookup"><span data-stu-id="aa9d9-116">Imagine that you have created a customer feedback website (see Figure 1).</span></span> <span data-ttu-id="aa9d9-117">Клиенты могут посетить веб-сайт и отправить отзыв о своих впечатлениях с помощью ваших продуктов.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-117">Customers can visit the website and enter feedback on their experience using your products.</span></span> <span data-ttu-id="aa9d9-118">Когда клиент отправляет свои отзывы, Отзывы повторно отображаются на странице отзывов.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-118">When a customer submits their feedback, the feedback is redisplayed on the feedback page.</span></span>

<span data-ttu-id="aa9d9-119">[Веб-сайт отзывов пользователей ![](preventing-javascript-injection-attacks-cs/_static/image2.png)](preventing-javascript-injection-attacks-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-119">[![Customer Feedback Website](preventing-javascript-injection-attacks-cs/_static/image2.png)](preventing-javascript-injection-attacks-cs/_static/image1.png)</span></span>

<span data-ttu-id="aa9d9-120">**Рис. 01**. веб-сайт отзывов пользователей ([щелкните, чтобы просмотреть изображение с полным размером](preventing-javascript-injection-attacks-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="aa9d9-120">**Figure 01**: Customer Feedback Website ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image3.png))</span></span>

<span data-ttu-id="aa9d9-121">На веб-сайте отзывов пользователей используется `controller`, приведенный в листинге 1.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-121">The customer feedback website uses the `controller` in Listing 1.</span></span> <span data-ttu-id="aa9d9-122">Этот `controller` содержит два действия с именами `Index()` и `Create()`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-122">This `controller` contains two actions named `Index()` and `Create()`.</span></span>

<span data-ttu-id="aa9d9-123">**Листинг 1 — `HomeController.cs`**</span><span class="sxs-lookup"><span data-stu-id="aa9d9-123">**Listing 1 – `HomeController.cs`**</span></span>

[!code-csharp[Main](preventing-javascript-injection-attacks-cs/samples/sample1.cs)]

<span data-ttu-id="aa9d9-124">Метод `Index()` отображает представление `Index`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-124">The `Index()` method displays the `Index` view.</span></span> <span data-ttu-id="aa9d9-125">Этот метод передает все предыдущие отзывы клиентов в представление `Index`, получая отзыв из базы данных (с помощью запроса LINQ to SQL).</span><span class="sxs-lookup"><span data-stu-id="aa9d9-125">This method passes all of the previous customer feedback to the `Index` view by retrieving the feedback from the database (using a LINQ to SQL query).</span></span>

<span data-ttu-id="aa9d9-126">Метод `Create()` создает новый элемент отзыва и добавляет его в базу данных.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-126">The `Create()` method creates a new Feedback item and adds it to the database.</span></span> <span data-ttu-id="aa9d9-127">Сообщение, которое клиент вводит в форму, передается методу `Create()` в параметре message.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-127">The message that the customer enters in the form is passed to the `Create()` method in the message parameter.</span></span> <span data-ttu-id="aa9d9-128">Создается элемент обратной связи, и ему назначается свойство `Message` элемента отзыва.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-128">A Feedback item is created and the message is assigned to the Feedback item's `Message` property.</span></span> <span data-ttu-id="aa9d9-129">Элемент Feedback отправляется в базу данных с помощью вызова метода `DataContext.SubmitChanges()`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-129">The Feedback item is submitted to the database with the `DataContext.SubmitChanges()` method call.</span></span> <span data-ttu-id="aa9d9-130">Наконец, посетитель перенаправляется обратно в представление `Index`, где отображается вся обратная связь.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-130">Finally, the visitor is redirected back to the `Index` view where all of the feedback is displayed.</span></span>

<span data-ttu-id="aa9d9-131">Представление `Index` содержится в листинге 2.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-131">The `Index` view is contained in Listing 2.</span></span>

<span data-ttu-id="aa9d9-132">**Листинг 2 — `Index.aspx`**</span><span class="sxs-lookup"><span data-stu-id="aa9d9-132">**Listing 2 – `Index.aspx`**</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample2.aspx)]

<span data-ttu-id="aa9d9-133">Представление `Index` содержит два раздела.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-133">The `Index` view has two sections.</span></span> <span data-ttu-id="aa9d9-134">В верхнем разделе содержится фактическая форма отзывов клиентов.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-134">The top section contains the actual customer feedback form.</span></span> <span data-ttu-id="aa9d9-135">Нижний раздел содержит объект for.. Каждый цикл, который проходит по всем предыдущим элементам отзывов клиентов и отображает свойства Ентридате и Message для каждого элемента отзыва.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-135">The bottom section contains a For..Each loop that loops through all of the previous customer feedback items and displays the EntryDate and Message properties for each feedback item.</span></span>

<span data-ttu-id="aa9d9-136">Веб-сайт отзывов пользователей — это простой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-136">The customer feedback website is a simple website.</span></span> <span data-ttu-id="aa9d9-137">К сожалению, веб-сайт открыт для атак путем внедрения кода JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-137">Unfortunately, the website is open to JavaScript injection attacks.</span></span>

<span data-ttu-id="aa9d9-138">Представьте, что в форму отзывов клиентов введен следующий текст:</span><span class="sxs-lookup"><span data-stu-id="aa9d9-138">Imagine that you enter the following text into the customer feedback form:</span></span>

[!code-html[Main](preventing-javascript-injection-attacks-cs/samples/sample3.html)]

<span data-ttu-id="aa9d9-139">Этот текст представляет сценарий JavaScript, который отображает окно сообщения с предупреждением.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-139">This text represents a JavaScript script that displays an alert message box.</span></span> <span data-ttu-id="aa9d9-140">После того как кто-то отправляет этот сценарий в форму обратной связи, сообщение <em>Boo!</em> будет отображаться при каждом посещении веб-сайта отзывов пользователей в будущем (см. рис. 2).</span><span class="sxs-lookup"><span data-stu-id="aa9d9-140">After someone submits this script into the feedback form, the message <em>Boo!</em>will appear whenever anyone visits the customer feedback website in the future (see Figure 2).</span></span>

<span data-ttu-id="aa9d9-141">[![внедрения кода JavaScript](preventing-javascript-injection-attacks-cs/_static/image5.png)](preventing-javascript-injection-attacks-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-141">[![JavaScript Injection](preventing-javascript-injection-attacks-cs/_static/image5.png)](preventing-javascript-injection-attacks-cs/_static/image4.png)</span></span>

<span data-ttu-id="aa9d9-142">**Рис. 02**. Внедрение JavaScript ([щелкните, чтобы просмотреть изображение с полным размером](preventing-javascript-injection-attacks-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="aa9d9-142">**Figure 02**: JavaScript Injection ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image6.png))</span></span>

<span data-ttu-id="aa9d9-143">Теперь ваш первоначальный ответ на атаки введения JavaScript может быть апаси.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-143">Now, your initial response to JavaScript injection attacks might be apathy.</span></span> <span data-ttu-id="aa9d9-144">Вы можете подумать, что атаки путем внедрения кода JavaScript являются просто типом атаки *«Злоумышленник»* .</span><span class="sxs-lookup"><span data-stu-id="aa9d9-144">You might think that JavaScript injection attacks are simply a type of *defacement* attack.</span></span> <span data-ttu-id="aa9d9-145">Вы можете полагать, что никто не может ничего не сделать, выполнив атаку внедрения JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-145">You might believe that no one can do anything truly evil by committing a JavaScript injection attack.</span></span>

<span data-ttu-id="aa9d9-146">К сожалению, злоумышленник может сделать некоторые действительно вредоносные вещи, внедряя JavaScript в веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-146">Unfortunately, a hacker can do some really, really evil things by injecting JavaScript into a website.</span></span> <span data-ttu-id="aa9d9-147">Для выполнения атаки с использованием межсайтовых сценариев (XSS) можно использовать атаку внедрения JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-147">You can use a JavaScript injection attack to perform a Cross-Site Scripting (XSS) attack.</span></span> <span data-ttu-id="aa9d9-148">При атаке с помощью межсайтовых сценариев вы переберете конфиденциальную информацию о пользователе и отправляете их на другой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-148">In a Cross-Site Scripting attack, you steal confidential user information and send the information to another website.</span></span>

<span data-ttu-id="aa9d9-149">Например, злоумышленник может использовать атаку внедрения JavaScript, чтобы украсть значения cookie-файлов браузера от других пользователей.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-149">For example, a hacker can use a JavaScript injection attack to steal the values of browser cookies from other users.</span></span> <span data-ttu-id="aa9d9-150">Если конфиденциальная информация, например пароли, номера кредитных карт или номера социального страхования, хранится в файлах cookie браузера, злоумышленник может использовать атаку внедрения JavaScript для кражи этой информации.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-150">If sensitive information -- such as passwords, credit card numbers, or social security numbers – is stored in the browser cookies, then a hacker can use a JavaScript injection attack to steal this information.</span></span> <span data-ttu-id="aa9d9-151">Или, если пользователь вводит конфиденциальную информацию в поле формы, содержащееся на странице, которая была скомпрометирована с помощью атаки JavaScript, злоумышленник может использовать внедренный JavaScript для получения данных формы и отправки их на другой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-151">Or, if a user enters sensitive information in a form field contained in a page that has been compromised with a JavaScript attack, then the hacker can use the injected JavaScript to grab the form data and send it to another website.</span></span>

<span data-ttu-id="aa9d9-152">*Будьте страх*.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-152">*Please be scared*.</span></span> <span data-ttu-id="aa9d9-153">Проведите атаки путем внедрения кода JavaScript серьезно и защитите конфиденциальную информацию пользователя.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-153">Take JavaScript injection attacks seriously and protect your user's confidential information.</span></span> <span data-ttu-id="aa9d9-154">В следующих двух разделах обсуждаются две методики, которые можно использовать для защиты приложений ASP.NET MVC от атак путем внедрения кода JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-154">In the next two sections, we discuss two techniques that you can use to defend your ASP.NET MVC applications from JavaScript injection attacks.</span></span>

## <a name="approach-1-html-encode-in-the-view"></a><span data-ttu-id="aa9d9-155">Подход #1: кодирование HTML в представлении</span><span class="sxs-lookup"><span data-stu-id="aa9d9-155">Approach #1: HTML Encode in the View</span></span>

<span data-ttu-id="aa9d9-156">Одним из простых способов предотвращения атак путем внедрения кода JavaScript является HTML-кодирование любых данных, вводимых пользователями веб-сайта при повторном отображении данных в представлении.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-156">One easy method of preventing JavaScript injection attacks is to HTML encode any data entered by website users when you redisplay the data in a view.</span></span> <span data-ttu-id="aa9d9-157">Обновленное `Index` представление в листинге 3 соответствует этому подходу.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-157">The updated `Index` view in Listing 3 follows this approach.</span></span>

<span data-ttu-id="aa9d9-158">**Листинг 3 — `Index.aspx` (в кодировке HTML)**</span><span class="sxs-lookup"><span data-stu-id="aa9d9-158">**Listing 3 – `Index.aspx` (HTML Encoded)**</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample4.aspx)]

<span data-ttu-id="aa9d9-159">Обратите внимание, что значение `feedback.Message` является HTML-кодированием перед отображением значения с помощью следующего кода:</span><span class="sxs-lookup"><span data-stu-id="aa9d9-159">Notice that the value of `feedback.Message` is HTML encoded before the value is displayed with the following code:</span></span>

[!code-aspx[Main](preventing-javascript-injection-attacks-cs/samples/sample5.aspx)]

<span data-ttu-id="aa9d9-160">Что означает HTML-кодирование строки?</span><span class="sxs-lookup"><span data-stu-id="aa9d9-160">What does it mean to HTML encode a string?</span></span> <span data-ttu-id="aa9d9-161">При кодировании строки в формате HTML опасные символы, такие как `<` и `>`, заменяются ссылками на HTML-сущности, такими как `&lt;` и `&gt;`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-161">When you HTML encode a string, dangerous characters such as `<` and `>` are replaced by HTML entity references such as `&lt;` and `&gt;`.</span></span> <span data-ttu-id="aa9d9-162">Поэтому, когда строка `<script>alert("Boo!")</script>` является HTML-кодировкой, она преобразуется в `&lt;script&gt;alert(&quot;Boo!&quot;)&lt;/script&gt;`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-162">So when the string `<script>alert("Boo!")</script>` is HTML encoded, it gets converted to `&lt;script&gt;alert(&quot;Boo!&quot;)&lt;/script&gt;`.</span></span> <span data-ttu-id="aa9d9-163">Закодированная строка больше не выполняется как скрипт JavaScript при интерпретации браузером.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-163">The encoded string no longer executes as a JavaScript script when interpreted by a browser.</span></span> <span data-ttu-id="aa9d9-164">Вместо этого вы получаете страницу «безобидная» на рис. 3.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-164">Instead, you get the harmless page in Figure 3.</span></span>

<span data-ttu-id="aa9d9-165">[![непораженной атакой JavaScript](preventing-javascript-injection-attacks-cs/_static/image8.png)](preventing-javascript-injection-attacks-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-165">[![Defeated JavaScript Attack](preventing-javascript-injection-attacks-cs/_static/image8.png)](preventing-javascript-injection-attacks-cs/_static/image7.png)</span></span>

<span data-ttu-id="aa9d9-166">**Рис. 03**. Неограниченная атака JavaScript ([щелкните, чтобы просмотреть изображение с полным размером](preventing-javascript-injection-attacks-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="aa9d9-166">**Figure 03**: Defeated JavaScript Attack ([Click to view full-size image](preventing-javascript-injection-attacks-cs/_static/image9.png))</span></span>

<span data-ttu-id="aa9d9-167">Обратите внимание, что в представлении `Index` в листинге 3 только значение `feedback.Message` кодируется.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-167">Notice that in the `Index` view in Listing 3 only the value of `feedback.Message` is encoded.</span></span> <span data-ttu-id="aa9d9-168">Значение `feedback.EntryDate` не кодируется.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-168">The value of `feedback.EntryDate` is not encoded.</span></span> <span data-ttu-id="aa9d9-169">Вам нужно только кодировать данные, введенные пользователем.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-169">You only need to encode data entered by a user.</span></span> <span data-ttu-id="aa9d9-170">Поскольку значение Ентридате было создано в контроллере, вам не нужно кодировать это значение в HTML.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-170">Because the value of EntryDate was generated in the controller, you don't need to HTML encode this value.</span></span>

## <a name="approach-2-html-encode-in-the-controller"></a><span data-ttu-id="aa9d9-171">Подход #2: кодирование HTML в контроллере</span><span class="sxs-lookup"><span data-stu-id="aa9d9-171">Approach #2: HTML Encode in the Controller</span></span>

<span data-ttu-id="aa9d9-172">Вместо данных кодировки HTML при отображении данных в представлении можно использовать HTML-кодирование данных непосредственно перед отправкой данных в базу данных.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-172">Instead of HTML encoding data when you display the data in a view, you can HTML encode the data just before you submit the data to the database.</span></span> <span data-ttu-id="aa9d9-173">Этот второй подход принимается в случае `controller` в листинге 4.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-173">This second approach is taken in the case of the `controller` in Listing 4.</span></span>

<span data-ttu-id="aa9d9-174">**Листинг 4 — `HomeController.cs` (в кодировке HTML)**</span><span class="sxs-lookup"><span data-stu-id="aa9d9-174">**Listing 4 – `HomeController.cs` (HTML Encoded)**</span></span>

[!code-csharp[Main](preventing-javascript-injection-attacks-cs/samples/sample6.cs)]

<span data-ttu-id="aa9d9-175">Обратите внимание, что значение сообщения в формате HTML кодируется до отправки значения в базу данных в рамках действия `Create()`.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-175">Notice that the value of Message is HTML encoded before the value is submitted to the database within the `Create()` action.</span></span> <span data-ttu-id="aa9d9-176">При повторном отображении сообщения в представлении сообщение кодируется в формате HTML, а любой JavaScript, вставленный в сообщение, не выполняется.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-176">When the Message is redisplayed in the view, the Message is HTML encoded and any JavaScript injected in the Message is not executed.</span></span>

<span data-ttu-id="aa9d9-177">Как правило, следует предпочесть первый подход, рассмотренный в этом учебнике, по этому второму подходу.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-177">Typically, you should favor the first approach discussed in this tutorial over this second approach.</span></span> <span data-ttu-id="aa9d9-178">Проблема с этим вторым подходом заключается в том, что вы подаете данные в кодировке HTML в базе данных.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-178">The problem with this second approach is that you end up with HTML encoded data in your database.</span></span> <span data-ttu-id="aa9d9-179">Иными словами, данные базы данных изменялся с забавно выглядящими символами.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-179">In other words, your database data is dirtied with funny looking characters.</span></span>

<span data-ttu-id="aa9d9-180">Почему это плохо?</span><span class="sxs-lookup"><span data-stu-id="aa9d9-180">Why is this bad?</span></span> <span data-ttu-id="aa9d9-181">Если вам когда-либо нужно отобразить данные базы данных не на странице, то возникнут проблемы.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-181">If you ever need to display the database data in something other than a web page, then you will have problems.</span></span> <span data-ttu-id="aa9d9-182">Например, вы больше не можете легко отобразить данные в Windows Forms приложении.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-182">For example, you can no longer easily display the data in a Windows Forms application.</span></span>

## <a name="summary"></a><span data-ttu-id="aa9d9-183">Сводка</span><span class="sxs-lookup"><span data-stu-id="aa9d9-183">Summary</span></span>

<span data-ttu-id="aa9d9-184">Цель этого руководства — пугают вас о перспективе атаки внедрения JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-184">The purpose of this tutorial was to scare you about the prospect of a JavaScript injection attack.</span></span> <span data-ttu-id="aa9d9-185">В этом учебнике обсуждались два подхода к защите приложений ASP.NET MVC от атак путем внедрения кода JavaScript: можно либо кодировать данные пользователя в формате HTML в представлении, либо закодировать данные в формате HTML в контроллере.</span><span class="sxs-lookup"><span data-stu-id="aa9d9-185">This tutorial discussed two approaches for defending your ASP.NET MVC applications against JavaScript injection attacks: you can either HTML encode user submitted data in the view or you can HTML encode user submitted data in the controller.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="aa9d9-186">[Назад](authenticating-users-with-windows-authentication-cs.md)
> [Вперед](authenticating-users-with-forms-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="aa9d9-186">[Previous](authenticating-users-with-windows-authentication-cs.md)
[Next](authenticating-users-with-forms-authentication-vb.md)</span></span>
