---
uid: mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
title: Создание приложения базы данных Movie за 15 минут с помощью ASP.NET MVC (C#) | Документация Майкрософт
author: StephenWalther
description: Стивен Вальтер строит всей базы данных приложения ASP.NET MVC от начала до конца. Это руководство является отличным введением для тех, кто новый t....
ms.author: riande
ms.date: 01/27/2009
ms.assetid: dd1be137-91c5-47a8-8137-fecf0789c7f5
msc.legacyurl: /mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
msc.type: authoredcontent
ms.openlocfilehash: 51cc38989fb204a3d14e04fb280fdd81bfd38a4d
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59415171"
---
# <a name="create-a-movie-database-application-in-15-minutes-with-aspnet-mvc-c"></a>Создание приложения для базы данных Movie за 15 минут с помощью ASP.NET MVC (C#)

по [Стивен Вальтер](https://github.com/StephenWalther)

[Скачать код](http://download.microsoft.com/download/7/2/8/728F8794-E59A-4D18-9A56-7AD2DB05BD9D/MovieApp_CS.zip)

> Стивен Вальтер строит всей базы данных приложения ASP.NET MVC от начала до конца. Это руководство предназначено для вас отличным введением для тех, кто не знаком с ASP.NET MVC Framework и хотят получить представление о процессе создания приложения ASP.NET MVC.


Цель этого руководства является дать вам представление о «что это как» для создания приложения ASP.NET MVC. В этом учебнике я смоделируйте рассматривается создание всего приложения ASP.NET MVC от начала до конца. Я покажу, как создать простое приложение на основе базы данных, показано, как список, создания и редактирования записей базы данных.

Чтобы упростить процесс создания приложения, мы рассмотрим преимущества возможностей формирования шаблонов Visual Studio 2008. Мы сообщим Visual Studio создать исходный код и содержимое для нашей контроллеры, модели и представления.

Если вы работали с страниц ASP или ASP.NET, затем следует найти ASP.NET MVC очень знакомым. Представления ASP.NET MVC — это почти так, как и страницы в приложение Active Server Pages. И так же, как и традиционные приложения ASP.NET Web Forms, ASP.NET MVC предоставляет полный доступ к широкому набору языков и классов, предоставляемых платформой .NET framework.

Я надеюсь является то, что этот учебник позволит получить представление о том, как работу с приложением ASP.NET MVC, аналогичные и отличается от работу с приложение Active Server Pages или веб-форм ASP.NET.

## <a name="overview-of-the-movie-database-application"></a>Обзор приложения базы данных Movie

Так как наша цель — не усложнять, мы создадим очень простое приложение базы данных фильмов. Наши простое приложение базы данных Movie позволит нам выполнить три действия:

1. Список набора записей базы данных movie
2. Создать новую запись базы данных movie
3. Изменить существующую запись базы данных movie

Опять же так как нам нужно, чтобы не усложнять, мы рассмотрим преимущества минимальное количество функций платформы ASP.NET MVC, необходимые для построения нашего приложения. Например мы не используют преимущества разработки, направляемой тестированием.

Чтобы создать наше приложение, нам нужно выполнить каждое из следующих действий:

1. Создание проекта веб-приложения ASP.NET MVC
2. Создание базы данных
3. Создание модели базы данных
4. Создание контроллера ASP.NET MVC
5. Создание представления ASP.NET MVC

## <a name="preliminaries"></a>Предварительные действия

Вам потребуется Visual Studio 2008 или Visual Web Developer 2008 Express, чтобы создать приложение ASP.NET MVC. Вам также потребуется платформа ASP.NET MVC.

Если вы не являетесь владельцем Visual Studio 2008, можно загрузить 90-дневную пробную версию Visual Studio 2008 с этого веб-сайта:

[https://msdn.microsoft.com/vs2008/products/cc268305.aspx](https://msdn.microsoft.com/vs2008/products/cc268305.aspx)

Кроме того создаются ASP.NET MVC приложений с помощью Visual Web Developer Express 2008. Если вы решили использовать Visual Web Developer Express, то вы должны иметь установленным пакетом обновления 1. Visual Web Developer 2008 Express с пакетом обновления 1 можно загрузить с этого веб-сайта:

[https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp; displaylang = en](https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en)

После установки Visual Studio 2008 или Visual Web Developer 2008, необходимо установить ASP.NET MVC framework. Платформа ASP.NET MVC можно загрузить на следующих веб-сайте:

[https://www.asp.net/mvc/](../../../index.md)

> [!NOTE] 
> 
> Вместо скачивания платформы ASP.NET и ASP.NET MVC framework по отдельности, можно воспользоваться преимуществами установщика веб-платформы. Установщик веб-платформы является приложение, которое позволяет легко управлять установленных приложений на компьютере:
> 
> [https://www.microsoft.com/web/gallery/Install.aspx](https://www.microsoft.com/web/gallery/Install.aspx)


## <a name="creating-an-aspnet-mvc-web-application-project"></a>Создание проекта веб-приложения ASP.NET MVC

Давайте начнем с создания проекта веб-приложения ASP.NET MVC в Visual Studio 2008. Выберите пункт меню **файл, создать проект** и вы увидите диалоговое окно нового проекта на рис. 1. Выберите в качестве языка программирования C# и выберите шаблон проекта веб-приложения ASP.NET MVC. Присвойте проекту имя MovieApp и нажмите кнопку "ОК".


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)

**Рис 01**: В диалоговом окне нового проекта ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))


Убедитесь, что выбран .NET Framework 3.5 из раскрывающегося списка в верхней части диалогового окна нового проекта или шаблона проекта веб-приложения ASP.NET MVC не будет отображаться.


Каждый раз при создании проекта веб-приложение MVC, Visual Studio появится запрос на создание проекта модульного теста. Откроется диалоговое окно, на рис. 2. Так как мы не будете создавать тесты в этом руководстве из-за ограничений по времени (и, Да, мы должны будете чувствовать себя немного виновны об этом) выберите **нет** и нажмите кнопку **ОК** кнопки.

> [!NOTE] 
> 
> Visual Web Developer не поддерживает проекты тестов.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)

**Рис. 02**: Диалоговое окно создания проекта модульного теста ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))


Приложение ASP.NET MVC имеет стандартный набор папок: в моделях, представлениях и контроллерах папку. Вы увидите этот стандартный набор папок в окне обозревателя решений. Необходимо добавить файлы в каждую папку моделях, представлениях и контроллерах для построения нашего приложения базы данных фильмов.

При создании нового приложения MVC с помощью Visual Studio, вы получите пример приложения. Поскольку мы хотим начать с нуля, нам нужно удалить содержимое для этого примера приложения. Вам потребуется удалить следующий файл, а также в следующую папку:

- Controllers\HomeController.cs
- Views\Home

## <a name="creating-the-database"></a>Создание базы данных

Нам нужно создать базу данных для хранения наших записей базы данных фильмов. К счастью Visual Studio включает бесплатную базу данных с именем SQL Server Express. Выполните следующие действия для создания базы данных.

1. Щелкните правой кнопкой мыши приложение\_папка данных в окно обозревателя решений и выберите пункт меню **добавить, новый элемент**.
2. Выберите **данных** категорию и выберите **базы данных SQL Server** шаблона (см. рис. 3).
3. Присвойте имя новой базы данных *MoviesDB.mdf* и нажмите кнопку **добавить** кнопки.

После создания базы данных, вы может соединиться с базой данных, дважды щелкнув файл MoviesDB.mdf, расположенный в приложении\_папку данных. Дважды щелкните файл MoviesDB.mdf открыть окно обозревателя сервера.

> [!NOTE] 
> 
> Окно обозревателя сервера с именем окна обозревателя базы данных в случае Visual Web Developer.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)

**Рис 03**: Создание базы данных Microsoft SQL Server ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))


Далее нам нужно создать новую таблицу базы данных. Из окна обозревателя сервера, щелкните правой кнопкой мыши папку «таблицы» и выберите пункт меню **добавить новую таблицу**. Если выбрать этот пункт меню откроется конструктор таблиц базы данных. Создайте следующие столбцы базы данных:

<a id="0.1_table01"></a>


| **Имя столбца** | **Тип данных** | **Разрешить значения null** |
| --- | --- | --- |
| Идентификатор | Int | False |
| Заголовок | Nvarchar(100) | False |
| Директор | Nvarchar(100) | False |
| DateReleased | DateTime | False |


Первый столбец, столбец идентификатора, имеет два специальных свойства. Во-первых необходимо пометить идентификатор столбца, как столбец первичного ключа. После выбора столбца идентификатора, нажмите кнопку **задать первичный ключ** (это значок, который выглядит как ключ). Во-вторых необходимо пометить идентификатор столбца, как столбец идентификаторов. В окне «Свойства столбца» перейдите к разделу Спецификация идентификатора и разверните его. Изменение **Is Identity** в соответствии с значением **Да**. Когда вы закончите, таблица должна выглядеть как на рис. 4.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)

**Рис. 04**: В таблице базы данных фильмов ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))


Последним шагом является сохранение новой таблицы. Нажмите кнопку "Сохранить" (значок дискеты) и присвойте новой таблицы фильмы имя.

После создания таблицы, добавьте некоторые записи фильма в таблицу. Щелкните правой кнопкой мыши в таблице фильмов в окно обозревателя сервера и выберите пункт меню **Показать таблицу данных**. Введите список ваших любимых фильмов (см. рис. 5).


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)

**05 рис**: Введя записей фильмов ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))


## <a name="creating-the-model"></a>Создание модели

Далее нам нужно создать набор классов для представления нашей базе данных. Нам нужно создать модель базы данных. Мы рассмотрим преимущества Microsoft Entity Framework, чтобы автоматически создать классы для нашей модели базы данных.

> [!NOTE] 
> 
> Платформа ASP.NET MVC не привязан к Microsoft Entity Framework. Базы данных можно создавать классы модели за счет использования различных реляционное сопоставление объекта (или / M) средства, включая LINQ to SQL, Subsonic и NHibernate.


Выполните следующие действия, чтобы запустить мастер моделей EDM.

1. Щелкните правой кнопкой мыши папку Models в окне обозревателя решений и выберите пункт меню **добавить, новый элемент**.
2. Выберите **данных** категорию и выберите **ADO.NET Entity Data Model** шаблона.
3. Назовите модель данных *MoviesDBModel.edmx* и нажмите кнопку **добавить** кнопки.

После нажатия кнопки Добавить появится мастер модели EDM (см. рис. 6). Выполните следующие действия, чтобы завершить работу мастера.

1. В **Выбор содержимого модели** выберите **создать из базы данных** параметр.
2. В **Выбор подключения к данным** шаг, используйте *MoviesDB.mdf* подключение к данным и имя *MoviesDBEntities* параметры подключения. Нажмите кнопку **Далее** кнопки.
3. В **Choose Your Database Objects** шаг, разверните узел таблицы, выберите таблицу фильмов. Введите пространство имен *MovieApp.Models* и нажмите кнопку **Готово** кнопки.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)

**Рис 06**: Создание модели базы данных с помощью мастера моделей EDM ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))


После завершения мастера модели EDM, откроется в конструкторе моделей EDM. Конструктор должен отображать в таблице базы данных фильмов (см. рис. 7).


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)

**07 рис**: В конструкторе моделей EDM ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))


Нам нужно внести одно изменение, перед продолжением. Мастер EDM создает класс с именем модели *фильмы* , представляющий таблицу базы данных фильмов. Так как мы будем использовать класс фильмов для представления определенного фильма, нам нужно изменить имя класса, чтобы быть *фильма* вместо *фильмы* (единственного числа, а не во множественном числе).

Дважды щелкните имя класса в области конструктора и измените имя класса из фильмов на фильм. После внесения этого изменения, нажмите кнопку **Сохранить** кнопку для создания класса Movie (значок дискеты).

## <a name="creating-the-aspnet-mvc-controller"></a>Создание контроллера ASP.NET MVC

Следующим шагом является создание контроллера ASP.NET MVC. Контроллер отвечает за управление как пользователь взаимодействует с приложением ASP.NET MVC.

Выполните следующие действия.

1. В окне обозревателя решений щелкните правой кнопкой мыши папку Controllers и выберите пункт меню **Add, контроллера**.
2. В диалоговом окне "Добавление контроллера", введите имя *HomeController* и установите флажок "с меткой" **добавить методы действий для сценариев создания, обновления и сведения о** (см. рис. 8).
3. Нажмите кнопку **добавить** кнопку, чтобы добавить новый контроллер в проект.

После выполнения этих действий создается контроллер в листинге 1. Обратите внимание на то, что он содержит методы, с именем индекса, сведения, создать и изменить. В следующих разделах мы добавим необходимый код для получения этих методов для работы.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)

**Рис 08**: Добавление нового контроллера MVC ASP.NET ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))


**В листинге 1 — Controllers\HomeController.cs**

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample1.cs)]

## <a name="listing-database-records"></a>Список записей базы данных

Метод Index() контроллера Home способ по умолчанию для приложения ASP.NET MVC. При запуске приложения ASP.NET MVC, метод Index() — первый вызываемый метод контроллера.

Мы будем использовать метод Index() для отображения списка записей из таблицы базы данных фильмов. Мы рассмотрим преимущества базы данных классов модели, которые мы создали ранее для получения записей базы данных фильмов с помощью метода Index().

Я изменил в класс HomeController в листинге 2, чтобы он содержал новый закрытое поле, именуемое \_db. Представляет класс MoviesDBEntities нашей базы данных модели, и мы будем использовать этот класс для взаимодействия с нашей базе данных.

Я также изменил метод Index() в листинге 2. Метод Index() используется класс MoviesDBEntities для получения всех записей фильмов из таблицы базы данных фильмов. Выражение  *\_db. MovieSet.ToList()* возвращает список всех записей фильмов из таблицы базы данных фильмов.

Список фильмов передается в представление. Все, что передается в метод View() передается в представление как представление данных.

**В листинге 2 — Controllers/HomeController.cs (измененный метод Index)**

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample2.cs)]

Метод Index() возвращает представление с именем Index. Нам нужно создать это представление для отображения списка записей базы данных фильмов. Выполните следующие действия.


Нужно построить проект (выберите пункт меню **создать, собрать решение**) перед открытием **Добавление представления** dialog» или «нет классов будет отображаться в **просмотреть класс данных** раскрывающийся список.


1. Щелкните правой кнопкой мыши метод Index() в редакторе кода и выберите пункт меню **Добавление представления** (см. рис. 9).
2. В диалоговом окне «Добавление представления» убедитесь, что флажок с меткой **создать строго типизированное представление** проверяется.
3. Из **просматривать содержимое** раскрывающемся списке выберите значение *списка*.
4. Из **просмотреть класс данных** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.
5. Нажмите кнопку "Добавить" для создания нового представления (см. рис. 10).

После выполнения этих действий, новое представление с именем Index.aspx добавляется к папке Views\Home. Содержимое представления индекса включаются в листинге 3.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)

**Рис 09**: Добавление представления из действия контроллера ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)

**Рис. 10**: Создать новое представление с диалоговым окном Добавление представления ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))


**Листинг 3 – Views\Home\Index.aspx**

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample3.aspx)]

В представлении индекса отображаются все записи фильма из таблицы базы данных фильмов в таблице HTML. Представление содержит цикл по каждому элементу, который выполняет итерацию каждого фильма, представленный свойством ViewData.Model. Если вы запустите приложение, нажав клавишу F5, вы увидите веб-страницы на рис. 11.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)

**Рис. 11**: Представление Index ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))


## <a name="creating-new-database-records"></a>Создание новых записей базы данных

Представление Index, созданную в предыдущем разделе со ссылкой для создания новых записей базы данных. Давайте продолжим и реализовать логику и создать представление, необходимое для создания новых записей базы данных фильмов.

Контроллер Home содержит два метода с именем Create(). Первый метод Create() не имеет параметров. Эта перегрузка метода Create() используется для отображения HTML-формы для создания новой записи базы данных фильмов.

Второй метод Create() имеет параметр FormCollection. Эта перегрузка метода Create() вызывается в том случае, когда HTML для создания новый фильм отправкой формы на сервер. Обратите внимание, что этот второй метод Create() AcceptVerbs атрибут, который запрещает метода вызывается, пока не будет выполнена операция HTTP POST.

Этот второй метод Create() был изменен в класс HomeController, обновленные в листинге 4. Новая версия Create() метод принимает параметр фильма и содержит логику для вставки новый фильм в таблице базы данных фильмов.

> [!NOTE] 
> 
> Обратите внимание на атрибут привязки. Так как мы не хотим обновить свойство идентификатор фильма из формы HTML, необходимо явно исключить это свойство.


**Листинг 4 — Controllers\HomeController.cs (измененный метод Create)**

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample4.cs)]

Visual Studio упрощает создание формы для создания новой базы данных movie записи (см. рис. 12). Выполните следующие действия.

1. Щелкните правой кнопкой мыши метод Create() в редакторе кода и выберите пункт меню **Добавление представления**.
2. Убедитесь, что флажок с меткой **создать строго типизированное представление** проверяется.
3. Из **просматривать содержимое** раскрывающемся списке выберите значение *создать*.
4. Из **просмотреть класс данных** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.
5. Нажмите кнопку **добавить** кнопку, чтобы создать новое представление.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)

**Рис. 12**: Добавление представления создания ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))


Visual Studio автоматически создает представление в листинге 5. Это представление содержит HTML-форму, включающий поля, которые соответствуют каждому из свойств класса фильма.

**Listing 5 – Views\Home\Create.aspx**

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample5.aspx)]

> [!NOTE] 
> 
> HTML-формы, созданные в диалоговом окне Add View создает поле идентификатора формы. Так как столбец идентификатора является столбцом идентификаторов, нам не нужен этот поля формы и ее можно безопасно удалить.


После добавления представления создания, можно добавить новые записи фильма к базе данных. Запустите приложение, нажав клавишу F5 и нажмите кнопку Создать ссылку, чтобы просмотреть форму на рис. 13. Если заполнения и отправки формы, создается запись новый фильм в базе данных.

Обратите внимание, что вы получаете проверку формы автоматически. Если не ввести дату выпуска фильма, или введите дату недействительный выпуск, отобразится форма, и выделяется поле даты выхода.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)

**Рис. 13**: Создание новой записи базы данных movie ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))


## <a name="editing-existing-database-records"></a>Изменение существующих записей базы данных

В предыдущих разделах мы рассмотрели, как список и создания новых записей базы данных. В этом заключительном разделе мы рассмотрим, как можно изменить существующие записи базы данных.

Во-первых необходимо создать форму редактирования. Этот шаг является простой, так как Visual Studio создаст форму редактирования для нас автоматически. Откройте класс HomeController.cs в редакторе кода Visual Studio и выполните следующие действия:

1. Щелкните правой кнопкой мыши метод Edit() в редакторе кода и выберите пункт меню **Добавление представления** (см. рис. 14).
2. Установите флажок "с меткой" **создать строго типизированное представление**.
3. Из **просматривать содержимое** раскрывающемся списке выберите значение *изменить*.
4. Из **просмотреть класс данных** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.
5. Нажмите кнопку **добавить** кнопку, чтобы создать новое представление.

Выполнение этих действий добавляет новое представление с именем Edit.aspx в папку Views\Home. Это представление содержит HTML-формы для редактирования и фильмов.


[![Tдиалоговое окно нового проекта он](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)

**Рис. 14**: Добавление представления изменения ([Просмотр полноразмерного изображения](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))


> [!NOTE] 
> 
> Изменить представление содержит поля формы HTML, соответствующее свойству, идентификатор фильма. Так как вы не хотите людей, изменив значение свойства Id, следует удалить это поле формы.


Наконец нам нужно изменить контроллера Home, таким образом, чтобы он поддерживает редактирование записи базы данных. Обновленный класс HomeController содержится в листинге 6.

**В листинге 6 – Controllers\HomeController.cs (методов Edit)**

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample6.cs)]

В листинге 6 я добавил дополнительную логику для обеих перегрузок метода Edit(). Первый метод Edit() возвращает запись базы данных фильмов, соответствующий параметру Id, передаваемый в метод. Вторая перегрузка выполняет обновления записи фильм в базе данных.

Обратите внимание на то, что необходимо получить исходного фильма, а затем вызовите ApplyPropertyChanges(), чтобы обновить существующий фильм в базе данных.

## <a name="summary"></a>Сводка

Цель этого руководства было дать вам представление о работу с приложением ASP.NET MVC. Я надеюсь, что обнаружение, что создание веб-приложения ASP.NET MVC является очень похожа на работу с приложение Active Server Pages или ASP.NET.

В этом учебнике мы рассмотрели только самые основные функции платформы ASP.NET MVC. В последующих учебных курсах мы подробнее рассмотрим таким темам, как контроллеры, действия контроллера, представления, просмотр данных и вспомогательных методов HTML.

> [!div class="step-by-step"]
> [Далее](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-vb.md)
