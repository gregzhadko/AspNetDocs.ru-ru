---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part8
title: Добавление столбца в модель | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Создание простого веб-приложения, считывающего и записывающего данные из базы данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: 7ae696b9-348f-4993-8ebb-a838acbe0c28
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part8
msc.type: authoredcontent
ms.openlocfilehash: 1cf092c3db3959d6f47006f1be2ba82833c5dc06
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437226"
---
# <a name="adding-a-column-to-the-model"></a>Добавление столбца в модель

по [Скотт Hanselman](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

В этом разделе мы пошаговым инструкциями по внесению изменений в схему базы данных и обработке изменений в приложении.

Давайте добавим столбец "Оценка" в таблицу фильмов. Вернитесь в интегрированную среду разработки и щелкните обозреватель базы данных. Щелкните правой кнопкой мыши таблицу Movie и выберите Open Table Definition (Открыть определение таблицы).

Добавьте столбец "Оценка", как показано ниже. Так как у нас сейчас нет оценок, столбец может допускать значения NULL. Нажмите кнопку «Сохранить».

[![редактирования таблицы фильмов](getting-started-with-mvc-part8/_static/image2.png)](getting-started-with-mvc-part8/_static/image1.png)

Затем вернитесь к обозреватель решений и откройте файл movies. EDMX (который находится в папке \Моделс). Щелкните правой кнопкой мыши область конструктора (белая область) и выберите пункт Обновить модель из базы данных.

[![фильмов — Microsoft Visual Web Developer 2010 Express (11)](getting-started-with-mvc-part8/_static/image4.png)](getting-started-with-mvc-part8/_static/image3.png)

Запустится мастер обновления. Щелкните вкладку обновить внутри нее и нажмите кнопку Готово. Затем наш класс модели Movie будет обновлен с помощью нового столбца.

![Мастер обновления (2)](getting-started-with-mvc-part8/_static/image5.png)

После нажатия кнопки Готово можно увидеть, что новый столбец рейтинг добавлен в сущность Movie в нашей модели.

[Сущность ![Movie](getting-started-with-mvc-part8/_static/image7.png)](getting-started-with-mvc-part8/_static/image6.png)

Мы добавили столбец в модель базы данных, но представления не знакомы с ними.

## <a name="update-views-with-model-changes"></a>Обновление представлений с изменениями модели

Существует несколько способов обновления наших шаблонов представления для отражения нового столбца рейтинга. Так как мы создали эти представления, создав их с помощью диалогового окна Добавление представления, мы могли бы удалить их и повторно создать заново. Тем не менее, обычно люди уже внесли изменения в свои шаблоны представлений из первоначального формирования шаблонов и хотят добавлять или удалять поля вручную, как и в поле идентификатора для CREATE.

Откройте шаблон \Виевс\мовиес\индекс.аспкс и добавьте &lt;&gt;рейтинг&lt;/с&gt; в заголовок таблицы фильмов. После жанра я добавил мой. Затем, в том же положении столбца, но ниже, добавьте строку для вывода нашей новой оценки.

[!code-aspx[Main](getting-started-with-mvc-part8/samples/sample1.aspx)]

Наш окончательный шаблон index. aspx будет выглядеть следующим образом:

[!code-aspx[Main](getting-started-with-mvc-part8/samples/sample2.aspx)]

Теперь откройте шаблон \Виевс\мовиес\креате.аспкс и добавьте метку и текстовое поле для нового свойства рейтинга:

[!code-aspx[Main](getting-started-with-mvc-part8/samples/sample3.aspx)]

Наш окончательный шаблон CREATE. aspx будет выглядеть следующим образом. Давайте изменим заголовок браузера и дополнительный &lt;H2&gt; заголовок на нечто вроде "создать фильм", пока мы здесь!

[!code-aspx[Main](getting-started-with-mvc-part8/samples/sample4.aspx)]

Запустите приложение, и теперь вы получили новое поле в базе данных, которое было добавлено на страницу создания. Добавьте новый фильм — на этот раз с рейтингом и нажмите кнопку Создать.

[![создания фильма в Windows Internet Explorer](getting-started-with-mvc-part8/_static/image9.png)](getting-started-with-mvc-part8/_static/image8.png)

После нажатия кнопки создать вы отправляетесь на страницу индекса, где отображается новый фильм с новым столбцом Рейтинг в базе данных.

[Список фильмов ![— Windows Internet Explorer (12)](getting-started-with-mvc-part8/_static/image11.png)](getting-started-with-mvc-part8/_static/image10.png)

В этом учебном курсе было начато создание контроллеров, связывание их с представлениями и передача жестко запрограммированных данных. Затем мы создали и разработали базу данных и поместили в нее некоторые данные. Мы получили данные из базы данных и отображали их в таблице HTML. Затем мы добавили форму создания, которая позволяет пользователю добавлять данные в базу данных из веб-приложения. Мы добавили проверку, а затем выполнили проверку, используя JavaScript на стороне клиента. Наконец, мы изменили базу данных, включив в нее новый столбец данных, затем обновили две страницы, чтобы создать и отобразить новые данные.

Теперь я рекомендую перейти к нашему учебнику "[музыкальное хранилище MVC](../../older-versions/mvc-music-store/mvc-music-store-part-1.md)" на промежуточном уровне, а также ко многим видео и ресурсам на [https://asp.net/mvc](https://asp.net/mvc) , чтобы узнать больше о ASP.NET MVC!

Вот и все!

- Скотт Hanselman — [http://hanselman.com](http://hanselman.com) и [@shanselman](http://twitter.com/shanselman) в Twitter.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part7.md)
