---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part2
title: Добавление контроллера | Документация Майкрософт
author: shanselman
description: Обновленная версия, если этот учебник доступен здесь с помощью Visual Studio 2013. В новом руководстве используется ASP.NET MVC 5, который предоставляет множество улучшений по сравнению с t...
ms.author: riande
ms.date: 08/14/2010
ms.assetid: ff03dcc0-da97-458d-838f-0823e7482642
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part2
msc.type: authoredcontent
ms.openlocfilehash: e2a298584473f57c2b14edf507f0f6886d906ea3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437568"
---
# <a name="adding-a-controller"></a>Добавление контроллера

по [Скотт Hanselman](https://github.com/shanselman)

> > [!NOTE]
> > Обновленная версия, если этот учебник доступен [здесь](../../getting-started/introduction/getting-started.md) с помощью [Visual Studio 2013](https://my.visualstudio.com/Downloads?q=visual%20studio%202013). В новом руководстве используется ASP.NET MVC 5, который обеспечивает множество улучшений в рамках этого руководства.
>
>
> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

MVC означает модель, представление, контроллер. MVC — это шаблон для разработки приложений, в котором каждая часть имеет свою ответственность, отличающуюся от другой.

- Model: данные приложения
- Представления: файлы шаблонов, которые приложение будет использовать для динамического создания ответов HTML.
- Контроллеры: классы, обрабатывающие входящие запросы URL-адресов для приложения, извлекают данные модели, а затем указывают шаблоны представлений, которые отображают ответ обратно клиенту.

Мы будем рассматривать все эти концепции в этом учебнике и покажу, как их использовать для создания приложения.

Давайте создадим новый контроллер, щелкнув правой кнопкой мыши папку Controllers в обозревателе решений и выбрав пункт Добавить контроллер.

[![Аддконтроллерригхткликк](getting-started-with-mvc-part2/_static/image2.png)](getting-started-with-mvc-part2/_static/image1.png)

Присвойте новому контроллеру имя "HelloWorldController" и нажмите кнопку Добавить.

[Диалоговое окно добавления контроллера ![](getting-started-with-mvc-part2/_static/image4.png)](getting-started-with-mvc-part2/_static/image3.png)

Обратите внимание на обозреватель решений справа, что был создан новый файл с именем HelloWorldController.cs, а теперь этот файл открыт в **интегрированной среде разработки**.

[![Хелловорлдконтроллеркоде](getting-started-with-mvc-part2/_static/image6.png)](getting-started-with-mvc-part2/_static/image5.png)

Создайте два новых метода, которые выглядят в новом открытом классе HelloWorldController. В качестве примера мы возвращаем строку HTML непосредственно из нашего контроллера.

[!code-csharp[Main](getting-started-with-mvc-part2/samples/sample1.cs)]

Контроллер называется HelloWorldController, а новый метод называется index. Запустите приложение еще раз (как раньше) (нажмите кнопку "Воспроизведение" или нажмите клавишу F5, чтобы сделать это). После запуска браузера измените путь в адресной строке на `http://localhost:xx/HelloWorld`, где XX — это любое число, выбранное компьютером. Теперь браузер должен выглядеть, как показано на снимке экрана ниже. В нашем методе мы возвращали строку, переданную в метод с именем "Content". Мы сообщили, что система просто возвращает код HTML, и это было сделано!

ASP.NET MVC вызывает различные классы контроллеров (и различные методы действий в них) в зависимости от входящего URL-адреса. Логика сопоставления по умолчанию, используемая ASP.NET MVC, использует следующий формат для управления выполняемым кодом.

/[Контроллер]/[ActionName]/[параметры]

Первая часть URL-адреса определяет класс контроллера для выполнения. Поэтому/Хелловорлд сопоставляется с классом HelloWorldController. Вторая часть URL-адреса определяет метод действия для выполняемого класса. Поэтому/Хелловорлд/индекс приведет к выполнению метода index () класса HelloWorldController. Обратите внимание, что нам пришлось бы посетить только/Хелловорлд выше, а индекс метода был подразумеваемым. Это обусловлено тем, что метод с именем index является методом по умолчанию, который будет вызываться на контроллере, если он не указан явно.

[![это действие по умолчанию](getting-started-with-mvc-part2/_static/image8.png)](getting-started-with-mvc-part2/_static/image7.png)

Теперь давайте попробуем `http://localhost:xx/HelloWorld/Welcome.` теперь наш метод приветствия выполнен и вернул свою HTML-строку.

Опять же,/[контроллер]/[ActionName]/[Parameters], так что контроллер является HelloWorld, и в данном случае используется метод Welcome. Параметры еще не выполнены.

[![это метод действия приветствия](getting-started-with-mvc-part2/_static/image10.png)](getting-started-with-mvc-part2/_static/image9.png)

Давайте немного изменим пример, чтобы мы могли передать некоторую информацию из URL-адреса в наш контроллер, например:/Хелловорлд/велкоме? Name = Скотт&amp;нумтимес = 4. Измените метод приветствия, включив в него два параметра, и обновите его, как показано ниже. Обратите внимание, что мы C# использовали необязательный параметр, чтобы указать, что параметр нумтимес должен иметь значение 1, если он не передается.

[!code-csharp[Main](getting-started-with-mvc-part2/samples/sample2.cs)]

Запустите приложение и перейдите `http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4` измените значение Name и нумтимес, как вам нравится. Система автоматически сопоставила именованные параметры из строки запроса в адресной строке с параметрами в методе.

В этих примерах контроллер выполняет всю работу и возвращает HTML-код напрямую. Обычно мы не хотим, чтобы наши контроллеры возвращали код HTML напрямую, так как он является очень громоздким для кода. Вместо этого мы обычно используем отдельный файл шаблона представления для создания ответа HTML. Давайте посмотрим, как это можно сделать. Закройте браузер и вернитесь в интегрированную среду разработки.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part1.md)
> [Вперед](getting-started-with-mvc-part3.md)
