---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part3
title: Добавление представления | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Создание простого веб-приложения, считывающего и записывающего данные из базы данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: e8f1515c-c277-47ff-a23e-224118f13f02
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part3
msc.type: authoredcontent
ms.openlocfilehash: 462b1210c45da67058899193afcea973f3daf122
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78469776"
---
# <a name="adding-a-view"></a>Добавление представления

по [Скотт Hanselman](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

В этом разделе мы рассмотрим, как в нашем классе HelloWorldController можно использовать файл шаблона представления, чтобы аккуратно инкапсулировать создание ответов HTML обратно клиенту.

Начнем с использования шаблона представления с нашим методом индексов. Наш метод называется index и находится в HelloWorldController. В настоящее время наш метод Index () возвращает строку с сообщением, которое жестко закодировано в классе контроллера.

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample1.cs)]

Теперь изменим метод Index так, чтобы он выглядел следующим образом:

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample2.cs)]

Теперь добавим в наш проект шаблон представления, который можно использовать для нашего метода index (). Для этого щелкните правой кнопкой мыши в середине метода index и выберите Добавить представление...

![image](getting-started-with-mvc-part3/_static/image1.png)

Откроется диалоговое окно "Добавление представления", в котором мы предложим вам несколько вариантов создания шаблона представления, который может использоваться нашим методом индексов. Пока ничего не меняйте и просто нажимайте кнопку Добавить.

[Диалоговое окно добавления представления ![](getting-started-with-mvc-part3/_static/image3.png)](getting-started-with-mvc-part3/_static/image2.png)

После нажатия кнопки Добавить в папке решения появится новая папка и новый файл, как показано здесь. Теперь у меня есть папка HelloWorld в представлениях и файл index. aspx внутри этой папки.

[![солутионексплорервисиндекс](getting-started-with-mvc-part3/_static/image5.png)](getting-started-with-mvc-part3/_static/image4.png)

Новый файл индекса также уже открыт и готов к редактированию. Добавьте текст под первым &lt;H2&gt;индекс&lt;/H2&gt; Like "Hello World".

[!code-html[Main](getting-started-with-mvc-part3/samples/sample3.html)]

Запустите приложение и снова откройте [`http://localhost:xx/HelloWorld`](http://localhostxx) в браузере. Метод Index в нашем контроллере в этом примере не выполняет никаких действий, но вызывал "return View ()", который указывал на то, что мы хотели использовать файл шаблона представления для отображения ответа обратно клиенту. Так как мы не указали явно имя файла шаблона представления, ASP.NET MVC по умолчанию использует файл представления index. aspx в папке \Виевс\хелловорлд. Теперь мы видим строку, которая жестко закодирована в нашем представлении.

[![index — Windows Internet Explorer](getting-started-with-mvc-part3/_static/image7.png)](getting-started-with-mvc-part3/_static/image6.png)

Выглядит довольно хорошо. Однако обратите внимание, что в названии браузера указано «index», а на странице «Мое приложение MVC» отображается заголовок Давайте изменим их.

### <a name="changing-views-and-master-pages"></a>Изменение представлений и главных страниц

Во первых, изменим текст «мое приложение MVC». Этот текст является общим и отображается на каждой странице. Он отображается только в одном месте нашего кода, хотя на каждой странице в нашем приложении. Перейдите в папку/Виевс/Шаред в обозреватель решений и откройте файл Site. master. Этот файл называется главной страницей и является общим "оболочкой", используемой всеми остальными страницами.

Обратите внимание на текст ContentPlaceholder "MainContent" в этом файле.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample4.aspx)]

Этот заполнитель — это место, где будут отображаться все создаваемые страницы, «Упакованные» на главной странице. Попробуйте изменить заголовок, а затем запустите приложение и перейдите на несколько страниц. Вы заметите, что одно изменение отображается на нескольких страницах.

[!code-html[Main](getting-started-with-mvc-part3/samples/sample5.html)]

Теперь на каждой странице будет содержаться основной заголовок — это "H1" моего приложения-фильма MVC. Он обрабатывает белый текст в верхней части, который является общим для всех страниц.

Здесь вы полностью изменили название site. master:

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample6.aspx)]

Теперь изменим заголовок страницы индекса.

Открыть/Хелловорлд/индекс.аспкс. Есть два места для изменения. Во-первых, заголовок, который отображается в заголовке браузера, а затем дополнительный заголовок — это «H2». Я покажу, что они немного отличаются, чтобы вы могли увидеть, какой из фрагментов кода изменяет часть приложения.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample7.aspx)]

Запуск приложения и посещение/Мовиес. Обратите внимание, что изменились название браузера, основной заголовок и вторичные заголовки. Вы можете легко внести значительные изменения в приложение с небольшими изменениями в представлении.

[Список фильмов ![— Windows Internet Explorer](getting-started-with-mvc-part3/_static/image9.png)](getting-started-with-mvc-part3/_static/image8.png)

Немного «данных» (в данном случае «Hello World!» сообщение) было жестко закодировано. У нас есть V (представления) и у нас есть C (Controllers), но еще нет M (Model). Вскоре мы рассмотрим, как создать базу данных и извлечь из нее данные модели.

## <a name="passing-a-viewmodel"></a>Передача ViewModel

Прежде чем мы перейдем к базе данных и поговорим о моделях, давайте сначала поговорим о "ViewModels". Это объекты, представляющие, что шаблон представления требует для отображения ответа HTML обратно клиенту. Обычно они создаются и передаются классом контроллера в шаблон представления и должны содержать только те данные, которые требуются шаблону представления.

Ранее с помощью нашего примера HelloWorld наш метод действия "Добро пожаловать" занял имя и параметр Нумтимес и выводит его в браузер. Вместо того, чтобы контроллер продолжал обрабатывать этот ответ напрямую, давайте создадим небольшой класс для хранения этих данных, а затем передаем его в шаблон представления для отображения обратного HTML-ответа с его помощью. Таким образом, контроллер имеет дело с одним делом и шаблоном представления другим – это позволяет нам без проблем использовать в нашем приложении.

Вернитесь в файл HelloWorldController.cs и добавьте новый класс "Велкомевиевмодел" и измените метод приветствия в контроллере. Ниже приведен полный HelloWorldController.cs с новым классом в том же файле.

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample8.cs)]

Несмотря на то, что в нескольких строках, наш метод приветствия фактически является только двумя инструкциями кода. Первый оператор упаковывает два параметра в объект ViewModel, а второй передает полученный объект в представление.

Теперь нам нужен шаблон представления "Добро пожаловать!"! Щелкните правой кнопкой мыши в методе приветствия и выберите Добавить представление. На этот раз мы установим «создание строго типизированного представления» и выбираем класс Велкомевиевмодел из раскрывающегося списка. Это новое представление будет иметь только сведения о Велкомевиевмоделс и других типах объектов.

> *Примечание. После добавления Велкомевиевмодел для отображения в раскрывающемся списке потребуется выполнить компиляцию один раз.*

Вот как должно выглядеть диалоговое окно добавления представления. Нажмите кнопку Добавить. ![Добавить представление в круге](getting-started-with-mvc-part3/_static/image10.png)

Добавьте этот код в &lt;H2&gt; в новом файле Welcome. aspx. Мы сделаем цикл и скажите Hello столько раз, сколько будет говорит пользователь.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample9.aspx)]

Кроме того, обратите внимание, что при вводе этого представления мы говорили о Велкомевиевмодел (они находятся в браке, помните?), что мы получаем полезную технологию IntelliSense каждый раз, когда мы будем ссылаться на наш объект модели, как показано на снимке экрана ниже:

[![исходный код Нумтиме](getting-started-with-mvc-part3/_static/image12.png)](getting-started-with-mvc-part3/_static/image11.png)

Запустите приложение и снова перейдите в `http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`. Теперь, когда мы собираем данные из URL-адреса, он передается в контроллер автоматически, наш контроллер упаковывает данные в ViewModel и передает этот объект в наше представление. Представление, чем отображает данные в виде HTML-кода для пользователя.

[Приветствие ![Windows Internet Explorer](getting-started-with-mvc-part3/_static/image14.png)](getting-started-with-mvc-part3/_static/image13.png)

Ну, это тип «M» для модели, но не тип базы данных. Давайте рассмотрим, что мы узнали и создали базу данных фильмов.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part2.md)
> [Вперед](getting-started-with-mvc-part4.md)
