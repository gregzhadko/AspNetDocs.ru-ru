---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part3
title: Добавление представления | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Создание простого веб-приложения, которое считывает и записывает в базу данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: e8f1515c-c277-47ff-a23e-224118f13f02
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part3
msc.type: authoredcontent
ms.openlocfilehash: 3eff3aceea302c51e6970bb13fbee3a8bf98a71d
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59411986"
---
# <a name="adding-a-view"></a>Добавление представления

по [(Scott hanselman)](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Вы создадите простое веб-приложение, которое считывает и записывает в базу данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) для поиска других ASP.NET MVC, учебники и примеры.


В этом разделе мы собираемся рассмотрим, как у нашего класса HelloWorldController использовать файл шаблона представления для аккуратно инкапсуляции создания ответов HTML обратно клиенту.

Давайте начнем с помощью шаблона представления с помощью нашего метода индекса. Наш метод называется индекса, и он находится в HelloWorldController. В настоящее время наш метод Index() возвращает строку с сообщением, которое жестко задано в классе контроллера.

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample1.cs)]

Теперь изменим метод Index, вместо этого следующим образом:

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample2.cs)]

Теперь добавим шаблон представления в свой проект, который можно использовать для нашего метода Index(). Чтобы сделать это, щелкните правой кнопкой мыши где-нибудь в середине метода индекс и нажмите кнопку Добавить представление...

![изображение](getting-started-with-mvc-part3/_static/image1.png)

Откроется диалоговое окно «Добавление представления», который предоставляет нам некоторые параметры как требуется создать шаблон представления, который может использоваться методом наших индекса. Сейчас не вносите никаких изменений и просто нажмите кнопку Добавить.

[![Диалоговое окно добавления представления](getting-started-with-mvc-part3/_static/image3.png)](getting-started-with-mvc-part3/_static/image2.png)

После нажатия кнопки Добавить новую папку и файл появится в папке решения, как показано ниже. Теперь у меня есть HelloWorld папке представления, а также файл Index.aspx в этой папке.

[![solutionexplorerwithindex](getting-started-with-mvc-part3/_static/image5.png)](getting-started-with-mvc-part3/_static/image4.png)

Новый файл индекса также уже открыта и готова для редактирования. Добавьте текст под первым &lt;h2&gt;индекс&lt;/h2&gt; , например «Hello World».

[!code-html[Main](getting-started-with-mvc-part3/samples/sample3.html)]

Запустите приложение и посетите [ `http://localhost:xx/HelloWorld` ](http://localhostxx) попытку в браузере. Метод Index в своем контроллере, в этом примере не выполняет никакой работы, но вызывать «return View()», которая указывает, что мы хотели бы использовать файл шаблона представления для отображения ответа обратно клиенту. Так как мы не указали явным образом имя файла шаблона представления для использования, ASP.NET MVC по умолчанию использует файл представления Index.aspx в папке \Views\HelloWorld. Теперь мы видим строку, которую мы жестко задано в нашего представления.

[![Индекс - Windows Internet Explorer](getting-started-with-mvc-part3/_static/image7.png)](getting-started-with-mvc-part3/_static/image6.png)

Выглядит довольно хорошо. Обратите внимание, что заголовок браузера говорит: «Index», и большой заголовок на странице говорит: «Мое приложение MVC.» Давайте изменим их.

### <a name="changing-views-and-master-pages"></a>Изменение представлений и главные страницы

Во-первых изменим текст «Мое приложение MVC.» Этот текст является общим и появляется на каждой странице. Он находится в одном месте в коде, даже если он находится на каждой странице, в наше приложение. Перейдите к папке /Views/Shared в обозревателе решений и откройте файл Site.Master. Этот файл называется главной страницы, и это общий «оболочка», использование всех других страницах.

Обратите внимание, что текст, указывающий ContentPlaceholder «MainContent» в этом файле.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample4.aspx)]

Он располагается где все создаваемые страницы будут отображаться, «оболочку» на главной странице. Попробуйте изменить заголовок, а затем запустите приложение и на нескольких страницах. Вы заметите отображения одного изменения на нескольких страницах.

[!code-html[Main](getting-started-with-mvc-part3/samples/sample5.html)]

Теперь каждая страница будет иметь основной заголовок - это H1 - из «Моих MVC Movie приложение». Которая обрабатывает белым текстом Здесь наверху у, общей для всех страниц.

Ниже приведен Site.Master целиком с нашей изменили заголовок.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample6.aspx)]

Теперь изменим заголовок страницы индекса.

Откройте /HelloWorld/Index.aspx. Есть изменения в двух местах. Во-первых заголовок, отображаемый в заголовке браузера, то дополнительный заголовок -, а также H2. Я сделаю их немного отличается, чтобы можно было видеть какие-либо часть кода изменяет соответствующую часть приложения.

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample7.aspx)]

Запустите приложение и посетите /Movies. Обратите внимание, что заголовок браузера, основной и дополнительный заголовки изменились. Это можно легко вносить изменения больших своих приложений с помощью небольших изменений к представлению.

[![Список фильмов - Windows Internet Explorer](getting-started-with-mvc-part3/_static/image9.png)](getting-started-with-mvc-part3/_static/image8.png)

Нашей небольшой фрагмент «данные» (в данном случае «Hello World!» сообщение) было сложно закодированных хотя. У нас есть V (представления), и у нас есть C (контроллеры), но не M (модель) еще. Чуть ниже мы рассмотрим как создать базу данных и получать данные модели из нее.

## <a name="passing-a-viewmodel"></a>Передача модели представления

Прежде чем мы перейдите к базе данных и поговорим о моделях, но давайте сперва поговорим о «ViewModels.» Это объекты, которые представляют шаблон представления требуется для отрисовки HTML-ответа обратно клиенту. Они обычно создаются каким-либо классом контроллера передается шаблона представления и включать только данные, этот шаблон — и не более.

Ранее наш образец HelloWorld наш метод действия Welcome() заняло имени и параметр; numtimes = и вывести его в браузер. Вместо отображения ответа в непосредственно по-прежнему контроллер, вместо этого создадим небольшой класс для хранения этих данных и затем передать его шаблона представления для отображения обратно с помощью его HTML-ответа. Таким образом, контроллер отвечает за одну вещь и этот шаблон другой – благодаря чему мы можем поддерживать чистую «разделение» внутри нашего приложения.

Вернитесь в файл HelloWorldController.cs и добавьте новый класс «WelcomeViewModel» и измените метод Добро пожаловать в свой контроллер. Ниже приведен полный HelloWorldController.cs с новым классом в одном файле.

[!code-csharp[Main](getting-started-with-mvc-part3/samples/sample8.cs)]

Несмотря на то, что это на нескольких строках, наш метод приветствия — только два оператора кода. Первая инструкция упаковывает наши два параметра в объект модели представления, а вторая передает полученный объект в представление.

Теперь нам требуется шаблон представления экрана приветствия! Щелкните правой кнопкой мыши в методе приветствия и выберите Add View. На этот раз мы проверьте «Создать строго типизированное представление» и выберите наш класс WelcomeViewModel из раскрывающегося списка. Это новое представление только будет знать о WelcomeViewModels и другими типами объектов.

> *ПРИМЕЧАНИЕ. Нужно будет выполнена компиляция один раз, после добавления вашего WelcomeViewModel для отображения в раскрывающемся списке.*


Вот, как должна выглядеть диалоговое окно Add View. Нажмите кнопку Добавить. ![Добавить представление в кружке](getting-started-with-mvc-part3/_static/image10.png)

Добавьте следующий код в разделе &lt;h2&gt; в ваш новый Welcome.aspx. Мы сделать цикл и поприветствуйте столько раз, сколько пользователь говорит, что мы должны!

[!code-aspx[Main](getting-started-with-mvc-part3/samples/sample9.aspx)]

Также Обратите внимание, что при вводе, так как мы сказали, что это представление о WelcomeViewModel (женаты или замужем, помните?), мы получаем полезные Intellisense, каждый раз мы указываем ссылку нашего объекта модели, как показано на снимке экрана ниже:

[![NumTime исходного кода](getting-started-with-mvc-part3/_static/image12.png)](getting-started-with-mvc-part3/_static/image11.png)

Запустите приложение и посетите `http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4` еще раз. Теперь вы получите данные из URL-адрес, он передается в наш контроллер, автоматически, контроллер упаковывает данные в модели представления и передает этот объект на нашего представления. Представление не отображает данные в формате HTML для пользователя.

[![Добро пожаловать - Windows Internet Explorer](getting-started-with-mvc-part3/_static/image14.png)](getting-started-with-mvc-part3/_static/image13.png)

Ведь это было своего рода «M» для модели, но не тип базы данных. Давайте рассмотрим, что мы узнали и создать базу данных фильмов.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part2.md)
> [Вперед](getting-started-with-mvc-part4.md)
