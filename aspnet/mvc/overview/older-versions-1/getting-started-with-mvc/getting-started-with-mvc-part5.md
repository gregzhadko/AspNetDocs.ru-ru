---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part5
title: Доступ к данным модели из контроллера | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Создание простого веб-приложения, считывающего и записывающего данные из базы данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: 004703cd-e0e9-4ba7-9974-1b0475c71222
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part5
msc.type: authoredcontent
ms.openlocfilehash: 207ed880977d794d81efdc1ea458d17a68d501d8
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437370"
---
# <a name="accessing-your-models-data-from-a-controller"></a>Доступ к данным модели из контроллера

по [Скотт Hanselman](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

В этом разделе мы создадим новый класс MoviesController и запишем код, который извлекает наши данные фильмов и отображает его обратно в браузере с помощью шаблона представления.

Щелкните правой кнопкой мыши папку Controllers и создайте новый MoviesController.

[![добавить контроллер](getting-started-with-mvc-part5/_static/image2.png)](getting-started-with-mvc-part5/_static/image1.png)

Будет создан новый файл "MoviesController.cs" в папке \Controllers в нашем проекте. Обновите Мовиеконтроллер, чтобы получить список фильмов из новой заполненной базы данных.

[!code-csharp[Main](getting-started-with-mvc-part5/samples/sample1.cs)]

Мы выполняем запрос LINQ, поэтому мы получаем только фильмы, выпущенные после лета 1984. Для отображения этого списка фильмов потребуется шаблон представления, поэтому щелкните метод правой кнопкой мыши и выберите Добавить представление, чтобы создать его.

В диалоговом окне Добавление представления указывается, что мы передаем список&lt;фильмов. Models. Movie&gt; в наш шаблон представления. В отличие от предыдущих случаев, когда мы использовали диалоговое окно Добавление представления и решили создать пустой шаблон, на этот раз мы будем указывать, что Visual Studio автоматически «Template» — шаблон представления для нас с содержимым по умолчанию. Для этого нужно выбрать элемент "список" в раскрывающемся меню "Просмотр содержимого".

Помните, что при создании нового класса необходимо скомпилировать приложение, чтобы оно отображалось в диалоговом окне Добавление представления.

![Добавить представление](getting-started-with-mvc-part5/_static/image3.png)

Нажмите кнопку Добавить, и система автоматически создаст код для представления для нас, в котором отображается наш список фильмов. Самое время, чтобы изменить заголовок &lt;H2&gt; на нечто вроде «мой список фильмов», как было сделано ранее в представлении «Hello World».

[![фильмов — Microsoft Visual Web Developer 2010 Express](getting-started-with-mvc-part5/_static/image5.png)](getting-started-with-mvc-part5/_static/image4.png)

Запустите приложение и перейдите по адресу/Movies в адресной строке. Теперь мы извлекаем данные из базы данных с помощью базового запроса в контроллере и возвращали данные в представление, которое знает о фильмах. Затем это представление просматривает список фильмов и создает таблицу данных для нас.

[Список фильмов ![— Windows Internet Explorer](getting-started-with-mvc-part5/_static/image7.png)](getting-started-with-mvc-part5/_static/image6.png)

Мы не будем реализовывать функции правки, детализации и удаления с помощью этого приложения, поэтому нам не нужны ссылки по умолчанию, созданные шаблоном шаблонов для нас. Откройте файл/Мовиес/индекс.аспкс и удалите его.

Ниже приведен исходный код для того, как будет выглядеть обновленный шаблон представления после внесения этих изменений:

[!code-aspx[Main](getting-started-with-mvc-part5/samples/sample2.aspx)]

Он создает ссылки, которые нам не понадобятся, поэтому мы удалим их для этого примера. Мы будем размещать нашу новую ссылку «Создать», как это дальше! Вот как выглядит наше приложение при удалении этого столбца.

[Список фильмов ![— Windows Internet Explorer](getting-started-with-mvc-part5/_static/image9.png)](getting-started-with-mvc-part5/_static/image8.png)

Теперь у нас есть простой список данных о фильме. Однако если щелкнуть ссылку "создать", будет выведено сообщение об ошибке, так как оно не подключено! Давайте реализуем метод создания действия и позволяем пользователю вводить новые фильмы в нашей базе данных.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part4.md)
> [Вперед](getting-started-with-mvc-part6.md)
