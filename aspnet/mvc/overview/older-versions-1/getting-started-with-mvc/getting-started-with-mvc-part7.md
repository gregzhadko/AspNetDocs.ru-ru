---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part7
title: Добавление проверки в модель | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Создание простого веб-приложения, считывающего и записывающего данные из базы данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: aa7b3e8e-e23d-49f1-b160-f99a7f2982bd
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part7
msc.type: authoredcontent
ms.openlocfilehash: 9403be574324c34edf93bef1e0e4fd7ba68a3a9d
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437280"
---
# <a name="adding-validation-to-the-model"></a>Добавление проверки в модель

по [Скотт Hanselman](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

В этом разделе мы будем реализовывать поддержку, необходимую для включения проверки входных данных в приложении. Мы гарантируем, что содержимое базы данных будет всегда правильным и предоставлять полезные сообщения об ошибках конечным пользователям при попытке ввести недопустимые данные фильмов. Начнем с добавления немалой логики проверки к классу Movie.

Щелкните правой кнопкой мыши папку Model и выберите пункт Добавить класс. Присвойте классу имя Movie.

Когда мы создали сущностную модель фильмов ранее, интегрированная среда разработки создала класс Movie. Фактически часть класса Movie может находиться в одном файле, а часть — в другом. Это называется частичным классом. Мы будем расширять класс Movie из другого файла.

Мы создадим частичный класс Movie, который указывает на "дружественный класс" с некоторыми атрибутами, которые будут предоставлять системе указания по проверке. Мы помечаем заголовок и цену как обязательные, а также намерены, чтобы цена была в определенном диапазоне. Щелкните правой кнопкой мыши папку модели и выберите команду Добавить класс. Присвойте классу имя Movie и нажмите кнопку ОК. Вот как выглядит наш частичный класс Movie.

[!code-csharp[Main](getting-started-with-mvc-part7/samples/sample1.cs)]

Повторно запустите приложение и попробуйте ввести фильм с ценой свыше 100. После отправки формы вы получите сообщение об ошибке. Ошибка перехватывается на стороне сервера и возникает после отправки формы. Обратите внимание, что встроенные вспомогательные методы HTML ASP.NET MVC были достаточно интеллектуальными для отображения сообщения об ошибке и сохранения значений для нас в элементах TextBox:

[![Креатемовиевисвалидатион](getting-started-with-mvc-part7/_static/image2.png)](getting-started-with-mvc-part7/_static/image1.png)

Это прекрасно работает, но было бы неплохо, если бы мы могли сообщить пользователю на стороне клиента, прежде чем сервер будет вовлечен в работу.

Давайте разберем некоторую проверку на стороне клиента с помощью JavaScript.

## <a name="adding-client-side-validation"></a>Добавление клиентской проверки

Так как у нашего класса Movie уже есть некоторые атрибуты проверки, нам нужно просто добавить несколько файлов JavaScript в шаблон представления Create. aspx и добавить строку кода, чтобы включить проверку на стороне клиента.

В VWD перейдите к нашей папке Views/Movie и откройте файл create. aspx.

Откройте папку Scripts в обозреватель решений и перетащите следующие три скрипта в тег &lt;Head&gt;.

- MicrosoftAjax. js
- Микрософтмвквалидатион. js

Необходимо, чтобы эти файлы сценариев отображались в указанном порядке.

[!code-html[Main](getting-started-with-mvc-part7/samples/sample2.html)]

Кроме того, добавьте эту одну строку над HTML. Бегинформ:

[!code-aspx[Main](getting-started-with-mvc-part7/samples/sample3.aspx)]

Ниже приведен код, показанный в интегрированной среде разработки.

[![фильмов — Microsoft Visual Web Developer 2010 Express (10)](getting-started-with-mvc-part7/_static/image4.png)](getting-started-with-mvc-part7/_static/image3.png)

Запустите приложение и снова перейдите в/Мовиес/креате, а затем щелкните Создать без ввода каких бы то ни было данных. Сообщения об ошибках отображаются немедленно без страницы Flash, связанной с отправкой данных обратно на сервер. Это связано с тем, что ASP.NET MVC теперь проверяет входные данные как на стороне клиента (с помощью JavaScript), так и на сервере.

[Создание ![Windows Internet Explorer](getting-started-with-mvc-part7/_static/image6.png)](getting-started-with-mvc-part7/_static/image5.png)

Это хорошо. Теперь добавим в базу данных один дополнительный столбец.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part6.md)
> [Вперед](getting-started-with-mvc-part8.md)
