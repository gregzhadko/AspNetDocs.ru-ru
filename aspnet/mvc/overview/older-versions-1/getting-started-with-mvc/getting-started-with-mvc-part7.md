---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part7
title: Добавление проверки в модель | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Создание простого веб-приложения, которое считывает и записывает в базу данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: aa7b3e8e-e23d-49f1-b160-f99a7f2982bd
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part7
msc.type: authoredcontent
ms.openlocfilehash: 9403be574324c34edf93bef1e0e4fd7ba68a3a9d
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65122775"
---
# <a name="adding-validation-to-the-model"></a>Добавление проверки в модель

по [(Scott hanselman)](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Вы создадите простое веб-приложение, которое считывает и записывает в базу данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) для поиска других ASP.NET MVC, учебники и примеры.

В этом разделе мы собираемся реализовать поддержку, необходимые для включения проверки входных данных в наше приложение. Мы будем убедитесь, что содержимое базы данных будет всегда правильным и предоставляют полезные сообщения об ошибках для конечных пользователей, когда они пытаются, а введите данные фильма, которое не является допустимым. Начнем с добавления немного логики проверки в класс Movie.

Щелкните правой кнопкой папку модели и выберите Добавить класс. Назовите класс Movie.

Мы ранее при создании сущности модели фильма, интегрированной среды разработки создал класс Movie. На самом деле часть класса фильма может быть в один файл и в другом. Это называется разделяемый класс. Мы собираемся расширить класс Movie из другого файла.

Мы создадим класс частичного фильма, указывающего «класс-близнец» некоторые атрибуты, которые будут давать подсказки проверки системы. Мы будем отметить названия и цены по необходимости и также на том, что цена быть в определенный диапазон. Щелкните папку Models правой кнопкой мыши и выберите Добавить класс. Имя класса фильма и нажмите кнопку "ОК". Вот, что наши частичного фильма класс похож.

[!code-csharp[Main](getting-started-with-mvc-part7/samples/sample1.cs)]

Снова запустите приложение и попробуйте ввести фильм с ценой более чем 100. Вы получите ошибку, после отправки формы. Ошибка перехвачено на стороне сервера и возникает после отправки формы. Обратите внимание на то, как ASP.NET MVC, встроенные вспомогательные функции HTML были достаточно интеллектуальным отобразить сообщение об ошибке и оставьте значения для нас внутри элементов textbox:

[![CreateMovieWithValidation](getting-started-with-mvc-part7/_static/image2.png)](getting-started-with-mvc-part7/_static/image1.png)

Это прекрасно работает, но было бы неплохо, если удалось пользователю сообщается о на стороне клиента, немедленно, прежде чем сервер получает участвует.

Давайте включить некоторые проверки на стороне клиента с помощью JavaScript.

## <a name="adding-client-side-validation"></a>Добавление проверки на стороне клиента

Поскольку наш класс Movie уже имеет некоторые атрибуты проверки, просто необходимо добавить несколько файлов JavaScript к шаблону представления Create.aspx и добавьте строку кода для включения клиентской проверки вступили в силу.

Изнутри VWD перейдите наших папку представления/фильма и открывают Create.aspx.

Откройте папку «скрипты» в обозревателе решений и перетащите следующие три скрипты, чтобы в &lt;head&gt; тега.

- MicrosoftAjax.js
- MicrosoftMvcValidation.js

Требуется, чтобы эти файлы сценариев, чтобы указывать в следующем порядке.

[!code-html[Main](getting-started-with-mvc-part7/samples/sample2.html)]

Кроме того добавьте одна строчка кода выше Html.BeginForm:

[!code-aspx[Main](getting-started-with-mvc-part7/samples/sample3.aspx)]

Ниже приведен код, показанный в интегрированной среде разработки.

[![Фильмы - Microsoft Visual Web Developer 2010 Express (10)](getting-started-with-mvc-part7/_static/image4.png)](getting-started-with-mvc-part7/_static/image3.png)

Запустите приложение и снова посетите /Movies/Create и нажмите кнопку Создать, не вводя никаких данных. Сообщения об ошибках отображаются сразу же без странице флэш-памяти, что мы связываем с отправкой данных выполнения всего пути к серверу. Это так, как ASP.NET MVC теперь проверяет входные данные на обоих клиента (с использованием JavaScript) и на сервере.

[![Создание — Windows Internet Explorer](getting-started-with-mvc-part7/_static/image6.png)](getting-started-with-mvc-part7/_static/image5.png)

Это выглядит хорошо! Теперь добавим один дополнительный столбец в базу данных.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part6.md)
> [Вперед](getting-started-with-mvc-part8.md)
