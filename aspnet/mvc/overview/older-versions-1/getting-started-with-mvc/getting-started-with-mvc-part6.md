---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Добавление метода создания и создание представления | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Создание простого веб-приложения, которое считывает и записывает в базу данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: f648e0cb53dd410105adc22401f19a5a15f9e8c1
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59380812"
---
# <a name="adding-a-create-method-and-create-view"></a>Добавление метода Create и представления Create

по [(Scott hanselman)](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основные сведения по ASP.NET MVC. Вы создадите простое веб-приложение, которое считывает и записывает в базу данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) для поиска других ASP.NET MVC, учебники и примеры.


В этом разделе мы собираемся реализовать поддержку, необходимо разрешить пользователям создавать новые фильмы в нашей базе данных. Мы будем этого реализации Movies/Create URL-адрес действия.

Реализация Movies/Create URL-адрес является в два этапа. При посещении сначала Movies/Create URL-адрес, мы хотим показать их HTML-форму, которую можно заполнять ввести новый фильм. Затем когда пользователь отправляет форму и сообщения, данные обратно на сервер, мы хотим получить отправленное содержимое и сохраните его в нашей базе данных.

Эти два действия в рамках два метода Create() реализуется в наш класс MoviesController. Один из методов будет отображаться &lt;формы&gt; , пользователь должен заполнить создать новый фильм. Второй метод, обрабатывающий обработки размещенных данных в том случае, когда пользователь отправляет &lt;формы&gt; обратно на сервер и сохранить новый фильм в базе данных.

Ниже приведен код мы добавим к нашему классу MoviesController для реализации такой:

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

Приведенный выше код содержит весь код, что нам понадобится в рамках нашего контроллера.

Теперь рассмотрим процедуру внедрения шаблон Create View, который мы будем использовать для отображения формы для пользователя. Мы щелкните правой кнопкой мыши первый метод Create и выберите «Добавление представления «Создание шаблона представления для наших форма фильма.

Мы выберем, мы затем передать этот шаблон «Фильм» как класс представления данных и указать, что нам нужно сформировать «шаблон» шаблон «Создать».

[![Aдд представление](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)

После нажатия кнопки «Добавить», \Movies\Create.aspx шаблона представления создается автоматически. Так как мы выбрали «Создать» в раскрывающемся списке «Просмотр содержимого», диалоговое окно Добавление представления автоматически «скаффолдинга» содержимое по умолчанию для нас. Формирование шаблонов создана HTML &lt;формы&gt;место для ошибки проверки сообщений для перехода и с момента формирования шаблонов знает о фильмах, он создан метки и поля для каждого свойства класса.

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

Так как идентификатор фильма автоматически предоставляет нашей базе данных, давайте удалим эти поля этой эталонной модели. Идентификатор из нашего представления Create. Удалите 7 строки после &lt;условных обозначений&gt;поля&lt;/legend&gt; как в них показано поле ID, мы не должны.

Давайте теперь создайте новый фильм и добавить его к базе данных. Мы этого можно запустить приложение еще раз и посетите «/ Movies» связать URL-адрес и нажмите кнопку «Создать», чтобы добавить новый фильм.

[![Cю - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)

При нажатии кнопки «Создать» будет рассказываться обратно (через HTTP POST) данные в этой форме методу /Movies/Create, который мы только что создали. Так же, как при система автоматически заняло параметр «; numtimes =» и «name» из URL-адрес и сопоставить их с параметрами метода ранее система автоматически получить дополнительные поля формы POST и сопоставить их с объектом. В этом случае значения из полей в HTML, таких как «ReleaseDate» и «Title» будет автоматически помещен в правильные свойства нового экземпляра фильма.

Давайте взглянем на второй метод Create из наших MoviesController еще раз. Обратите внимание на то, как он принимает в качестве аргумента объект «Фильма»:

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

Этот объект фильма затем передается [HttpPost] версия наш метод действия Create, и мы хранится в базе данных и затем перенаправляется пользователь обратно в методе действия Index() — сохраненный результат появится в списке фильмов:

[![Mильм список — Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)

Мы не проверки, если наши фильмы указаны правильно, хотя и базы данных не позволяет нам сохранять фильмы с без заголовка. Было бы неплохо, если мы может уведомить пользователя, что перед базы данных была обнаружена ошибка. Выполним это Далее, добавив поддержку проверки к нашему приложению.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part5.md)
> [Вперед](getting-started-with-mvc-part7.md)
