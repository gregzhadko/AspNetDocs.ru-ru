---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Добавление метода Create и создание представления | Документация Майкрософт
author: shanselman
description: Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Создание простого веб-приложения, считывающего и записывающего данные из базы данных.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 05a281720f76b107fe8d902ef60d5d2e72af3ef5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437292"
---
# <a name="adding-a-create-method-and-create-view"></a>Добавление метода Create и представления Create

по [Скотт Hanselman](https://github.com/shanselman)

> Это руководство для начинающих, в котором представлены основы ASP.NET MVC. Вы создадите простое веб-приложение, считывающее и записывающее данные из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) , чтобы найти другие руководства и примеры для ASP.NET MVC.

В этом разделе мы будем реализовывать поддержку, необходимую для того, чтобы пользователи могли создавать новые фильмы в нашей базе данных. Это делается путем реализации действия URL-адреса/Мовиес/креате.

Реализация URL-адреса/Мовиес/креате является процессом в два этапа. Когда пользователь впервые посещает URL-адрес/Мовиес/креате, мы хотим отобразить им HTML-форму, которую можно заполнить для ввода нового фильма. Затем, когда пользователь отправляет форму и отправляет данные обратно на сервер, мы хотим получить опубликованное содержимое и сохранить его в нашей базе данных.

Мы реализуем эти два шага в двух методах Create () в нашем классе MoviesController. Один метод покажет &lt;форму&gt;, которую пользователь должен заполнить для создания нового фильма. Второй метод будет обрабатывать обработку отправленных данных, когда пользователь отправляет &lt;форму&gt; обратно на сервер и сохраняет новый фильм в нашей базе данных.

Ниже приведен код, который мы добавим в наш класс MoviesController для реализации этого:

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

Приведенный выше код содержит весь код, который нам понадобится в нашем контроллере.

Теперь давайте создадим шаблон создания представления, который будет использоваться для отображения формы пользователю. Щелкните правой кнопкой мыши первый метод Create и выберите "добавить представление", чтобы создать шаблон представления для формы фильма.

Мы выберем, что мы будем передавать шаблону представления "Movie" в качестве класса данных представления, и указали, что мы хотим сформировать шаблон "создать".

[![добавить представление](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)

После нажатия кнопки Добавить будет создан шаблон представления \Мовиес\креате.аспкс. Так как мы выбрали "создать" из раскрывающегося списка "Просмотр содержимого", диалоговое окно добавления представления автоматически «формирует формирование шаблона» для нас по умолчанию. Формирование шаблонов создает HTML-&lt;форму&gt;, место для сообщений об ошибках проверки, а так как формирование шаблонов знает о фильмах, оно создало метку и поля для каждого свойства нашего класса.

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

Так как наша база данных автоматически предоставляет фильм с ИДЕНТИФИКАТОРом, удалим поля, которые ссылаются на модель. Идентификатор из нашего представления создания. Удалите 7 строк после &lt;условных обозначений&gt;полей&lt;/Леженд&gt;, так как в них отображается поле идентификатора, которое не требуется.

Теперь создадим новый фильм и добавим его в базу данных. Для этого запустите приложение еще раз и перейдите по URL-адресу "/Movies" и щелкните ссылку "создать", чтобы добавить новый фильм.

[Создание ![Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)

При нажатии кнопки "создать" мы будем переносить данные из этой формы (через HTTP POST) в метод/Мовиес/креате, который мы только что создали. Точно так же, как если система автоматически заняла параметр "Нумтимес" и "Name" из URL-адреса и сопоставила их с параметрами в методе ранее, система автоматически переберет поля формы из записи и сопоставьте их с объектом. В этом случае значения из полей в HTML, например "ReleaseDate" и "Title", автоматически помещаются в правильные свойства нового экземпляра фильма.

Рассмотрим второй метод Create из нашего MoviesController. Обратите внимание, что в качестве аргумента используется объект "Movie":

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

Этот объект Movie затем был передан в версию [HttpPost] нашего метода создания действия, и мы сохранили его в базе данных, а затем перенаправляли пользователя обратно в метод действия Index (), который покажет сохраненный результат в списке фильмов:

[Список фильмов ![— Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)

Хотя мы не проверяя, правильно ли наши фильмы, и база данных не позволит нам сохранить фильм без заголовка. Было бы замечательно, если бы мы могли сообщить пользователю, что перед тем, как база данных выдала ошибку. Далее мы добавим в наше приложение поддержку проверки.

> [!div class="step-by-step"]
> [Назад](getting-started-with-mvc-part5.md)
> [Вперед](getting-started-with-mvc-part7.md)
