---
uid: mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
title: '#1 итерации - Создайте приложение (C) Документы Майкрософт'
author: rick-anderson
description: 'В первой итерации мы создаем Контакт-менеджер самым простым способом. Мы добавляем поддержку для основных операций базы данных: Создание, Чтение, Обновление и D...'
ms.author: riande
ms.date: 02/20/2009
ms.assetid: db0f160b-901c-46d3-865e-7ab6cd4ed68d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
msc.type: authoredcontent
ms.openlocfilehash: ecc3c1201c784e20c6b2601735bee3d4ce721f22
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542551"
---
# <a name="iteration-1--create-the-application-c"></a><span data-ttu-id="01853-104">Итерация 1. Создание приложения (C#)</span><span class="sxs-lookup"><span data-stu-id="01853-104">Iteration #1 – Create the Application (C#)</span></span>

<span data-ttu-id="01853-105">[корпорацией Майкрософт](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="01853-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="01853-106">Скачать код</span><span class="sxs-lookup"><span data-stu-id="01853-106">Download Code</span></span>](iteration-1-create-the-application-cs/_static/contactmanager_1_cs1.zip)

> <span data-ttu-id="01853-107">В первой итерации мы создаем Контакт-менеджер самым простым способом.</span><span class="sxs-lookup"><span data-stu-id="01853-107">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="01853-108">Мы добавляем поддержку для основных операций базы данных: Создание, чтение, обновление и удаление (CRUD).</span><span class="sxs-lookup"><span data-stu-id="01853-108">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="01853-109">Создание приложения управления контактами ASP.NET MVC (VB)</span><span class="sxs-lookup"><span data-stu-id="01853-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="01853-110">В этой серии учебников мы создаем все приложение Управления Контактами от начала до конца.</span><span class="sxs-lookup"><span data-stu-id="01853-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="01853-111">Приложение Contact Manager позволяет хранить контактную информацию - имена, номера телефонов и адреса электронной почты - для списка людей.</span><span class="sxs-lookup"><span data-stu-id="01853-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="01853-112">Мы строим приложение по нескольким итерациям.</span><span class="sxs-lookup"><span data-stu-id="01853-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="01853-113">С каждой итерацией мы постепенно совершенствуем приложение.</span><span class="sxs-lookup"><span data-stu-id="01853-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="01853-114">Цель этого подхода с множественной итерацией состоит в том, чтобы вы могли понять причину каждого изменения.</span><span class="sxs-lookup"><span data-stu-id="01853-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="01853-115">Итерация #1 - Создайте приложение.</span><span class="sxs-lookup"><span data-stu-id="01853-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="01853-116">В первой итерации мы создаем Контакт-менеджер самым простым способом.</span><span class="sxs-lookup"><span data-stu-id="01853-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="01853-117">Мы добавляем поддержку для основных операций базы данных: Создание, чтение, обновление и удаление (CRUD).</span><span class="sxs-lookup"><span data-stu-id="01853-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="01853-118">Итерация #2 - Сделать приложение хорошо выглядеть.</span><span class="sxs-lookup"><span data-stu-id="01853-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="01853-119">В этой итерации мы улучшаем внешний вид приложения, изменяя страницу по умолчанию ASP.NET MVC просмотра и каскадный стиль листа.</span><span class="sxs-lookup"><span data-stu-id="01853-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="01853-120">Итерация #3 - Добавить проверку формы.</span><span class="sxs-lookup"><span data-stu-id="01853-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="01853-121">В третьей итерации мы добавляем базовую проверку формы.</span><span class="sxs-lookup"><span data-stu-id="01853-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="01853-122">Мы не позволяем людям подавать форму без заполнения требуемых полей формы.</span><span class="sxs-lookup"><span data-stu-id="01853-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="01853-123">Мы также проверяем адреса электронной почты и номера телефонов.</span><span class="sxs-lookup"><span data-stu-id="01853-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="01853-124">Итерация #4 - Сделать приложение слабо связаны.</span><span class="sxs-lookup"><span data-stu-id="01853-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="01853-125">В этой четвертой итерации мы воспользуемся несколькими шаблонами проектирования программного обеспечения, чтобы упростить обслуживание и изменение приложения Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="01853-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="01853-126">Например, мы рефакторизуем наше приложение, чтобы использовать шаблон репозитория и шаблон инъекций зависимостей.</span><span class="sxs-lookup"><span data-stu-id="01853-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="01853-127">Итерация #5 - Создание модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="01853-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="01853-128">В пятой итерации мы упрощаем обслуживание и модификацию нашего приложения путем добавления модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="01853-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="01853-129">Мы издеваемся над нашими классами моделей данных и строим модульные тесты для наших контроллеров и логики проверки.</span><span class="sxs-lookup"><span data-stu-id="01853-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="01853-130">Итерация #6 - Использование тест-ориентированной разработки.</span><span class="sxs-lookup"><span data-stu-id="01853-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="01853-131">В этой шестой итерации мы добавляем новую функциональность в наше приложение, написав модульные тесты сначала и написав код против модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="01853-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="01853-132">В этой итерации мы добавляем контактные группы.</span><span class="sxs-lookup"><span data-stu-id="01853-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="01853-133">Итерация #7 - Добавить функциональность Ajax.</span><span class="sxs-lookup"><span data-stu-id="01853-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="01853-134">В седьмой итерации мы улучшаем отзывчивость и производительность нашего приложения, добавляя поддержку Ajax.</span><span class="sxs-lookup"><span data-stu-id="01853-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="01853-135">Эта итерация</span><span class="sxs-lookup"><span data-stu-id="01853-135">This Iteration</span></span>

<span data-ttu-id="01853-136">В этой первой итерации мы создаем базовое приложение.</span><span class="sxs-lookup"><span data-stu-id="01853-136">In this first iteration, we build the basic application.</span></span> <span data-ttu-id="01853-137">Цель состоит в том, чтобы построить контактный менеджер самым быстрым и простым способом.</span><span class="sxs-lookup"><span data-stu-id="01853-137">The goal is to build the Contact Manager in the fastest and simplest way possible.</span></span> <span data-ttu-id="01853-138">В более поздних итерациях мы улучшаем дизайн приложения.</span><span class="sxs-lookup"><span data-stu-id="01853-138">In later iterations, we improve the design of the application.</span></span>

<span data-ttu-id="01853-139">Приложение Contact Manager — это базовое приложение, управляемое базой данных.</span><span class="sxs-lookup"><span data-stu-id="01853-139">The Contact Manager application is a basic database-driven application.</span></span> <span data-ttu-id="01853-140">Приложение можно использовать для создания новых контактов, отсечения существующих контактов и удаления контактов.</span><span class="sxs-lookup"><span data-stu-id="01853-140">You can use the application to create new contacts, edit existing contacts, and delete contacts.</span></span>

<span data-ttu-id="01853-141">В этой итерации мы завершаем следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="01853-141">In this iteration, we complete the following steps:</span></span>

1. <span data-ttu-id="01853-142">ASP.NET приложение MVC</span><span class="sxs-lookup"><span data-stu-id="01853-142">ASP.NET MVC application</span></span>
2. <span data-ttu-id="01853-143">Создание базы данных для хранения контактов</span><span class="sxs-lookup"><span data-stu-id="01853-143">Create a database to store our contacts</span></span>
3. <span data-ttu-id="01853-144">Создание класса моделей для нашей базы данных с помощью рамочной системы сущности Майкрософт</span><span class="sxs-lookup"><span data-stu-id="01853-144">Generate a model class for our database with the Microsoft Entity Framework</span></span>
4. <span data-ttu-id="01853-145">Создайте действие контроллера и представление, которое позволяет нам перечислить все контакты в базе данных</span><span class="sxs-lookup"><span data-stu-id="01853-145">Create a controller action and view that enables us to list all of the contacts in the database</span></span>
5. <span data-ttu-id="01853-146">Создание действий контроллера и представления, которое позволяет нам создать новый контакт в базе данных</span><span class="sxs-lookup"><span data-stu-id="01853-146">Create controller actions and a view that enables us to create a new contact in the database</span></span>
6. <span data-ttu-id="01853-147">Создание действий контроллера и представления, которое позволяет нам отсеивать существующий контакт в базе данных</span><span class="sxs-lookup"><span data-stu-id="01853-147">Create controller actions and a view that enables us to edit an existing contact in the database</span></span>
7. <span data-ttu-id="01853-148">Создание действий контроллера и представления, которое позволяет нам удалить существующий контакт в базе данных</span><span class="sxs-lookup"><span data-stu-id="01853-148">Create controller actions and a view that enables us to delete an existing contact in the database</span></span>

## <a name="software-prerequisites"></a><span data-ttu-id="01853-149">Обязательное программное обеспечение</span><span class="sxs-lookup"><span data-stu-id="01853-149">Software Prerequisites</span></span>

<span data-ttu-id="01853-150">В ASP.NET приложенияm MVC, вы должны иметь либо Visual Studio 2008 или Visual Web Developer 2008 установлен на вашем компьютере (Visual Web Developer является бесплатной версией Visual Studio, которая не включает в себя все расширенные функции Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="01853-150">In ASP.NET MVC applications, you must have either Visual Studio 2008 or Visual Web Developer 2008 installed on your computer (Visual Web Developer is a free version of Visual Studio that does not include all of the advanced features of Visual Studio).</span></span> <span data-ttu-id="01853-151">Вы можете скачать либо пробную версию Visual Studio 2008, либо Visual Web Developer со следующего адреса:</span><span class="sxs-lookup"><span data-stu-id="01853-151">You can download either the trial version of Visual Studio 2008 or Visual Web Developer from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

> [!NOTE] 
> 
> <span data-ttu-id="01853-152">Для ASP.NET приложений MVC с visual Web Developer необходимо установить набор служб визуальных веб-разработчиков 1.</span><span class="sxs-lookup"><span data-stu-id="01853-152">For ASP.NET MVC applications with Visual Web Developer, you must have Visual Web Developer Service Pack 1 installed.</span></span> <span data-ttu-id="01853-153">Без пакета услуг 1 невозможно создавать веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="01853-153">Without Service Pack 1, you cannot create Web Application Projects.</span></span>

<span data-ttu-id="01853-154">ASP.NET рамки MVC.</span><span class="sxs-lookup"><span data-stu-id="01853-154">ASP.NET MVC framework.</span></span> <span data-ttu-id="01853-155">Вы можете скачать ASP.NET mVC-платформу по следующему адресу:</span><span class="sxs-lookup"><span data-stu-id="01853-155">You can download the ASP.NET MVC framework from the following address:</span></span>

[https://www.asp.net/mvc](../../../index.md)

<span data-ttu-id="01853-156">В этом уроке мы используем рамочную программу Microsoft Entity для доступа к базе данных.</span><span class="sxs-lookup"><span data-stu-id="01853-156">In this tutorial, we use the Microsoft Entity Framework to access a database.</span></span> <span data-ttu-id="01853-157">Рамочная программа entity включена в программу .NET Framework 3.5 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="01853-157">The Entity Framework is included with .NET Framework 3.5 Service Pack 1.</span></span> <span data-ttu-id="01853-158">Вы можете скачать этот пакет услуг из следующего места:</span><span class="sxs-lookup"><span data-stu-id="01853-158">You can download this service pack from the following location:</span></span>

[<span data-ttu-id="01853-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang'en</span><span class="sxs-lookup"><span data-stu-id="01853-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en)

<span data-ttu-id="01853-160">В качестве альтернативы выполнению каждой из этих загрузок по одному, вы можете воспользоваться web Platform Installer (Web PI).</span><span class="sxs-lookup"><span data-stu-id="01853-160">As an alternative to performing each of these downloads one by one, you can take advantage of the Web Platform Installer (Web PI).</span></span> <span data-ttu-id="01853-161">Вы можете скачать Web PI со следующего адреса:</span><span class="sxs-lookup"><span data-stu-id="01853-161">You can download the Web PI from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

## <a name="aspnet-mvc-project"></a><span data-ttu-id="01853-162">проект ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="01853-162">ASP.NET MVC Project</span></span>

<span data-ttu-id="01853-163">ASP.NET проект веб-приложений MVC.</span><span class="sxs-lookup"><span data-stu-id="01853-163">ASP.NET MVC Web Application Project.</span></span> <span data-ttu-id="01853-164">Запустите Visual Studio и выберите вариант меню **Файл, Новый проект**.</span><span class="sxs-lookup"><span data-stu-id="01853-164">Launch Visual Studio and select the menu option **File, New Project**.</span></span> <span data-ttu-id="01853-165">Появляется диалог **нового проекта** (см. рисунок 1).</span><span class="sxs-lookup"><span data-stu-id="01853-165">The **New Project** dialog appears (see Figure 1).</span></span> <span data-ttu-id="01853-166">Выберите тип **веб-проекта** и шаблон **веб-приложений ASP.NET MVC.**</span><span class="sxs-lookup"><span data-stu-id="01853-166">Select the **Web** project type and the **ASP.NET MVC Web Application** template.</span></span> <span data-ttu-id="01853-167">Назовите свой новый проект *ContactManager* и нажмите кнопку OK.</span><span class="sxs-lookup"><span data-stu-id="01853-167">Name your new project *ContactManager* and click the OK button.</span></span>

<span data-ttu-id="01853-168">Убедитесь, что у вас есть .NET Framework 3.5, выбранный из списка выпадающих в верхнем правом верхнем правом направлении диалога **Нового проекта.**</span><span class="sxs-lookup"><span data-stu-id="01853-168">Make sure that you have .NET Framework 3.5 selected from the dropdown list at the top right of the **New Project** dialog.</span></span> <span data-ttu-id="01853-169">В противном случае шаблон веб-приложений ASP.NET MVC MVC не появится.</span><span class="sxs-lookup"><span data-stu-id="01853-169">Otherwise, the ASP.NET MVC Web Application template won't appear.</span></span>

<span data-ttu-id="01853-170">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="01853-170">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span></span>

<span data-ttu-id="01853-171">**Рисунок 01**: Новый диалог проекта[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="01853-171">**Figure 01**: The New Project dialog([Click to view full-size image](iteration-1-create-the-application-cs/_static/image2.png))</span></span>

<span data-ttu-id="01853-172">ASP.NET приложении MVC отображается диалог проекта **Create Unit Test Project.**</span><span class="sxs-lookup"><span data-stu-id="01853-172">ASP.NET MVC application, the **Create Unit Test Project** dialog appears.</span></span> <span data-ttu-id="01853-173">Этот диалог можно использовать для указания того, что вы хотите создать и добавить проект модульного теста для вашего решения при создании ASP.NET приложения MVC.</span><span class="sxs-lookup"><span data-stu-id="01853-173">You can use this dialog to indicate that you want to create and add a unit test project to your solution when you create your ASP.NET MVC application.</span></span> <span data-ttu-id="01853-174">Хотя мы не будем создавать модульные тесты в этой итерации, следует выбрать **опцию Да, создать модульный тестовый проект,** поскольку мы планируем добавить модульные тесты в более поздней итерации.</span><span class="sxs-lookup"><span data-stu-id="01853-174">Although we won't be building unit tests in this iteration, you should select the option **Yes, create a unit test project** because we plan to add unit tests in a later iteration.</span></span> <span data-ttu-id="01853-175">Добавление тестового проекта при первом создании нового проекта mVC ASP.NET гораздо проще, чем добавление тестового проекта после создания проекта ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="01853-175">Adding a Test project when you first create a new ASP.NET MVC project is much easier than adding a Test project after the ASP.NET MVC project has been created.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="01853-176">Поскольку визуальный веб-разработчик не поддерживает проекты Test, при использовании Visual Web Developer не получается диалог проекта Create Unit Test Project.</span><span class="sxs-lookup"><span data-stu-id="01853-176">Because Visual Web Developer does not support Test projects, you do not get the Create Unit Test Project dialog when using Visual Web Developer.</span></span>

<span data-ttu-id="01853-177">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="01853-177">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span></span>

<span data-ttu-id="01853-178">**Рисунок 02**: Создание группы тестовый проект диалог ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="01853-178">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image4.png))</span></span>

<span data-ttu-id="01853-179">ASP.NET приложение MVC появляется в окне Visual Studio Solution Explorer (см. рисунок 3).</span><span class="sxs-lookup"><span data-stu-id="01853-179">ASP.NET MVC application appears in the Visual Studio Solution Explorer window (see Figure 3).</span></span> <span data-ttu-id="01853-180">Если вы не видите окно Solution Explorer, то вы можете открыть это окно, выбрав вариант меню **View, Solution Explorer.**</span><span class="sxs-lookup"><span data-stu-id="01853-180">If you don t see the Solution Explorer window then you can open this window by selecting the menu option **View, Solution Explorer**.</span></span> <span data-ttu-id="01853-181">Обратите внимание, что решение содержит два проекта: проект ASP.NET MVC и проект Test.</span><span class="sxs-lookup"><span data-stu-id="01853-181">Notice that the solution contains two projects: the ASP.NET MVC project and the Test project.</span></span> <span data-ttu-id="01853-182">Проект ASP.NET MVC называется ContactManager, а тестовый проект называется ContactManager.Tests.</span><span class="sxs-lookup"><span data-stu-id="01853-182">The ASP.NET MVC project is named ContactManager and the Test project is named ContactManager.Tests.</span></span>

<span data-ttu-id="01853-183">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="01853-183">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span></span>

<span data-ttu-id="01853-184">**Рисунок 03**: Окно Solution Explorer ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="01853-184">**Figure 03**: The Solution Explorer window ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image6.png))</span></span>

## <a name="deleting-the-project-sample-files"></a><span data-ttu-id="01853-185">Удаляние примера файлов проекта</span><span class="sxs-lookup"><span data-stu-id="01853-185">Deleting the Project Sample Files</span></span>

<span data-ttu-id="01853-186">Шаблон проекта ASP.NET MVC включает в себя примерные файлы для контроллеров и представлений.</span><span class="sxs-lookup"><span data-stu-id="01853-186">The ASP.NET MVC project template includes sample files for controllers and views.</span></span> <span data-ttu-id="01853-187">Перед созданием нового приложения mVC ASP.NET следует удалить эти файлы.</span><span class="sxs-lookup"><span data-stu-id="01853-187">Before creating a new ASP.NET MVC application, you should delete these files.</span></span> <span data-ttu-id="01853-188">Вы можете удалить файлы и папки в окне Solution Explorer, нажав правой кнопкой мыши на файл или папку и выбрав вариант меню **Удалить.**</span><span class="sxs-lookup"><span data-stu-id="01853-188">You can delete files and folders in the Solution Explorer window by right-clicking a file or folder and selecting the menu option **Delete**.</span></span>

<span data-ttu-id="01853-189">Вам нужно удалить следующие файлы из проекта mVC ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="01853-189">You need to delete the following files from the ASP.NET MVC project:</span></span>

- <span data-ttu-id="01853-190">«Контролеры»HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="01853-190">\Controllers\HomeController.cs</span></span>

- <span data-ttu-id="01853-191">«Виды»Домашний»О.Аспк</span><span class="sxs-lookup"><span data-stu-id="01853-191">\Views\Home\About.aspx</span></span>

- <span data-ttu-id="01853-192">«Виды»Домашний индекс.aspx</span><span class="sxs-lookup"><span data-stu-id="01853-192">\Views\Home\Index.aspx</span></span>

<span data-ttu-id="01853-193">Кроме того, необходимо удалить следующий файл из проекта Test:</span><span class="sxs-lookup"><span data-stu-id="01853-193">And, you need to delete the following file from the Test project:</span></span>

<span data-ttu-id="01853-194">«Контролеры»HomeControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="01853-194">\Controllers\HomeControllerTest.cs</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="01853-195">Создание базы данных</span><span class="sxs-lookup"><span data-stu-id="01853-195">Creating the Database</span></span>

<span data-ttu-id="01853-196">Приложение Contact Manager — это веб-приложение, управляемое базой данных.</span><span class="sxs-lookup"><span data-stu-id="01853-196">The Contact Manager application is a database-driven web application.</span></span> <span data-ttu-id="01853-197">Мы используем базу данных для хранения контактной информации.</span><span class="sxs-lookup"><span data-stu-id="01853-197">We use a database to store the contact information.</span></span>

<span data-ttu-id="01853-198">Платформа ASP.NET MVC с любой современной базой данных, включая базы данных Microsoft S'L Server, Oracle, MyS'L и IBM DB2.</span><span class="sxs-lookup"><span data-stu-id="01853-198">The ASP.NET MVC framework with any modern database including Microsoft SQL Server, Oracle, MySQL, and IBM DB2 databases.</span></span> <span data-ttu-id="01853-199">В этом уроке мы используем базу данных Microsoft S'L Server.</span><span class="sxs-lookup"><span data-stu-id="01853-199">In this tutorial, we use a Microsoft SQL Server database.</span></span> <span data-ttu-id="01853-200">При установке Visual Studio вам предоставляется возможность установки Microsoft S'L Server Express, которая является бесплатной версией базы данных Microsoft S'L Server.</span><span class="sxs-lookup"><span data-stu-id="01853-200">When you install Visual Studio, you are provided with the option of installing Microsoft SQL Server Express which is a free version of the Microsoft SQL Server database.</span></span>

<span data-ttu-id="01853-201">Создайте новую базу данных,\_нажав на папку App Data в окне Solution Explorer и выбрав опцию **«Добавить» —новый пункт.**</span><span class="sxs-lookup"><span data-stu-id="01853-201">Create a new database by right-clicking the App\_Data folder in the Solution Explorer window and selecting the menu option **Add, New Item**.</span></span> <span data-ttu-id="01853-202">В диалоге **Добавить новый элемент** выберите категорию **данных** и шаблон **базы данных серверов S'L** (см. рисунок 4).</span><span class="sxs-lookup"><span data-stu-id="01853-202">In the **Add New Item** dialog, select the **Data** category and the **SQL Server Database** template (see Figure 4).</span></span> <span data-ttu-id="01853-203">Назовите новую базу данных ContactManagerDB.mdf и нажмите кнопку OK.</span><span class="sxs-lookup"><span data-stu-id="01853-203">Name the new database ContactManagerDB.mdf and click the OK button.</span></span>

<span data-ttu-id="01853-204">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="01853-204">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span></span>

<span data-ttu-id="01853-205">**Рисунок 04**: Создание новой базы данных Microsoft S'L Server Express ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="01853-205">**Figure 04**: Creating a new Microsoft SQL Server Express database ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image8.png))</span></span>

<span data-ttu-id="01853-206">После создания новой базы данных база\_данных появляется в папке App Data в окне Solution Explorer.</span><span class="sxs-lookup"><span data-stu-id="01853-206">After you create the new database, the database appears in the App\_Data folder in the Solution Explorer window.</span></span> <span data-ttu-id="01853-207">Дважды щелкните файл ContactManager.mdf, чтобы открыть окно Server Explorer и подключиться к базе данных.</span><span class="sxs-lookup"><span data-stu-id="01853-207">Double-click the ContactManager.mdf file to open the Server Explorer window and connect to the database.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="01853-208">Окно Server Explorer называется окном Database Explorer в случае Microsoft Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="01853-208">The Server Explorer window is called the Database Explorer window in the case of Microsoft Visual Web Developer.</span></span>

<span data-ttu-id="01853-209">Окно Server Explorer можно использовать для создания новых объектов базы данных, таких как таблицы баз данных, представления, триггеры и сохраненные процедуры.</span><span class="sxs-lookup"><span data-stu-id="01853-209">You can use the Server Explorer window to create new database objects such as database tables, views, triggers, and stored procedures.</span></span> <span data-ttu-id="01853-210">Нажмите правой кнопкой папку Таблицы и выберите вариант меню **Добавить новый стол.**</span><span class="sxs-lookup"><span data-stu-id="01853-210">Right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="01853-211">Отображается конструктор таблицы базы данных (см. рисунок 5).</span><span class="sxs-lookup"><span data-stu-id="01853-211">The Database Table Designer appears (see Figure 5).</span></span>

<span data-ttu-id="01853-212">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="01853-212">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span></span>

<span data-ttu-id="01853-213">**Рисунок 05**: Дизайнер таблицы базы данных[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="01853-213">**Figure 05**: The Database Table Designer ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image10.png))</span></span>

<span data-ttu-id="01853-214">Нам нужно создать таблицу, содержащую следующие столбцы:</span><span class="sxs-lookup"><span data-stu-id="01853-214">We need to create a table that contains the following columns:</span></span>

<a id="0.1_table01"></a>

| <span data-ttu-id="01853-215">**Имя столбца**</span><span class="sxs-lookup"><span data-stu-id="01853-215">**Column Name**</span></span> | <span data-ttu-id="01853-216">**Тип данных**</span><span class="sxs-lookup"><span data-stu-id="01853-216">**Data Type**</span></span> | <span data-ttu-id="01853-217">**Разрешить значения NULL**</span><span class="sxs-lookup"><span data-stu-id="01853-217">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="01853-218">Идентификатор</span><span class="sxs-lookup"><span data-stu-id="01853-218">Id</span></span> | <span data-ttu-id="01853-219">INT</span><span class="sxs-lookup"><span data-stu-id="01853-219">int</span></span> | <span data-ttu-id="01853-220">false</span><span class="sxs-lookup"><span data-stu-id="01853-220">false</span></span> |
| <span data-ttu-id="01853-221">FirstName</span><span class="sxs-lookup"><span data-stu-id="01853-221">FirstName</span></span> | <span data-ttu-id="01853-222">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="01853-222">nvarchar(50)</span></span> | <span data-ttu-id="01853-223">false</span><span class="sxs-lookup"><span data-stu-id="01853-223">false</span></span> |
| <span data-ttu-id="01853-224">LastName</span><span class="sxs-lookup"><span data-stu-id="01853-224">LastName</span></span> | <span data-ttu-id="01853-225">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="01853-225">nvarchar(50)</span></span> | <span data-ttu-id="01853-226">false</span><span class="sxs-lookup"><span data-stu-id="01853-226">false</span></span> |
| <span data-ttu-id="01853-227">Номер телефона</span><span class="sxs-lookup"><span data-stu-id="01853-227">Phone</span></span> | <span data-ttu-id="01853-228">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="01853-228">nvarchar(50)</span></span> | <span data-ttu-id="01853-229">false</span><span class="sxs-lookup"><span data-stu-id="01853-229">false</span></span> |
| <span data-ttu-id="01853-230">Email</span><span class="sxs-lookup"><span data-stu-id="01853-230">Email</span></span> | <span data-ttu-id="01853-231">nvarchar(255)</span><span class="sxs-lookup"><span data-stu-id="01853-231">nvarchar(255)</span></span> | <span data-ttu-id="01853-232">false</span><span class="sxs-lookup"><span data-stu-id="01853-232">false</span></span> |

<span data-ttu-id="01853-233">Первая колонка, колонка Id, является особенной.</span><span class="sxs-lookup"><span data-stu-id="01853-233">The first column, the Id column, is special.</span></span> <span data-ttu-id="01853-234">Необходимо пометить столбец Id как столбец Identity и столбец Основного ключа.</span><span class="sxs-lookup"><span data-stu-id="01853-234">You need to mark the Id column as an Identity column and a Primary Key column.</span></span> <span data-ttu-id="01853-235">Вы указываете, что столбец — это столбец идентификации, расширяя свойства столбца (смотрите в нижней части рисунка 6) и прокручивая до свойства спецификации идентификации.</span><span class="sxs-lookup"><span data-stu-id="01853-235">You indicate that a column is an Identity column by expanding Column Properties (look at the bottom of Figure 6) and scrolling down to the Identity Specification property.</span></span> <span data-ttu-id="01853-236">Установите свойство **(Is Identity)** на значение **Yes.**</span><span class="sxs-lookup"><span data-stu-id="01853-236">Set the **(Is Identity)** property to the value **Yes**.</span></span>

<span data-ttu-id="01853-237">Вы помечаете столбец как столбец Основного ключа, выбрав столбец и нажав на кнопку значком ключа.</span><span class="sxs-lookup"><span data-stu-id="01853-237">You mark a column as a Primary Key column by selecting the column and clicking the button with the icon of a key.</span></span> <span data-ttu-id="01853-238">После того, как столбец помечен как столбец основного ключа, рядом с столбцей появляется значок ключа (см. рисунок 6).</span><span class="sxs-lookup"><span data-stu-id="01853-238">After a column is marked as a Primary Key column, an icon of a key appears next to the column (see Figure 6).</span></span>

<span data-ttu-id="01853-239">После завершения создания таблицы нажмите кнопку «Сохранить» (кнопку с иконкой дискеты), чтобы сохранить новую таблицу.</span><span class="sxs-lookup"><span data-stu-id="01853-239">After you finish creating the table, click the Save button (the button with an icon of a floppy) to save the new table.</span></span> <span data-ttu-id="01853-240">Дайте новой таблице имя *Контакты*.</span><span class="sxs-lookup"><span data-stu-id="01853-240">Give your new table the name *Contacts*.</span></span>

<span data-ttu-id="01853-241">После завершения создания таблицы базы данных Контактов следует добавить некоторые записи в таблицу.</span><span class="sxs-lookup"><span data-stu-id="01853-241">After finish creating the Contacts database table, you should add some records to the table.</span></span> <span data-ttu-id="01853-242">Нажмите правой кнопкой мыши таблицы Контакты в окне Server Explorer и выберите вариант меню **Показать таблицы данных.**</span><span class="sxs-lookup"><span data-stu-id="01853-242">Right-click the Contacts table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="01853-243">Введите один или несколько контактов в появляется сетке.</span><span class="sxs-lookup"><span data-stu-id="01853-243">Enter one or more contacts in the grid that appears.</span></span>

## <a name="creating-the-data-model"></a><span data-ttu-id="01853-244">Создание модели данных</span><span class="sxs-lookup"><span data-stu-id="01853-244">Creating the Data Model</span></span>

<span data-ttu-id="01853-245">Приложение ASP.NET MVC состоит из моделей, представлений и контроллеров.</span><span class="sxs-lookup"><span data-stu-id="01853-245">The ASP.NET MVC application consists of Models, Views, and Controllers.</span></span> <span data-ttu-id="01853-246">Мы начинаем с создания класса Модели, представляющего таблицу Контактов, созданную в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="01853-246">We start by creating a Model class that represents the Contacts table that we created in the previous section.</span></span>

<span data-ttu-id="01853-247">В этом уроке мы используем рамочную программу Microsoft Entity Для автоматического создания класса моделей из базы данных.</span><span class="sxs-lookup"><span data-stu-id="01853-247">In this tutorial, we use the Microsoft Entity Framework to generate a model class from the database automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="01853-248">Платформа ASP.NET MVC никоим образом не привязана к рамочной системе корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="01853-248">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework in any way.</span></span> <span data-ttu-id="01853-249">Вы можете использовать ASP.NET MVC с альтернативными технологиями доступа к базе данных, включая NHibernate, LIN- в S'L или ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="01853-249">You can use ASP.NET MVC with alternative database access technologies including NHibernate, LINQ to SQL, or ADO.NET.</span></span>

<span data-ttu-id="01853-250">Выполните следующие действия, чтобы создать классы моделей данных:</span><span class="sxs-lookup"><span data-stu-id="01853-250">Follow these steps to create the data model classes:</span></span>

1. <span data-ttu-id="01853-251">Нажмите правой кнопкой папку Модели в окне Solution Explorer и выберите **Добавить, Новый пункт**.</span><span class="sxs-lookup"><span data-stu-id="01853-251">Right-click the Models folder in the Solution Explorer window and select **Add, New Item**.</span></span> <span data-ttu-id="01853-252">Появляется диалог **«Добавить новый элемент»** (см. рисунок 6).</span><span class="sxs-lookup"><span data-stu-id="01853-252">The **Add New Item** dialog appears (see Figure 6).</span></span>
2. <span data-ttu-id="01853-253">Выберите категорию **данных** и шаблон **модели ADO.NET данных Entity.**</span><span class="sxs-lookup"><span data-stu-id="01853-253">Select the **Data** category and the **ADO.NET Entity Data Model** template.</span></span> <span data-ttu-id="01853-254">Назовите свою модель данных *ContactManagerModel.edmx* и нажмите кнопку **Добавить.**</span><span class="sxs-lookup"><span data-stu-id="01853-254">Name your data model *ContactManagerModel.edmx* and click the **Add** button.</span></span> <span data-ttu-id="01853-255">Появляется мастер модели данных сущности (см. рисунок 7).</span><span class="sxs-lookup"><span data-stu-id="01853-255">The Entity Data Model wizard appears (see Figure 7).</span></span>
3. <span data-ttu-id="01853-256">На этапе **«Выбрать содержимое модели»** выберите **«Создание» из базы данных** (см. рисунок 7).</span><span class="sxs-lookup"><span data-stu-id="01853-256">In the **Choose Model Contents** step, select **Generate from database** (see Figure 7).</span></span>
4. <span data-ttu-id="01853-257">На этапе **«Выберите подключение к данным»** выберите базу данных ContactManagerDB.mdf и введите имя *ContactManagerDBEntities* для настроек соединения entity (см. рисунок 8).</span><span class="sxs-lookup"><span data-stu-id="01853-257">In the **Choose Your Data Connection** step, select the ContactManagerDB.mdf database and enter the name *ContactManagerDBEntities* for the Entity Connection Settings (see Figure 8).</span></span>
5. <span data-ttu-id="01853-258">На этапе **«Выберите объекты базы данных»** выберите флажок с меткой таблицы (см. рисунок 9).</span><span class="sxs-lookup"><span data-stu-id="01853-258">In the **Choose Your Database Objects** step, select the checkbox labeled Tables (see Figure 9).</span></span> <span data-ttu-id="01853-259">Модель данных будет включать все таблицы, содержащиеся в вашей базе данных (есть только одна, таблица Контактов).</span><span class="sxs-lookup"><span data-stu-id="01853-259">The data model will include all tables contained in your database (there is just one, the Contacts table).</span></span> <span data-ttu-id="01853-260">Введите *модели*пространства имен.</span><span class="sxs-lookup"><span data-stu-id="01853-260">Enter the namespace *Models*.</span></span> <span data-ttu-id="01853-261">Нажмите кнопку Отделка, чтобы завершить мастера.</span><span class="sxs-lookup"><span data-stu-id="01853-261">Click the Finish button to complete the wizard.</span></span>

<span data-ttu-id="01853-262">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="01853-262">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span></span>

<span data-ttu-id="01853-263">**Рисунок 06**: Добавить новый элемент диалог ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="01853-263">**Figure 06**: The Add New Item dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image12.png))</span></span>

<span data-ttu-id="01853-264">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="01853-264">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span></span>

<span data-ttu-id="01853-265">**Рисунок 07**: Выберите содержимое модели ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="01853-265">**Figure 07**: Choose Model Contents ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image14.png))</span></span>

<span data-ttu-id="01853-266">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="01853-266">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span></span>

<span data-ttu-id="01853-267">**Рисунок 08**: Выберите подключение к данным[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="01853-267">**Figure 08**: Choose Your Data Connection ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image16.png))</span></span>

<span data-ttu-id="01853-268">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="01853-268">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span></span>

<span data-ttu-id="01853-269">**Рисунок 09**: Выберите объекты базы данных[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="01853-269">**Figure 09**: Choose Your Database Objects ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image18.png))</span></span>

<span data-ttu-id="01853-270">После завершения модели модели Entity Мастера появляется модель модели данных entity.</span><span class="sxs-lookup"><span data-stu-id="01853-270">After you complete the Entity Data Model Wizard, the Entity Data Model Designer appears.</span></span> <span data-ttu-id="01853-271">Дизайнер отображает класс, соответствующий моделируемой таблице.</span><span class="sxs-lookup"><span data-stu-id="01853-271">The designer displays a class that corresponds to each table being modeled.</span></span> <span data-ttu-id="01853-272">Вы должны увидеть один класс с названием Контакты.</span><span class="sxs-lookup"><span data-stu-id="01853-272">You should see one class named Contacts.</span></span>

<span data-ttu-id="01853-273">Мастер модели данных сущности генерирует имена классов на основе имен таблиц баз данных.</span><span class="sxs-lookup"><span data-stu-id="01853-273">The Entity Data Model wizard generates class names based on database table names.</span></span> <span data-ttu-id="01853-274">Почти всегда нужно изменить название класса, генерируемого мастером.</span><span class="sxs-lookup"><span data-stu-id="01853-274">You almost always need to change the name of the class generated by the wizard.</span></span> <span data-ttu-id="01853-275">Нажмите правой кнопкой мыши класса Контакты в дизайнере и выберите вариант меню **Переименовать.**</span><span class="sxs-lookup"><span data-stu-id="01853-275">Right-click the Contacts class in the designer and select the menu option **Rename**.</span></span> <span data-ttu-id="01853-276">Измените название класса с Контактов (множественное число) на Контакт (единственное).</span><span class="sxs-lookup"><span data-stu-id="01853-276">Change the name of the class from Contacts (plural) to Contact (singular).</span></span> <span data-ttu-id="01853-277">После изменения имени класса класс должен отображаться как рисунок 10.</span><span class="sxs-lookup"><span data-stu-id="01853-277">After you change the class name, the class should appear like Figure 10.</span></span>

<span data-ttu-id="01853-278">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="01853-278">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span></span>

<span data-ttu-id="01853-279">**Рисунок 10**: Контактный класс[(Нажмите, чтобы посмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="01853-279">**Figure 10**: The Contact class ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image20.png))</span></span>

<span data-ttu-id="01853-280">На данный момент мы создали нашу модель базы данных.</span><span class="sxs-lookup"><span data-stu-id="01853-280">At this point, we have created our database model.</span></span> <span data-ttu-id="01853-281">Мы можем использовать класс Контакт для представления определенной записи контактов в нашей базе данных.</span><span class="sxs-lookup"><span data-stu-id="01853-281">We can use the Contact class to represent a particular contact record in our database.</span></span>

## <a name="creating-the-home-controller"></a><span data-ttu-id="01853-282">Создание домашнего контроллера</span><span class="sxs-lookup"><span data-stu-id="01853-282">Creating the Home Controller</span></span>

<span data-ttu-id="01853-283">Следующим шагом является создание нашего домашнего контроллера.</span><span class="sxs-lookup"><span data-stu-id="01853-283">The next step is to create our Home controller.</span></span> <span data-ttu-id="01853-284">Домашний контроллер — контроллер по умолчанию, на который ссылается в ASP.NET MVC-приложении.</span><span class="sxs-lookup"><span data-stu-id="01853-284">The Home controller is the default controller invoked in an ASP.NET MVC application.</span></span>

<span data-ttu-id="01853-285">Создайте класс домашнего контроллера, нажав на папку контроллеров в окне Solution Explorer и выбрав опцию **«Добавить»** (см. рисунок 11).</span><span class="sxs-lookup"><span data-stu-id="01853-285">Create the Home controller class by right-clicking the Controllers folder in the Solution Explorer window and selecting the menu option **Add, Controller** (see Figure 11).</span></span> <span data-ttu-id="01853-286">Обратите внимание на флажок с пометкой **Добавление методов для сценариев создания, обновления и деталей.**</span><span class="sxs-lookup"><span data-stu-id="01853-286">Notice the checkbox labeled **Add action methods for Create, Update, and Details scenarios**.</span></span> <span data-ttu-id="01853-287">Убедитесь, что этот флажок проверяется, прежде чем нажать кнопку **Добавить.**</span><span class="sxs-lookup"><span data-stu-id="01853-287">Make sure that this checkbox is checked before clicking the **Add** button.</span></span>

<span data-ttu-id="01853-288">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="01853-288">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span></span>

<span data-ttu-id="01853-289">**Рисунок 11**: Добавление домашнего контроллера ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="01853-289">**Figure 11**: Adding the Home controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image22.png))</span></span>

<span data-ttu-id="01853-290">При создании контроллера Home вы получаете класс в листинге 1.</span><span class="sxs-lookup"><span data-stu-id="01853-290">When you create the Home controller, you get the class in Listing 1.</span></span>

<span data-ttu-id="01853-291">**Список 1 - Контролеры**</span><span class="sxs-lookup"><span data-stu-id="01853-291">**Listing 1 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample1.cs)]

## <a name="listing-the-contacts"></a><span data-ttu-id="01853-292">Перечисление контактов</span><span class="sxs-lookup"><span data-stu-id="01853-292">Listing the Contacts</span></span>

<span data-ttu-id="01853-293">Для отображения записей в таблице базы данных Контактов нам необходимо создать действие Индекса () и представление индекса.</span><span class="sxs-lookup"><span data-stu-id="01853-293">In order to display the records in the Contacts database table, we need to create an Index() action and an Index view.</span></span>

<span data-ttu-id="01853-294">Домашний контроллер уже содержит действие Индекса ()</span><span class="sxs-lookup"><span data-stu-id="01853-294">The Home controller already contains an Index() action.</span></span> <span data-ttu-id="01853-295">Мы должны изменить этот метод так, чтобы он выглядел как листинг 2.</span><span class="sxs-lookup"><span data-stu-id="01853-295">We need to modify this method so that it looks like Listing 2.</span></span>

<span data-ttu-id="01853-296">**Список 2 - Контролеры**</span><span class="sxs-lookup"><span data-stu-id="01853-296">**Listing 2 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample2.cs)]

<span data-ttu-id="01853-297">Обратите внимание, что класс домашнего контроллера \_в листинге 2 содержит частное поле с именем сущностей.</span><span class="sxs-lookup"><span data-stu-id="01853-297">Notice that the Home controller class in Listing 2 contains a private field named \_entities.</span></span> <span data-ttu-id="01853-298">Поле \_сущностей представляет сущности из модели данных.</span><span class="sxs-lookup"><span data-stu-id="01853-298">The \_entities field represents the entities from the data model.</span></span> <span data-ttu-id="01853-299">Мы используем \_поле сущностей для связи с базой данных.</span><span class="sxs-lookup"><span data-stu-id="01853-299">We use the \_entities field to communicate with the database.</span></span>

<span data-ttu-id="01853-300">Метод Индекса () возвращает представление, представляющее все контакты из таблицы базы данных Контактов.</span><span class="sxs-lookup"><span data-stu-id="01853-300">The Index() method returns a view that represents all of the contacts from the Contacts database table.</span></span> <span data-ttu-id="01853-301">Сущности \_выражения. ContactSet.ToList () возвращает список контактов в виде общего списка.</span><span class="sxs-lookup"><span data-stu-id="01853-301">The expression \_entities.ContactSet.ToList() returns the list of contacts as a generic list.</span></span>

<span data-ttu-id="01853-302">Теперь, когда мы создали контроллер индекса, нам необходимо создать представление индекса.</span><span class="sxs-lookup"><span data-stu-id="01853-302">Now that we ve created the Index controller, we next need to create the Index view.</span></span> <span data-ttu-id="01853-303">Перед созданием представления индекса составить приложение, выбрав вариант меню **Build, Build Solution.**</span><span class="sxs-lookup"><span data-stu-id="01853-303">Before creating the Index view, compile your application by selecting the menu option **Build, Build Solution**.</span></span> <span data-ttu-id="01853-304">Перед добавлением представления необходимо всегда компилировать проект, чтобы список классов моделей отображался в диалоге **Add View.**</span><span class="sxs-lookup"><span data-stu-id="01853-304">You should always compile your project before adding a view in order for the list of model classes to be displayed in the **Add View** dialog.</span></span>

<span data-ttu-id="01853-305">Представление индекса создается путем нажатия правом нажатия метода Index() и выбора опции **«Добавить вид»** (см. рисунок 12).</span><span class="sxs-lookup"><span data-stu-id="01853-305">You create the Index view by right-clicking the Index() method and selecting the menu option **Add View** (see Figure 12).</span></span> <span data-ttu-id="01853-306">Выбор этой опции меню открывает диалог **Add View** (см. рисунок 13).</span><span class="sxs-lookup"><span data-stu-id="01853-306">Selecting this menu option opens the **Add View** dialog (see Figure 13).</span></span>

<span data-ttu-id="01853-307">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="01853-307">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span></span>

<span data-ttu-id="01853-308">**Рисунок 12**: Добавление представления индекса[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="01853-308">**Figure 12**: Adding the Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image24.png))</span></span>

<span data-ttu-id="01853-309">В диалоге **Add View** проверьте флажок с пометкой Создать **сильно набранное представление.**</span><span class="sxs-lookup"><span data-stu-id="01853-309">In the **Add View** dialog, check the checkbox labeled **Create a strongly-typed view**.</span></span> <span data-ttu-id="01853-310">Выберите класс данных View ContactManager.Models.Contact и список содержимого view.</span><span class="sxs-lookup"><span data-stu-id="01853-310">Select the View data class ContactManager.Models.Contact and the View content List.</span></span> <span data-ttu-id="01853-311">Выбор этих параметров создает представление, отображающее список записей Контактов.</span><span class="sxs-lookup"><span data-stu-id="01853-311">Selecting these options generates a view that displays a list of Contact records.</span></span>

<span data-ttu-id="01853-312">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="01853-312">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span></span>

<span data-ttu-id="01853-313">**Рисунок 13**: Диалог добавления просмотра[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="01853-313">**Figure 13**: The Add View dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image26.png))</span></span>

<span data-ttu-id="01853-314">При нажатии кнопки **Добавить** генерируется представление индекса в листинге 3.</span><span class="sxs-lookup"><span data-stu-id="01853-314">When you click the **Add** button, the Index view in Listing 3 is generated.</span></span> <span data-ttu-id="01853-315">Обратите &lt;внимание на&gt; директиву % - Page %, которая отображается в верхней части файла.</span><span class="sxs-lookup"><span data-stu-id="01853-315">Notice the &lt;%@ Page %&gt; directive that appears at the top of the file.</span></span> <span data-ttu-id="01853-316">Представление индекса наследует сяречку&lt;из&lt;класса ViewPage&gt; &gt; IEnumerable.Models.Contact.Contact.</span><span class="sxs-lookup"><span data-stu-id="01853-316">The Index view inherits from the ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt;&gt; class.</span></span> <span data-ttu-id="01853-317">Другими словами, класс модели в представлении представляет собой список контактных сущностей.</span><span class="sxs-lookup"><span data-stu-id="01853-317">In other words, the Model class in the view represents a list of Contact entities.</span></span>

<span data-ttu-id="01853-318">Тело представления индекса содержит цикл foreach, который итерируется через каждый из контактов, представленных классом модели.</span><span class="sxs-lookup"><span data-stu-id="01853-318">The body of the Index view contains a foreach loop that iterates through each of the contacts represented by the Model class.</span></span> <span data-ttu-id="01853-319">Значение каждого свойства класса Контакт отображается в таблице HTML.</span><span class="sxs-lookup"><span data-stu-id="01853-319">The value of each property of the Contact class is displayed within an HTML table.</span></span>

<span data-ttu-id="01853-320">**Список 3 - Просмотры »Home»Index.aspx (неизменен)**</span><span class="sxs-lookup"><span data-stu-id="01853-320">**Listing 3 - Views\Home\Index.aspx (unmodified)**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample3.aspx)]

<span data-ttu-id="01853-321">Нам нужно внести одну модификацию в представление Индекса.</span><span class="sxs-lookup"><span data-stu-id="01853-321">We need to make one modification to the Index view.</span></span> <span data-ttu-id="01853-322">Поскольку мы не создаем представление о деталях, мы можем удалить ссылку «Подробности».</span><span class="sxs-lookup"><span data-stu-id="01853-322">Because we are not creating a Details view, we can remove the Details link.</span></span> <span data-ttu-id="01853-323">Найдите и удалите следующий код из представления Индекса:</span><span class="sxs-lookup"><span data-stu-id="01853-323">Find and remove the following code from the Index view:</span></span>

<span data-ttu-id="01853-324">идиллия. Id)%&gt;</span><span class="sxs-lookup"><span data-stu-id="01853-324">{ id=item.Id })%&gt;</span></span>

<span data-ttu-id="01853-325">После изменения представления индекса можно запустить приложение «Контакт-менеджер».</span><span class="sxs-lookup"><span data-stu-id="01853-325">After you modify the Index view, you can run the Contact Manager application.</span></span> <span data-ttu-id="01853-326">Выберите вариант меню Отек, Начать отладку или просто нажмите F5.</span><span class="sxs-lookup"><span data-stu-id="01853-326">Select the menu option Debug, Start Debugging or simply press F5.</span></span> <span data-ttu-id="01853-327">При первом запуске приложения вы получаете диалог на рисунке 14.</span><span class="sxs-lookup"><span data-stu-id="01853-327">The first time you run the application, you get the dialog in Figure 14.</span></span> <span data-ttu-id="01853-328">Выберите опцию **Изменить файл Web.config для включения отладки** и нажмите кнопку OK.</span><span class="sxs-lookup"><span data-stu-id="01853-328">Select the option **Modify the Web.config file to enable debugging** and click the OK button.</span></span>

<span data-ttu-id="01853-329">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="01853-329">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span></span>

<span data-ttu-id="01853-330">**Рисунок 14**: Включение отладки ([Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="01853-330">**Figure 14**: Enabling debugging ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image28.png))</span></span>

<span data-ttu-id="01853-331">Представление индекса возвращается по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="01853-331">The Index view is returned by default.</span></span> <span data-ttu-id="01853-332">В этом представлении перечислены все данные из таблицы базы данных Контактов (см. рисунок 15).</span><span class="sxs-lookup"><span data-stu-id="01853-332">This view lists all of the data from the Contacts database table (see Figure 15).</span></span>

<span data-ttu-id="01853-333">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="01853-333">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span></span>

<span data-ttu-id="01853-334">**Рисунок 15**: Представление индекса ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="01853-334">**Figure 15**: The Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image30.png))</span></span>

<span data-ttu-id="01853-335">Обратите внимание, что представление индекса включает в себя ссылку с пометкой Create New в нижней части представления.</span><span class="sxs-lookup"><span data-stu-id="01853-335">Notice that the Index view includes a link labeled Create New at the bottom of the view.</span></span> <span data-ttu-id="01853-336">В следующем разделе вы узнаете, как создавать новые контакты.</span><span class="sxs-lookup"><span data-stu-id="01853-336">In the next section, you learn how to create new contacts.</span></span>

## <a name="creating-new-contacts"></a><span data-ttu-id="01853-337">Создание новых контактов</span><span class="sxs-lookup"><span data-stu-id="01853-337">Creating New Contacts</span></span>

<span data-ttu-id="01853-338">Чтобы позволить пользователям создавать новые контакты, нам нужно добавить два действия Create() в контроллер Home.</span><span class="sxs-lookup"><span data-stu-id="01853-338">To enable users to create new contacts, we need to add two Create() actions to the Home controller.</span></span> <span data-ttu-id="01853-339">Нам нужно создать одно действие Create() которое возвращает форму HTML для создания нового контакта.</span><span class="sxs-lookup"><span data-stu-id="01853-339">We need to create one Create() action that returns an HTML form for creating a new contact.</span></span> <span data-ttu-id="01853-340">Нам нужно создать второе действие Create(), которое выполняет фактическую вставку базы данных нового контакта.</span><span class="sxs-lookup"><span data-stu-id="01853-340">We need to create a second Create() action that performs the actual database insert of the new contact.</span></span>

<span data-ttu-id="01853-341">Новые методы создания (), которые нам необходимо добавить в контроллер Home, содержатся в листинге 4.</span><span class="sxs-lookup"><span data-stu-id="01853-341">The new Create() methods that we need to add to the Home controller are contained in Listing 4.</span></span>

<span data-ttu-id="01853-342">**Список 4 - Контроллеры»HomeController.cs (с методами создания)**</span><span class="sxs-lookup"><span data-stu-id="01853-342">**Listing 4 - Controllers\HomeController.cs (with Create methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample4.cs)]

<span data-ttu-id="01853-343">Первый метод Create() можно вызывать с помощью HTTP GET, в то время как второй метод Create() может вызываться только HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="01853-343">The first Create() method can be invoked with an HTTP GET while the second Create() method can be invoked only by an HTTP POST.</span></span> <span data-ttu-id="01853-344">Другими словами, второй метод Create() может быть вызван только при размещении HTML-формы.</span><span class="sxs-lookup"><span data-stu-id="01853-344">In other words, the second Create() method can be invoked only when posting an HTML form.</span></span> <span data-ttu-id="01853-345">Первый метод Create() просто возвращает представление, содержащее форму HTML для создания нового контакта.</span><span class="sxs-lookup"><span data-stu-id="01853-345">The first Create() method simply returns a view that contains the HTML form for creating a new contact.</span></span> <span data-ttu-id="01853-346">Второй метод Create() гораздо интереснее: он добавляет новый контакт в базу данных.</span><span class="sxs-lookup"><span data-stu-id="01853-346">The second Create() method is much more interesting: it adds the new contact to the database.</span></span>

<span data-ttu-id="01853-347">Обратите внимание, что второй метод Create() был изменен, чтобы принять экземпляр класса Контакт.</span><span class="sxs-lookup"><span data-stu-id="01853-347">Notice that the second Create() method has been modified to accept an instance of the Contact class.</span></span> <span data-ttu-id="01853-348">Значения формы, размещенные в форме HTML, автоматически привязаны к этому классу Контактов ASP.NET платформой MVC.</span><span class="sxs-lookup"><span data-stu-id="01853-348">The form values posted from the HTML form are bound to this Contact class by the ASP.NET MVC framework automatically.</span></span> <span data-ttu-id="01853-349">Каждое поле формы из формы HTML Create присваивается свойству параметра Контакт.</span><span class="sxs-lookup"><span data-stu-id="01853-349">Each form field from the HTML Create form is assigned to a property of the Contact parameter.</span></span>

<span data-ttu-id="01853-350">Обратите внимание, что параметр Контакта украшен атрибутом «Bind».</span><span class="sxs-lookup"><span data-stu-id="01853-350">Notice that the Contact parameter is decorated with a [Bind] attribute.</span></span> <span data-ttu-id="01853-351">Атрибут «Bind» используется для исключения свойства Contact Id из связывания.</span><span class="sxs-lookup"><span data-stu-id="01853-351">The [Bind] attribute is used to exclude the Contact Id property from binding.</span></span> <span data-ttu-id="01853-352">Поскольку свойство Id представляет свойство Identity, мы не хотим устанавливать свойство Id.</span><span class="sxs-lookup"><span data-stu-id="01853-352">Because the Id property represents an Identity property, we don t want to set the Id property.</span></span>

<span data-ttu-id="01853-353">В корпусе метода Create() рамочная сущность используется для вставки нового Контакта в базу данных.</span><span class="sxs-lookup"><span data-stu-id="01853-353">In the body of the Create() method, the Entity Framework is used to insert the new Contact into the database.</span></span> <span data-ttu-id="01853-354">Новый контакт добавляется к существующему набору контактов, а метод SaveChanges() вызывается, чтобы отодвинуть эти изменения обратно в базовую базу данных.</span><span class="sxs-lookup"><span data-stu-id="01853-354">The new Contact is added to the existing set of Contacts and the SaveChanges() method is called to push these changes back to the underlying database.</span></span>

<span data-ttu-id="01853-355">Вы можете создать форму HTML для создания новых контактов, нажав на любой из двух методов Create() и выбрав вариант меню **Add View** (см. рисунок 16).</span><span class="sxs-lookup"><span data-stu-id="01853-355">You can generate an HTML form for creating new Contacts by right-clicking either of the two Create() methods and selecting the menu option **Add View** (see Figure 16).</span></span>

<span data-ttu-id="01853-356">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="01853-356">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span></span>

<span data-ttu-id="01853-357">**Рисунок 16**: Добавление представления «Создание»[(нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="01853-357">**Figure 16**: Adding the Create view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image32.png))</span></span>

<span data-ttu-id="01853-358">В диалоге **Add View** выберите класс **ContactManager.Models.Contact** и **опцию «Создание»** для просмотра содержимого (см. рисунок 17).</span><span class="sxs-lookup"><span data-stu-id="01853-358">In the **Add View** dialog, select the **ContactManager.Models.Contact** class and the **Create** option for view content (see Figure 17).</span></span> <span data-ttu-id="01853-359">При нажатии кнопки **Добавить** представление Create генерируется автоматически.</span><span class="sxs-lookup"><span data-stu-id="01853-359">When you click the **Add** button, a Create view is generated automatically.</span></span>

<span data-ttu-id="01853-360">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="01853-360">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span></span>

<span data-ttu-id="01853-361">**Рисунок 17**: Видя страницу взорваться ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="01853-361">**Figure 17**: Seeing a page explode ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image34.png))</span></span>

<span data-ttu-id="01853-362">Представление «Создание» содержит поля формы для каждого из свойств класса Контакт.</span><span class="sxs-lookup"><span data-stu-id="01853-362">The Create view contains form fields for each of the properties of the Contact class.</span></span> <span data-ttu-id="01853-363">Код для представления «Создание» включен в листинг 5.</span><span class="sxs-lookup"><span data-stu-id="01853-363">The code for the Create view is included in Listing 5.</span></span>

<span data-ttu-id="01853-364">**Список 5 - Просмотры »Домашний»Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="01853-364">**Listing 5 - Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample5.aspx)]

<span data-ttu-id="01853-365">После изменения методов создания () и добавления представления Create можно запустить приложение Contact Manger и создать новые контакты.</span><span class="sxs-lookup"><span data-stu-id="01853-365">After you modify the Create() methods and add the Create view, you can run the Contact Manger application and create new contacts.</span></span> <span data-ttu-id="01853-366">Нажмите на новую ссылку **Create,** которая отображается в представлении индекса, чтобы перейти к представлению «Создать».</span><span class="sxs-lookup"><span data-stu-id="01853-366">Click the **Create New** link that appears in the Index view to navigate to the Create view.</span></span> <span data-ttu-id="01853-367">Вы должны увидеть вид на рисунке 18.</span><span class="sxs-lookup"><span data-stu-id="01853-367">You should see the view in Figure 18.</span></span>

<span data-ttu-id="01853-368">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="01853-368">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span></span>

<span data-ttu-id="01853-369">**Рисунок 18**: Создать представление ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="01853-369">**Figure 18**: The Create View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image36.png))</span></span>

## <a name="editing-contacts"></a><span data-ttu-id="01853-370">Редактирование Контактов</span><span class="sxs-lookup"><span data-stu-id="01853-370">Editing Contacts</span></span>

<span data-ttu-id="01853-371">Добавление функциональности для редактирования контактной записи очень похоже на добавление функциональности для создания новых контактных записей.</span><span class="sxs-lookup"><span data-stu-id="01853-371">Adding the functionality for editing a contact record is very similar to adding the functionality for creating new contact records.</span></span> <span data-ttu-id="01853-372">Во-первых, нам нужно добавить два новых метода edit в класс контроллера Home.</span><span class="sxs-lookup"><span data-stu-id="01853-372">First, we need to add two new Edit methods to the Home controller class.</span></span> <span data-ttu-id="01853-373">Эти новые методы edit() содержатся в листинге 6.</span><span class="sxs-lookup"><span data-stu-id="01853-373">These new Edit() methods are contained in Listing 6.</span></span>

<span data-ttu-id="01853-374">**Список 6 - Контроллеры»HomeController.cs (с методами отсечения)**</span><span class="sxs-lookup"><span data-stu-id="01853-374">**Listing 6 - Controllers\HomeController.cs (with Edit methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample6.cs)]

<span data-ttu-id="01853-375">Первый метод edit() вызывается операцией HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="01853-375">The first Edit() method is invoked by an HTTP GET operation.</span></span> <span data-ttu-id="01853-376">Параметр Id передается этому методу, который представляет идентификатор редактируемой записи контакта.</span><span class="sxs-lookup"><span data-stu-id="01853-376">An Id parameter is passed to this method which represents the Id of the contact record being edited.</span></span> <span data-ttu-id="01853-377">Рамочная сущности используется для получения контакта, который соответствует идентификатору. Возвращается представление, содержащее HTML-форму для редактирования записи.</span><span class="sxs-lookup"><span data-stu-id="01853-377">The Entity Framework is used to retrieve a contact that matches the Id. A view that contains an HTML form for editing a record is returned.</span></span>

<span data-ttu-id="01853-378">Второй метод edit() выполняет фактическое обновление базы данных.</span><span class="sxs-lookup"><span data-stu-id="01853-378">The second Edit() method performs the actual update to the database.</span></span> <span data-ttu-id="01853-379">Этот метод принимает экземпляр класса Контакт в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="01853-379">This method accepts an instance of the Contact class as a parameter.</span></span> <span data-ttu-id="01853-380">Рамки ASP.NET MVC автоматически связывают поля формы из формы edit с этим классом.</span><span class="sxs-lookup"><span data-stu-id="01853-380">The ASP.NET MVC framework binds the form fields from the Edit form to this class automatically.</span></span> <span data-ttu-id="01853-381">Обратите внимание, что при редактировании контакта не включен атрибут «Bind» (нам нужна стоимость свойства Id).</span><span class="sxs-lookup"><span data-stu-id="01853-381">Notice that you don t include the[Bind] attribute when editing a Contact (we need the value of the Id property).</span></span>

<span data-ttu-id="01853-382">Рамочная сущности используется для сохранения измененного контакта с базой данных.</span><span class="sxs-lookup"><span data-stu-id="01853-382">The Entity Framework is used to save the modified Contact to the database.</span></span> <span data-ttu-id="01853-383">Исходный контакт должен быть извлечен из базы данных в первую очередь.</span><span class="sxs-lookup"><span data-stu-id="01853-383">The original Contact must be retrieved from the database first.</span></span> <span data-ttu-id="01853-384">Далее для записи изменений в Контакте называется метод Entity Framework ApplyPropertyChanges() для записи изменений в Контакте.</span><span class="sxs-lookup"><span data-stu-id="01853-384">Next, the Entity Framework ApplyPropertyChanges() method is called to record the changes to the Contact.</span></span> <span data-ttu-id="01853-385">Наконец, метод Сохранения изменений () entity Framework SaveChanges() призван упорствовать в изменениях в базовой базе данных.</span><span class="sxs-lookup"><span data-stu-id="01853-385">Finally, the Entity Framework SaveChanges() method is called to persist the changes to the underlying database.</span></span>

<span data-ttu-id="01853-386">Можно создать представление, содержащее форму edit, при правильном нажатии метода Edit() и выбрав вариант меню Add View.</span><span class="sxs-lookup"><span data-stu-id="01853-386">You can generate the view that contains the Edit form by right-clicking the Edit() method and selecting the menu option Add View.</span></span> <span data-ttu-id="01853-387">В диалоге Add View выберите класс **ContactManager.Models.Contact** и содержимое представления **«Edit»** (см. рисунок 19).</span><span class="sxs-lookup"><span data-stu-id="01853-387">In the Add View dialog, select the **ContactManager.Models.Contact** class and the **Edit** view content (see Figure 19).</span></span>

<span data-ttu-id="01853-388">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="01853-388">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span></span>

<span data-ttu-id="01853-389">**Рисунок 19**: Добавление видом на отображение[(Нажмите, чтобы просмотреть полноразмерное изображение)](iteration-1-create-the-application-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="01853-389">**Figure 19**: Adding an Edit View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image38.png))</span></span>

<span data-ttu-id="01853-390">При нажатии кнопки Добавить автоматически генерируется новое представление «Edit».</span><span class="sxs-lookup"><span data-stu-id="01853-390">When you click the Add button, a new Edit view is generated automatically.</span></span> <span data-ttu-id="01853-391">Создаваемый HTML-образный образ содержит поля, соответствующие каждому из свойств класса Контакт (см. список 7).</span><span class="sxs-lookup"><span data-stu-id="01853-391">The HTML form that is generated contains fields that correspond to each of the properties of the Contact class (see Listing 7).</span></span>

<span data-ttu-id="01853-392">**Список 7 - Просмотры/Home-Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="01853-392">**Listing 7 - Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample7.aspx)]

## <a name="deleting-contacts"></a><span data-ttu-id="01853-393">Удалять контакты</span><span class="sxs-lookup"><span data-stu-id="01853-393">Deleting Contacts</span></span>

<span data-ttu-id="01853-394">Если вы хотите удалить контакты, то вам нужно добавить два действия Delete() в класс домашнего контроллера.</span><span class="sxs-lookup"><span data-stu-id="01853-394">If you want to delete contacts then you need to add two Delete() actions to the Home controller class.</span></span> <span data-ttu-id="01853-395">В первом действии Delete() отображается форма подтверждения удаления.</span><span class="sxs-lookup"><span data-stu-id="01853-395">The first Delete() action displays a delete confirmation form.</span></span> <span data-ttu-id="01853-396">Второе действие Delete() выполняет фактическое удаление.</span><span class="sxs-lookup"><span data-stu-id="01853-396">The second Delete() action performs the actual delete.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="01853-397">Позже, в #7 итерации мы модифицировали менеджер контактов таким образом, чтобы он поддерживал удаление одного шага Ajax.</span><span class="sxs-lookup"><span data-stu-id="01853-397">Later, in Iteration #7, we modify the Contact Manager so that it supports a one step Ajax delete.</span></span>

<span data-ttu-id="01853-398">Два новых метода Удаления () содержатся в листинге 8.</span><span class="sxs-lookup"><span data-stu-id="01853-398">The two new Delete() methods are contained in Listing 8.</span></span>

<span data-ttu-id="01853-399">**Список 8 - Контролеры-HomeController.cs (Методы удаления)**</span><span class="sxs-lookup"><span data-stu-id="01853-399">**Listing 8 - Controllers\HomeController.cs (Delete methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample8.cs)]

<span data-ttu-id="01853-400">Первый метод Удаления () возвращает форму подтверждения для удаления записи контакта из базы данных (см. Рисунок20).</span><span class="sxs-lookup"><span data-stu-id="01853-400">The first Delete() method returns a confirmation form for deleting a contact record from the database (see Figure20).</span></span> <span data-ttu-id="01853-401">Второй метод Удаления () выполняет операцию удаления в отношении базы данных.</span><span class="sxs-lookup"><span data-stu-id="01853-401">The second Delete() method performs the actual delete operation against the database.</span></span> <span data-ttu-id="01853-402">После того, как исходный контакт был извлечен из базы данных, для выполнения удаления базы данных вызываются методы «Удаляй» () ИСФрЕС и SaveChanges () для выполнения удаления базы данных.</span><span class="sxs-lookup"><span data-stu-id="01853-402">After the original contact has been retrieved from the database, the Entity Framework DeleteObject() and SaveChanges() methods are called to perform the database delete.</span></span>

<span data-ttu-id="01853-403">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="01853-403">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span></span>

<span data-ttu-id="01853-404">**Рисунок 20**: Представление подтверждения удаления ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="01853-404">**Figure 20**: The delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image40.png))</span></span>

<span data-ttu-id="01853-405">Нам нужно изменить представление индекса таким образом, чтобы оно содержащее ссылку для удаляния контактных записей (см. рисунок 21).</span><span class="sxs-lookup"><span data-stu-id="01853-405">We need to modify the Index view so that it contains a link for deleting contact records (see Figure 21).</span></span> <span data-ttu-id="01853-406">Необходимо добавить следующий код в одну и ту же ячейку таблицы, которая содержит ссылку Edit:</span><span class="sxs-lookup"><span data-stu-id="01853-406">You need to add the following code to the same table cell that contains the Edit link:</span></span>

<span data-ttu-id="01853-407">Html.ActionLink( ид.пункт. Id ) %&gt;</span><span class="sxs-lookup"><span data-stu-id="01853-407">Html.ActionLink( { id=item.Id }) %&gt;</span></span>

<span data-ttu-id="01853-408">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="01853-408">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span></span>

<span data-ttu-id="01853-409">**Рисунок 21**: Представление индекса с помощью ссылки на edit ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="01853-409">**Figure 21**: Index view with Edit link ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image42.png))</span></span>

<span data-ttu-id="01853-410">Далее нам нужно создать представление подтверждения удаления.</span><span class="sxs-lookup"><span data-stu-id="01853-410">Next, we need to create the delete confirmation view.</span></span> <span data-ttu-id="01853-411">Нажмите правой кнопкой мыши метод ауда () в классе домашнего контроллера и выберите вариант меню Добавить вид.</span><span class="sxs-lookup"><span data-stu-id="01853-411">Right-click the Delete() method in the Home controller class and select the menu option Add View.</span></span> <span data-ttu-id="01853-412">Отображается диалог «Добавить вид» (см. рисунок 22).</span><span class="sxs-lookup"><span data-stu-id="01853-412">The Add View dialog appears (see Figure 22).</span></span>

<span data-ttu-id="01853-413">В отличие от представлений «Список, создание и отодвилость», диалог Add View не содержит опции для создания представления «Удалить».</span><span class="sxs-lookup"><span data-stu-id="01853-413">Unlike in the case of the List, Create, and Edit views, the Add View dialog does not contain an option to create a Delete view.</span></span> <span data-ttu-id="01853-414">Вместо этого выберите класс данных **ContactManager.Models.Contact** и содержимое **пустого** представления.</span><span class="sxs-lookup"><span data-stu-id="01853-414">Instead, select the **ContactManager.Models.Contact** data class and the **Empty** view content.</span></span> <span data-ttu-id="01853-415">Выбор опции содержимого пустого представления потребует от нас создания представления самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="01853-415">Selecting the Empty view content option will require us to create the view ourselves.</span></span>

<span data-ttu-id="01853-416">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="01853-416">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span></span>

<span data-ttu-id="01853-417">**Рисунок 22**: Добавление представления подтверждения удаления ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="01853-417">**Figure 22**: Adding the delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image44.png))</span></span>

<span data-ttu-id="01853-418">Содержание представления «Удалить» содержится в листинге 9.</span><span class="sxs-lookup"><span data-stu-id="01853-418">The content of the Delete view is contained in Listing 9.</span></span> <span data-ttu-id="01853-419">Это представление содержит форму, подтверждая, следует ли исключить конкретный контакт (см. рисунок 21).</span><span class="sxs-lookup"><span data-stu-id="01853-419">This view contains a form that confirms whether or not a particular contact should be deleted (see Figure 21).</span></span>

<span data-ttu-id="01853-420">**Список 9 - Просмотры »Домашний»Delete.aspx**</span><span class="sxs-lookup"><span data-stu-id="01853-420">**Listing 9 - Views\Home\Delete.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample9.aspx)]

## <a name="changing-the-name-of-the-default-controller"></a><span data-ttu-id="01853-421">Изменение названия контроллера по умолчанию</span><span class="sxs-lookup"><span data-stu-id="01853-421">Changing the Name of the Default Controller</span></span>

<span data-ttu-id="01853-422">Вас может беспокоить, что название нашего класса контроллеров для работы с контактами называется классом HomeController.</span><span class="sxs-lookup"><span data-stu-id="01853-422">It might bother you that the name of our controller class for working with contacts is named the HomeController class.</span></span> <span data-ttu-id="01853-423">Не должен ли контроллер называться ContactController?</span><span class="sxs-lookup"><span data-stu-id="01853-423">Shouldn't the controller be named ContactController?</span></span>

<span data-ttu-id="01853-424">Эту проблему достаточно легко исправить.</span><span class="sxs-lookup"><span data-stu-id="01853-424">This issue is easy enough to fix.</span></span> <span data-ttu-id="01853-425">Во-первых, нам нужно рефакторинг имя контроллера Home.</span><span class="sxs-lookup"><span data-stu-id="01853-425">First, we need to refactor the name of the Home controller.</span></span> <span data-ttu-id="01853-426">Откройте класс HomeController в редакторе кода Visual Studio, нажмите право на название класса и выберите вариант меню **Refactor, Rename**.</span><span class="sxs-lookup"><span data-stu-id="01853-426">Open the HomeController class in the Visual Studio Code Editor, right click the name of the class and select the menu option **Refactor, Rename**.</span></span> <span data-ttu-id="01853-427">Выбор этой опции меню открывает диалог Rename.</span><span class="sxs-lookup"><span data-stu-id="01853-427">Selecting this menu option opens the Rename dialog.</span></span>

<span data-ttu-id="01853-428">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="01853-428">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span></span>

<span data-ttu-id="01853-429">**Рисунок 23**: Рефакторинг имени контроллера ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="01853-429">**Figure 23**: Refactoring a controller name ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image46.png))</span></span>

<span data-ttu-id="01853-430">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="01853-430">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span></span>

<span data-ttu-id="01853-431">**Рисунок 24**: Использование диалога переименовать ([Нажмите, чтобы просмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="01853-431">**Figure 24**: Using the Rename dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image48.png))</span></span>

<span data-ttu-id="01853-432">Если вы переименуете класс контроллера, Visual Studio также обновит название папки в папке Views.</span><span class="sxs-lookup"><span data-stu-id="01853-432">If you rename your controller class, Visual Studio will update the name of the folder in the Views folder as well.</span></span> <span data-ttu-id="01853-433">Visual Studio переименует папку «Виды» home в папку «Просмотры» Контакт.</span><span class="sxs-lookup"><span data-stu-id="01853-433">Visual Studio will rename the \Views\Home folder to the \Views\Contact folder.</span></span>

<span data-ttu-id="01853-434">После внесения этого изменения в приложении больше не будет иметься домашний контроллер.</span><span class="sxs-lookup"><span data-stu-id="01853-434">After you make this change, your application will no longer have a Home controller.</span></span> <span data-ttu-id="01853-435">При запуске приложения вы получите страницу ошибки на рисунке 25.</span><span class="sxs-lookup"><span data-stu-id="01853-435">When you run your application, you'll get the error page in Figure 25.</span></span>

<span data-ttu-id="01853-436">[![Диалоговое окно New Project (Новый проект)](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="01853-436">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span></span>

<span data-ttu-id="01853-437">**Рисунок 25**: Нет контроллера по умолчанию ([Нажмите, чтобы посмотреть полноразмерное изображение](iteration-1-create-the-application-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="01853-437">**Figure 25**: No default controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image50.png))</span></span>

<span data-ttu-id="01853-438">Нам нужно обновить маршрут по умолчанию в файле Global.asax, чтобы использовать контроллер Контакта вместо контроллера Home.</span><span class="sxs-lookup"><span data-stu-id="01853-438">We need to update the default route in the Global.asax file to use the Contact controller instead of the Home controller.</span></span> <span data-ttu-id="01853-439">Откройте файл Global.asax и измените контроллер по умолчанию, используемый маршрутом по умолчанию (см. список 10).</span><span class="sxs-lookup"><span data-stu-id="01853-439">Open the Global.asax file and modify the default controller used by the default route (see Listing 10).</span></span>

<span data-ttu-id="01853-440">**Список 10 - Global.asax.cs**</span><span class="sxs-lookup"><span data-stu-id="01853-440">**Listing 10 - Global.asax.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample10.cs)]

<span data-ttu-id="01853-441">После внесения этих изменений менеджер контакта будет работать правильно.</span><span class="sxs-lookup"><span data-stu-id="01853-441">After you make these changes, the Contact Manager will run correctly.</span></span> <span data-ttu-id="01853-442">Теперь он будет использовать класс контроллера контакта в качестве контроллера по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="01853-442">Now, it will use the Contact controller class as the default controller.</span></span>

## <a name="summary"></a><span data-ttu-id="01853-443">Сводка</span><span class="sxs-lookup"><span data-stu-id="01853-443">Summary</span></span>

<span data-ttu-id="01853-444">В этой первой итерации мы создали базовое приложение Contact Manager самым быстрым способом.</span><span class="sxs-lookup"><span data-stu-id="01853-444">In this first iteration, we created a basic Contact Manager application in the fastest way possible.</span></span> <span data-ttu-id="01853-445">Мы воспользовались Visual Studio для создания исходного кода для наших контроллеров и представлений автоматически.</span><span class="sxs-lookup"><span data-stu-id="01853-445">We took advantage of Visual Studio to generate the initial code for our controllers and views automatically.</span></span> <span data-ttu-id="01853-446">Мы также воспользовались рамочным образованием для автоматического создания классов моделей баз данных.</span><span class="sxs-lookup"><span data-stu-id="01853-446">We also took advantage of the Entity Framework to generate our database model classes automatically.</span></span>

<span data-ttu-id="01853-447">В настоящее время мы можем создавать, создавать, отсвапывать и удалять контактные записи с приложением Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="01853-447">Currently, we can list, create, edit, and delete contact records with the Contact Manager application.</span></span> <span data-ttu-id="01853-448">Другими словами, мы можем выполнять все основные операции базы данных, требуемые веб-приложением, управляемым базой данных.</span><span class="sxs-lookup"><span data-stu-id="01853-448">In other words, we can perform all of the basic database operations required by a database-driven web application.</span></span>

<span data-ttu-id="01853-449">К сожалению, наше приложение имеет некоторые проблемы.</span><span class="sxs-lookup"><span data-stu-id="01853-449">Unfortunately, our application has some problems.</span></span> <span data-ttu-id="01853-450">Во-первых, и я стесняюсь признать это, приложение Contact Manager не самое привлекательное приложение.</span><span class="sxs-lookup"><span data-stu-id="01853-450">First and I hesitate to admit this, the Contact Manager application is not the most attractive application.</span></span> <span data-ttu-id="01853-451">Она нуждается в некоторых проектных работ.</span><span class="sxs-lookup"><span data-stu-id="01853-451">It needs some design work.</span></span> <span data-ttu-id="01853-452">В следующей итерации мы рассмотрим, как мы можем изменить страницу просмотра по умолчанию и лист каскадного стиля, чтобы улучшить внешний вид приложения.</span><span class="sxs-lookup"><span data-stu-id="01853-452">In the next iteration, we'll look at how we can change the default view master page and cascading style sheet to improve the appearance of the application.</span></span>

<span data-ttu-id="01853-453">Во-вторых, мы не реализовали ни одной проверки формы.</span><span class="sxs-lookup"><span data-stu-id="01853-453">Second, we have not implemented any form validation.</span></span> <span data-ttu-id="01853-454">Например, ничто не мешает вам отправлять контактную форму Create без ввода значений для любого из полей формы.</span><span class="sxs-lookup"><span data-stu-id="01853-454">For example, there is nothing to prevent you from submitting the Create contact form without entering values for any of the form fields.</span></span> <span data-ttu-id="01853-455">Кроме того, вы можете ввести недействительные номера телефонов и адреса электронной почты.</span><span class="sxs-lookup"><span data-stu-id="01853-455">Furthermore, you can enter invalid phone numbers and email addresses.</span></span> <span data-ttu-id="01853-456">Мы начинаем решать проблему проверки формы в #3 итерации.</span><span class="sxs-lookup"><span data-stu-id="01853-456">We start to tackle the problem of form validation in iteration #3.</span></span>

<span data-ttu-id="01853-457">Наконец, и самое главное, текущая итерация приложения Contact Manager не может быть легко изменена или сохранена.</span><span class="sxs-lookup"><span data-stu-id="01853-457">Finally, and most importantly, the current iteration of the Contact Manager application cannot be easily modified or maintained.</span></span> <span data-ttu-id="01853-458">Например, логика доступа к базе данных запекается прямо в действиях контроллера.</span><span class="sxs-lookup"><span data-stu-id="01853-458">For example, the database access logic is baked right into the controller actions.</span></span> <span data-ttu-id="01853-459">Это означает, что мы не можем изменить наш код доступа к данным без изменения наших контроллеров.</span><span class="sxs-lookup"><span data-stu-id="01853-459">This means that we cannot modify our data access code without modifying our controllers.</span></span> <span data-ttu-id="01853-460">В более поздних итерациях мы исследуем шаблоны проектирования программного обеспечения, которые мы можем реализовать, чтобы сделать Contact Manager более устойчивым к изменениям.</span><span class="sxs-lookup"><span data-stu-id="01853-460">In later iterations, we explore software design patterns that we can implement to make the Contact Manager more resilient to change.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="01853-461">Вперед</span><span class="sxs-lookup"><span data-stu-id="01853-461">Next</span></span>](iteration-2-make-the-application-look-nice-cs.md)
