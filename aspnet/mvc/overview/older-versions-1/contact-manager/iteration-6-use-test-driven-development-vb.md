---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: '#6 итерации — использование разработки на основе тестирования (VB) | Документация Майкрософт'
author: microsoft
description: В этой шестой итерации мы добавим новые функции в наше приложение, создав модульные тесты в первую очередь и записав код в модульные тесты. В этой итерации,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: b166a1c6af29206d43558fa7de447c3f4da2ddfe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78492702"
---
# <a name="iteration-6--use-test-driven-development-vb"></a>#6 итерации — использование разработки на основе тестирования (VB)

по [Майкрософт](https://github.com/microsoft)

[Скачать код](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> В этой шестой итерации мы добавим новые функции в наше приложение, создав модульные тесты в первую очередь и записав код в модульные тесты. В этой итерации мы добавляем группы контактов.

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a>Создание приложения для управления контактами ASP.NET MVC (VB)

В этой серии учебников мы создадим все приложение управления контактами от начала до конца. Приложение диспетчера контактов позволяет хранить контактные данные, имена телефонов и адреса электронной почты. список людей.

Мы создаем приложение для нескольких итераций. При каждой итерации мы постепенно улучшаем приложение. Цель этого нескольких итераций — позволить вам понять причину каждого изменения.

- Итерация #1 — Создайте приложение. В первой итерации мы создаем Диспетчер контактов проще всего. Добавлена поддержка основных операций с базой данных: создание, чтение, обновление и удаление (CRUD).

- Итерация #2 — сделайте приложение привлекательным. В этой итерации мы улучшаем внешний вид приложения путем изменения главной страницы ASP.NET представления MVC по умолчанию и каскадной таблицы стилей.

- Итерация #3 — Добавление проверки формы. В третьей итерации мы добавим проверку базовой формы. Мы запрещаем пользователям отправлять форму, не заполняя обязательные поля формы. Мы также проверяем адреса электронной почты и номера телефонов.

- Итерация #4 — сделайте приложение слабо связанным. В этой четвертой итерации мы используем преимущества нескольких шаблонов проектирования программного обеспечения, чтобы упростить обслуживание и изменение приложения Contact Manager. Например, мы выполним рефакторинг нашего приложения для использования шаблона репозитория и шаблона внедрения зависимостей.

- Итерация #5 — Создание модульных тестов. В пятой итерации мы сделаем наше приложение проще в обслуживании и изменении, добавляя модульные тесты. Мы размакетирования наши классы модели данных и создаем модульные тесты для наших контроллеров и логики проверки.

- Итерация #6 — Используйте разработку на основе тестирования. В этой шестой итерации мы добавим новые функции в наше приложение, создав модульные тесты в первую очередь и записав код в модульные тесты. В этой итерации мы добавляем группы контактов.

- Итерация #7 — Добавление функциональности AJAX. В седьмой итерации мы улучшаем скорость реагирования и производительность нашего приложения, добавив поддержку AJAX.

## <a name="this-iteration"></a>Эта итерация

В предыдущей итерации приложения диспетчера контактов мы создали модульные тесты, чтобы обеспечить безопасность для нашего кода. Мотивация при создании модульных тестов заключается в том, чтобы сделать код более устойчивым к изменению. С помощью модульных тестов мы можем внести любые изменения в наш код и сразу же определить, нарушены ли существующие функциональные возможности.

В этой итерации мы используем модульные тесты для совершенно разных целей. В этой итерации мы используем модульные тесты как часть философии разработки приложений, именуемую *разработкой на основе тестирования*. При разработке на основе тестирования вы сначала пишете тесты, а затем пишете код для тестов.

Точнее, при тренировке разработки на основе тестирования необходимо выполнить три шага при создании кода (красный/зеленый/рефакторинг):

1. Написание непройденного модульного теста (красный)
2. Написание кода, который проходит модульный тест (зеленый)
3. Рефакторинг кода (рефакторинг)

Во-первых, вы пишете модульный тест. Модульный тест должен выражать предполагаемое поведение кода. При первом создании модульного теста произойдет сбой модульного теста. Тест должен завершиться ошибкой, поскольку еще не написан код приложения, соответствующий тесту.

Далее нужно написать достаточно кода, чтобы модульный тест был пройден. Целью является написание кода на самом ленивом, слоппиест и максимально быстром способе. Не следует тратить время на анализ архитектуры приложения. Вместо этого необходимо сосредоточиться на написании минимального объема кода, необходимого для удовлетворения намерений, представленных модульным тестом.

Наконец, после написания достаточного кода можно выполнить шаг назад и рассмотреть общую архитектуру приложения. На этом шаге вы перепишете код (рефакторинг), используя преимущества шаблонов разработки программного обеспечения (например, шаблон репозитория), чтобы код был более удобен в обслуживании. Вы можете феарлессли переписать код на этом шаге, так как код охватывает модульные тесты.

При тренировке разработки на основе тестирования существует множество преимуществ. Во-первых, Разработка на основе тестирования заставляет вас сосредоточиться на коде, который действительно необходимо написать. Поскольку вы постоянно занимаетесь написанием достаточного кода для передачи определенного теста, вы не блуждаете в дебрях и пишете большие объемы кода, которые никогда не будут использоваться.

Во-вторых, методология разработки "тестирование первой" заставляет писать код с той точки зрения, как будет использоваться код. Иными словами, при тренировке разработки на основе тестирования вы постоянно пишете тесты с точки зрения пользователя. Таким образом, Разработка на основе тестирования может привести к более четкому и более понятному интерфейсу API.

Наконец, Разработка на основе тестирования требует написания модульных тестов в рамках обычного процесса написания приложения. По мере приближения крайнего срока проекта тестирование обычно является первым делом. С другой стороны, при тренировке разработки на основе тестирования, скорее всего, будет тем самым эффективный о написании модульных тестов, поскольку разработка на основе тестирования делает модульные тесты центральными для процесса создания приложения.

> [!NOTE] 
> 
> Чтобы узнать больше о разработке на основе тестирования, я рекомендую ознакомиться с книгой «Растушевка Майклаs» и **эффективно работать с устаревшим кодом**.

В этой итерации мы добавляем новую функцию в приложение диспетчера контактов. Добавлена поддержка групп контактов. Группы контактов можно использовать для упорядочения контактов по категориям, таким как деловые и дружественные группы.

Мы добавим эту новую функциональную возможность в наше приложение, следуя процедуре разработки на основе тестирования. Сначала мы создадим наши модульные тесты, и мы напишем весь наш код в соответствии с этими тестами.

## <a name="what-gets-tested"></a>Что проверяется

Как мы обсуждали в предыдущей итерации, вы обычно не пишете модульные тесты для логики доступа к данным или логики представления. Вы не пишете модульные тесты для логики доступа к данным, так как доступ к базе данных выполняется относительно медленная операция. Вы не пишете модульные тесты для логики представления, так как для доступа к представлению требуется вращение веб-сервера относительно медленных операций. Не следует писать модульный тест, если тест не может быть выполнен повторно и снова с высокой скоростью.

Так как разработка на основе тестирования осуществляется с помощью модульных тестов, сначала основное внимание уделяется написанию контроллера и бизнес-логики. Мы не будем касаться базы данных или представлений. Мы не изменим базу данных или создадим наши представления до конца этого руководства. Начнем с того, что можно проверить.

## <a name="creating-user-stories"></a>Создание пользовательских историй

При тренировке разработки на основе тестирования вы всегда начинаете с написания теста. Это немедленно вызывает вопрос: как выбрать тест для записи? Чтобы ответить на этот вопрос, необходимо написать набор [*пользовательских историй*](http://en.wikipedia.org/wiki/User_stories).

Пользовательская история — это очень короткое (обычно одно предложение) описание требования к программному обеспечению. Это должно быть нетехническое описание требования, написанного с точки зрения пользователя.

Вот набор пользовательских историй, описывающих функции, необходимые для новых функциональных возможностей группы контактов:

1. Пользователь может просматривать список групп контактов.
2. Пользователь может создать новую группу контактов.
3. Пользователь может удалить существующую группу контактов.
4. Пользователь может выбрать группу контактов при создании нового контакта.
5. Пользователь может выбрать группу контактов при редактировании существующего контакта.
6. В представлении индекса отображается список групп контактов.
7. Когда пользователь щелкает группу контактов, отображается список соответствующих контактов.

Обратите внимание, что этот список пользовательских историй полностью понятен для клиента. Нет упоминания о технической реализации.

В процессе создания приложения набор пользовательских историй может быть более уточнен. Вы можете разбить пользовательскую историю на несколько историй (требования). Например, вы можете решить, что создание новой группы контактов должно содержать проверку. При отправке группы контактов без имени должна возвращаться ошибка проверки.

После создания списка пользовательских историй можно приступать к написанию первого модульного теста. Начнем с создания модульного теста для просмотра списка групп контактов.

## <a name="listing-contact-groups"></a>Перечисление групп контактов

Первая пользовательская история заключается в том, что пользователь должен иметь возможность просматривать список групп контактов. Нам нужно выразить эту историю с помощью теста.

Создайте новый модульный тест, щелкнув правой кнопкой мыши папку Controllers в проекте ContactManager. Tests, выбрав **Добавить, создать тест**и выбрав шаблон **модульного теста** (см. рис. 1). Назовите новый модульный тест Граупконтроллертест. vb и нажмите кнопку **ОК** .

[![Добавление модульного теста Граупконтроллертест](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)

**Рис. 01**. Добавление модульного теста Граупконтроллертест ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image2.png))

Первый модульный тест содержится в листинге 1. Этот тест проверяет, возвращает ли метод Index () контроллера группы набор групп. Тест проверяет, что в данных представления возвращена коллекция групп.

**Листинг 1. Контроллерс\граупконтроллертест.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

При первом вводе кода в листинге 1 в Visual Studio вы получите множество красной волнистой линии. Мы не создали классы Граупконтроллер или Group.

На этом этапе мы можем даже создать наше приложение, чтобы мы могли выполнить наш первый модульный тест. Это хорошо. Это считается неудачным тестированием. Поэтому теперь у нас есть разрешение на написание кода приложения. Нам нужно написать достаточно кода для выполнения нашего теста.

Класс контроллера группы в листинге 2 содержит минимально необходимый код для передачи модульного теста. Действие index () возвращает статически закодированный список групп (класс Group определен в листинге 3).

**Листинг 2. Контроллерс\граупконтроллер.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

**Листинг 3. Моделс\грауп.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

После добавления классов Граупконтроллер и Group в наш проект первый модульный тест завершается успешно (см. рис. 2). Мы выполнили минимальную работу, необходимую для прохождения теста. Пора отпраздновать.

[![успешно.](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)

**Рис. 02**. успешное завершение! ([Щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image4.png))

## <a name="creating-contact-groups"></a>Создание групп контактов

Теперь мы можем перейти к второй пользовательской истории. Необходимо иметь возможность создавать новые группы контактов. Нам нужно выразить эту намерение с помощью теста.

Тест в листинге 4 проверяет, что вызов метода Create () с новой группой добавляет группу в список групп, возвращаемых методом index (). Иными словами, при создании новой группы я должен иметь возможность вернуть новую группу из списка групп, возвращенных методом index ().

**Листинг 4. Контроллерс\граупконтроллертест.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

Тест в листинге 4 вызывает метод Create () группы Controller с новой группой контактов. Затем тест проверяет, что вызов метода Index контроллера группы () возвращает новую группу в данных представления.

Измененный контроллер группы в листинге 5 содержит минимально необходимое количество изменений, необходимых для передачи нового теста.

**Листинг 5. Контроллерс\граупконтроллер.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a>Контроллер группы в листинге 5 имеет новое действие Create (). Это действие добавляет группу в коллекцию групп. Обратите внимание, что действие index () было изменено для возврата содержимого коллекции групп.

Опять же, мы выполнили минимальный объем работы, необходимый для передачи модульного теста. После внесения этих изменений в контроллер группы все модульные тесты проходят успешно.

## <a name="adding-validation"></a>Добавление проверки

Это требование не было указано явно в пользовательской истории. Однако разумно потребовать, чтобы группа имела имя. В противном случае Организация контактов в группы не будет очень полезной.

В листинге 6 содержится новый тест, который выражает эту намерение. Этот тест проверяет, что попытка создать группу без указания имени приводит к получению сообщения об ошибке проверки в состоянии модели.

**Листинг 6. Контроллерс\граупконтроллертест.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

Чтобы удовлетворить этот тест, нам нужно добавить свойство Name в наш класс Group (см. листинг 7). Кроме того, нам нужно добавить небольшой набор логики проверки к действию create () контроллера группы (см. листинг 8).

**Листинг 7 — Моделс\грауп.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

**Листинг 8. Контроллерс\граупконтроллер.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

Обратите внимание, что действие создать () контроллера группы теперь содержит логику проверки и базы данных. В настоящее время база данных, используемая контроллером группы, состоит не только из коллекции в памяти.

## <a name="time-to-refactor"></a>Время для реструктуризации

Третьим шагом в красном/зеленом/рефакторинг является компонент рефакторинга. На этом этапе нам нужно выполнить шаг назад из нашего кода и подумать о том, как можно выполнить рефакторинг приложения, чтобы улучшить его разработку. Этап реструктуризации — это этап, на котором мы думаем о лучших способах реализации принципов разработки программного обеспечения и шаблонов.

Мы можем изменить наш код любым способом, который мы решили улучшить структуру кода. У нас есть средства для обеспечения безопасности модульных тестов, которые не позволяют прерывать существующую функциональность.

Сейчас наш контроллер группы очень нехорош с точки зрения хорошего проектирования программного обеспечения. Контроллер группы содержит запутанную неправильной проверки и кода доступа к данным. Чтобы избежать нарушения единого принципа ответственности, необходимо разделить эти задачи на разные классы.

Наш класс контроллера группы с рефакторингом содержится в листинге 9. Контроллер был изменен для использования слоя служб ContactManager. Это тот же уровень служб, который используется с контроллером контакта.

В листинге 10 содержатся новые методы, добавленные в слой службы ContactManager для поддержки проверки, перечисления и создания групп. Интерфейс Иконтактманажерсервице был обновлен для включения новых методов.

В листинге 11 содержится новый класс Факеконтактманажеррепоситори, реализующий интерфейс Иконтактманажеррепоситори. В отличие от класса Ентитиконтактманажеррепоситори, который также реализует интерфейс Иконтактманажеррепоситори, наш новый класс Факеконтактманажеррепоситори не взаимодействует с базой данных. Класс Факеконтактманажеррепоситори использует коллекцию в памяти в качестве прокси-сервера для базы данных. Мы будем использовать этот класс в наших модульных тестах в качестве фиктивного слоя репозитория.

**Листинг 9. Контроллерс\граупконтроллер.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

**Листинг 10 — Контроллерс\контактманажерсервице.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

**Листинг 11 — Контроллерс\факеконтактманажеррепоситори.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]

Изменение интерфейса Иконтактманажеррепоситори требует использования метода для реализации методов CreateGroup () и ListGroups () в классе Ентитиконтактманажеррепоситори. Самый неограниченный и быстрый способ сделать это — добавить методы-заглушки, которые выглядят следующим образом:

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]

Наконец, эти изменения в проектировании нашего приложения потребовали внесения некоторых изменений в модульные тесты. Теперь при выполнении модульных тестов необходимо использовать Факеконтактманажеррепоситори. Обновленный класс Граупконтроллертест содержится в листинге 12.

**Листинг 12 — Контроллерс\граупконтроллертест.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

После внесения всех этих изменений опять же, все наши модульные тесты проходят успешно. Мы завершили весь цикл красного, зеленого и рефакторинга. Мы реализовали первые две пользовательские истории. Теперь у нас есть поддержка модульных тестов для требований, выраженных в пользовательских историях. Реализация оставшейся части пользовательских историй подразумевает повторение одного и того же цикла красного, зеленого и рефакторинга.

## <a name="modifying-our-database"></a>Изменение нашей базы данных

К сожалению, несмотря на то, что все требования, представленные в модульных тестах, удовлетворены, наша работа не выполняется. Нам по-прежнему нужно изменить нашу базу данных.

Необходимо создать новую таблицу базы данных группы. Выполните следующие действия.

1. В окне обозреватель сервера щелкните правой кнопкой мыши папку таблицы и выберите пункт меню **Добавить новую таблицу**.
2. Введите два столбца, описанные ниже, в конструктор таблиц.
3. Пометьте столбец Идентификатор как первичный ключ и столбец идентификаторов.
4. Сохраните новую таблицу с группами имен, щелкнув значок дискеты.

<a id="0.12_table01"></a>

| **Имя столбца** | **Тип данных** | **Разрешить значения NULL** |
| --- | --- | --- |
| Идентификатор | INT | False |
| Имя | nvarchar(50) | False |

Далее необходимо удалить все данные из таблицы Contacts (в противном случае мы не сможем создать связь между таблицами Contacts и Groups). Выполните следующие действия.

1. Щелкните правой кнопкой мыши таблицу Контакты и выберите пункт меню **отобразить данные таблицы**.
2. Удалите все строки.

Далее необходимо определить связь между таблицей базы данных Groups и существующей таблицей базы данных Contacts. Выполните следующие действия.

1. Дважды щелкните таблицу Контакты в окне обозреватель сервера, чтобы открыть конструктор таблиц.
2. Добавьте новый целочисленный столбец в таблицу Contacts с именем GroupId.
3. Нажмите кнопку связи, чтобы открыть диалоговое окно связи внешних ключей (см. рис. 3).
4. Нажмите кнопку Добавить.
5. Нажмите кнопку с многоточием рядом с кнопкой Спецификация таблицы и столбцов.
6. В диалоговом окне таблицы и столбцы выберите группы в качестве таблицы первичного ключа и идентификатор в качестве первичного ключевого столбца. Выберите контакты в качестве таблицы внешнего ключа и GroupId в качестве внешнего ключевого столбца (см. рис. 4). Нажмите кнопку "ОК".
7. В разделе **Спецификация вставки и обновления**выберите значение **Каскад** для параметра **правило удаления**.
8. Нажмите кнопку Закрыть, чтобы закрыть диалоговое окно связи внешних ключей.
9. Нажмите кнопку Сохранить, чтобы сохранить изменения в таблице контакты.

[![создания связи таблицы базы данных](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)

**Рис. 03**. Создание связи таблицы базы данных ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image6.png))

[![указание связей между таблицами](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)

**Рис. 04**. Указание связей между таблицами ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image8.png))

### <a name="updating-our-data-model"></a>Обновление нашей модели данных

Далее нам нужно обновить нашу модель данных, чтобы представить новую таблицу базы данных. Выполните следующие действия.

1. Дважды щелкните файл Контактманажермодел. EDMX в папке Models, чтобы открыть Entity Designer.
2. Щелкните правой кнопкой мыши область конструктора и выберите пункт меню **Обновить модель из базы данных**.
3. В мастере обновления выберите таблицу группы и нажмите кнопку Готово (см. рис. 5).
4. Щелкните правой кнопкой мыши сущность группы и выберите пункт меню **Переименовать**. Измените имя сущности *группы* на *Group* (единственное).
5. Щелкните правой кнопкой мыши свойство навигации группы, которое отображается в нижней части сущности Contact. Измените имя свойства навигации по *группам* на *Group* (единственное).

[![обновление модели Entity Framework из базы данных](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)

**Рис. 05**. обновление модели Entity Framework из базы данных ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image10.png))

После выполнения этих действий модель данных будет представлять таблицы Contacts и Groups. В Entity Designer должны отображаться обе сущности (см. рис. 6).

[![Entity Designer отображение группы и контакта](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)

**Рис. 06**. Entity Designer отображения группы и контакта ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image12.png))

### <a name="creating-our-repository-classes"></a>Создание наших классов репозитория

Далее нам нужно реализовать наш класс репозитория. В ходе этой итерации мы добавили несколько новых методов в интерфейс Иконтактманажеррепоситори при написании кода для удовлетворения наших модульных тестов. Окончательная версия интерфейса Иконтактманажеррепоситори содержится в листинге 14.

**Листинг 14-Моделс\иконтактманажеррепоситори.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

Мы не реализовали какие бы то ни было методы, связанные с работой с группами контактов в настоящем классе Ентитиконтактманажеррепоситори. В настоящее время класс Ентитиконтактманажеррепоситори содержит методы-заглушки для каждого из методов группы контактов, перечисленных в интерфейсе Иконтактманажеррепоситори. Например, метод ListGroups () в настоящее время выглядит следующим образом:

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

Методы-заглушки позволяют компилировать наше приложение и передавать модульные тесты. Однако теперь пора реализовать эти методы. Окончательная версия класса Ентитиконтактманажеррепоситори содержится в листинге 13.

**Листинг 13. Моделс\ентитиконтактманажеррепоситори.ВБ**

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a>Создание представлений

ASP.NET приложение MVC при использовании подсистемы представлений ASP.NET по умолчанию. Итак, вы не создаете представления в ответ на определенный модульный тест. Однако, поскольку приложение будет бесполезным без представлений, мы можем завершить эту итерацию, не создавая и не изменяя представления, содержащиеся в приложении Contact Manager.

Для управления группами контактов необходимо создать следующие новые представления (см. рис. 7):

- Виевс\грауп\индекс.аспкс — отображает список групп контактов
- Виевс\грауп\делете.аспкс — отображает форму подтверждения удаления группы контактов

[![представление индекса группы](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)

**Рис. 07**. представление индекса группы ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image14.png))

Необходимо изменить следующие существующие представления, чтобы они включали группы контактов:

- Views\Home\Create.aspx
- Views\Home\Edit.aspx
- Views\Home\Index.aspx

Измененные представления можно просмотреть, просмотрев приложение Visual Studio, которое поставляется с этим руководством. Например, на рис. 8 показано представление индекса контактов.

[![представление индекса контактов](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)

**Рис. 08**. представление индекса контактов ([щелкните, чтобы просмотреть изображение с полным размером](iteration-6-use-test-driven-development-vb/_static/image16.png))

## <a name="summary"></a>Сводка

В этой итерации мы добавили новые функции в приложение диспетчера контактов, следуя методологии разработки приложения на основе тестирования. Мы начали с создания набора пользовательских историй. Мы создали набор модульных тестов, соответствующий требованиям, выраженным в пользовательских описаниях функциональности. Наконец, мы написали достаточно кода для удовлетворения требований, представленных модульными тестами.

После завершения написания достаточного кода для удовлетворения требований, представленных модульными тестами, мы обновили базу данных и представления. Мы добавили новую таблицу Groups в нашу базу данных и обновили нашу Entity Frameworkную модель данных. Мы также создали и изменили набор представлений.

В следующей итерации — заключительная итерация — мы перепишем наше приложение, чтобы воспользоваться преимуществами AJAX. Используя преимущества AJAX, мы улучшаем скорость реагирования и производительность приложения диспетчера контактов.

> [!div class="step-by-step"]
> [Назад](iteration-5-create-unit-tests-vb.md)
> [Вперед](iteration-7-add-ajax-functionality-vb.md)
