---
uid: mvc/overview/older-versions-1/overview/understanding-models-views-and-controllers-vb
title: Общие сведения о моделях, представлениях и контроллерах (Visual Basic) | Документация Майкрософт
author: StephenWalther
description: Не понимаете, о моделях, представлениях и контроллерах? В этом руководстве Стивен Вальтер рассказывается о различных частях приложения ASP.NET MVC.
ms.author: riande
ms.date: 08/19/2008
ms.assetid: a106374a-5e74-4fd0-9ac0-1a32280e5d0d
msc.legacyurl: /mvc/overview/older-versions-1/overview/understanding-models-views-and-controllers-vb
msc.type: authoredcontent
ms.openlocfilehash: 879a771c3b85c85d35d470f056173f230a36e906
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59388962"
---
# <a name="understanding-models-views-and-controllers-vb"></a>Общие сведения о моделях, представлениях и контроллерах (VB)

по [Стивен Вальтер](https://github.com/StephenWalther)

> Не понимаете, о моделях, представлениях и контроллерах? В этом руководстве Стивен Вальтер рассказывается о различных частях приложения ASP.NET MVC.


Этот учебник дает общий обзор ASP.NET MVC моделях, представлениях и контроллерах. Другими словами, он объясняет M ", V" и C "в ASP.NET MVC.

После изучения этого учебника, необходимо понимать, как взаимодействуют различные части приложения ASP.NET MVC. Необходимо также понимать, как архитектура приложения ASP.NET MVC отличается от приложения веб-форм ASP.NET или приложения ASP-страницы.

## <a name="the-sample-aspnet-mvc-application"></a>Пример приложения ASP.NET MVC

Шаблон Visual Studio по умолчанию для создания веб-приложений ASP.NET MVC включает в себя пример очень простого приложения, которое можно использовать для понимания различные части приложения ASP.NET MVC. Мы используем это простое приложение, в этом руководстве.

Создание нового приложения ASP.NET MVC с помощью шаблона MVC, запустив Visual Studio 2008 и выбрав пункт меню файл, создать проект (см. рис. 1). В диалоговом окне нового проекта выберите вашем любимом языке программирования, в списке типов проектов (Visual Basic или C#) и выберите **веб-приложение ASP.NET MVC** в группе шаблонов. Нажмите кнопку "ОК".


[![Диалоговое окно нового проекта](understanding-models-views-and-controllers-vb/_static/image1.jpg)](understanding-models-views-and-controllers-vb/_static/image1.png)

**Рис 01**: Диалоговое окно нового проекта ([Просмотр полноразмерного изображения](understanding-models-views-and-controllers-vb/_static/image2.png))


При создании нового приложения ASP.NET MVC, **Создание проекта модульных тестов** откроется диалоговое окно (см. рис. 2). Это диалоговое окно позволяет создать отдельный проект в решении для тестирования приложения ASP.NET MVC. Выберите параметр **нет, не создавать проект модульного теста** и нажмите кнопку **ОК** кнопки.


[![Создание диалогового окна модульного теста](understanding-models-views-and-controllers-vb/_static/image2.jpg)](understanding-models-views-and-controllers-vb/_static/image3.png)

**Рис. 02**: Создание диалогового окна модульных тестов ([Просмотр полноразмерного изображения](understanding-models-views-and-controllers-vb/_static/image4.png))


После нового ASP.NET MVC будет создано приложение. Вы увидите несколько папок и файлов в окне обозревателя решений. В частности вы увидите три папки с именем модели, представления и контроллеры. Как можно догадаться из имен папок, эти папки содержат файлы для реализации модели, представления и контроллеры.

Если развернуть папку Controllers, вы увидите файл с именем AccountController.vb и файл с именем HomeController.vb. Если развернуть папку Views, вы увидите три вложенные папки с именем учетной записи, Главная и Shared. Если развернуть корневой папки, вы увидите два дополнительных файла с именем About.aspx и Index.aspx (см. рис. 3). Эти файлы, составляющие пример приложения, в состав шаблона ASP.NET MVC по умолчанию.


[![Окно обозревателя решений](understanding-models-views-and-controllers-vb/_static/image3.jpg)](understanding-models-views-and-controllers-vb/_static/image5.png)

**Рис 03**: Окно обозревателя решений ([Просмотр полноразмерного изображения](understanding-models-views-and-controllers-vb/_static/image6.png))


Можно запустить его, выбрав параметр меню **отладка, начать отладку**. Кроме того можно нажать клавишу F5.

При первом запуске приложения ASP.NET, откроется диалоговое окно, на рис. 4, в которое рекомендует включить режим отладки. Нажмите кнопку "ОК", и приложение будет запущено.


[![Диалоговое окно отладки не включена](understanding-models-views-and-controllers-vb/_static/image4.jpg)](understanding-models-views-and-controllers-vb/_static/image7.png)

**Рис. 04**: Отладка не включена диалоговое окно ([Просмотр полноразмерного изображения](understanding-models-views-and-controllers-vb/_static/image8.png))


При запуске приложения ASP.NET MVC, Visual Studio запускает приложение в веб-браузере. Пример приложения состоит из только двух страниц: страницу индекса и страницы About. При первом запуске приложения, открытии страницы индекса (см. рис. 5). Можно перейти на страницу About, щелкнув ссылку меню в верхней правой части приложения.


[![Страница индекса](understanding-models-views-and-controllers-vb/_static/image5.jpg)](understanding-models-views-and-controllers-vb/_static/image9.png)

**05 рис**: Страница индекса ([Просмотр полноразмерного изображения](understanding-models-views-and-controllers-vb/_static/image10.png))


Обратите внимание, что URL-адреса в адресной строке браузера. Например, при щелчке ссылки меню About URL-адрес в адресной строке браузера изменяется **/Home/About**.

Если закрыть окно браузера и вернитесь в Visual Studio, нельзя будет найти файл с домом путь/о программе. Эти файлы не существуют. Как такое возможно?

## <a name="a-url-does-not-equal-a-page"></a>URL-адрес не является страницей

При создании традиционного приложения веб-форм ASP.NET или приложение Active Server Pages, имеется однозначное соответствие между URL-адреса и страницы. При запросе страницы с именем SomePage.aspx с сервера, то лучше быть страницы на диск с именем SomePage.aspx. Если файл SomePage.aspx не существует, вы получаете ужасно **404 — страница не найдена** ошибки.

При создании приложения ASP.NET MVC, напротив, нет соответствия между URL-адрес, введите в адресную строку браузера и файлы, которые можно найти в приложении. В приложении ASP.NET MVC URL-адрес соответствует действия контроллера, а не страницу на диске.

В традиционном приложении ASP.NET и ASP запросы браузера сопоставляются страниц. В приложении ASP.NET MVC напротив, запросы браузера сопоставляются действий контроллера. Приложение веб-форм ASP.NET — ориентированных на содержимое. Приложения ASP.NET MVC, напротив, — на логику приложения.

## <a name="understanding-aspnet-routing"></a>Сведения о маршрутизации ASP.NET

Запрос браузера с регистрационными действие контроллера посредством компонента платформы ASP.NET, который называется *маршрутизация ASP.NET*. Используется маршрутизация ASP.NET, платформой ASP.NET MVC для *маршрута* входящие запросы к действиям контроллера.

Маршрутизация ASP.NET использует таблицу маршрутизации для обработки входящих запросов. Эта таблица маршрутов создается при первом запуске веб-приложения. Таблица маршрутов — Настройка в файле Global.asax. Файл MVC Global.asax по умолчанию содержится в листинге 1.

**В листинге 1 - Global.asax**

[!code-vb[Main](understanding-models-views-and-controllers-vb/samples/sample1.vb)]

Когда приложение ASP.NET первом запуске приложения\_вызывается метод Start(). В листинге 1 Этот метод вызывает метод RegisterRoutes() и метод RegisterRoutes() создает таблицы маршрутов по умолчанию.

Таблица маршрутов по умолчанию состоит из одного маршрута. Этот маршрут по умолчанию разбивает все входящие запросы на три сегмента (сегмент URL-адрес — это что-то между косыми чертами). Первый сегмент сопоставляется имя контроллера, второй сегмент сопоставляется имени действия и последний сегмент сопоставляется с параметром, который передается в действие с именем Id.

Например, рассмотрим следующий URL-адрес:

/ Продукта/сведения/3

Этот URL-адрес преобразуется в три параметра следующим образом:

Контроллер = продукт

Действие — подробности

идентификатор = 3

Маршрут по умолчанию, определенные в файле Global.asax содержит значения по умолчанию для всех трех параметров. По умолчанию контроллера Home, действие по умолчанию используется индекс, а идентификатор по умолчанию является пустой строкой. Эти значения по умолчанию в виду рассмотрите как следующий URL-адрес анализируется:

Сотрудник —

Этот URL-адрес преобразуется в три параметра следующим образом:

Контроллер = сотрудника

Действие = индекс

Id = ��

Наконец Если открыть приложения ASP.NET MVC, не указав любой URL-адрес (например, `http://localhost`) URL-адрес разбивается следующим образом:

контроллер = Home

Действие = индекс

Id = ��

Запрос перенаправляется к действию Index() класса HomeController.

## <a name="understanding-controllers"></a>Общее представление о контроллерах

Контроллер отвечает за управление способ, которым пользователь взаимодействует с MVC-приложениях. Контроллер содержит логику управления потоком для приложения ASP.NET MVC. Контроллер определяет, какой ответ для отправки обратно пользователю, когда пользователь делает запрос браузера.

Контроллер — это класс (например, класс Visual Basic или C#). Пример приложения ASP.NET MVC включает контроллер с именем HomeController.vb, расположенный в папке Controllers. Содержимое файла HomeController.vb будет воспроизведено в листинге 2.

**В листинге 2 - HomeController.cs**

[!code-vb[Main](understanding-models-views-and-controllers-vb/samples/sample2.vb)]

Обратите внимание на то, что HomeController имеет два метода с именем Index() и About(). Эти два метода соответствуют два действия, предоставляемые контроллером. URL-адрес/Home/Index вызывает метод HomeController.Index() и URL-адрес/Home/About вызывает метод HomeController.About().

Любой открытый метод в контроллере указывается в виде действия контроллера. Необходимо соблюдать осторожность, об этом. Это означает, что любой открытый метод, содержащихся в контроллере может быть вызван любым пользователем, имеющим доступ к Интернету, введя правой URL-адрес в адресную строку браузера.

## <a name="understanding-views"></a>Общие сведения о представлениях

Два контроллера действия, предоставляемые классом HomeController, Index() и About(), как вернуть представление. Представление содержит HTML-разметка и содержимое, отправляемое в браузер. Представление является эквивалентом страницы, при работе с приложением ASP.NET MVC.

Необходимо создать свои представления в нужных местах. HomeController.Index() действие возвращает представление, расположенный по следующему пути:

\Views\Home\Index.aspx

HomeController.About() действие возвращает представление, расположенный по следующему пути:

\Views\Home\About.aspx

Как правило если вы хотите вернуть представление для действия контроллера, затем необходимо создать вложенную папку в папке Views с тем же именем, что и контроллер. В папке необходимо создать ASPX-файл с тем же именем, что действия контроллера.

Этот файл в листинге 3 содержит представление About.aspx.

**Листинг 3 - About.aspx**

[!code-aspx[Main](understanding-models-views-and-controllers-vb/samples/sample3.aspx)]

Если сейчас пропустить первой строки в листинге 3, большая часть rest представления состоит из стандартный HTML. Содержимое представления можно изменить, указав любой код HTML, который здесь.

Представление — очень похожа на страницу в ASP-страницы или веб-форм ASP.NET. Представление может содержать HTML-содержимого и скрипты. Можно создавать скрипты в своего любимого .NET язык (например, C# или Visual Basic .NET). Использовать сценарии для отображения динамического содержимого, таких как базы данных.

## <a name="understanding-models"></a>Общие сведения о моделях

Было рассмотрено, контроллеры и представления было рассмотрено. Последний вопрос, мы должны говорить о составляют модели. Что такое модель MVC?

Модель MVC содержит все логики приложения, не содержится в контроллере или представления. Модели должен содержать все ваши бизнес-логики приложения, логику проверки и логики доступа к базе данных. Например если вы используете Microsoft Entity Framework для доступа к базе данных, бы создать классы платформы Entity Framework (EDMX-файл) в папке Models.

Представления должен содержать только логику, связанные с созданием пользовательского интерфейса. Контроллер должен содержать только минимальные логику, необходимую для возвращения правильное представление или перенаправить пользователя в другое действие (Управление потоком). Все остальное должно содержаться в модели.

В общем случае следует стремиться fat моделей и небольшой контроллеров. Методы контроллера должны содержать всего несколько строк кода. Если действие контроллера получает слишком fat, затем следует перемещать логику в новый класс в папке Models.

## <a name="summary"></a>Сводка

Это руководство предоставляет вам общий обзор различных частей ASP.NET MVC веб-приложения. Вы узнали, как маршрутизация ASP.NET сопоставляет входящий запрос браузера к действиям конкретного контроллера. Вы узнали, как контроллеры координировать как представления возвращаются в браузер. Наконец вы узнали, как модели содержат application business, проверки и логики доступа к базе данных.
