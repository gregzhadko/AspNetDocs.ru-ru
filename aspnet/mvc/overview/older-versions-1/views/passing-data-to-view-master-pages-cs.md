---
uid: mvc/overview/older-versions-1/views/passing-data-to-view-master-pages-cs
title: Передача данных на главные страницы представлений (C#) | Документация Майкрософт
author: microsoft
description: Этот учебник призван объяснить, как можно передать данные от контроллера к главной странице представления. Мы рассмотрим две стратегии передачи данных в представление m...
ms.author: riande
ms.date: 10/16/2008
ms.assetid: 5fee879b-8bde-42a9-a434-60ba6b1cf747
msc.legacyurl: /mvc/overview/older-versions-1/views/passing-data-to-view-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 863fe772a1d79201b83da8498bf7e981acf7fd0e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59401079"
---
# <a name="passing-data-to-view-master-pages-c"></a>Передача данных на эталонные страницы представлений (C#)

по [Microsoft](https://github.com/microsoft)

[Загрузить PDF-файл](http://download.microsoft.com/download/e/f/3/ef3f2ff6-7424-48f7-bdaa-180ef64c3490/ASPNET_MVC_Tutorial_13_CS.pdf)

> Этот учебник призван объяснить, как можно передать данные от контроллера к главной странице представления. Мы рассмотрим две стратегии передачи данных для главной страницы представления. Во-первых мы рассмотрим простое решение, полученный в приложении, которое трудно обслуживать. Далее мы рассмотрим более удачное решение, требует немного больше начальной работы, но приводит к гораздо более простым в обслуживании приложения.


## <a name="passing-data-to-view-master-pages"></a>Передача данных на главные страницы представлений

Этот учебник призван объяснить, как можно передать данные от контроллера к главной странице представления. Мы рассмотрим две стратегии передачи данных для главной страницы представления. Во-первых мы рассмотрим простое решение, полученный в приложении, которое трудно обслуживать. Далее мы рассмотрим более удачное решение, требует немного больше начальной работы, но приводит к гораздо более простым в обслуживании приложения.

### <a name="the-problem"></a>Проблема

Предположим, что вы создаете приложения базы данных movie и будет отображаться список категорий фильма на каждой странице в приложении (см. рис. 1). Кроме того, представьте себе, что список категорий movie хранится в таблице базы данных. В этом случае смысл для извлечения категорий из базы данных и визуализации списка категорий фильма главной страницы представления.


[![Отображение категорий фильма на главной странице представления](passing-data-to-view-master-pages-cs/_static/image2.png)](passing-data-to-view-master-pages-cs/_static/image1.png)

**Рис 01**: Отображение категорий фильма на главной странице представления ([Просмотр полноразмерного изображения](passing-data-to-view-master-pages-cs/_static/image3.png))


Здесь имеется проблема. Как получить список категорий фильма на главной странице? Это подмывает вас для прямого вызова методов классов модели на главной странице. Другими словами это желание включить код для извлечения данных из базы данных право на главной странице. Тем не менее минуя контроллеров MVC для доступа к базе данных, нарушающих четкого разделения проблем, который является одним из основных преимуществ создания приложения MVC.

В MVC-приложении вы можете все взаимодействие между представлений MVC и модели MVC, который должен обрабатываться контроллеров MVC. Это разделение областей ответственности приводит к более простым в обслуживании, адаптируемый и тестируемого приложения.

В MVC-приложениях все данные, передаваемые в представление, в том числе главной страницы представления — должны быть переданы представления с помощью действия контроллера. Кроме того данные должны передаваться за счет использования представления данных. В оставшейся части этого руководства я изучите два метода передачи данных представления главной страницы представления.

### <a name="the-simple-solution"></a>Простое решение

Давайте начнем с самым простым решением для передачи данных в представление из контроллера главной страницы представления. Самым простым решением является передача данные представления для главной страницы в каждом действия контроллера.

Рассмотрим контроллер в листинге 1. Он предоставляет два действия с именем `Index()` и `Details()`. `Index()` Метод действия возвращает каждый фильм в таблице базы данных фильмов. `Details()` Метод действия возвращает каждый фильм в категории определенного фильма.

**Листинг 1. `Controllers\HomeController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample1.cs)]

Обратите внимание на то, что Index() и действия Details() добавить два элемента для просмотра данных. Действие Index() добавляет два ключа: категории и фильмов. Ключ категории представляет список категорий фильма, отображаемого элементом главной страницы представления. Ключ фильмы представляет список фильмов, отображаемых на странице представления Index.

Действие Details() также добавляет два ключа с именем категории и фильмов. Ключ категории, опять же, представляет список категорий фильма, отображаемого элементом главной страницы представления. Ключ фильмы представляет список фильмов в определенной категории, отображаемых на странице представления сведений (см. рис. 2).


[![В представлении сведений](passing-data-to-view-master-pages-cs/_static/image5.png)](passing-data-to-view-master-pages-cs/_static/image4.png)

**Рис. 02**: В представлении сведений ([Просмотр полноразмерного изображения](passing-data-to-view-master-pages-cs/_static/image6.png))


В листинге 2 содержится представление Index. Просто выполняет итерацию по списку фильмов, представленный элементом фильмы, в представление данных.

**Листинг 2. `Views\Home\Index.aspx`**

[!code-aspx[Main](passing-data-to-view-master-pages-cs/samples/sample2.aspx)]

В листинге 3 содержится главной страницы представления. Главной страницы представления проходит и выполняет визуализацию всех категорий фильма, представленный элемент категории из представления данных.

**Листинг 3. `Views\Shared\Site.master`**

[!code-aspx[Main](passing-data-to-view-master-pages-cs/samples/sample3.aspx)]

Все данные передаются представление и главной страницы представления через представление данных. Это правильный способ передачи данных на главную страницу.

Таким образом что не так с помощью этого решения? Проблема в том, что это решение нарушает принцип DRY (Don't Repeat Yourself). Каждого действия контроллера необходимо добавить те же список категорий фильмов для просмотра данных. Наличие повторяющегося кода в приложении делает гораздо сложнее обслуживать и адаптировать изменить приложение.

### <a name="the-good-solution"></a>Хорошим решением

В этом разделе мы рассмотрим это альтернативный и лучше, решение для передачи данных из действия контроллера в представление главную страницу. Вместо добавления категории фильмов для главной страницы в каждом действие контроллера, мы добавим категориями фильмов для просмотра данных только один раз. Все данные представления, используемые с главной страницы представления добавляется в контроллер приложений.

Класс ApplicationController содержится в листинге 4.

**Листинг 4. `Controllers\ApplicationController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample4.cs)]

Существует три вещи, которые вы должны заметить о контроллера приложения в листинге 4. Во-первых Обратите внимание на то, что класс наследует от базового класса класса System.Web.Mvc.Controller. Контроллер приложений — это класс контроллера.

Во-вторых Обратите внимание на то, что класс контроллера приложения является абстрактным классом. Абстрактный класс — это класс, который должен быть реализован для конкретного класса. Поскольку контроллера приложения представляет собой абстрактный класс, не может не вызвать любые методы, определенные в классе напрямую. При попытке непосредственно вызывать класс приложения вы получите сообщение об ошибке не удалось найти ресурс.

В-третьих Обратите внимание на то, что контроллер приложения содержит конструктор, который добавляет список категорий фильмов для просмотра данных. Каждый класс контроллера, который наследует от контроллера приложения вызывает конструктор контроллера приложения автоматически. При каждом вызове любого действия контроллера, который наследует от контроллер приложения, категории фильма автоматически включается в представление данных.

Контроллер фильмов в листинге 5 наследует от контроллера приложения.

**Листинг 5. `Controllers\MoviesController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample5.cs)]

Контроллер фильмов, так же, как описано в предыдущем разделе, контроллер Home предоставляет два метода действия с именем `Index()` и `Details()`. Обратите внимание, что список фильмов категорий, отображаемых на странице главного представления не добавлены для просмотра данных в любом `Index()` или `Details()` метод. Поскольку контроллера Movies наследуется от контроллер приложения, для просмотра данных автоматически добавляется список категорий фильма.

Обратите внимание на то, что это решение для добавления представления данных для главной страницы представления не нарушает принцип DRY (Don't Repeat Yourself). Код для добавления списка категорий фильмов для просмотра данных содержится только в одном месте: конструктор контроллера приложения.

### <a name="summary"></a>Сводка

В этом учебнике мы рассмотрели два подхода к передаче данных представление из контроллера в представление главную страницу. Во-первых мы рассмотрели простой, но трудно поддерживать подход. В первом разделе мы рассмотрели, как добавить представление данных для главной страницы представления в каждый каждое действие контроллера в приложении. Мы пришли к выводу это был неверный подход, так как он нарушает принцип DRY (Don't Repeat Yourself).

Далее мы рассмотрели гораздо лучшей стратегией для добавления данные, необходимые для просмотра данных главной страницы представления. Вместо добавления данных представления в каждого действия контроллера, мы добавили данные представления только один раз в контроллер приложений. Таким образом, можно избежать повторяющегося кода, при передаче данных на главную страницу представления в приложении ASP.NET MVC.

> [!div class="step-by-step"]
> [Назад](creating-page-layouts-with-view-master-pages-cs.md)
> [Вперед](asp-net-mvc-views-overview-vb.md)
