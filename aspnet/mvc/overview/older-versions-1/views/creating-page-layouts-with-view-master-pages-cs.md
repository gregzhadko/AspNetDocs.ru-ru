---
uid: mvc/overview/older-versions-1/views/creating-page-layouts-with-view-master-pages-cs
title: Создание макетов страниц с помощью главных страницC#представления () | Документация Майкрософт
author: microsoft
description: В этом руководстве вы узнаете, как создать общий макет страницы для нескольких страниц в приложении, воспользовавшись преимуществами представления главных страниц. Можно использовать...
ms.author: riande
ms.date: 10/16/2008
ms.assetid: dff54fcb-68b1-4488-89a2-ca97532d6a4c
msc.legacyurl: /mvc/overview/older-versions-1/views/creating-page-layouts-with-view-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 026e3efb4ebf84016aa0f6a5fda4af549fdadfcb
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78435198"
---
# <a name="creating-page-layouts-with-view-master-pages-c"></a>Создание макетов страниц с эталонными страницами представлений (C#)

по [Майкрософт](https://github.com/microsoft)

[Скачать в формате PDF](https://download.microsoft.com/download/e/f/3/ef3f2ff6-7424-48f7-bdaa-180ef64c3490/ASPNET_MVC_Tutorial_12_CS.pdf)

> В этом руководстве вы узнаете, как создать общий макет страницы для нескольких страниц в приложении, воспользовавшись преимуществами представления главных страниц. Можно использовать главную страницу представления, например, чтобы определить макет страницы с двумя столбцами и использовать макет с двумя столбцами для всех страниц веб-приложения.

## <a name="creating-page-layouts-with-view-master-pages"></a>Создание макетов страниц с помощью главных страниц представлений

В этом руководстве вы узнаете, как создать общий макет страницы для нескольких страниц в приложении, воспользовавшись преимуществами представления главных страниц. Можно использовать главную страницу представления, например, чтобы определить макет страницы с двумя столбцами и использовать макет с двумя столбцами для всех страниц веб-приложения.

Вы также можете воспользоваться преимуществами представления главных страниц, чтобы совместно использовать общее содержимое на нескольких страницах приложения. Например, можно разместить эмблему веб-сайта, ссылки навигации и баннеры на главной странице представления. Таким образом, каждая страница в приложении будет отображать это содержимое автоматически.

В этом руководстве вы узнаете, как создать новую главную страницу представления и создать новую страницу просмотра содержимого на основе главной страницы.

### <a name="creating-a-view-master-page"></a>Создание главной страницы представления

Начнем с создания главной страницы представления, которая определяет макет с двумя столбцами. Чтобы добавить новую главную страницу представления в проект MVC, щелкните правой кнопкой мыши папку Views\Shared, выберите пункт меню **Добавить, новый элемент**и выберите шаблон **главной страницы представления MVC** (см. рис. 1).

[![Добавление главной страницы представления](creating-page-layouts-with-view-master-pages-cs/_static/image2.png)](creating-page-layouts-with-view-master-pages-cs/_static/image1.png)

**Рис. 01**. Добавление главной страницы представления ([щелкните, чтобы просмотреть изображение с полным размером](creating-page-layouts-with-view-master-pages-cs/_static/image3.png))

В приложении можно создать более одной главной страницы представления. На каждой главной странице представления можно определить другой макет страницы. Например, может потребоваться, чтобы некоторые страницы имели макет с двумя столбцами, а другие страницы имели макет с тремя столбцами.

Главная страница представления во многом напоминает стандартное представление MVC ASP.NET. Однако, в отличие от обычного представления, Главная страница представления содержит один или несколько тегов `<asp:ContentPlaceHolder>`. Теги `<contentplaceholder>` используются для отметки областей главной страницы, которые могут быть переопределены на отдельной странице содержимого.

Например, Главная страница представления в листинге 1 определяет макет с двумя столбцами. Он содержит два тега `<contentplaceholder>`. Один `<ContentPlaceHolder>` для каждого столбца.

**Листинг 1 — `Views\Shared\Site.master`**

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample1.aspx)]

Текст главной страницы представления в листинге 1 содержит два тега `<div>`, которые соответствуют двум столбцам. Класс столбцов каскадной таблицы стилей применяется к тегам `<div>`. Этот класс определен в таблице стилей, объявленной в верхней части главной страницы. Вы можете просмотреть, как будет подготовлена визуализация главной страницы представления, переключив ее в представление конструирования. Щелкните вкладку Конструктор в левом нижнем углу редактора исходного кода (см. рис. 2).

[![предварительного просмотра главной страницы в конструкторе](creating-page-layouts-with-view-master-pages-cs/_static/image5.png)](creating-page-layouts-with-view-master-pages-cs/_static/image4.png)

**Рис. 02**. Предварительный просмотр главной страницы в конструкторе ([щелкните, чтобы просмотреть изображение с полным размером](creating-page-layouts-with-view-master-pages-cs/_static/image6.png))

### <a name="creating-a-view-content-page"></a>Создание страницы просмотра содержимого

После создания главной страницы представления можно создать одно или несколько страниц содержимого представления на основе главной страницы представления. Например, можно создать страницу содержимого представления индекса для контроллера Home, щелкнув правой кнопкой мыши папку Views\Home, выбрав **Добавить, создать элемент**, выбрав шаблон **страницы представления MVC** , введя имя index. aspx и нажав кнопку **добавить** (см. рис. 3).

[![Добавление страницы просмотра содержимого](creating-page-layouts-with-view-master-pages-cs/_static/image8.png)](creating-page-layouts-with-view-master-pages-cs/_static/image7.png)

**Рис. 03**. Добавление страницы просмотра содержимого ([щелкните, чтобы просмотреть изображение с полным размером](creating-page-layouts-with-view-master-pages-cs/_static/image9.png))

После нажатия кнопки Добавить появляется новое диалоговое окно, позволяющее выбрать главную страницу представления для связи с страницей просмотра содержимого (см. рис. 4). Можно перейти к главной странице Site. master представления, созданной в предыдущем разделе.

[![выбор главной страницы](creating-page-layouts-with-view-master-pages-cs/_static/image11.png)](creating-page-layouts-with-view-master-pages-cs/_static/image10.png)

**Рис. 04**. Выбор главной страницы ([щелкните, чтобы просмотреть изображение с полным размером](creating-page-layouts-with-view-master-pages-cs/_static/image12.png))

После создания новой страницы просмотра содержимого на основе главной страницы Site. master вы получаете файл в листинге 2.

**Листинг 2 — `Views\Home\Index.aspx`**

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample2.aspx)]

Обратите внимание, что это представление содержит тег `<asp:Content>`, соответствующий каждому тегу `<asp:ContentPlaceHolder>` на главной странице представления. Каждый тег `<asp:Content>` содержит атрибут ContentPlaceHolderID, указывающий на определенные `<asp:ContentPlaceHolder>`, которые он переопределяет.

Кроме того, обратите внимание, что страница представления содержимого в листинге 2 не содержит никаких обычных открывающих и закрывающих HTML-тегов. Например, он не содержит открывающие и закрывающие `<html>` или `<head>` Теги. Все обычные открывающие и закрывающие теги содержатся на главной странице представления.

Любое содержимое, которое необходимо отобразить на странице просмотра содержимого, должно быть помещено в тег `<asp:Content>`. Если поместить любой HTML-код или другое содержимое за пределами этих тегов, при попытке просмотра страницы будет выводится сообщение об ошибке.

Вам не нужно переопределять каждый тег `<asp:ContentPlaceHolder>` с главной страницы на странице представления содержимого. Необходимо переопределить `<asp:ContentPlaceHolder>` тег, только если нужно заменить тег на конкретное содержимое.

Например, измененное представление индекса в листинге 3 содержит только два тега `<asp:Content>`. Каждый из тегов `<asp:Content>` содержит некоторый текст.

**Листинг 3 — `Views\Home\Index.aspx (modified)`**

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample3.aspx)]

При запросе представления в листинге 3 он визуализирует страницу на рис. 5. Обратите внимание, что представление отображает страницу с двумя столбцами. Кроме того, обратите внимание, что содержимое страницы Просмотр содержимого объединяется с содержимым из главной страницы представления.

[![страницы содержимого представления индекса](creating-page-layouts-with-view-master-pages-cs/_static/image14.png)](creating-page-layouts-with-view-master-pages-cs/_static/image13.png)

**Рис. 05**. страница содержимого представления индекса ([щелкните, чтобы просмотреть изображение с полным размером](creating-page-layouts-with-view-master-pages-cs/_static/image15.png))

### <a name="modifying-view-master-page-content"></a>Изменение содержимого главной страницы представления

Одной из проблем, с которыми вы столкнулись почти сразу же при работе с главными страницами представления, является проблема изменения содержимого главной страницы при запросе различных страниц просмотра содержимого. Например, каждая страница в веб-приложении должна иметь уникальный заголовок. Однако заголовок объявляется в главной странице представления, а не на странице Просмотр содержимого. Итак, как настроить заголовок страницы для каждой страницы представления содержимого?

Существует два способа изменить заголовок, отображаемый на странице просмотра содержимого. Во-первых, можно назначить заголовок страницы атрибуту title директивы `<%@ page %>`, объявленной в верхней части страницы просмотра содержимого. Например, если в представление индекса нужно назначить заголовок страницы "супер-отличный веб – сайт", в верхней части представления индекса можно включить следующую директиву:

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample4.aspx)]

Когда представление индекса отображается в браузере, в строке заголовка браузера отображается нужный заголовок:

[заголовок окна браузера ![](creating-page-layouts-with-view-master-pages-cs/_static/image17.png)](creating-page-layouts-with-view-master-pages-cs/_static/image16.png)

Существует одно важное требование, которое должно соответствовать странице главного представления, чтобы атрибут Title работал. Главная страница представления должна содержать `<head runat="server">` тег вместо обычного `<head>` тега для заголовка. Если тег `<head>` не содержит атрибут runat = "Server", заголовок не будет отображаться. Главная страница представления по умолчанию содержит обязательный тег `<head runat="server">`.

Альтернативным подходом к изменению содержимого главной страницы на странице отдельного представления содержимого является заключение области, которую нужно изменить, в тег `<asp:ContentPlaceHolder>`. Например, предположим, что необходимо изменить не только заголовок, но и теги META, отображаемые на странице главного представления. На странице главного представления в листинге 4 содержится тег `<asp:ContentPlaceHolder>` в теге `<head>`.

**Листинг 4 — `Views\Shared\Site2.master`**

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample5.aspx)]

Обратите внимание, что тег `<asp:ContentPlaceHolder>` в листинге 4 содержит содержимое по умолчанию: заголовок по умолчанию и теги META по умолчанию. Если не переопределить этот тег `<asp:ContentPlaceHolder>` на странице отдельного представления содержимого, будет отображаться содержимое по умолчанию.

Страница представления содержимого в листинге 5 переопределяет тег `<asp:ContentPlaceHolder>`, чтобы отобразить пользовательский заголовок и пользовательские теги META.

**Листинг 5 — `Views\Home\Index2.aspx`**

[!code-aspx[Main](creating-page-layouts-with-view-master-pages-cs/samples/sample6.aspx)]

### <a name="summary"></a>Сводка

В этом учебнике приводятся основные сведения о просмотре главных страниц и просмотре страниц содержимого. Вы узнали, как создавать новые главные страницы представления и создавать страницы содержимого представления на их основе. Кроме того, мы рассмотрели, как можно изменить содержимое главной страницы представления с определенной страницы содержимого представления.

> [!div class="step-by-step"]
> [Назад](using-the-tagbuilder-class-to-build-html-helpers-cs.md)
> [Вперед](passing-data-to-view-master-pages-cs.md)
