---
uid: mvc/overview/older-versions-1/nerddinner/create-a-database
title: Создание базы данных | Документация Майкрософт
author: microsoft
description: Шаг 2 показано, как создать базу данных, содержащий все компании dinner и RSVP данных для нашего приложения NerdDinner.
ms.author: riande
ms.date: 07/27/2010
ms.assetid: 983f3ffa-08b8-4868-b8c9-aa34593fc683
msc.legacyurl: /mvc/overview/older-versions-1/nerddinner/create-a-database
msc.type: authoredcontent
ms.openlocfilehash: b0aa7c8cdf741f44e09ed18e2b2f73fe6bf786ae
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65117465"
---
# <a name="create-a-database"></a>Создание базы данных

по [Microsoft](https://github.com/microsoft)

[Загрузить PDF-файл](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)

> Это бесплатная этап 2 [руководство по использованию приложения «NerdDinner»](introducing-the-nerddinner-tutorial.md) , пошаговое рассмотрение как создать небольшой, но завершить, веб-приложения с помощью ASP.NET MVC 1.
> 
> Шаг 2 показано, как создать базу данных, содержащий все компании dinner и RSVP данных для нашего приложения NerdDinner.
> 
> Если вы используете ASP.NET MVC 3, рекомендуется следовать [Приступая к работе с MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) или [MVC Music Store](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) учебники.

## <a name="nerddinner-step-2-creating-the-database"></a>NerdDinner Step 2: Создание базы данных

Мы будем использовать базу данных для хранения всех данных компании Dinner и RSVP для нашего приложения NerdDinner.

Ниже описывается создание базы данных, через бесплатный выпуск SQL Server Express (который можно легко установить с помощью версии 2 [Microsoft Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx)). Весь код, мы напишем работает с SQL Server Express и полной версии SQL Server.

### <a name="creating-a-new-sql-server-express-database"></a>Создание новой базы данных SQL Server Express

Мы будем начать, щелкните правой кнопкой мыши на нашем веб-проект, а затем выберите **Add -&gt;новый элемент** команды меню:

![](create-a-database/_static/image1.png)

Откроется диалоговое окно «Добавление нового элемента» Visual Studio. Мы фильтрация по категории «Данные» и выберите шаблон элемента «Базы данных SQL Server»:

![](create-a-database/_static/image2.png)

Мы будем называть базы данных SQL Server Express, которую мы хотим создать «NerdDinner.mdf» и нажмите ok. Visual Studio будет запрошен нам если нам нужно добавить этот файл к нашей \App\_каталог данных (который уже является каталогом установки с помощью чтения и записи списков управления доступом):

![](create-a-database/_static/image3.png)

Щелкнем «Yes» и новой базе данных будет создан и добавлен в наш обозреватель решений:

![](create-a-database/_static/image4.png)

### <a name="creating-tables-within-our-database"></a>Создание таблиц в базе данных

Теперь у нас есть новой пустой базы данных. Давайте добавим некоторые таблицы к ней.

Для этого перейдем на вкладку окна «Обозреватель серверов» в Visual Studio, которая позволяет нам управлять базами данных и серверами. SQL Server Express базы данных, хранящиеся в \App\_папку данных приложения будут автоматически отображаться в обозревателе серверов. При необходимости можно использовать значок «Соединение с базой данных» в верхней части окна «Обозреватель серверов» для добавления в список, а также дополнительные базы данных SQL Server (локальные и удаленные):

![](create-a-database/_static/image5.png)

Мы добавим две таблицы к базе данных NerdDinner — один для хранения наших ужинов, а другой для отслеживания RSVP принятия к ним. Мы можем создать новые таблицы, щелкнув правой кнопкой мыши на папку «Таблицы» в базе данных и выбрав команду меню «Добавить новую таблицу»:

![](create-a-database/_static/image6.png)

Откроется конструктор таблиц, который позволяет настроить схему нашей таблице. Для нашей таблице «Ужинов» мы добавим 10 столбцов данных:

![](create-a-database/_static/image7.png)

Нам нужен столбец «DinnerID» уникальным первичным ключом для таблицы. Это можно настроить, щелкнув правой кнопкой мыши по столбцу «DinnerID» и выбрав пункт меню «Задать первичный ключ»:

![](create-a-database/_static/image8.png)

Кроме того, что DinnerID первичный ключ, также необходимо настроить его как столбец «identity», значение которого автоматически увеличивается при добавлении новых строк данных в таблицу (первая строка вставленных компании Dinner будет иметь DinnerID 1 это означает, что второй вставляемые строки будет иметь DinnerID 2, и т.д.).

Мы можно сделать, выбрав столбец «DinnerID» и затем с помощью редактора «Свойства столбца» для установки свойства "(Is Identity)» в столбце «Да». Мы будем использовать значения по умолчанию стандартные удостоверения (начинаются с 1 и увеличивается на 1 на каждой новой строки Dinner):

![](create-a-database/_static/image9.png)

Мы затем вернемся к нашей таблице, введя сочетание клавиш Ctrl-S или с помощью **файл -&gt;Сохранить** команды меню. Это будет предложено нам имя таблицы. Назовем его «Ужинов»:

![](create-a-database/_static/image10.png)

После этого нашей новой таблицы ужинов появится в базе данных в обозревателе серверов.

Затем мы повторите описанные выше шаги и создайте таблицу «RSVP». Эта таблица с 3 столбцами. Мы установки RsvpID столбец как первичный ключ и ухудшить его в столбец идентификаторов:

![](create-a-database/_static/image11.png)

Мы сохраните его и присвойте ему имя «RSVP».

### <a name="setting-up-a-foreign-key-relationship-between-tables"></a>Настройка внешнего ключа между таблицами

Теперь у нас есть две таблицы в базе данных. Наши последний этап разработки схемы будет настроить отношение «один ко многим» между этими двумя таблицами — таким образом, чтобы мы можно связать каждую строку Dinner с ноль или более строк RSVP, применяемых к этому. Мы сделаем это путем настройки столбца таблицы RSVP «DinnerID» требуется отношение внешнего ключа в столбец «DinnerID» в таблице «Ужинов».

Чтобы сделать это, мы откроем RSVP таблицу в конструкторе таблиц, дважды щелкнув его в обозревателе серверов. Затем мы выберем столбец «DinnerID», щелкните правой кнопкой мыши и выберите «Связей...» Команда контекстного меню:

![](create-a-database/_static/image12.png)

Откроется диалоговое окно, можно использовать для установки связи между таблицами:

![](create-a-database/_static/image13.png)

Мы щелкнем кнопку «Добавить», чтобы добавить новое отношение к диалоговому окну. После добавления связи, мы будем разверните узел дерева «Спецификация таблиц и столбцов» в сетке свойств в правой части диалогового окна и нажмите кнопку «...» справа от его:

![](create-a-database/_static/image14.png)

Нажатие кнопки «...» появится другое диалоговое окно, можно указать, какие таблицы и столбцы, участвующие в связи, а также позволяет нам имя связи.

Мы изменить первичный ключ таблицы «Ужинов» и выберите столбец «DinnerID» в таблице ужинов как первичный ключ. В таблице внешнего ключа и RSVP, будет нашей таблице RSVP. Столбец DinnerID будет связан как внешний ключ:

![](create-a-database/_static/image15.png)

Теперь каждой строки в таблице RSVP будет связан со строкой в таблице ужин. SQL Server будет ссылочной целостности для нас — и запрет нам добавления новой строки RSVP, если он не указывает на действительную строку ужин. Он также предотвратит нам Dinner строка удаляется, если по-прежнему RSVP строки, ссылающиеся на него.

### <a name="adding-data-to-our-tables"></a>Добавление данных в нашей таблицы

Давайте Готово, добавив к нашей таблице ужинов демонстрационные данные. Можно добавить данные в таблицу, щелкнув его в обозревателе серверов и выбрав команду «Показать таблицу данных»:

![](create-a-database/_static/image16.png)

Мы добавим несколько строк данных компании Dinner, который можно использовать позднее, когда мы начнем реализовывать приложения:

![](create-a-database/_static/image17.png)

### <a name="next-step"></a>Следующий шаг

Мы завершили создание нашей базе данных. Теперь создадим классов модели, которые можно использовать для запроса и обновить его.

> [!div class="step-by-step"]
> [Назад](create-a-new-aspnet-mvc-project.md)
> [Вперед](build-a-model-with-business-rule-validations.md)
