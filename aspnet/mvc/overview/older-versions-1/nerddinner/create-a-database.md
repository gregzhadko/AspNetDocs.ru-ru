---
uid: mvc/overview/older-versions-1/nerddinner/create-a-database
title: Создание базы данных | Документация Майкрософт
author: rick-anderson
description: Шаг 2 показывает шаги по созданию базы данных, содержащей все данные ужина и RSVP для нашего приложения NerdDinner.
ms.author: riande
ms.date: 07/27/2010
ms.assetid: 983f3ffa-08b8-4868-b8c9-aa34593fc683
msc.legacyurl: /mvc/overview/older-versions-1/nerddinner/create-a-database
msc.type: authoredcontent
ms.openlocfilehash: d0b87e4a6a27b37d2dbaa6d5b871da477b25586d
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81541615"
---
# <a name="create-a-database"></a>Создание базы данных

[корпорацией Майкрософт](https://github.com/microsoft)

[Скачать PDF](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)

> Это шаг 2 [бесплатного "NerdDinner" приложение учебник,](introducing-the-nerddinner-tutorial.md) который ходит через как построить небольшой, но полный, веб-приложение с помощью ASP.NET MVC 1.
> 
> Шаг 2 показывает шаги по созданию базы данных, содержащей все данные ужина и RSVP для нашего приложения NerdDinner.
> 
> Если вы используете ASP.NET MVC 3, мы рекомендуем вам следовать [начиная с MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) или [MVC Music Store](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) учебники.

## <a name="nerddinner-step-2-creating-the-database"></a>NerdDinner Шаг 2: Создание базы данных

Мы будем использовать базу данных для хранения всех данных Dinner и RSVP для нашего приложения NerdDinner.

На приведенных ниже шагах показано создание базы данных с помощью бесплатного издания S'L Server Express (которое можно легко установить с помощью V2 [установки веб-платформы Microsoft).](https://www.microsoft.com/web/downloads/platform.aspx) Весь код, который мы напишем, работает как с S'L Server Express, так и с полным сервером S'L.

### <a name="creating-a-new-sql-server-express-database"></a>Создание новой базы данных сервера S'L Server Express

Начнем с нажатия правого нажима на наш веб-проект, а затем выберем команду меню **Add-&gt;New Item:**

![](create-a-database/_static/image1.png)

Это позволит поднять Visual Studio в "Добавить новый пункт" диалог. Мы отфильтруем по категории "Данные" и выберем шаблон элемента "База данных серверов":

![](create-a-database/_static/image2.png)

Мы назовем базу данных сервера S'L Server Express, которая мы хотим создать "NerdDinner.mdf" и ударить нормально. Visual Studio спросит нас, хотим ли мы добавить\_этот файл в наш каталог данных приложения (который уже настроен с помощью ACL-аналитики безопасности как для чтения),

![](create-a-database/_static/image3.png)

Мы нажмем кнопку "Да", и наша новая база данных будет создана и добавлена в наш Solution Explorer:

![](create-a-database/_static/image4.png)

### <a name="creating-tables-within-our-database"></a>Создание таблиц в нашей базе данных

Теперь у нас есть новая пустая база данных. Давайте добавим к нему несколько таблиц.

Для этого мы перейдем к окну вкладок "Server Explorer" в Visual Studio, что позволяет нам управлять базами данных и серверами. Базы данных сервера Сервер экспресс, хранящиеся в папке «Данные приложения»\_нашего приложения, будут автоматически отображаться в серверном исследователе. Мы можем дополнительно использовать значок «Подключение к базе данных» в верхней части окна «Исследователь сервера», чтобы добавить в список дополнительные базы данных сервера S'L (как локальные, так и удаленные):

![](create-a-database/_static/image5.png)

Мы добавим две таблицы в нашу базу данных NerdDinner - один для хранения наших dinners, а другой для отслеживания RSVP приемов к ним. Мы можем создать новые таблицы, нажав правой кнопкой мыши на папке "Таблицы" в нашей базе данных и выбрав команду меню "Добавить новый стол":

![](create-a-database/_static/image6.png)

Это откроет конструктор таблицы, что позволяет нам настроить схему нашей таблицы. Для нашей таблицы "Dinners" мы добавим 10 столбцов данных:

![](create-a-database/_static/image7.png)

Мы хотим, чтобы колонка "DinnerID" была уникальным основным ключом для таблицы. Мы можем настроить это, нажав правой кнопкой мыши на столбце "DinnerID" и выбрав элемент меню "Set Primary Key":

![](create-a-database/_static/image8.png)

В дополнение к тому, чтобы сделать DinnerID основным ключом, мы также хотим настроить его как "идентичность" столбец, значение которого автоматически приращено, как новые строки данных добавляются в таблицу (имеется в виду первый вставлен ужин строки будет иметь DinnerID 1, второй вставленный ряд будет иметь DinnerID 2, и т.д.).

Мы можем сделать это, выбрав столбец "DinnerID", а затем используйте редактор "Column Properties" для установки свойства "(Is Identity)" на столбце "Да". Мы будем использовать стандартные значения идентификации (начало с 1 и приращение 1 на каждой новой строке Ужина):

![](create-a-database/_static/image9.png)

Затем мы сохраним нашу таблицу, введя Ctrl-S или используя команду меню **&gt;File- Save.** Это подскажет нам назвать таблицу. Мы назовем его "Ужины":

![](create-a-database/_static/image10.png)

Наша новая таблица Dinners будет отображаться в нашей базе данных в сервере explorer.

Затем мы повторим вышеуказанные шаги и создадим таблицу "RSVP". Эта таблица с 3 колонками. Мы наведием столбец RsvpID в качестве основного ключа, а также сделаем его столбцом идентификации:

![](create-a-database/_static/image11.png)

Мы сохраним его и дадим ему название "RSVP".

### <a name="setting-up-a-foreign-key-relationship-between-tables"></a>Настройка взаимоотношений между таблицами для иностранных ключей

Теперь у нас есть две таблицы в нашей базе данных. Наш последний шаг проектирования схемы будет устанавливать "один к многим" отношения между этими двумя таблицами - так что мы можем связать каждый ужин строки с нулем или более RSVP строки, которые применяются к нему. Мы сделаем это путем настройки таблицы RSVP "DinnerID" колонке иметь иностранного ключа отношения с "DinnerID" колонке в таблице "Ужины".

Для этого мы откроем таблицу RSVP в таблице дизайнера, дважды нажав на него в исследователье сервера. Затем мы выберем столбец "DinnerID" в ней, право-нажмите кнопку, и выберите "Отношения ..." команда контекстного меню:

![](create-a-database/_static/image12.png)

Это позволит вывести диалог, который мы можем использовать для настройки отношений между таблицами:

![](create-a-database/_static/image13.png)

Мы нажмем кнопку "Добавить", чтобы добавить новое отношение к диалогу. Как только связь была добавлена, мы расширим "Таблицы и колонки спецификации" дерево-вид узла в сетке свойств вправо от диалога, а затем нажмите "..." кнопка справа от него:

![](create-a-database/_static/image14.png)

Нажав на кнопку "..." кнопка подведет еще один диалог, который позволяет нам указать, какие таблицы и столбцы участвуют в отношениях, а также позволит нам назвать отношения.

Мы изменим основной ключевой стол, чтобы быть "Ужины", и выберем столбец "DinnerID" в таблице Dinners в качестве основного ключа. Наша таблица RSVP будет таблицей с иностранными ключами, и RSVP. Колонка DinnerID будет ассоциироваться как иностранный ключ:

![](create-a-database/_static/image15.png)

Теперь каждая строка в таблице RSVP будет ассоциироваться со строкой в таблице Ужин. Сервер S'L будет поддерживать референциальную целостность для нас – и не позволит нам добавить новую строку RSVP, если она не указывает на действительную строку Ужин. Это также не позволит нам удалять строку Ужин, если Есть еще RSVP строки, ссылаясь на него.

### <a name="adding-data-to-our-tables"></a>Добавление данных в наши таблицы

Давайте закончим, добавив некоторые примеры данных в нашу таблицу Ужины. Мы можем добавить данные в таблицу, нажав на нее в правом доступе в Server Explorer и выбрав команду "Показать таблицу":

![](create-a-database/_static/image16.png)

Мы добавим несколько строк данных Ужина, которые мы можем использовать позже, когда мы начинаем реализацию приложения:

![](create-a-database/_static/image17.png)

### <a name="next-step"></a>Следующий шаг

Мы закончили создавать нашу базу данных. Теперь создадим классы моделей, которые мы можем использовать для запроса и обновления.

> [!div class="step-by-step"]
> [Назад](create-a-new-aspnet-mvc-project.md)
> [Вперед](build-a-model-with-business-rule-validations.md)
