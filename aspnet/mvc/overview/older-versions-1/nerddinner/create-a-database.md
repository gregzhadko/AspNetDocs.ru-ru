---
uid: mvc/overview/older-versions-1/nerddinner/create-a-database
title: Создание базы данных | Документация Майкрософт
author: microsoft
description: На шаге 2 показаны шаги по созданию базы данных, содержащей все данные о ужинах и RSVP для нашего приложения NerdDinner.
ms.author: riande
ms.date: 07/27/2010
ms.assetid: 983f3ffa-08b8-4868-b8c9-aa34593fc683
msc.legacyurl: /mvc/overview/older-versions-1/nerddinner/create-a-database
msc.type: authoredcontent
ms.openlocfilehash: b0aa7c8cdf741f44e09ed18e2b2f73fe6bf786ae
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78469302"
---
# <a name="create-a-database"></a>Создание базы данных

по [Майкрософт](https://github.com/microsoft)

[Скачать в формате PDF](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)

> Это шаг 2 бесплатного [учебника по NerdDinner приложению](introducing-the-nerddinner-tutorial.md) , в котором рассматривается создание небольшого, но полного веб-приложения с использованием ASP.NET MVC 1.
> 
> На шаге 2 показаны шаги по созданию базы данных, содержащей все данные о ужинах и RSVP для нашего приложения NerdDinner.
> 
> Если вы используете ASP.NET MVC 3, мы рекомендуем следовать руководствам по [Начало работы в MVC 3 или в приложении для](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) [музыкального магазина MVC](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) .

## <a name="nerddinner-step-2-creating-the-database"></a>NerdDinner. шаг 2. Создание базы данных

Мы будем использовать базу данных для хранения всех данных о обедах и RSVP для нашего приложения NerdDinner.

Приведенные ниже действия показывают создание базы данных с помощью бесплатного SQL Server Express выпуска (который можно легко установить с помощью версии 2 [установщик веб-платформы Майкрософт](https://www.microsoft.com/web/downloads/platform.aspx)). Весь код, который мы будем писать, работает как с SQL Server Express, так и с полной SQL Server.

### <a name="creating-a-new-sql-server-express-database"></a>Создание новой базы данных SQL Server Express

Для начала щелкните правой кнопкой мыши наш веб-проект и выберите команду **Добавить-&gt;новый элемент** :

![](create-a-database/_static/image1.png)

Откроется диалоговое окно "Добавление нового элемента" в Visual Studio. Мы отфильтрим по категории "данные" и выбираем шаблон элемента "база данных" SQL Server:

![](create-a-database/_static/image2.png)

Мы назовем базу данных SQL Server Express, которую нужно создать "NerdDinner. mdf", и нажмите кнопку ОК. Visual Studio запросит нас, если нам нужно добавить этот файл в наш каталог данных \Апп\_(каталог уже настроен для чтения и записи списков ACL безопасности):

![](create-a-database/_static/image3.png)

Нажмите кнопку "Да", и наша новая база данных будет создана и добавлена в наш обозреватель решений:

![](create-a-database/_static/image4.png)

### <a name="creating-tables-within-our-database"></a>Создание таблиц в базе данных

Теперь у нас есть новая пустая база данных. Давайте добавим к ней несколько таблиц.

Для этого перейдите в окно вкладки "обозреватель сервера" в Visual Studio, что позволит нам управлять базами данных и серверами. SQL Server Express базы данных, хранящиеся в папке \Апп\_данных приложения, будут автоматически отображаться в обозреватель сервера. Можно также использовать значок "подключиться к базе данных" в верхней части окна "обозреватель сервера" для добавления дополнительных SQL Server баз данных (как локальных, так и удаленных) в список:

![](create-a-database/_static/image5.png)

Мы добавим две таблицы в нашу базу данных NerdDinner — одну для хранения нашей диннерс, а другую — для контроля принятия RSVP. Чтобы создать новые таблицы, щелкните правой кнопкой мыши папку "Tables" в нашей базе данных и выберите команду "добавить новую таблицу":

![](create-a-database/_static/image6.png)

Откроется конструктор таблиц, позволяющий настроить схему таблицы. Для нашей таблицы "диннерс" мы добавим 10 столбцов данных:

![](create-a-database/_static/image7.png)

Мы хотим, чтобы столбец "Диннерид" был уникальным первичным ключом для таблицы. Это можно настроить, щелкнув правой кнопкой мыши столбец "Диннерид" и выбрав пункт меню "Задать первичный ключ":

![](create-a-database/_static/image8.png)

Кроме того, чтобы сделать Диннерид первичным ключом, мы также хотим настроить его как столбец Identity, значение которого автоматически увеличивается по мере добавления новых строк данных в таблицу (то есть первая вставленная строка обеда будет иметь значение Диннерид, равное 1, вторая вставленная строка будет иметь значение Диннерид, равное 2 и т. д.).

Для этого можно выбрать столбец "Диннерид", а затем использовать редактор "Свойства столбца", чтобы задать для свойства "(является идентификатором)" значение "Да". Мы будем использовать стандартные идентификаторы по умолчанию (начинаются с 1 и увеличивая 1 для каждой новой строки обеда):

![](create-a-database/_static/image9.png)

Затем мы сохраним нашу таблицу, введя CTRL-S или выполнив команду меню **File-&gt;Save** . При этом будет предложено ввести имя таблицы. Мы назовем его «диннерс»:

![](create-a-database/_static/image10.png)

Новая таблица диннерс будет отображаться в базе данных в обозревателе сервера.

Затем мы повторим описанные выше действия и создадим таблицу "RSVP". Эта таблица содержит 3 столбца. Столбец Рсвпид будет настроен в качестве первичного ключа, а также станет столбцом идентификаторов:

![](create-a-database/_static/image11.png)

Мы сохраним его и присвоим ему имя "RSVP".

### <a name="setting-up-a-foreign-key-relationship-between-tables"></a>Настройка связи по внешнему ключу между таблицами

Теперь у нас есть две таблицы в нашей базе данных. Последний этап проектирования схемы заключается в настройке связи «один ко многим» между этими двумя таблицами. Таким образом, можно связать каждую строку из компании с нулевым или несколькими строками RSVP, которые применяются к нему. Для этого нужно настроить в столбце "Диннерид" таблицы RSVP связь с внешним ключом к столбцу "Диннерид" в таблице "диннерс".

Для этого нужно открыть таблицу RSVP в конструкторе таблиц, дважды щелкнув ее в обозревателе сервера. Затем выберите в нем столбец "Диннерид", щелкните правой кнопкой мыши и выберите "связи...". Команда контекстного меню:

![](create-a-database/_static/image12.png)

Откроется диалоговое окно, которое можно использовать для установки связей между таблицами:

![](create-a-database/_static/image13.png)

Нажмите кнопку "Добавить", чтобы добавить новую связь в диалоговое окно. После добавления связи мы развернем узел древовидного представления "таблицы и столбцы" в сетке свойств справа от диалогового окна и нажимайте кнопку "...". справа от нее:

![](create-a-database/_static/image14.png)

Нажатие кнопки "..." появится еще одно диалоговое окно, позволяющее указать, какие таблицы и столбцы участвуют в связи, а также дать нам возможность присвоить имя связи.

Мы изменим таблицу первичного ключа на "диннерс" и выбираем столбец "Диннерид" в таблице диннерс в качестве первичного ключа. Наша таблица RSVP будет таблицей с внешним ключом и RSVP. Столбец Диннерид будет связан как внешний ключ:

![](create-a-database/_static/image15.png)

Теперь каждая строка в таблице RSVP будет связана со строкой в таблице Dinner. SQL Server будет поддерживать целостность данных в США и не допустить добавления новой строки RSVP, если она не указывает на допустимую строку в обеде. Кроме того, она не позволит нам удалить строку в обеде, если на нее ссылаются все строки RSVP.

### <a name="adding-data-to-our-tables"></a>Добавление данных в таблицы

Добавим примеры данных в нашу таблицу диннерс. Можно добавить данные в таблицу, щелкнув ее правой кнопкой мыши в обозреватель сервера и выбрав команду "отобразить данные таблицы":

![](create-a-database/_static/image16.png)

Мы добавим несколько строк данных о обедах, которые можно будет использовать позже, как мы начнем с реализации приложения:

![](create-a-database/_static/image17.png)

### <a name="next-step"></a>Следующий шаг

Создание базы данных завершено. Теперь создадим классы модели, которые можно использовать для запроса и обновления.

> [!div class="step-by-step"]
> [Назад](create-a-new-aspnet-mvc-project.md)
> [Вперед](build-a-model-with-business-rule-validations.md)
