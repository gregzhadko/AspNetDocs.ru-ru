---
uid: mvc/overview/older-versions-1/controllers-and-routing/creating-a-route-constraint-cs
title: Создание ограничения маршрута (C#) | Документация Майкрософт
author: StephenWalther
description: В этом руководстве Стивен Вальтер демонстрирует, как можно управлять тем, как запросы браузера сопоставляют маршруты, создавая ограничения маршрута с помощью регулярных выражений.
ms.author: riande
ms.date: 02/16/2009
ms.assetid: 0bfd06b1-12d3-4fbb-9779-a82e5eb7fe7d
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/creating-a-route-constraint-cs
msc.type: authoredcontent
ms.openlocfilehash: 51ef859287b3424faf85f4a3606a220ab48a9466
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78470166"
---
# <a name="creating-a-route-constraint-c"></a>Создание ограничения маршрута (C#)

по [Стивен Вальтер](https://github.com/StephenWalther)

> В этом руководстве Стивен Вальтер демонстрирует, как можно управлять тем, как запросы браузера сопоставляют маршруты, создавая ограничения маршрута с помощью регулярных выражений.

Ограничения маршрута используются для ограничения запросов обозревателя, соответствующих определенному маршруту. Для указания ограничения маршрута можно использовать регулярное выражение.

Например, предположим, что вы определили маршрут в листинге 1 в файле Global. asax.

**Листинг 1. Global.asax.cs**

[!code-csharp[Main](creating-a-route-constraint-cs/samples/sample1.cs)]

В листинге 1 содержится маршрут с именем Product. Вы можете использовать маршрут продукта, чтобы сопоставлять запросы браузера с Продуктконтроллер, содержащимся в листинге 2.

**Листинг 2. Контроллерс\продуктконтроллер.КС**

[!code-csharp[Main](creating-a-route-constraint-cs/samples/sample2.cs)]

Обратите внимание, что действие Details (), предоставляемое контроллером продукта, принимает один параметр с именем productId. Этот параметр является целочисленным параметром.

Маршрут, определенный в листинге 1, будет соответствовать любому из следующих URL-адресов:

- /Product/23
- /Product/7

К сожалению, маршрут также будет соответствовать следующим URL-адресам:

- /продукт/блах
- /продукт/аппле

Так как действие Details () принимает целочисленный параметр, запрос, содержащий нечто, отличное от целочисленного значения, вызовет ошибку. Например, если ввести URL-адрес/продукт/Аппле в браузере, вы получите страницу ошибки на рис. 1.

[![диалоговом окне «Создание проекта»](creating-a-route-constraint-cs/_static/image1.jpg)](creating-a-route-constraint-cs/_static/image1.png)

**Рис. 01**. Просмотр развернутой страницы ([щелкните, чтобы просмотреть изображение с полным размером](creating-a-route-constraint-cs/_static/image2.png))

Вы действительно хотите использовать только URL-адреса, содержащие правильный целочисленный productId. Ограничение можно использовать при определении маршрута для ограничения URL-адресов, соответствующих маршруту. Измененный маршрут продукта в листинге 3 содержит ограничение регулярного выражения, которое соответствует только целым числам.

**Листинг 3. Global.asax.cs**

[!code-csharp[Main](creating-a-route-constraint-cs/samples/sample3.cs)]

Регулярное выражение \d + соответствует одному или нескольким целым числам. Это ограничение приводит к тому, что маршрут продукта будет соответствовать следующим URL-адресам:

- /Product/3
- /Product/8999

Но не следующие URL-адреса:

- /продукт/аппле
- /Product

- Эти запросы браузера будут обрабатываться другим маршрутом или, если соответствующие маршруты отсутствуют, будет возвращено сообщение об ошибке *"ресурс не найден"* .

> [!div class="step-by-step"]
> [Назад](creating-custom-routes-cs.md)
> [Вперед](creating-a-custom-route-constraint-cs.md)
