---
uid: mvc/overview/older-versions-1/controllers-and-routing/creating-custom-routes-cs
title: Создание настраиваемых маршрутовC#() | Документация Майкрософт
author: microsoft
description: Узнайте, как добавить пользовательские маршруты в приложение ASP.NET MVC. В этом руководстве вы узнаете, как изменить таблицу маршрутов по умолчанию в файле Global. asax.
ms.author: riande
ms.date: 02/16/2009
ms.assetid: 3cd08f02-8763-490a-b625-2ac96a24b73f
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/creating-custom-routes-cs
msc.type: authoredcontent
ms.openlocfilehash: 58f72e390f0053d136ef00ddbda0b071ba225d98
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78486726"
---
# <a name="creating-custom-routes-c"></a>Создание пользовательских маршрутов (C#)

по [Майкрософт](https://github.com/microsoft)

> Узнайте, как добавить пользовательские маршруты в приложение ASP.NET MVC. В этом руководстве вы узнаете, как изменить таблицу маршрутов по умолчанию в файле Global. asax.

В этом руководстве вы узнаете, как добавить настраиваемый маршрут в приложение ASP.NET MVC. Вы узнаете, как изменить таблицу маршрутов по умолчанию в файле Global. asax с помощью настраиваемого маршрута.

Для многих простых ASP.NET приложений MVC Таблица маршрутов по умолчанию будет работать прекрасно. Однако вы можете обнаружить, что у вас есть специализированные потребности в маршрутизации. В этом случае можно создать настраиваемый маршрут.

Представьте, например, что вы создаете приложение блога. Может потребоваться обрабатывать входящие запросы, которые выглядят следующим образом:

/Archive/12-25-2009

Когда пользователь вводит этот запрос, необходимо вернуть запись в блоге, соответствующую дате 12/25/2009. Чтобы обрабатывался этот тип запроса, необходимо создать настраиваемый маршрут.

Файл Global. asax в листинге 1 содержит новый настраиваемый маршрут с именем Blog, который обрабатывает запросы, которые выглядят как*Дата записи*/арчиве/.

**Листинг 1-Global. asax (с настраиваемым маршрутом)**

[!code-csharp[Main](creating-custom-routes-cs/samples/sample1.cs)]

Порядок маршрутов, добавляемых в таблицу маршрутов, важен. Новый пользовательский маршрут блога добавляется перед существующим маршрутом по умолчанию. Если вы меняете порядок, то маршрут по умолчанию всегда будет вызываться вместо настраиваемого маршрута.

Пользовательский маршрут блога соответствует любому запросу, который начинается с/Арчиве/. Таким образом, он будет соответствовать всем следующим URL-адресам:

- /Archive/12-25-2009

- /Archive/10-6-2004

- /арчиве/аппле

Пользовательский маршрут сопоставляет входящий запрос с контроллером с именем Archive и вызывает действие Entry (). При вызове метода Entry () Дата записи передается как параметр с именем Ентридате.

Вы можете использовать настраиваемый маршрут блога с контроллером в листинге 2.

**Листинг 2. ArchiveController.cs**

[!code-csharp[Main](creating-custom-routes-cs/samples/sample2.cs)]

Обратите внимание, что метод Entry () в листинге 2 принимает параметр типа DateTime. Платформа MVC достаточно интеллектуальна для того, чтобы автоматически преобразовать дату записи из URL-адреса в значение DateTime. Если параметр даты записи из URL-адреса не может быть преобразован в тип DateTime, возникает ошибка (см. рис. 1).

**Рис. 1. Ошибка преобразования параметра**

[![диалоговом окне «Создание проекта»](creating-custom-routes-cs/_static/image1.jpg)](creating-custom-routes-cs/_static/image1.png)

**Рис. 01**. Ошибка при преобразовании параметра ([щелкните, чтобы просмотреть изображение с полным размером](creating-custom-routes-cs/_static/image2.png))

## <a name="summary"></a>Сводка

Цель этого учебника — продемонстрировать, как можно создать настраиваемый маршрут. Вы узнали, как добавить настраиваемый маршрут в таблицу маршрутов в файле Global. asax, который представляет записи блога. Мы обсуждали, как сопоставлять запросы для записей блога с контроллером с именем Арчивеконтроллер и действием контроллера с именем Entry ().

> [!div class="step-by-step"]
> [Назад](aspnet-mvc-controllers-overview-cs.md)
> [Вперед](creating-a-route-constraint-cs.md)
