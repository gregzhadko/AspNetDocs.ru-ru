---
uid: mvc/overview/older-versions-1/controllers-and-routing/asp-net-mvc-routing-overview-cs
title: Общие сведения о маршрутизации ASP.NETC#MVC () | Документация Майкрософт
author: StephenWalther
description: В этом руководстве Стивен Вальтер показывает, как платформа ASP.NET MVC сопоставляет запросы браузера с действиями контроллера.
ms.author: riande
ms.date: 08/19/2008
ms.assetid: 5b39d2d5-4bf9-4d04-94c7-81b84dfeeb31
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/asp-net-mvc-routing-overview-cs
msc.type: authoredcontent
ms.openlocfilehash: 5e1155ca676e7a25b5bfc63e251c6387a010eb34
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437706"
---
# <a name="aspnet-mvc-routing-overview-c"></a>Общие сведения о маршрутизации в ASP.NET MVC (C#)

по [Стивен Вальтер](https://github.com/StephenWalther)

> В этом руководстве Стивен Вальтер показывает, как платформа ASP.NET MVC сопоставляет запросы браузера с действиями контроллера.

В этом учебнике вы предоставили важную возможность для каждого приложения ASP.NET MVC, именуемого *маршрутизацией ASP.NET*. Модуль маршрутизации ASP.NET отвечает за сопоставление входящих запросов браузера определенным действиям контроллера MVC. По завершении работы с этим руководством вы узнаете, как стандартная таблица маршрутов сопоставляет запросы действиям контроллера.

## <a name="using-the-default-route-table"></a>Использование таблицы маршрутов по умолчанию

При создании нового приложения ASP.NET MVC приложение уже настроено для использования маршрутизации ASP.NET. Маршрутизация ASP.NET выполняется в двух местах.

Сначала в файле веб-конфигурации приложения (файл Web. config) включена маршрутизация ASP.NET. В файле конфигурации есть четыре раздела, относящиеся к маршрутизации: раздел System. Web. httpModules, раздел System. Web. httpHandlers, раздел System. веб Server. modules и System. веб Server. обработчики. Будьте внимательны и не удаляйте эти разделы, так как в этом случае маршрутизация больше не будет работать.

Во-вторых, и, что более важно, таблица маршрутов создается в файле Global. asax приложения. Файл Global. asax — это специальный файл, содержащий обработчики событий для событий жизненного цикла приложения ASP.NET. Таблица маршрутов создается во время события запуска приложения.

Файл в листинге 1 содержит файл Global. asax по умолчанию для приложения ASP.NET MVC.

**Листинг 1. Global.asax.cs**

[!code-csharp[Main](asp-net-mvc-routing-overview-cs/samples/sample1.cs)]

При первом запуске приложения MVC вызывается метод Application\_Start (). Этот метод, в свою очередь, вызывает метод Регистерраутес (). Метод Регистерраутес () создает таблицу маршрутов.

Таблица маршрутов по умолчанию содержит один маршрут (с именем по умолчанию). Маршрут по умолчанию сопоставляет первый сегмент URL-адреса с именем контроллера, второй сегмент URL-адреса действия контроллера и третий сегмент с именем параметра **ID**.

Представьте, что в адресную строку браузера введен следующий URL-адрес:

/Home/Index/3

Маршрут по умолчанию сопоставляет этот URL-адрес со следующими параметрами:

- контроллер = Главная

- действие = индекс

- ИД = 3

При запросе URL-адреса/Home/Index/3 выполняется следующий код:

HomeController. индекс (3)

Маршрут по умолчанию включает значения по умолчанию для всех трех параметров. Если контроллер не указан, параметр контроллера по умолчанию имеет значение **Home**. Если действие не указано, для параметра Action по умолчанию используется значение **index**. Наконец, если идентификатор не указан, параметр ID по умолчанию имеет пустую строку.

Рассмотрим несколько примеров того, как маршрут по умолчанию сопоставляет URL-адреса действиям контроллера. Представьте, что в адресную строку браузера введен следующий URL-адрес:

/Home

По умолчанию при вводе этого URL-адреса вызывается метод Index () класса HomeController в листинге 2.

**Листинг 2. HomeController.cs**

[!code-csharp[Main](asp-net-mvc-routing-overview-cs/samples/sample2.cs)]

В листинге 2 класс HomeController включает метод с именем index (), который принимает один параметр с именем ID. /Home URL вызывает вызов метода index () с пустой строкой в качестве значения параметра ID.

Поскольку платформа MVC вызывает действия контроллера, URL-адрес/Home также соответствует методу index () класса HomeController в листинге 3.

**Листинг 3 — HomeController.cs (действие с индексом без параметра)**

[!code-csharp[Main](asp-net-mvc-routing-overview-cs/samples/sample3.cs)]

Метод Index () в листинге 3 не принимает никаких параметров. URL-адрес/Home приведет к вызову этого метода index (). URL-адрес/Home/Index/3 также вызывает этот метод (идентификатор игнорируется).

URL-адрес/Home также соответствует методу index () класса HomeController в листинге 4.

**Листинг 4 — HomeController.cs (действие индекса с параметром, допускающим значение null)**

[!code-csharp[Main](asp-net-mvc-routing-overview-cs/samples/sample4.cs)]

В листинге 4 метод Index () имеет один целочисленный параметр. Поскольку параметр является параметром, допускающим значения NULL (может иметь значение null), индекс () может быть вызван без возникновения ошибки.

Наконец, вызов метода index () в листинге 5 с URL-адресом/Home вызывает исключение, так как параметр ID *не* является параметром, допускающим значение null. При попытке вызвать метод Index () появится сообщение об ошибке, показанное на рис. 1.

**Листинг 5 — HomeController.cs (действие индекса с параметром ID)**

[!code-csharp[Main](asp-net-mvc-routing-overview-cs/samples/sample5.cs)]

[![вызова действия контроллера, ожидающего значения параметра](asp-net-mvc-routing-overview-cs/_static/image1.jpg)](asp-net-mvc-routing-overview-cs/_static/image1.png)

**Рис. 01**. вызов действия контроллера, ожидающего значения параметра ([щелкните, чтобы просмотреть изображение с полным размером](asp-net-mvc-routing-overview-cs/_static/image2.png))

URL-адрес/Home/Index/3, с другой стороны, работает точно так же, как и действие контроллера индекса в листинге 5. /Home/Index/3 запроса вызывает метод Index () с параметром ID, имеющим значение 3.

## <a name="summary"></a>Сводка

Цель этого учебника — предоставить краткое введение в маршрутизацию ASP.NET. Мы рассматривали таблицу маршрутов по умолчанию, полученную с помощью нового приложения MVC ASP.NET. Вы узнали, как маршрут по умолчанию сопоставляет URL-адреса действиям контроллера.

> [!div class="step-by-step"]
> [Дальше](understanding-action-filters-cs.md)
