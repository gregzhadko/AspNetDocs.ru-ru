---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-controller
title: Добавление контроллера | Документация Майкрософт
author: Rick-Anderson
description: Примечание. Обновленную версию этого учебника доступен здесь, использующий ASP.NET MVC 5 и Visual Studio 2013. Это более безопасное и гораздо проще выполнить и демонстрационных версий...
ms.author: riande
ms.date: 08/28/2012
ms.assetid: 0267d31c-892f-49a1-9e7a-3ae8cc12b2ca
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-controller
msc.type: authoredcontent
ms.openlocfilehash: d1cd01e924dc8e13b22b736ada490a3507e730f5
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59405837"
---
# <a name="adding-a-controller"></a>Добавление контроллера

по [Рик Андерсон]((https://twitter.com/RickAndMSFT))

> > [!NOTE]
> > Обновленную версию этого учебника доступен [здесь](../../getting-started/introduction/getting-started.md) , использующий ASP.NET MVC 5 и Visual Studio 2013. Она более безопасные, гораздо проще следовать и показаны дополнительные возможности.


MVC означает *model-view-controller*. MVC — это шаблон для разработки приложений, которые хорошо продуманной архитектурой, пригодного для тестирования и простые в обслуживании. Приложения на основе MVC содержат:

- **M** odels: Классы, представляющие данные приложения и используют логику проверки для реализации бизнес-правил к этим данным.
- **V** редставления: Файлы шаблонов, которые приложение использует для динамического создания HTML-ответов.
- **C** ontrollers: Классы, которые обрабатывают входящие запросы браузера, извлекают данные модели, а затем укажите шаблоны представлений, которые возвращают ответ в браузере.

Мы будет обсуждаться в этой серии руководств, все эти концепции и показать, как их использовать для создания приложения.

Начнем с создания класса контроллера. В **обозревателе решений**, щелкните правой кнопкой мыши *контроллеров* папку, а затем выберите **Добавление контроллера**.

![](adding-a-controller/_static/image1.png)

Назовите новый контроллер &quot;HelloWorldController&quot;. Оставьте как шаблон по умолчанию **пустой контроллер MVC** и нажмите кнопку **добавить**.

![Добавление контроллера](adding-a-controller/_static/image2.png)

Обратите внимание, что в **обозревателе решений** что новый файл был создан именованный *HelloWorldController.cs*. Файл открыт в интегрированной среде разработки.

![](adding-a-controller/_static/image3.png)

Замените содержимое файла следующим кодом.

[!code-csharp[Main](adding-a-controller/samples/sample1.cs)]

Методы контроллера будет возвращена строка HTML, в качестве примера. Контроллер называется `HelloWorldController` и первый способ называется `Index`. Давайте вызвать его из браузера. Запустите приложение (нажмите клавишу F5 или Ctrl + F5). В браузере, добавьте &quot;HelloWorld&quot; к пути в адресной строке. (Например, на рисунке ниже, его `http://localhost:1234/HelloWorld.`) страница в браузере будет выглядеть как на следующем снимке экрана. В методе выше код вернул строку непосредственно. Вы сказали, что система должна возвращать только некоторые HTML, как и!

![](adding-a-controller/_static/image4.png)

ASP.NET MVC вызывает классы другой контроллер (и различных методов действий в них), в зависимости от входящего URL-адреса. Логику маршрутизации URL-адрес по умолчанию используется ASP.NET MVC использует формат следующим образом, чтобы определить, какой код для вызова:

`/[Controller]/[ActionName]/[Parameters]`

Первая часть URL-адреса определяет класс контроллера для выполнения. Поэтому */HelloWorld* сопоставляется `HelloWorldController` класса. Вторая часть URL-адреса определяет метод действия к классу для выполнения. Поэтому */HelloWorld/индекс* вызовет `Index` метод `HelloWorldController` класс для выполнения. Обратите внимание, что нам пришлось перейдите к */HelloWorld* и `Index` метод использовался по умолчанию. Это обусловлено тем, метод с именем `Index` является методом по умолчанию, который будет вызываться на контроллере, если тип не задан явным образом.

Перейдите по адресу `http://localhost:xxxx/HelloWorld/Welcome`. `Welcome` Метод запускается и возвращает строку &quot;метод приветствия действие... &quot;. MVC по умолчанию осуществляется сопоставление `/[Controller]/[ActionName]/[Parameters]`. Для этого URL-адреса заданы контроллер `HelloWorld` и метод действия `Welcome`. Часть URL-адреса `[Parameters]` на данный момент еще не использовалась.

![](adding-a-controller/_static/image5.png)

Давайте немного изменить приведенный пример, чтобы передать сведения о параметрах из URL-адрес в контроллер (например, */HelloWorld/Welcome? имя = Скотт&amp;; numtimes = = 4*). Изменение вашего `Welcome` метод включив два параметра, как показано ниже. Обратите внимание, что код использует функцию необязательного параметра C#, чтобы указать, что `numTimes` параметр должен по умолчанию 1, если не передаются значения для этого параметра.

[!code-csharp[Main](adding-a-controller/samples/sample2.cs)]

Запустите приложение и перейдите к пример URL-адреса (`http://localhost:xxxx/HelloWorld/Welcome?name=Scott&numtimes=4)`. Вы можете попробовать различные значения `name` и `numtimes` в URL-адресе. [Система привязки модели ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) автоматически сопоставляет именованные параметры из строки запроса в адресной строке параметров метода.

![](adding-a-controller/_static/image6.png)

В обоих этих примерах контроллер предоставляет &quot;VC&quot; модели MVC — то есть работу представления и контроллера. Контроллер возвращает HTML напрямую. Обычно это не требуется Возвращает HTML напрямую, поскольку в этом случае заметно усложняется написание кода. Вместо этого мы обычно используем файл шаблона отдельное представление для создания HTML-ответа. Давайте взглянем далее в том, как это можно сделать.

> [!div class="step-by-step"]
> [Назад](intro-to-aspnet-mvc-4.md)
> [Вперед](adding-a-view.md)
