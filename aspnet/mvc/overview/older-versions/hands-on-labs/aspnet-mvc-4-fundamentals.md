---
uid: mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-fundamentals
title: Основы ASP.NET MVC 4 | Документация Майкрософт
author: rick-anderson
description: Этот практический семинар основан на MVC (Model View Controller) Music Store, учебного приложения, которые вводятся и описываются способы использования ASP.NET MV пошаговые...
ms.author: riande
ms.date: 02/18/2013
ms.assetid: b7dba543-73c3-4534-a9a0-ba70fa2c6a8a
msc.legacyurl: /mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-fundamentals
msc.type: authoredcontent
ms.openlocfilehash: d8e837a5d56871d271590859c2e82336111cc87a
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57029411"
---
# <a name="aspnet-mvc-4-fundamentals"></a>Основы ASP.NET MVC 4

по [Web Слышатся Team](https://twitter.com/webcamps)

[Скачайте комплект учебных материалов по лагеря Web](https://aka.ms/webcamps-training-kit)

Это Практическое лабораторное занятие основано на MVC (Model View Controller) Music Store, учебного приложения, которое вводятся и описываются пошаговые как использовать ASP.NET MVC и Visual Studio. В лаборатории. Вы узнаете, простоты еще питания друг с другом с помощью этих технологий. Начнем с простого приложения и будет постройте его, пока у вас есть полнофункциональное приложение ASP.NET MVC 4 Web.

Это лабораторное занятие работает с ASP.NET MVC 4.

Если вы хотите просмотреть версии ASP.NET MVC 3 учебного приложения, его можно найти в [MVC-музыка-Store](https://github.com/evilDave/MVC-Music-Store).

Это Практическое лабораторное занятие предполагает, что разработчик имеет опыт работы в веб-технологии разработки, таких как HTML и JavaScript.

> [!NOTE]
> Все примеры кода и фрагменты кода включены в Web лагеря комплект обучающих материалов, доступных в [выпуски Microsoft Web/WebCampTrainingKit](https://aka.ms/webcamps-training-kit). Проект, относящиеся к этой лаборатории доступен в [ASP.NET MVC 4 Fundamentals](https://github.com/Microsoft-Web/HOL-MVC4Fundamentals).

<a id="The_Music_Store_application"></a>
### <a name="the-music-store-application"></a>Приложение Music Store

Веб-приложение Music Store, который будет построен на протяжении всего этого лабораторного состоит из трех основных частей: покупок, извлечения и администрирования. Посетители смогут Обзор альбомов по жанру, добавьте альбомов в корзину, просмотрите свой выбор и наконец перейдите к извлечение, чтобы войти в систему и завершить создание заказа. Кроме того Администраторы хранилища будут иметь возможность управлять доступных альбомов, а также их основные свойства.

![Экраны Music Store](aspnet-mvc-4-fundamentals/_static/image1.png "экраны Music Store")

*Экраны Music Store*

<a id="ASPNET_MVC_4_Essentials"></a>
### <a name="aspnet-mvc-4-essentials"></a>Основы ASP.NET MVC 4

Приложение Music Store будет создано с помощью **Model View Controller (MVC)**, архитектурный шаблон, который разделяет приложение на три основных компонента:

- **Модели**: Объекты моделей являются частями приложения, реализующими доменную логику. Часто объекты модели также получить и сохраняют состояние модели в базе данных.
- **Представления:** Представления служат для отображения приложения пользовательского интерфейса (UI). Как правило этот пользовательский Интерфейс создается на основе модели данных. Примером может служить представление редактирования альбомов, содержит текстовые поля и стрелку раскрывающегося списка, на основании текущего состояния объекта альбома.
- **Контроллеры:** Контроллеры — это компоненты, которые управления взаимодействием с пользователем, управлять модели и выбора представления для отображения пользовательского интерфейса. В приложении MVC представление служит только для отображения информации. Обработку введенных данных, формирование ответа и взаимодействие с пользователем обеспечивает контроллер.

Шаблон MVC позволяет создавать приложения, различные аспекты приложения (логика ввода, бизнес-логика и логика пользовательского интерфейса), при этом слабые взаимозависимости между этими элементами. Это разделение позволяет справляться с трудностями при создании приложения, так как это позволяет вам сосредоточиться на один из аспектов реализации за раз. Кроме того шаблон MVC позволяет легко тестировать приложения, также поощряя к использованию разработки через тестирование (TDD) для создания приложений.

**ASP.NET MVC** framework представляет собой альтернативу шаблону веб-форм ASP.NET для создания приложений веб-узла ASP.NET MVC. **ASP.NET MVC** framework — это платформа представления легковесной, (как и в случае с приложениями, веб форм) интегрируется с существующими функциями ASP.NET, такие как главные страницы и на основе членства Проверка подлинности, чтобы получить все возможности платформы .NET core. Это полезно, если вы уже знакомы с веб-форм ASP.NET, так как все библиотеки, которые уже используют в ASP.NET MVC 4, также доступны.

Кроме того слабой связи между три основных компонента приложения MVC также облегчает параллельную разработку. К примеру один разработчик может создавать представление, второй разработчик может работать на логике контроллера и третий разработчик может сосредоточиться на бизнес-логику в модели.

<a id="Objectives"></a>

<a id="Objectives"></a>
### <a name="objectives"></a>Цели

В этом Практическое лабораторное занятие, вы узнаете, как:

- Создание приложения ASP.NET MVC с нуля, в зависимости от руководства по этому приложению Music Store
- Добавление контроллеров для обработки URL-адреса на домашнюю страницу сайта, а также для просмотра его главные функциональные возможности
- Добавление представления для настройки содержимого, отображаемого вместе с его стиль
- Добавление классов модели для хранения и управления логику данных и домена
- Используйте шаблон View Model для передачи данных из действий контроллера в представление шаблоны
- Изучите новый шаблон ASP.NET MVC 4 для Интернет-приложений

<a id="Prerequisites"></a>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a>Предварительные требования

Необходимо иметь следующие элементы во укомплектовать данную лабораторию:

- [Visual Studio Express 2012 для Web](https://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web) (чтение [приложение А](#AppendixA) инструкции по его установке)

<a id="Setup"></a>

<a id="Setup"></a>
### <a name="setup"></a>Установка

**Установка фрагменты кода**

Для удобства большая часть кода, который вы планируете управлять вдоль этой лаборатории доступен как фрагменты кода Visual Studio. Чтобы установить фрагменты кода запуска **.\Source\Setup\CodeSnippets.vsi** файла.

Если вы не знакомы с фрагменты кода Visual Studio и хотите научиться использовать их, можно ссылаться в приложение из этого документа &quot; [приложение в: Фрагменты кода](#AppendixC)&quot;.

<a id="Exercises"></a>

<a id="Exercises"></a>
## <a name="exercises"></a>Упражнения

Это Практическое лабораторное занятие включает по следующие упражнения:

1. [Упражнение 1. Создание проекта веб-приложения MusicStore ASP.NET MVC](#Exercise1)
2. [Упражнение 2. Создание контроллера](#Exercise2)
3. [Упражнение 3. Передача параметров к контроллеру](#Exercise3)
4. [Упражнение 4. Создание представления](#Exercise4)
5. [Упражнение 5. Создание модели представления](#Exercise5)
6. [Упражнение 6. В представлении с помощью параметров](#Exercise6)
7. [Упражнение 7. Беглый обзор новых шаблона ASP.NET MVC 4](#Exercise7)

> [!NOTE]
> Каждого упражнения сопровождается **окончания** папку, содержащую полученное решение, должен быть получен после завершения упражнения. Это решение можно использовать как руководство, если вам нужна дополнительная помощь при работе с примерами.


Предполагаемое время для выполнения этого лабораторного: **60 минут**.

<a id="Exercise1"></a>

<a id="Exercise_1_Creating_MusicStore_ASPNET_MVC_Web_Application_Project"></a>
### <a name="exercise-1-creating-musicstore-aspnet-mvc-web-application-project"></a>Упражнение 1. Создание проекта веб-приложения MusicStore ASP.NET MVC

В этом упражнении вы узнаете, как создать приложение ASP.NET MVC в Visual Studio 2012 Express для Web, а также их организация в главную папку. Кроме того вы узнаете, как добавить новый контроллер и сделать его отобразить простую строку на домашней странице приложения.

<a id="Ex1Task1"></a>

<a id="Task_1_-_Creating_the_ASPNET_MVC_Web_Application_Project"></a>
#### <a name="task-1---creating-the-aspnet-mvc-web-application-project"></a>Задача 1 - Создание проекта веб-приложения ASP.NET MVC

1. В этой задаче вы создадите пустого проекта приложения ASP.NET MVC с помощью шаблона MVC Visual Studio. Запуск **VS Express для Web**.
2. В меню **Файл** выберите пункт **Создать проект**.
3. В **новый проект** диалогового окна выберите **веб-приложение ASP.NET MVC 4** тип, расположенный в разделе проекта **Visual C#,** **Web** шаблона список.
4. Изменение **имя** для *MvcMusicStore*.
5. Задайте расположение решения в новое **начать** папку в папке-источнике в этом упражнении, например **\Source\Ex01-CreatingMusicStoreProject\Begin [YOUR-ХОЛЬ-PATH]**. Нажмите кнопку **ОК**.

    ![Создание диалогового окна "новый проект"](aspnet-mvc-4-fundamentals/_static/image2.png "создать диалоговое окно \"новый проект\"")

    *Создание диалогового окна "новый проект"*
6. В **создания проекта ASP.NET MVC 4** диалогового окна выберите **основные** шаблона и убедитесь, что **обработчик представлений** выбрано **Razor**. Нажмите кнопку **ОК**.

    ![Диалоговое окно "новый проект ASP.NET MVC 4"](aspnet-mvc-4-fundamentals/_static/image3.png "диалоговое окно \"новый проект ASP.NET MVC 4\"")

    *Диалоговое окно "новый проект ASP.NET MVC 4"*

<a id="Ex1Task2"></a>

<a id="Task_2_-_Exploring_the_Solution_Structure"></a>
#### <a name="task-2---exploring-the-solution-structure"></a>Задача 2 - изучение структуры решения

Платформа ASP.NET MVC включает в себя шаблон проекта Visual Studio, который поможет вам создать веб-приложений, которые поддерживают шаблон MVC. Этот шаблон создает новое приложение веб-ASP.NET MVC с необходимые папки, шаблоны элементов и записи файла конфигурации.

В этой задаче вы исследуете структуру решения, чтобы понять, элементы, которые участвуют и их связи. Поскольку платформа ASP.NET MVC по умолчанию использует следующие папки включаются в все приложения ASP.NET MVC &quot;соглашение относительно настройки&quot; подход и делает некоторые предположения по умолчанию зависимости от папки именования соглашения.

1. После создания проекта Просмотрите структуру папок, которая будет создана в обозревателе решений правой стороны:

    ![Структура папки MVC ASP.NET в обозревателе решений](aspnet-mvc-4-fundamentals/_static/image4.png "структура папки MVC ASP.NET в обозревателе решений")

    *Структура папки MVC ASP.NET в обозревателе решений*

   1. **Контроллеры**. Эта папка будет содержать классы контроллера. В приложении на базе MVC контроллеры отвечают за обработку взаимодействия с конечным пользователем, работы с моделью и в конечном счете Выбор представления для отображения пользовательского интерфейса.

       > [!NOTE]
       > MVC требует имена всех контроллеров с присвоением &quot;контроллера&quot;-например, HomeController, LoginController или ProductController.
   2. **Модели**. Эта папка предоставляется для классов, которые представляют модель приложения для веб-приложения MVC. Это обычно содержит код, который определяет объекты и логику для взаимодействия с хранилищем данных. Как правило сами объекты модели будет в отдельных библиотеках классов. Тем не менее при создании нового приложения, может включить классы и переместить их в отдельные библиотеки на более позднем этапе цикла разработки.
   3. **Представления**. Эта папка — рекомендуемое расположение для представлений, компоненты, ответственные за отображение пользовательского интерфейса приложения. Представления используют файлы .aspx, .ascx, cshtml и .master, помимо других файлов, которые связаны с отображением представлений. Папка Views содержит папки для каждого контроллера; папка называется с префиксом имени контроллера. Например, если у вас есть контроллер с именем **HomeController**, папку Views будет содержать папку с именем Home. По умолчанию при загрузке представления платформой ASP.NET MVC выполняется поиск ASPX-файл с именем требуемого представления в папке Views\controllerName (**представлений [Имя_контроллера] [действие] .aspx**) или (**представлений [Имя_контроллера] [Действие] .cshtml**) для представлений Razor.

      > [!NOTE]
      > В дополнение к перечисленным выше папкам веб-приложение MVC использует **Global.asax** файла для установки глобальной маршрутизации URL-адрес по умолчанию и использует **Web.config** файл для настройки приложения.

<a id="Ex1Task3"></a>

<a id="Task_3_-_Adding_a_HomeController"></a>
#### <a name="task-3---adding-a-homecontroller"></a>Задача 3 - Добавление HomeController

В приложениях ASP.NET, не использующих платформу MVC взаимодействие с пользователем организована вокруг страниц, а также создания и обработки событий из этих страниц. Напротив взаимодействие пользователей с приложениями ASP.NET MVC основаны на контроллерах и методах их действия.

С другой стороны платформа ASP.NET MVC сопоставляет URL-адреса с классами, называются контроллеров. Контроллеры обрабатывают входящие запросы, вводимые пользователями данные и взаимодействий, реализуют необходимую логику приложений и определения ответа для отправки обратно клиенту (отображения HTML-кода, загрузите файл, перенаправления на другой URL-адрес, и т.п.). В случае отображения HTML, класс контроллера обычно вызывает отдельный компонент представления для создания разметки HTML для запроса. В приложении MVC представление служит только для отображения информации. Обработку введенных данных, формирование ответа и взаимодействие с пользователем обеспечивает контроллер.

В этой задаче вы добавите класс контроллера, который будет обрабатывать URL-адреса на домашнюю страницу сайта Music Store.

1. Щелкните правой кнопкой мыши **контроллеров** папку в обозревателе решений, выберите **добавить** и затем **контроллера** команды:

    ![Добавление команды контроллера](aspnet-mvc-4-fundamentals/_static/image5.png "Добавление команды контроллера")

    *Добавьте команду контроллера*
2. **Добавление контроллера** откроется диалоговое окно. Назовите контроллер *HomeController* и нажмите клавишу **добавить**.

    ![Диалоговое окно добавления контроллера](aspnet-mvc-4-fundamentals/_static/image6.png "диалоговое окно добавления контроллера")

    *Диалоговое окно добавления контроллера*
3. Файл **HomeController.cs** создается в **контроллеров** папки. Чтобы получить **HomeController** возвращают строку на его действие индекса, замените **индекс** метод следующим кодом:

    (Code Snippet - *основы ASP.NET MVC 4 - сервера Ex1 HomeController Index*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample1.cs)]

<a id="Ex1Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4 - запуск приложения

В этой задаче будет опробовать приложение в веб-браузере.

1. Нажмите клавишу **F5** для запуска приложения. Проект будет скомпилирован и запускает локальный веб-сервер IIS. Локальный веб-сервер IIS автоматически откроет в веб-браузере URL-адрес веб-сервера.

    ![Приложения, работающего в веб-браузере](aspnet-mvc-4-fundamentals/_static/image7.png "приложения, работающего в веб-браузере")

    *Приложения, работающего в веб-браузере*

    > [!NOTE]
    > Сайт будет работать в локальном веб-сервере IIS в случайный бесплатный номер порта. В приведенном выше рисунке узел работает в `http://localhost:50103/`, поэтому он использует порт 50103. Ваш номер порта может меняться.
2. Закройте браузер.

<a id="Exercise2"></a>

<a id="Exercise_2_Creating_a_Controller"></a>
### <a name="exercise-2-creating-a-controller"></a>Упражнение 2. Создание контроллера

В этом упражнении вы узнаете, как контроллер для реализации простой функциональности приложение Music Store. Этот контроллер будет определяют методы действий для обработки каждого из следующих определенные запросы:

- Страницы список жанров музыку в Music Store
- Страница обзора, в котором перечислены все музыкальные альбомы для определенного жанра
- Сведения страницы, которая отображает сведения об определенных музыкальных альбомов

В рамках этого упражнения эти действия будут просто возвращают строку к этому моменту.

<a id="Ex2Task1"></a>

<a id="Task_1_-_Adding_a_New_StoreController_Class"></a>
#### <a name="task-1---adding-a-new-storecontroller-class"></a>Задача 1 - Добавление нового класса StoreController

В этой задаче вы добавите новый контроллер.

1. Если это еще не открыто, запустите **VS Express for Web 2012**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта, перейдите к **Source\Ex02 CreatingAController\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
3. Добавите новый контроллер. Чтобы сделать это, щелкните правой кнопкой мыши **контроллеров** папку в обозревателе решений, выберите **добавить** и затем **контроллера** команды. Изменение **имя контроллера** для *StoreController*и нажмите кнопку **добавить**.

    ![Диалоговое окно добавления контроллера](aspnet-mvc-4-fundamentals/_static/image8.png "диалоговое окно добавления контроллера")

    *Диалоговое окно добавления контроллера*

<a id="Ex2Task2"></a>

<a id="Task_2_-_Modifying_the_StoreControllers_Actions"></a>
#### <a name="task-2---modifying-the-storecontrollers-actions"></a>Задача 2 - изменение StoreController действия

В этой задаче вы измените методы контроллера, которые называются **действия**. Операции отвечают за обработку запросов URL-адрес и определения содержимого, которое будет отправляться обратно в браузер или пользователь, вызвавший URL-адрес.

1. **StoreController** класс уже имеет **индекс** метод. Он понадобится позже в этом лабораторном занятии реализация страницы, в которой перечислены все жанры музыкального магазина. Пока просто замените **индекс** метод следующим кодом, которое будет возвращать строку &quot;привет от Store.Index()&quot;:

    (Code Snippet - *основы ASP.NET MVC 4 — индекс StoreController Ex2*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample2.cs)]
2. Добавить **Обзор** и **сведения** методы. Чтобы сделать это, добавьте следующий код, чтобы **StoreController**:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex2 StoreController BrowseAndDetails*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample3.cs)]

<a id="Ex2Task3"></a>

<a id="Task_3_-_Running_the_Application"></a>
#### <a name="task-3---running-the-application"></a>Задача 3 - запуск приложения

В этой задаче будет опробовать приложение в веб-браузере.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Измените URL-адрес для проверки реализации каждого действия.

    1. **/ Store**. Вы увидите  **&quot;привет от Store.Index()&quot;**.
    2. **/ Store/обзора**. Вы увидите  **&quot;привет от Store.Browse()&quot;**.
    3. **/ Store/Details**. Вы увидите  **&quot;привет от Store.Details()&quot;**.

        ![Просмотр StoreBrowse](aspnet-mvc-4-fundamentals/_static/image9.png "просмотра StoreBrowse")

        *Просмотр /Store/Browse*
3. Закройте браузер.

<a id="Exercise3"></a>

<a id="Exercise_3_Passing_parameters_to_a_Controller"></a>
### <a name="exercise-3-passing-parameters-to-a-controller"></a>Упражнение 3. Передача параметров к контроллеру

До сих пор вы возвращение константных строк с контроллеров. В этом упражнении вы узнаете, как передавать параметры к контроллеру, используя URL-адрес и строки запроса, а затем выполнить метод действия отвечает с текстом в браузер.

<a id="Ex3Task1"></a>

<a id="Task_1_-_Adding_Genre_Parameter_to_StoreController"></a>
#### <a name="task-1---adding-genre-parameter-to-storecontroller"></a>Задача 1 - Добавление параметра жанр StoreController

В этой задаче вы воспользуетесь **querystring** для отправки параметров **Обзор** метода действия в **StoreController**.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта, перейдите к **Source\Ex03 PassingParametersToAController\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
3. Откройте **StoreController** класса. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
4. Изменение **Обзор** метод, добавление параметра строки запроса для определенного жанра. ASP.NET MVC будет автоматически передавать любой строки запроса или отправки формы параметра с именами **жанр** этот метод действия, при вызове. Чтобы сделать это, замените **Обзор** метод следующим кодом:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex3 StoreController BrowseMethod*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample4.cs)]

> [!NOTE]
> При использовании **HttpUtility.HtmlEncode** служебный метод, чтобы запрещает включение Javascript в представление со ссылкой как   **/Store/обзора? Жанр =&lt;сценарий&gt;window.location= "[http://hackersite.com](http://hackersite.com)"&lt;/script&gt;**.
> 
> Подробные пояснения см. на [в этой статье msdn](https://msdn.microsoft.com/library/a2a4yykt(v=VS.80).aspx).

<a id="Ex3Task2"></a>

<a id="Task_2_-_Running_the_Application"></a>
#### <a name="task-2---running-the-application"></a>Задача 2 - запуск приложения

В этой задаче будет попробовать приложение в веб-браузер и использовать **жанр** параметра.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес   */Store/Обзор? Жанр = Disco* чтобы убедиться, что действие получает параметр жанра.

    ![Просмотр StoreBrowseGenre = Disco](aspnet-mvc-4-fundamentals/_static/image10.png "просмотра StoreBrowseGenre = Disco")

    *Просмотр /Store/Browse? Жанр = Disco*
3. Закройте браузер.

<a id="Ex3Task3"></a>

<a id="Task_3_-_Adding_an_Id_Parameter_Embedded_in_the_URL"></a>
#### <a name="task-3---adding-an-id-parameter-embedded-in-the-url"></a>Задача 3 - Добавление параметр идентификатора, URL-адрес

В этой задаче вы воспользуетесь **URL-адрес** для передачи **идентификатор** параметр **сведения** метод действия **StoreController**. ASP.NET MVC по умолчанию используется соглашение о маршрутизации обрабатывать сегмента URL-адреса после имени метода действия, как параметр с именем **идентификатор**. Если метод действия имеет параметр с именем Id, затем ASP.NET MVC автоматически передаст сегмент URL-адреса для вас как параметр. В URL-АДРЕСЕ **Store/сведения/5**, **идентификатор** будут интерпретироваться как **5**.

1. Изменение **сведения** метод **StoreController**, добавление **int** параметр с именем **идентификатор**. Чтобы сделать это, замените **сведения** метод следующим кодом:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex3 StoreController DetailsMethod*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample5.cs)]

<a id="Ex3Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4 - запуск приложения

В этой задаче будет попробовать приложение в веб-браузер и использовать **идентификатор** параметра.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес */Store/Details/5* чтобы убедиться, что действие получает параметр id.

    ![Просмотр StoreDetails5](aspnet-mvc-4-fundamentals/_static/image11.png "просмотра StoreDetails5")

    *Просмотр /Store/Details/5*

<a id="Exercise4"></a>

<a id="Exercise_4_Creating_a_View"></a>
### <a name="exercise-4-creating-a-view"></a>Упражнение 4. Создание представления

Пока возврат строк из действий контроллера. Несмотря на то, что это удобный способ Общие сведения о работе контроллеров, это не как создаются реальных веб-приложений. Представления — это компоненты, которые больше подходят для создания HTML в браузер с помощью файлов шаблонов.

В этом упражнении вы узнаете, как добавить главную страницу макета для настройки шаблона для типичного содержимого HTML, таблицу стилей, чтобы улучшить внешний вид сайта "и" шаблон представления, чтобы включить HomeController для возврата HTML.

<a id="Ex4Task1"></a>

<a id="Task_1_-_Modifying_the_file__layoutcshtml"></a>
#### <a name="task-1---modifying-the-file-layoutcshtml"></a>Задача 1 - изменение файла \_layout.cshtml

Файл **~/Views/Shared/\_layout.cshtml** позволяет настроить шаблон для общего HTML для всего веб-сайта. В этой задаче вы добавите Главная страница макета с заголовком распространенных со ссылками в область домашней страницы и Store.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта, перейдите к **Source\Ex04 CreatingAView\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
3. Файл  <strong>\_layout.cshtml</strong> содержит макет контейнера HTML для всех страниц на сайте. Он включает в себя <strong>&lt;html&gt;</strong> элемент для HTML-ответа, а также <strong>&lt;head&gt;</strong> и <strong>&lt;текст&gt;</strong> элементы. <strong>@RenderBody()</strong> в HTML-код тела идентификации регионов этого представления, шаблоны будут иметь возможность заполнить динамического содержимого.
   (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample6.cshtml)]
4. Добавьте общие заголовок со ссылками в область домашней страницы и Store на всех страницах сайта. Для этого добавьте следующий код ниже &lt;текст&gt; инструкции.
   (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample7.cshtml)]
5. Включить div для его отображения текста каждой страницы. Замените  <strong>@RenderBody()</strong> higlighted следующим кодом: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample8.cshtml)]

    > [!NOTE]
    > Знаете ли вы? Visual Studio 2012 появилось фрагменты, которые позволяют легко добавлять часто используемый код в HTML, файлы кода и многое другое! Проверим, введя **&lt;div&gt;** и нажав клавишу **ВКЛАДКЕ** дважды, чтобы вставить полный **div** тега.

<a id="Ex4Task2"></a>

<a id="Task_2_-_Adding_CSS_Stylesheet"></a>
#### <a name="task-2---adding-css-stylesheet"></a>Задача 2 - Добавление таблицы стилей CSS

Шаблон пустого проекта включает в себя очень упрощенный CSS-файл, который просто содержатся стили, используемые для отображения основных форм и проверки сообщений. Вы будете использовать дополнительные CSS и изображений (потенциально в конструкторе), чтобы улучшить внешний вид сайта.

В этой задаче вы добавите таблицу стилей CSS для определения стилей узла.

1. CSS-файл и образов, включенных в **Source\Assets\Content** папку данную лабораторию. Чтобы добавить их в приложение, перетащите их содержимое из **Windows Explorer** в окно **обозревателе решений** в Visual Studio Express для веб-приложений, как показано ниже:

    ![Перетаскивание содержимое стиля](aspnet-mvc-4-fundamentals/_static/image12.png "перетаскивания содержимое стиля")

    *Перетаскивание содержимое стиля*
2. Предупреждение появится диалоговое окно, требующее подтверждения для замены **Site.css** файлов и некоторых существующих образов. Проверьте **применить ко всем элементам** и нажмите кнопку **Да**.

<a id="Ex4Task3"></a>

<a id="Task_3_-_Adding_a_View_Template"></a>
#### <a name="task-3---adding-a-view-template"></a>Задача 3 - Добавление шаблона представления

В этой задаче вы добавите шаблона представления для создания HTML-ответа, который будет использоваться макет главной страницы и добавить CSS в этом упражнении.

1. Для использования шаблона представления, при переходе на домашнюю страницу, сначала необходимо будет указать, что вместо возврата строки, **HomeController Index** метод возвратит **представление**. Откройте **HomeController** класса и измените его **индекс** метод для возврата **ActionResult**, и вернуть его **View()**.

    (Code Snippet - *основы ASP.NET MVC 4 - Ex4 HomeController Index*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample9.cs)]
2. Теперь необходимо добавить соответствующий шаблон представления. Чтобы сделать это, **щелкните правой кнопкой мыши** внутри **индекс** метода действия и выберите **Добавление представления**. Это приведет к появлению **Добавление представления** диалоговое окно.

    ![Добавление представления из в метод Index](aspnet-mvc-4-fundamentals/_static/image13.png "Добавление представления из в метод Index")

    *Добавление представления из в метод Index*
3. **Добавление представления** появится диалоговое окно, чтобы создать файл шаблона представления. По умолчанию это диалоговое окно предварительно заполняет имя шаблона представления, чтобы он соответствовал метод действия, который будет его использовать. Так как вы использовали **Добавление представления** контекстного меню в **индекс** метода действия в HomeController, **Добавление представления** диалоговое окно имеет индекс в качестве имени представления по умолчанию. Нажмите кнопку **Добавить**.

    ![Диалоговое окно добавления представления](aspnet-mvc-4-fundamentals/_static/image14.png "диалоговое окно добавления представления")

    *Диалоговое окно добавления представления*
4. Visual Studio создает **Index.cshtml** шаблон представления внутри **Views\Home** папку, а затем открывает его.

    ![Индекс представление, созданное главной](aspnet-mvc-4-fundamentals/_static/image15.png "Главная индекс представление, созданное")

    *Домашнее представление индекс создан*

    > [!NOTE]
    > имя и расположение **Index.cshtml** файл относится и соответствует об именовании ASP.NET MVC по умолчанию.
    > 
    > Папка \Views\**Главная** соответствует имени контроллера (**Главная** контроллера). Имя шаблона представления (**индекс**), соответствующий метод действия контроллера, который будет применяться для отображения представления.
    > 
    > Таким образом, ASP.NET MVC позволяет избежать необходимости явно указывать имя или расположение шаблона представления при использовании это соглашение об именовании, чтобы вернуть представление.
5. Созданный шаблон представления основана на  **\_layout.cshtml** шаблон, определенный ранее. Обновить свойство ViewBag.Title для **Главная**и изменить основное содержимое для **это домашняя страница**, как показано в следующем коде:

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample10.cshtml)]
6. Выберите **MvcMusicStore** проекта в обозревателе решений и нажмите клавишу **F5** для запуска приложения.

<a id="Ex4Task4"></a>

<a id="Task_4_Verification"></a>
#### <a name="task-4-verification"></a>Задача 4. Проверка

Чтобы проверить, что вы правильно выполнили все действия, описанные в предыдущем упражнении, выполните следующие действия:

Приложение, открытое в браузере следует отметить, что:

1. Метод действия Index HomeController обнаружено и отображено **\Views\Home\Index.cshtml** просмотреть шаблон, в том случае, несмотря на то, что код вызывается **return View()**, так как шаблон представления стандартного соглашения об именовании.
2. Домашняя страница отображает приветственное сообщение, определенные в **\Views\Home\Index.cshtml** шаблона представления.
3. На домашней странице используется  **\_layout.cshtml** шаблона, и поэтому содержится приветственное сообщение в формате HTML стандартный узла.

    ![Домашней представления индекса, используя определенные LayoutPage и стиль](aspnet-mvc-4-fundamentals/_static/image16.png "Главная представления индекса, используя определенные LayoutPage и стиль")

    *Домашнее представление индекса, используя определенные LayoutPage и стиль*

<a id="Exercise5"></a>

<a id="Exercise_5_Creating_a_View_Model"></a>
### <a name="exercise-5-creating-a-view-model"></a>Упражнение 5. Создание модели представления

На данный момент внесенные представлений отображения жестко HTML, но для создания динамических веб-приложений, этот шаблон должен получать сведения из контроллера. Один общий метод, позволяющий использовать для этой цели является **ViewModel** шаблон, который позволяет контроллеру упаковать все сведения, необходимые для создания соответствующих HTML-ответа.

В этом упражнении вы узнаете, как создать класс модели представления и добавить необходимые свойства: число жанров в хранилище и список этих жанров. Требуется обновить StoreController использовать созданный ViewModel, и наконец, вы создадите новый шаблон представления, упомянутые свойства отобразятся на странице.

<a id="Ex5Task1"></a>

<a id="Task_1_-_Creating_a_ViewModel_Class"></a>
#### <a name="task-1---creating-a-viewmodel-class"></a>Задача 1 - Создание класса модели представления

В этой задаче вы создадите класс модели представления, которые реализуют сценарий список жанров Store.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта, перейдите к **Source\Ex05 CreatingAViewModel\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
3. Создание **ViewModels** папку для хранения ViewModel. Чтобы сделать это, щелкните правой кнопкой мыши верхнего уровня **MvcMusicStore** проекта, выберите **добавить** и затем **новую папку**.

    ![Добавления новой папки](aspnet-mvc-4-fundamentals/_static/image17.png "добавления новой папки")

    *Добавление новой папки*
4. Назовите папку *ViewModels*.

    ![ViewModels папку в обозревателе решений](aspnet-mvc-4-fundamentals/_static/image18.png "ViewModels папку в обозревателе решений")

    *ViewModels папку в обозревателе решений*
5. Создание **ViewModel** класса. Чтобы сделать это, щелкните правой кнопкой мыши **ViewModels** недавно созданные папки выберите **добавить** и затем **новый элемент**. В разделе **кода**, выберите **класс** элемента и назовите файл *StoreIndexViewModel.cs*, затем нажмите кнопку **добавить**.

    ![Добавление нового класса](aspnet-mvc-4-fundamentals/_static/image19.png "добавив новый класс")

    *Добавление нового класса*

    ![Создание класса StoreIndexViewModel](aspnet-mvc-4-fundamentals/_static/image20.png "StoreIndexViewModel создание класса")

    *Создание класса StoreIndexViewModel*

<a id="Ex5Task2"></a>

<a id="Task_2_-_Adding_Properties_to_the_ViewModel_class"></a>
#### <a name="task-2---adding-properties-to-the-viewmodel-class"></a>Задача 2 - Добавление свойств в классе модели представления

Есть два параметра, передаваемые из StoreController этот шаблон для формирования ожидаемого времени ответа HTML: число жанров в хранилище и список этих жанров.

В этой задаче вы добавите эти 2 свойства **StoreIndexViewModel** класса: **NumberOfGenres** (целое число) и **жанров** (список строк).

1. Добавить **NumberOfGenres** и **жанров** свойства **StoreIndexViewModel** класса. Чтобы сделать это, добавьте следующие строки 2 в определение класса:

    (Code Snippet - *основы 4 MVC для ASP.NET - свойства Ex5 StoreIndexViewModel*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample11.cs)]

> [!NOTE]
> **{Get; set;}**  нотации использует C# автоматически реализуемые свойства компонента. Он предоставляет преимущества свойства без необходимости нам для объявления резервным полем.

<a id="Ex5Task3"></a>

<a id="Task_3_-_Updating_StoreController_to_use_the_StoreIndexViewModel"></a>
#### <a name="task-3---updating-storecontroller-to-use-the-storeindexviewmodel"></a>Задача 3 - обновление StoreController использовать StoreIndexViewModel

**StoreIndexViewModel** класс инкапсулирует сведения, необходимые для передачи из **StoreController** **индекс** метод для шаблона представления для создания ответа .

В этой задаче вы обновите **StoreController** использовать **StoreIndexViewModel**.

1. Откройте **StoreController** класса.

    ![Открыв класс StoreController](aspnet-mvc-4-fundamentals/_static/image21.png "StoreController открывающей класса")

    *Класс StoreController открытия*
2. Чтобы использовать **StoreIndexViewModel** класса из **StoreController**, добавьте следующее пространство имен в верхней части **StoreController** кода:

    (Code Snippet - *основы 4 MVC для ASP.NET — использование ViewModel StoreIndexViewModel Ex5*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample12.cs)]
3. Изменение **StoreController** **индекс** метода действия, так что он создает и заполняет **StoreIndexViewModel** и затем передает его шаблону представления для Создание HTML-ответа с ним.

    > [!NOTE]
    > В лаборатории &quot;модели MVC ASP.NET и доступа к данным&quot; вы напишете код, извлекающий список жанров магазина из базы данных. В следующем коде создается **списка** жанров фиктивных данных, который будет заполнять **StoreIndexViewModel**.
    > 
    > После создания и настройки **StoreIndexViewModel** объекта, он будет передан в качестве аргумента для **представление** метод. Это означает, что этот шаблон будет использоваться этот объект для создания HTML-ответа с ним.
4. Замените **индекс** метод следующим кодом:

    (Code Snippet - *основы 4 MVC для ASP.NET - метод Ex5 StoreController Index*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample13.cs)]

> [!NOTE]
> Если вы не знакомы с C#, может предположить, что **var** означает, что **viewModel** переменной с поздним связыванием. Неправильный - компилятор C# использует определение типа зависимости от того, что можно присвоить переменной, чтобы определять **viewModel** имеет тип **StoreIndexViewModel**. Кроме того, скомпилировав локальной **viewModel** переменной как **StoreIndexViewModel** типа get проверки во время компиляции и поддержка в редакторе кода Visual Studio.

<a id="Ex5Task4"></a>

<a id="Task_4_-_Creating_a_View_Template_that_Uses_StoreIndexViewModel"></a>
#### <a name="task-4---creating-a-view-template-that-uses-storeindexviewmodel"></a>Задача 4 - Создание шаблона представления, который использует StoreIndexViewModel

В этой задаче вы создадите представление шаблон, который будет использовать StoreIndexViewModel объекта, переданного из контроллера для отображения списка жанров.

1. Прежде чем создавать новый шаблон представления, давайте создадим проект, чтобы **Добавление диалогового окна представления** знает о **StoreIndexViewModel** класса. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.

    ![Построение проекта](aspnet-mvc-4-fundamentals/_static/image22.png "построение проекта")

    *Построение проекта*
2. Создание шаблона представления. Чтобы сделать это, щелкните правой кнопкой мыши внутри **индекс** метод и выберите **Добавление представления**.

    ![Добавление представления](aspnet-mvc-4-fundamentals/_static/image23.png "Добавление представления")

    *Добавление представления*
3. Так как **Добавление диалогового окна представления** был вызван из **StoreController**, добавит этот шаблон по умолчанию в **\Views\Store\Index.cshtml** файла. Проверьте **создать строго типизированных представление** флажок, а затем выберите **StoreIndexViewModel** как **класс модели**. Кроме того, убедитесь, что выбран обработчик представлений **Razor**. Нажмите кнопку **Добавить**.

    ![Диалоговое окно добавления представления](aspnet-mvc-4-fundamentals/_static/image24.png "диалоговое окно добавления представления")

    *Диалоговое окно добавления представления*

    **\Views\Store\Index.cshtml** файл шаблона представления создается и открывается. В зависимости от сведений, предоставленных **Добавление представления** диалоговое окно на предыдущем шаге, представления, шаблон будет ожидать **StoreIndexViewModel** экземпляру, что данные, используемые для создания HTML-ответа. Обратите внимание, что шаблон наследует `ViewPage<musicstore.viewmodels.storeindexviewmodel>` в C#.

<a id="Ex5Task5"></a>

<a id="Task_5_-_Updating_the_View_Template"></a>
#### <a name="task-5---updating-the-view-template"></a>Задача 5 - Обновление представления шаблона

В этой задаче будет обновить представление шаблон, созданный в последней задаче для получения числа жанров и их имен в пределах страницы.

> [!NOTE]
> Вы воспользуетесь @ синтаксис (часто обозначается как &quot;фрагменты кода&quot;) для выполнения кода в шаблоне представления.

1. В **Index.cshtml** файл, в **Store** папка, замените его код на следующий:

[!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample14.cshtml)]

    > [!NOTE]
    > As soon as you finish typing the period after the word **Model**, Visual Studio's Intellisense will show a list of possible properties and methods to choose from.
    > 
    > ![](aspnet-mvc-4-fundamentals/_static/image25.png)
    > 
    > *Getting Model properties and methods with Visual Studio's IntelliSense*
    > 
    > The **Model** property references the **StoreIndexViewModel** object that the Controller passed to the View template. This means that you can access all of the data passed from the Controller to the View template via the **Model** property, and format it into an appropriate HTML response within the View template.
    > 
    > You can just select the **NumberOfGenres** property from the Intellisense list rather than typing it in and then it will auto-complete it by pressing the **tab key**.
2. Цикл по списку жанр в **StoreIndexViewModel** и создать HTML **&lt;ul&gt;** список с помощью **foreach** цикла.
   (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample15.cshtml)]
3. Нажмите клавишу **F5** для запуска приложения и Обзор **/Store**. Вы увидите список жанров, переданный **StoreIndexViewModel** объекта из **StoreController** в шаблоне представления.

    ![Представление со списком жанров](aspnet-mvc-4-fundamentals/_static/image26.png "представления, отображающее список жанров")

    *Представление со списком жанров*
4. Закройте браузер.

<a id="Exercise6"></a>

<a id="Exercise_6_Using_Parameters_in_View"></a>
### <a name="exercise-6-using-parameters-in-view"></a>Упражнение 6. В представлении с помощью параметров

В упражнении 3 вы узнали, как передавать параметры к контроллеру. В этом упражнении вы узнаете, как использовать эти параметры в шаблоне представления. Для этой цели вы познакомитесь сначала классов модели, которые помогут вам управлять логику данных и домена. Кроме того вы узнаете, как создать ссылки на страницы в приложении ASP.NET MVC, не беспокоясь вещей, такие как кодирование URL-путей.

<a id="Ex6Task1"></a>

<a id="Task_1_-_Adding_Model_Classes"></a>
#### <a name="task-1---adding-model-classes"></a>Задача 1 - Добавление классов модели

В отличие от модели ViewModel, в которой создаются только для передачи данных из контроллера в представление классов модели создаются для хранения и управления логику данных и домена. В этой задаче вы добавите двух классов модели для представления этих концепций: **Жанр** и **альбома**.

1. Если это еще не открыто, запустите **VS Express для Web**
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта, перейдите к **Source\Ex06 UsingParametersInView\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
3. Добавить **жанр** класс модели. Чтобы сделать это, щелкните правой кнопкой мыши **моделей** папку в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класс** элемента и назовите файл *Genre.cs*, затем нажмите кнопку **добавить**.

    ![Добавление класса](aspnet-mvc-4-fundamentals/_static/image27.png "Добавление класса")

    *Добавление нового элемента*

    ![Добавление класса модели жанр](aspnet-mvc-4-fundamentals/_static/image28.png "Добавление класса модели жанра")

    *Добавление класса модели жанра*
4. Добавить **имя** свойство к классу жанра. Чтобы сделать это, добавьте следующий код:

    (Code Snippet - *основы ASP.NET MVC 4 - жанр Ex6*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample16.cs)]
5. Таким же способом, что и раньше, добавьте **альбома** класса. Чтобы сделать это, щелкните правой кнопкой мыши **моделей** папку в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класс** элемента и назовите файл *Album.cs*, затем нажмите кнопку **добавить**.
6. Добавьте в класс Album два свойства: **Жанр** и **Title**. Чтобы сделать это, добавьте следующий код:

    (Code Snippet - *основы ASP.NET MVC 4 - альбома Ex6*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample17.cs)]

<a id="Ex6Task2"></a>

<a id="Task_2_-_Adding_a_StoreBrowseViewModel"></a>
#### <a name="task-2---adding-a-storebrowseviewmodel"></a>Задача 2 - Добавление StoreBrowseViewModel

Объект **StoreBrowseViewModel** будет использоваться в этой задаче для отображения и альбомы, которые соответствуют выбранного жанра. В этой задаче вы создадите этот класс и затем добавить два свойства для обработки **жанр** и его **альбома**в списке.

1. Добавить **StoreBrowseViewModel** класса. Чтобы сделать это, щелкните правой кнопкой мыши **ViewModels** папку в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класс** элемента и назовите файл *StoreBrowseViewModel.cs*, затем нажмите кнопку **добавить**.
2. Добавьте ссылку в моделях в **StoreBrowseViewModel** класса. Чтобы сделать это, добавьте следующее пространство имен:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex6 UsingModel*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample18.cs)]
3. Добавьте два свойства **StoreBrowseViewModel** класса: **Жанр** и **альбомов**. Чтобы сделать это, добавьте следующий код:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex6 ModelProperties*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample19.cs)]

> [!NOTE]
> Что такое **списка&lt;альбома&gt;**  ?: Использует это определение **списка&lt;T&gt;**  типа, где **T** ограничивает тип для этих элементов этого **списка** принадлежат, в этом случае **Альбома** (или один из его потомков).
> 
> Эта возможность проектировать классы и методы, спецификация которых отложена из одного или нескольких типов пока класс или метод объявляется и создается в клиентском коде входит в состав языка C# называется **универсальные шаблоны**.
> 
> **Список&lt;T&gt;**  является универсальным, равное **ArrayList** введите и доступен в **System.Collections.Generic** пространства имен. Одним из преимуществ использования **универсальные шаблоны** , так как указан тип, вы не нужны для обеспечения проверки проверки операций, таких как элементы в приведении типа **альбома** как это делается с помощью **ArrayList**.

<a id="Ex6Task3"></a>

<a id="Task_3_-_Using_the_New_ViewModel_in_the_StoreController"></a>
#### <a name="task-3---using-the-new-viewmodel-in-the-storecontroller"></a>Задача 3 - использование нового ViewModel в StoreController

В этой задаче будет изменено **StoreController** **Обзор** и **сведения** методы действий для использования нового **StoreBrowseViewModel** .

1. Добавьте ссылку на папку Models в **StoreController** класса. Для этого разверните **контроллеров** папку в **обозревателе решений** и откройте **StoreController** класса. Затем добавьте следующий код:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex6 UsingModelInController*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample20.cs)]
2. Замените **Обзор** метода действия для использования **StoreViewBrowseController** класса. Вы создадите жанр фильма и два новых объектов альбомов с фиктивными данными (в следующий практический семинар будет использовать реальные данные из базы данных). Чтобы сделать это, замените **Обзор** метод следующим кодом:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex6 BrowseMethod*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample21.cs)]
3. Замените **сведения** метода действия для использования **StoreViewBrowseController** класса. Вы создадите новый **альбома** возвращался к **представление**. Чтобы сделать это, замените **сведения** метод следующим кодом:

    (Code Snippet - *основы ASP.NET MVC 4 - Ex6 DetailsMethod*)

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample22.cs)]

<a id="Ex6Task4"></a>

<a id="Task_4_-_Adding_a_Browse_View_Template"></a>
#### <a name="task-4---adding-a-browse-view-template"></a>Задача 4 - Добавление шаблона представления обзора

В этой задаче вы добавите **Обзор** представление для отображения альбомов, найден для определенного жанра.

1. Прежде чем создавать новый шаблон представления, следует построить проект, чтобы **Добавление представления** диалоговое окно знает о **ViewModel** класс для использования. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.
2. Добавить **Обзор** представления. Чтобы сделать это, щелкните правой кнопкой мыши в **Обзор** метод действия **StoreController** и нажмите кнопку **Добавление представления**.
3. В **Добавление представления** диалоговом окне убедитесь, что имя представления **Обзор**. Проверьте **создать строго типизированное представление** флажок и выберите **StoreBrowseViewModel** из **класс модели** раскрывающегося списка. Оставьте в остальных полях значения по умолчанию. Затем нажмите кнопку **Добавить**.

    ![Добавление представления обзора](aspnet-mvc-4-fundamentals/_static/image29.png "Добавление представления обзора")

    *Добавление представления обзора*
4. Изменить **Browse.cshtml** для отображения сведений жанра, доступ к **StoreBrowseViewModel** объект, передаваемый в шаблоне представления. Для этого замените содержимое следующим: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample23.cshtml)]

<a id="Ex6Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче вы проверите, **Обзор** метод извлекает альбомов из **Обзор** действие метода.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес   **/Store/Обзор? Жанр = Disco** чтобы убедиться, что это действие возвращает два альбомов.

    ![Обзор Store Disco альбомов](aspnet-mvc-4-fundamentals/_static/image30.png "просмотра Disco альбомов Store")

    *Просмотр Disco альбомов Store*

<a id="Ex6Task6"></a>

<a id="Task_6_-_Displaying_information_About_a_Specific_Album"></a>
#### <a name="task-6---displaying-information-about-a-specific-album"></a>Задача 6 - Отображение сведений о определенный альбом

В этой задаче вы реализуете **Store и подробных** представление для отображения сведений о определенный альбом. В этом Практическое лабораторное занятие, все, что будет отображаться альбома уже содержится в **представление** шаблона. В этом случае вместо создания **StoreDetailsViewModel** класса, будет использовать текущий **StoreBrowseViewModel** шаблона, передавая ему альбома.

1. Закройте браузер, при необходимости, чтобы вернуться в окно Visual Studio. Добавьте новый **сведения** просмотра для **StoreController** **сведения** метода действия. Чтобы сделать это, щелкните правой кнопкой мыши **сведения** метод в **StoreController** класса и нажмите кнопку **Добавление представления**.
2. В **Добавление представления** диалоговое окно, убедитесь, что **Имя_представления** — **сведения**. Проверьте **создать строго типизированное представление** флажок и выберите **альбома** из **класс модели** раскрывающегося списка. Оставьте в остальных полях значения по умолчанию. Затем нажмите кнопку **Добавить**. Это будет создавать и открывать **\Views\Store\Details.cshtml** файла.

    ![Добавление представления сведений о](aspnet-mvc-4-fundamentals/_static/image31.png "Добавление представления сведений")

    *Добавление представления сведений*
3. Изменить **Details.cshtml** файл для отображения сведений о диске, доступ к **альбома** объект, передаваемый в шаблоне представления. Для этого замените содержимое следующим: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample24.cshtml)]

<a id="Ex6Task7"></a>

<a id="Task_7_-_Running_the_Application"></a>
#### <a name="task-7---running-the-application"></a>Задача 7 - запуск приложения

В этой задаче вы проверите, **сведения** представление получает сведения о альбома из **подробно действие** метод.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес **/Store/Details/5** Чтобы проверить сведения об альбоме.

    ![Просмотр сведений альбомов](aspnet-mvc-4-fundamentals/_static/image32.png "просмотра альбомов детализации")

    *Просмотр сведений альбома*

<a id="Ex6Task8"></a>

<a id="Task_8_-_Adding_Links_Between_Pages"></a>
#### <a name="task-8---adding-links-between-pages"></a>Задача 8. Добавление ссылки между страницами

В этой задаче вы добавите ссылку в представлении Store должна иметься ссылка в имени каждого жанра к соответствующему **/Store/обзора** URL-адрес. Таким образом, если щелкнуть жанр фильма, например **Disco**, он откроется с **/Store/обзора? жанр = Disco** URL-адрес.

1. Закройте браузер, при необходимости, чтобы вернуться в окно Visual Studio. Обновление **индекс** страницу, чтобы добавить ссылку на **Обзор** страницы. Для этого в **обозревателе решений** разверните **представления** папку, а затем **Store** папку и дважды щелкните **Index.cshtml** страницы.
2. Добавьте ссылку на представление обзора, указывающее, выбранного жанра. Чтобы сделать это, замените следующий выделенный код в **&lt;li&gt;** теги: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample25.cshtml)]

   > [!NOTE]
   > другой подход будет связывание непосредственно на страницу, с помощью следующего кода:
   > 
   > &lt;a href =&quot;/Store/обзора? жанр =@genreName&quot;&gt;@genreName&lt;/a&gt;
   > 
   > Несмотря на то, что этот подход работает, он зависит от строки жестко. При переименовании позже контроллера, необходимо вручную изменить эту инструкцию. Лучшим вариантом будет его использовать **вспомогательный метод HTML** метод. ASP.NET MVC включает в себя метод вспомогательный метод HTML, который доступен для выполнения таких задач. **Html.ActionLink()** вспомогательный метод позволяет легко создавать HTML **&lt;&gt;** ссылки, убедиться, пути URL-адресов осуществляется должным образом в кодировке URL-адрес.
   > 
   > Htlm.ActionLink имеет несколько перегрузок. В этом упражнении вам понадобится использовать одно, которое принимает три параметра:
   > 
   > 1. Текст ссылки, который будет отображаться название жанра
   > 2. Имя действия контроллера (**Обзор**)
   > 3. Значения параметра, указав оба имя маршрута (**жанр**) и значение (**название жанра**)

<a id="Ex6Task9"></a>

<a id="Task_9_-_Running_the_Application"></a>
#### <a name="task-9---running-the-application"></a>Задача 9 - запуск приложения

В этой задаче вы проверите, что каждого жанра отображается со ссылкой на соответствующий **/Store/обзора** URL-адрес.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **/Store** чтобы убедиться, что каждого жанра ссылки на соответствующие **/Store/обзора** URL-адрес.

    ![Просмотр жанров со ссылками на странице "Обзор"](aspnet-mvc-4-fundamentals/_static/image33.png "просмотра жанров со ссылками на странице \"Обзор\"")

    *Просмотр жанров со ссылками на странице "Обзор"*

<a id="Ex6Task10"></a>

<a id="Task_10_-_Using_Dynamic_ViewModel_Collection_to_Pass_Values"></a>
#### <a name="task-10---using-dynamic-viewmodel-collection-to-pass-values"></a>Задача 10 — с помощью коллекции динамические ViewModel для передачи значений

В этой задаче вы узнаете, как простой и эффективный способ передачи значений между контроллером и представлением, не внося никаких изменений в модели. ASP.NET MVC 4 предоставляет коллекцию &quot;ViewModel&quot;, который можно назначить любое динамическое значение и получить доступ в контроллеры и представления также.

Теперь вы будет использовать динамическую коллекцию ViewBag для передачи списка &quot; **звездочками жанров** &quot; из контроллера в представление. Представление Store Index будет доступ к **ViewModel** и отображения информации.

1. Закройте браузер, при необходимости, чтобы вернуться в окно Visual Studio. Откройте **StoreController.cs** и изменение **индекс** метод, чтобы создать список жанров звездочками в коллекцию ViewModel:

    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample26.cs)]

    > [!NOTE]
    > Можно также использовать синтаксис **ViewBag [&quot;Starred&quot;]** доступа к свойствам.
2. Значок звездочки **&quot;starred.png&quot;** включается в **Source\Assets\Images** папку данную лабораторию. Чтобы добавить его в приложение, перетащите их содержимое из **Windows Explorer** в окно **обозревателе решений** в Visual Web Developer Express, как показано ниже:

    ![Изображение типа "звезда" Добавление к решению](aspnet-mvc-4-fundamentals/_static/image34.png "изображение типа \"звезда\" Добавление в решение")

    *В решение при добавлении изображения типа "звезда"*
3. Откройте представление **Store/Index.cshtml** и изменить содержимое. Будет считывать &quot;звездочками&quot; свойство в **ViewBag** коллекции и узнайте имя текущего жанра, в списке. В этом случае будет показывать значок звездочки прямо по ссылке жанра.
   (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample27.cshtml)]

<a id="Ex6Task11"></a>

<a id="Task_11_-_Running_the_Application"></a>
#### <a name="task-11---running-the-application"></a>Задача 11. запуск приложения

В этой задаче вы проверите, что со звездочками жанры отображать значок звездочки.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес **/Store** для убедитесь, что каждый избранные жанр уважение метки:

    ![Просмотр жанров с со звездочками элементами](aspnet-mvc-4-fundamentals/_static/image35.png "жанров обзора с элементами со звездочками")

    *Browsing жанров со звездочками элементов*

<a id="Exercise7"></a>

<a id="Exercise_7_A_lap_around_ASPNET_MVC_4_new_template"></a>
### <a name="exercise-7-a-lap-around-aspnet-mvc-4-new-template"></a>Упражнение 7. Беглый обзор нового шаблона ASP.NET MVC 4

В этом упражнении будет изучено усовершенствования в шаблоны проектов ASP.NET MVC 4, воспользовавшись наиболее соответствующие функции нового шаблона.

<a id="Ex7Task1"></a>

<a id="Task_1_Exploring_the_ASPNET_MVC_4_Internet_Application_Template"></a>
#### <a name="task-1-exploring-the-aspnet-mvc-4-internet-application-template"></a>Упражнение 1. Изучение данный шаблон приложения ASP.NET MVC 4 Internet

1. Если это еще не открыто, запустите **VS Express для Web**
2. Выберите **файл | Новые | Проект** команды меню. В **новый проект** диалоговом окне выберите **Visual C# | Web** шаблона на левой панели дерева, а затем выберите **веб-приложение ASP.NET MVC 4**. **Имя** проекта *MusicStore* и обновить **имя решения** для *начать*, затем выберите расположение (или оставьте значение по умолчанию) и нажмите кнопку **ОК** .

    ![Создание нового проекта ASP.NET MVC 4](aspnet-mvc-4-fundamentals/_static/image36.png "Создание нового проекта ASP.NET MVC 4")

    *Создание нового проекта ASP.NET MVC 4*
3. В **создания проекта ASP.NET MVC 4** диалоговом окне выберите **веб-приложение** шаблон проекта и нажмите кнопку **ОК**. Обратите внимание, что можно выбрать как подсистема просмотра Razor или ASPX.

    ![Создание нового приложения ASP.NET MVC 4 Internet](aspnet-mvc-4-fundamentals/_static/image37.png "Создание нового приложения ASP.NET MVC 4 Internet")

    *Создание нового приложения ASP.NET MVC 4 Internet*

    > [!NOTE]
    > Синтаксис Razor представлена в ASP.NET MVC 3. Наша цель — чтобы свести к минимуму число знаков и нажатий клавиш в файл, позволяя быстро и жидкостей, рабочие процессы кодирования. Razor использует существующие C# и Visual Basic (или другая) языковые навыки и обеспечивает синтаксис разметки шаблона, который позволяет awesome рабочего процесса создания HTML.
4. Нажмите клавишу **F5** Чтобы выполнить решение и просмотреть обновленный шаблон. Вы можете проверить следующие возможности:

    1. **Шаблоны в современном стиле**

        Шаблоны были обновлены, предоставляя дополнительные стили современных.

        ![Шаблоны ASP.NET MVC 4 restyled](aspnet-mvc-4-fundamentals/_static/image38.png "restyled шаблонов в ASP.NET MVC 4")

        *Шаблоны ASP.NET MVC 4 restyled*
    2. **Адаптивная отрисовка**

        Извлеките изменения размера окна браузера и обратите внимание на то, как макет страницы приспосабливается к изменениям для нового размера окна. Эти шаблоны использовать методика адаптивной отрисовки для неправильно отображается на настольных и мобильных платформах без какой-либо настройки.

        ![Шаблон проекта ASP.NET MVC 4 в другом браузере размеры](aspnet-mvc-4-fundamentals/_static/image39.png "шаблон проекта ASP.NET MVC 4 в другом браузере размеры")

        *Шаблон проекта ASP.NET MVC 4 в другом браузере размеры*
5. Закройте браузер, чтобы остановить отладчик и вернитесь в Visual Studio.
6. Теперь имеется возможность просматривать решения и некоторые новые функции ASP.NET MVC 4 в шаблоне проекта.

    ![ASP.NET MVC 4 internet--шаблон проекта приложения-](aspnet-mvc-4-fundamentals/_static/image40.png "шаблон проекта приложения ASP.NET MVC 4 Internet")

    *Шаблон проекта приложения ASP.NET MVC 4 Internet*

   1. **Разметку HTML5**

       Обзор представлений шаблона, чтобы узнать, Новая разметка темы, например открыть **About.cshtml** просматривать в **Главная** папки.

       ![Новый шаблон, с помощью разметки Razor и HTML5](aspnet-mvc-4-fundamentals/_static/image41.png "новый шаблон, с помощью разметки Razor и HTML5")

       *Новый шаблон, с помощью разметки Razor и HTML5*
   2. **Включены библиотеки JavaScript**

      1. **jQuery**: jQuery упрощает обход документа HTML, обработка событий, анимации и взаимодействия с Ajax.
      2. **jQuery UI**: Эта библиотека предоставляет абстракции для низкого уровня взаимодействия и анимации, расширенные эффекты и мини-приложения могут изменяться темами, созданная на основе библиотеку JavaScript jQuery.

         > [!NOTE]
         > Вы можете узнать о jQuery и пользовательский Интерфейс jQuery в [ [ http://docs.jquery.com/ ](http://docs.jquery.com/) ](http://docs.jquery.com/).
      3. **KnockoutJS**: Шаблон по умолчанию ASP.NET MVC 4 теперь включает **KnockoutJS**, платформу JavaScript MVVM, которая позволяет создавать широкие возможности и малым временем отклика веб-приложения с использованием JavaScript и HTML. Как и в ASP.NET MVC 3, jQuery и библиотеки пользовательского интерфейса jQuery также включаются в ASP.NET MVC 4.

          > [!NOTE]
          > Можно получить дополнительные сведения о библиотеке KnockOutJS в этой связи: [ http://learn.knockoutjs.com/ ](http://learn.knockoutjs.com/).
      4. **Modernizr**: Эта библиотека запускается автоматически, создание сайтов, совместимые со старыми браузерами, при использовании технологий HTML5 и CSS3.

          > [!NOTE]
          > Можно получить дополнительные сведения о библиотеке Modernizr в этой связи: [ http://www.modernizr.com/ ](http://www.modernizr.com/).
   3. **SimpleMembership, включенных в решение**

       SimpleMembership была разработана для замены предыдущей системы поставщика ролей ASP.NET и членства. Он имеет много новых функций, которые упрощают для разработчиков на безопасный веб-страницы в более гибкие возможности.

       Интернет-шаблоне уже задал выполнить несколько действий для интеграции SimpleMembership, например, AccountController подготовлена для использования OAuthWebSecurity (для регистрации учетной записи OAuth, имя входа, управления и др.) и веб-безопасности.

       ![SimpleMembership включена в решение](aspnet-mvc-4-fundamentals/_static/image42.png "SimpleMembership включена в решение")

       *SimpleMembership включена в решение*

       > [!NOTE]
       > Дополнительные сведения о [OAuthWebSecurity](https://msdn.microsoft.com/library/jj158393(v=vs.111).aspx) в библиотеке MSDN.

> [!NOTE]
> Кроме того, можно развернуть это приложение на веб-сайтов Windows Azure ниже [приложении б: Публикация приложения ASP.NET MVC 4 с помощью веб-развертывания](#AppendixB).


* * *

<a id="Summary"></a>

<a id="Summary"></a>
## <a name="summary"></a>Сводка

Выполнив этот практический семинар вы узнали основы ASP.NET MVC:

- Основные элементы MVC-приложениях и их взаимодействие
- Создание приложения ASP.NET MVC
- Добавление и настройка контроллеров для обработки параметров, передаваемых через URL-адрес и строки запроса
- Как добавить главную страницу макета для настройки шаблона для типичного содержимого HTML, таблицы стилей для улучшения внешнего вида и поведения и шаблона представления для отображения содержимого HTML
- Как использовать шаблон ViewModel для передачи свойств в шаблоне представления для отображения динамических данных
- Как использовать параметры, передаваемые контроллеров в шаблоне представления
- Как добавить ссылки на страницы в приложении ASP.NET MVC
- Как добавлять и использовать динамические свойства в представлении
- Усовершенствования в шаблоны проектов ASP.NET MVC 4

<a id="AppendixA"></a>

<a id="Appendix_A_Installing_Visual_Studio_Express_2012_for_Web"></a>
## <a name="appendix-a-installing-visual-studio-express-2012-for-web"></a>Приложение а. Установка Visual Studio Express 2012 для Web

Вы можете установить **Microsoft Visual Studio Express 2012 для Web** или другой &quot;Express&quot; версию с помощью **[Microsoft Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx)**. Приведенные ниже инструкции описывают действия, необходимые для установки *Visual studio Express 2012 для Web* с помощью *Microsoft Web Platform Installer*.

1. Перейдите к [ [ https://go.microsoft.com/?linkid=9810169 ](https://go.microsoft.com/?linkid=9810169) ](https://go.microsoft.com/?linkid=9810169). Кроме того, если вы уже установили установщика веб-платформы, можно открыть его и выполните поиск продукта &quot; <em>Visual Studio Express 2012 для Web с пакетом Windows Azure SDK</em>&quot;.
2. Щелкните **установить сейчас**. Если у вас нет **установщика веб-платформы** вы будете перенаправлены к сначала загрузить и установить его.
3. Один раз **установщика веб-платформы** открыт, нажмите кнопку **установить** для запуска программы установки.

    ![Установка Visual Studio Express](aspnet-mvc-4-fundamentals/_static/image43.png "установка Visual Studio Express")

    *Установка Visual Studio Express*
4. Прочтите лицензии и условия все продукты и нажмите кнопку **я принимаю** для продолжения.

    ![Принятие условий лицензии](aspnet-mvc-4-fundamentals/_static/image44.png)

    *Принятие условий лицензии*
5. Подождите, пока не завершится процесс загрузки и установки.

    ![Ход установки](aspnet-mvc-4-fundamentals/_static/image45.png)

    *Ход выполнения установки*
6. После завершения установки нажмите кнопку **Готово**.

    ![Установка завершена](aspnet-mvc-4-fundamentals/_static/image46.png)

    *Установка завершена*
7. Нажмите кнопку **выхода** закрыть установщик веб-платформы.
8. Чтобы открыть Visual Studio Express для Web, перейдите к **запустить** экрана и Займитесь написанием &quot; **VS Express**&quot;, нажмите кнопку на **VS Express для Web** Плитка.

    ![VS Express для Web плитки](aspnet-mvc-4-fundamentals/_static/image47.png)

    *VS Express для Web плитки*

<a id="AppendixB"></a>

<a id="Appendix_B_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
## <a name="appendix-b-publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Приложение б. Публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

В этом приложении показано, как создать новый веб-сайт на портале управления Windows Azure и опубликовать приложение, полученный после лаборатории, используя преимущества компонентов публикации веб-развертывания, предоставляемые Windows Azure.

<a id="ApxBTask1"></a>

<a id="Task_1_-_Creating_a_New_Web_Site_from_the_Windows_Azure_Portal"></a>
#### <a name="task-1---creating-a-new-web-site-from-the-windows-azure-portal"></a>Задача 1 - Создание нового веб-сайта с Windows Azure Portal

1. Перейдите к [портала управления Windows Azure](https://manage.windowsazure.com/) и войдите с использованием учетных данных Майкрософт, связанную с вашей подпиской.

    > [!NOTE]
    > С помощью Windows Azure можно бесплатное размещение 10 веб-сайтов ASP.NET и затем масштабировать по мере увеличения объема трафика. Вы можете зарегистрироваться [здесь](http://aka.ms/aspnet-hol-azure).

    ![Войдите на портал Windows Azure](aspnet-mvc-4-fundamentals/_static/image48.png "Войдите на портал Windows Azure")

    *Войдите на портал управления Windows Azure*
2. Нажмите кнопку **New** на панели команд.

    ![Создание нового веб-сайта](aspnet-mvc-4-fundamentals/_static/image49.png "создания нового веб-сайта")

    *Создание нового веб-сайта*
3. Нажмите кнопку **вычислений** | **веб-сайт**. Затем выберите **быстрое создание** параметр. Укажите URL-адрес доступен для нового веб-сайта и нажмите кнопку **создать веб-сайт**.

    > [!NOTE]
    > Веб-сайта Windows Azure является узлом для веб-приложение, работающее в облаке, вы можете управлять. Быстрое создание позволяет развернуть завершенное веб-приложения для Windows Azure веб-сайта из вне портала. Он не включает действия по настройке базы данных.

    ![Создание нового веб-сайта, с помощью быстрого создания](aspnet-mvc-4-fundamentals/_static/image50.png "создания нового веб-сайта, с помощью быстрого создания")

    *Создание нового веб-сайта, с помощью быстрого создания*
4. Подождите, пока новый **веб-сайт** создается.
5. После создания веб-сайт, щелкните ссылку под **URL-адрес** столбца. Проверьте, что новый веб-сайт работает.

    ![Выбрав новый веб-сайт](aspnet-mvc-4-fundamentals/_static/image51.png "просмотра на новый веб-сайт")

    *Выбрав новый веб-сайт*

    ![Веб-сайт работал](aspnet-mvc-4-fundamentals/_static/image52.png "веб-узлом")

    *Веб-сайт под управлением*
6. Вернитесь на портал и щелкните имя веб-сайт в **имя** столбец для отображения страницы управления.

    ![Открытие страницы управления веб-сайт](aspnet-mvc-4-fundamentals/_static/image53.png "Открытие страницы управления веб-сайта")

    *Открытие страницы управления веб-сайта*
7. В **панели мониторинга** раздела **быстрый обзор** щелкните **загрузить профиль публикации** ссылку.

    > [!NOTE]
    > *Профиль публикации* содержит все сведения, необходимые для публикации веб-приложения на веб-сайт Windows Azure для каждого разрешенного метода публикации. Профиль публикации содержит URL-адреса, учетные данные пользователя и строк базы данных, необходимых для подключения и проверку подлинности в каждой из конечных точек, для которых включена метода публикации. **Microsoft WebMatrix 2**, **Microsoft Visual Studio Express для Web** и **Microsoft Visual Studio 2012** поддерживают чтение профилей публикации для автоматизации настройки из этих программ для Публикация веб-приложений на веб-сайтах Windows Azure.

    ![Профиль публикации веб-сайт загрузки](aspnet-mvc-4-fundamentals/_static/image54.png "профиль публикации веб-сайта загрузки")

    *Профиль публикации веб-сайта загрузки*
8. Скачайте файл профиля публикации в известном месте. Далее в этом упражнении показано, как использовать этот файл для публикации веб-приложения на веб-сайтах, Windows Azure из Visual Studio.

    ![Сохранение файла профиля публикации](aspnet-mvc-4-fundamentals/_static/image55.png "Сохранение профиля публикации")

    *Сохранение файла профиля публикации*

<a id="ApxBTask2"></a>

<a id="Task_2_-_Configuring_the_Database_Server"></a>
#### <a name="task-2---configuring-the-database-server"></a>Задача 2 - Настройка сервера базы данных

Если приложение использует SQL Server, баз данных, необходимо будет создать сервер базы данных SQL. Эту задачу может пропустить, если вы хотите развернуть простое приложение, которое не использует SQL Server.

1. Вам потребуется сервер базы данных SQL для хранения базы данных приложения. Серверы баз данных SQL можно просмотреть в своей подписке на портале управления Windows Azure в **баз данных Sql** | **серверы** | **сервера Панель мониторинга**. Если у вас на сервер, созданный, можно создать его, используя **добавить** кнопки на панели команд. Запишите **имя сервера и URL-адрес, имя входа администратора и пароль**, как их использование в следующие задачи. Не создавайте базы данных, так как он будет создан в более позднем этапе.

    ![Панель мониторинга базы данных SQL Server](aspnet-mvc-4-fundamentals/_static/image56.png "панель мониторинга базы данных SQL Server")

    *Панель мониторинга базы данных SQL Server*
2. В следующей задаче вы проверите подключения к базе данных из Visual Studio по этой причине необходимо включить IP-адрес локального сервера списка **разрешенные IP-адреса**. Чтобы сделать это, нажмите кнопку **Настройка**, выберите IP-адрес из **текущий IP-адрес клиента** и вставьте его на **начальный IP-адрес** и **конечный IP-адрес** текстовые поля и нажмите кнопку ![add-client-ip-address-ok-button](aspnet-mvc-4-fundamentals/_static/image57.png) кнопки.

    ![Добавление IP-адрес клиента](aspnet-mvc-4-fundamentals/_static/image58.png)

    *Добавление IP-адрес клиента*
3. Один раз **IP-адрес клиента** добавляется разрешенных IP-адресов выберите на **Сохранить** для подтверждения изменения.

    ![Подтверждение изменений](aspnet-mvc-4-fundamentals/_static/image59.png)

    *Подтверждение изменений*

<a id="ApxBTask3"></a>

<a id="Task_3_-_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
#### <a name="task-3---publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Задача 3 - публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

1. Вернитесь к решению для ASP.NET MVC 4. В **обозревателе решений**, щелкните правой кнопкой мыши проект веб-сайта и выберите **публикации**.

    ![Публикация приложения](aspnet-mvc-4-fundamentals/_static/image60.png "публикации приложения")

    *Публикация веб-сайта*
2. Импортируйте профиль публикации, сохраненный в первой задаче.

    ![Импорт профиля публикации](aspnet-mvc-4-fundamentals/_static/image61.png "Импорт профиля публикации")

    *Импорт профиля публикации*
3. Нажмите кнопку **Проверка подключения**. После завершения проверки нажмите кнопку **Далее**.

    > [!NOTE]
    > Проверка будет завершена, как только вы увидите зеленый флажок отображаться рядом с кнопкой проверить подключение.

    ![Проверка подключения](aspnet-mvc-4-fundamentals/_static/image62.png "Проверка подключения")

    *Проверка подключения*
4. В **параметры** раздела **баз данных** нажмите кнопку рядом с текстовое поле подключения к базе данных (т. е. **DefaultConnection**).

    ![Конфигурация веб-развертывания](aspnet-mvc-4-fundamentals/_static/image63.png "конфигурация веб-развертывания")

    *Конфигурация веб-развертывания*
5. Настройте подключение к базе данных следующим образом:

   - В **имя_сервера** введите URL-адреса серверу базы данных SQL с помощью *tcp:* префикс.
   - В **имя пользователя** введите имя входа администратора сервера.
   - В **пароль** введите пароль входа администратора сервера.
   - Введите новое имя базы данных, например: *MVC4SampleDB*.

     ![Настройка строки подключения назначения](aspnet-mvc-4-fundamentals/_static/image64.png "Настройка строка соединения с назначением")

     *Настройка строки подключения назначения*
6. Затем нажмите кнопку **ОК**. При появлении запроса на создание базы данных нажмите кнопку **Да**.

    ![Создание базы данных](aspnet-mvc-4-fundamentals/_static/image65.png "Создание строки базы данных")

    *Создание базы данных*
7. В текстовое поле подключение по умолчанию отображается строка подключения, который будет использоваться для подключения к базе данных SQL в Windows Azure. Затем нажмите кнопку **Далее**.

    ![Строка подключения, указывающий на базу данных SQL](aspnet-mvc-4-fundamentals/_static/image66.png "строку подключения, указывающий на базу данных SQL")

    *Строка подключения, указывающий на базу данных SQL*
8. В **предварительной версии** щелкните **публикации**.

    ![Публикация веб-приложения](aspnet-mvc-4-fundamentals/_static/image67.png "публикации веб-приложения")

    *Публикация веб-приложения*
9. После завершения процесса публикации в браузере по умолчанию откроется опубликованного веб-сайта.

    ![Приложение опубликовано в Windows Azure](aspnet-mvc-4-fundamentals/_static/image68.png "публикации приложения в Windows Azure")

    *Приложение будет публиковаться в Windows Azure*

<a id="AppendixC"></a>

<a id="Appendix_C_Using_Code_Snippets"></a>
## <a name="appendix-c-using-code-snippets"></a>Приложение c. Фрагменты кода

С помощью фрагментов кода у вас есть весь код, который требуется в вашем распоряжении. Лаборатории документ поможет определить точно при их использовании, как показано на рисунке ниже.

![Фрагменты кода Visual Studio, чтобы вставить код в проект](aspnet-mvc-4-fundamentals/_static/image69.png "фрагменты кода с помощью Visual Studio, чтобы вставить код в проект")

*Фрагменты кода Visual Studio, чтобы вставить код в проект*

***Чтобы добавить фрагмент кода, с помощью клавиатуры (только C#)***

1. Поместите курсор в место вставки кода.
2. Начните вводить имя фрагмента (без пробелов и дефисов).
3. Посмотрите, как IntelliSense отображает, совпадающие с именами фрагменты.
4. Выберите правильный фрагмент (или продолжите ввод, пока не будет выделен весь фрагмент имени).
5. Нажмите клавишу Tab дважды, чтобы вставить фрагмент в положении курсора.

![Начните вводить имя фрагмента](aspnet-mvc-4-fundamentals/_static/image70.png "начните вводить имя фрагмента")

*Начните вводить имя фрагмента*

![Нажмите клавишу Tab, чтобы выделить фрагмент в выделенный](aspnet-mvc-4-fundamentals/_static/image71.png "нажмите клавишу Tab, чтобы выделить выделенный фрагмент")

*Нажмите клавишу Tab, чтобы выделить выделенный фрагмент*

![Снова нажмите клавишу Tab и фрагмент будет расширяться](aspnet-mvc-4-fundamentals/_static/image72.png "еще раз нажмите клавишу Tab и фрагмент будет расширяться")

*Снова нажмите клавишу Tab и фрагмент будет расширяться*

***Чтобы добавить фрагмент кода, с помощью мыши (C#, Visual Basic и XML)*** 1. Щелкните правой кнопкой мыши место для вставки фрагмента кода.

1. Выберите **вставить фрагмент** следуют **Мои фрагменты кода**.
2. Выберите соответствующий фрагмент из списка, щелкнув его.

![Щелкните правой кнопкой мыши, где необходимо вставить фрагмент кода и выберите Вставить фрагмент](aspnet-mvc-4-fundamentals/_static/image73.png "щелкните правой кнопкой мыши, где необходимо вставить фрагмент кода и выберите Вставить фрагмент")

*Щелкните правой кнопкой мыши место для вставки фрагмента кода и выберите Вставить фрагмент*

![Выберите соответствующий фрагмент из списка, щелкнув по ней](aspnet-mvc-4-fundamentals/_static/image74.png "выбрать соответствующий фрагмент из списка, щелкнув по ней")

*Выберите соответствующий фрагмент из списка, щелкнув по ней*
