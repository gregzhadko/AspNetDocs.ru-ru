---
uid: mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-models-and-data-access
title: Модели ASP.NET MVC 4 и доступа к данным | Документация Майкрософт
author: rick-anderson
description: Примечание. Это Практическое лабораторное занятие предполагает, что у вас есть базовые знания о ASP.NET MVC. Если вы не использовали ASP.NET MVC перед, мы рекомендуем перейти на ASP.NET MVC 4...
ms.author: riande
ms.date: 02/18/2013
ms.assetid: 634ea84b-f904-4afe-b71b-49cccef4d9cc
msc.legacyurl: /mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-models-and-data-access
msc.type: authoredcontent
ms.openlocfilehash: 10c2f6379f6d3139dd3bcf1027ff456e074298c3
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2019
ms.locfileid: "58425097"
---
# <a name="aspnet-mvc-4-models-and-data-access"></a>Модели и доступ к данным в ASP.NET MVC 4

по [Web Слышатся Team](https://twitter.com/webcamps)

[Скачайте комплект учебных материалов по лагеря Web](https://aka.ms/webcamps-training-kit)

Это Практическое лабораторное занятие предполагается, что у вас есть базовые знания о **ASP.NET MVC**. Если вы не использовали **ASP.NET MVC** раньше, мы рекомендуем к превышению **ASP.NET MVC 4 Fundamentals** Практическое лабораторное занятие.

Это лабораторное занятие поможет усовершенствования и новые возможности, описанные ранее, применяя незначительные изменения в образец веб-приложение, в папке с исходным кодом.

> [!NOTE]
> Все примеры кода и фрагменты кода включены в Web лагеря комплект обучающих материалов, доступных в [выпуски Microsoft Web/WebCampTrainingKit](https://aka.ms/webcamps-training-kit). Проект, относящиеся к этой лаборатории доступен в [ASP.NET MVC 4 модели и доступ к данным](https://github.com/Microsoft-Web/HOL-MVC4ModelsAndDataAccess).

В **основы ASP.NET MVC** в лаборатории вы передача жестко данных с контроллеров в шаблоны представлений. Но для создания реальных веб-приложения, может потребоваться использовать реальную базу данных.

Это Практическое лабораторное занятие будет показано, как использовать ядро СУБД, чтобы сохранять и извлекать данные, необходимые для приложения Music Store. Чтобы сделать это, будет начинаться с существующей базы данных и создать модель EDM из него. В этой лабораторной работе будут соответствовать **Database First** подход, а также **Code First** подход.

Тем не менее, можно также использовать **Model First** подход, создания той же модели, с помощью средств и затем создать базу данных из него.

![Vs первой базы данных. Model First](aspnet-mvc-4-models-and-data-access/_static/image1.png "Database First vs. Model First")

*Vs первой базы данных. Model First*

После создания модели, вы внесете соответствующие настройки в StoreController для предоставления Store представлений с данными, извлеченными из базы данных, вместо использования жестко закодированных данных. Не потребуется вносить изменения в шаблоны представлений, поскольку StoreController будут возвращать же модели ViewModel в шаблоны представлений, несмотря на то, что это время будут извлекаться данные из базы данных.

**Первый подход на основе кода**

Подход Code First позволяет определить модели из кода без создания классов, которые обычно связаны друг с другом с помощью платформы.

В коде во-первых, объекты модели определяются с помощью POCO, &quot;обычные старые объекты CLR&quot;. POCO являются простые обычные классы, которые не поддерживают наследование и не реализуют интерфейсы. Мы автоматически создавать базы данных из них, или чтобы использовать существующую базу данных и создать сопоставление классов из кода.

Преимущества использования этого подхода является то, что модели остается независимой от инфраструктуру сохранения (в данном случае Entity Framework), как классы POCO не связаны с платформу сопоставления.

> [!NOTE]
> Это лабораторное занятие основан на ASP.NET MVC 4 и версию примера приложения Music Store настроен и в свернутом состоянии в соответствии с только функции, приведенные в этой лаборатории.
> 
> Если вы хотите просмотреть весь **Music Store** учебного приложения, его можно найти в [MVC-музыка-Store](https://github.com/evilDave/MVC-Music-Store).


<a id="Prerequisites"></a>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a>Предварительные требования

Необходимо иметь следующие элементы во укомплектовать данную лабораторию:

- [Microsoft Visual Studio Express 2012 для Web](https://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web) или руководителя (чтение [приложение А](#AppendixA) инструкции по его установке).

<a id="Setup"></a>

<a id="Setup"></a>
### <a name="setup"></a>Установка

**Установка фрагменты кода**

Для удобства большая часть кода, который вы планируете управлять вдоль этой лаборатории доступен как фрагменты кода Visual Studio. Чтобы установить фрагменты кода запуска **.\Source\Setup\CodeSnippets.vsi** файла.

Если вы не знакомы с фрагменты кода Visual Studio и хотите научиться использовать их, можно ссылаться в приложение из этого документа &quot; [приложение в: Фрагменты кода](#AppendixC)&quot;.

* * *

<a id="Exercises"></a>

<a id="Exercises"></a>
## <a name="exercises"></a>Упражнения

Это Практическое лабораторное занятие включает по следующие упражнения:

1. [Упражнение 1. Добавление базы данных](#Exercise1)
2. [Упражнение 2. Создание базы данных с помощью Code First](#Exercise2)
3. [Упражнение 3. Запрос в базу данных с параметрами](#Exercise3)

> [!NOTE]
> Каждого упражнения сопровождается **окончания** папку, содержащую полученное решение, должен быть получен после завершения упражнения. Это решение можно использовать как руководство, если вам нужна дополнительная помощь при работе с примерами.


Предполагаемое время для выполнения этого лабораторного: **35 минут**.

<a id="Exercise1"></a>

<a id="Exercise_1_Adding_a_Database"></a>
### <a name="exercise-1-adding-a-database"></a>Упражнение 1. Добавление базы данных

В этом упражнении вы узнаете, как добавить базу данных с таблицами приложение MusicStore в решение, чтобы использовать его данные. Когда базы данных создается с помощью модели и добавляется в решение, необходимо изменить класс StoreController, чтобы предоставить шаблон представления с данными, извлеченными из базы данных, вместо жестко заданных значений.

<a id="Ex1Task1"></a>

<a id="Task_1_-_Adding_a_Database"></a>
#### <a name="task-1---adding-a-database"></a>Задача 1 - Добавление базы данных

В этой задаче вы добавите уже созданную базу данных с основные таблицы приложения MusicStore в решение.

1. Откройте **начать** решений, расположенный **источника/сервера Ex1-AddingADatabaseDBFirst/начало/** папки.

   1. Необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
2. Добавить **MvcMusicStore** файл базы данных. В этой лаборатории вы будете использовать уже созданную базу данных с именем **MvcMusicStore.mdf**. Чтобы сделать это, щелкните правой кнопкой мыши **приложения\_данных** папку **добавить** и нажмите кнопку **существующий элемент**. Перейдите к **\Source\Assets** и выберите **MvcMusicStore.mdf** файла.

    ![Добавление существующего элемента](aspnet-mvc-4-models-and-data-access/_static/image2.png "Добавление существующего элемента")

    *Добавление существующего элемента*

    ![Файл базы данных MvcMusicStore.mdf](aspnet-mvc-4-models-and-data-access/_static/image3.png "MvcMusicStore.mdf файл базы данных")

    *Файл базы данных MvcMusicStore.mdf*

    Базы данных был добавлен в проект. Даже в том случае, если база данных находится в решении, можно запрашивать и обновлять по мере она была размещена в другой сервер базы данных.

    ![MvcMusicStore базы данных в обозревателе решений](aspnet-mvc-4-models-and-data-access/_static/image4.png "MvcMusicStore базы данных в обозревателе решений")

    *MvcMusicStore базы данных в обозревателе решений*
3. Проверьте подключение к базе данных. Чтобы сделать это, дважды щелкните **MvcMusicStore.mdf** для установления соединения.

    ![Подключение к MvcMusicStore.mdf](aspnet-mvc-4-models-and-data-access/_static/image5.png "подключение к MvcMusicStore.mdf")

    *Подключение к MvcMusicStore.mdf*

<a id="Ex1Task2"></a>

<a id="Task_2_-_Creating_a_Data_Model"></a>
#### <a name="task-2---creating-a-data-model"></a>Задача 2 - Создание модели данных

В этой задаче вы создадите модель данных для взаимодействия с базой данных, добавленные в предыдущей задаче.

1. Создайте модель данных, который будет представлять базы данных. Для этого в обозревателе решений щелкните правой кнопкой мыши **моделей** папку **добавить** и нажмите кнопку **новый элемент**. В **Добавление нового элемента** диалоговом окне выберите **данных** шаблон и затем **ADO.NET Entity Data Model** элемента. Измените имя модели данных на **StoreDB.edmx** и нажмите кнопку **добавить**.

    ![Добавление модели ADO.NET EDM StoreDB](aspnet-mvc-4-models-and-data-access/_static/image6.png "Добавление StoreDB модели EDM ADO.NET")

    *Добавление модели ADO.NET EDM StoreDB*
2. **Мастер моделей EDM** будет отображаться. Этот мастер поможет выполнить создание слоя модели. Поскольку модель должна быть создана на основе существующей базы данных, добавленные выберите **создать из базы данных** и нажмите кнопку **Далее**.

    ![Выбор содержимого модели](aspnet-mvc-4-models-and-data-access/_static/image7.png "Выбор содержимого модели")

    *Выбор содержимого модели*
3. Так как при создании модели из базы данных, необходимо будет указать используемое соединение. Нажмите кнопку **новое подключение**.
4. Выберите **Microsoft SQL Server Database File** и нажмите кнопку **Продолжить**.

    ![Выбрать источник данных](aspnet-mvc-4-models-and-data-access/_static/image8.png "выбрать источник данных")

    *Выберите источник данных*
5. Нажмите кнопку **Обзор** и выберите базу данных **MvcMusicStore.mdf** найденную на **приложения\_данных** папку и нажмите кнопку **ОК**.

    ![Свойства соединения](aspnet-mvc-4-models-and-data-access/_static/image9.png "свойства подключения")

    *Свойства подключения*
6. Созданный класс должен иметь имя, совпадающее с именем строка соединения сущности, поэтому измените ее имя на **MusicStoreEntities** и нажмите кнопку **Далее**.

    ![Выбор подключения к данным](aspnet-mvc-4-models-and-data-access/_static/image10.png "Выбор подключения к данным")

    *Выбор подключения к данным*
7. Выберите объекты базы данных для использования. Как модель сущностей будет использовать только для таблиц базы данных, выберите **таблиц** параметр и убедитесь, что **включить столбцы внешнего ключа в модель** и **множественном или единственном числе создан имена объектов** выбраны параметры. Изменить пространство имен модели для **MvcMusicStore.Model** и нажмите кнопку **Готово**.

    ![Выбор объектов базы данных](aspnet-mvc-4-models-and-data-access/_static/image11.png "Выбор объектов базы данных")

    *Выбор объектов базы данных*

    > [!NOTE]
    > Если отображается диалоговое окно с предупреждением безопасности, нажмите кнопку **ОК** для выполнения шаблона и создания классов для модели сущностей.
8. Схеме сущностей для базы данных будет отображаться, пока будет создан отдельный класс, который сопоставляется каждой таблицы в базе данных. Например **альбомов** таблицы будет представлен **альбома** класса, где каждый столбец в таблице сопоставит к свойству класса. Это позволит вам выполнять запросы и работать с объектами, представляющими строк в базе данных.

    ![Схема сущности](aspnet-mvc-4-models-and-data-access/_static/image12.png "схема сущности")

    *Схема сущности*

    > [!NOTE]
    > Шаблоны T4 (.tt) запустите код для создания классов сущностей и перезапишет существующие классы с тем же именем. В этом примере классы &quot;альбома&quot;, &quot;жанр&quot; и &quot;исполнителя&quot; были перезаписаны с помощью созданного кода.


<a id="Ex1Task3"></a>

<a id="Task_3_-_Building_the_Application"></a>
#### <a name="task-3---building-the-application"></a>Задача 3 - построение приложения

В этой задаче производится проверка, несмотря на то, что создание модели удалены **альбома**, **жанр** и **исполнителя** классов модели успешного построения проекта с помощью новые классы модели данных.

1. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.

    ![Построение проекта](aspnet-mvc-4-models-and-data-access/_static/image13.png "построение проекта")

    *Построение проекта*
2. Сборка проекта выполняется успешно. Почему это по-прежнему работает? Он работает, поскольку таблицы базы данных имеют поля, которые включают свойства, которые использовались в классах удален **альбома** и **жанр**.

    ![Сборки успешно](aspnet-mvc-4-models-and-data-access/_static/image14.png "сборок успешно завершена")

    *Выполненные сборки*
3. Хотя конструктор отображает сущности в виде схемы, они действительно классов C#. Разверните **StoreDB.edmx** узел в обозревателе решений и затем **StoreDB.tt**, вы увидите созданный новых сущностей.

    ![Созданные файлы](aspnet-mvc-4-models-and-data-access/_static/image15.png "созданные файлы")

    *Созданные файлы*

<a id="Ex1Task4"></a>

<a id="Task_4_-_Querying_the_Database"></a>
#### <a name="task-4---querying-the-database"></a>Задача 4 - запрос в базу данных

В этой задаче будет обновить класс StoreController таким образом, чтобы вместо использования жестко закодированные данные, он будет запрашивать базы данных для получения сведений.

1. Откройте **Controllers\StoreController.cs** и добавьте следующее поле в класс для хранения экземпляра **MusicStoreEntities** класс с именем **storeDB**:

    (Code Snippet - *моделей и доступ к данным — storeDB сервера Ex1*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample1.cs)]
2. **MusicStoreEntities** класс предоставляет свойство коллекции для каждой таблицы в базе данных. Обновление **Обзор** метода действия для получения жанр фильма со всеми **альбомов**.

    (Code Snippet - *модели и доступ к данным — Обзор Store сервера Ex1*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample2.cs)]

    > [!NOTE]
    > Вы используете функцию версию.NET, называемую **LINQ** (запросы LINQ), для написания выражений запросов со строгой типизацией для этих коллекций — которые будет выполнять код в базе данных и возвращают объекты, что вы можете программировать к.
    > 
    > Дополнительные сведения о LINQ см. на [сайта msdn](https://msdn.microsoft.com/library/bb397926&amp;#040;v=vs.110&amp;#041;.aspx).
3. Обновление **индекс** метода действия для получения всех жанров.

    (Code Snippet - *модели и доступ к данным — индекс Store сервера Ex1*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample3.cs)]
4. Обновление **индекс** метода действия, чтобы получить все жанры и преобразования коллекции в список.

    (Code Snippet - *модели и доступ к данным — GenreMenu Store сервера Ex1*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample4.cs)]

<a id="Ex1Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче производится проверка на страницу индекса Store теперь будет отображать жанры, хранящиеся в базе данных, а не жестко закодированное из них. Чтобы изменить этот шаблон, так как нет необходимости **StoreController** возвращает те же сущности как и раньше, несмотря на то, что это время будут извлекаться данные из базы данных.

1. Перестройте решение и нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Убедитесь, что в меню **жанров** больше не жестко списка, а данные извлекаются непосредственно из базы данных.

    ![BrowsingGenresFromDataBase](aspnet-mvc-4-models-and-data-access/_static/image16.png)

    *Просмотр жанры из базы данных*
3. Теперь перейдите к любой жанр и убедитесь, что альбомов заполняются из базы данных.

    ![Просмотр альбомов из базы данных](aspnet-mvc-4-models-and-data-access/_static/image17.png "просмотра альбомов из базы данных")

    *Просмотр альбомов из базы данных*

<a id="Exercise2"></a>

<a id="Exercise_2_Creating_a_Database_Using_Code_First"></a>
### <a name="exercise-2-creating-a-database-using-code-first"></a>Упражнение 2. Создание базы данных, сначала с помощью кода

В этом упражнении вы узнаете, как использовать подход Code First для создания базы данных с таблицами MusicStore приложения и как получить доступ к данным.

После создания модели, необходимо изменить StoreController для предоставления шаблона представления с данными, извлеченными из базы данных, вместо использования жестко заданные значения.

> [!NOTE]
> Если вы выполнили Упражнение 1 и ранее пользователь работал с использованием подхода Database First, вы узнаете как получить те же результаты с помощью другого процесса. Чтобы облегчить ознакомление были помечены задачи, которые являются общими с Упражнение 1. Если вы не были завершены упражнения 1, но нужно получить дополнительные сведения о подходе Code First, можно запустить из этого упражнения и обеспечить полную защиту этого раздела.


<a id="Ex2Task1"></a>

<a id="Task_1_-_Populating_Sample_Data"></a>
#### <a name="task-1---populating-sample-data"></a>Задача 1 - заполнению примера данных

В этой задаче вы заполните базу данных, с демонстрационными данными при его создании с помощью Code First.

1. Откройте **начать** решений, расположенный **источника/Ex2-CreatingADatabaseCodeFirst/начало/** папки. В противном случае можно продолжить использование **окончания** решение получен путем выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
2. Добавить **SampleData.cs** файл **моделей** папки. Чтобы сделать это, щелкните правой кнопкой мыши **моделей** папку **добавить** и нажмите кнопку **существующий элемент**. Перейдите к **\Source\Assets** и выберите **SampleData.cs** файла.

    ![Образец данных заполнения кода](aspnet-mvc-4-models-and-data-access/_static/image18.png "демонстрационные данные заполнения кода")

    *Образец данных заполнения кода*
3. Откройте **Global.asax.cs** файл и добавьте следующие *с помощью* инструкций.

    (Code Snippet - *модели и доступ к данным — глобальный Asax директивы Ex2*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample5.cs)]
4. В **приложения\_Start()** метода добавьте следующую строку для задания инициализации базы данных.

    (Code Snippet - *модели и доступ к данным — глобальный Asax SetInitializer Ex2*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample6.cs)]

<a id="Ex2Task2"></a>

<a id="Task_2_-_Configuring_the_connection_to_the_Database"></a>
#### <a name="task-2---configuring-the-connection-to-the-database"></a>Задача 2 - Настройка подключения к базе данных

Теперь, когда вы уже добавили в наш проект базы данных, вы напишете **Web.config** файл строку подключения.

1. Добавьте строку подключения в **Web.config**. Чтобы сделать это, откройте **Web.config** в корневую папку проекта и замените строку подключения с именем DefaultConnection со следующей строки в **&lt;connectionStrings&gt;** раздел:

    ![Расположение файла Web.config](aspnet-mvc-4-models-and-data-access/_static/image19.png "расположение файла Web.config")

    *Расположение файла Web.config*

    [!code-xml[Main](aspnet-mvc-4-models-and-data-access/samples/sample7.xml)]

<a id="Ex2Task3"></a>

<a id="Task_3_-_Working_with_the_Model"></a>
#### <a name="task-3---working-with-the-model"></a>Задача 3 - Работа с моделью

Теперь, когда вы уже настроили подключение к базе данных, вы свяжете модели с таблицами базы данных. В этой задаче будет создан класс, который будет связан в базу данных в режиме Code First. Обратите внимание, что существующий класс модели POCO, который должен быть изменен.

> [!NOTE]
> Если вы выполнили упражнении 1, можно заметить, что это было выполнено мастером. Выполняя Code First, будет вручную создать классы, которые будут связаны с сущностями данных.

1. Откройте класс POCO модели **жанр** из **моделей** папку проекта и включают идентификатор. Используйте свойство int с именем **GenreId**.

    (Code Snippet - *модели и доступ к данным — первый жанр Ex2 код*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample8.cs)]

    > [!NOTE]
    > Для работы с соглашения Code First, этот класс жанр должен иметь свойство первичного ключа, которые определяются автоматически.
    > 
    > Дополнительные сведения о первой соглашения о написании кода, в этом [статье msdn](https://msdn.microsoft.com/library/hh161541&amp;#040;v=vs.103&amp;#041;.aspx).
2. Теперь откройте класс POCO модели **альбома** из **моделей** папку проекта и включить внешние ключи, создать свойства с именами **GenreId** и  **ArtistId**. Этот класс уже есть **GenreId** для первичного ключа.

    (Code Snippet - *модели и доступ к данным — первый альбома Ex2 код*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample9.cs)]
3. Откройте класс POCO модели **исполнителя** и включают **ArtistId** свойство.

    (Code Snippet - *модели и доступ к данным — первый исполнителя Ex2 код*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample10.cs)]
4. Щелкните правой кнопкой мыши **моделей** папку проекта и выберите **Add | Класс**. Назовите файл **MusicStoreEntities.cs**. Щелкните **Add.**

    ![Добавление класса](aspnet-mvc-4-models-and-data-access/_static/image20.png "Добавление класса")

    *Добавление нового элемента*

    ![Добавление класса class2](aspnet-mvc-4-models-and-data-access/_static/image21.png "Добавление класс2")

    *Добавление класса*
5. Откройте класс, созданный ранее, **MusicStoreEntities.cs**и включите пространства имен **System.Data.Entity** и **System.Data.Entity.Infrastructure**.

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample11.cs)]
6. Замените объявление класса для расширения **DbContext** класса: Объявите общую **DBSet** и переопределить **OnModelCreating** метод. После выполнения этого шага вы получите доменного класса, который будет связан модели с помощью Entity Framework. Для этого замените код класса следующим:

    (Code Snippet - *модели и доступ к данным — первый MusicStoreEntities Ex2 код*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample12.cs)]

> [!NOTE]
> С помощью Entity Framework **DbContext** и **DBSet** можно запросить класс POCO жанра. Путем расширения **OnModelCreating** метод, вы задаете **кода** как жанр сопоставляется с таблицей базы данных. Дополнительные сведения о DBContext и DBSet можно найти в этой статье msdn: [ссылку](https://msdn.microsoft.com/library/system.data.entity.dbcontext(v=vs.103).aspx)

<a id="Ex2Task4"></a>

<a id="Task_4_-_Querying_the_Database"></a>
#### <a name="task-4---querying-the-database"></a>Задача 4 - запрос в базу данных

В этой задаче будет обновите класс StoreController, поэтому, вместо использования жестко закодированные данные, он будет извлекать его из базы данных.

> [!NOTE]
> Эта задача является похожая Упражнение 1.
> 
> Если вы выполнили Упражнение 1 можно заметить, эти действия одинаковы в обоих методов (сначала база данных или Code first). Они отличаются в том, как данные, связанные с моделью, но еще из контроллера в прозрачный доступ к сущностям данных.


1. Откройте **Controllers\StoreController.cs** и добавьте следующее поле в класс для хранения экземпляра **MusicStoreEntities** класс с именем **storeDB**:

    (Code Snippet - *моделей и доступ к данным — storeDB сервера Ex1*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample13.cs)]
2. **MusicStoreEntities** класс предоставляет свойство коллекции для каждой таблицы в базе данных. Обновление **Обзор** метода действия для получения жанр фильма со всеми **альбомов**.

    (Code Snippet - *модели и доступ к данным — Обзор Store Ex2*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample14.cs)]

    > [!NOTE]
    > Вы используете функцию версию.NET, называемую **LINQ** (запросы LINQ), для написания выражений запросов со строгой типизацией для этих коллекций — которые будет выполнять код в базе данных и возвращают объекты, что вы можете программировать к.
    > 
    > Дополнительные сведения о LINQ см. на [сайта msdn](https://msdn.microsoft.com/library/bb397926(v=vs.110).aspx).
3. Обновление **индекс** метода действия для получения всех жанров.

    (Code Snippet - *модели и доступ к данным — индекс Store Ex2*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample15.cs)]
4. Обновление **индекс** метода действия, чтобы получить все жанры и преобразования коллекции в список.

    (Code Snippet - *модели и доступ к данным — Ex2 Store GenreMenu*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample16.cs)]

<a id="Ex2Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче производится проверка на страницу индекса Store теперь будет отображать жанры, хранящиеся в базе данных, а не жестко закодированное из них. Чтобы изменить этот шаблон, так как нет необходимости **StoreController** возвращает же **StoreIndexViewModel** как и раньше, но на этот раз будут извлекаться данные из базы данных.

1. Перестройте решение и нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Убедитесь, что в меню **жанров** больше не жестко списка, а данные извлекаются непосредственно из базы данных.

    ![BrowsingGenresFromDataBase](aspnet-mvc-4-models-and-data-access/_static/image22.png)

    *Просмотр жанры из базы данных*
3. Теперь перейдите к любой жанр и убедитесь, что альбомов заполняются из базы данных.

    ![Просмотр альбомов из базы данных](aspnet-mvc-4-models-and-data-access/_static/image23.png "просмотра альбомов из базы данных")

    *Просмотр альбомов из базы данных*

<a id="Exercise3"></a>

<a id="Exercise_3_Querying_the_Database_with_Parameters"></a>
### <a name="exercise-3-querying-the-database-with-parameters"></a>Упражнение 3. Запрос в базу данных с параметрами

В этом упражнении вы узнаете, как запросить базу данных с помощью параметров и как использовать формирование результатов запроса, это функция, которая уменьшает число базы данных обращается к извлечения данных в более эффективный способ.

> [!NOTE]
> Дополнительные сведения о формировании результат запроса, посетите следующий [статье msdn](https://msdn.microsoft.com/library/bb896272&amp;#040;v=vs.100&amp;#041;.aspx).

<a id="Ex3Task1"></a>

<a id="Task_1_-_Modifying_StoreController_to_Retrieve_Albums_from_Database"></a>
#### <a name="task-1---modifying-storecontroller-to-retrieve-albums-from-database"></a>Задача 1 - изменение StoreController получить альбомов из базы данных

В этой задаче будет изменено **StoreController** класс для доступа к базе данных для получения альбомов из определенного жанра.

1. Откройте **начать** решений, расположенный **Source\Ex3 QueryingTheDatabaseWithParametersCodeFirst\Begin** папку, если вы хотите использовать подход Code-First или **Source\ Ex3 QueryingTheDatabaseWithParametersDBFirst\Begin** папку, если вы хотите использовать подход Database First. В противном случае можно продолжить использование **окончания** решение получен путем выполнения предыдущего упражнения.

   1. Если вы открыли предоставленный **начать** решение, необходимо будет загрузить некоторые отсутствующие пакеты NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** меню и выберите **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является отсутствие поставлять все библиотеки в проекте, уменьшив размер проекта. С помощью NuGet Power Tools путем указания версий пакета в файле Packages.config можно для скачивания всех необходимых библиотек при первом запуске проекта. Вот почему необходимо выполните описанные выше действия, после открытия существующего решения из этой лаборатории.
2. Откройте **StoreController** классе, чтобы изменить **Обзор** метода действия. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
3. Изменение **Обзор** метода действия для получения альбомов для определенного жанра. Чтобы сделать это, замените следующий код:

    (Code Snippet - *модели и доступ к данным — Ex3 StoreController BrowseMethod*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample17.cs)]

> [!NOTE]
> Чтобы заполнить коллекцию сущностей, необходимо использовать **Include** метод, чтобы указать, требуется извлечь альбомов слишком. Можно использовать. **Single()** расширения в LINQ, так как в этом случае ожидается только один жанр, альбома. **Single()** метод принимает лямбда-выражение как параметр, указывающий в этом случае объект жанр таким образом, чтобы его имя совпадает со значением, который определен.
> 
> Будет воспользоваться преимуществами функцию, которая позволяет указывать другие связанные сущности, которые требуется также загружать при извлечении объекта жанра. Эта функция называется **формирование результата запроса**и позволяет сократить количество раз, необходимые для доступа к базе данных для получения сведений. В этом случае требуется упреждающую выборку альбомов для жанра, извлечении.
> 
> Запрос включает **Genres.Include (&quot;альбомов&quot;)** чтобы указать, что вы хотите также связанные альбомы. Это приведет к более эффективной работе приложения, так как он извлечет жанр и дисках данных в запросе отдельной базы данных.

<a id="Ex3Task2"></a>

<a id="Task_2_-_Running_the_Application"></a>
#### <a name="task-2---running-the-application"></a>Задача 2 - запуск приложения

В этой задаче будет запустите приложение и получить фотоальбомы конкретный жанр, выбранный из базы данных.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **/Store/обзора? жанр = Pop** чтобы убедиться, что результаты извлекаются из базы данных.

    ![Просмотр по жанру](aspnet-mvc-4-models-and-data-access/_static/image24.png "Просмотр по жанру")

    *Просмотр/Store/обзора? жанр = Pop*

<a id="Ex3Task3"></a>

<a id="Task_3_-_Accessing_Albums_by_Id"></a>
#### <a name="task-3---accessing-albums-by-id"></a>Задача 3 - доступ к альбомам, по идентификатору

В этой задаче будет повторяться предыдущей процедуре, чтобы получить альбомов по их идентификаторам.

1. Закройте браузер, при необходимости, чтобы вернуться в Visual Studio. Откройте **StoreController** классе, чтобы изменить **сведения** метода действия. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
2. Изменение **сведения** на основе метода действия для получения сведений о альбомов их **идентификатор**. Чтобы сделать это, замените следующий код:

    (Code Snippet - *модели и доступ к данным — Ex3 StoreController DetailsMethod*)

    [!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample18.cs)]

<a id="Ex3Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4 - запуск приложения

В этой задаче вы запустите приложение в веб-браузер и получить сведения об альбоме по их идентификаторам.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **/Store/Details/51** или Обзор жанры и выберите альбом, чтобы убедиться, что результаты извлекаются из базы данных.

    ![Просмотр сведений о](aspnet-mvc-4-models-and-data-access/_static/image25.png "Просмотр сведений")

    *Просмотр /Store/Details/51*

> [!NOTE]
> Кроме того, можно развернуть это приложение на веб-сайтов Windows Azure ниже [приложении б: Публикация приложения ASP.NET MVC 4 с помощью веб-развертывания](#AppendixB).

* * *

<a id="Summary"></a>

<a id="Summary"></a>
## <a name="summary"></a>Сводка

С этого занятия практических, вы узнали Основы модели ASP.NET MVC и доступа к данным, с помощью **Database First** подход, а также **Code First** подход:

- Как добавить базу данных в решение для обработки данных
- Обновление контроллеров для предоставления шаблонов представлений с данными, извлеченными из базы данных, а не жестко
- Как запросить базу данных с помощью параметров
- Как использовать запрос результат формирования, это функция, которая уменьшает количество обращений к базе данных, извлечение данных в более эффективный способ
- Способы использования подхода Database First и Code First в Microsoft Entity Framework для связи с базой данных, с помощью модели

<a id="AppendixA"></a>

<a id="Appendix_A_Installing_Visual_Studio_Express_2012_for_Web"></a>
## <a name="appendix-a-installing-visual-studio-express-2012-for-web"></a>Приложение а. Установка Visual Studio Express 2012 для Web

Вы можете установить **Microsoft Visual Studio Express 2012 для Web** или другой &quot;Express&quot; версию с помощью **[Microsoft Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx)**. Приведенные ниже инструкции описывают действия, необходимые для установки *Visual studio Express 2012 для Web* с помощью *Microsoft Web Platform Installer*.

1. Перейдите к [ [ https://go.microsoft.com/?linkid=9810169 ](https://go.microsoft.com/?linkid=9810169) ](https://go.microsoft.com/?linkid=9810169). Кроме того, если вы уже установили установщика веб-платформы, можно открыть его и выполните поиск продукта &quot; <em>Visual Studio Express 2012 для Web с пакетом Windows Azure SDK</em>&quot;.
2. Щелкните **установить сейчас**. Если у вас нет **установщика веб-платформы** вы будете перенаправлены к сначала загрузить и установить его.
3. Один раз **установщика веб-платформы** открыт, нажмите кнопку **установить** для запуска программы установки.

    ![Установка Visual Studio Express](aspnet-mvc-4-models-and-data-access/_static/image26.png "установка Visual Studio Express")

    *Установка Visual Studio Express*
4. Прочтите лицензии и условия все продукты и нажмите кнопку **я принимаю** для продолжения.

    ![Принятие условий лицензии](aspnet-mvc-4-models-and-data-access/_static/image27.png)

    *Принятие условий лицензии*
5. Подождите, пока не завершится процесс загрузки и установки.

    ![Ход установки](aspnet-mvc-4-models-and-data-access/_static/image28.png)

    *Ход выполнения установки*
6. После завершения установки нажмите кнопку **Готово**.

    ![Установка завершена](aspnet-mvc-4-models-and-data-access/_static/image29.png)

    *Установка завершена*
7. Нажмите кнопку **выхода** закрыть установщик веб-платформы.
8. Чтобы открыть Visual Studio Express для Web, перейдите к **запустить** экрана и Займитесь написанием &quot; **VS Express**&quot;, нажмите кнопку на **VS Express для Web** Плитка.

    ![VS Express для Web плитки](aspnet-mvc-4-models-and-data-access/_static/image30.png)

    *VS Express для Web плитки*

<a id="AppendixB"></a>

<a id="Appendix_B_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
## <a name="appendix-b-publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Приложение б. Публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

В этом приложении показано, как создать новый веб-сайт на портале управления Windows Azure и опубликовать приложение, полученный после лаборатории, используя преимущества компонентов публикации веб-развертывания, предоставляемые Windows Azure.

<a id="ApxBTask1"></a>

<a id="Task_1_-_Creating_a_New_Web_Site_from_the_Windows_Azure_Portal"></a>
#### <a name="task-1---creating-a-new-web-site-from-the-windows-azure-portal"></a>Задача 1 - Создание нового веб-сайта с Windows Azure Portal

1. Перейдите к [портала управления Windows Azure](https://manage.windowsazure.com/) и войдите с использованием учетных данных Майкрософт, связанную с вашей подпиской.

    > [!NOTE]
    > С помощью Windows Azure можно бесплатное размещение 10 веб-сайтов ASP.NET и затем масштабировать по мере увеличения объема трафика. Вы можете зарегистрироваться [здесь](https://aka.ms/aspnet-hol-azure).

    ![Войдите на портал Windows Azure](aspnet-mvc-4-models-and-data-access/_static/image31.png "Войдите на портал Windows Azure")

    *Войдите на портал управления Windows Azure*
2. Нажмите кнопку **New** на панели команд.

    ![Создание нового веб-сайта](aspnet-mvc-4-models-and-data-access/_static/image32.png "создания нового веб-сайта")

    *Создание нового веб-сайта*
3. Нажмите кнопку **вычислений** | **веб-сайт**. Затем выберите **быстрое создание** параметр. Укажите URL-адрес доступен для нового веб-сайта и нажмите кнопку **создать веб-сайт**.

    > [!NOTE]
    > Веб-сайта Windows Azure является узлом для веб-приложение, работающее в облаке, вы можете управлять. Быстрое создание позволяет развернуть завершенное веб-приложения для Windows Azure веб-сайта из вне портала. Он не включает действия по настройке базы данных.

    ![Создание нового веб-сайта, с помощью быстрого создания](aspnet-mvc-4-models-and-data-access/_static/image33.png "создания нового веб-сайта, с помощью быстрого создания")

    *Создание нового веб-сайта, с помощью быстрого создания*
4. Подождите, пока новый **веб-сайт** создается.
5. После создания веб-сайт, щелкните ссылку под **URL-адрес** столбца. Проверьте, что новый веб-сайт работает.

    ![Выбрав новый веб-сайт](aspnet-mvc-4-models-and-data-access/_static/image34.png "просмотра на новый веб-сайт")

    *Выбрав новый веб-сайт*

    ![Веб-сайт работал](aspnet-mvc-4-models-and-data-access/_static/image35.png "веб-узлом")

    *Веб-сайт под управлением*
6. Вернитесь на портал и щелкните имя веб-сайт в **имя** столбец для отображения страницы управления.

    ![Открытие страницы управления веб-сайт](aspnet-mvc-4-models-and-data-access/_static/image36.png "Открытие страницы управления веб-сайта")

    *Открытие страницы управления веб-сайта*
7. В **панели мониторинга** раздела **быстрый обзор** щелкните **загрузить профиль публикации** ссылку.

    > [!NOTE]
    > *Профиль публикации* содержит все сведения, необходимые для публикации веб-приложения на веб-сайт Windows Azure для каждого разрешенного метода публикации. Профиль публикации содержит URL-адреса, учетные данные пользователя и строк базы данных, необходимых для подключения и проверку подлинности в каждой из конечных точек, для которых включена метода публикации. **Microsoft WebMatrix 2**, **Microsoft Visual Studio Express для Web** и **Microsoft Visual Studio 2012** поддерживают чтение профилей публикации для автоматизации настройки из этих программ для Публикация веб-приложений на веб-сайтах Windows Azure.

    ![Профиль публикации веб-сайт загрузки](aspnet-mvc-4-models-and-data-access/_static/image37.png "профиль публикации веб-сайта загрузки")

    *Профиль публикации веб-сайта загрузки*
8. Скачайте файл профиля публикации в известном месте. Далее в этом упражнении показано, как использовать этот файл для публикации веб-приложения на веб-сайтах, Windows Azure из Visual Studio.

    ![Сохранение файла профиля публикации](aspnet-mvc-4-models-and-data-access/_static/image38.png "Сохранение профиля публикации")

    *Сохранение файла профиля публикации*

<a id="ApxBTask2"></a>

<a id="Task_2_-_Configuring_the_Database_Server"></a>
#### <a name="task-2---configuring-the-database-server"></a>Задача 2 - Настройка сервера базы данных

Если приложение использует SQL Server, баз данных, необходимо будет создать сервер базы данных SQL. Эту задачу может пропустить, если вы хотите развернуть простое приложение, которое не использует SQL Server.

1. Вам потребуется сервер базы данных SQL для хранения базы данных приложения. Серверы баз данных SQL можно просмотреть в своей подписке на портале управления Windows Azure в **баз данных Sql** | **серверы** | **сервера Панель мониторинга**. Если у вас на сервер, созданный, можно создать его, используя **добавить** кнопки на панели команд. Запишите **имя сервера и URL-адрес, имя входа администратора и пароль**, как их использование в следующие задачи. Не создавайте базы данных, так как он будет создан в более позднем этапе.

    ![Панель мониторинга базы данных SQL Server](aspnet-mvc-4-models-and-data-access/_static/image39.png "панель мониторинга базы данных SQL Server")

    *Панель мониторинга базы данных SQL Server*
2. В следующей задаче вы проверите подключения к базе данных из Visual Studio по этой причине необходимо включить IP-адрес локального сервера списка **разрешенные IP-адреса**. Чтобы сделать это, нажмите кнопку **Настройка**, выберите IP-адрес из **текущий IP-адрес клиента** и вставьте его на **начальный IP-адрес** и **конечный IP-адрес** текстовые поля и нажмите кнопку ![add-client-ip-address-ok-button](aspnet-mvc-4-models-and-data-access/_static/image40.png) кнопки.

    ![Добавление IP-адрес клиента](aspnet-mvc-4-models-and-data-access/_static/image41.png)

    *Добавление IP-адрес клиента*
3. Один раз **IP-адрес клиента** добавляется разрешенных IP-адресов выберите на **Сохранить** для подтверждения изменения.

    ![Подтверждение изменений](aspnet-mvc-4-models-and-data-access/_static/image42.png)

    *Подтверждение изменений*

<a id="ApxBTask3"></a>

<a id="Task_3_-_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
#### <a name="task-3---publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Задача 3 - публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

1. Вернитесь к решению для ASP.NET MVC 4. В **обозревателе решений**, щелкните правой кнопкой мыши проект веб-сайта и выберите **публикации**.

    ![Публикация приложения](aspnet-mvc-4-models-and-data-access/_static/image43.png "публикации приложения")

    *Публикация веб-сайта*
2. Импортируйте профиль публикации, сохраненный в первой задаче.

    ![Импорт профиля публикации](aspnet-mvc-4-models-and-data-access/_static/image44.png "Импорт профиля публикации")

    *Импорт профиля публикации*
3. Нажмите кнопку **Проверка подключения**. После завершения проверки нажмите кнопку **Далее**.

    > [!NOTE]
    > Проверка будет завершена, как только вы увидите зеленый флажок отображаться рядом с кнопкой проверить подключение.

    ![Проверка подключения](aspnet-mvc-4-models-and-data-access/_static/image45.png "Проверка подключения")

    *Проверка подключения*
4. В **параметры** раздела **баз данных** нажмите кнопку рядом с текстовое поле подключения к базе данных (т. е. **DefaultConnection**).

    ![Конфигурация веб-развертывания](aspnet-mvc-4-models-and-data-access/_static/image46.png "конфигурация веб-развертывания")

    *Конфигурация веб-развертывания*
5. Настройте подключение к базе данных следующим образом:

   - В **имя_сервера** введите URL-адреса серверу базы данных SQL с помощью *tcp:* префикс.
   - В **имя пользователя** введите имя входа администратора сервера.
   - В **пароль** введите пароль входа администратора сервера.
   - Введите новое имя базы данных.

     ![Настройка строки подключения назначения](aspnet-mvc-4-models-and-data-access/_static/image47.png "Настройка строка соединения с назначением")

     *Настройка строки подключения назначения*
6. Затем нажмите кнопку **ОК**. При появлении запроса на создание базы данных нажмите кнопку **Да**.

    ![Создание базы данных](aspnet-mvc-4-models-and-data-access/_static/image48.png "Создание строки базы данных")

    *Создание базы данных*
7. В текстовое поле подключение по умолчанию отображается строка подключения, который будет использоваться для подключения к базе данных SQL в Windows Azure. Затем нажмите кнопку **Далее**.

    ![Строка подключения, указывающий на базу данных SQL](aspnet-mvc-4-models-and-data-access/_static/image49.png "строку подключения, указывающий на базу данных SQL")

    *Строка подключения, указывающий на базу данных SQL*
8. В **предварительной версии** щелкните **публикации**.

    ![Публикация веб-приложения](aspnet-mvc-4-models-and-data-access/_static/image50.png "публикации веб-приложения")

    *Публикация веб-приложения*
9. После завершения процесса публикации в браузере по умолчанию откроется опубликованного веб-сайта.

<a id="AppendixC"></a>

<a id="Appendix_C_Using_Code_Snippets"></a>
## <a name="appendix-c-using-code-snippets"></a>Приложение c. Фрагменты кода

С помощью фрагментов кода у вас есть весь код, который требуется в вашем распоряжении. Лаборатории документ поможет определить точно при их использовании, как показано на рисунке ниже.

![Фрагменты кода Visual Studio, чтобы вставить код в проект](aspnet-mvc-4-models-and-data-access/_static/image51.png "фрагменты кода с помощью Visual Studio, чтобы вставить код в проект")

*Фрагменты кода Visual Studio, чтобы вставить код в проект*

***Чтобы добавить фрагмент кода, с помощью клавиатуры (только C#)***

1. Поместите курсор в место вставки кода.
2. Начните вводить имя фрагмента (без пробелов и дефисов).
3. Посмотрите, как IntelliSense отображает, совпадающие с именами фрагменты.
4. Выберите правильный фрагмент (или продолжите ввод, пока не будет выделен весь фрагмент имени).
5. Нажмите клавишу Tab дважды, чтобы вставить фрагмент в положении курсора.

![Начните вводить имя фрагмента](aspnet-mvc-4-models-and-data-access/_static/image52.png "начните вводить имя фрагмента")

*Начните вводить имя фрагмента*

![Нажмите клавишу Tab, чтобы выделить фрагмент в выделенный](aspnet-mvc-4-models-and-data-access/_static/image53.png "нажмите клавишу Tab, чтобы выделить выделенный фрагмент")

*Нажмите клавишу Tab, чтобы выделить выделенный фрагмент*

![Снова нажмите клавишу Tab и фрагмент будет расширяться](aspnet-mvc-4-models-and-data-access/_static/image54.png "еще раз нажмите клавишу Tab и фрагмент будет расширяться")

*Снова нажмите клавишу Tab и фрагмент будет расширяться*

***Чтобы добавить фрагмент кода, с помощью мыши (C#, Visual Basic и XML)*** 1. Щелкните правой кнопкой мыши место для вставки фрагмента кода.

1. Выберите **вставить фрагмент** следуют **Мои фрагменты кода**.
2. Выберите соответствующий фрагмент из списка, щелкнув его.

![Щелкните правой кнопкой мыши, где необходимо вставить фрагмент кода и выберите Вставить фрагмент](aspnet-mvc-4-models-and-data-access/_static/image55.png "щелкните правой кнопкой мыши, где необходимо вставить фрагмент кода и выберите Вставить фрагмент")

*Щелкните правой кнопкой мыши место для вставки фрагмента кода и выберите Вставить фрагмент*

![Выберите соответствующий фрагмент из списка, щелкнув по ней](aspnet-mvc-4-models-and-data-access/_static/image56.png "выбрать соответствующий фрагмент из списка, щелкнув по ней")

*Выберите соответствующий фрагмент из списка, щелкнув по ней*
