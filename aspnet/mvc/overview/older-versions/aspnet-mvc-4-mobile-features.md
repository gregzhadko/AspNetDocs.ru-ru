---
uid: mvc/overview/older-versions/aspnet-mvc-4-mobile-features
title: Мобильные функции ASP.NET MVC 4 | Документация Майкрософт
author: Rick-Anderson
description: Теперь в этом руководстве используется версия MVC 5 с примерами кода при развертывании мобильного веб-приложения ASP.NET MVC 5 на веб-сайтах Azure.
ms.author: riande
ms.date: 08/15/2012
ms.assetid: 27dc4fc8-1b51-43b0-933f-fc1b52476523
msc.legacyurl: /mvc/overview/older-versions/aspnet-mvc-4-mobile-features
msc.type: authoredcontent
ms.openlocfilehash: 9716def069ca9f7115af32e16381f41bd4d13342
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457652"
---
# <a name="aspnet-mvc-4-mobile-features"></a><span data-ttu-id="08d1a-103">Мобильные функции ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="08d1a-103">ASP.NET MVC 4 Mobile Features</span></span>

<span data-ttu-id="08d1a-104">по [Рик Андерсон (](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="08d1a-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="08d1a-105">Теперь в этом руководстве используется версия MVC 5 с примерами кода при [развертывании мобильного веб-приложения ASP.NET MVC 5 на веб-сайтах Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-mobile-app/).</span><span class="sxs-lookup"><span data-stu-id="08d1a-105">There is now an MVC 5 version of this tutorial with code samples at [Deploy an ASP.NET MVC 5 Mobile Web Application on Azure Web Sites](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-mobile-app/).</span></span>

<span data-ttu-id="08d1a-106">В этом учебнике рассматриваются основы работы с мобильными функциями в веб-приложении ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="08d1a-106">This tutorial will teach you the basics of how to work with mobile features in an ASP.NET MVC 4 Web application.</span></span> <span data-ttu-id="08d1a-107">Для работы с этим руководством можно использовать [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) или Visual Web Developer 2010 Express с пакетом обновления 1 (&quot;Visual Web Developer или vWD&quot;).</span><span class="sxs-lookup"><span data-stu-id="08d1a-107">For this tutorial, you can use [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) or Visual Web Developer 2010 Express Service Pack 1 (&quot;Visual Web Developer or VWD&quot;).</span></span> <span data-ttu-id="08d1a-108">Если у вас уже есть профессиональная версия Visual Studio, ее можно использовать.</span><span class="sxs-lookup"><span data-stu-id="08d1a-108">You can use the professional version of Visual Studio if you already have that.</span></span>

<span data-ttu-id="08d1a-109">Прежде чем начать, убедитесь, что установлены предварительные требования, перечисленные ниже.</span><span class="sxs-lookup"><span data-stu-id="08d1a-109">Before you start, make sure you've installed the prerequisites listed below.</span></span>

- <span data-ttu-id="08d1a-110">[Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) (рекомендуется) или Visual Studio Web Developer Express SP1.</span><span class="sxs-lookup"><span data-stu-id="08d1a-110">[Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) (recommended) or Visual Studio Web Developer Express SP1.</span></span> <span data-ttu-id="08d1a-111">Visual Studio 2012 содержит ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="08d1a-111">Visual Studio 2012 contains ASP.NET MVC 4.</span></span> <span data-ttu-id="08d1a-112">Если вы используете Visual Web Developer 2010, необходимо установить [ASP.NET MVC 4](https://go.microsoft.com/fwlink/?LinkId=243392).</span><span class="sxs-lookup"><span data-stu-id="08d1a-112">If you are using Visual Web Developer 2010, you must install [ASP.NET MVC 4](https://go.microsoft.com/fwlink/?LinkId=243392).</span></span>

<span data-ttu-id="08d1a-113">Кроме того, понадобится эмулятор браузера для мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="08d1a-113">You will also need a mobile browser emulator.</span></span> <span data-ttu-id="08d1a-114">Можно использовать любое из следующих средств:</span><span class="sxs-lookup"><span data-stu-id="08d1a-114">Any of the following will work:</span></span>

- <span data-ttu-id="08d1a-115">[Эмулятор Windows 7 Phone](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span><span class="sxs-lookup"><span data-stu-id="08d1a-115">[Windows 7 Phone Emulator](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span></span> <span data-ttu-id="08d1a-116">(Это эмулятор, используемый в большинстве снимков экрана в этом учебнике.)</span><span class="sxs-lookup"><span data-stu-id="08d1a-116">(This is the emulator that's used in most of the screen shots in this tutorial.)</span></span>
- <span data-ttu-id="08d1a-117">Измените строку агента пользователя для эмуляции iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-117">Change the user agent string to emulate an iPhone.</span></span> <span data-ttu-id="08d1a-118">См. [эту](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) запись блога.</span><span class="sxs-lookup"><span data-stu-id="08d1a-118">See [this](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) blog entry.</span></span>
- [<span data-ttu-id="08d1a-119">Opera Mobile Emulator</span><span class="sxs-lookup"><span data-stu-id="08d1a-119">Opera Mobile Emulator</span></span>](http://www.opera.com/developer/tools/mobile/)
- <span data-ttu-id="08d1a-120">[Apple Safari](http://www.apple.com/safari/download/) с агентом пользователя, имеющим значение iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-120">[Apple Safari](http://www.apple.com/safari/download/) with the user agent set to iPhone.</span></span> <span data-ttu-id="08d1a-121">Инструкции по настройке агента пользователя в Safari на "iPhone" см. [в статье как разрешить Safari в браузере Internet Explorer](http://www.davidalison.com/2008/05/how-to-let-safari-pretend-its-ie.html) в блоге Дэвид Алисон.</span><span class="sxs-lookup"><span data-stu-id="08d1a-121">For instructions on how to set the user agent in Safari to "iPhone", see [How to let Safari pretend it's IE](http://www.davidalison.com/2008/05/how-to-let-safari-pretend-its-ie.html) on David Alison's blog.</span></span>

<span data-ttu-id="08d1a-122">К этой статье прилагаются следующие проекты Visual Studio с исходным кодом C#:</span><span class="sxs-lookup"><span data-stu-id="08d1a-122">Visual Studio projects with C# source code are available to accompany this topic:</span></span>

- [<span data-ttu-id="08d1a-123">Начальная загрузка проекта</span><span class="sxs-lookup"><span data-stu-id="08d1a-123">Starter project download</span></span>](https://go.microsoft.com/fwlink/?linkid=228307&amp;clcid=0x409)
- [<span data-ttu-id="08d1a-124">Завершено скачивание проекта</span><span class="sxs-lookup"><span data-stu-id="08d1a-124">Completed project download</span></span>](https://go.microsoft.com/fwlink/?linkid=228306&amp;clcid=0x409)

### <a name="what-youll-build"></a><span data-ttu-id="08d1a-125">Что вы создадите</span><span class="sxs-lookup"><span data-stu-id="08d1a-125">What You'll Build</span></span>

<span data-ttu-id="08d1a-126">В рамках этого руководства вы добавите функции мобильных устройств в простое приложение, посвященное конференции, которое предоставляется в [начальном проекте](https://go.microsoft.com/fwlink/?LinkId=228307).</span><span class="sxs-lookup"><span data-stu-id="08d1a-126">For this tutorial, you'll add mobile features to the simple conference-listing application that's provided in the [starter project](https://go.microsoft.com/fwlink/?LinkId=228307).</span></span> <span data-ttu-id="08d1a-127">На следующем снимке экрана показана страница «Теги» завершенного приложения, как показано в [эмуляторе Windows 7 Phone](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span><span class="sxs-lookup"><span data-stu-id="08d1a-127">The following screenshot shows the tags page of the completed application as seen in the [Windows 7 Phone Emulator](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span></span> <span data-ttu-id="08d1a-128">Для упрощения ввода с клавиатуры см. раздел [Назначение клавиш для эмулятора Windows Phone](https://msdn.microsoft.com/library/ff754352(v=vs.92).aspx) .</span><span class="sxs-lookup"><span data-stu-id="08d1a-128">See [Keyboard Mapping for Windows Phone Emulator](https://msdn.microsoft.com/library/ff754352(v=vs.92).aspx) to simplify keyboard input.</span></span>

<span data-ttu-id="08d1a-129">[![p1_Tags_CompletedProj](aspnet-mvc-4-mobile-features/_static/image2.png)](aspnet-mvc-4-mobile-features/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-129">[![p1_Tags_CompletedProj](aspnet-mvc-4-mobile-features/_static/image2.png)](aspnet-mvc-4-mobile-features/_static/image1.png)</span></span>

<span data-ttu-id="08d1a-130">Для разработки мобильного приложения можно использовать Internet Explorer версии 9 или 10, FireFox или Chrome, задав [строку агента пользователя](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/).</span><span class="sxs-lookup"><span data-stu-id="08d1a-130">You can use Internet Explorer version 9 or 10, FireFox or Chrome to develop your mobile application by setting the [user agent string](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/).</span></span> <span data-ttu-id="08d1a-131">На следующем рисунке показано завершенное руководство по эмуляции iPhone с помощью Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="08d1a-131">The following image shows the completed tutorial using Internet Explorer emulating an iPhone.</span></span> <span data-ttu-id="08d1a-132">Для отладки приложения можно использовать средства разработчика и [средство Fiddler](http://www.fiddler2.com/fiddler2/) для Internet Explorer F-12.</span><span class="sxs-lookup"><span data-stu-id="08d1a-132">You can use the Internet Explorer F-12 developer tools and the [Fiddler tool](http://www.fiddler2.com/fiddler2/) to help debug your application.</span></span>

![](aspnet-mvc-4-mobile-features/_static/image3.png)

### <a name="skills-youll-learn"></a><span data-ttu-id="08d1a-133">Чему вы научитесь</span><span class="sxs-lookup"><span data-stu-id="08d1a-133">Skills You'll Learn</span></span>

<span data-ttu-id="08d1a-134">В этом учебнике вы узнаете:</span><span class="sxs-lookup"><span data-stu-id="08d1a-134">Here's what you'll learn:</span></span>

- <span data-ttu-id="08d1a-135">Как шаблоны ASP.NET MVC 4 используют атрибут `viewport` HTML5 и адаптивную визуализацию для улучшения отображения на мобильных устройствах.</span><span class="sxs-lookup"><span data-stu-id="08d1a-135">How the ASP.NET MVC 4 templates use the HTML5 `viewport` attribute and adaptive rendering to improve display on mobile devices.</span></span>
- <span data-ttu-id="08d1a-136">Создание представлений для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-136">How to create mobile-specific views.</span></span>
- <span data-ttu-id="08d1a-137">Создание переключателя представлений, который позволяет пользователям переключаться между мобильным представлением и представлением рабочего стола приложения.</span><span class="sxs-lookup"><span data-stu-id="08d1a-137">How to create a view switcher that lets users toggle between a mobile view and a desktop view of the application.</span></span>

### <a name="getting-started"></a><span data-ttu-id="08d1a-138">Начало работы</span><span class="sxs-lookup"><span data-stu-id="08d1a-138">Getting Started</span></span>

<span data-ttu-id="08d1a-139">Скачайте приложение с перечнем конференций для начального проекта по следующей ссылке: [download](https://go.microsoft.com/fwlink/?LinkId=228307).</span><span class="sxs-lookup"><span data-stu-id="08d1a-139">Download the conference-listing application for the starter project using the following link: [Download](https://go.microsoft.com/fwlink/?LinkId=228307).</span></span> <span data-ttu-id="08d1a-140">Затем в проводнике Windows щелкните правой кнопкой мыши файл *мвкмобиле. zip* и выберите пункт **свойства**.</span><span class="sxs-lookup"><span data-stu-id="08d1a-140">Then in Windows Explorer, right-click the *MvcMobile.zip* file and choose **Properties**.</span></span> <span data-ttu-id="08d1a-141">В диалоговом окне **Свойства мвкмобиле. zip** нажмите кнопку **разблокировать** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-141">In the **MvcMobile.zip Properties** dialog box, choose the **Unblock** button.</span></span> <span data-ttu-id="08d1a-142">Разблокировка устраняет предупреждение системы безопасности, выводимое при попытке использовать *ZIP-файл* , загруженный из Интернета.</span><span class="sxs-lookup"><span data-stu-id="08d1a-142">(Unblocking prevents a security warning that occurs when you try to use a *.zip* file that you've downloaded from the web.)</span></span>

![p1_unBlock](aspnet-mvc-4-mobile-features/_static/image4.png)

<span data-ttu-id="08d1a-144">Щелкните правой кнопкой мыши файл *мвкмобиле. zip* и выберите **извлечь все** , чтобы распаковать файл.</span><span class="sxs-lookup"><span data-stu-id="08d1a-144">Right-click the *MvcMobile.zip* file and select **Extract All** to unzip the file.</span></span> <span data-ttu-id="08d1a-145">В Visual Studio откройте файл *мвкмобиле. sln* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-145">In Visual Studio, open the *MvcMobile.sln* file.</span></span>

<span data-ttu-id="08d1a-146">Нажмите клавиши CTRL + F5, чтобы запустить приложение, которое будет отображаться в браузере настольных систем.</span><span class="sxs-lookup"><span data-stu-id="08d1a-146">Press CTRL+F5 to run the application, which will display it in your desktop browser.</span></span> <span data-ttu-id="08d1a-147">Запустите эмулятор браузера мобильного устройства, скопируйте URL-адрес приложения конференции в эмулятор и щелкните ссылку **Обзор по тегу** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-147">Start your mobile browser emulator, copy the URL for the conference application into the emulator, and then click the **Browse by tag** link.</span></span> <span data-ttu-id="08d1a-148">Если вы используете эмулятор Windows Phone, щелкните строку URL-адреса и нажмите клавишу Pause, чтобы получить доступ с клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="08d1a-148">If you are using the Windows Phone Emulator, click in the URL bar and press the Pause key to get keyboard access.</span></span> <span data-ttu-id="08d1a-149">На рисунке ниже показано представление *AllTags* (выберите пункт **Просмотр по тегу**).</span><span class="sxs-lookup"><span data-stu-id="08d1a-149">The image below shows the *AllTags* view (from choosing **Browse by tag**).</span></span>

<span data-ttu-id="08d1a-150">[![p1_browseTag](aspnet-mvc-4-mobile-features/_static/image6.png)](aspnet-mvc-4-mobile-features/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-150">[![p1_browseTag](aspnet-mvc-4-mobile-features/_static/image6.png)](aspnet-mvc-4-mobile-features/_static/image5.png)</span></span>

<span data-ttu-id="08d1a-151">Этот экран является очень удобным для чтения на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="08d1a-151">The display is very readable on a mobile device.</span></span> <span data-ttu-id="08d1a-152">Щелкните ссылку ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="08d1a-152">Choose the ASP.NET link.</span></span>

<span data-ttu-id="08d1a-153">[![p1_tagged_ASPNET](aspnet-mvc-4-mobile-features/_static/image8.png)](aspnet-mvc-4-mobile-features/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-153">[![p1_tagged_ASPNET](aspnet-mvc-4-mobile-features/_static/image8.png)](aspnet-mvc-4-mobile-features/_static/image7.png)</span></span>

<span data-ttu-id="08d1a-154">Представление тегов ASP.NET очень неудобно.</span><span class="sxs-lookup"><span data-stu-id="08d1a-154">The ASP.NET tag view is very cluttered.</span></span> <span data-ttu-id="08d1a-155">Например, столбец **Date** очень труден для чтения.</span><span class="sxs-lookup"><span data-stu-id="08d1a-155">For example, the **Date** column is very difficult to read.</span></span> <span data-ttu-id="08d1a-156">Далее в этом руководстве вы создадите версию представления *AllTags* , предназначенную специально для мобильных браузеров и которая сделает этот экран доступным для чтения.</span><span class="sxs-lookup"><span data-stu-id="08d1a-156">Later in the tutorial you'll create a version of the *AllTags* view that's specifically for mobile browsers and that will make the display readable.</span></span>

<span data-ttu-id="08d1a-157">Примечание. в настоящее время в модуле мобильного кэширования существует ошибка.</span><span class="sxs-lookup"><span data-stu-id="08d1a-157">Note: Currently a bug exists in the mobile caching engine.</span></span> <span data-ttu-id="08d1a-158">Для рабочих приложений необходимо установить [исправленный пакет DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) Nugget.</span><span class="sxs-lookup"><span data-stu-id="08d1a-158">For production applications, you must install the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) nugget package.</span></span> <span data-ttu-id="08d1a-159">Сведения об исправлении см. в статье [ASP.NET MVC 4 Mobile Caching](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) исправлена.</span><span class="sxs-lookup"><span data-stu-id="08d1a-159">See [ASP.NET MVC 4 Mobile Caching Bug Fixed](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span>

## <a name="css-media-queries"></a><span data-ttu-id="08d1a-160">Запросы мультимедиа CSS</span><span class="sxs-lookup"><span data-stu-id="08d1a-160">CSS Media Queries</span></span>

<span data-ttu-id="08d1a-161">[Запросы мультимедиа CSS](http://www.w3.org/TR/css3-mediaqueries/) — это расширение CSS для типов мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="08d1a-161">[CSS media queries](http://www.w3.org/TR/css3-mediaqueries/) are an extension to CSS for media types.</span></span> <span data-ttu-id="08d1a-162">Они позволяют создавать правила, переопределяющие правила CSS по умолчанию для определенных браузеров (агентов пользователя).</span><span class="sxs-lookup"><span data-stu-id="08d1a-162">They allow you to create rules that override the default CSS rules for specific browsers (user agents).</span></span> <span data-ttu-id="08d1a-163">Общее правило для CSS, предназначенное для мобильных браузеров, определяет максимальный размер экрана.</span><span class="sxs-lookup"><span data-stu-id="08d1a-163">A common rule for CSS that targets mobile browsers is defining the maximum screen size.</span></span> <span data-ttu-id="08d1a-164">Файл *контент\сите.КСС* , созданный при создании нового Интернет-проекта ASP.NET MVC 4, содержит следующий запрос носителя:</span><span class="sxs-lookup"><span data-stu-id="08d1a-164">The *Content\Site.css* file that's created when you create a new ASP.NET MVC 4 Internet project contains the following media query:</span></span>

[!code-css[Main](aspnet-mvc-4-mobile-features/samples/sample1.css)]

<span data-ttu-id="08d1a-165">Если окно браузера имеет размер 850 пикселей в ширину или менее, оно будет использовать правила CSS внутри этого блока мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="08d1a-165">If the browser window is 850 pixels wide or less, it will use the CSS rules inside this media block.</span></span> <span data-ttu-id="08d1a-166">Вы можете использовать такие запросы CSS, чтобы обеспечить лучшее отображение HTML-содержимого в небольших браузерах (например, в мобильных браузерах), чем правила CSS по умолчанию, предназначенные для более широкого отображения браузеров настольных систем.</span><span class="sxs-lookup"><span data-stu-id="08d1a-166">You can use CSS media queries like this to provide a better display of HTML content on small browsers (like mobile browsers) than the default CSS rules that are designed for the wider displays of desktop browsers.</span></span>

## <a name="the-viewport-meta-tag"></a><span data-ttu-id="08d1a-167">Тег meta окна просмотра</span><span class="sxs-lookup"><span data-stu-id="08d1a-167">The Viewport Meta Tag</span></span>

<span data-ttu-id="08d1a-168">Большинство мобильных браузеров определяют ширину виртуального окна браузера (окно *просмотра*), размер которого гораздо больше, чем фактическая ширина мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="08d1a-168">Most mobile browsers define a virtual browser window width (the *viewport*) that's much larger than the actual width of the mobile device.</span></span> <span data-ttu-id="08d1a-169">Это позволяет мобильным браузерам вписать всю веб-страницу в виртуальную часть экрана.</span><span class="sxs-lookup"><span data-stu-id="08d1a-169">This allows mobile browsers to fit the entire web page inside the virtual display.</span></span> <span data-ttu-id="08d1a-170">Затем пользователи могут увеличить интересующее вас содержимое.</span><span class="sxs-lookup"><span data-stu-id="08d1a-170">Users can then zoom in on interesting content.</span></span> <span data-ttu-id="08d1a-171">Однако если задать для ширины окна просмотра фактическую ширину устройства, то изменять масштаб не требуется, так как содержимое умещается в браузере для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-171">However, if you set the viewport width to the actual device width, no zooming is required, because the content fits in the mobile browser.</span></span>

<span data-ttu-id="08d1a-172">В окне просмотра `<meta>` тег в файле макета ASP.NET MVC 4 для окна просмотра задается ширина устройства.</span><span class="sxs-lookup"><span data-stu-id="08d1a-172">The viewport `<meta>` tag in the ASP.NET MVC 4 layout file sets the viewport to the device width.</span></span> <span data-ttu-id="08d1a-173">В следующей строке показано окно просмотра `<meta>` тег в файле макета ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="08d1a-173">The following line shows the viewport `<meta>` tag in the ASP.NET MVC 4 layout file.</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample2.html)]

## <a name="examining-the-effect-of-css-media-queries-and-the-viewport-meta-tag"></a><span data-ttu-id="08d1a-174">Проверка влияния запросов мультимедиа CSS и мета тега окна просмотра</span><span class="sxs-lookup"><span data-stu-id="08d1a-174">Examining the Effect of CSS Media Queries and the Viewport Meta Tag</span></span>

<span data-ttu-id="08d1a-175">Откройте файл *Views\Shared\\_layout. cshtml* в редакторе и закомментируйте `<meta>` тег окна просмотра.</span><span class="sxs-lookup"><span data-stu-id="08d1a-175">Open the *Views\Shared\\_Layout.cshtml* file in the editor and comment out the viewport `<meta>` tag.</span></span> <span data-ttu-id="08d1a-176">В следующей разметке показана строка с комментарием.</span><span class="sxs-lookup"><span data-stu-id="08d1a-176">The following markup shows the commented-out line.</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample3.cshtml)]

<span data-ttu-id="08d1a-177">Откройте файл *мвкмобиле\контент\сите.КСС* в редакторе и измените максимальную ширину в запросе носителя на 0 пикселей.</span><span class="sxs-lookup"><span data-stu-id="08d1a-177">Open the *MvcMobile\Content\Site.css* file in the editor and change the maximum width in the media query to zero pixels.</span></span> <span data-ttu-id="08d1a-178">Это предотвратит использование правил CSS в мобильных браузерах.</span><span class="sxs-lookup"><span data-stu-id="08d1a-178">This will prevent the CSS rules from being used in mobile browsers.</span></span> <span data-ttu-id="08d1a-179">В следующей строке показан измененный запрос мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="08d1a-179">The following line shows the modified media query:</span></span>

[!code-css[Main](aspnet-mvc-4-mobile-features/samples/sample4.css)]

<span data-ttu-id="08d1a-180">Сохраните изменения и перейдите в приложение конференции в эмуляторе браузера для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-180">Save your changes and browse to the Conference application in a mobile browser emulator.</span></span> <span data-ttu-id="08d1a-181">Маленький текст на следующем изображении является результатом удаления `<meta>` тега окна просмотра.</span><span class="sxs-lookup"><span data-stu-id="08d1a-181">The tiny text in the following image is the result of removing the viewport `<meta>` tag.</span></span> <span data-ttu-id="08d1a-182">Если не `<meta>` тег просмотра, браузер масштабируется до ширины окна просмотра по умолчанию (850 пикселей или больше для большинства мобильных браузеров).</span><span class="sxs-lookup"><span data-stu-id="08d1a-182">With no viewport `<meta>` tag, the browser is zooming out to the default viewport width (850 pixels or wider for most mobile browsers.)</span></span>

<span data-ttu-id="08d1a-183">[![p1_noViewPort](aspnet-mvc-4-mobile-features/_static/image10.png)](aspnet-mvc-4-mobile-features/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-183">[![p1_noViewPort](aspnet-mvc-4-mobile-features/_static/image10.png)](aspnet-mvc-4-mobile-features/_static/image9.png)</span></span>

<span data-ttu-id="08d1a-184">Отменить изменения — раскомментировать окно просмотра `<meta>` тег в файле макета и восстановить запрос носителя до 850 пикселей в файле *site. CSS* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-184">Undo your changes — uncomment the viewport `<meta>` tag in the layout file and restore the media query to 850 pixels in the *Site.css* file.</span></span> <span data-ttu-id="08d1a-185">Сохраните изменения и обновите браузер для мобильных устройств, чтобы убедиться, что экран с поддержкой мобильных устройств восстановлен.</span><span class="sxs-lookup"><span data-stu-id="08d1a-185">Save your changes and refresh the mobile browser to verify that the mobile-friendly display has been restored.</span></span>

<span data-ttu-id="08d1a-186">Окно просмотра `<meta>` тег и запрос мультимедиа CSS не относятся к ASP.NET MVC 4, и вы можете воспользоваться преимуществами этих функций в любом веб-приложении.</span><span class="sxs-lookup"><span data-stu-id="08d1a-186">The viewport `<meta>` tag and the CSS media query are not specific to ASP.NET MVC 4, and you can take advantage of these features in any web application.</span></span> <span data-ttu-id="08d1a-187">Но теперь они встроены в файлы, создаваемые при создании нового проекта ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="08d1a-187">But they are now built into the files that are generated when you create a new ASP.NET MVC 4 project.</span></span>

<span data-ttu-id="08d1a-188">Дополнительные сведения о `<meta>` теге окна просмотра см. [в исчезнувшей двух окнах просмотра — второй части](http://www.quirksmode.org/mobile/viewports2.html).</span><span class="sxs-lookup"><span data-stu-id="08d1a-188">For more information about the viewport `<meta>` tag, see [A tale of two viewports — part two](http://www.quirksmode.org/mobile/viewports2.html).</span></span>

<span data-ttu-id="08d1a-189">В следующем разделе вы узнаете, как обеспечить представления для браузеров мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-189">In the next section you'll see how to provide mobile-browser specific views.</span></span>

## <a name="overriding-views-layouts-and-partial-views"></a><span data-ttu-id="08d1a-190">Переопределение представлений, макетов и частичных представлений</span><span class="sxs-lookup"><span data-stu-id="08d1a-190">Overriding Views, Layouts, and Partial Views</span></span>

<span data-ttu-id="08d1a-191">Значительная новая функция ASP.NET MVC 4 — это простой механизм, позволяющий переопределять любое представление (включая макеты и частичные представления) для мобильных браузеров в целом, для отдельного браузера для мобильных устройств или для любого конкретного браузера.</span><span class="sxs-lookup"><span data-stu-id="08d1a-191">A significant new feature in ASP.NET MVC 4 is a simple mechanism that lets you override any view (including layouts and partial views) for mobile browsers in general, for an individual mobile browser, or for any specific browser.</span></span> <span data-ttu-id="08d1a-192">Чтобы создать вид для мобильных устройств, можно скопировать файл представления и добавить расширение *.Mobile* к имени файла.</span><span class="sxs-lookup"><span data-stu-id="08d1a-192">To provide a mobile-specific view, you can copy a view file and add *.Mobile* to the file name.</span></span> <span data-ttu-id="08d1a-193">Например, чтобы создать мобильное представление *индекса* , скопируйте *Views\Home\Index.cshtml* в *виевс\хоме\индекс.Мобиле.кштмл*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-193">For example, to create a mobile *Index* view, copy *Views\Home\Index.cshtml* to *Views\Home\Index.Mobile.cshtml*.</span></span>

<span data-ttu-id="08d1a-194">В этом разделе для мобильных устройств будет создан специальный файл макета.</span><span class="sxs-lookup"><span data-stu-id="08d1a-194">In this section, you'll create a mobile-specific layout file.</span></span>

<span data-ttu-id="08d1a-195">Чтобы начать, скопируйте *Views\Shared\\_layout. cshtml* в *Views\Shared\\_layout. Mobile. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-195">To start, copy *Views\Shared\\_Layout.cshtml* to *Views\Shared\\_Layout.Mobile.cshtml*.</span></span> <span data-ttu-id="08d1a-196">Откройте *\_Layout. Mobile. cshtml* и измените заголовок с **конференции MVC4** на **конференцию (Mobile)** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-196">Open *\_Layout.Mobile.cshtml* and change the title from **MVC4 Conference** to **Conference (Mobile)**.</span></span>

<span data-ttu-id="08d1a-197">В каждом вызове `Html.ActionLink` удалите "Просмотр по" в каждой ссылке *ActionLink*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-197">In each `Html.ActionLink` call, remove "Browse by" in each link *ActionLink*.</span></span> <span data-ttu-id="08d1a-198">Следующий код показывает завершенный раздел body файла макета для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-198">The following code shows the completed body section of the mobile layout file.</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample5.cshtml)]

<span data-ttu-id="08d1a-199">Скопируйте файл *виевс\хоме\аллтагс.кштмл* в *виевс\хоме\аллтагс.Мобиле.кштмл*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-199">Copy the *Views\Home\AllTags.cshtml* file to *Views\Home\AllTags.Mobile.cshtml*.</span></span> <span data-ttu-id="08d1a-200">Откройте новый файл и измените элемент `<h2>` с "Tags" на "Tags (M)":</span><span class="sxs-lookup"><span data-stu-id="08d1a-200">Open the new file and change the `<h2>` element from "Tags" to "Tags (M)":</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample6.html)]

<span data-ttu-id="08d1a-201">Перейдите на страницу тегов, используя классический браузер и эмулятор браузера для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-201">Browse to the tags page using a desktop browser and using mobile browser emulator.</span></span> <span data-ttu-id="08d1a-202">В эмуляторе браузера для мобильных устройств показаны два внесенных изменения.</span><span class="sxs-lookup"><span data-stu-id="08d1a-202">The mobile browser emulator shows the two changes you made.</span></span>

<span data-ttu-id="08d1a-203">[![p2m_layoutTags. Mobile](aspnet-mvc-4-mobile-features/_static/image12.png)](aspnet-mvc-4-mobile-features/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-203">[![p2m_layoutTags.mobile](aspnet-mvc-4-mobile-features/_static/image12.png)](aspnet-mvc-4-mobile-features/_static/image11.png)</span></span>

<span data-ttu-id="08d1a-204">В отличие от этого, экран рабочего стола не изменился.</span><span class="sxs-lookup"><span data-stu-id="08d1a-204">In contrast, the desktop display has not changed.</span></span>

<span data-ttu-id="08d1a-205">[![p2_layoutTagsDesktop](aspnet-mvc-4-mobile-features/_static/image14.png)](aspnet-mvc-4-mobile-features/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-205">[![p2_layoutTagsDesktop](aspnet-mvc-4-mobile-features/_static/image14.png)](aspnet-mvc-4-mobile-features/_static/image13.png)</span></span>

## <a name="browser-specific-views"></a><span data-ttu-id="08d1a-206">Представления, относящиеся к браузеру</span><span class="sxs-lookup"><span data-stu-id="08d1a-206">Browser-Specific Views</span></span>

<span data-ttu-id="08d1a-207">Кроме представлений для мобильных устройств и настольных компьютеров вы также можете создавать представления для отдельных браузеров.</span><span class="sxs-lookup"><span data-stu-id="08d1a-207">In addition to mobile-specific and desktop-specific views, you can create views for an individual browser.</span></span> <span data-ttu-id="08d1a-208">Например, можно создавать представления, специально предназначенные для браузера iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-208">For example, you can create views that are specifically for the iPhone browser.</span></span> <span data-ttu-id="08d1a-209">В этом разделе вы узнаете, как создать макет для браузера iPhone и версию представления *AllTags* для iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-209">In this section, you'll create a layout for the iPhone browser and an iPhone version of the *AllTags* view.</span></span>

<span data-ttu-id="08d1a-210">Откройте файл *Global. asax* и добавьте следующий код в метод `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-210">Open the *Global.asax* file and add the following code to the `Application_Start` method.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample7.cs)]

<span data-ttu-id="08d1a-211">Этот код определяет новый режим отображения с именем iPhone, который будет использоваться для каждого входящего запроса.</span><span class="sxs-lookup"><span data-stu-id="08d1a-211">This code defines a new display mode named "iPhone" that will be matched against each incoming request.</span></span> <span data-ttu-id="08d1a-212">Если входящий запрос удовлетворяет условию, которое вы задали (то есть, если агент пользователя содержит строку iPhone), ASP.NET MVC выполнит поиск представлений, которые содержат в своем имени суффикс iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-212">If the incoming request matches the condition you defined (that is, if the user agent contains the string "iPhone"), ASP.NET MVC will look for views whose name contains the "iPhone" suffix.</span></span>

<span data-ttu-id="08d1a-213">В коде щелкните правой кнопкой мыши `DefaultDisplayMode`, выберите **Разрешить**, а затем выберите `using System.Web.WebPages;`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-213">In the code, right-click `DefaultDisplayMode`, choose **Resolve**, and then choose `using System.Web.WebPages;`.</span></span> <span data-ttu-id="08d1a-214">Это действие добавит ссылку на пространство имен `System.Web.WebPages`, в котором определяются типы `DisplayModes` и `DefaultDisplayMode`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-214">This adds a reference to the `System.Web.WebPages` namespace, which is where the `DisplayModes` and `DefaultDisplayMode` types are defined.</span></span>

<span data-ttu-id="08d1a-215">[![p2_resolve](aspnet-mvc-4-mobile-features/_static/image16.png)](aspnet-mvc-4-mobile-features/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-215">[![p2_resolve](aspnet-mvc-4-mobile-features/_static/image16.png)](aspnet-mvc-4-mobile-features/_static/image15.png)</span></span>

<span data-ttu-id="08d1a-216">Кроме того, вы можете вручную добавить следующую строку в раздел `using` файла.</span><span class="sxs-lookup"><span data-stu-id="08d1a-216">Alternatively, you can just manually add the following line to the `using` section of the file.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample8.cs)]

<span data-ttu-id="08d1a-217">Полное содержимое файла *Global. asax* приведено ниже.</span><span class="sxs-lookup"><span data-stu-id="08d1a-217">The complete contents of the *Global.asax* file is shown below.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample9.cs)]

<span data-ttu-id="08d1a-218">Сохраните изменения.</span><span class="sxs-lookup"><span data-stu-id="08d1a-218">Save the changes.</span></span> <span data-ttu-id="08d1a-219">Скопируйте файл *мвкмобиле\виевс\шаред\\_layout. Mobile. cshtml* в *мвкмобиле\виевс\шаред\\_layout. iPhone. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-219">Copy the *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file to *MvcMobile\Views\Shared\\_Layout.iPhone.cshtml*.</span></span> <span data-ttu-id="08d1a-220">Откройте новый файл и измените заголовок `h1` с `Conference (Mobile)` на `Conference (iPhone)`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-220">Open the new file and then change the `h1` heading from `Conference (Mobile)` to `Conference (iPhone)`.</span></span>

<span data-ttu-id="08d1a-221">Скопируйте файл *мвкмобиле\виевс\хоме\аллтагс.Мобиле.кштмл* в *мвкмобиле\виевс\хоме\аллтагс.ифоне.кштмл*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-221">Copy the *MvcMobile\Views\Home\AllTags.Mobile.cshtml* file to *MvcMobile\Views\Home\AllTags.iPhone.cshtml*.</span></span> <span data-ttu-id="08d1a-222">В новом файле измените значение элемента `<h2>` с "Tags (M)" на "Tags (iPhone)".</span><span class="sxs-lookup"><span data-stu-id="08d1a-222">In the new file, change the `<h2>` element from "Tags (M)" to "Tags (iPhone)".</span></span>

<span data-ttu-id="08d1a-223">Запустите приложение.</span><span class="sxs-lookup"><span data-stu-id="08d1a-223">Run the application.</span></span> <span data-ttu-id="08d1a-224">Запустите эмулятор браузера мобильного устройства. Убедитесь, что для его агента пользователя задано значение "iPhone", и перейдите к представлению *AllTags*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-224">Run a mobile browser emulator, make sure its user agent is set to "iPhone", and browse to the *AllTags* view.</span></span> <span data-ttu-id="08d1a-225">На следующем снимке экрана показано представление *AllTags* , отображаемое в браузере [Safari](http://www.apple.com/safari/download/) .</span><span class="sxs-lookup"><span data-stu-id="08d1a-225">The following screenshot shows the *AllTags* view rendered in the [Safari](http://www.apple.com/safari/download/) browser.</span></span> <span data-ttu-id="08d1a-226">Safari для Windows можно скачать [здесь](https://support.apple.com/kb/DL1531).</span><span class="sxs-lookup"><span data-stu-id="08d1a-226">You can download Safari for Windows [here](https://support.apple.com/kb/DL1531).</span></span>

<span data-ttu-id="08d1a-227">[![p2_iphoneView](aspnet-mvc-4-mobile-features/_static/image18.png)](aspnet-mvc-4-mobile-features/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-227">[![p2_iphoneView](aspnet-mvc-4-mobile-features/_static/image18.png)](aspnet-mvc-4-mobile-features/_static/image17.png)</span></span>

<span data-ttu-id="08d1a-228">В этом разделе мы рассмотрели, как создавать макеты и представления для мобильных устройств, а также как создавать макеты и представления для конкретных устройств, таких как iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-228">In this section we've seen how to create mobile layouts and views and how to create layouts and views for specific devices such as the iPhone.</span></span> <span data-ttu-id="08d1a-229">В следующем разделе вы узнаете, как использовать jQuery Mobile для более привлекательных мобильных представлений.</span><span class="sxs-lookup"><span data-stu-id="08d1a-229">In the next section you'll see how to leverage jQuery Mobile for more compelling mobile views.</span></span>

## <a name="using-jquery-mobile"></a><span data-ttu-id="08d1a-230">Использование jQuery Mobile</span><span class="sxs-lookup"><span data-stu-id="08d1a-230">Using jQuery Mobile</span></span>

<span data-ttu-id="08d1a-231">[Мобильная библиотека jQuery](http://jquerymobile.com/demos/1.0b3/#/demos/1.0b3/docs/about/intro.html) предоставляет платформу пользовательского интерфейса, которая работает со всеми основными мобильными браузерами.</span><span class="sxs-lookup"><span data-stu-id="08d1a-231">The [jQuery Mobile](http://jquerymobile.com/demos/1.0b3/#/demos/1.0b3/docs/about/intro.html) library provides a user interface framework that works on all the major mobile browsers.</span></span> <span data-ttu-id="08d1a-232">jQuery Mobile применяет *прогрессивное улучшение* к мобильным браузерам, поддерживающим CSS и JavaScript.</span><span class="sxs-lookup"><span data-stu-id="08d1a-232">jQuery Mobile applies *progressive enhancement* to mobile browsers that support CSS and JavaScript.</span></span> <span data-ttu-id="08d1a-233">Прогрессивное улучшение позволяет всем браузерам отображать базовое содержимое веб-страницы, одновременно позволяя более мощным браузерам и устройствам отображать более широкие возможности.</span><span class="sxs-lookup"><span data-stu-id="08d1a-233">Progressive enhancement allows all browsers to display the basic content of a web page, while allowing more powerful browsers and devices to have a richer display.</span></span> <span data-ttu-id="08d1a-234">Файлы JavaScript и CSS, которые включены в стиль мобильных устройств jQuery многие элементы, в соответствии с мобильными браузерами без внесения изменений в разметку.</span><span class="sxs-lookup"><span data-stu-id="08d1a-234">The JavaScript and CSS files that are included with jQuery Mobile style many elements to fit mobile browsers without making any markup changes.</span></span>

<span data-ttu-id="08d1a-235">В этом разделе вы установите пакет NuGet *jQuery. Mobile. MVC* , который устанавливает jQuery Mobile и мини-приложение для переключения представлений.</span><span class="sxs-lookup"><span data-stu-id="08d1a-235">In this section you'll install the *jQuery.Mobile.MVC* NuGet package, which installs jQuery Mobile and a view-switcher widget.</span></span>

<span data-ttu-id="08d1a-236">Чтобы начать, удалите созданные ранее файлы *shared\\_layout. Mobile. cshtml* и *shared\\_layout. iPhone. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-236">To start, delete the *Shared\\_Layout.Mobile.cshtml* and *Shared\\_Layout.iPhone.cshtml* files that you created earlier.</span></span>

<span data-ttu-id="08d1a-237">Переименуйте файлы *виевс\хоме\аллтагс.Мобиле.кштмл* и *виевс\хоме\аллтагс.ифоне.кштмл* в *виевс\хоме\аллтагс.ифоне.кштмл.Хиде* и *Views\Home\AllTags.Mobile.cshtml.Hide*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-237">Rename *Views\Home\AllTags.Mobile.cshtml* and *Views\Home\AllTags.iPhone.cshtml* files to *Views\Home\AllTags.iPhone.cshtml.hide* and *Views\Home\AllTags.Mobile.cshtml.hide*.</span></span> <span data-ttu-id="08d1a-238">Поскольку файлы больше не имеют расширения *. cshtml* , они не будут использоваться средой выполнения MVC ASP.NET для визуализации представления *AllTags* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-238">Because the files no longer have a *.cshtml* extension, they won't be used by the ASP.NET MVC runtime to render the *AllTags* view.</span></span>

<span data-ttu-id="08d1a-239">Установите пакет NuGet для *jQuery. Mobile. MVC* , выполнив следующие действия.</span><span class="sxs-lookup"><span data-stu-id="08d1a-239">Install the *jQuery.Mobile.MVC* NuGet package by doing this:</span></span>

1. <span data-ttu-id="08d1a-240">В меню **Сервис** выберите **Диспетчер пакетов NuGet**, а затем выберите **консоль диспетчера пакетов**.</span><span class="sxs-lookup"><span data-stu-id="08d1a-240">From the **Tools** menu, select **NuGet Package Manager**, and then select **Package Manager Console**.</span></span>

    <span data-ttu-id="08d1a-241">[![p3_packageMgr](aspnet-mvc-4-mobile-features/_static/image20.png)](aspnet-mvc-4-mobile-features/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-241">[![p3_packageMgr](aspnet-mvc-4-mobile-features/_static/image20.png)](aspnet-mvc-4-mobile-features/_static/image19.png)</span></span>
2. <span data-ttu-id="08d1a-242">В **консоли диспетчера пакетов**введите `Install-Package jQuery.Mobile.MVC -version 1.0.0`</span><span class="sxs-lookup"><span data-stu-id="08d1a-242">In the **Package Manager Console**, enter `Install-Package jQuery.Mobile.MVC -version 1.0.0`</span></span>

<span data-ttu-id="08d1a-243">На следующем рисунке показаны файлы, добавленные и измененные в проекте Мвкмобиле пакетом NuGet jQuery. Mobile. MVC.</span><span class="sxs-lookup"><span data-stu-id="08d1a-243">The following image shows the files added and changed to the MvcMobile project by the NuGet jQuery.Mobile.MVC package.</span></span> <span data-ttu-id="08d1a-244">Добавляемые файлы имеют [Add] после имени файла.</span><span class="sxs-lookup"><span data-stu-id="08d1a-244">Files which are added have [add] appended after the file name.</span></span> <span data-ttu-id="08d1a-245">В образе не отображаются файлы GIF и PNG, добавленные в папку *контент\имажес* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-245">The image does not show the GIF and PNG files added to the *Content\images* folder.</span></span>

![](aspnet-mvc-4-mobile-features/_static/image21.png)

<span data-ttu-id="08d1a-246">Пакет NuGet jQuery. Mobile. MVC устанавливает следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="08d1a-246">The jQuery.Mobile.MVC NuGet package installs the following:</span></span>

- <span data-ttu-id="08d1a-247">*Приложение\_файл старт\бундлемобилеконфиг.КС* , которое требуется для ссылки на добавленные файлы JavaScript и CSS.</span><span class="sxs-lookup"><span data-stu-id="08d1a-247">The *App\_Start\BundleMobileConfig.cs* file, which is needed to reference the jQuery JavaScript and CSS files added.</span></span> <span data-ttu-id="08d1a-248">Следуйте приведенным ниже инструкциям и укажите ссылку на мобильный пакет, определенный в этом файле.</span><span class="sxs-lookup"><span data-stu-id="08d1a-248">You must follow the instructions below and reference the mobile bundle defined in this file.</span></span>
- <span data-ttu-id="08d1a-249">Мобильные файлы CSS для jQuery.</span><span class="sxs-lookup"><span data-stu-id="08d1a-249">jQuery Mobile CSS files.</span></span>
- <span data-ttu-id="08d1a-250">Мини-приложение контроллера `ViewSwitcher` (*контроллерс\виевсвитчерконтроллер.КС*).</span><span class="sxs-lookup"><span data-stu-id="08d1a-250">A `ViewSwitcher` controller widget (*Controllers\ViewSwitcherController.cs*).</span></span>
- <span data-ttu-id="08d1a-251">файлы JavaScript мобильных приложений jQuery.</span><span class="sxs-lookup"><span data-stu-id="08d1a-251">jQuery Mobile JavaScript files.</span></span>
- <span data-ttu-id="08d1a-252">Файл макета jQuery в стиле мобильного устройства (*Views\Shared\\_layout. Mobile. cshtml*).</span><span class="sxs-lookup"><span data-stu-id="08d1a-252">A jQuery Mobile-styled layout file (*Views\Shared\\_Layout.Mobile.cshtml*).</span></span>
- <span data-ttu-id="08d1a-253">Частичное представление *(мвкмобиле\виевс\шаред\\_ViewSwitcher. cshtml*), которое предоставляет ссылку в верхней части каждой страницы для переключения из представления рабочего стола в мобильное представление и наоборот.</span><span class="sxs-lookup"><span data-stu-id="08d1a-253">A view-switcher partial view *(MvcMobile\Views\Shared\\_ViewSwitcher.cshtml*) that provides a link at the top of each page to switch from desktop view to mobile view and vice versa.</span></span>
- <span data-ttu-id="08d1a-254">Несколько файлов изображений<em>PNG</em> и <em>GIF</em> в папке <em>контент\имажес</em></span><span class="sxs-lookup"><span data-stu-id="08d1a-254">Several<em>.png</em> and <em>.gif</em> image files in the <em>Content\images</em> folder.</span></span>

<span data-ttu-id="08d1a-255">Откройте файл *Global. asax* и добавьте следующий код в качестве последней строки метода `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-255">Open the *Global.asax* file and add the following code as the last line of the `Application_Start` method.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample10.cs)]

<span data-ttu-id="08d1a-256">В следующем коде показан полный файл *Global. asax* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-256">The following code shows the complete *Global.asax* file.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample11.cs?highlight=26)]

> [!NOTE]
> <span data-ttu-id="08d1a-257">Если вы используете Internet Explorer 9 и вы не видите строку `BundleMobileConfig` выше в желтом выделе, нажмите кнопку [Просмотр совместимости](https://windows.microsoft.com/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)на кнопке![представления совместимости (отключено)](https://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Изображение кнопки представления "совместимость" (выкл.)") в IE, чтобы значок был изменен с помощью ![изображения кнопки представления совместимости (выключено)](https://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Изображение кнопки представления "совместимость" (выкл.)") на сплошной цветовой ![Рисунок кнопки представления совместимости (вкл.)](https://res1.windows.microsoft.com/resbox/en/Windows 7/main/156805ff-3130-481b-a12d-4d3a96470f36_14.jpg "Рисунок кнопки представления "совместимость" (вкл.)").</span><span class="sxs-lookup"><span data-stu-id="08d1a-257">If you are using Internet Explorer 9 and you don't see the `BundleMobileConfig` line above in yellow highlight, click the [Compatibility View button](https://windows.microsoft.com/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)![Picture of the Compatibility View button (off)](https://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Picture of the Compatibility View button (off)") in IE to make the icon change from an outline ![Picture of the Compatibility View button (off)](https://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Picture of the Compatibility View button (off)") to a solid color ![Picture of the Compatibility View button (on)](https://res1.windows.microsoft.com/resbox/en/Windows 7/main/156805ff-3130-481b-a12d-4d3a96470f36_14.jpg "Picture of the Compatibility View button (on)").</span></span> <span data-ttu-id="08d1a-258">Кроме того, этот учебник можно просмотреть в браузере FireFox или Chrome.</span><span class="sxs-lookup"><span data-stu-id="08d1a-258">Alternatively you can view this tutorial in FireFox or Chrome.</span></span>

<span data-ttu-id="08d1a-259">Откройте файл *мвкмобиле\виевс\шаред\\_layout. Mobile. cshtml* и добавьте следующую разметку непосредственно после вызова `Html.Partial`:</span><span class="sxs-lookup"><span data-stu-id="08d1a-259">Open the *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file and add the following markup directly after the `Html.Partial` call:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample12.cshtml)]

<span data-ttu-id="08d1a-260">Полный файл *мвкмобиле\виевс\шаред\\_layout. Mobile. cshtml* показан ниже:</span><span class="sxs-lookup"><span data-stu-id="08d1a-260">The complete *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file is shown below:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample13.cshtml)]

<span data-ttu-id="08d1a-261">Создайте приложение и в эмуляторе браузера мобильного устройства перейдите к представлению *AllTags* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-261">Build the application, and in your mobile browser emulator browse to the *AllTags* view.</span></span> <span data-ttu-id="08d1a-262">Отображается следующее:</span><span class="sxs-lookup"><span data-stu-id="08d1a-262">You see the following:</span></span>

<span data-ttu-id="08d1a-263">[![p3_afterNuGet](aspnet-mvc-4-mobile-features/_static/image23.png)](aspnet-mvc-4-mobile-features/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-263">[![p3_afterNuGet](aspnet-mvc-4-mobile-features/_static/image23.png)](aspnet-mvc-4-mobile-features/_static/image22.png)</span></span>

> [!NOTE]
> <span data-ttu-id="08d1a-264">Можно выполнить отладку кода, относящегося к мобильным устройствам, [задав строку агента пользователя](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) для IE или Chrome на iPhone, а затем используя инструменты разработчика F-12.</span><span class="sxs-lookup"><span data-stu-id="08d1a-264">You can debug the mobile specific code by [setting the user agent string](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) for IE or Chrome to iPhone and then using the F-12 developer tools.</span></span> <span data-ttu-id="08d1a-265">Если в браузере мобильного устройства не отображаются ссылки " **Домашняя страница**", " **докладчик**", " **тег**" и " **Дата** " в качестве кнопок, ссылки на мобильные сценарии jQuery и файлы CSS, вероятно, являются неправильными.</span><span class="sxs-lookup"><span data-stu-id="08d1a-265">If your mobile browser doesn't display the **Home**, **Speaker**, **Tag**, and **Date** links as buttons, the references to jQuery Mobile scripts and CSS files are probably not correct.</span></span>

<span data-ttu-id="08d1a-266">В дополнение к изменениям стиля отображается **мобильное представление** и ссылка, позволяющая переключиться из мобильного представления в режим рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="08d1a-266">In addition to the style changes, you see **Displaying mobile view** and a link that lets you switch from mobile view to desktop view.</span></span> <span data-ttu-id="08d1a-267">Выберите ссылку **представление рабочего стола** , и отобразится представление рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="08d1a-267">Choose the **Desktop view** link, and the desktop view is displayed.</span></span>

<span data-ttu-id="08d1a-268">[![p3_desktopView](aspnet-mvc-4-mobile-features/_static/image25.png)](aspnet-mvc-4-mobile-features/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-268">[![p3_desktopView](aspnet-mvc-4-mobile-features/_static/image25.png)](aspnet-mvc-4-mobile-features/_static/image24.png)</span></span>

<span data-ttu-id="08d1a-269">Представление "Рабочий стол" не позволяет напрямую вернуться к представлению для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-269">The desktop view doesn't provide a way to directly navigate back to the mobile view.</span></span> <span data-ttu-id="08d1a-270">Это будет исправлено сейчас.</span><span class="sxs-lookup"><span data-stu-id="08d1a-270">You'll fix that now.</span></span> <span data-ttu-id="08d1a-271">Откройте файл *Views\Shared\\_layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-271">Open the *Views\Shared\\_Layout.cshtml* file.</span></span> <span data-ttu-id="08d1a-272">В элементе `body` страницы добавьте следующий код, который визуализирует мини-приложение для переключения представлений:</span><span class="sxs-lookup"><span data-stu-id="08d1a-272">Just under the page `body` element, add the following code, which renders the view-switcher widget:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample14.cshtml)]

<span data-ttu-id="08d1a-273">Обновите представление *AllTags* в браузере для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-273">Refresh the *AllTags* view in the mobile browser.</span></span> <span data-ttu-id="08d1a-274">Теперь вы можете перемещаться между рабочими столами и мобильными представлениями.</span><span class="sxs-lookup"><span data-stu-id="08d1a-274">You can now navigate between desktop and mobile views.</span></span>

<span data-ttu-id="08d1a-275">[![p3_desktopViewWithMobileLink](aspnet-mvc-4-mobile-features/_static/image27.png)](aspnet-mvc-4-mobile-features/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-275">[![p3_desktopViewWithMobileLink](aspnet-mvc-4-mobile-features/_static/image27.png)](aspnet-mvc-4-mobile-features/_static/image26.png)</span></span>

> [!NOTE]
> <span data-ttu-id="08d1a-276">Примечание к отладке. можно добавить следующий код в конец Views\Shared\\_ViewSwitcher. cshtml, чтобы упростить отладку представлений при использовании браузера. строка агента пользователя задается как мобильное устройство.</span><span class="sxs-lookup"><span data-stu-id="08d1a-276">Debug note: You can add the following code to the end of the Views\Shared\\_ViewSwitcher.cshtml to help debug views when using a browser the user agent string set to a mobile device.</span></span>
>
> [!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample15.cs)]
>
> <span data-ttu-id="08d1a-277">и добавьте следующий заголовок в файл *Views\Shared\\_layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="08d1a-277">and adding the following heading to the *Views\Shared\\_Layout.cshtml* file.</span></span>
>
> [!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample16.html)]

<span data-ttu-id="08d1a-278">Перейдите на страницу *AllTags* в браузере для настольных систем.</span><span class="sxs-lookup"><span data-stu-id="08d1a-278">Browse to the *AllTags* page in a desktop browser.</span></span> <span data-ttu-id="08d1a-279">Мини-приложение переключения представлений не отображается в браузере настольных систем, так как оно добавляется только на страницу макета для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-279">The view-switcher widget is not displayed in a desktop browser because it's added only to the mobile layout page.</span></span> <span data-ttu-id="08d1a-280">Далее в этом руководстве вы узнаете, как добавить мини-приложение "представление — переключатель" в представление рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="08d1a-280">Later in the tutorial you'll see how you can add the view-switcher widget to the desktop view.</span></span>

<span data-ttu-id="08d1a-281">[![p3_desktopBrowser](aspnet-mvc-4-mobile-features/_static/image29.png)](aspnet-mvc-4-mobile-features/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-281">[![p3_desktopBrowser](aspnet-mvc-4-mobile-features/_static/image29.png)](aspnet-mvc-4-mobile-features/_static/image28.png)</span></span>

## <a name="improving-the-speakers-list"></a><span data-ttu-id="08d1a-282">Улучшение списка докладчиков</span><span class="sxs-lookup"><span data-stu-id="08d1a-282">Improving the Speakers List</span></span>

<span data-ttu-id="08d1a-283">В браузере мобильного устройства выберите ссылку **Speakers** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-283">In the mobile browser, select the **Speakers** link.</span></span> <span data-ttu-id="08d1a-284">Так как отсутствует мобильное представление (*AllSpeakers. Mobile. cshtml*), динамики по умолчанию (*AllSpeakers. cshtml*) отображаются с использованием представления мобильного макета ( *\_Layout. Mobile. cshtml*).</span><span class="sxs-lookup"><span data-stu-id="08d1a-284">Because there's no mobile view(*AllSpeakers.Mobile.cshtml*), the default speakers display (*AllSpeakers.cshtml*) is rendered using the mobile layout view (*\_Layout.Mobile.cshtml*).</span></span>

<span data-ttu-id="08d1a-285">[![p3_speakersDeskTop](aspnet-mvc-4-mobile-features/_static/image31.png)](aspnet-mvc-4-mobile-features/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-285">[![p3_speakersDeskTop](aspnet-mvc-4-mobile-features/_static/image31.png)](aspnet-mvc-4-mobile-features/_static/image30.png)</span></span>

<span data-ttu-id="08d1a-286">Вы можете глобально отключить представление по умолчанию (не мобильное) от подготовки к просмотру в мобильном макете, задав для параметра `RequireConsistentDisplayMode` значение `true` в файле *views\\_ViewStart. cshtml* , например:</span><span class="sxs-lookup"><span data-stu-id="08d1a-286">You can globally disable a default (non-mobile) view from rendering inside a mobile layout by setting `RequireConsistentDisplayMode` to `true` in the *Views\\_ViewStart.cshtml* file, like this:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample17.cshtml)]

<span data-ttu-id="08d1a-287">Если `RequireConsistentDisplayMode` имеет значение `true`, макет для мобильных устройств (<em>\_Layout. Mobile. cshtml</em>) используется только для мобильных представлений.</span><span class="sxs-lookup"><span data-stu-id="08d1a-287">When `RequireConsistentDisplayMode` is set to `true`, the mobile layout (<em>\_Layout.Mobile.cshtml</em>) is used only for mobile views.</span></span> <span data-ttu-id="08d1a-288">(То есть файл представления имеет вид <em>\* \* ViewName</em><em>. Mobile. cshtml</em>.) вы можете задать `RequireConsistentDisplayMode` для `true`, если макет для мобильных устройств не работает с представлениями, не являющимися мобильными.</span><span class="sxs-lookup"><span data-stu-id="08d1a-288">(That is, the view file is of the form <em>\*\*ViewName</em><em>.Mobile.cshtml</em>.) You might want to set `RequireConsistentDisplayMode` to `true` if your mobile layout doesn't work well with your non-mobile views.</span></span> <span data-ttu-id="08d1a-289">На снимке экрана ниже показано, как отображается страница « <em>динамики</em> », когда `RequireConsistentDisplayMode` имеет значение `true`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-289">The screenshot below shows how the <em>Speakers</em> page renders when `RequireConsistentDisplayMode` is set to `true`.</span></span>

<span data-ttu-id="08d1a-290">[![p3_speakersConsistent](aspnet-mvc-4-mobile-features/_static/image33.png)](aspnet-mvc-4-mobile-features/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-290">[![p3_speakersConsistent](aspnet-mvc-4-mobile-features/_static/image33.png)](aspnet-mvc-4-mobile-features/_static/image32.png)</span></span>

<span data-ttu-id="08d1a-291">Можно отключить режим отображения в представлении, установив для `RequireConsistentDisplayMode` значение `false` в файле представления.</span><span class="sxs-lookup"><span data-stu-id="08d1a-291">You can disable consistent display mode in a view by setting `RequireConsistentDisplayMode` to `false` in the view file.</span></span> <span data-ttu-id="08d1a-292">Следующая разметка в файле *виевс\хоме\аллспеакерс.кштмл* задает `RequireConsistentDisplayMode` для `false`:</span><span class="sxs-lookup"><span data-stu-id="08d1a-292">The following markup in the *Views\Home\AllSpeakers.cshtml* file sets `RequireConsistentDisplayMode` to `false`:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample18.cshtml)]

## <a name="creating-a-mobile-speakers-view"></a><span data-ttu-id="08d1a-293">Создание представления "Мобильные динамики"</span><span class="sxs-lookup"><span data-stu-id="08d1a-293">Creating a Mobile Speakers View</span></span>

<span data-ttu-id="08d1a-294">Как вы только что увидели, представление *Speakers* удобно для чтения, но ссылки слишком малы, и касаться их на мобильном устройстве трудно.</span><span class="sxs-lookup"><span data-stu-id="08d1a-294">As you just saw, the *Speakers* view is readable, but the links are small and are difficult to tap on a mobile device.</span></span> <span data-ttu-id="08d1a-295">В этом разделе вы создадите представление *колонок* для мобильных устройств, которое похоже на современное мобильное приложение — оно отображает большие и простые ссылки и содержит поле поиска для быстрого поиска докладчиков.</span><span class="sxs-lookup"><span data-stu-id="08d1a-295">In this section, you'll create a mobile-specific *Speakers* view that looks like a modern mobile application — it displays large, easy-to-tap links and contains a search box to quickly find speakers.</span></span>

<span data-ttu-id="08d1a-296">Скопируйте *AllSpeakers. cshtml* в *AllSpeakers. Mobile. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-296">Copy *AllSpeakers.cshtml* to *AllSpeakers.Mobile.cshtml*.</span></span> <span data-ttu-id="08d1a-297">Откройте файл *AllSpeakers. Mobile. cshtml* и удалите элемент заголовка `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-297">Open the *AllSpeakers.Mobile.cshtml* file and remove the `<h2>` heading element.</span></span>

<span data-ttu-id="08d1a-298">В теге `<ul>` добавьте атрибут `data-role` и задайте для него значение `listview`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-298">In the `<ul>` tag, add the `data-role` attribute and set its value to `listview`.</span></span> <span data-ttu-id="08d1a-299">Как и другие [атрибуты`data-*`](http://html5doctor.com/html5-custom-data-attributes/), `data-role="listview"` упрощает касание больших элементов списка.</span><span class="sxs-lookup"><span data-stu-id="08d1a-299">Like other [`data-*` attributes](http://html5doctor.com/html5-custom-data-attributes/), `data-role="listview"` makes the large list items easier to tap.</span></span> <span data-ttu-id="08d1a-300">Вот как выглядит готовая разметка:</span><span class="sxs-lookup"><span data-stu-id="08d1a-300">This is what the completed markup looks like:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample19.cshtml)]

<span data-ttu-id="08d1a-301">Обновите браузер для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-301">Refresh the mobile browser.</span></span> <span data-ttu-id="08d1a-302">Обновленное представление выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="08d1a-302">The updated view looks like this:</span></span>

<span data-ttu-id="08d1a-303">[![p3_updatedSpeakerView1](aspnet-mvc-4-mobile-features/_static/image35.png)](aspnet-mvc-4-mobile-features/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-303">[![p3_updatedSpeakerView1](aspnet-mvc-4-mobile-features/_static/image35.png)](aspnet-mvc-4-mobile-features/_static/image34.png)</span></span>

<span data-ttu-id="08d1a-304">Хотя представление для мобильных устройств Улучшено, переходить к длинному списку докладчиков очень сложно.</span><span class="sxs-lookup"><span data-stu-id="08d1a-304">Although the mobile view has improved, it's difficult to navigate the long list of speakers.</span></span> <span data-ttu-id="08d1a-305">Чтобы устранить эту проблему, добавьте в тег `<ul>` атрибут `data-filter` и задайте для него значение `true`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-305">To fix this, in the `<ul>` tag, add the `data-filter` attribute and set it to `true`.</span></span> <span data-ttu-id="08d1a-306">В приведенном ниже коде показана разметка `ul`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-306">The code below shows the `ul` markup.</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample20.html)]

<span data-ttu-id="08d1a-307">На следующем рисунке показано поле фильтра поиска в верхней части страницы, полученное из атрибута `data-filter`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-307">The following image shows the search filter box at the top of the page that results from the `data-filter` attribute.</span></span>

<span data-ttu-id="08d1a-308">[![ps_Data_Filter](aspnet-mvc-4-mobile-features/_static/image37.png)](aspnet-mvc-4-mobile-features/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-308">[![ps_Data_Filter](aspnet-mvc-4-mobile-features/_static/image37.png)](aspnet-mvc-4-mobile-features/_static/image36.png)</span></span>

<span data-ttu-id="08d1a-309">По мере ввода каждой буквы в поле поиска jQuery Mobile фильтрует отображаемый список, как показано на рисунке ниже.</span><span class="sxs-lookup"><span data-stu-id="08d1a-309">As you type each letter in the search box, jQuery Mobile filters the displayed list as shown in the image below.</span></span>

<span data-ttu-id="08d1a-310">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image39.png)](aspnet-mvc-4-mobile-features/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-310">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image39.png)](aspnet-mvc-4-mobile-features/_static/image38.png)</span></span>

## <a name="improving-the-tags-list"></a><span data-ttu-id="08d1a-311">Улучшение списка тегов</span><span class="sxs-lookup"><span data-stu-id="08d1a-311">Improving the Tags List</span></span>

<span data-ttu-id="08d1a-312">Как и в представлении « *динамики* по умолчанию», представление « *теги* » доступно для чтения, но ссылки небольшие и трудно коснуться на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="08d1a-312">Like the default *Speakers* view, the *Tags* view is readable, but the links are small and difficult to tap on a mobile device.</span></span> <span data-ttu-id="08d1a-313">В этом разделе вы исправите представление *тегов* так же, как и в представлении « *динамики* ».</span><span class="sxs-lookup"><span data-stu-id="08d1a-313">In this section, you'll fix the *Tags* view the same way you fixed the *Speakers* view.</span></span>

<span data-ttu-id="08d1a-314">Удалите &quot;скрыть&quot; суффикса в файле *виевс\хоме\аллтагс.Мобиле.кштмл.Хиде* , чтобы его имя было *виевс\хоме\аллтагс.Мобиле.кштмл*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-314">Remove the &quot;hide&quot; suffix to the *Views\Home\AllTags.Mobile.cshtml.hide* file so the name is *Views\Home\AllTags.Mobile.cshtml*.</span></span> <span data-ttu-id="08d1a-315">Откройте переименованный файл и удалите элемент `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-315">Open the renamed file and remove the `<h2>` element.</span></span>

<span data-ttu-id="08d1a-316">Добавьте `data-role` и `data-filter` атрибуты в тег `<ul>`, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="08d1a-316">Add the `data-role` and `data-filter` attributes to the `<ul>` tag, as shown here:</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample21.html)]

<span data-ttu-id="08d1a-317">На рисунке ниже показана фильтрация страниц тегов по букве `J`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-317">The image below shows the tags page filtering on the letter `J`.</span></span>

<span data-ttu-id="08d1a-318">[![p3_tags_J](aspnet-mvc-4-mobile-features/_static/image41.png)](aspnet-mvc-4-mobile-features/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-318">[![p3_tags_J](aspnet-mvc-4-mobile-features/_static/image41.png)](aspnet-mvc-4-mobile-features/_static/image40.png)</span></span>

## <a name="improving-the-dates-list"></a><span data-ttu-id="08d1a-319">Улучшение списка дат</span><span class="sxs-lookup"><span data-stu-id="08d1a-319">Improving the Dates List</span></span>

<span data-ttu-id="08d1a-320">Вы можете улучшить представление *дат* , например, улучшенные *динамики* и представления *тегов* , чтобы их было проще использовать на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="08d1a-320">You can improve the *Dates* view like you improved the *Speakers* and *Tags* views, so that it's easier to use on a mobile device.</span></span>

<span data-ttu-id="08d1a-321">Скопируйте файл *виевс\хоме\аллдатес.кштмл* в *виевс\хоме\аллдатес.Мобиле.кштмл*.</span><span class="sxs-lookup"><span data-stu-id="08d1a-321">Copy the *Views\Home\AllDates.cshtml* file to *Views\Home\AllDates.Mobile.cshtml*.</span></span> <span data-ttu-id="08d1a-322">Откройте новый файл и удалите элемент `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-322">Open the new file and remove the `<h2>` element.</span></span>

<span data-ttu-id="08d1a-323">Добавьте `data-role="listview"` в тег `<ul>` следующим образом:</span><span class="sxs-lookup"><span data-stu-id="08d1a-323">Add `data-role="listview"` to the `<ul>` tag, like this:</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample22.html)]

<span data-ttu-id="08d1a-324">На рисунке ниже показано, как выглядит страница **даты** с `data-role`ным атрибутом.</span><span class="sxs-lookup"><span data-stu-id="08d1a-324">The image below shows what the **Date** page looks like with the `data-role` attribute in place.</span></span>

<span data-ttu-id="08d1a-325">[![p3_dates1](aspnet-mvc-4-mobile-features/_static/image43.png)](aspnet-mvc-4-mobile-features/_static/image42.png) Замените содержимое файла *виевс\хоме\аллдатес.Мобиле.кштмл* следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="08d1a-325">[![p3_dates1](aspnet-mvc-4-mobile-features/_static/image43.png)](aspnet-mvc-4-mobile-features/_static/image42.png) Replace the contents of the *Views\Home\AllDates.Mobile.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample23.cshtml)]

<span data-ttu-id="08d1a-326">Этот код группирует все сеансы по дням.</span><span class="sxs-lookup"><span data-stu-id="08d1a-326">This code groups all sessions by days.</span></span> <span data-ttu-id="08d1a-327">Он создает разделитель списка для каждого нового дня и выводит список всех сеансов за каждый день под разделителем.</span><span class="sxs-lookup"><span data-stu-id="08d1a-327">It creates a list divider for each new day, and it lists all the sessions for each day under a divider.</span></span> <span data-ttu-id="08d1a-328">Вот как это выглядит при выполнении этого кода:</span><span class="sxs-lookup"><span data-stu-id="08d1a-328">Here's what it looks like when this code runs:</span></span>

<span data-ttu-id="08d1a-329">[![p3_dates2](aspnet-mvc-4-mobile-features/_static/image45.png)](aspnet-mvc-4-mobile-features/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-329">[![p3_dates2](aspnet-mvc-4-mobile-features/_static/image45.png)](aspnet-mvc-4-mobile-features/_static/image44.png)</span></span>

## <a name="improving-the-sessionstable-view"></a><span data-ttu-id="08d1a-330">Улучшение представления SessionsTable</span><span class="sxs-lookup"><span data-stu-id="08d1a-330">Improving the SessionsTable View</span></span>

<span data-ttu-id="08d1a-331">В этом разделе вы создадите представление сеансов для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-331">In this section, you'll create a mobile-specific view of sessions.</span></span> <span data-ttu-id="08d1a-332">Внесенные изменения будут более обширными, чем в других представлениях, которые мы создали.</span><span class="sxs-lookup"><span data-stu-id="08d1a-332">The changes we make will be more extensive than in other views we have created.</span></span>

<span data-ttu-id="08d1a-333">В браузере мобильного устройства коснитесь кнопки **динамика** , а затем введите `Sc` в поле поиска.</span><span class="sxs-lookup"><span data-stu-id="08d1a-333">In the mobile browser, tap the **Speaker** button, then enter `Sc` in the search box.</span></span>

<span data-ttu-id="08d1a-334">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image47.png)](aspnet-mvc-4-mobile-features/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-334">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image47.png)](aspnet-mvc-4-mobile-features/_static/image46.png)</span></span>

<span data-ttu-id="08d1a-335">Коснитесь ссылки **Скотта Hanselman** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-335">Tap the **Scott Hanselman** link.</span></span>

<span data-ttu-id="08d1a-336">[![p3_scottHa](aspnet-mvc-4-mobile-features/_static/image49.png)](aspnet-mvc-4-mobile-features/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-336">[![p3_scottHa](aspnet-mvc-4-mobile-features/_static/image49.png)](aspnet-mvc-4-mobile-features/_static/image48.png)</span></span>

<span data-ttu-id="08d1a-337">Как видите, просмотр трудно читать в браузере для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-337">As you can see, the display is difficult to read on a mobile browser.</span></span> <span data-ttu-id="08d1a-338">Столбец "Дата" трудно считать, а столбец "Теги" находится вне представления.</span><span class="sxs-lookup"><span data-stu-id="08d1a-338">The date column is hard to read and the tags column is out of the view.</span></span> <span data-ttu-id="08d1a-339">Чтобы устранить эту проблему, скопируйте *виевс\хоме\сессионстабле.кштмл* в *виевс\хоме\сессионстабле.Мобиле.кштмл*, а затем замените содержимое файла следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="08d1a-339">To fix this, copy *Views\Home\SessionsTable.cshtml* to *Views\Home\SessionsTable.Mobile.cshtml*, and then replace the contents of the file with the following code:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample24.cshtml)]

<span data-ttu-id="08d1a-340">Код удаляет столбцы «комната» и «теги» и форматирует заголовок, докладчик и дату по вертикали, чтобы вся эта информация была доступна для чтения в браузере мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="08d1a-340">The code removes the room and tags columns, and formats the title, speaker, and date vertically, so that all this information is readable on a mobile browser.</span></span> <span data-ttu-id="08d1a-341">На рисунке ниже приведены изменения кода.</span><span class="sxs-lookup"><span data-stu-id="08d1a-341">The image below reflects the code changes.</span></span>

<span data-ttu-id="08d1a-342">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image51.png)](aspnet-mvc-4-mobile-features/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-342">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image51.png)](aspnet-mvc-4-mobile-features/_static/image50.png)</span></span>

## <a name="improving-the-sessionbycode-view"></a><span data-ttu-id="08d1a-343">Улучшение представления SessionByCode</span><span class="sxs-lookup"><span data-stu-id="08d1a-343">Improving the SessionByCode View</span></span>

<span data-ttu-id="08d1a-344">Наконец, вы создадите представление *SessionByCode* для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-344">Finally, you'll create a mobile-specific view of the *SessionByCode* view.</span></span> <span data-ttu-id="08d1a-345">В браузере мобильного устройства коснитесь кнопки **динамика** , а затем введите `Sc` в поле поиска.</span><span class="sxs-lookup"><span data-stu-id="08d1a-345">In the mobile browser, tap the **Speaker** button, then enter `Sc` in the search box.</span></span>

<span data-ttu-id="08d1a-346">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image53.png)](aspnet-mvc-4-mobile-features/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-346">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image53.png)](aspnet-mvc-4-mobile-features/_static/image52.png)</span></span>

<span data-ttu-id="08d1a-347">Коснитесь ссылки **Скотта Hanselman** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-347">Tap the **Scott Hanselman** link.</span></span> <span data-ttu-id="08d1a-348">Отобразятся сеансы Скотта Hanselman.</span><span class="sxs-lookup"><span data-stu-id="08d1a-348">Scott Hanselman's sessions are displayed.</span></span>

<span data-ttu-id="08d1a-349">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image55.png)](aspnet-mvc-4-mobile-features/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-349">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image55.png)](aspnet-mvc-4-mobile-features/_static/image54.png)</span></span>

<span data-ttu-id="08d1a-350">Выберите **Обзор веб-канала MS Web** .</span><span class="sxs-lookup"><span data-stu-id="08d1a-350">Choose the **An Overview of the MS Web Stack of Love** link.</span></span>

<span data-ttu-id="08d1a-351">[![ps_love](aspnet-mvc-4-mobile-features/_static/image57.png)](aspnet-mvc-4-mobile-features/_static/image56.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-351">[![ps_love](aspnet-mvc-4-mobile-features/_static/image57.png)](aspnet-mvc-4-mobile-features/_static/image56.png)</span></span>

<span data-ttu-id="08d1a-352">Представление рабочего стола по умолчанию отлично, но его можно улучшить.</span><span class="sxs-lookup"><span data-stu-id="08d1a-352">The default desktop view is fine, but you can improve it.</span></span>

<span data-ttu-id="08d1a-353">Скопируйте *виевс\хоме\сессионбикоде.кштмл* в *виевс\хоме\сессионбикоде.Мобиле.кштмл* и замените содержимое файла *виевс\хоме\сессионбикоде.Мобиле.кштмл* следующей разметкой:</span><span class="sxs-lookup"><span data-stu-id="08d1a-353">Copy the *Views\Home\SessionByCode.cshtml* to *Views\Home\SessionByCode.Mobile.cshtml* and replace the contents of the *Views\Home\SessionByCode.Mobile.cshtml* file with the following markup:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample25.cshtml)]

<span data-ttu-id="08d1a-354">Новая разметка использует атрибут `data-role` для улучшения макета представления.</span><span class="sxs-lookup"><span data-stu-id="08d1a-354">The new markup uses the `data-role` attribute to improve the layout of the view.</span></span>

<span data-ttu-id="08d1a-355">Обновите браузер для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="08d1a-355">Refresh the mobile browser.</span></span> <span data-ttu-id="08d1a-356">Следующий рисунок отражает только что внесенные в код изменения:</span><span class="sxs-lookup"><span data-stu-id="08d1a-356">The following image reflects the code changes that you just made:</span></span>

<span data-ttu-id="08d1a-357">[![p3_love2](aspnet-mvc-4-mobile-features/_static/image59.png)](aspnet-mvc-4-mobile-features/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="08d1a-357">[![p3_love2](aspnet-mvc-4-mobile-features/_static/image59.png)](aspnet-mvc-4-mobile-features/_static/image58.png)</span></span>

## <a name="wrapup-and-review"></a><span data-ttu-id="08d1a-358">Врапуп и обзор</span><span class="sxs-lookup"><span data-stu-id="08d1a-358">Wrapup and Review</span></span>

<span data-ttu-id="08d1a-359">В этом учебнике появились новые мобильные функции в предварительной версии ASP.NET MVC 4 для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="08d1a-359">This tutorial has introduced the new mobile features of ASP.NET MVC 4 Developer Preview.</span></span> <span data-ttu-id="08d1a-360">К мобильным функциям относятся:</span><span class="sxs-lookup"><span data-stu-id="08d1a-360">The mobile features include:</span></span>

- <span data-ttu-id="08d1a-361">Возможность определять макет, представления и частичные представления как глобально, так и для отдельного представления.</span><span class="sxs-lookup"><span data-stu-id="08d1a-361">The ability to override layout, views, and partial views, both globally and for an individual view.</span></span>
- <span data-ttu-id="08d1a-362">Управление макетом и принудительным применением частичного переопределения с помощью свойства `RequireConsistentDisplayMode`.</span><span class="sxs-lookup"><span data-stu-id="08d1a-362">Control over layout and partial override enforcement using the `RequireConsistentDisplayMode` property.</span></span>
- <span data-ttu-id="08d1a-363">Мини-приложение переключателя представления для мобильных представлений, которое также может отображаться в представлениях рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="08d1a-363">A view-switcher widget for mobile views than can also be displayed in desktop views.</span></span>
- <span data-ttu-id="08d1a-364">Поддержка поддержки конкретных браузеров, например браузера iPhone.</span><span class="sxs-lookup"><span data-stu-id="08d1a-364">Support for supporting specific browsers, such as the iPhone browser.</span></span>

## <a name="see-also"></a><span data-ttu-id="08d1a-365">См. также:</span><span class="sxs-lookup"><span data-stu-id="08d1a-365">See Also</span></span>

- <span data-ttu-id="08d1a-366">сайт [jQuery Mobile](http://jquerymobile.com) .</span><span class="sxs-lookup"><span data-stu-id="08d1a-366">[jQuery Mobile](http://jquerymobile.com) site.</span></span>
- [<span data-ttu-id="08d1a-367">Общие сведения о jQuery Mobile</span><span class="sxs-lookup"><span data-stu-id="08d1a-367">jQuery Mobile Overview</span></span>](http://jquerymobile.com/demos/1.0b3/docs/about/intro.html)
- [<span data-ttu-id="08d1a-368">Рекомендации от W3C по веб-приложениям для мобильных устройств</span><span class="sxs-lookup"><span data-stu-id="08d1a-368">W3C Recommendation Mobile Web Application Best Practices</span></span>](http://www.w3.org/TR/mwabp/)
- [<span data-ttu-id="08d1a-369">Проектные рекомендации от W3C по запросам мультимедиа</span><span class="sxs-lookup"><span data-stu-id="08d1a-369">W3C Candidate Recommendation for media queries</span></span>](http://www.w3.org/TR/css3-mediaqueries/)
