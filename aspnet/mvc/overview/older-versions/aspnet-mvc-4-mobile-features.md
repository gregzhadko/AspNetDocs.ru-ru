---
uid: mvc/overview/older-versions/aspnet-mvc-4-mobile-features
title: Мобильные функции ASP.NET MVC 4 | Документация Майкрософт
author: Rick-Anderson
description: Сейчас MVC 5, версия этого руководства с примерами кода в развертывание MVC 5 мобильных веб-приложения ASP.NET на веб-сайтах Azure.
ms.author: riande
ms.date: 08/15/2012
ms.assetid: 27dc4fc8-1b51-43b0-933f-fc1b52476523
msc.legacyurl: /mvc/overview/older-versions/aspnet-mvc-4-mobile-features
msc.type: authoredcontent
ms.openlocfilehash: de65e01b888d9ed15da3903f086b40c49b32b9fb
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59402418"
---
# <a name="aspnet-mvc-4-mobile-features"></a><span data-ttu-id="e6fbb-103">Возможности ASP.NET MVC 4 для мобильных приложений</span><span class="sxs-lookup"><span data-stu-id="e6fbb-103">ASP.NET MVC 4 Mobile Features</span></span>

<span data-ttu-id="e6fbb-104">по [Рик Андерсон]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="e6fbb-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="e6fbb-105">Теперь есть версия этого руководства с примерами кода в MVC 5 [развертывание MVC 5 мобильных веб-приложения ASP.NET на веб-сайтов Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-mobile-app/).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-105">There is now an MVC 5 version of this tutorial with code samples at [Deploy an ASP.NET MVC 5 Mobile Web Application on Azure Web Sites](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-mobile-app/).</span></span>


<span data-ttu-id="e6fbb-106">Этом учебнике описываются основы работы с мобильными функциями в ASP.NET MVC 4, веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-106">This tutorial will teach you the basics of how to work with mobile features in an ASP.NET MVC 4 Web application.</span></span> <span data-ttu-id="e6fbb-107">Для этого руководства можно использовать [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) или Visual Web Developer 2010 Express пакетом обновления 1 (&quot;Visual Web Developer или VWD&quot;).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-107">For this tutorial, you can use [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) or Visual Web Developer 2010 Express Service Pack 1 (&quot;Visual Web Developer or VWD&quot;).</span></span> <span data-ttu-id="e6fbb-108">Профессиональные версии Visual Studio можно использовать, если у вас уже есть.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-108">You can use the professional version of Visual Studio if you already have that.</span></span>

<span data-ttu-id="e6fbb-109">Перед началом работы убедитесь, что вы установили необходимые компоненты, перечисленные ниже.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-109">Before you start, make sure you've installed the prerequisites listed below.</span></span>

- <span data-ttu-id="e6fbb-110">[Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) (рекомендуется) или Visual Studio Web Developer Express с пакетом обновления 1.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-110">[Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express) (recommended) or Visual Studio Web Developer Express SP1.</span></span> <span data-ttu-id="e6fbb-111">Visual Studio 2012 содержит ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-111">Visual Studio 2012 contains ASP.NET MVC 4.</span></span> <span data-ttu-id="e6fbb-112">Если вы используете Visual Web Developer 2010, необходимо установить [ASP.NET MVC 4](https://go.microsoft.com/fwlink/?LinkId=243392).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-112">If you are using Visual Web Developer 2010, you must install [ASP.NET MVC 4](https://go.microsoft.com/fwlink/?LinkId=243392).</span></span>

<span data-ttu-id="e6fbb-113">Необходимо также эмулятор браузера мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-113">You will also need a mobile browser emulator.</span></span> <span data-ttu-id="e6fbb-114">Подойдет любой из следующих:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-114">Any of the following will work:</span></span>

- <span data-ttu-id="e6fbb-115">[Эмулятор Windows 7 Phone](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-115">[Windows 7 Phone Emulator](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span></span> <span data-ttu-id="e6fbb-116">(Это эмулятор, который используется в большинстве на снимках экрана в этом руководстве).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-116">(This is the emulator that's used in most of the screen shots in this tutorial.)</span></span>
- <span data-ttu-id="e6fbb-117">Измените строку агента пользователя для эмуляции iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-117">Change the user agent string to emulate an iPhone.</span></span> <span data-ttu-id="e6fbb-118">См. в разделе [это](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) запись в блоге.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-118">See [this](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) blog entry.</span></span>
- [<span data-ttu-id="e6fbb-119">Эмулятор Opera Mobile</span><span class="sxs-lookup"><span data-stu-id="e6fbb-119">Opera Mobile Emulator</span></span>](http://www.opera.com/developer/tools/mobile/)
- <span data-ttu-id="e6fbb-120">[Apple Safari](http://www.apple.com/safari/download/) с агентом пользователя, задайте для iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-120">[Apple Safari](http://www.apple.com/safari/download/) with the user agent set to iPhone.</span></span> <span data-ttu-id="e6fbb-121">Инструкции по настройке агента пользователя в Safari «iPhone», см. в разделе [как предоставить Safari представьте это IE](http://www.davidalison.com/2008/05/how-to-let-safari-pretend-its-ie.html) в блоге Дэвида Alison.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-121">For instructions on how to set the user agent in Safari to "iPhone", see [How to let Safari pretend it's IE](http://www.davidalison.com/2008/05/how-to-let-safari-pretend-its-ie.html) on David Alison's blog.</span></span>

<span data-ttu-id="e6fbb-122">Проекты Visual Studio с исходным кодом C# доступны в этой статье прилагаются:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-122">Visual Studio projects with C# source code are available to accompany this topic:</span></span>

- [<span data-ttu-id="e6fbb-123">Скачивание начального проекта</span><span class="sxs-lookup"><span data-stu-id="e6fbb-123">Starter project download</span></span>](https://go.microsoft.com/fwlink/?linkid=228307&amp;clcid=0x409)
- [<span data-ttu-id="e6fbb-124">Скачивание полного проекта</span><span class="sxs-lookup"><span data-stu-id="e6fbb-124">Completed project download</span></span>](https://go.microsoft.com/fwlink/?linkid=228306&amp;clcid=0x409)

### <a name="what-youll-build"></a><span data-ttu-id="e6fbb-125">Что вы создадите</span><span class="sxs-lookup"><span data-stu-id="e6fbb-125">What You'll Build</span></span>

<span data-ttu-id="e6fbb-126">В этом учебнике вы добавите функции для мобильных устройств в простое приложение списка конференции, которая предоставляется в [начальный проект](https://go.microsoft.com/fwlink/?LinkId=228307).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-126">For this tutorial, you'll add mobile features to the simple conference-listing application that's provided in the [starter project](https://go.microsoft.com/fwlink/?LinkId=228307).</span></span> <span data-ttu-id="e6fbb-127">На следующем рисунке показаны страницы теги готового приложения, как показано на [эмулятора телефона Windows 7](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-127">The following screenshot shows the tags page of the completed application as seen in the [Windows 7 Phone Emulator](https://msdn.microsoft.com/library/ff402563(VS.92).aspx).</span></span> <span data-ttu-id="e6fbb-128">См. в разделе [клавиатуры сопоставление для Windows Phone Emulator](https://msdn.microsoft.com/library/ff754352(v=vs.92).aspx) для упрощения ввода с клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-128">See [Keyboard Mapping for Windows Phone Emulator](https://msdn.microsoft.com/library/ff754352(v=vs.92).aspx) to simplify keyboard input.</span></span>

<span data-ttu-id="e6fbb-129">[![p1_Tags_CompletedProj](aspnet-mvc-4-mobile-features/_static/image2.png)](aspnet-mvc-4-mobile-features/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-129">[![p1_Tags_CompletedProj](aspnet-mvc-4-mobile-features/_static/image2.png)](aspnet-mvc-4-mobile-features/_static/image1.png)</span></span>

<span data-ttu-id="e6fbb-130">Можно использовать Internet Explorer версии 9 или 10, FireFox или Chrome для разработки своего мобильного приложения, задав [строку агента пользователя](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-130">You can use Internet Explorer version 9 or 10, FireFox or Chrome to develop your mobile application by setting the [user agent string](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/).</span></span> <span data-ttu-id="e6fbb-131">Ниже показаны результаты всей работы с помощью Internet Explorer, эмуляция iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-131">The following image shows the completed tutorial using Internet Explorer emulating an iPhone.</span></span> <span data-ttu-id="e6fbb-132">Вы можете использовать инструменты разработчика F-12 Internet Explorer и [инструмента Fiddler](http://www.fiddler2.com/fiddler2/) для отладки приложения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-132">You can use the Internet Explorer F-12 developer tools and the [Fiddler tool](http://www.fiddler2.com/fiddler2/) to help debug your application.</span></span>

![](aspnet-mvc-4-mobile-features/_static/image3.png)

### <a name="skills-youll-learn"></a><span data-ttu-id="e6fbb-133">Навыки, которые вы узнаете</span><span class="sxs-lookup"><span data-stu-id="e6fbb-133">Skills You'll Learn</span></span>

<span data-ttu-id="e6fbb-134">Вот, вы узнаете, как:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-134">Here's what you'll learn:</span></span>

- <span data-ttu-id="e6fbb-135">Использование HTML5 в шаблоны ASP.NET MVC 4 `viewport` атрибут и адаптивной отрисовки для улучшения отображения на мобильных устройствах.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-135">How the ASP.NET MVC 4 templates use the HTML5 `viewport` attribute and adaptive rendering to improve display on mobile devices.</span></span>
- <span data-ttu-id="e6fbb-136">Как создать представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-136">How to create mobile-specific views.</span></span>
- <span data-ttu-id="e6fbb-137">Как создать представление переключателя, переключения пользователей позволяет между представлением для мобильных устройств и представление рабочего стола приложения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-137">How to create a view switcher that lets users toggle between a mobile view and a desktop view of the application.</span></span>

### <a name="getting-started"></a><span data-ttu-id="e6fbb-138">Начало работы</span><span class="sxs-lookup"><span data-stu-id="e6fbb-138">Getting Started</span></span>

<span data-ttu-id="e6fbb-139">Загрузите приложение списка конференции для начального проекта с помощью следующей ссылки: [Скачайте](https://go.microsoft.com/fwlink/?LinkId=228307).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-139">Download the conference-listing application for the starter project using the following link: [Download](https://go.microsoft.com/fwlink/?LinkId=228307).</span></span> <span data-ttu-id="e6fbb-140">Щелкните в обозревателе Windows щелкните правой кнопкой мыши *MvcMobile.zip* файл и выберите **свойства**.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-140">Then in Windows Explorer, right-click the *MvcMobile.zip* file and choose **Properties**.</span></span> <span data-ttu-id="e6fbb-141">В **свойства MvcMobile.zip** диалоговое окно, выберите **Unblock** кнопки.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-141">In the **MvcMobile.zip Properties** dialog box, choose the **Unblock** button.</span></span> <span data-ttu-id="e6fbb-142">(Разблокировка устраняет предупреждение системы безопасности, возникающее при попытке использовать *ZIP-файл* файл, загруженный из Интернета.)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-142">(Unblocking prevents a security warning that occurs when you try to use a *.zip* file that you've downloaded from the web.)</span></span>

![p1_unBlock](aspnet-mvc-4-mobile-features/_static/image4.png)

<span data-ttu-id="e6fbb-144">Щелкните правой кнопкой мыши *MvcMobile.zip* файл и выберите **извлечь все** Чтобы распаковать файл.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-144">Right-click the *MvcMobile.zip* file and select **Extract All** to unzip the file.</span></span> <span data-ttu-id="e6fbb-145">В Visual Studio откройте *MvcMobile.sln* файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-145">In Visual Studio, open the *MvcMobile.sln* file.</span></span>

<span data-ttu-id="e6fbb-146">Нажмите клавиши CTRL + F5, чтобы запустить приложение, которое будет отображаться в браузер настольного компьютера.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-146">Press CTRL+F5 to run the application, which will display it in your desktop browser.</span></span> <span data-ttu-id="e6fbb-147">Запустите эмулятор браузера мобильного устройства, скопируйте URL-адрес приложения конференции в эмуляторе и нажмите кнопку **поиск по тегу** ссылку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-147">Start your mobile browser emulator, copy the URL for the conference application into the emulator, and then click the **Browse by tag** link.</span></span> <span data-ttu-id="e6fbb-148">Если вы используете эмулятор Windows Phone, щелкните в строке URL-адрес и нажмите клавишу Pause, чтобы получить доступ с клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-148">If you are using the Windows Phone Emulator, click in the URL bar and press the Pause key to get keyboard access.</span></span> <span data-ttu-id="e6fbb-149">На рисунке ниже показано *AllTags* представления (Выбор **поиск по тегу**).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-149">The image below shows the *AllTags* view (from choosing **Browse by tag**).</span></span>

<span data-ttu-id="e6fbb-150">[![p1_browseTag](aspnet-mvc-4-mobile-features/_static/image6.png)](aspnet-mvc-4-mobile-features/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-150">[![p1_browseTag](aspnet-mvc-4-mobile-features/_static/image6.png)](aspnet-mvc-4-mobile-features/_static/image5.png)</span></span>

<span data-ttu-id="e6fbb-151">Отображение очень удобным для чтения на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-151">The display is very readable on a mobile device.</span></span> <span data-ttu-id="e6fbb-152">Выберите ссылку ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-152">Choose the ASP.NET link.</span></span>

<span data-ttu-id="e6fbb-153">[![p1_tagged_ASPNET](aspnet-mvc-4-mobile-features/_static/image8.png)](aspnet-mvc-4-mobile-features/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-153">[![p1_tagged_ASPNET](aspnet-mvc-4-mobile-features/_static/image8.png)](aspnet-mvc-4-mobile-features/_static/image7.png)</span></span>

<span data-ttu-id="e6fbb-154">Представление тегов ASP.NET — в этом месте нарастает беспорядок.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-154">The ASP.NET tag view is very cluttered.</span></span> <span data-ttu-id="e6fbb-155">Например **даты** столбец представляет собой непростую задачу для чтения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-155">For example, the **Date** column is very difficult to read.</span></span> <span data-ttu-id="e6fbb-156">Далее в этом руководстве вы создадите версию *AllTags* представления специально для браузеров мобильных устройств и, чтобы отображение для чтения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-156">Later in the tutorial you'll create a version of the *AllTags* view that's specifically for mobile browsers and that will make the display readable.</span></span>

<span data-ttu-id="e6fbb-157">Примечание. В настоящее время ошибка в модуле мобильных кэширования.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-157">Note: Currently a bug exists in the mobile caching engine.</span></span> <span data-ttu-id="e6fbb-158">Для создания приложений, необходимо установить [основных DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) ценная пакета.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-158">For production applications, you must install the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) nugget package.</span></span> <span data-ttu-id="e6fbb-159">См. в разделе [ASP.NET MVC 4 Mobile кэширование ошибки основных](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) подробные исправления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-159">See [ASP.NET MVC 4 Mobile Caching Bug Fixed](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span>

## <a name="css-media-queries"></a><span data-ttu-id="e6fbb-160">Медиа-запросов CSS</span><span class="sxs-lookup"><span data-stu-id="e6fbb-160">CSS Media Queries</span></span>

<span data-ttu-id="e6fbb-161">[Медиа-запросов CSS](http://www.w3.org/TR/css3-mediaqueries/) представляют собой расширение для CSS для типов мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-161">[CSS media queries](http://www.w3.org/TR/css3-mediaqueries/) are an extension to CSS for media types.</span></span> <span data-ttu-id="e6fbb-162">Они позволяют создавать правила, которые переопределяют правила CSS по умолчанию для определенных браузеров (агенты пользователей).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-162">They allow you to create rules that override the default CSS rules for specific browsers (user agents).</span></span> <span data-ttu-id="e6fbb-163">Общие правила CSS, предназначенного для браузеров мобильных устройств является определение максимальный размер экрана.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-163">A common rule for CSS that targets mobile browsers is defining the maximum screen size.</span></span> <span data-ttu-id="e6fbb-164">*Content\Site.css* файл, который создается при создании нового проекта ASP.NET MVC 4 Internet содержит следующий запрос мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-164">The *Content\Site.css* file that's created when you create a new ASP.NET MVC 4 Internet project contains the following media query:</span></span>

[!code-css[Main](aspnet-mvc-4-mobile-features/samples/sample1.css)]

<span data-ttu-id="e6fbb-165">Если окно браузера 850 пикселей в ширину или меньше, оно будет использовать правила CSS внутри этого блока мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-165">If the browser window is 850 pixels wide or less, it will use the CSS rules inside this media block.</span></span> <span data-ttu-id="e6fbb-166">Подобные запросы мультимедиа CSS можно использовать для предоставления более удобного отображения содержимого HTML на небольших браузеры (например, браузеры мобильных устройств), чем правила CSS по умолчанию, которые предназначены для широкого отображается для браузеров настольных компьютеров.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-166">You can use CSS media queries like this to provide a better display of HTML content on small browsers (like mobile browsers) than the default CSS rules that are designed for the wider displays of desktop browsers.</span></span>

## <a name="the-viewport-meta-tag"></a><span data-ttu-id="e6fbb-167">Окно просмотра мета-тег</span><span class="sxs-lookup"><span data-stu-id="e6fbb-167">The Viewport Meta Tag</span></span>

<span data-ttu-id="e6fbb-168">Большинство мобильных браузеров определить ширину окна виртуального браузера ( *просмотра*) это значительно больше, чем фактическую ширину мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-168">Most mobile browsers define a virtual browser window width (the *viewport*) that's much larger than the actual width of the mobile device.</span></span> <span data-ttu-id="e6fbb-169">Это позволяет браузеры мобильных устройств в соответствии со всей веб-страницы внутри виртуального дисплея.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-169">This allows mobile browsers to fit the entire web page inside the virtual display.</span></span> <span data-ttu-id="e6fbb-170">Пользователи затем можно увеличить масштаб содержимого.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-170">Users can then zoom in on interesting content.</span></span> <span data-ttu-id="e6fbb-171">Тем не менее если значение ширины окна просмотра для ширины самого устройства, не масштабирования необходим, так как содержимое размещается в браузере мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-171">However, if you set the viewport width to the actual device width, no zooming is required, because the content fits in the mobile browser.</span></span>

<span data-ttu-id="e6fbb-172">Окно просмотра `<meta>` тег в файле макета ASP.NET MVC 4 задает окно просмотра по ширине устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-172">The viewport `<meta>` tag in the ASP.NET MVC 4 layout file sets the viewport to the device width.</span></span> <span data-ttu-id="e6fbb-173">В следующей строке показано окно просмотра `<meta>` тег в файле макета ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-173">The following line shows the viewport `<meta>` tag in the ASP.NET MVC 4 layout file.</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample2.html)]

## <a name="examining-the-effect-of-css-media-queries-and-the-viewport-meta-tag"></a><span data-ttu-id="e6fbb-174">Изучение эффекта CSS медиа-запросами и просмотра мета-тег</span><span class="sxs-lookup"><span data-stu-id="e6fbb-174">Examining the Effect of CSS Media Queries and the Viewport Meta Tag</span></span>

<span data-ttu-id="e6fbb-175">Откройте *Views\Shared\\_Layout.cshtml* файл в редакторе и закомментируйте окна просмотра `<meta>` тега.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-175">Open the *Views\Shared\\_Layout.cshtml* file in the editor and comment out the viewport `<meta>` tag.</span></span> <span data-ttu-id="e6fbb-176">В следующей разметке показан закомментированную строку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-176">The following markup shows the commented-out line.</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample3.cshtml)]

<span data-ttu-id="e6fbb-177">Откройте *MvcMobile\Content\Site.css* в редакторе и измените максимальную ширину в запросе носителя на 0 пикселов.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-177">Open the *MvcMobile\Content\Site.css* file in the editor and change the maximum width in the media query to zero pixels.</span></span> <span data-ttu-id="e6fbb-178">Это будет препятствовать правила CSS, используемых в браузерах мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-178">This will prevent the CSS rules from being used in mobile browsers.</span></span> <span data-ttu-id="e6fbb-179">В следующей строке показано запрос измененный носителя:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-179">The following line shows the modified media query:</span></span>

[!code-css[Main](aspnet-mvc-4-mobile-features/samples/sample4.css)]

<span data-ttu-id="e6fbb-180">Сохраните изменения и перейдите к приложению конференции в эмулятор браузера мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-180">Save your changes and browse to the Conference application in a mobile browser emulator.</span></span> <span data-ttu-id="e6fbb-181">Мало места на следующем рисунке приведен результат удаления окна просмотра `<meta>` тега.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-181">The tiny text in the following image is the result of removing the viewport `<meta>` tag.</span></span> <span data-ttu-id="e6fbb-182">С помощью окна просмотра отсутствуют `<meta>` тег, браузер является уменьшение масштаба до ширины окна просмотра по умолчанию (850 пикселей или шириной для большинства мобильных обозревателей.)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-182">With no viewport `<meta>` tag, the browser is zooming out to the default viewport width (850 pixels or wider for most mobile browsers.)</span></span>

<span data-ttu-id="e6fbb-183">[![p1_noViewPort](aspnet-mvc-4-mobile-features/_static/image10.png)](aspnet-mvc-4-mobile-features/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-183">[![p1_noViewPort](aspnet-mvc-4-mobile-features/_static/image10.png)](aspnet-mvc-4-mobile-features/_static/image9.png)</span></span>

<span data-ttu-id="e6fbb-184">Отменить изменения, раскомментируйте окна просмотра `<meta>` тег в файле макета и восстановить запрос носителя 850 пикселей в *Site.css* файл.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-184">Undo your changes — uncomment the viewport `<meta>` tag in the layout file and restore the media query to 850 pixels in the *Site.css* file.</span></span> <span data-ttu-id="e6fbb-185">Сохраните изменения и обновите браузер мобильного устройства для проверки того, что отображение мобильной восстановлен.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-185">Save your changes and refresh the mobile browser to verify that the mobile-friendly display has been restored.</span></span>

<span data-ttu-id="e6fbb-186">Окно просмотра `<meta>` тег и медиа-запросов CSS не являются специфичными для ASP.NET MVC 4, и можно воспользоваться преимуществами этих функций в любое веб-приложение.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-186">The viewport `<meta>` tag and the CSS media query are not specific to ASP.NET MVC 4, and you can take advantage of these features in any web application.</span></span> <span data-ttu-id="e6fbb-187">Но теперь встроены в файлы, которые создаются при создании нового проекта ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-187">But they are now built into the files that are generated when you create a new ASP.NET MVC 4 project.</span></span>

<span data-ttu-id="e6fbb-188">Дополнительные сведения об области просмотра `<meta>` тег, см. в разделе [сказка о двух viewports — часть 2](http://www.quirksmode.org/mobile/viewports2.html).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-188">For more information about the viewport `<meta>` tag, see [A tale of two viewports — part two](http://www.quirksmode.org/mobile/viewports2.html).</span></span>

<span data-ttu-id="e6fbb-189">В следующем разделе вы увидите, как обеспечить представления для браузеров мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-189">In the next section you'll see how to provide mobile-browser specific views.</span></span>

## <a name="overriding-views-layouts-and-partial-views"></a><span data-ttu-id="e6fbb-190">Переопределение представлений, макетов и частичных представлений</span><span class="sxs-lookup"><span data-stu-id="e6fbb-190">Overriding Views, Layouts, and Partial Views</span></span>

<span data-ttu-id="e6fbb-191">Значительные новая функция в ASP.NET MVC 4 — это простой механизм, который позволяет переопределить любое представление (включая макеты и частичные представления) для браузеров мобильных устройств, как правило, для отдельного браузера мобильных или для любого конкретного браузера.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-191">A significant new feature in ASP.NET MVC 4 is a simple mechanism that lets you override any view (including layouts and partial views) for mobile browsers in general, for an individual mobile browser, or for any specific browser.</span></span> <span data-ttu-id="e6fbb-192">Чтобы предоставить представление мобильных обозревателей, можно скопировать файл представления и добавить *. Mobile* к имени файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-192">To provide a mobile-specific view, you can copy a view file and add *.Mobile* to the file name.</span></span> <span data-ttu-id="e6fbb-193">Например, чтобы создать мобильное *индекс* Просмотр, копирование *Views\Home\Index.cshtml* для *Views\Home\Index.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-193">For example, to create a mobile *Index* view, copy *Views\Home\Index.cshtml* to *Views\Home\Index.Mobile.cshtml*.</span></span>

<span data-ttu-id="e6fbb-194">В этом разделе вы создадите файл макета для мобильных обозревателей.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-194">In this section, you'll create a mobile-specific layout file.</span></span>

<span data-ttu-id="e6fbb-195">Сначала скопируйте *Views\Shared\\_Layout.cshtml* для *Views\Shared\\_Layout.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-195">To start, copy *Views\Shared\\_Layout.cshtml* to *Views\Shared\\_Layout.Mobile.cshtml*.</span></span> <span data-ttu-id="e6fbb-196">Откройте  *\_Layout.Mobile.cshtml* и измените заголовок с **конференции MVC4** для **конференции (мобильный)**.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-196">Open *\_Layout.Mobile.cshtml* and change the title from **MVC4 Conference** to **Conference (Mobile)**.</span></span>

<span data-ttu-id="e6fbb-197">В каждом `Html.ActionLink` вызывать, удалите «Поиск по» в каждой связи *ActionLink*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-197">In each `Html.ActionLink` call, remove "Browse by" in each link *ActionLink*.</span></span> <span data-ttu-id="e6fbb-198">В следующем коде показано завершенное основной раздел файла макета для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-198">The following code shows the completed body section of the mobile layout file.</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample5.cshtml)]

<span data-ttu-id="e6fbb-199">Копировать *Views\Home\AllTags.cshtml* файл *Views\Home\AllTags.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-199">Copy the *Views\Home\AllTags.cshtml* file to *Views\Home\AllTags.Mobile.cshtml*.</span></span> <span data-ttu-id="e6fbb-200">Откройте новый файл и измените `<h2>` элемент с «Tags» на «Tags (M)»:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-200">Open the new file and change the `<h2>` element from "Tags" to "Tags (M)":</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample6.html)]

<span data-ttu-id="e6fbb-201">Перейдите на страницу тегов, используя классический браузер и эмулятор браузера мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-201">Browse to the tags page using a desktop browser and using mobile browser emulator.</span></span> <span data-ttu-id="e6fbb-202">Эмулятор браузера мобильного устройства показывает два изменения, внесенные.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-202">The mobile browser emulator shows the two changes you made.</span></span>

<span data-ttu-id="e6fbb-203">[![p2m_layoutTags.mobile](aspnet-mvc-4-mobile-features/_static/image12.png)](aspnet-mvc-4-mobile-features/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-203">[![p2m_layoutTags.mobile](aspnet-mvc-4-mobile-features/_static/image12.png)](aspnet-mvc-4-mobile-features/_static/image11.png)</span></span>

<span data-ttu-id="e6fbb-204">Напротив отображения рабочего стола не изменилась.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-204">In contrast, the desktop display has not changed.</span></span>

<span data-ttu-id="e6fbb-205">[![p2_layoutTagsDesktop](aspnet-mvc-4-mobile-features/_static/image14.png)](aspnet-mvc-4-mobile-features/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-205">[![p2_layoutTagsDesktop](aspnet-mvc-4-mobile-features/_static/image14.png)](aspnet-mvc-4-mobile-features/_static/image13.png)</span></span>

## <a name="browser-specific-views"></a><span data-ttu-id="e6fbb-206">Представлений для браузера</span><span class="sxs-lookup"><span data-stu-id="e6fbb-206">Browser-Specific Views</span></span>

<span data-ttu-id="e6fbb-207">Помимо представления для мобильных устройств и настольных компьютеров можно создать представления для отдельных браузеров.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-207">In addition to mobile-specific and desktop-specific views, you can create views for an individual browser.</span></span> <span data-ttu-id="e6fbb-208">Например можно создать представления, которые предназначены специально для браузера iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-208">For example, you can create views that are specifically for the iPhone browser.</span></span> <span data-ttu-id="e6fbb-209">В этом разделе вы создадите макет для браузера iPhone и версию *AllTags* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-209">In this section, you'll create a layout for the iPhone browser and an iPhone version of the *AllTags* view.</span></span>

<span data-ttu-id="e6fbb-210">Откройте *Global.asax* файл и добавьте следующий код, чтобы `Application_Start` метод.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-210">Open the *Global.asax* file and add the following code to the `Application_Start` method.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample7.cs)]

<span data-ttu-id="e6fbb-211">Этот код определяет новый режим отображения с именем «iPhone», которая будет сопоставлена с каждого входящего запроса.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-211">This code defines a new display mode named "iPhone" that will be matched against each incoming request.</span></span> <span data-ttu-id="e6fbb-212">Если входящий запрос удовлетворяет условию, которое вы определили (то есть, если агент пользователя содержит строку «iPhone»), ASP.NET MVC будет искать представления, имя которого содержит суффикс «iPhone».</span><span class="sxs-lookup"><span data-stu-id="e6fbb-212">If the incoming request matches the condition you defined (that is, if the user agent contains the string "iPhone"), ASP.NET MVC will look for views whose name contains the "iPhone" suffix.</span></span>

<span data-ttu-id="e6fbb-213">В коде, щелкните правой кнопкой мыши `DefaultDisplayMode`, выберите **устранить**, а затем выберите `using System.Web.WebPages;`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-213">In the code, right-click `DefaultDisplayMode`, choose **Resolve**, and then choose `using System.Web.WebPages;`.</span></span> <span data-ttu-id="e6fbb-214">Это действие добавляет ссылку к `System.Web.WebPages` пространство имен, которое там, где `DisplayModes` и `DefaultDisplayMode` определенных типов.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-214">This adds a reference to the `System.Web.WebPages` namespace, which is where the `DisplayModes` and `DefaultDisplayMode` types are defined.</span></span>

<span data-ttu-id="e6fbb-215">[![p2_resolve](aspnet-mvc-4-mobile-features/_static/image16.png)](aspnet-mvc-4-mobile-features/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-215">[![p2_resolve](aspnet-mvc-4-mobile-features/_static/image16.png)](aspnet-mvc-4-mobile-features/_static/image15.png)</span></span>

<span data-ttu-id="e6fbb-216">Кроме того, можно просто вручную добавить следующую строку `using` раздел файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-216">Alternatively, you can just manually add the following line to the `using` section of the file.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample8.cs)]

<span data-ttu-id="e6fbb-217">Полное содержимое *Global.asax* файла приведен ниже.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-217">The complete contents of the *Global.asax* file is shown below.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample9.cs)]

<span data-ttu-id="e6fbb-218">Сохраните изменения.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-218">Save the changes.</span></span> <span data-ttu-id="e6fbb-219">Копировать *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* файл *MvcMobile\Views\Shared\\_Layout.iPhone.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-219">Copy the *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file to *MvcMobile\Views\Shared\\_Layout.iPhone.cshtml*.</span></span> <span data-ttu-id="e6fbb-220">Откройте новый файл и измените `h1` заголовком от `Conference (Mobile)` для `Conference (iPhone)`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-220">Open the new file and then change the `h1` heading from `Conference (Mobile)` to `Conference (iPhone)`.</span></span>

<span data-ttu-id="e6fbb-221">Копировать *MvcMobile\Views\Home\AllTags.Mobile.cshtml* файл *MvcMobile\Views\Home\AllTags.iPhone.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-221">Copy the *MvcMobile\Views\Home\AllTags.Mobile.cshtml* file to *MvcMobile\Views\Home\AllTags.iPhone.cshtml*.</span></span> <span data-ttu-id="e6fbb-222">В новом файле измените `<h2>` элемент из «Tags (M)» на «Tags (iPhone)».</span><span class="sxs-lookup"><span data-stu-id="e6fbb-222">In the new file, change the `<h2>` element from "Tags (M)" to "Tags (iPhone)".</span></span>

<span data-ttu-id="e6fbb-223">Запустите приложение.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-223">Run the application.</span></span> <span data-ttu-id="e6fbb-224">Запустите эмулятор браузера мобильного устройства, убедитесь, что его агента пользователя задано значение «iPhone» и перейдите к *AllTags* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-224">Run a mobile browser emulator, make sure its user agent is set to "iPhone", and browse to the *AllTags* view.</span></span> <span data-ttu-id="e6fbb-225">На следующем снимке экрана показан *AllTags* представления, визуализированного на [Safari](http://www.apple.com/safari/download/) браузера.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-225">The following screenshot shows the *AllTags* view rendered in the [Safari](http://www.apple.com/safari/download/) browser.</span></span> <span data-ttu-id="e6fbb-226">Safari для Windows можно загрузить [здесь](https://support.apple.com/kb/DL1531).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-226">You can download Safari for Windows [here](https://support.apple.com/kb/DL1531).</span></span>

<span data-ttu-id="e6fbb-227">[![p2_iphoneView](aspnet-mvc-4-mobile-features/_static/image18.png)](aspnet-mvc-4-mobile-features/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-227">[![p2_iphoneView](aspnet-mvc-4-mobile-features/_static/image18.png)](aspnet-mvc-4-mobile-features/_static/image17.png)</span></span>

<span data-ttu-id="e6fbb-228">В этом разделе мы рассмотрели способы создания мобильных макеты и представления и как создавать макеты и представления для конкретных устройств, таких как iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-228">In this section we've seen how to create mobile layouts and views and how to create layouts and views for specific devices such as the iPhone.</span></span> <span data-ttu-id="e6fbb-229">В следующем разделе вы узнаете, как использовать jQuery Mobile более привлекательные представлений для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-229">In the next section you'll see how to leverage jQuery Mobile for more compelling mobile views.</span></span>

## <a name="using-jquery-mobile"></a><span data-ttu-id="e6fbb-230">С помощью jQuery Mobile</span><span class="sxs-lookup"><span data-stu-id="e6fbb-230">Using jQuery Mobile</span></span>

<span data-ttu-id="e6fbb-231">[JQuery Mobile](http://jquerymobile.com/demos/1.0b3/#/demos/1.0b3/docs/about/intro.html) библиотека предоставляет платформа пользовательского интерфейса, который работает на всех основных браузеров мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-231">The [jQuery Mobile](http://jquerymobile.com/demos/1.0b3/#/demos/1.0b3/docs/about/intro.html) library provides a user interface framework that works on all the major mobile browsers.</span></span> <span data-ttu-id="e6fbb-232">jQuery Mobile применяется *прогрессивное Совершенствование* для браузеров мобильных устройств, которые поддерживают CSS и JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-232">jQuery Mobile applies *progressive enhancement* to mobile browsers that support CSS and JavaScript.</span></span> <span data-ttu-id="e6fbb-233">Прогрессивное Совершенствование позволяет все обозреватели для отображения основных содержимого веб-страницы, предоставляя более мощные браузеры и устройства для более широкие отображались.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-233">Progressive enhancement allows all browsers to display the basic content of a web page, while allowing more powerful browsers and devices to have a richer display.</span></span> <span data-ttu-id="e6fbb-234">Файлы JavaScript и CSS, которые входят в состав jQuery Mobile стиля многие элементы в соответствии с браузеры мобильных устройств без изменения разметки.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-234">The JavaScript and CSS files that are included with jQuery Mobile style many elements to fit mobile browsers without making any markup changes.</span></span>

<span data-ttu-id="e6fbb-235">В этом разделе вы установите *jQuery.Mobile.MVC* пакета NuGet, который устанавливает jQuery Mobile и мини-приложение переключателя.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-235">In this section you'll install the *jQuery.Mobile.MVC* NuGet package, which installs jQuery Mobile and a view-switcher widget.</span></span>

<span data-ttu-id="e6fbb-236">Чтобы начать, удалите *Shared\\_Layout.Mobile.cshtml* и *Shared\\_Layout.iPhone.cshtml* файлы, созданные ранее.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-236">To start, delete the *Shared\\_Layout.Mobile.cshtml* and *Shared\\_Layout.iPhone.cshtml* files that you created earlier.</span></span>

<span data-ttu-id="e6fbb-237">Переименуйте *Views\Home\AllTags.Mobile.cshtml* и *Views\Home\AllTags.iPhone.cshtml* файлы *Views\Home\AllTags.iPhone.cshtml.hide* и  *Views\Home\AllTags.Mobile.cshtml.hide*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-237">Rename *Views\Home\AllTags.Mobile.cshtml* and *Views\Home\AllTags.iPhone.cshtml* files to *Views\Home\AllTags.iPhone.cshtml.hide* and *Views\Home\AllTags.Mobile.cshtml.hide*.</span></span> <span data-ttu-id="e6fbb-238">Так как файлы больше не имеют *.cshtml* расширения, они не будут использоваться средой выполнения ASP.NET MVC для подготовки к просмотру *AllTags* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-238">Because the files no longer have a *.cshtml* extension, they won't be used by the ASP.NET MVC runtime to render the *AllTags* view.</span></span>

<span data-ttu-id="e6fbb-239">Установка *jQuery.Mobile.MVC* пакет NuGet, таким образом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-239">Install the *jQuery.Mobile.MVC* NuGet package by doing this:</span></span>

1. <span data-ttu-id="e6fbb-240">Из **средства** меню, выберите **диспетчер пакетов NuGet**, а затем выберите **консоль диспетчера пакетов**.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-240">From the **Tools** menu, select **NuGet Package Manager**, and then select **Package Manager Console**.</span></span>

    <span data-ttu-id="e6fbb-241">[![p3_packageMgr](aspnet-mvc-4-mobile-features/_static/image20.png)](aspnet-mvc-4-mobile-features/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-241">[![p3_packageMgr](aspnet-mvc-4-mobile-features/_static/image20.png)](aspnet-mvc-4-mobile-features/_static/image19.png)</span></span>
2. <span data-ttu-id="e6fbb-242">В **консоль диспетчера пакетов**, введите `Install-Package jQuery.Mobile.MVC -version 1.0.0`</span><span class="sxs-lookup"><span data-stu-id="e6fbb-242">In the **Package Manager Console**, enter `Install-Package jQuery.Mobile.MVC -version 1.0.0`</span></span>

<span data-ttu-id="e6fbb-243">На следующем рисунке показана файлы добавления и изменения в проект MvcMobile jQuery.Mobile.MVC пакетом NuGet.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-243">The following image shows the files added and changed to the MvcMobile project by the NuGet jQuery.Mobile.MVC package.</span></span> <span data-ttu-id="e6fbb-244">Файлы, которые добавляются имеют [добавьте] добавленным после имени файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-244">Files which are added have [add] appended after the file name.</span></span> <span data-ttu-id="e6fbb-245">Образ не содержит файл GIF и PNG-файлов добавляется *Content\images* папки.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-245">The image does not show the GIF and PNG files added to the *Content\images* folder.</span></span>

![](aspnet-mvc-4-mobile-features/_static/image21.png)

<span data-ttu-id="e6fbb-246">Пакет NuGet jQuery.Mobile.MVC устанавливает следующее:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-246">The jQuery.Mobile.MVC NuGet package installs the following:</span></span>

- <span data-ttu-id="e6fbb-247">*Приложения\_Start\BundleMobileConfig.cs* файл, который требуется для ссылки на добавлены файлы CSS и JavaScript jQuery.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-247">The *App\_Start\BundleMobileConfig.cs* file, which is needed to reference the jQuery JavaScript and CSS files added.</span></span> <span data-ttu-id="e6fbb-248">Необходимо выполните приведенные ниже инструкции и ссылаться на пакет мобильных устройств, определенные в этом файле.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-248">You must follow the instructions below and reference the mobile bundle defined in this file.</span></span>
- <span data-ttu-id="e6fbb-249">jQuery Mobile CSS files.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-249">jQuery Mobile CSS files.</span></span>
- <span data-ttu-id="e6fbb-250">Объект `ViewSwitcher` контроллера мини-приложения (*Controllers\ViewSwitcherController.cs*).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-250">A `ViewSwitcher` controller widget (*Controllers\ViewSwitcherController.cs*).</span></span>
- <span data-ttu-id="e6fbb-251">jQuery Mobile JavaScript files.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-251">jQuery Mobile JavaScript files.</span></span>
- <span data-ttu-id="e6fbb-252">Файл jQuery Mobile стиля макета (*Views\Shared\\_Layout.Mobile.cshtml*).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-252">A jQuery Mobile-styled layout file (*Views\Shared\\_Layout.Mobile.cshtml*).</span></span>
- <span data-ttu-id="e6fbb-253">Частичное представление переключателя *(MvcMobile\Views\Shared\\_ViewSwitcher.cshtml*), предоставляющий ссылку в верхней части каждой страницы, чтобы перейти из рабочего стола представление для мобильных устройств и наоборот.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-253">A view-switcher partial view *(MvcMobile\Views\Shared\\_ViewSwitcher.cshtml*) that provides a link at the top of each page to switch from desktop view to mobile view and vice versa.</span></span>
- <span data-ttu-id="e6fbb-254">Несколько<em>.png</em> и <em>.gif</em> файлы изображений в <em>Content\images</em> папки.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-254">Several<em>.png</em> and <em>.gif</em> image files in the <em>Content\images</em> folder.</span></span>

<span data-ttu-id="e6fbb-255">Откройте *Global.asax* файл и добавьте следующий код в последней строке из `Application_Start` метод.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-255">Open the *Global.asax* file and add the following code as the last line of the `Application_Start` method.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample10.cs)]

<span data-ttu-id="e6fbb-256">В следующем коде показан полный *Global.asax* файл.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-256">The following code shows the complete *Global.asax* file.</span></span>

[!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample11.cs?highlight=26)]

> [!NOTE]
> <span data-ttu-id="e6fbb-257">Если вы используете Internet Explorer 9 и вы не видите `BundleMobileConfig` строку выше в выделение желтым цветом, нажмите кнопку [кнопка просмотра в режиме совместимости](https://windows.microsoft.com/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)![изображение кнопки «Просмотр в режиме совместимости» (отключено)](http://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg " Изображение кнопки «Просмотр в режиме совместимости» (отключено)") в IE, чтобы изменить контур значок ![изображение кнопки «Просмотр в режиме совместимости» (отключено)](http://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "изображение кнопки «Просмотр в режиме совместимости» (отключено) ") сплошной ![изображение кнопки просмотра в режиме совместимости (on)](http://res1.windows.microsoft.com/resbox/en/Windows 7/main/156805ff-3130-481b-a12d-4d3a96470f36_14.jpg "изображение кнопки просмотра в режиме совместимости (on)").</span><span class="sxs-lookup"><span data-stu-id="e6fbb-257">If you are using Internet Explorer 9 and you don't see the `BundleMobileConfig` line above in yellow highlight, click the [Compatibility View button](https://windows.microsoft.com/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)![Picture of the Compatibility View button (off)](http://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Picture of the Compatibility View button (off)") in IE to make the icon change from an outline ![Picture of the Compatibility View button (off)](http://res2.windows.microsoft.com/resbox/en/Windows 7/main/f080e77f-9b66-4ac8-9af0-803c4f8a859c_15.jpg "Picture of the Compatibility View button (off)") to a solid color ![Picture of the Compatibility View button (on)](http://res1.windows.microsoft.com/resbox/en/Windows 7/main/156805ff-3130-481b-a12d-4d3a96470f36_14.jpg "Picture of the Compatibility View button (on)").</span></span> <span data-ttu-id="e6fbb-258">Вместо этого учебника можно просмотреть в FireFox или Chrome.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-258">Alternatively you can view this tutorial in FireFox or Chrome.</span></span>


<span data-ttu-id="e6fbb-259">Откройте *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* файл и добавьте следующий код непосредственно после `Html.Partial` вызова:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-259">Open the *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file and add the following markup directly after the `Html.Partial` call:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample12.cshtml)]

<span data-ttu-id="e6fbb-260">Полный *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* файла приведен ниже:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-260">The complete *MvcMobile\Views\Shared\\_Layout.Mobile.cshtml* file is shown below:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample13.cshtml)]

<span data-ttu-id="e6fbb-261">При создании приложения и в вашей эмулятор браузера мобильного устройства, перейдите к *AllTags* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-261">Build the application, and in your mobile browser emulator browse to the *AllTags* view.</span></span> <span data-ttu-id="e6fbb-262">Вы увидите следующее:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-262">You see the following:</span></span>

<span data-ttu-id="e6fbb-263">[![p3_afterNuGet](aspnet-mvc-4-mobile-features/_static/image23.png)](aspnet-mvc-4-mobile-features/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-263">[![p3_afterNuGet](aspnet-mvc-4-mobile-features/_static/image23.png)](aspnet-mvc-4-mobile-features/_static/image22.png)</span></span>

> [!NOTE]
> <span data-ttu-id="e6fbb-264">Можно отлаживать мобильных конкретный код, [параметр строку агента пользователя](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) IE или Chrome для iPhone, а затем с помощью средств разработчика F-12.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-264">You can debug the mobile specific code by [setting the user agent string](http://www.howtogeek.com/113439/how-to-change-your-browsers-user-agent-without-installing-any-extensions/) for IE or Chrome to iPhone and then using the F-12 developer tools.</span></span> <span data-ttu-id="e6fbb-265">Если не отображается в браузере мобильного **Главная**, **говорящего**, **тега**, и **даты** связи, как кнопки, ссылки на jQuery Mobile сценарии и файлы CSS, скорее всего, не подходят.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-265">If your mobile browser doesn't display the **Home**, **Speaker**, **Tag**, and **Date** links as buttons, the references to jQuery Mobile scripts and CSS files are probably not correct.</span></span>


<span data-ttu-id="e6fbb-266">Помимо изменения стиля, вы увидите **отображение мобильного представления** и ссылку, которая позволяет переключать представление для мобильных устройств, чтобы представление рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-266">In addition to the style changes, you see **Displaying mobile view** and a link that lets you switch from mobile view to desktop view.</span></span> <span data-ttu-id="e6fbb-267">Выберите **представление рабочего стола** отображается ссылка, а представление рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-267">Choose the **Desktop view** link, and the desktop view is displayed.</span></span>

<span data-ttu-id="e6fbb-268">[![p3_desktopView](aspnet-mvc-4-mobile-features/_static/image25.png)](aspnet-mvc-4-mobile-features/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-268">[![p3_desktopView](aspnet-mvc-4-mobile-features/_static/image25.png)](aspnet-mvc-4-mobile-features/_static/image24.png)</span></span>

<span data-ttu-id="e6fbb-269">Представление рабочего стола не дает возможности для перехода непосредственно к представление для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-269">The desktop view doesn't provide a way to directly navigate back to the mobile view.</span></span> <span data-ttu-id="e6fbb-270">Теперь мы исправим это.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-270">You'll fix that now.</span></span> <span data-ttu-id="e6fbb-271">Откройте *Views\Shared\\_Layout.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-271">Open the *Views\Shared\\_Layout.cshtml* file.</span></span> <span data-ttu-id="e6fbb-272">Под страницы `body` элемента, добавьте следующий код, который отображает представление переключателя мини-приложения:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-272">Just under the page `body` element, add the following code, which renders the view-switcher widget:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample14.cshtml)]

<span data-ttu-id="e6fbb-273">Обновить *AllTags* представление в браузере мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-273">Refresh the *AllTags* view in the mobile browser.</span></span> <span data-ttu-id="e6fbb-274">Теперь можно переходить между представлениями desktop и mobile.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-274">You can now navigate between desktop and mobile views.</span></span>

<span data-ttu-id="e6fbb-275">[![p3_desktopViewWithMobileLink](aspnet-mvc-4-mobile-features/_static/image27.png)](aspnet-mvc-4-mobile-features/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-275">[![p3_desktopViewWithMobileLink](aspnet-mvc-4-mobile-features/_static/image27.png)](aspnet-mvc-4-mobile-features/_static/image26.png)</span></span>

> [!NOTE]
> <span data-ttu-id="e6fbb-276">Отладка Примечание: Можно добавить следующий код в конец Views\Shared\\_ViewSwitcher.cshtml для отладки представления, настроенное с помощью строки агента пользователя браузера на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-276">Debug note: You can add the following code to the end of the Views\Shared\\_ViewSwitcher.cshtml to help debug views when using a browser the user agent string set to a mobile device.</span></span>
>
> [!code-csharp[Main](aspnet-mvc-4-mobile-features/samples/sample15.cs)]
>
> <span data-ttu-id="e6fbb-277">и следующий заголовок для добавления *Views\Shared\\_Layout.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-277">and adding the following heading to the *Views\Shared\\_Layout.cshtml* file.</span></span>
>
> [!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample16.html)]


<span data-ttu-id="e6fbb-278">Перейдите к *AllTags* страницу в классическом браузере.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-278">Browse to the *AllTags* page in a desktop browser.</span></span> <span data-ttu-id="e6fbb-279">Представление переключателя мини-приложения не отображаются в классическом браузере, поскольку он добавляется только к странице макета для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-279">The view-switcher widget is not displayed in a desktop browser because it's added only to the mobile layout page.</span></span> <span data-ttu-id="e6fbb-280">Далее в этом руководстве вы увидите, как можно добавить мини-приложение переключателя представление рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-280">Later in the tutorial you'll see how you can add the view-switcher widget to the desktop view.</span></span>

<span data-ttu-id="e6fbb-281">[![p3_desktopBrowser](aspnet-mvc-4-mobile-features/_static/image29.png)](aspnet-mvc-4-mobile-features/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-281">[![p3_desktopBrowser](aspnet-mvc-4-mobile-features/_static/image29.png)](aspnet-mvc-4-mobile-features/_static/image28.png)</span></span>

## <a name="improving-the-speakers-list"></a><span data-ttu-id="e6fbb-282">Улучшение списка докладчиков</span><span class="sxs-lookup"><span data-stu-id="e6fbb-282">Improving the Speakers List</span></span>

<span data-ttu-id="e6fbb-283">В браузере мобильного устройства, выберите **динамики** ссылку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-283">In the mobile browser, select the **Speakers** link.</span></span> <span data-ttu-id="e6fbb-284">Так как нет мобильного представления (*AllSpeakers.Mobile.cshtml*), отображения для говорящих по умолчанию (*AllSpeakers.cshtml*) визуализируется с использованием представления мобильного макета ( *\_ Layout.Mobile.cshtml*).</span><span class="sxs-lookup"><span data-stu-id="e6fbb-284">Because there's no mobile view(*AllSpeakers.Mobile.cshtml*), the default speakers display (*AllSpeakers.cshtml*) is rendered using the mobile layout view (*\_Layout.Mobile.cshtml*).</span></span>

<span data-ttu-id="e6fbb-285">[![p3_speakersDeskTop](aspnet-mvc-4-mobile-features/_static/image31.png)](aspnet-mvc-4-mobile-features/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-285">[![p3_speakersDeskTop](aspnet-mvc-4-mobile-features/_static/image31.png)](aspnet-mvc-4-mobile-features/_static/image30.png)</span></span>

<span data-ttu-id="e6fbb-286">Вы можете глобально отключить представление по умолчанию (не для мобильных устройств) из отображения в мобильном макете, задав `RequireConsistentDisplayMode` для `true` в *представления\\_ViewStart.cshtml* файл следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-286">You can globally disable a default (non-mobile) view from rendering inside a mobile layout by setting `RequireConsistentDisplayMode` to `true` in the *Views\\_ViewStart.cshtml* file, like this:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample17.cshtml)]

<span data-ttu-id="e6fbb-287">Когда `RequireConsistentDisplayMode` присваивается `true`, то мобильный макет (<em>\_Layout.Mobile.cshtml</em>) используется только для мобильных представлений.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-287">When `RequireConsistentDisplayMode` is set to `true`, the mobile layout (<em>\_Layout.Mobile.cshtml</em>) is used only for mobile views.</span></span> <span data-ttu-id="e6fbb-288">(То есть файл представления имеет форму <em>\*\* ViewName</em><em>. Mobile.cshtml</em>.) Вы можете задать `RequireConsistentDisplayMode` для `true` Если макет для мобильных устройств не работает с представлений не для мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-288">(That is, the view file is of the form <em>\*\*ViewName</em><em>.Mobile.cshtml</em>.) You might want to set `RequireConsistentDisplayMode` to `true` if your mobile layout doesn't work well with your non-mobile views.</span></span> <span data-ttu-id="e6fbb-289">Снимок экрана ниже показано как <em>динамики</em> страница отображается при значении `RequireConsistentDisplayMode` присваивается `true`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-289">The screenshot below shows how the <em>Speakers</em> page renders when `RequireConsistentDisplayMode` is set to `true`.</span></span>

<span data-ttu-id="e6fbb-290">[![p3_speakersConsistent](aspnet-mvc-4-mobile-features/_static/image33.png)](aspnet-mvc-4-mobile-features/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-290">[![p3_speakersConsistent](aspnet-mvc-4-mobile-features/_static/image33.png)](aspnet-mvc-4-mobile-features/_static/image32.png)</span></span>

<span data-ttu-id="e6fbb-291">Согласованный режим отображения в представлении можно отключить, установив `RequireConsistentDisplayMode` для `false` в файле представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-291">You can disable consistent display mode in a view by setting `RequireConsistentDisplayMode` to `false` in the view file.</span></span> <span data-ttu-id="e6fbb-292">Следующая разметка в *Views\Home\AllSpeakers.cshtml* файле задает `RequireConsistentDisplayMode` для `false`:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-292">The following markup in the *Views\Home\AllSpeakers.cshtml* file sets `RequireConsistentDisplayMode` to `false`:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample18.cshtml)]

## <a name="creating-a-mobile-speakers-view"></a><span data-ttu-id="e6fbb-293">Создание представления мобильных докладчиков</span><span class="sxs-lookup"><span data-stu-id="e6fbb-293">Creating a Mobile Speakers View</span></span>

<span data-ttu-id="e6fbb-294">Как вы только что увидели, *динамики* удобно для чтения, но ссылки невелики и трудно на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-294">As you just saw, the *Speakers* view is readable, but the links are small and are difficult to tap on a mobile device.</span></span> <span data-ttu-id="e6fbb-295">В этом разделе вы создадите мобильных обозревателей *динамики* представления, который выглядит, как современные мобильные приложения — отображает большой, чтобы коснитесь ссылки и содержит поле поиска, чтобы быстро находить докладчиков.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-295">In this section, you'll create a mobile-specific *Speakers* view that looks like a modern mobile application — it displays large, easy-to-tap links and contains a search box to quickly find speakers.</span></span>

<span data-ttu-id="e6fbb-296">Копировать *AllSpeakers.cshtml* для *AllSpeakers.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-296">Copy *AllSpeakers.cshtml* to *AllSpeakers.Mobile.cshtml*.</span></span> <span data-ttu-id="e6fbb-297">Откройте *AllSpeakers.Mobile.cshtml* файл и удалите `<h2>` элемента заголовка.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-297">Open the *AllSpeakers.Mobile.cshtml* file and remove the `<h2>` heading element.</span></span>

<span data-ttu-id="e6fbb-298">В `<ul>` , добавьте `data-role` атрибут и присвойте ему значение `listview`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-298">In the `<ul>` tag, add the `data-role` attribute and set its value to `listview`.</span></span> <span data-ttu-id="e6fbb-299">Как и другие [ `data-*` атрибуты](http://html5doctor.com/html5-custom-data-attributes/), `data-role="listview"` делает большой список элементы проще для отвода.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-299">Like other [`data-*` attributes](http://html5doctor.com/html5-custom-data-attributes/), `data-role="listview"` makes the large list items easier to tap.</span></span> <span data-ttu-id="e6fbb-300">Вот как выглядит полная разметка:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-300">This is what the completed markup looks like:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample19.cshtml)]

<span data-ttu-id="e6fbb-301">Обновите браузер мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-301">Refresh the mobile browser.</span></span> <span data-ttu-id="e6fbb-302">Обновленное представление выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-302">The updated view looks like this:</span></span>

<span data-ttu-id="e6fbb-303">[![p3_updatedSpeakerView1](aspnet-mvc-4-mobile-features/_static/image35.png)](aspnet-mvc-4-mobile-features/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-303">[![p3_updatedSpeakerView1](aspnet-mvc-4-mobile-features/_static/image35.png)](aspnet-mvc-4-mobile-features/_static/image34.png)</span></span>

<span data-ttu-id="e6fbb-304">Несмотря на то, что представление для мобильных устройств была улучшена, трудно перемещаться по длинному списку докладчиков.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-304">Although the mobile view has improved, it's difficult to navigate the long list of speakers.</span></span> <span data-ttu-id="e6fbb-305">Чтобы исправить это, в `<ul>` , добавьте `data-filter` атрибут и присвойте ему значение `true`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-305">To fix this, in the `<ul>` tag, add the `data-filter` attribute and set it to `true`.</span></span> <span data-ttu-id="e6fbb-306">В коде ниже показан `ul` разметки.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-306">The code below shows the `ul` markup.</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample20.html)]

<span data-ttu-id="e6fbb-307">На следующем рисунке показано поле фильтра поиска в верхней части страницы, полученный в результате `data-filter` атрибута.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-307">The following image shows the search filter box at the top of the page that results from the `data-filter` attribute.</span></span>

<span data-ttu-id="e6fbb-308">[![ps_Data_Filter](aspnet-mvc-4-mobile-features/_static/image37.png)](aspnet-mvc-4-mobile-features/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-308">[![ps_Data_Filter](aspnet-mvc-4-mobile-features/_static/image37.png)](aspnet-mvc-4-mobile-features/_static/image36.png)</span></span>

<span data-ttu-id="e6fbb-309">При вводе каждой буквы в поле поиска, jQuery Mobile фильтрует отображаемого списка, как показано на рисунке ниже.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-309">As you type each letter in the search box, jQuery Mobile filters the displayed list as shown in the image below.</span></span>

<span data-ttu-id="e6fbb-310">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image39.png)](aspnet-mvc-4-mobile-features/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-310">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image39.png)](aspnet-mvc-4-mobile-features/_static/image38.png)</span></span>

## <a name="improving-the-tags-list"></a><span data-ttu-id="e6fbb-311">Улучшение списка тегов</span><span class="sxs-lookup"><span data-stu-id="e6fbb-311">Improving the Tags List</span></span>

<span data-ttu-id="e6fbb-312">Значение по умолчанию, такие как *динамики* представлении *теги* удобно для чтения, но ссылки слишком малого и трудно на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-312">Like the default *Speakers* view, the *Tags* view is readable, but the links are small and difficult to tap on a mobile device.</span></span> <span data-ttu-id="e6fbb-313">В этом разделе вы исправите *теги* следующим образом: устранены *динамики* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-313">In this section, you'll fix the *Tags* view the same way you fixed the *Speakers* view.</span></span>

<span data-ttu-id="e6fbb-314">Удалить &quot;скрыть&quot; суффикс *Views\Home\AllTags.Mobile.cshtml.hide* файл, чтобы имя *Views\Home\AllTags.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-314">Remove the &quot;hide&quot; suffix to the *Views\Home\AllTags.Mobile.cshtml.hide* file so the name is *Views\Home\AllTags.Mobile.cshtml*.</span></span> <span data-ttu-id="e6fbb-315">Откройте переименованный файл и удалите `<h2>` элемент.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-315">Open the renamed file and remove the `<h2>` element.</span></span>

<span data-ttu-id="e6fbb-316">Добавить `data-role` и `data-filter` атрибуты `<ul>` тег, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-316">Add the `data-role` and `data-filter` attributes to the `<ul>` tag, as shown here:</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample21.html)]

<span data-ttu-id="e6fbb-317">На следующем рисунке показана страница теги, фильтрация по буквы `J`.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-317">The image below shows the tags page filtering on the letter `J`.</span></span>

<span data-ttu-id="e6fbb-318">[![p3_tags_J](aspnet-mvc-4-mobile-features/_static/image41.png)](aspnet-mvc-4-mobile-features/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-318">[![p3_tags_J](aspnet-mvc-4-mobile-features/_static/image41.png)](aspnet-mvc-4-mobile-features/_static/image40.png)</span></span>

## <a name="improving-the-dates-list"></a><span data-ttu-id="e6fbb-319">Улучшение списка дат</span><span class="sxs-lookup"><span data-stu-id="e6fbb-319">Improving the Dates List</span></span>

<span data-ttu-id="e6fbb-320">Вы можете улучшить *даты* просматривать как повышают уровень *динамики* и *теги* просматривает, так как это проще в использовании на мобильном устройстве.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-320">You can improve the *Dates* view like you improved the *Speakers* and *Tags* views, so that it's easier to use on a mobile device.</span></span>

<span data-ttu-id="e6fbb-321">Копировать *Views\Home\AllDates.cshtml* файл *Views\Home\AllDates.Mobile.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-321">Copy the *Views\Home\AllDates.cshtml* file to *Views\Home\AllDates.Mobile.cshtml*.</span></span> <span data-ttu-id="e6fbb-322">Откройте новый файл и удалите `<h2>` элемент.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-322">Open the new file and remove the `<h2>` element.</span></span>

<span data-ttu-id="e6fbb-323">Добавить `data-role="listview"` для `<ul>` тег следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-323">Add `data-role="listview"` to the `<ul>` tag, like this:</span></span>

[!code-html[Main](aspnet-mvc-4-mobile-features/samples/sample22.html)]

<span data-ttu-id="e6fbb-324">На следующем рисунке показано, что **даты** как выглядит страница с `data-role` атрибут на месте.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-324">The image below shows what the **Date** page looks like with the `data-role` attribute in place.</span></span>

<span data-ttu-id="e6fbb-325">[![p3_dates1](aspnet-mvc-4-mobile-features/_static/image43.png)](aspnet-mvc-4-mobile-features/_static/image42.png) Замените содержимое файла *Views\Home\AllDates.Mobile.cshtml* файла следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-325">[![p3_dates1](aspnet-mvc-4-mobile-features/_static/image43.png)](aspnet-mvc-4-mobile-features/_static/image42.png) Replace the contents of the *Views\Home\AllDates.Mobile.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample23.cshtml)]

<span data-ttu-id="e6fbb-326">Этот код группирует все сеансы по дням.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-326">This code groups all sessions by days.</span></span> <span data-ttu-id="e6fbb-327">Он создает разделитель списка для каждого нового дня, и в нем перечислены все сеансы для каждого дня в списке разделитель.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-327">It creates a list divider for each new day, and it lists all the sessions for each day under a divider.</span></span> <span data-ttu-id="e6fbb-328">Вот, что получится при выполнении этого кода:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-328">Here's what it looks like when this code runs:</span></span>

<span data-ttu-id="e6fbb-329">[![p3_dates2](aspnet-mvc-4-mobile-features/_static/image45.png)](aspnet-mvc-4-mobile-features/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-329">[![p3_dates2](aspnet-mvc-4-mobile-features/_static/image45.png)](aspnet-mvc-4-mobile-features/_static/image44.png)</span></span>

## <a name="improving-the-sessionstable-view"></a><span data-ttu-id="e6fbb-330">Улучшение представления SessionsTable</span><span class="sxs-lookup"><span data-stu-id="e6fbb-330">Improving the SessionsTable View</span></span>

<span data-ttu-id="e6fbb-331">В этом разделе вы создадите представление мобильных обозревателей сеансов.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-331">In this section, you'll create a mobile-specific view of sessions.</span></span> <span data-ttu-id="e6fbb-332">Изменения, вносимые мы будет более сложный, чем в других представлениях, которые мы создали.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-332">The changes we make will be more extensive than in other views we have created.</span></span>

<span data-ttu-id="e6fbb-333">В браузере мобильного устройства коснитесь **говорящего** кнопку, а затем введите `Sc` в поле поиска.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-333">In the mobile browser, tap the **Speaker** button, then enter `Sc` in the search box.</span></span>

<span data-ttu-id="e6fbb-334">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image47.png)](aspnet-mvc-4-mobile-features/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-334">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image47.png)](aspnet-mvc-4-mobile-features/_static/image46.png)</span></span>

<span data-ttu-id="e6fbb-335">Коснитесь **(Scott hanselman)** ссылку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-335">Tap the **Scott Hanselman** link.</span></span>

<span data-ttu-id="e6fbb-336">[![p3_scottHa](aspnet-mvc-4-mobile-features/_static/image49.png)](aspnet-mvc-4-mobile-features/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-336">[![p3_scottHa](aspnet-mvc-4-mobile-features/_static/image49.png)](aspnet-mvc-4-mobile-features/_static/image48.png)</span></span>

<span data-ttu-id="e6fbb-337">Как вы видите, отображение трудно читать в браузере мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-337">As you can see, the display is difficult to read on a mobile browser.</span></span> <span data-ttu-id="e6fbb-338">Столбец дат трудно читать, и столбец "теги" выходит за пределы представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-338">The date column is hard to read and the tags column is out of the view.</span></span> <span data-ttu-id="e6fbb-339">Чтобы устранить эту проблему, скопируйте *Views\Home\SessionsTable.cshtml* для *Views\Home\SessionsTable.Mobile.cshtml*, а затем замените содержимое файла следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-339">To fix this, copy *Views\Home\SessionsTable.cshtml* to *Views\Home\SessionsTable.Mobile.cshtml*, and then replace the contents of the file with the following code:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample24.cshtml)]

<span data-ttu-id="e6fbb-340">Код удаляет комнаты и теги столбцов и по вертикали, форматирует заголовок, говорящего и даты, чтобы все эти данные можно было читать в браузере мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-340">The code removes the room and tags columns, and formats the title, speaker, and date vertically, so that all this information is readable on a mobile browser.</span></span> <span data-ttu-id="e6fbb-341">На рисунке ниже приведены изменения в коде.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-341">The image below reflects the code changes.</span></span>

<span data-ttu-id="e6fbb-342">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image51.png)](aspnet-mvc-4-mobile-features/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-342">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image51.png)](aspnet-mvc-4-mobile-features/_static/image50.png)</span></span>

## <a name="improving-the-sessionbycode-view"></a><span data-ttu-id="e6fbb-343">Улучшение представления SessionByCode</span><span class="sxs-lookup"><span data-stu-id="e6fbb-343">Improving the SessionByCode View</span></span>

<span data-ttu-id="e6fbb-344">Наконец, вы создадите представление мобильных обозревателей *SessionByCode* представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-344">Finally, you'll create a mobile-specific view of the *SessionByCode* view.</span></span> <span data-ttu-id="e6fbb-345">В браузере мобильного устройства коснитесь **говорящего** кнопку, а затем введите `Sc` в поле поиска.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-345">In the mobile browser, tap the **Speaker** button, then enter `Sc` in the search box.</span></span>

<span data-ttu-id="e6fbb-346">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image53.png)](aspnet-mvc-4-mobile-features/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-346">[![ps_data_filter_SC](aspnet-mvc-4-mobile-features/_static/image53.png)](aspnet-mvc-4-mobile-features/_static/image52.png)</span></span>

<span data-ttu-id="e6fbb-347">Коснитесь **(Scott hanselman)** ссылку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-347">Tap the **Scott Hanselman** link.</span></span> <span data-ttu-id="e6fbb-348">Скотт Хансельман сеансы будут отображены.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-348">Scott Hanselman's sessions are displayed.</span></span>

<span data-ttu-id="e6fbb-349">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image55.png)](aspnet-mvc-4-mobile-features/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-349">[![ps_SessionsByScottHa](aspnet-mvc-4-mobile-features/_static/image55.png)](aspnet-mvc-4-mobile-features/_static/image54.png)</span></span>

<span data-ttu-id="e6fbb-350">Выберите **обзором MS Web стека из любовь** ссылку.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-350">Choose the **An Overview of the MS Web Stack of Love** link.</span></span>

<span data-ttu-id="e6fbb-351">[![ps_love](aspnet-mvc-4-mobile-features/_static/image57.png)](aspnet-mvc-4-mobile-features/_static/image56.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-351">[![ps_love](aspnet-mvc-4-mobile-features/_static/image57.png)](aspnet-mvc-4-mobile-features/_static/image56.png)</span></span>

<span data-ttu-id="e6fbb-352">Представление рабочего стола по умолчанию работает, но его можно увеличить.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-352">The default desktop view is fine, but you can improve it.</span></span>

<span data-ttu-id="e6fbb-353">Копировать *Views\Home\SessionByCode.cshtml* для *Views\Home\SessionByCode.Mobile.cshtml* и замените содержимое файла *Views\Home\SessionByCode.Mobile.cshtml*файл, используя следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-353">Copy the *Views\Home\SessionByCode.cshtml* to *Views\Home\SessionByCode.Mobile.cshtml* and replace the contents of the *Views\Home\SessionByCode.Mobile.cshtml* file with the following markup:</span></span>

[!code-cshtml[Main](aspnet-mvc-4-mobile-features/samples/sample25.cshtml)]

<span data-ttu-id="e6fbb-354">Новая разметка использует `data-role` атрибут для улучшения макета представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-354">The new markup uses the `data-role` attribute to improve the layout of the view.</span></span>

<span data-ttu-id="e6fbb-355">Обновите браузер мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-355">Refresh the mobile browser.</span></span> <span data-ttu-id="e6fbb-356">Следующий рисунок отражает только что внесенные изменения в коде:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-356">The following image reflects the code changes that you just made:</span></span>

<span data-ttu-id="e6fbb-357">[![p3_love2](aspnet-mvc-4-mobile-features/_static/image59.png)](aspnet-mvc-4-mobile-features/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="e6fbb-357">[![p3_love2](aspnet-mvc-4-mobile-features/_static/image59.png)](aspnet-mvc-4-mobile-features/_static/image58.png)</span></span>

## <a name="wrapup-and-review"></a><span data-ttu-id="e6fbb-358">Обзор и — Сводка</span><span class="sxs-lookup"><span data-stu-id="e6fbb-358">Wrapup and Review</span></span>

<span data-ttu-id="e6fbb-359">Этот учебник представила новые мобильные функции ASP.NET MVC 4 Developer Preview.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-359">This tutorial has introduced the new mobile features of ASP.NET MVC 4 Developer Preview.</span></span> <span data-ttu-id="e6fbb-360">Мобильные возможности:</span><span class="sxs-lookup"><span data-stu-id="e6fbb-360">The mobile features include:</span></span>

- <span data-ttu-id="e6fbb-361">Возможность переопределения макета, представлений и частичных представлений, как глобально, так и для отдельного представления.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-361">The ability to override layout, views, and partial views, both globally and for an individual view.</span></span>
- <span data-ttu-id="e6fbb-362">Контроль над макетом и частичное переопределение с помощью принудительного применения `RequireConsistentDisplayMode` свойство.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-362">Control over layout and partial override enforcement using the `RequireConsistentDisplayMode` property.</span></span>
- <span data-ttu-id="e6fbb-363">Просмотреть переключатель мини-приложения для мобильных устройств представлений также могут отобразиться в представлениях рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-363">A view-switcher widget for mobile views than can also be displayed in desktop views.</span></span>
- <span data-ttu-id="e6fbb-364">Поддержка для поддержки определенных браузеров, таких как браузер iPhone.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-364">Support for supporting specific browsers, such as the iPhone browser.</span></span>

## <a name="see-also"></a><span data-ttu-id="e6fbb-365">См. также</span><span class="sxs-lookup"><span data-stu-id="e6fbb-365">See Also</span></span>

- <span data-ttu-id="e6fbb-366">[jQuery Mobile](http://jquerymobile.com) сайта.</span><span class="sxs-lookup"><span data-stu-id="e6fbb-366">[jQuery Mobile](http://jquerymobile.com) site.</span></span>
- [<span data-ttu-id="e6fbb-367">jQuery Mobile Обзор</span><span class="sxs-lookup"><span data-stu-id="e6fbb-367">jQuery Mobile Overview</span></span>](http://jquerymobile.com/demos/1.0b3/docs/about/intro.html)
- [<span data-ttu-id="e6fbb-368">Рекомендации от W3C по мобильных веб-технологий приложения</span><span class="sxs-lookup"><span data-stu-id="e6fbb-368">W3C Recommendation Mobile Web Application Best Practices</span></span>](http://www.w3.org/TR/mwabp/)
- [<span data-ttu-id="e6fbb-369">W3c по запросам мультимедиа</span><span class="sxs-lookup"><span data-stu-id="e6fbb-369">W3C Candidate Recommendation for media queries</span></span>](http://www.w3.org/TR/css3-mediaqueries/)
