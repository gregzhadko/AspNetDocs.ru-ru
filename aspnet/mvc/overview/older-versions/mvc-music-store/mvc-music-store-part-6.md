---
uid: mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6
title: Часть 6. С помощью заметок к данным для проверки модели | Документация Майкрософт
author: jongalloway
description: В этой серии руководств описаны все шаги, необходимые для построения примера приложения ASP.NET MVC Music Store. Часть 6 рассматриваются с использованием заметок к данным для модели V...
ms.author: riande
ms.date: 04/21/2011
ms.assetid: b3193d33-2d0b-4d98-9712-58bd897c62ec
msc.legacyurl: /mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6
msc.type: authoredcontent
ms.openlocfilehash: bc031dd5be61cc6707c522f85f6af77a420c8b31
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65129658"
---
# <a name="part-6-using-data-annotations-for-model-validation"></a>Часть 6. Использование заметок к данным для проверки модели

по [Джон Гэллоуэй](https://github.com/jongalloway)

> Store музыки MVC является учебного приложения, которое вводятся и описываются пошаговые использование ASP.NET MVC и Visual Studio для разработки веб-приложений.  
>   
> Store музыки MVC — это реализация хранилища упрощенный пример, который продает музыкальные альбомы через Интернет и реализует базовый сайт администрирования, вход пользователя и корзины для покупок функциональные возможности.  
>   
> В этой серии руководств описаны все шаги, необходимые для построения примера приложения ASP.NET MVC Music Store. Часть 6 рассматривается, с помощью заметок к данным для проверки модели.

У нас есть основная проблема, связанная с формами наших Create и Edit: они не выполняют никакой проверки. Мы можем такие вещи, как оставить обязательные поля пустым или тип буквы в поле «Цена» и является первой ошибки, мы увидим из базы данных.

Мы легко можно добавить проверку к нашему приложению путем добавления заметок к данным в классах модели. Заметки к данным позволяют описывать правила, которые мы хотим, примененным к свойствам нашей модели и ASP.NET MVC позаботится о принудительно используя их и отображение соответствующего сообщения для наших пользователей.

## <a name="adding-validation-to-our-album-forms"></a>Добавление проверки форм наших альбома

Мы будем использовать следующие атрибуты заметок к данным:

- **Требуется** — указывает, что свойство является обязательным полем
- **DisplayName** — определяет текст, нам нужно использовать на поля формы и проверка сообщений
- **StringLength** — определяет максимальную длину для строкового поля
- **Диапазон** — обеспечивает максимальное и минимальное значение для числового поля
- **Привязать** — перечислены поля, исключать или включать при привязке значения параметра или формы к свойствам модели
- **ScaffoldColumn** — позволяет скрывать поля из редактор форм

*Примечание. Дополнительные сведения о проверке модели, используя атрибуты заметок к данным см. в разделе документации MSDN по адресу*[`https://go.microsoft.com/fwlink/?LinkId=159063`](https://go.microsoft.com/fwlink/?LinkId=159063)

Откройте класс альбома и добавьте следующие *с помощью* инструкции в начало.

[!code-csharp[Main](mvc-music-store-part-6/samples/sample1.cs)]

Затем обновите свойства, чтобы добавить атрибуты отображения и проверки, как показано ниже.

[!code-csharp[Main](mvc-music-store-part-6/samples/sample2.cs)]

Кроме того, мы изменили также жанр и имя исполнителя на виртуальные свойства. Это позволяет платформе Entity Framework отложенной загрузки их при необходимости.

[!code-csharp[Main](mvc-music-store-part-6/samples/sample3.cs)]

После после добавления этих атрибутов для нашей модели альбома, наш экран Create и Edit сразу же начинает проверять поля, и с помощью отображаемые имена мы выбрали (например альбома Art URL-адрес вместо AlbumArtUrl). Запустите приложение и перейдите к /StoreManager/Create.

![](mvc-music-store-part-6/_static/image1.png)

Далее мы будем нарушить некоторые правила проверки. Введите цены 0 и не указывайте заголовок. Если щелкнуть "Создать", мы увидим форму с помощью сообщений об ошибках проверки отображаются поля, которые не соответствует правилам проверки определенных.

![](mvc-music-store-part-6/_static/image2.png)

## <a name="testing-the-client-side-validation"></a>Тестирование проверки на стороне клиента

Проверка на стороне сервера очень важно с точки зрения приложения, так как пользователи могут обойти проверку на стороне клиента. Однако веб-страницы формы, которые реализуют только проверки на стороне сервера соответствуют три существенные проблемы.

1. Пользователь имеет ожидания для формы должна быть учтена и проверены на сервере и для ответа на который должны отправляться свой браузер.
2. Пользователь не получать немедленные отзывы, когда он исправляет поле, так что теперь он передает правила проверки.
3. Мы тратит ресурсы сервера, чтобы выполнить логику проверки, а не используя браузер пользователя.

К счастью способы формирования шаблонов ASP.NET MVC 3 имеют клиентскую проверку встроенными, требующие дополнительных действий ни при каких обстоятельствах.

Удовлетворяет требованиям проверки, введя одну букву в поле заголовка, поэтому сообщение проверки немедленно удаляется.

![](mvc-music-store-part-6/_static/image3.png)

> [!div class="step-by-step"]
> [Назад](mvc-music-store-part-5.md)
> [Вперед](mvc-music-store-part-7.md)
