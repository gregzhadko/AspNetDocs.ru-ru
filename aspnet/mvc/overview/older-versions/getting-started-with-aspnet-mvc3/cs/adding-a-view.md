---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
title: Добавление представления (C#) | Документация Майкрософт
author: Rick-Anderson
description: Этом учебнике описываются основы создания MVC веб-приложения ASP.NET с помощью Microsoft Visual Web Developer 2010 Express пакетом обновления 1, который является...
ms.author: riande
ms.date: 01/12/2011
ms.assetid: abc7c78d-cb09-4a4c-a887-61bc401d40e3
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: 872c5e8400daea0b8651342d45082594747e2e8f
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59388001"
---
# <a name="adding-a-view-c"></a>Добавление представления (C#)

по [Рик Андерсон]((https://twitter.com/RickAndMSFT))

> > [!NOTE]
> > Обновленную версию этого учебника доступен [здесь](../../../getting-started/introduction/getting-started.md) , использующий ASP.NET MVC 5 и Visual Studio 2013. Она более безопасные, гораздо проще следовать и показаны дополнительные возможности.
> 
> 
> Этом учебнике описываются основы создания MVC веб-приложения ASP.NET с помощью Microsoft Visual Web Developer 2010 Express пакетом обновления 1, которой является бесплатной версии Microsoft Visual Studio. Перед началом работы убедитесь, что вы установили необходимые компоненты, перечисленные ниже. Все из них можно установить, щелкнув следующую ссылку: [Установщик веб-платформы](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack). Кроме того можно установить по отдельности необходимых компонентов, с помощью следующих ссылок:
> 
> - [Необходимые компоненты для Visual Studio Web Developer Express SP1](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [Обновление средств ASP.NET MVC 3](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - [SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(среды выполнения и средства поддержки)
> 
> Если вы используете Visual Studio 2010 вместо Visual Web Developer 2010, установите необходимые компоненты, щелкнув следующую ссылку: [Необходимые компоненты для Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).
> 
> Проект Visual Web Developer с исходным кодом C# — прилагаются в этом разделе. [Загрузить версию C#](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098). Если вы предпочитаете Visual Basic, переключитесь в [версии Visual Basic](../vb/intro-to-aspnet-mvc-3.md) работы с этим руководством.


В этом разделе вы собираетесь изменить `HelloWorldController` класса для использования представления, файлы шаблонов для отчетливой инкапсуляции процесса создания HTML-ответов клиенту.

Вы создадите файл шаблона представления с помощью нового [представлений Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) появилась в ASP.NET MVC 3. Шаблоны представления на основе Razor имеют *.cshtml* расширение файла, а также реализуют удобный способ для создания выходных данных с помощью C# HTML. Razor позволяет свести к минимуму число знаков и нажатий клавиш при написании шаблона представления, а также позволяет быстро, жидкостей, рабочие процессы кодирования.

Запустить с помощью шаблона представления с `Index` метод в `HelloWorldController` класса. На данный момент метод `Index` возвращает строку с сообщением, которое жестко задано в классе контроллера. Изменение `Index` метод для возврата `View` объекта, как показано в следующем:

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

Этот код использует шаблон представления для создания HTML-ответа в браузер. В проекте, добавьте шаблон представления, можно использовать с `Index` метод. Чтобы сделать это, щелкните правой кнопкой мыши внутри `Index` метод и нажмите кнопку **Добавление представления**.

![](adding-a-view/_static/image1.png)

**Добавление представления** откроется диалоговое окно. Оставьте значения по умолчанию способ их и нажмите кнопку **добавить** кнопки:

![](adding-a-view/_static/image2.png)

*MvcMovie\Views\HelloWorld* папки и *MvcMovie\Views\HelloWorld\Index.cshtml* создаются файл. Вы можете увидеть их в **обозревателе решений**:

![](adding-a-view/_static/image3.png)

Ниже *Index.cshtml* файл, который был создан:

[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)

Добавление HTML в разделе `<h2>` тега. Измененный *MvcMovie\Views\HelloWorld\Index.cshtml* файла приведен ниже.

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml)]

Запустите приложение и перейдите к `HelloWorld` контроллера (`http://localhost:xxxx/HelloWorld`). `Index` Метод в контроллере не делать много работы; он просто выполнил оператор `return View()`, которой указано, что метод должен использовать файл шаблона представления для отображения ответа в браузер. Так как имя файла шаблона представления для использования не был указан явным образом, ASP.NET MVC по умолчанию использует *Index.cshtml* просмотреть файл в *\Views\HelloWorld* папки. На рисунке ниже показана строка жестко в представлении.

![](adding-a-view/_static/image6.png)

Выглядит довольно хорошо. Обратите внимание, что строка заголовка браузера говорит: «Index», и большой заголовок на странице говорит: «Мое приложение MVC.» Давайте изменим их.

## <a name="changing-views-and-layout-pages"></a>Изменение представления и макета страницы

Во-первых необходимо изменить заголовок «Мои приложения MVC» в верхней части страницы. Этот текст является общим для каждой страницы. Она фактически реализуется только в одном месте в проекте, несмотря на то, что он отображается на каждой странице в приложении. Перейдите к */Views/Shared* папку в **обозревателе решений** и откройте  *\_Layout.cshtml* файла. Этот файл называется *страницы макета* и общей «оболочка», использовать другие страницы.

[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)

Шаблоны макета позволяют задать макет контейнера HTML для узла в одном месте, а затем применять их на разных страницах сайта. Примечание `@RenderBody()` строки в нижней части файла. `RenderBody` — это заполнитель, где все страницы определенных представлений, создаваемые отображаются, «оболочку» на странице макета. Изменение заголовка в шаблоне макета с «My MVC Application» в «MVC Movie App».

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml)]

Запустите приложение и обратите внимание на то, что теперь отображается надпись «MVC Movie App». Нажмите кнопку **о** ссылку чтобы увидеть, каким образом эта страница показывает «MVC Movie App», слишком. Мы смогли сделать один раз в шаблон макета и быть всех страниц на сайте с учетом новый заголовок.

![](adding-a-view/_static/image9.png)

Полный  *\_Layout.cshtml* файла приведен ниже:

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

Теперь изменим заголовок страницы индекса (представление).

Откройте *MvcMovie\Views\HelloWorld\Index.cshtml*. Чтобы внести изменения в двух местах: во-первых, текст, расположенный в заголовке браузера, а затем в дополнительный заголовок ( `<h2>` элемент). Сделайте их немного разными, чтобы видеть, какой именно фрагмент кода изменяет соответствующую часть приложения.

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

Для указания заголовка HTML для отображения, приведенном выше коде присваивает `Title` свойство `ViewBag` объекта (который находится в *Index.cshtml* Просмотр шаблона). Если взглянуть на исходный код в шаблон макета, можно заметить, что в шаблоне используется это значение в `<title>` элемент как часть `<head>` части HTML-код. При таком подходе вы можете легко передавать другие параметры между представление шаблона, а файл макета.

Запустите приложение и перейдите к `http://localhost:xx/HelloWorld`. Обратите внимание, что основной и дополнительный заголовки браузера изменились. (Если изменения не отображаются, возможно, вы просматриваете кэшированное содержимое. В этом случае нажмите в браузере клавиши CTRL+F5 для принудительной загрузки ответа сервера.)

Также Обратите внимание, каким образом содержимого в *Index.cshtml* Просмотр шаблона была объединена с  *\_Layout.cshtml* шаблон представления и один ответ HTML был отправлен в браузер. С помощью шаблонов макета можно легко вносить изменения, которые применяются ко всем страницам приложения.

![](adding-a-view/_static/image10.png)

В этом примере небольшой фрагмент данных (сообщение "Hello from our View Template!" ) жестко задан в коде. Приложение MVC предоставляет представление, вы реализуете контроллер, однако модели на данный момент еще нет. Чуть ниже мы рассмотрим создание базы данных и получать данные модели из нее.

## <a name="passing-data-from-the-controller-to-the-view"></a>Передача данных из контроллера в представление

Прежде чем мы перейдите к базе данных и поговорим о моделях, но давайте сперва поговорим о передачи данных из контроллера в представление. Классы контроллера вызываются в ответ на входящий запрос URL-адрес. Класс контроллера пишется код, который обрабатывает входящие параметры, извлекает данные из базы данных и в конечном итоге определяет тип ответа для отправки обратно в браузер. Просмотр шаблонов может использоваться из контроллера для создания и форматирования ответа HTML в браузере.

Контроллеры — отвечает за предоставление независимо от используемых данных и объектов необходимых для шаблона представления для отображения ответа в браузер. Шаблон представления никогда не следует выполнять бизнес-логику или напрямую взаимодействовать с базой данных. Вместо этого он должен работать только с данными, предоставляется к ней с помощью контроллера. Поддержание этого «Разделение областей ответственности» позволяет сохранить код план в четком и упрощает управление системой.

В настоящее время `Welcome` метода действия в `HelloWorldController` класса принимает `name` и `numTimes` параметр, после чего выводит значения непосредственно в браузере. Вместо отображения ответа в виде строки, настроим контроллер для использования шаблона представления. Шаблон представления создаст динамический ответ, для получения которого необходимо передать соответствующие фрагменты данных из контроллера в представление. Это можно сделать за счет этого контроллер может поместить динамические данные, которые требуются шаблону представления в `ViewBag` объект, который может получить доступ к шаблону представления.

Вернитесь к *HelloWorldController.cs* файлов и изменить `Welcome` метод, чтобы добавить `Message` и `NumTimes` значение `ViewBag` объекта. `ViewBag` является динамическим объектом, это означает, что угодно можно поместить в него данные; `ViewBag` объект не имеет определенных свойств до помещен внутри него. Полный файл *HelloWorldController.cs* выглядит следующим образом:

[!code-csharp[Main](adding-a-view/samples/sample6.cs)]

Теперь `ViewBag` объект содержит данные, которые будут переданы в представление автоматически.

Далее необходимо шаблон представления экрана приветствия! В **Отладка** меню, выберите **построения MvcMovie** чтобы убедиться, что проект скомпилирован.

[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)

Щелкните правой кнопкой мыши внутри `Welcome` метод и нажмите кнопку **Добавление представления**. Вот что **Добавление представления** диалоговое окно выглядит как:

![](adding-a-view/_static/image13.png)

Нажмите кнопку **добавить**, а затем добавьте следующий код под `<h2>` элемент в новом *Welcome.cshtml* файла. Вы создадите цикл, который говорит: «Hello» столько раз, сколько пользователь говорит, что нужно. Полный *Welcome.cshtml* файла приведен ниже.

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml)]

Запустите приложение и перейдите к следующему URL-АДРЕСУ:

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

Теперь данные из URL-адрес и автоматически передаются в контроллер. Контроллер упаковывает данные в `ViewBag` объект и передает этот объект в представление. Затем в представлении отображаются данные как HTML для пользователя.

![](adding-a-view/_static/image14.png)

Этот подход характерен для модели, а не для базы данных. Итак, обобщим все полученные данные и попробуем создать базу данных фильмов.

> [!div class="step-by-step"]
> [Назад](adding-a-controller.md)
> [Вперед](adding-a-model.md)
