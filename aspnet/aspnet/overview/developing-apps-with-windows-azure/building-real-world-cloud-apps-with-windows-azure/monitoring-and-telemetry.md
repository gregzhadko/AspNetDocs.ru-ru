---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry
title: Мониторинг и данные телеметрии (создание облачных приложений в реальном мире с помощью Azure) | Документация Майкрософт
author: MikeWasson
description: Создание реальных облачных приложений с помощью электронной книги Azure основано на презентации, разработанной Скотт Гатри (. В нем объясняются 13 шаблонов и методик, которые могут...
ms.author: riande
ms.date: 07/09/2015
ms.assetid: 7e986ab5-6615-4638-add7-4614ce7b51db
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry
msc.type: authoredcontent
ms.openlocfilehash: f61810ea7b486b2fa0bbb234edea7541eedde835
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78471138"
---
# <a name="monitoring-and-telemetry-building-real-world-cloud-apps-with-azure"></a>Мониторинг и данные телеметрии (создание облачных приложений в реальном мире с помощью Azure)

[Майк Уоссон](https://github.com/MikeWasson), [Рик Андерсон (](https://twitter.com/RickAndMSFT), том [Dykstra)](https://github.com/tdykstra)

[Скачивание решения ИТ-проекта](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) или [Загрузка электронной книги](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)

> **Создание реальных облачных приложений с помощью** электронной книги Azure основано на презентации, разработанной Скотт Гатри (. В нем объясняются 13 шаблонов и методик, которые могут помочь в успешной разработке веб-приложений для облака. Сведения о электронной книге см. [в первой главе](introduction.md).

Многие люди полагаются на клиентов, чтобы они могли понять, когда их приложение не работает. Это не рекомендуется в любом месте, особенно не в облаке. Нет никакой гарантии быстрого уведомления, и когда вы получаете уведомления, часто приходится получать минимальные или неверные данные о том, что произошло. Благодаря хорошим системам телеметрии и ведения журналов вы можете узнать о том, что происходит с вашим приложением, а когда что-то пойдет не так, и получить полезные сведения об устранении неполадок.

## <a name="buy-or-rent-a-telemetry-solution"></a>Купить или арендовать решение телеметрии

> [!NOTE]
> Эта статья была написана до выпуска [Application Insights](/azure/application-insights/app-insights-overview) . Application Insights является предпочтительным подходом для решений телеметрии в Azure. Дополнительные сведения см. [в разделе настройка Application Insights для веб-сайта ASP.NET](/azure/application-insights/app-insights-asp-net) .

Одной из вещей, которые отлично подходят для облачной среды, является то, что на самом деле легко купить или арендовать свой способ победа. Пример телеметрии. Без усилий вы сможете быстро и эффективно получить действительно хорошую систему телеметрии. Существует множество замечательных партнеров, которые интегрируются с Azure, а некоторые из них имеют бесплатные уровни, поэтому вы можете получить базовые данные телеметрии для чего-либо. Вот лишь несколько из них, доступных в Azure:

- [New Relic](http://newrelic.com/)
- [AppDynamics](http://www.appdynamics.com/)
- [DynaTrace](https://datamarket.azure.com/application/b4011de2-1212-4375-9211-e882766121ff)

[Microsoft System Center](http://www.petri.co.il/microsoft-system-center-introduction.htm#) также включает функции мониторинга.

Мы быстро рассмотрим настройку новых Relic, чтобы показать, насколько просто можно использовать систему телеметрии.

На портале управления Azure Зарегистрируйте службу. Щелкните **создать**, а затем — **магазин**. Откроется диалоговое окно **Выбор надстройки** . Прокрутите вниз и щелкните **New Relic (создать новый**).

![Выбор надстройки](monitoring-and-telemetry/_static/image1.png)

Щелкните стрелку вправо и выберите нужный уровень служб. В этой демонстрации мы будем использовать уровень Free.

![Персонализация надстройки](monitoring-and-telemetry/_static/image2.png)

Щелкните стрелку вправо, подтвердите «Купить», и теперь новая Relic будет отображаться как надстройка на портале.

![Проверка покупки](monitoring-and-telemetry/_static/image3.png)

![Новая надстройка Relic на портале управления](monitoring-and-telemetry/_static/image4.png)

Щелкните **сведения о подключении**и скопируйте лицензионный ключ.

![Сведения о подключении](monitoring-and-telemetry/_static/image5.png)

Перейдите на вкладку **Настройка** веб-приложения на портале, установите для параметра **наблюдение за производительностью** значение **надстройка**и задайте в раскрывающемся списке **выберите надстройку** **новое Relic**. Затем нажмите кнопку **Сохранить**.

![Новая Relic на вкладке "Настройка"](monitoring-and-telemetry/_static/image6.png)

В Visual Studio установите новый пакет NuGet Relic в приложении.

![Аналитика для разработчиков на вкладке "Настройка"](monitoring-and-telemetry/_static/image7.png)

Разверните приложение в Azure и начните использовать его. Создайте несколько способов решения ИТ-задач, чтобы предоставить некоторые действия для отслеживания новых Relic.

Затем вернитесь на страницу **Новая Relic** на вкладке **надстройки** на портале и нажмите кнопку **Управление**. Портал отправляет вас на новый портал управления Relic, используя единый вход для проверки подлинности, чтобы не вводить учетные данные еще раз. На странице Обзор представлены различные статистические данные о производительности. (Щелкните изображение, чтобы просмотреть полный размер страницы обзора).

[![новой вкладки "Мониторинг Relic"](monitoring-and-telemetry/_static/image9.png)](monitoring-and-telemetry/_static/image8.png)

Вот лишь несколько статистик, которые вы видите:

- Среднее время отклика в разное время суток.

    ![время ответа;](monitoring-and-telemetry/_static/image10.png)
- Скорость пропускной способности (в запросах в минуту) в разное время суток.

    ![Пропускная способность](monitoring-and-telemetry/_static/image11.png)
- Время ЦП сервера, затраченное на обработку различных HTTP-запросов.

    ![Время веб-транзакций](monitoring-and-telemetry/_static/image12.png)
- Время ЦП, затраченное на различные части кода приложения:

    ![Сведения о трассировке](monitoring-and-telemetry/_static/image13.png)
- Статистика производительности за прошлые периоды.

    ![Историческая производительность](monitoring-and-telemetry/_static/image14.png)
- Вызовы внешних служб, таких как служба BLOB-объектов и статистика о надежности и скорости реагирования службы.

    ![Внешние службы](monitoring-and-telemetry/_static/image15.png)

    ![Внешние службы](monitoring-and-telemetry/_static/image16.png)

    ![Внешняя служба](monitoring-and-telemetry/_static/image17.png)
- Сведения о месте в мире или о том, откуда поступил трафик веб-приложения США.

    ![Geography](monitoring-and-telemetry/_static/image18.png)

Можно также настроить отчеты и события. Например, вы можете указать любое время, когда вы начнете просматривать ошибки, и отправить сообщение электронной почты, чтобы сообщить сотрудникам службы поддержки о проблеме.

![Отчеты](monitoring-and-telemetry/_static/image19.png)

New Relic — Это лишь один пример системы телеметрии. Все это можно получить и из других служб. Красота облака заключается в том, что без написания какого-либо кода, а также для минимального или небольшого расходов вы можете получить гораздо больше информации о том, как используется ваше приложение и на каких клиентах на самом деле.

<a id="log"></a>
## <a name="log-for-insight"></a>Журнал для анализа

Пакет телеметрии является хорошим первым шагом, но по-прежнему необходимо инструментировать собственный код. Служба телеметрии сообщает о том, что возникла проблема, и сообщает о том, что происходит у клиентов, но может не дать вам много информации о том, что происходит в коде.

Чтобы увидеть, что делает приложение, не нужно удаленно использовать рабочий сервер. Это может быть практичным, если у вас есть один сервер, но что насчет того, когда вы масштабируете до сотен серверов и вы не знаете, какие из них необходимо удаленно использовать? Ведение журнала должно предоставить достаточно информации, которая не должна быть удалена на рабочих серверах для анализа и отладки проблем. Необходимо вести журнал достаточной информации, чтобы изолировать проблемы исключительно через журналы.

### <a name="log-in-production"></a>Вход в рабочую среду

Многие люди включают трассировку в рабочей среде только в том случае, если возникла проблема и они хотят выполнить отладку. Это может вызвать значительную задержку между моментом, когда вы знаете о проблеме, и время получения полезных сведений об устранении неполадок. И информация, которую вы получаете, может оказаться полезной для периодических ошибок.

Мы рекомендуем в облачной среде, где хранилище является недорогым, так как вы всегда оставляете вход в рабочую среду. Таким образом, при возникновении ошибок они уже были записаны в журнал, и вы можете анализировать исторические данные, которые могут помочь при анализе проблем, которые разрабатываются со временем или регулярно происходят в разное время. Вы можете автоматизировать процесс очистки, чтобы удалить старые журналы, но может оказаться, что настраиваете такой процесс более затратно, чем для сохранения журналов.

Добавленные расходы на ведение журнала являются тривиальными по сравнению с количеством времени и денег, которые можно сэкономить, так как все необходимые сведения уже доступны при возникновении проблем. Затем, когда кто-то говорит, что у них возникала случайная ошибка около 8:00, но они не запомнили эту ошибку, вы можете легко найти причину проблемы.

В течение менее $4 месяца вы можете удерживать 50 гигабайтов журналов в ручном режиме, и влияние ведения журнала на производительность является тривиальным, так что, чтобы избежать узких мест производительности, убедитесь, что ваша библиотека ведения журнала является асинхронной.

### <a name="differentiate-logs-that-inform-from-logs-that-require-action"></a>Различение журналов, сообщающих из журналов, требующих действия

Журналы предназначены для ИНФОРМИРОВАНия (я хочу знать что-то) или действовать (я хочу сделать что-то). Будьте внимательны при написании журналов действий только для тех проблем, для которых требуется, чтобы пользователь или автоматизированный процесс действовал. Слишком большое количество журналов работы приведет к созданию шума, что потребует слишком много усилий, чтобы необходимости просеивания их, чтобы найти подлинные проблемы. Если журналы работы автоматически запускают какое-либо действие, например отправку сообщений электронной почты сотрудникам службы поддержки, не нужно, чтобы тысячи таких действий вызывались одной проблемой.

В системе .NET System. Диагностическая трассировка в журналах могут быть назначены ошибки, предупреждения, сведения и уровень детализации. Вы можете отличить акт от ИНФОРМИРОВАНия журналов путем резервирования уровня ошибок для журналов функций и использования более низких уровней для ведения журналов.

![Уровни ведения журнала](monitoring-and-telemetry/_static/image20.png)

### <a name="configure-logging-levels-at-run-time"></a>Настройка уровней ведения журнала во время выполнения

Хотя очень важно иметь возможность ведения журнала в рабочей среде, рекомендуется реализовать платформу ведения журнала, которая позволяет настраивать уровень детализации в процессе выполнения, не развертывая и не перезапуская приложение. Например, при использовании средства трассировки в `System.Diagnostics` можно создавать журналы ошибок, предупреждений, сведений и отладки/подробных сведений. Рекомендуется всегда вести журнал ошибок, предупреждений и сведений в рабочей среде. Кроме того, вам потребуется динамически добавлять отладочные и подробные сведения в журнал для устранения неполадок в каждом конкретном случае.

Веб-приложения в службе приложений Azure имеют встроенную поддержку записи `System.Diagnostics` журналов в файловую систему, хранилище таблиц или хранилище больших двоичных объектов. Можно выбрать разные уровни ведения журнала для каждого места назначения хранилища, а также изменить уровень ведения журнала без перезапуска приложения. Поддержка хранилища BLOB-объектов упрощает запуск заданий анализа [HDInsight](https://docs.microsoft.com/azure/hdinsight/) в журналах приложений, так как HDInsight знает, как работать с хранилищем BLOB-объектов напрямую.

### <a name="log-exceptions"></a>Запись исключений в журнал

Не просто помещайте *исключение. ToString ()* в коде ведения журнала. Это оставляет контекстные сведения. В случае ошибок SQL она оставляет номер ошибки SQL. Для всех исключений Включите сведения о контексте, само исключение и внутренние исключения, чтобы убедиться, что вы предоставляете все, что потребуется для устранения неполадок. Например, сведения о контексте могут включать имя сервера, идентификатор транзакции и имя пользователя (но не пароль или секреты).

Если вы полагаетесь на каждого разработчика, чтобы сделать то же самое с журналом исключений, некоторые из них не будут. Чтобы обеспечить правильную работу каждого раза, создавайте обработку исключений прямо в интерфейсе средства ведения журнала: передайте объект исключения в класс Logger и заполните журнал данных об исключении надлежащим образом в классе Logger.

### <a name="log-calls-to-services"></a>Вызовы журналов в службах

Настоятельно рекомендуется писать журнал каждый раз, когда приложение обращается к службе, будь то база данных или REST API или любая внешняя служба. Включить в журналы не только указание об успешном или неуспешном выполнении, но о том, сколько времени занял каждый запрос. В облачной среде часто возникают проблемы, связанные с замедлением, а не завершением простоев. То, что обычно занимает 10 миллисекунд, может начаться со второй. Когда кто-то говорит, что ваше приложение работает слишком долго, вы должны иметь возможность взглянуть на новый Relic или какую-либо службу телеметрии, а также проверить их работу, а затем попытаться получить сведения о том, почему он работает слишком долго.

### <a name="use-an-ilogger-interface"></a>Использование интерфейса ILogger

При создании рабочего приложения рекомендуется создать простой интерфейс *ILogger* и прикрепить некоторые методы. Это упрощает изменение реализации ведения журнала позже и не обязательно просматривает весь код для этого. Мы можем использовать класс `System.Diagnostics.Trace` в рамках ИТ-приложения, но вместо этого мы используем его в рамках класса ведения журнала, который реализует *ILogger*, и мы делаем вызовы методов *ILogger* во всем приложении.

Таким образом, если вы когда-нибудь захотите сделать ведение журнала более богатым, можно заменить [`System.Diagnostics.Trace`](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio#apptracelogs) любым механизмом ведения журнала. Например, по мере роста приложения можно принять решение о том, что вы хотите использовать более обширный пакет ведения журнала, например [NLog](http://nlog-project.org/) или функциональный [блок ведения журнала Enterprise Library](https://msdn.microsoft.com/library/dn440731(v=pandp.60).aspx). ([Log4net](http://logging.apache.org/log4net/) — это еще одна популярная платформа ведения журналов, но она не выполняет асинхронное ведение журнала.)

Одна из возможных причин для использования такой платформы, как NLog, заключается в том, чтобы упростить разделение выходных данных журнала в отдельные хранилища данных большого объема и высокой ценности. Это помогает эффективно хранить большие объемы данных, которые не требуют выполнения быстрых запросов к, обеспечивая быстрый доступ к данным об ОПЕРАЦИЯх.

### <a name="semantic-logging"></a>Семантическое ведение журнала

Для относительно нового способа ведения журнала, в котором можно получить более полезные диагностические сведения, см. раздел [семантическое ведение журнала семантики библиотеки приложений (слои)](http://convective.wordpress.com/2013/08/12/semantic-logging-application-block-slab/). Она использует [трассировку событий для Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) и [EventSource](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.aspx) в .NET 4,5, позволяя создавать более структурированные и запрашиваемые журналы. Вы определяете различные методы для каждого типа событий, которые вы регистрируете, что позволяет настраивать данные, которые вы пишете. Например, чтобы зарегистрировать ошибку базы данных SQL, можно вызвать метод `LogSQLDatabaseError`. Для такого рода исключения известно, что ключевой частью информации является номер ошибки, поэтому можно включить параметр номера ошибки в сигнатуру метода и записать номер ошибки как отдельное поле в записываемой записи журнала. Так как это число находится в отдельном поле, вы можете легко и надежно получать отчеты на основе номеров ошибок SQL, чем если бы вы просто сцепить номер ошибки в строку сообщения.

## <a name="logging-in-the-fix-it-app"></a>Ведение журнала в приложении Fix ИТ

### <a name="the-ilogger-interface"></a>Интерфейс ILogger

Ниже приведен интерфейс *ILogger* в приложении Fix ИТ.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample1.cs)]

Эти методы позволяют записывать журналы на тех же четырех уровнях, которые поддерживаются *системой System. Diagnostics*. Методы Трацеапи предназначены для ведения журнала вызовов внешних служб с информацией о задержке. Можно также добавить набор методов для уровня Отладка/подробный.

### <a name="the-logger-implementation-of-the-ilogger-interface"></a>Реализация средства ведения журнала интерфейса ILogger

Реализация интерфейса на самом деле проста. По сути, он просто вызывает стандартные методы *System. Diagnostics* . В следующем фрагменте кода показаны все три информационных метода и один из остальных.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample2.cs)]

### <a name="calling-the-ilogger-methods"></a>Вызов методов ILogger

Всякий раз, когда код в приложении Fix ИТ перехватывает исключение, он вызывает метод *ILogger* для записи сведений об исключении в журнал. При каждом вызове базы данных, службы BLOB-объектов или REST API она запускает секундомер перед вызовом, останавливает секундомер при возврате службы и записывает затраченное время вместе со сведениями об успешном или неудачном завершении.

Обратите внимание, что сообщение журнала содержит имя класса и имя метода. Рекомендуется убедиться, что сообщения журнала указывают, какая часть кода приложения написала их.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample3.cs?highlight=6,14,20-21,25)]

Так что теперь при каждом вызове базы данных SQL в приложении для ИТ-приложений можно увидеть вызов, метод, который ее вызвал, и точно то, сколько времени заняло.

![Запросы к базе данных SQL в журналах](monitoring-and-telemetry/_static/image21.png)

![](monitoring-and-telemetry/_static/image22.png)

Если вы просматриваете журналы, то можете увидеть, что время вызовов к базе данных — переменная. Эта информация может быть полезной: так как приложение регистрирует все это, вы можете анализировать исторические тенденции в том, как служба базы данных работает со временем. Например, служба может работать быстрее, но запросы могут завершаться сбоем или замедлить работу в определенное время суток.

Вы можете сделать то же самое для службы BLOB-объектов. каждый раз, когда приложение отправляет новый файл, появляется журнал, и вы можете точно определить, сколько времени заняло отправка каждого файла.

![Журнал отправки BLOB-объектов](monitoring-and-telemetry/_static/image23.png)

Это просто несколько дополнительных строк кода для записи при каждом вызове службы. Теперь, когда кто-то говорит, что возникла какая-либо ошибка, вы точно понимаете, какая именно она возникла, является ли она ошибкой или даже если она была запущена достаточно долго. Источник проблемы можно определить без удаленного подключения к серверу или включить ведение журнала после возникновения ошибки и, надеюсь, создать ее повторно.

## <a name="dependency-injection-in-the-fix-it-app"></a>Внедрение зависимостей в приложение Fix It

Может возникнуть вопрос, как конструктор репозитория в приведенном выше примере получает реализацию интерфейса средства ведения журнала:

[!code-csharp[Main](monitoring-and-telemetry/samples/sample4.cs?highlight=6)]

Чтобы подключить интерфейс к реализации, приложение использует [внедрение зависимостей](http://en.wikipedia.org/wiki/Dependency_injection)(DI) с [AutoFac](http://autofac.org/). DI позволяет использовать объект, основанный на интерфейсе, во многих местах кода и указывать в одном месте реализацию, используемую при создании экземпляра интерфейса. Это упрощает изменение реализации. Например, может потребоваться заменить средство ведения журнала System. Diagnostics с помощью средства ведения журнала NLog. Или для автоматического тестирования может потребоваться заменить макет средства ведения журнала.

Приложение для устранения проблем использует DI во всех репозиториях и на всех контроллерах. Конструкторы классов контроллеров получают интерфейс *итаскрепоситори* так же, как репозиторий получает интерфейс средства ведения журнала:

[!code-csharp[Main](monitoring-and-telemetry/samples/sample5.cs?highlight=5)]

Приложение использует библиотеку AutoFac DI для автоматического предоставления экземпляров *таскрепоситори* и *регистратора* для этих конструкторов.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample6.cs?highlight=8,10)]

Этот код, по сути, говорит, что в любом месте конструктору требуется интерфейс *ILogger* , передайте экземпляр класса *Logger* и всякий раз, когда ему нужен интерфейс *ификситтаскрепоситори* , передайте экземпляр класса *фикситтаскрепоситори* .

[AutoFac](http://autofac.org/) — это одна из многих инфраструктур внедрения зависимостей, которые можно использовать. Еще один популярный вариант — [Unity](https://blogs.msdn.com/b/agile/archive/2013/08/20/new-guide-dependency-injection-with-unity.aspx), который рекомендуется и поддерживает шаблоны и методики Майкрософт.

## <a name="built-in-logging-support-in-azure"></a>Встроенная поддержка ведения журнала в Azure

Azure поддерживает следующие виды [ведения журналов для веб-приложений в службе приложений Azure](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio):

- Трассировка System. Diagnostics (вы можете включать и выключать и устанавливать уровни в режиме реального времени без перезагрузки сайта).
- События Windows.
- Журналы IIS (HTTP/FREB).

Azure поддерживает следующие виды [ведения журналов в облачных службах](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-diagnostics).

- Трассировка System. Diagnostics.
- Счетчики производительности.
- События Windows.
- Журналы IIS (HTTP/FREB).
- Мониторинг пользовательских каталогов.

Приложение для устранения проблем использует трассировку System. Diagnostics. Все, что нужно сделать, чтобы включить ведение журнала системы. Diagnostics в веб-приложении, — это перевернуть переключатель на портале или вызвать REST API. На портале перейдите на вкладку **Конфигурация** сайта и прокрутите вниз, чтобы увидеть раздел **Диагностика приложений** . Вы можете включить или отключить ведение журнала, а также выбрать необходимый уровень ведения журнала. Вы можете записать журналы в файловую систему или в учетную запись хранения Azure.

![Диагностика приложений и диагностика сайтов на вкладке "Настройка"](monitoring-and-telemetry/_static/image24.png)

После включения ведения журнала в Azure вы сможете просматривать журналы в окне вывода Visual Studio по мере их создания.

![Меню "журналы потоковой передачи"](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-viewlogsmenu.png)

![Меню "журналы потоковой передачи"](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-nologsyet.png)

Кроме того, вы можете записывать журналы в учетную запись хранения и просматривать их с помощью любого средства, которое имеет доступ к службе таблиц службы хранилища Azure, например **Обозреватель сервера** в Visual Studio или [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/).

![Вход в обозреватель сервера](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-storagelogs.png)

## <a name="summary"></a>Сводка

Очень просто реализовать встроенную систему телеметрии, инструментировать ведение журнала в собственном коде и настроить ведение журнала в Azure. При возникновении проблем в рабочей среде сочетание системы телеметрии и пользовательских журналов поможет быстро устранить проблемы, прежде чем они станут основными проблемами для клиентов.

В [следующей главе](transient-fault-handling.md) мы рассмотрим обработку временных ошибок, чтобы они не стали рабочими проблемами, которые необходимо изучить.

## <a name="resources"></a>Ресурсы

Для получения дополнительных сведений см. следующие ресурсы.

Документация в основном о телеметрии:

- [Шаблоны и методики Майкрософт. Руководство по Azure](https://msdn.microsoft.com/library/dn568099.aspx). См. Руководство по инструментарию и телеметрии, руководство по контролю за обслуживанием, шаблон мониторинга конечной точки работоспособности и шаблон перенастройки среды выполнения.
- [Незначительное сжатие в облаке: включение нового мониторинга производительности Relic на веб-сайтах Azure](http://www.hanselman.com/blog/PennyPinchingInTheCloudEnablingNewRelicPerformanceMonitoringOnWindowsAzureWebsites.aspx).
- Рекомендации [по проектированию крупномасштабных служб в облачных службах Azure](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx). Технический документ, пометив SIMM и Майкл Сомасси. См. раздел телеметрии и диагностики.
- [Разработка следующего поколения с помощью Application Insights](https://msdn.microsoft.com/magazine/dn683794.aspx). Статья журнала MSDN Magazine.

Документация в основном о ведении журнала:

- [Блок приложения семантического ведения журнала (слоев)](http://convective.wordpress.com/2013/08/12/semantic-logging-application-block-slab/). Нил Маккензи представляет случай для семантического ведения журнала с помощью слоя.
- [Создание структурированных и осмысленных журналов с семантическим ведением журнала](https://channel9.msdn.com/Events/Build/2013/3-336). Роли В юлианском Домингуез в качестве семантического ведения журнала используется слоев.
- [Ведение журнала SQL EF6 — часть 1. Простое ведение журнала](http://blog.oneunicorn.com/2013/05/08/ef6-sql-logging-part-1-simple-logging/). Артур Виккерс показывает, как вести журнал запросов, выполняемых Entity Framework в EF 6.
- [Устойчивость подключений и перехват команд с помощью Entity Framework в приложении ASP.NET MVC](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md). В четвертой серии руководств из девяти частей показано, как использовать функцию перехвата команд EF 6 для записи в журнал команд SQL, отправляемых в базу данных, Entity Framework.
- [Улучшение ведения журнала C# с помощью атрибутов сведений о вызывающем объекте 5,0](http://www.dotnetcurry.com/showarticle.aspx?ID=972). Как легко зарегистрировать имя вызывающего метода без его жесткого кодирования в литералы или использовать отражение для получения его вручную.

Документация в основном об устранении неполадок:

- [Устранение неполадок в Azure &amp; отладке блога](https://blogs.msdn.com/b/kwill/).
- [Азуретулс — служебная программа диагностики, используемая командой Azure поддержка Developer](https://blogs.msdn.com/b/kwill/archive/2013/08/26/azuretools-the-diagnostic-utility-used-by-the-windows-azure-developer-support-team.aspx?Redirected=true). Содержит ссылку для скачивания средства, которое можно использовать на виртуальной машине Azure для загрузки и запуска широкого спектра средств диагностики и мониторинга. Полезно, если необходимо диагностировать проблему на конкретной виртуальной машине.
- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio). Пошаговое руководство по началу работы с трассировкой System. Diagnostics и удаленной отладкой.

Видеоролики:

- [Отказоустойчивость: создание масштабируемых отказоустойчивых облачных служб](https://channel9.msdn.com/Series/FailSafe). Серия из девяти частей, Ульрих Хоманн, (Marc Меркури и пометить SIMM. Предоставляет основные понятия и архитектурные принципы в очень удобном и интересном смысле, а также истории, полученные от работы группы консультирования клиентов Майкрософт (CAT) с реальными клиентами. Эпизоды 4 и 9 относятся к мониторингу и телеметрии. В серии 9 представлен обзор служб мониторинга Метрикшуб, AppDynamics, New Relic и PagerDuty.
- [Создание больших: уроки, полученные от клиентов Azure, часть II](https://channel9.msdn.com/Events/Build/2012/3-030). Марк SIMM рассказывает о проектировании для сбоев и инструментировании всех. Как и в случае с отказоустойчивостью, вы переходите к дополнительным сведениям.

Пример кода:

- [Основы облачной службы в Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649). Пример приложения, созданный группой консультирования клиентов Microsoft Azure. Демонстрирует методики телеметрии и ведения журнала, как описано в следующих статьях. В примере реализуется ведение журнала приложения с помощью [NLog](http://nlog-project.org/). Дополнительную документацию см. в [серии из четырех вики-статей TechNet о телеметрии и ведении журнала](https://social.technet.microsoft.com/wiki/contents/articles/17987.cloud-service-fundamentals.aspx#Telemetry_coming_soon).

> [!div class="step-by-step"]
> [Назад](design-to-survive-failures.md)
> [Вперед](transient-fault-handling.md)
