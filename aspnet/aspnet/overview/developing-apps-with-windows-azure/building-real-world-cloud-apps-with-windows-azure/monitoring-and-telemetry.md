---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry
title: Мониторинг и телеметрия (Создание облачных приложений в реальном мире с помощью Azure) Документы Майкрософт
author: MikeWasson
description: Создание облачных приложений реального мира с электронной книгой Azure основано на презентации, разработанной Скоттом Гатри. Это объясняет 13 моделей и практик, которые могут он ...
ms.author: riande
ms.date: 07/09/2015
ms.assetid: 7e986ab5-6615-4638-add7-4614ce7b51db
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry
msc.type: authoredcontent
ms.openlocfilehash: f61810ea7b486b2fa0bbb234edea7541eedde835
ms.sourcegitcommit: ce28244209db8615bc9bdd576a2e2c88174d318d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80675673"
---
# <a name="monitoring-and-telemetry-building-real-world-cloud-apps-with-azure"></a>Мониторинг и телеметрия (Создание облачных приложений в реальном мире с помощью Azure)

[Майк Уоссон](https://github.com/MikeWasson), [Рик Андерсон](https://twitter.com/RickAndMSFT), [Том Дайкстра](https://github.com/tdykstra)

[Скачать Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) или [скачать электронную книгу](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)

> **Создание облачных приложений реального мира с** электронной книгой Azure основано на презентации, разработанной Скоттом Гатри. В нем изушатся 13 шаблонов и практик, которые могут помочь вам успешно разрабатывать веб-приложения для облака. Для получения информации об электронной книге, [см.](introduction.md)

Многие люди полагаются на клиентов, чтобы сообщить им, когда их приложение не работает. Это не самая лучшая практика где-либо, и особенно не в облаке. Нет никакой гарантии быстрого уведомления, и когда вы получаете уведомление, вы часто получаете минимальные или вводящие в заблуждение данные о том, что произошло. С хорошей телеметрией и системами регистрации вы можете быть в курсе того, что происходит с вашим приложением, и когда что-то пойдет не так, вы сразу же узнаете об этом и получите полезную информацию для устранения неполадок.

## <a name="buy-or-rent-a-telemetry-solution"></a>Купить или арендовать решение телеметрии

> [!NOTE]
> Эта статья была написана до того, как было выпущено [application Insights.](/azure/application-insights/app-insights-overview) Application Insights является предпочтительным подходом для телеметрических решений на Azure. Для получения дополнительной информации смотрите для [веб-сайта Set up Application Insights для вашего ASP.NET.](/azure/application-insights/app-insights-asp-net)

Одна из вещей, которая является большим об облачной среде является то, что это действительно легко купить или арендовать свой путь к победе. Телеметрия является примером. Без больших усилий вы можете получить действительно хорошую систему телеметрии и работает, очень экономически эффективно. Есть куча отличных партнеров, которые интегрируются с Azure, и некоторые из них имеют бесплатные уровни - так что вы можете получить базовую телеметрию ни за что. Вот лишь некоторые из них, доступных в настоящее время на Azure:

- [New Relic](http://newrelic.com/)
- [AppDynamics](http://www.appdynamics.com/)
- [Dynatrace](https://datamarket.azure.com/application/b4011de2-1212-4375-9211-e882766121ff)

[Microsoft System Center](http://www.petri.co.il/microsoft-system-center-introduction.htm#) также включает в себя функции мониторинга.

Мы быстро пройдемся по настройке New Relic, чтобы показать, насколько легко использовать телеметрическую систему.

На портале управления Azure зарегистрируйтесь в службе. Нажмите **Новый**, а затем нажмите **Магазин**. Отображается поле диалога **«Выбрать дополнение».** Прокрутите вниз и нажмите **New Relic**.

![Выберите дополнение](monitoring-and-telemetry/_static/image1.png)

Нажмите на правую стрелку и выберите уровень обслуживания, который вы хотите. Для этой демонстрации мы будем использовать бесплатный уровень.

![Персонализировать надстройку](monitoring-and-telemetry/_static/image2.png)

Нажмите на правую стрелку, подтвердите "покупку", и New Relic теперь отображается в виде дополнения на портале.

![Обзор покупки](monitoring-and-telemetry/_static/image3.png)

![Новый портал управления реликтовыми дополнениями](monitoring-and-telemetry/_static/image4.png)

Нажмите **Информация о подключении**и скопируйте ключ лицензии.

![Сведения о подключении](monitoring-and-telemetry/_static/image5.png)

Перейдите на вкладку **Configure** для веб-приложения на портале, установите **мониторинг производительности** для **добавления**и установите список выбрать **дополнительный** список для **New Relic.** Затем нажмите **Сохранить**.

![Новая реликвия в вкладке Настройка](monitoring-and-telemetry/_static/image6.png)

В Visual Studio установите новый пакет Relic NuGet в приложении.

![Аналитика разработчиков во вкладке «Настройка»](monitoring-and-telemetry/_static/image7.png)

Развернуть приложение в Azure и начать использовать его. Создайте несколько задач Fix It, чтобы обеспечить некоторую активность для мониторинга New Relic.

Затем вернитесь к новой странице **реликвия** в **вкладке Дополнений** портала и нажмите **«Управление».** Портал отправляет вас на портал управления New Relic, используя единый вход для проверки подлинности, так что вам не придется вводить свои учетные данные снова. На странице «Обзор» представлена разнообразная статистика производительности. (Нажмите на изображение, чтобы увидеть обзор страницы полного размера.)

[![Новая вкладка мониторинга реликвий](monitoring-and-telemetry/_static/image9.png)](monitoring-and-telemetry/_static/image8.png)

Вот лишь некоторые из статистических данных, которые вы можете увидеть:

- Среднее время отклика в разное время суток.

    ![время ответа;](monitoring-and-telemetry/_static/image10.png)
- Скорость пропускной просажа (в запросах в минуту) в разное время суток.

    ![Пропускная способность](monitoring-and-telemetry/_static/image11.png)
- Время процессора сервера, затрачиваемые на обработку различных запросов HTTP.

    ![Время веб-транзакций](monitoring-and-telemetry/_static/image12.png)
- Время процессора, проведенное в разных частях кода приложения:

    ![Детали трассировки](monitoring-and-telemetry/_static/image13.png)
- Статистика исторических показателей.

    ![Исторический спектакль](monitoring-and-telemetry/_static/image14.png)
- Звонки на внешние услуги, такие как услуга Blob и статистика о том, насколько надежной и отзывчивой была услуга.

    ![Внешние службы](monitoring-and-telemetry/_static/image15.png)

    ![Внешние службы](monitoring-and-telemetry/_static/image16.png)

    ![Внешняя служба](monitoring-and-telemetry/_static/image17.png)
- Информация о том, где в мире или где в США веб-приложение трафик пришел из.

    ![Geography](monitoring-and-telemetry/_static/image18.png)

Вы также можете настроить отчеты и события. Например, вы можете сказать, что в любой момент, когда вы начинаете видеть ошибки, отправить по электронной почте, чтобы предупредить сотрудников службы поддержки к проблеме.

![Отчеты](monitoring-and-telemetry/_static/image19.png)

Новая реликвия является лишь одним из примеров телеметрической системы; Вы можете получить все это от других услуг, а также. Прелесть облака в том, что без необходимости писать код, а за минимальные расходы или без каких-либо затрат, вы вдруг можете получить гораздо больше информации о том, как ваше приложение используется и что ваши клиенты на самом деле испытывают.

<a id="log"></a>
## <a name="log-for-insight"></a>Войти для понимания

Пакет телеметрии является хорошим первым шагом, но вы все равно должны инструмент свой собственный код. Служба телеметрии сообщает вам, когда есть проблема, и говорит вам, что клиенты испытывают, но это не может дать вам много понимания того, что происходит в вашем коде.

Вы не хотите, чтобы удаленно в производственный сервер, чтобы увидеть, что ваше приложение делает. Это может быть практичным, когда у вас есть один сервер, но как насчет того, когда вы масштабировали до сотен серверов, и вы не знаете, какие из них вам нужно удаленного в? Ваша запись должна предоставлять достаточно информации, что вы никогда не должны удаленного в производственные серверы для анализа и отладки проблем. Вы должны быть журнал достаточно информации, так что вы можете изолировать вопросы исключительно через журналы.

### <a name="log-in-production"></a>Вход в производство

Многие люди включают трассировку в производстве только тогда, когда есть проблема, и они хотят отладить. Это может привести к существенной задержке между временем, когда вы знаете о проблеме, и временем получения полезной информации об устранении неполадок. И информация, которая вы получаете, может быть не полезна для периодических ошибок.

В облачной среде, где хранение дешево, рекомендуется постоянно регистрать в производстве. Таким образом, когда ошибки случаются, вы уже зарегистрировали их, и у вас есть исторические данные, которые могут помочь вам проанализировать проблемы, которые развиваются с течением времени или происходят регулярно в разное время. Можно автоматизировать процесс очистки, чтобы удалить старые журналы, но вы можете обнаружить, что это дороже, чтобы настроить такой процесс, чем сохранить журналы.

Дополнительные расходы на журнал является тривиальным по сравнению с количеством времени устранения неполадок и денег, которые вы можете сэкономить, имея всю необходимую информацию, когда что-то пойдет не так. Затем, когда кто-то говорит вам, что у них была случайная ошибка где-то около 8:00 вчера вечером, но они не помнят ошибку, вы можете легко узнать, в чем проблема была.

Менее чем за $4 в месяц вы можете держать под рукой 50 гигабайт журналов, а влияние на производительность журналов является тривиальным, если вы держите в уме одну вещь - чтобы избежать узких мест производительности, убедитесь, что ваша библиотека регистрации асинхронна.

### <a name="differentiate-logs-that-inform-from-logs-that-require-action"></a>Дифференцируйте журналы, которые информируют из журналов, требующих действий

Логи предназначены для INFORM (я хочу, чтобы вы знали что-то) или ACT (я хочу, чтобы вы что-то сделать). Будьте осторожны, чтобы писать только журналы ACT для вопросов, которые действительно требуют от человека или автоматизированного процесса для принятия мер. Слишком много журналов ACT создаст шум, требуя слишком много работы, чтобы просеять через все это, чтобы найти подлинные проблемы. И если ваши журналы ACT автоматически вызывают некоторые действия, такие как отправка электронной почты для вспомогательного персонала, не позволяйте тысячам таких действий быть вызваны одной проблемой.

В отслеживании системы .NET.Diagnostics журналы могут быть назначены уровень ошибки, предупреждения, информации и дебага/verbose. Вы можете отличить ACT от журналов INFORM, зарезервивая уровень ошибки для журналов ACT и используя более низкие уровни для журналов INFORM.

![Уровни ведения журнала](monitoring-and-telemetry/_static/image20.png)

### <a name="configure-logging-levels-at-run-time"></a>Настройка уровней регистрации во время выполнения

Хотя стоит постоянно регистрироваться в производстве, другой наилучшей практикой является реализация платформы журналов, которая позволяет корректировать в течение времени выполнения уровня детализации, который вы регистрируете, без передислокации или перезапуска приложения. Например, при использовании средства `System.Diagnostics` отслеживания можно создать журналы ошибок, предупреждений, информации и оттачивания/версии. Мы рекомендуем всегда регистрировать журналы ошибок, предупреждений и информации в производстве, и вы хотите иметь возможность динамически добавлять журнал debug/Verbose для устранения неполадок на индивидуальной основе.

Веб-приложения в службе приложений Azure `System.Diagnostics` имеют встроенную поддержку для записи журналов в файловую систему, хранилище таблиц ы или хранилище Blob. Вы можете выбрать различные уровни регистрации для каждого пункта хранения, и вы можете изменить уровень регистрации на лету без перезапуска приложения. Поддержка хранения данных Blob упрощает работу задания анализа [HDInsight](https://docs.microsoft.com/azure/hdinsight/) в журналах приложений, поскольку HDInsight знает, как работать с хранением Blob напрямую.

### <a name="log-exceptions"></a>Запись исключений в журнал

Не просто поставить *исключение. ToString ()* в коде регистрации. Это оставляет контекстную информацию. В случае с ошибками, ошибками s'L, он не изменял номер ошибки S'L. Для всех исключений, включите контекстную информацию, само исключение и внутренние исключения, чтобы убедиться, что вы предоставляете все, что будет необходимо для устранения неполадок. Например, контекстная информация может включать имя сервера, идентификатор транзакции и имя пользователя (но не пароль или какие-либо секреты!).

Если вы полагаетесь на каждого разработчика, чтобы сделать правильную вещь с журналом исключений, некоторые из них не будут. Чтобы убедиться, что каждый раз это делается правильно, создайте обработку исключений прямо в интерфейс регистратора: передайте объект исключения в класс регистратора и правильно войдите в журнал данных об исключениях в классе регистраторов.

### <a name="log-calls-to-services"></a>Входные звонки в службы

Мы настоятельно рекомендуем писать журнал каждый раз, когда ваше приложение зазывает службу, будь то база данных, API REST или любая внешняя служба. Включите в журналы не только указание на успех или неудачу, но и то, сколько времени занял каждый запрос. В облаке часто возникают проблемы, связанные с замедлением, а не с полными простоями. То, что обычно занимает 10 миллисекунд, может внезапно начать принимать секунду. Когда кто-то говорит вам, что ваше приложение работает медленно, вы хотите иметь возможность посмотреть на New Relic или любой другой телеметрической службы у вас есть и проверить их опыт, а затем вы хотите, чтобы иметь возможность смотреть ваши собственные журналы, чтобы погрузиться в подробности о том, почему это медленно.

### <a name="use-an-ilogger-interface"></a>Используйте интерфейс ILogger

При создании производственного приложения мы рекомендуем создать простой интерфейс *ILogger* и придерживаться в нем некоторых методов. Это упрощает изменение реализации журналов позже и не должно проходить через весь код, чтобы сделать это. Мы могли бы `System.Diagnostics.Trace` использовать класс по всему приложению Fix It, но вместо этого мы используем его под крышкой в классе журнала, который реализует *ILogger,* и мы делаем вызовы метода *ILogger* по всему приложению.

Таким образом, если вы когда-нибудь хотите сделать ваши журналы богаче, вы можете заменить [`System.Diagnostics.Trace`](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio#apptracelogs) любой механизм регистрации вы хотите. Например, по мере роста приложения вы можете решить, что вы хотите использовать более полный пакет журналов, такой как [NLog](http://nlog-project.org/) или [Enterprise Library Logging Application Block.](https://msdn.microsoft.com/library/dn440731(v=pandp.60).aspx) ([Log4Net](http://logging.apache.org/log4net/) является еще одной популярной структурой лесозаготовок, но он не делает асинхронные лесозаготовки.)

Одной из возможных причин использования такой платформы, как NLog, является упрощение деления выходных данных в виде журналов на отдельные большие объемы и ценные хранилища данных. Это помогает эффективно хранить большие объемы данных INFORM, которые не требуются для выполнения быстрых запросов, сохраняя при этом быстрый доступ к данным ACT.

### <a name="semantic-logging"></a>Семантическая лесозаготовка

Для относительно нового способа ведения журнала, который может [Enterprise Library Semantic Logging Application Block (SLAB)](http://convective.wordpress.com/2013/08/12/semantic-logging-application-block-slab/)производить более полезную диагностическую информацию, см. SLAB использует [отслеживание событий для Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) и поддержку [EventSource](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.aspx) в .NET 4.5, чтобы создать более структурированные и зажимные журналы. Вы определяете другой метод для каждого типа событий, которые вы регистрируете, что позволяет настроить написать информацию. Например, для входа в систему ошибки базы данных S'L можно вызвать `LogSQLDatabaseError` метод. Для такого рода исключений вы знаете, что ключевым элементом информации является номер ошибки, поэтому можно включить параметр номера ошибки в подпись метода и записать номер ошибки в качестве отдельного поля в записи журнала, которую вы пишете. Поскольку номер находится в отдельном поле, вы можете более легко и надежно получать отчеты на основе числа ошибок, чем вы могли бы, если бы вы просто concatenating номер ошибки в строку сообщения.

## <a name="logging-in-the-fix-it-app"></a>Регистрация в приложении Fix It

### <a name="the-ilogger-interface"></a>Интерфейс ILogger

Вот интерфейс *ILogger* в приложении Fix It.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample1.cs)]

Эти методы позволяют писать журналы на тех же четырех уровнях, поддерживаемых *System.Diagnostics.* Методы TraceApi для регистрации внешних вызовов службы с информацией о задержке. Можно также добавить набор методов для уровня Debug/Verbose.

### <a name="the-logger-implementation-of-the-ilogger-interface"></a>Реализация интерфейса Logger

Реализация интерфейса очень проста. Это в основном просто звонки в стандартные *методы System.Diagnostics.* В следующем фрагменте показаны все три информационных метода и один каждый из других.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample2.cs)]

### <a name="calling-the-ilogger-methods"></a>Вызов методов ILogger

Каждый раз, когда код в приложении Fix It ловит исключение, он вызывает метод *ILogger* для регистрации деталей исключения. И каждый раз, когда он делает вызов в базу данных, blob службы, или REST API, он запускает предостережевый перед вызовом, останавливает стоп-час, когда служба возвращается, и журналы прошло время вместе с информацией об успехе или неудаче.

Обратите внимание, что в сообщении журнала содержится имя класса и имя метода. Это хорошая практика, чтобы убедиться, что журнал сообщения определить, какая часть кода приложения написал их.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample3.cs?highlight=6,14,20-21,25)]

Так что теперь каждый раз, когда приложение Fix It сделал вызов в базу данных S'L, вы можете увидеть вызов, метод, который назвал его, и точно, сколько времени потребовалось.

![Запрос базы данных s'L в журналах](monitoring-and-telemetry/_static/image21.png)

![](monitoring-and-telemetry/_static/image22.png)

Если вы просматриваете журналы, вы можете увидеть, что время вызовов базы данных является переменной. Эта информация может быть полезной: поскольку приложение регистрирует все это, вы можете анализировать исторические тенденции в том, как служба базы данных работает с течением времени. Например, служба может быть быстрой большую часть времени, но запросы могут сбой или ответы могут замедлиться в определенное время суток.

Вы можете сделать то же самое для службы Blob - каждый раз, когда приложение загружает новый файл, есть журнал, и вы можете увидеть, сколько времени потребовалось, чтобы загрузить каждый файл.

![Blob загрузить журнал](monitoring-and-telemetry/_static/image23.png)

Это всего лишь пара дополнительных строк кода, чтобы написать каждый раз, когда вы звоните в службу, и теперь, когда кто-то говорит, что они столкнулись с проблемой, вы точно знаете, что проблема была, была ли это ошибка, или даже если он просто работает медленно. Вы можете определить источник проблемы без необходимости удаленного в сервер или включить журнал после ошибки происходит и надеемся воссоздать его.

## <a name="dependency-injection-in-the-fix-it-app"></a>Инъекция зависимости в приложении Fix It

Вы можете задаться вопросом, каким образом конструктор репозитория в приведенном выше примере получает реализацию интерфейса регистратора:

[!code-csharp[Main](monitoring-and-telemetry/samples/sample4.cs?highlight=6)]

Для смежни интерфейса с реализацией приложение использует [инъекцию зависимости](http://en.wikipedia.org/wiki/Dependency_injection)(DI) с [Помощью AutoFac.](http://autofac.org/) DI позволяет использовать объект, основанный на интерфейсе во многих местах по всему коду, и только указать в одном месте реализацию, которая используется, когда интерфейс мгновенно. Это упрощает изменение реализации: например, можно заменить регистратор System.Diagnostics регистратором NLog. Или для автоматизированного тестирования вы можете заменить макет версии регистратора.

Приложение Fix It использует DI во всех репозиториях и во всех контроллерах. Конструкторы классов контроллеров получают интерфейс *ITaskRepository* так же, как репозиторий получает интерфейс регистратора:

[!code-csharp[Main](monitoring-and-telemetry/samples/sample5.cs?highlight=5)]

Приложение использует библиотеку AutoFac DI для автоматического предоставления экземпляров *TaskRepository* и *Logger* для этих конструкторов.

[!code-csharp[Main](monitoring-and-telemetry/samples/sample6.cs?highlight=8,10)]

Этот код в основном говорит, что в любом месте конструктор нуждается в интерфейсе *ILogger,* проходят в экземпляре класса *Logger,* и всякий раз, когда он нуждается в *интерфейсе IFixItTaskRepository,* пройти в экземпляре *класса FixItTaskRepository.*

[AutoFac](http://autofac.org/) является одним из многих инфраструктур инъекций зависимости, которые можно использовать. Другой популярный является [Единство](https://blogs.msdn.com/b/agile/archive/2013/08/20/new-guide-dependency-injection-with-unity.aspx), который рекомендуется и поддерживается Microsoft шаблоны и практики.

## <a name="built-in-logging-support-in-azure"></a>Встроенная поддержка журналов в Azure

Azure поддерживает следующие виды [регистрации веб-приложений в службе приложений Azure:](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio)

- Отслеживание системы.Диагностика (можно включить и выключить и установить уровни на лету без перезапуска сайта).
- События Windows.
- Журналы IIS (HTTP/FREB).

Azure поддерживает следующие виды [регистрации в облачных службах:](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-diagnostics)

- Отслеживание системы.Диагностика.
- Счетчики производительности.
- События Windows.
- Журналы IIS (HTTP/FREB).
- Мониторинг пользовательских каталогов.

Приложение Fix It использует отслеживание Системы.Диагностика. Все, что вам нужно сделать, чтобы включить System.Diagnostics входа в веб-приложение, это перевернуть переключатель на портале или вызвать REST API. На портале щелкните вкладку **Configuration** для вашего сайта и прокрутите вниз, чтобы увидеть раздел **Диагностика приложений.** Вы можете включить или выключить журнал и выбрать уровень регистрации, который вы хотите. Вы можете попросиЛа Журналы Azure в файловую систему или учетную запись хранилища.

![Диагностика приложений и диагностика сайта в вкладке «Настройка»](monitoring-and-telemetry/_static/image24.png)

После включения входа в Azure можно увидеть журналы в окне вывода Visual Studio по мере их создания.

![Меню потоков журналов](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-viewlogsmenu.png)

![Меню потоков журналов](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-nologsyet.png)

Вы также можете записать журналы на учетную запись хранилища и просмотреть их с помощью любого инструмента, который может получить доступ к службе таблицы хранения Azure, **например, Server Explorer** в Visual Studio или [Azure Storage Explorer.](https://azure.microsoft.com/features/storage-explorer/)

![Входы в исследователь серверов](http://wacomdpsstorage.blob.core.windows.net/articlesmedia/content-ppe.windowsazure.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/20140115062810/tws-storagelogs.png)

## <a name="summary"></a>Сводка

Реализовать нестандартной телеметрическую систему, войти в свой собственный код и настроить журнал в Azure очень просто. И когда у вас есть производственные проблемы, сочетание телеметрии системы и пользовательских журналов поможет вам решить проблемы быстро, прежде чем они станут основными проблемами для ваших клиентов.

В [следующей главе](transient-fault-handling.md) мы рассмотрим, как обрабатывать временные ошибки, чтобы они не стали производственными проблемами, которые необходимо исследовать.

## <a name="resources"></a>Ресурсы

Для получения дополнительных сведений см. следующие ресурсы.

Документация в основном о телеметрии:

- [Шаблоны и практики Microsoft - Руководство Azure](https://msdn.microsoft.com/library/dn568099.aspx). Ознакомьтесь с рекомендациями по инструментам и телеметрии, руководством по измерению службы, шаблоном мониторинга конечных точек работ и шаблоном реконфигурации Runtime.
- [Пенни щипать в облаке: Включение нового реликтовых мониторинга производительности на веб-сайтах Azure](http://www.hanselman.com/blog/PennyPinchingInTheCloudEnablingNewRelicPerformanceMonitoringOnWindowsAzureWebsites.aspx).
- [Рекомендации по разработке крупномасштабных сервисов в облачных службах Azure.](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx) Белая книга Марка Симмса и Майкла Томасси. Смотрите раздел Телеметрия и диагностика.
- [Разработка нового поколения с помощью приложений Insights](https://msdn.microsoft.com/magazine/dn683794.aspx). Статья в журнале MSDN.

Документация в основном о лесозаготовках:

- [Блок применения semantic logging (SLAB)](http://convective.wordpress.com/2013/08/12/semantic-logging-application-block-slab/). Нил Маккензи представляет аргументы в отношении семантических лесозаготовок с Помощью SLAB.
- [Создание структурированных и значимых журналов с semantic Logging](https://channel9.msdn.com/Events/Build/2013/3-336). (Видео) Джулиан Домингес представляет аргументы в отношении семантических лесозаготовок с Помощью SLAB.
- [EF6 S'L Logging - Часть 1: Простые журналы](http://blog.oneunicorn.com/2013/05/08/ef6-sql-logging-part-1-simple-logging/). Артур Викерс показывает, как регистрировать запросы, выполненные Entity Framework в EF 6.
- [Устойчивость подключения и перехват командования с Рамочной системой сущности в ASP.NET MVC Application.](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md) В-четных в серии учебников из девяти частей показано, как использовать функцию перехвата команд EF 6 для входа в команды S'L, отправленные в базу данных по рамкам сущности.
- [Улучшение ведения журнала с помощью атрибутов информации о звонящей с помощью C'5.0](http://www.dotnetcurry.com/showarticle.aspx?ID=972). Как легко войти в название метода вызова без жесткого кодирования его в буквальном или с помощью отражения, чтобы получить его вручную.

Документация в основном о устранении неполадок:

- [Azure Устранение &amp; неполадок блог](https://blogs.msdn.com/b/kwill/).
- [AzureTools — Диагностическая утилита, используемая группой поддержки разработчиков Azure.](https://blogs.msdn.com/b/kwill/archive/2013/08/26/azuretools-the-diagnostic-utility-used-by-the-windows-azure-developer-support-team.aspx?Redirected=true) Представляет и предоставляет ссылку на загрузку для инструмента, который может быть использован на Azure VM для загрузки и запуска широкого спектра диагностических и мониторинговых инструментов. Полезно, когда вам нужно диагностировать проблему на определенном VM.
- [Устранение проблем веб-приложения в Azure App Service с помощью Visual Studio](https://docs.microsoft.com/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio). Пошагонный учебник для начала работы с отслеживанием системы диагностики и удаленной отладкой.

Видеоролики:

- [FailSafe: Создание масштабируемых и устойчивых облачных служб.](https://channel9.msdn.com/Series/FailSafe) Девятисерийные фильмы Ульриха Хомана, Марка Меркури и Марка Симмса. Представляет концепции высокого уровня и архитектурные принципы очень доступным и интересным способом, с историями, взятыми из microsoft Customer Advisory Team (CAT) опыт с реальными клиентами. Эпизоды 4 и 9 посвящены мониторингу и телеметрии. Эпизод 9 включает в себя обзор услуг мониторинга MetricsHub, AppDynamics, New Relic и PagerDuty.
- [Строительство Большой: Уроки, извлеченные из клиентов Azure - Часть II](https://channel9.msdn.com/Events/Build/2012/3-030). Марк Симмс рассказывает о проектировании для неудачи и инструментарии все. Как и в серии Failsafe, но идет в более как-к деталям.

Образец кода:

- [Основы облачных сервисов в Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649). Пример приложения, созданного группой консультантов по клиентам Microsoft Azure. Демонстрирует как телеметрию, так и практику ведения журнала, как поясняется в следующих статьях. Образец реализует журнал приложений с помощью [NLog](http://nlog-project.org/). Для соответствующей документации см. [серию из четырех статей TechNet вики о телеметрии и журнале](https://social.technet.microsoft.com/wiki/contents/articles/17987.cloud-service-fundamentals.aspx#Telemetry_coming_soon).

> [!div class="step-by-step"]
> [Назад](design-to-survive-failures.md)
> [Вперед](transient-fault-handling.md)
