---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: Создание схемы членства в SQL Server (C#) | Документация Майкрософт
author: rick-anderson
description: Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования SqlMembershipProvider. Далее мы работаем...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: 8160c422d7a20b7c6954f960e73d5d59f7b90a5f
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2020
ms.locfileid: "89044744"
---
# <a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="50f8a-104">Создание схемы членства в SQL Server (C#)</span><span class="sxs-lookup"><span data-stu-id="50f8a-104">Creating the Membership Schema in SQL Server (C#)</span></span>

<span data-ttu-id="50f8a-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="50f8a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="50f8a-106">[Скачать код](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) или [скачать PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="50f8a-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="50f8a-107">Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="50f8a-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="50f8a-108">После этого мы рассмотрим ключевые таблицы в схеме и обсудим их назначение и важность.</span><span class="sxs-lookup"><span data-stu-id="50f8a-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="50f8a-109">В этом руководстве рассказывается о том, как сообщить ASP.NET приложению, какой поставщик должен использовать платформа членства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="50f8a-110">Введение</span><span class="sxs-lookup"><span data-stu-id="50f8a-110">Introduction</span></span>

<span data-ttu-id="50f8a-111">В предыдущих двух учебниках рассматривалась проверка подлинности с помощью форм для идентификации посетителей веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="50f8a-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="50f8a-112">Платформа проверки подлинности с помощью форм упрощает для разработчиков регистрацию пользователя на веб-сайте и запоминать их на страницах, используя билеты проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="50f8a-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="50f8a-113">`FormsAuthentication`Класс включает методы для создания билета и его добавления в файлы cookie посетителя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="50f8a-114">`FormsAuthenticationModule`Проверяет все входящие запросы и, для тех, у которых есть действительный билет проверки подлинности, создает и связывает `GenericPrincipal` `FormsIdentity` объект и с текущим запросом.</span><span class="sxs-lookup"><span data-stu-id="50f8a-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="50f8a-115">Проверка подлинности с помощью форм — это просто механизм предоставления билета проверки подлинности посетителю при входе в систему и, при последующих запросах, анализ этого билета для определения удостоверения пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="50f8a-116">Чтобы веб-приложение поддерживало учетные записи пользователей, нам по-прежнему необходимо реализовать хранилище пользователей и добавить функции для проверки учетных данных, регистрации новых пользователей и множества других задач, связанных с учетной записью пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="50f8a-117">До ASP.NET 2,0 разработчики были в процессе реализации всех этих задач, связанных с учетной записью пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="50f8a-118">К счастью, команда ASP.NET распознал этот недостаток и представил инфраструктуру членства с ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="50f8a-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="50f8a-119">Платформа членства — это набор классов в .NET Framework, предоставляющих программный интерфейс для выполнения основных задач, связанных с учетной записью пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="50f8a-120">Эта платформа построена на основе [модели поставщика](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), которая позволяет разработчикам подключать пользовательскую реализацию к стандартизированному API.</span><span class="sxs-lookup"><span data-stu-id="50f8a-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="50f8a-121">Как обсуждалось в <a id="Tutorial1"></a> учебнике [*основы безопасности и поддержка ASP.NET*](../introduction/security-basics-and-asp-net-support-cs.md) , .NET Framework поставляется с двумя встроенными поставщиками членства: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) и [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) .</span><span class="sxs-lookup"><span data-stu-id="50f8a-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="50f8a-122">Как следует из названия, `SqlMembershipProvider` компонент использует базу данных Microsoft SQL Server в качестве хранилища пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="50f8a-123">Чтобы использовать этот поставщик в приложении, необходимо сообщить поставщику, какую базу данных использовать в качестве хранилища.</span><span class="sxs-lookup"><span data-stu-id="50f8a-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="50f8a-124">Как вы, возможно, представим, что `SqlMembershipProvider` база данных хранилища пользователя должна иметь определенные таблицы, представления и хранимые процедуры базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="50f8a-125">Необходимо добавить эту ожидаемую схему в выбранную базу данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="50f8a-126">Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-127">После этого мы рассмотрим ключевые таблицы в схеме и обсудим их назначение и важность.</span><span class="sxs-lookup"><span data-stu-id="50f8a-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="50f8a-128">В этом руководстве рассказывается о том, как сообщить ASP.NET приложению, какой поставщик должен использовать платформа членства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="50f8a-129">Приступим к работе!</span><span class="sxs-lookup"><span data-stu-id="50f8a-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="50f8a-130">Шаг 1. Выбор места размещения хранилища пользователей</span><span class="sxs-lookup"><span data-stu-id="50f8a-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="50f8a-131">Данные приложения ASP.NET обычно хранятся в нескольких таблицах базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="50f8a-132">При реализации `SqlMembershipProvider` схемы базы данных необходимо решить, следует ли поместить схему членства в ту же базу данных, что и данные приложения, или в альтернативную базу данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="50f8a-133">Я рекомендую найти схему членства в той же базе данных, что и данные приложения, по следующим причинам:</span><span class="sxs-lookup"><span data-stu-id="50f8a-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="50f8a-134">**Удобство сопровождения** ' приложение, данные которого инкапсулированы в одной базе данных, проще понимать, обслуживать и развертывать, чем приложение с двумя отдельными базами данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-134">**Maintainability** ' an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="50f8a-135">**Реляционная целостность** ' путем обнаружения таблиц, связанных с членством, в той же базе данных, где находятся таблицы приложения, можно установить [ограничения внешнего ключа](http://en.wikipedia.org/wiki/Foreign_key) между первичными ключами в таблицах, связанных с членством, и связанными таблицами приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-135">**Relational Integrity** ' by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="50f8a-136">Отделение хранилища пользователей от данных приложений к отдельным базам данных имеет смысл только в том случае, если у вас несколько приложений, каждый из которых использует отдельные базы данных, но им нужно предоставить общий доступ к хранилищу пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="50f8a-137">Создание базы данных</span><span class="sxs-lookup"><span data-stu-id="50f8a-137">Creating a Database</span></span>

<span data-ttu-id="50f8a-138">Приложение, которое мы создали с момента создания второго руководства, еще не требовало базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="50f8a-139">Однако для магазина пользователя нам нужно еще одно.</span><span class="sxs-lookup"><span data-stu-id="50f8a-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="50f8a-140">Давайте создадим его, а затем добавим к нему схему, требуемую для `SqlMembershipProvider` поставщика (см. шаг 2).</span><span class="sxs-lookup"><span data-stu-id="50f8a-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-141">В рамках этой серии руководств мы будем использовать базу данных [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) для хранения таблиц приложений и `SqlMembershipProvider` схемы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="50f8a-142">Это решение было принято по двум причинам: во-первых, это связано с тем, что выпуск Express Edition является самой доступной для чтения версией SQL Server 2005; Во-вторых, SQL Server 2005, экспресс-выпуск базы данных могут быть помещены непосредственно в `App_Data` папку Web Application, что делает ее очень просто, чтобы упаковать базу данных и веб-приложение в один сжатый файл и повторно развернуть его без каких-либо специальных инструкций по настройке или параметров конфигурации.</span><span class="sxs-lookup"><span data-stu-id="50f8a-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="50f8a-143">Если вы предпочитаете использовать версию SQL Server, отличную от Express Edition, вы можете бесплатно воспользоваться этой версией.</span><span class="sxs-lookup"><span data-stu-id="50f8a-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="50f8a-144">Эти шаги практически идентичны.</span><span class="sxs-lookup"><span data-stu-id="50f8a-144">The steps are virtually identical.</span></span> <span data-ttu-id="50f8a-145">`SqlMembershipProvider`Схема будет работать с любой версией Microsoft SQL Server 2000 и выше.</span><span class="sxs-lookup"><span data-stu-id="50f8a-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="50f8a-146">В обозреватель решений щелкните правой кнопкой мыши `App_Data` папку и выберите Добавить новый элемент.</span><span class="sxs-lookup"><span data-stu-id="50f8a-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="50f8a-147">(Если `App_Data` Папка в проекте не отображается, щелкните проект правой кнопкой мыши в Обозреватель решений, выберите Добавить папку ASP.NET и выберите `App_Data` .) В диалоговом окне Добавление нового элемента выберите, чтобы добавить новую базу данных SQL с именем `SecurityTutorials.mdf` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="50f8a-148">В этом учебнике мы добавим `SqlMembershipProvider` схему в эту базу данных. в последующих руководствах мы создадим дополнительные таблицы для записи данных приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="50f8a-149">[![Добавление новой базы данных SQL с именем Секурититуториалс. mdf в папку App_Data](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="50f8a-150">**Рис. 1**. Добавление новой базы данных SQL с именем `SecurityTutorials.mdf` Database в `App_Data` папку ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="50f8a-151">Добавление базы данных в `App_Data` папку автоматически включает ее в представление Обозреватель базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="50f8a-152">(В версии Visual Studio, отличной от Express Edition, обозреватель базы данных называется обозреватель сервера.) Перейдите к обозреватель базы данных и разверните только что добавленную `SecurityTutorials` базу данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="50f8a-153">Если на экране не отображается обозреватель базы данных, перейдите в меню Вид и выберите пункт обозреватель базы данных или нажмите клавиши CTRL + ALT + S.</span><span class="sxs-lookup"><span data-stu-id="50f8a-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="50f8a-154">Как показано на рис. 2, `SecurityTutorials` база данных пуста — она не содержит ни таблиц, ни представлений, ни хранимых процедур.</span><span class="sxs-lookup"><span data-stu-id="50f8a-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="50f8a-155">[![База данных Секурититуториалс сейчас пуста](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="50f8a-156">**Рис. 2**. `SecurityTutorials` база данных в данный момент пуста ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="50f8a-157">Шаг 2. добавление `SqlMembershipProvider` схемы в базу данных</span><span class="sxs-lookup"><span data-stu-id="50f8a-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="50f8a-158">`SqlMembershipProvider`Для необходимо установить определенный набор таблиц, представлений и хранимых процедур в базу данных хранилища пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="50f8a-159">Эти необходимые объекты базы данных можно добавить с помощью [ `aspnet_regsql.exe` средства](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f8a-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="50f8a-160">Этот файл находится в `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` папке.</span><span class="sxs-lookup"><span data-stu-id="50f8a-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-161">`aspnet_regsql.exe`Средство предлагает как функциональность командной строки, так и графический пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="50f8a-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="50f8a-162">Графический интерфейс является более удобным для пользователя, и он будет рассмотрен в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="50f8a-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="50f8a-163">Интерфейс командной строки полезен в тех случаях, когда добавление `SqlMembershipProvider` схемы необходимо автоматизировать, например в скриптах сборки или в сценариях автоматического тестирования.</span><span class="sxs-lookup"><span data-stu-id="50f8a-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="50f8a-164">`aspnet_regsql.exe`Средство используется для добавления или удаления *служб приложений ASP.NET* в указанной базе данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="50f8a-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="50f8a-165">Службы приложений ASP.NET охватывают схемы для `SqlMembershipProvider` и `SqlRoleProvider` , а также схемы для поставщиков на основе SQL для других платформ ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="50f8a-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="50f8a-166">В средство необходимо предоставить два бита информации `aspnet_regsql.exe` :</span><span class="sxs-lookup"><span data-stu-id="50f8a-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="50f8a-167">Нужно ли добавлять или удалять службы приложений;</span><span class="sxs-lookup"><span data-stu-id="50f8a-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="50f8a-168">База данных, из которой будет добавлена или удалена схема служб приложений</span><span class="sxs-lookup"><span data-stu-id="50f8a-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="50f8a-169">При запросе использования базы данных `aspnet_regsql.exe` средство предложит указать имя сервера, на котором находится база данных, учетные данные безопасности для подключения к базе данных и имя базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="50f8a-170">Если вы используете SQL Server, отличный от Express, эти сведения уже должны быть знакомы, так как это те же сведения, которые необходимо предоставить через строку подключения при работе с базой данных через веб-страницу ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="50f8a-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="50f8a-171">Однако определение имени сервера и базы данных при использовании базы данных SQL Server 2005, экспресс-выпуск в `App_Data` папке, тем не менее, является более сложным.</span><span class="sxs-lookup"><span data-stu-id="50f8a-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="50f8a-172">В следующем разделе рассматривается простой способ указания имени сервера и базы данных для SQL Server 2005, экспресс-выпуск базы данных в `App_Data` папке.</span><span class="sxs-lookup"><span data-stu-id="50f8a-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="50f8a-173">Если вы не используете SQL Server 2005, экспресс-выпуск вы можете перейти к разделу Установка Службы приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="50f8a-174">Определение имени сервера и базы данных для SQL Server 2005, экспресс-выпуск базы данных в `App_Data` папке</span><span class="sxs-lookup"><span data-stu-id="50f8a-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="50f8a-175">Чтобы использовать `aspnet_regsql.exe` средство, необходимо знать имена сервера и базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="50f8a-176">Имя сервера — `localhost\InstanceName` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="50f8a-177">Скорее всего, *instanceName* имеет значение `SQLExpress` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="50f8a-178">Однако если вы установили SQL Server 2005, экспресс-выпуск вручную (то есть не устанавливали его автоматически при установке Visual Studio), возможно, выбрано другое имя экземпляра.</span><span class="sxs-lookup"><span data-stu-id="50f8a-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="50f8a-179">Имя базы данных немного сложнее для определения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="50f8a-180">Базы данных в `App_Data` папке обычно имеют имя базы данных, содержащее [глобальный уникальный идентификатор](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) вместе с путем к файлу базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="50f8a-181">Чтобы добавить схему служб приложений с помощью, необходимо определить это имя базы данных `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="50f8a-182">Самый простой способ выяснить имя базы данных — это проверить ее с помощью SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="50f8a-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="50f8a-183">SQL Server Management Studio предоставляет графический интерфейс для управления базами данных SQL Server 2005, но он не поставляется с выпуском Express SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="50f8a-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="50f8a-184">Хорошая новость заключается в том, что [вы можете скачать](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) бесплатную экспресс-версию SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="50f8a-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-185">Если на рабочем столе установлена версия SQL Server 2005, не являющейся Express Edition, скорее всего, будет установлена полная версия Management Studio.</span><span class="sxs-lookup"><span data-stu-id="50f8a-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="50f8a-186">Можно использовать полную версию для определения имени базы данных, выполнив те же действия, что описаны ниже для выпуска Express.</span><span class="sxs-lookup"><span data-stu-id="50f8a-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="50f8a-187">Сначала закройте Visual Studio, чтобы убедиться, что все блокировки, накладываемые Visual Studio на файл базы данных, закрыты.</span><span class="sxs-lookup"><span data-stu-id="50f8a-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="50f8a-188">Затем запустите SQL Server Management Studio и подключитесь к `localhost\InstanceName` базе данных для SQL Server 2005, Экспресс-выпуск.</span><span class="sxs-lookup"><span data-stu-id="50f8a-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="50f8a-189">Как отмечалось ранее, скорее всего, имя экземпляра — `SQLExpress` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="50f8a-190">Для параметра Проверка подлинности выберите Проверка подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="50f8a-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="50f8a-191">[![Подключение к экземпляру SQL Server 2005, экспресс-выпуск](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="50f8a-192">**Рис. 3**. подключение к экземпляру SQL Server 2005, Экспресс-выпуск ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="50f8a-193">После подключения к экземпляру SQL Server 2005, экспресс-выпуск Management Studio отображает папки для баз данных, параметры безопасности, объекты сервера и т. д.</span><span class="sxs-lookup"><span data-stu-id="50f8a-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="50f8a-194">Если развернуть вкладку базы данных, вы увидите, что `SecurityTutorials.mdf` база данных *не* зарегистрирована в экземпляре базы данных — сначала необходимо присоединить базу данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="50f8a-195">Щелкните правой кнопкой мыши папку базы данных и выберите команду Присоединить в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="50f8a-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="50f8a-196">Отобразится диалоговое окно Присоединение баз данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="50f8a-197">Здесь нажмите кнопку Добавить, перейдите к `SecurityTutorials.mdf` базе данных и нажмите кнопку ОК.</span><span class="sxs-lookup"><span data-stu-id="50f8a-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="50f8a-198">На рис. 4 показано диалоговое окно Присоединение баз данных после `SecurityTutorials.mdf` выбора базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="50f8a-199">На рис. 5 показан обозреватель объектов Management Studio после успешного подключения базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="50f8a-200">[![Присоединение базы данных Секурититуториалс. mdf](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="50f8a-201">**Рис. 4**. присоединение `SecurityTutorials.mdf` базы данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>

<span data-ttu-id="50f8a-202">[![База данных Секурититуториалс. mdf появится в папке базы данных](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span></span>

<span data-ttu-id="50f8a-203">**Рис. 5**. `SecurityTutorials.mdf` база данных отображается в папке базы данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>

<span data-ttu-id="50f8a-204">Как показано на рис. 5, `SecurityTutorials.mdf` база данных имеет довольно абструсе имя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="50f8a-205">Давайте изменим его на более запоминающееся (и проще в вводе) имени.</span><span class="sxs-lookup"><span data-stu-id="50f8a-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="50f8a-206">Щелкните правой кнопкой мыши базу данных, выберите команду Переименовать в контекстном меню и переименуйте ее `SecurityTutorialsDatabase` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="50f8a-207">При этом имя файла не изменяется, просто имя, используемое базой данных для идентификации себя в SQL Server.</span><span class="sxs-lookup"><span data-stu-id="50f8a-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="50f8a-208">[![Переименование базы данных в Секурититуториалсдатабасе](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span></span>

<span data-ttu-id="50f8a-209">**Рис. 6**. Переименование базы данных в `SecurityTutorialsDatabase` ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>

<span data-ttu-id="50f8a-210">На этом этапе мы понимаем имена сервера и базы данных для `SecurityTutorials.mdf` файла базы данных: `localhost\InstanceName` и `SecurityTutorialsDatabase` соответственно.</span><span class="sxs-lookup"><span data-stu-id="50f8a-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="50f8a-211">Теперь все готово для установки служб приложений с помощью `aspnet_regsql.exe` средства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="50f8a-212">Установка Службы приложений</span><span class="sxs-lookup"><span data-stu-id="50f8a-212">Installing the Application Services</span></span>

<span data-ttu-id="50f8a-213">Чтобы запустить `aspnet_regsql.exe` средство, перейдите в меню "Пуск" и выберите команду "выполнить".</span><span class="sxs-lookup"><span data-stu-id="50f8a-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="50f8a-214">Введите `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` в текстовое поле и нажмите кнопку ОК.</span><span class="sxs-lookup"><span data-stu-id="50f8a-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="50f8a-215">Кроме того, можно воспользоваться проводником Windows, чтобы выполнить детализацию до соответствующей папки и дважды щелкнуть `aspnet_regsql.exe` файл.</span><span class="sxs-lookup"><span data-stu-id="50f8a-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="50f8a-216">Один из этих подходов выдает одинаковые результаты.</span><span class="sxs-lookup"><span data-stu-id="50f8a-216">Either approach will net the same results.</span></span>

<span data-ttu-id="50f8a-217">Запуск `aspnet_regsql.exe` средства без аргументов командной строки запускает графический пользовательский интерфейс мастера установки SQL Server ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="50f8a-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="50f8a-218">Мастер упрощает добавление или удаление служб приложений ASP.NET в указанной базе данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="50f8a-219">На первом экране мастера, показанном на рис. 7, описывается назначение этого средства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="50f8a-220">[![Добавление схемы членства с помощью мастера установки SQL Server ASP.NET](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span></span>

<span data-ttu-id="50f8a-221">**Рис. 7**. Использование мастера установки ASP.NET SQL Server для добавления схемы членства ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>

<span data-ttu-id="50f8a-222">На втором шаге мастера запрашивается, нужно ли добавить службы приложений или удалить их.</span><span class="sxs-lookup"><span data-stu-id="50f8a-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="50f8a-223">Так как мы хотим добавить таблицы, представления и хранимые процедуры, необходимые для `SqlMembershipProvider` , выберите параметр настроить SQL Server для служб приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="50f8a-224">Позже, если вы хотите удалить эту схему из базы данных, перезапустите этот мастер, а вместо этого выберите параметр удалить сведения о службах приложений из существующей базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="50f8a-225">[![Выберите параметр настроить SQL Server для Службы приложений](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span></span>

<span data-ttu-id="50f8a-226">**Рис. 8**. Выбор параметра настройки SQL Server для службы приложений ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>

<span data-ttu-id="50f8a-227">На третьем шаге запрашиваются сведения о базе данных: имя сервера, сведения о проверке подлинности и имя базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="50f8a-228">Если вы уже выполнили инструкции в этом учебнике и добавили `SecurityTutorials.mdf` базу данных в `App_Data` , подключили ее к и `localhost\InstanceName` переименовали в `SecurityTutorialsDatabase` , используйте следующие значения:</span><span class="sxs-lookup"><span data-stu-id="50f8a-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="50f8a-229">Сервер: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="50f8a-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="50f8a-230">Проверка подлинности Windows</span><span class="sxs-lookup"><span data-stu-id="50f8a-230">Windows authentication</span></span>
- <span data-ttu-id="50f8a-231">СУБД `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="50f8a-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="50f8a-232">[![Введите сведения о базе данных](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span></span>

<span data-ttu-id="50f8a-233">**Рис. 9**. Ввод сведений о базе данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>

<span data-ttu-id="50f8a-234">После ввода сведений о базе данных нажмите кнопку Далее.</span><span class="sxs-lookup"><span data-stu-id="50f8a-234">After entering the database information, click Next.</span></span> <span data-ttu-id="50f8a-235">На последнем шаге выполняется сводка действий, которые будут выполнены.</span><span class="sxs-lookup"><span data-stu-id="50f8a-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="50f8a-236">Нажмите кнопку Далее, чтобы установить службы приложений и завершить работу мастера.</span><span class="sxs-lookup"><span data-stu-id="50f8a-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-237">Если вы использовали Management Studio для присоединения базы данных и переименования файла базы данных, не забудьте отсоединить базу данных и закрыть Management Studio перед повторной попыткой открытия Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="50f8a-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="50f8a-238">Чтобы отсоединить `SecurityTutorialsDatabase` базу данных, щелкните имя базы данных правой кнопкой мыши и в меню задачи выберите пункт Отсоединить.</span><span class="sxs-lookup"><span data-stu-id="50f8a-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="50f8a-239">После завершения работы мастера вернитесь в Visual Studio и перейдите к обозреватель базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="50f8a-240">Разверните папку Таблицы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-240">Expand the Tables folder.</span></span> <span data-ttu-id="50f8a-241">Вы увидите ряд таблиц, имена которых начинаются с префикса `aspnet_` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="50f8a-242">Аналогично, в папках views и хранимые процедуры можно найти разнообразные представления и хранимые процедуры.</span><span class="sxs-lookup"><span data-stu-id="50f8a-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="50f8a-243">Эти объекты базы данных составляют схему служб приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="50f8a-244">В шаге 3 будут рассмотрены объекты базы данных, относящиеся к членству и ролям.</span><span class="sxs-lookup"><span data-stu-id="50f8a-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="50f8a-245">[![В базу данных добавлены разнообразные таблицы, представления и хранимые процедуры.](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span></span>

<span data-ttu-id="50f8a-246">**Рис. 10**. в базу данных добавлены разнообразные таблицы, представления и хранимые процедуры ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-247">`aspnet_regsql.exe`Графический пользовательский интерфейс средства устанавливает всю схему служб приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="50f8a-248">Но при выполнении `aspnet_regsql.exe` из командной строки можно указать, какие конкретные компоненты служб приложений следует установить (или удалить).</span><span class="sxs-lookup"><span data-stu-id="50f8a-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="50f8a-249">Таким образом, если нужно добавить только таблицы, представления и хранимые процедуры, необходимые для `SqlMembershipProvider` `SqlRoleProvider` поставщиков и, запустите `aspnet_regsql.exe` из командной строки.</span><span class="sxs-lookup"><span data-stu-id="50f8a-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="50f8a-250">Кроме того, можно вручную запустить соответствующее подмножество скриптов создания T-SQL, используемых `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="50f8a-251">Эти скрипты находятся в `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` папке с такими именами `InstallCommon.sql` , как,,,, `InstallMembership.sql` `InstallRoles.sql` `InstallProfile.sql` `InstallSqlState.sql` и т. д.</span><span class="sxs-lookup"><span data-stu-id="50f8a-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="50f8a-252">На этом этапе мы создали объекты базы данных, необходимые для `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-253">Тем не менее нам по-прежнему нужно указать платформе членства, что она должна использовать `SqlMembershipProvider` (и, скажем, `ActiveDirectoryMembershipProvider` ) и что компонент `SqlMembershipProvider` должен использовать `SecurityTutorials` базу данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="50f8a-254">Мы рассмотрим, как указать, какой поставщик использовать, и как настроить параметры выбранного поставщика на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="50f8a-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="50f8a-255">Но сначала давайте более подробно рассмотрим объекты базы данных, которые были только что созданы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="50f8a-256">Шаг 3. Просмотр основных таблиц схемы</span><span class="sxs-lookup"><span data-stu-id="50f8a-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="50f8a-257">При работе с платформами членства и ролей в приложении ASP.NET сведения о реализации инкапсулируются поставщиком.</span><span class="sxs-lookup"><span data-stu-id="50f8a-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="50f8a-258">В следующих учебных курсах мы будем взаимодействовать с этими платформами с помощью `Membership` классов .NET Framework и `Roles` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="50f8a-259">При использовании этих API-интерфейсов высокого уровня не нужно заботиться о низкоуровневых уровнях, таких как выполняемые запросы или таблицы, измененные с помощью `SqlMembershipProvider` и `SqlRoleProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="50f8a-260">Учитывая это, можно было бы уверенно использовать платформы членства и ролей без изучения схемы базы данных, созданной на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="50f8a-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="50f8a-261">Однако при создании таблиц для хранения данных приложения может потребоваться создать сущности, связанные с пользователями или ролями.</span><span class="sxs-lookup"><span data-stu-id="50f8a-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="50f8a-262">`SqlMembershipProvider` `SqlRoleProvider` При установке ограничений внешнего ключа между таблицами данных приложения и таблицами, созданными на шаге 2, полезно иметь представление о схемах и.</span><span class="sxs-lookup"><span data-stu-id="50f8a-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="50f8a-263">Более того, в некоторых редких случаях может потребоваться взаимодействовать с хранилищами пользователей и ролей непосредственно на уровне базы данных (вместо `Membership` `Roles` классов или).</span><span class="sxs-lookup"><span data-stu-id="50f8a-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="50f8a-264">Разделение пользовательского хранилища на приложения</span><span class="sxs-lookup"><span data-stu-id="50f8a-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="50f8a-265">Структуры членства и ролей спроектированы таким образом, что один пользователь и хранилище ролей могут совместно использоваться разными приложениями.</span><span class="sxs-lookup"><span data-stu-id="50f8a-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="50f8a-266">Приложение ASP.NET, использующее платформы членства или ролей, должно указывать, какую секцию приложения следует использовать.</span><span class="sxs-lookup"><span data-stu-id="50f8a-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="50f8a-267">Вкратце, несколько веб-приложений могут использовать одни и те же хранилища пользователей и ролей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="50f8a-268">На рис. 11 показаны хранилища пользователей и ролей, разделенные на три приложения: Хрсите, Кустомерсите и Салессите.</span><span class="sxs-lookup"><span data-stu-id="50f8a-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="50f8a-269">Каждый из этих трех веб-приложений имеет собственные уникальные пользователи и роли, но все они физически хранят свои учетные записи и сведения о ролях в одних и тех же таблицах базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="50f8a-270">[![Учетные записи пользователей могут быть разделены между несколькими приложениями.](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="50f8a-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span></span>

<span data-ttu-id="50f8a-271">**Рис. 11**. учетные записи пользователей могут быть разделены между несколькими приложениями ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="50f8a-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>

<span data-ttu-id="50f8a-272">`aspnet_Applications`Таблица определяет эти секции.</span><span class="sxs-lookup"><span data-stu-id="50f8a-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="50f8a-273">Каждое приложение, использующее базу данных для хранения данных учетной записи пользователя, представлено строкой в этой таблице.</span><span class="sxs-lookup"><span data-stu-id="50f8a-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="50f8a-274">`aspnet_Applications`Таблица состоит из четырех столбцов: `ApplicationId` , `ApplicationName` , `LoweredApplicationName` и `Description` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> <span data-ttu-id="50f8a-275">`ApplicationId` имеет тип [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) и является первичным ключом таблицы; `ApplicationName` предоставляет уникальное понятное имя для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-275">`ApplicationId` is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="50f8a-276">Другие таблицы, относящиеся к членству и ролям, связываются с `ApplicationId` полем в `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="50f8a-277">Например, `aspnet_Users` Таблица, содержащая запись для каждой учетной записи пользователя, имеет `ApplicationId` поле внешнего ключа, Дитто для `aspnet_Roles` таблицы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="50f8a-278">В `ApplicationId` поле в этих таблицах указывается Секция приложения, к которой принадлежит учетная запись пользователя или роль.</span><span class="sxs-lookup"><span data-stu-id="50f8a-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="50f8a-279">Хранение сведений об учетной записи пользователя</span><span class="sxs-lookup"><span data-stu-id="50f8a-279">Storing User Account Information</span></span>

<span data-ttu-id="50f8a-280">Сведения об учетной записи пользователя размещены в двух таблицах: `aspnet_Users` и `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="50f8a-281">`aspnet_Users`Таблица содержит поля, в которых хранятся сведения о наиболее ценных учетных записях пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="50f8a-282">Ниже перечислены три наиболее подсоответствующие столбцы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="50f8a-283">`UserId` является первичным ключом (и типом `uniqueidentifier` ).</span><span class="sxs-lookup"><span data-stu-id="50f8a-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="50f8a-284">`UserName` имеет тип `nvarchar(256)` и, вместе с паролем, создает учетные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="50f8a-285">(Пароль пользователя хранится в `aspnet_Membership` таблице.) `ApplicationId` связывает учетную запись пользователя с определенным приложением в `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="50f8a-286">Существует составное [ `UNIQUE` ограничение](https://msdn.microsoft.com/library/ms191166.aspx) для `UserName` `ApplicationId` столбцов и.</span><span class="sxs-lookup"><span data-stu-id="50f8a-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="50f8a-287">Это гарантирует, что каждое имя пользователя уникально в данном приложении, но это позволит использовать его `UserName` в разных приложениях.</span><span class="sxs-lookup"><span data-stu-id="50f8a-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="50f8a-288">`aspnet_Membership`Таблица содержит дополнительные сведения об учетной записи пользователя, такие как пароль пользователя, адрес электронной почты, Дата и время последнего входа в систему и т. д.</span><span class="sxs-lookup"><span data-stu-id="50f8a-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="50f8a-289">Между записями в таблицах и есть соответствие "один к одному `aspnet_Users` " `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="50f8a-290">Эта связь обеспечивается `UserId` полем в `aspnet_Membership` , которое служит первичным ключом таблицы.</span><span class="sxs-lookup"><span data-stu-id="50f8a-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="50f8a-291">Как и в `aspnet_Users` таблице, `aspnet_Membership` включает `ApplicationId` поле, которое связывает эту информацию с определенной секцией приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="50f8a-292">Защита паролей</span><span class="sxs-lookup"><span data-stu-id="50f8a-292">Securing Passwords</span></span>

<span data-ttu-id="50f8a-293">Сведения о пароле хранятся в `aspnet_Membership` таблице.</span><span class="sxs-lookup"><span data-stu-id="50f8a-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="50f8a-294">`SqlMembershipProvider`Позволяет хранить пароли в базе данных с помощью одного из следующих трех методов:</span><span class="sxs-lookup"><span data-stu-id="50f8a-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="50f8a-295">**Clear** — пароль хранится в базе данных в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="50f8a-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="50f8a-296">Я настоятельно не хочу использовать этот параметр.</span><span class="sxs-lookup"><span data-stu-id="50f8a-296">I strongly discourage using this option.</span></span> <span data-ttu-id="50f8a-297">Если база данных скомпрометирована, то злоумышленник, который находит заднюю дверцу или недовольным сотрудника, имеющего доступ к базе данных, может использовать все учетные данные одного пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="50f8a-298">**Хэшированные** — пароли хэшируются с использованием одностороннего алгоритма хэширования и случайным образом сформированным расширяющим значением.</span><span class="sxs-lookup"><span data-stu-id="50f8a-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="50f8a-299">Это хэшированное значение (вместе с Salt) хранится в базе данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="50f8a-300">**Зашифровано** — зашифрованная версия пароля хранится в базе данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="50f8a-301">Используемый способ хранения паролей зависит от параметров, `SqlMembershipProvider` указанных в `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="50f8a-302">Мы рассмотрим настройку `SqlMembershipProvider` параметров на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="50f8a-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="50f8a-303">Поведение по умолчанию — хранить хэш пароля.</span><span class="sxs-lookup"><span data-stu-id="50f8a-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="50f8a-304">Столбцы, отвечающие за хранение пароля `Password` ,:, `PasswordFormat` и `PasswordSalt` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="50f8a-305">`PasswordFormat` поле типа `int` , значение которого указывает метод, используемый для хранения пароля: 0 для Clear; 1 — для хэширования; 2 — для шифрования.</span><span class="sxs-lookup"><span data-stu-id="50f8a-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="50f8a-306">`PasswordSalt` присваивается случайным образом сформированная строка независимо от используемого метода хранения паролей. значение используется `PasswordSalt` только при вычислении хэша пароля.</span><span class="sxs-lookup"><span data-stu-id="50f8a-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="50f8a-307">Наконец, `Password` столбец содержит фактические данные пароля, то есть пароль в виде обычного текста, хэш пароля или зашифрованный пароль.</span><span class="sxs-lookup"><span data-stu-id="50f8a-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="50f8a-308">В таблице 1 показано, как могут выглядеть эти три столбца для различных методов хранения при хранении пароля MySecret!</span><span class="sxs-lookup"><span data-stu-id="50f8a-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="50f8a-309">.</span><span class="sxs-lookup"><span data-stu-id="50f8a-309">.</span></span>

| <span data-ttu-id="50f8a-310">**Метод хранения &lt; \_ O3A \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="50f8a-311">**&lt; \_ O3A пароля \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="50f8a-312">**Пассвордформат &lt; \_ O3A \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="50f8a-313">**Пассвордсалт &lt; \_ O3A \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="50f8a-314">Clear</span><span class="sxs-lookup"><span data-stu-id="50f8a-314">Clear</span></span> | <span data-ttu-id="50f8a-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="50f8a-315">MySecret!</span></span> | <span data-ttu-id="50f8a-316">0</span><span class="sxs-lookup"><span data-stu-id="50f8a-316">0</span></span> | <span data-ttu-id="50f8a-317">tTnkPlesqissc2y2SMEygA = =</span><span class="sxs-lookup"><span data-stu-id="50f8a-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="50f8a-318">Хэшируется</span><span class="sxs-lookup"><span data-stu-id="50f8a-318">Hashed</span></span> | <span data-ttu-id="50f8a-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM =</span><span class="sxs-lookup"><span data-stu-id="50f8a-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="50f8a-320">1</span><span class="sxs-lookup"><span data-stu-id="50f8a-320">1</span></span> | <span data-ttu-id="50f8a-321">wFgjUfhdUFOCKQiI61vtiQ = =</span><span class="sxs-lookup"><span data-stu-id="50f8a-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="50f8a-322">С шифрованием</span><span class="sxs-lookup"><span data-stu-id="50f8a-322">Encrypted</span></span> | <span data-ttu-id="50f8a-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="50f8a-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="50f8a-324">2</span><span class="sxs-lookup"><span data-stu-id="50f8a-324">2</span></span> | <span data-ttu-id="50f8a-325">Лсрзгс/AA/Окаксглхжнбв = =</span><span class="sxs-lookup"><span data-stu-id="50f8a-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="50f8a-326">**Таблица 1**. примеры значений для полей, связанных с паролем, при хранении пароля mysecret!</span><span class="sxs-lookup"><span data-stu-id="50f8a-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-327">Конкретный алгоритм шифрования или хэширования, используемый объектом, `SqlMembershipProvider` определяется параметрами в `<machineKey>` элементе.</span><span class="sxs-lookup"><span data-stu-id="50f8a-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="50f8a-328">Мы обсуждали этот элемент конфигурации на шаге 3 <a id="Tutorial3"></a> учебника [*Настройка проверки подлинности с помощью форм и дополнительные разделы*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="50f8a-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="50f8a-329">Хранение ролей и сопоставлений ролей</span><span class="sxs-lookup"><span data-stu-id="50f8a-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="50f8a-330">Платформа ролей позволяет разработчикам определять набор ролей и указывать, к каким ролям относятся пользователи.</span><span class="sxs-lookup"><span data-stu-id="50f8a-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="50f8a-331">Эти сведения фиксируются в базе данных с помощью двух таблиц: `aspnet_Roles` и `aspnet_UsersInRoles` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="50f8a-332">Каждая запись в `aspnet_Roles` таблице представляет роль для конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="50f8a-333">Подобно `aspnet_Users` таблице, `aspnet_Roles` таблица имеет три столбца, которые относятся к нашему обсуждению:</span><span class="sxs-lookup"><span data-stu-id="50f8a-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="50f8a-334">`RoleId` является первичным ключом (и типом `uniqueidentifier` ).</span><span class="sxs-lookup"><span data-stu-id="50f8a-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="50f8a-335">`RoleName` имеет тип `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="50f8a-336">И `ApplicationId` связывает учетную запись пользователя с определенным приложением в `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="50f8a-337">Существует составное `UNIQUE` ограничение для `RoleName` `ApplicationId` столбцов и, гарантирующих уникальность имени каждой роли в данном приложении.</span><span class="sxs-lookup"><span data-stu-id="50f8a-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="50f8a-338">`aspnet_UsersInRoles`Таблица служит сопоставлением между пользователями и ролями.</span><span class="sxs-lookup"><span data-stu-id="50f8a-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="50f8a-339">Существует только два столбца — `UserId` и `RoleId` вместе они составляют составной первичный ключ.</span><span class="sxs-lookup"><span data-stu-id="50f8a-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="50f8a-340">Шаг 4. Указание поставщика и настройка его параметров</span><span class="sxs-lookup"><span data-stu-id="50f8a-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="50f8a-341">Все платформы, поддерживающие модель поставщика (например, структуры членства и ролей), не имеют самих деталей реализации, а делегируют ответственность за класс поставщика.</span><span class="sxs-lookup"><span data-stu-id="50f8a-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="50f8a-342">В случае с платформой членства `Membership` класс определяет API для управления учетными записями пользователей, но не взаимодействует напрямую с каким-либо хранилищем пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="50f8a-343">Вместо этого `Membership` методы класса передают запрос настроенному поставщику — мы будем использовать `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-344">Когда мы вызываем один из методов в `Membership` классе, как платформа членства знает, как делегировать вызов функции `SqlMembershipProvider` ?</span><span class="sxs-lookup"><span data-stu-id="50f8a-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="50f8a-345">`Membership`Класс имеет [ `Providers` свойство](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , содержащее ссылку на все зарегистрированные классы поставщиков, доступные для использования платформой членства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="50f8a-346">Каждый зарегистрированный поставщик имеет связанное имя и тип.</span><span class="sxs-lookup"><span data-stu-id="50f8a-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="50f8a-347">Имя предлагает человеку удобный способ ссылки на конкретный поставщик в `Providers` коллекции, а тип определяет класс поставщика.</span><span class="sxs-lookup"><span data-stu-id="50f8a-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="50f8a-348">Кроме того, каждый зарегистрированный поставщик может включать параметры конфигурации.</span><span class="sxs-lookup"><span data-stu-id="50f8a-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="50f8a-349">Параметры конфигурации для инфраструктуры членства включают `passwordFormat` и `requiresUniqueEmail` , и, кроме многих других.</span><span class="sxs-lookup"><span data-stu-id="50f8a-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="50f8a-350">Полный список параметров конфигурации, используемых, см. в табл. 2 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="50f8a-351">`Providers`Содержимое свойства задается с помощью параметров конфигурации веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="50f8a-352">По умолчанию у всех веб-приложений есть поставщик с именем `AspNetSqlMembershipProvider` типа `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-353">Этот поставщик членства по умолчанию зарегистрирован в `machine.config` (находится в папке `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)` :</span><span class="sxs-lookup"><span data-stu-id="50f8a-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="50f8a-354">Как показано в разметке выше, [ `<membership>` элемент](https://msdn.microsoft.com/library/1b9hw62f.aspx) определяет параметры конфигурации для платформы членства, а [ `<providers>` дочерний элемент](https://msdn.microsoft.com/library/6d4936ht.aspx) указывает зарегистрированных поставщиков.</span><span class="sxs-lookup"><span data-stu-id="50f8a-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="50f8a-355">Поставщики можно добавлять или удалять с помощью [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) элементов или [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) ; Используйте элемент, [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) чтобы удалить все зарегистрированные в настоящее время поставщики.</span><span class="sxs-lookup"><span data-stu-id="50f8a-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="50f8a-356">Как показано в приведенной выше разметке, `machine.config` Добавляет поставщик с именем `AspNetSqlMembershipProvider` типа `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="50f8a-357">В дополнение к `name` `type` атрибутам и `<add>` элемент содержит атрибуты, определяющие значения для различных параметров настройки.</span><span class="sxs-lookup"><span data-stu-id="50f8a-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="50f8a-358">В табл. 2 перечислены доступные `SqlMembershipProvider` Параметры конфигурации, а также их описание.</span><span class="sxs-lookup"><span data-stu-id="50f8a-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-359">Все значения по умолчанию, указанные в таблице 2, относятся к значениям по умолчанию, определенным в `SqlMembershipProvider` классе.</span><span class="sxs-lookup"><span data-stu-id="50f8a-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="50f8a-360">Обратите внимание, что не все параметры конфигурации в `AspNetSqlMembershipProvider` соответствуют значениям по умолчанию для `SqlMembershipProvider` класса.</span><span class="sxs-lookup"><span data-stu-id="50f8a-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="50f8a-361">Например, если значение не указано в поставщике членства, `requiresUniqueEmail` по умолчанию устанавливается значение true.</span><span class="sxs-lookup"><span data-stu-id="50f8a-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="50f8a-362">Однако `AspNetSqlMembershipProvider` переопределяет это значение по умолчанию, явно указав значение `false` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="50f8a-363">**Настройка &lt; \_ O3A \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="50f8a-364">**Описание &lt; \_ O3A \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="50f8a-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="50f8a-365">Вспомним, что платформа членства позволяет секционировать единое хранилище пользователей в нескольких приложениях.</span><span class="sxs-lookup"><span data-stu-id="50f8a-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="50f8a-366">Этот параметр указывает имя секции приложения, используемой поставщиком членства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="50f8a-367">Если это значение явно не указано, во время выполнения задается значение виртуального корневого пути приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="50f8a-368">Указывает значение времени ожидания команды SQL (в секундах).</span><span class="sxs-lookup"><span data-stu-id="50f8a-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="50f8a-369">Значение по умолчанию — 30.</span><span class="sxs-lookup"><span data-stu-id="50f8a-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="50f8a-370">Имя строки подключения в `<connectionStrings>` элементе, используемом для подключения к базе данных хранилища пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="50f8a-371">Это значение обязательно.</span><span class="sxs-lookup"><span data-stu-id="50f8a-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="50f8a-372">Предоставляет удобное описание зарегистрированного поставщика.</span><span class="sxs-lookup"><span data-stu-id="50f8a-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="50f8a-373">Указывает, могут ли пользователи извлекать забытый пароль.</span><span class="sxs-lookup"><span data-stu-id="50f8a-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="50f8a-374">Значение по умолчанию — `false`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="50f8a-375">Указывает, разрешено ли пользователям сбрасывать свой пароль.</span><span class="sxs-lookup"><span data-stu-id="50f8a-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="50f8a-376">По умолчанию — `true`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="50f8a-377">Максимальное количество неудачных попыток входа, которые могут произойти для данного пользователя в течение указанного периода `passwordAttemptWindow` до блокировки пользователя. Значение по умолчанию — 5.</span><span class="sxs-lookup"><span data-stu-id="50f8a-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="50f8a-378">Минимальное число символов, отличных от буквенно-цифровых, которые должны присутствовать в пароле пользователя.</span><span class="sxs-lookup"><span data-stu-id="50f8a-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="50f8a-379">Это значение должно находиться в диапазоне от 0 до 128; значение по умолчанию — 1.</span><span class="sxs-lookup"><span data-stu-id="50f8a-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="50f8a-380">Минимальное число символов, необходимых в пароле.</span><span class="sxs-lookup"><span data-stu-id="50f8a-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="50f8a-381">Это значение должно находиться в диапазоне от 0 до 128; значение по умолчанию — 7.</span><span class="sxs-lookup"><span data-stu-id="50f8a-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="50f8a-382">Имя зарегистрированного поставщика.</span><span class="sxs-lookup"><span data-stu-id="50f8a-382">The name of the registered provider.</span></span> <span data-ttu-id="50f8a-383">Это значение обязательно.</span><span class="sxs-lookup"><span data-stu-id="50f8a-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="50f8a-384">Количество минут, в течение которых отправляются неудачные попытки входа.</span><span class="sxs-lookup"><span data-stu-id="50f8a-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="50f8a-385">Если пользователь вводит недопустимые учетные данные входа `maxInvalidPasswordAttempts` в указанное окно, они будут заблокированы. Значение по умолчанию — 10.</span><span class="sxs-lookup"><span data-stu-id="50f8a-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="50f8a-386">Формат хранилища паролей: `Clear` , `Hashed` или `Encrypted` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="50f8a-387">Значение по умолчанию — `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="50f8a-388">Это регулярное выражение используется для проверки силы выбранного пароля пользователя при создании новой учетной записи или при смене пароля.</span><span class="sxs-lookup"><span data-stu-id="50f8a-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="50f8a-389">Значение по умолчанию — пустая строка.</span><span class="sxs-lookup"><span data-stu-id="50f8a-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="50f8a-390">Указывает, должен ли пользователь отвечать на свой контрольный вопрос при получении или сбросе пароля.</span><span class="sxs-lookup"><span data-stu-id="50f8a-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="50f8a-391">Значение по умолчанию — `true`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="50f8a-392">Указывает, должны ли все учетные записи пользователей в заданном разделе приложения иметь уникальный адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="50f8a-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="50f8a-393">Значение по умолчанию — `true`.</span><span class="sxs-lookup"><span data-stu-id="50f8a-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="50f8a-394">Указывает тип поставщика.</span><span class="sxs-lookup"><span data-stu-id="50f8a-394">Specifies the type of the provider.</span></span> <span data-ttu-id="50f8a-395">Это значение обязательно.</span><span class="sxs-lookup"><span data-stu-id="50f8a-395">This value is required.</span></span> |

<span data-ttu-id="50f8a-396">**Таблица 2**. параметры членства и `SqlMembershipProvider` конфигурации</span><span class="sxs-lookup"><span data-stu-id="50f8a-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="50f8a-397">Кроме `AspNetSqlMembershipProvider` того, другие поставщики членства могут быть зарегистрированы на уровне приложения, добавляя подобную разметку к `Web.config` файлу.</span><span class="sxs-lookup"><span data-stu-id="50f8a-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-398">Платформа ролей работает практически так же: зарегистрированный поставщик ролей по умолчанию в `machine.config` и зарегистрированные поставщики могут быть настроены отдельно для каждого приложения в `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="50f8a-399">В следующем руководстве мы подробно рассмотрим платформу ролей и разметку конфигурации.</span><span class="sxs-lookup"><span data-stu-id="50f8a-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="50f8a-400">Настройка `SqlMembershipProvider` параметров</span><span class="sxs-lookup"><span data-stu-id="50f8a-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="50f8a-401">Значение по умолчанию `SqlMembershipProvider` ( `AspNetSqlMembershipProvider` ) `connectionStringName` атрибута равно `LocalSqlServer` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="50f8a-402">Как и `AspNetSqlMembershipProvider` поставщик, имя строки подключения `LocalSqlServer` определяется в `machine.config` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="50f8a-403">Как видите, эта строка подключения определяет базу данных SQL 2005 Express Edition, расположенную по адресу | DataDirectory | aspnetdb. mdf '.</span><span class="sxs-lookup"><span data-stu-id="50f8a-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf'.</span></span> <span data-ttu-id="50f8a-404">Строка | DataDirectory | преобразуется во время выполнения, чтобы указывать на `~/App_Data/` каталог, поэтому путь к базе данных | "DataDirectory | aspnetdb. mdf" преобразуется в `~/App_Data` / `aspnet.mdf` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="50f8a-405">Если в файле приложения не были указаны сведения о поставщике членства `Web.config` , приложение использует зарегистрированного поставщика членства по умолчанию `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-406">Если `~/App_Data/aspnet.mdf` база данных не существует, среда выполнения ASP.NET автоматически создаст ее и добавит схему служб приложений.</span><span class="sxs-lookup"><span data-stu-id="50f8a-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="50f8a-407">Однако мы не хотим использовать `aspnet.mdf` базу данных. вместо этого мы хотим использовать `SecurityTutorials.mdf` базу данных, созданную на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="50f8a-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="50f8a-408">Это изменение можно выполнить одним из двух способов:</span><span class="sxs-lookup"><span data-stu-id="50f8a-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="50f8a-409"><strong>Укажите значение для</strong> <strong>`LocalSqlServer`</strong> <strong>имя строки подключения в</strong> <strong>`Web.config`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="50f8a-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="50f8a-410">Переписывая `LocalSqlServer` значение имени строки подключения в `Web.config` , можно использовать зарегистрированного поставщика членства по умолчанию ( `AspNetSqlMembershipProvider` ) и правильно работать с `SecurityTutorials.mdf` базой данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="50f8a-411">Этот подход подходит, если вы используете содержимое с параметрами конфигурации, заданными параметром `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-412">Дополнительные сведения об этом методе см. в записи блога [Скотта Гатри (](https://weblogs.asp.net/scottgu/), [которая настраивает ASP.NET 2,0 Службы приложений для использования SQL Server 2000 или SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f8a-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="50f8a-413"><strong>Добавление нового зарегистрированного поставщика типа</strong> <strong>`SqlMembershipProvider`</strong> <strong>и настройте его</strong> <strong>`connectionStringName`</strong> <strong>параметр, указывающий</strong> <strong>`SecurityTutorials.mdf`</strong> на <strong>база данных.</strong></span><span class="sxs-lookup"><span data-stu-id="50f8a-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="50f8a-414">Этот подход полезен в сценариях, где необходимо настроить другие свойства конфигурации в дополнение к строке подключения к базе данных.</span><span class="sxs-lookup"><span data-stu-id="50f8a-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="50f8a-415">В собственных проектах я всегда использую этот подход из-за его гибкости и удобочитаемости.</span><span class="sxs-lookup"><span data-stu-id="50f8a-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="50f8a-416">Прежде чем можно будет добавить новый зарегистрированный поставщик, ссылающийся на `SecurityTutorials.mdf` базу данных, сначала необходимо добавить соответствующее значение строки подключения в `<connectionStrings>` раздел `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="50f8a-417">Следующая разметка добавляет новую строку подключения с именем `SecurityTutorialsConnectionString` , которая ссылается на SQL Server 2005, Экспресс-выпуск `SecurityTutorials.mdf` базу данных в `App_Data` папке.</span><span class="sxs-lookup"><span data-stu-id="50f8a-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="50f8a-418">При использовании альтернативного файла базы данных обновите строку подключения по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="50f8a-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="50f8a-419">Дополнительные сведения о создании правильной строки подключения см. в разделе [connectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="50f8a-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="50f8a-420">Затем добавьте следующую разметку конфигурации членства в `Web.config` файл.</span><span class="sxs-lookup"><span data-stu-id="50f8a-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="50f8a-421">Эта разметка регистрирует нового поставщика с именем `SecurityTutorialsSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="50f8a-422">Помимо регистрации `SecurityTutorialsSqlMembershipProvider` поставщика, приведенная выше разметка определяет в `SecurityTutorialsSqlMembershipProvider` качестве поставщика по умолчанию (через `defaultProvider` атрибут в `<membership>` элементе).</span><span class="sxs-lookup"><span data-stu-id="50f8a-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="50f8a-423">Вспомним, что инфраструктура членства может иметь несколько зарегистрированных поставщиков.</span><span class="sxs-lookup"><span data-stu-id="50f8a-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="50f8a-424">Так как `AspNetSqlMembershipProvider` регистрируется в качестве первого поставщика в `machine.config` , он выступает в качестве поставщика по умолчанию, если не указано иное.</span><span class="sxs-lookup"><span data-stu-id="50f8a-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="50f8a-425">В настоящее время наше приложение имеет два зарегистрированных поставщика: `AspNetSqlMembershipProvider` и `SecurityTutorialsSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-426">Однако перед регистрацией `SecurityTutorialsSqlMembershipProvider` поставщика можно было удалить все ранее зарегистрированные поставщики, добавив [ `<clear />` элемент](https://msdn.microsoft.com/library/t062y6yc.aspx) непосредственно перед нашим `<add>` элементом.</span><span class="sxs-lookup"><span data-stu-id="50f8a-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="50f8a-427">Это приведет к очистке `AspNetSqlMembershipProvider` из списка зарегистрированных поставщиков, что означает, что `SecurityTutorialsSqlMembershipProvider` единственным зарегистрированным поставщиком членства является.</span><span class="sxs-lookup"><span data-stu-id="50f8a-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="50f8a-428">Если мы использовали такой подход, не нужно помечать его `SecurityTutorialsSqlMembershipProvider` как поставщик по умолчанию, так как это единственный зарегистрированный поставщик членства.</span><span class="sxs-lookup"><span data-stu-id="50f8a-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="50f8a-429">Дополнительные сведения об использовании см `<clear />` . в разделе [использование `<clear />` при добавлении поставщиков](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f8a-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="50f8a-430">Обратите внимание, что `SecurityTutorialsSqlMembershipProvider` `connectionStringName` параметр имеет ссылку на только что добавленное `SecurityTutorialsConnectionString` имя строки подключения и `applicationName` для его параметра задано значение секурититуториалс.</span><span class="sxs-lookup"><span data-stu-id="50f8a-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="50f8a-431">Кроме того, `requiresUniqueEmail` для параметра задано значение `true` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="50f8a-432">Все остальные параметры конфигурации идентичны значениям в `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="50f8a-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="50f8a-433">При желании вы можете настроить здесь любые изменения конфигурации.</span><span class="sxs-lookup"><span data-stu-id="50f8a-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="50f8a-434">Например, можно усилить стойкость пароля, запросив два небуквенно-цифровых символа, а не один, или увеличить длину пароля до восьми символов, а не семь.</span><span class="sxs-lookup"><span data-stu-id="50f8a-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="50f8a-435">Вспомним, что платформа членства позволяет секционировать единое хранилище пользователей в нескольких приложениях.</span><span class="sxs-lookup"><span data-stu-id="50f8a-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="50f8a-436">Параметр поставщика членства `applicationName` указывает, какое приложение использует поставщик при работе с хранилищем пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="50f8a-437">Важно явно задать значение `applicationName` параметра конфигурации, так как если параметр `applicationName` не задан явно, он назначается виртуальному корневому каталогу веб-приложения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="50f8a-438">Это работает нормально, пока виртуальный корневой каталог приложения не изменится, но при перемещении приложения в другой путь этот `applicationName` параметр также изменится.</span><span class="sxs-lookup"><span data-stu-id="50f8a-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="50f8a-439">В этом случае поставщик членства начнет работать с другой секцией приложения, чем использовалась ранее.</span><span class="sxs-lookup"><span data-stu-id="50f8a-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="50f8a-440">Учетные записи пользователей, созданные до перемещения, будут находиться в разных разделах приложений, и эти пользователи больше не смогут войти на сайт.</span><span class="sxs-lookup"><span data-stu-id="50f8a-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="50f8a-441">Более подробное обсуждение этой проблемы см. в разделе [всегда устанавливать `applicationName` свойство при настройке членства в ASP.NET 2,0 и других поставщиках](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="50f8a-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="50f8a-442">Сводка</span><span class="sxs-lookup"><span data-stu-id="50f8a-442">Summary</span></span>

<span data-ttu-id="50f8a-443">На этом этапе у нас есть база данных с настроенными службами приложений ( `SecurityTutorials.mdf` ) и настроено веб-приложение, чтобы инфраструктура членства использовала `SecurityTutorialsSqlMembershipProvider` только что зарегистрированный поставщик.</span><span class="sxs-lookup"><span data-stu-id="50f8a-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="50f8a-444">Этот зарегистрированный поставщик имеет тип `SqlMembershipProvider` и имеет свой `connectionStringName` набор для соответствующей строки подключения ( `SecurityTutorialsConnectionString` ), и ее `applicationName` значение явно задано.</span><span class="sxs-lookup"><span data-stu-id="50f8a-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="50f8a-445">Теперь мы готовы использовать платформу членства из нашего приложения.</span><span class="sxs-lookup"><span data-stu-id="50f8a-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="50f8a-446">В следующем учебном курсе будет рассмотрено создание новых учетных записей пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f8a-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="50f8a-447">Далее мы рассмотрим проверку подлинности пользователей, выполнение авторизации на основе пользователей и хранение в базе данных дополнительных сведений, относящихся к пользователю.</span><span class="sxs-lookup"><span data-stu-id="50f8a-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="50f8a-448">Поздравляем с программированием!</span><span class="sxs-lookup"><span data-stu-id="50f8a-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="50f8a-449">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="50f8a-449">Further Reading</span></span>

<span data-ttu-id="50f8a-450">Дополнительные сведения о разделах, обсуждаемых в этом руководстве, см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="50f8a-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="50f8a-451">Всегда устанавливайте `applicationName` свойство при настройке членства ASP.NET 2,0 и других поставщиков</span><span class="sxs-lookup"><span data-stu-id="50f8a-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="50f8a-452">Настройка ASP.NET 2,0 Службы приложений для использования SQL Server 2000 или SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="50f8a-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="50f8a-453">Скачать SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="50f8a-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="50f8a-454">Изучение членства, ролей и профиля ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="50f8a-454">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="50f8a-455">`<add>`Элемент для поставщиков для членства</span><span class="sxs-lookup"><span data-stu-id="50f8a-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="50f8a-456">`<membership>`Элемент</span><span class="sxs-lookup"><span data-stu-id="50f8a-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="50f8a-457">`<providers>`Элемент для членства</span><span class="sxs-lookup"><span data-stu-id="50f8a-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="50f8a-458">Использование `<clear />` при добавлении поставщиков</span><span class="sxs-lookup"><span data-stu-id="50f8a-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="50f8a-459">Работа непосредственно с `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="50f8a-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="50f8a-460">Видеообучение по темам, содержащимся в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="50f8a-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="50f8a-461">Общие сведения о членствах ASP.NET</span><span class="sxs-lookup"><span data-stu-id="50f8a-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="50f8a-462">Настройка SQL для работы со схемами членства</span><span class="sxs-lookup"><span data-stu-id="50f8a-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="50f8a-463">Изменение настроек членства в схеме членства по умолчанию</span><span class="sxs-lookup"><span data-stu-id="50f8a-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="50f8a-464">Об авторе</span><span class="sxs-lookup"><span data-stu-id="50f8a-464">About the Author</span></span>

<span data-ttu-id="50f8a-465">Скотт Митчелл, автор нескольких книг по ASP/ASP. NET и основатель 4GuysFromRolla.com, работал с веб-технологиями Майкрософт с 1998.</span><span class="sxs-lookup"><span data-stu-id="50f8a-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="50f8a-466">Скотт работает как независимый консультант, преподаватель и модуль записи.</span><span class="sxs-lookup"><span data-stu-id="50f8a-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="50f8a-467">Его последняя книга — *[Sams обучать себя ASP.NET 2,0 за 24 часа](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="50f8a-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="50f8a-468">Скотт можно связаться по адресу [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) или через его блог по адресу [http://ScottOnWriting.NET](http://scottonwriting.net/) .</span><span class="sxs-lookup"><span data-stu-id="50f8a-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="50f8a-469">Специальная благодарность</span><span class="sxs-lookup"><span data-stu-id="50f8a-469">Special Thanks To</span></span>

<span data-ttu-id="50f8a-470">Эта серия руководств была рассмотрена многими полезными рецензентами.</span><span class="sxs-lookup"><span data-stu-id="50f8a-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="50f8a-471">Специалист по интересу для этого руководства был Аликжа Мазиарз.</span><span class="sxs-lookup"><span data-stu-id="50f8a-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="50f8a-472">Хотите ознакомиться с моими будущими статьями MSDN?</span><span class="sxs-lookup"><span data-stu-id="50f8a-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="50f8a-473">Если это так, удалите строку в [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com) .</span><span class="sxs-lookup"><span data-stu-id="50f8a-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="50f8a-474">Вперед</span><span class="sxs-lookup"><span data-stu-id="50f8a-474">Next</span></span>](creating-user-accounts-cs.md)
