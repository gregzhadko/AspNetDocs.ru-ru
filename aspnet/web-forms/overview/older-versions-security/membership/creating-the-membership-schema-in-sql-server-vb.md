---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Создание схемы членства в SQL Server (VB) | Документация Майкрософт
author: rick-anderson
description: Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования SqlMembershipProvider. Далее мы работаем...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 3596e85f6f1e36e046011212479128229be24201
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2020
ms.locfileid: "89045082"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a>Создание схемы членства в SQL Server (VB)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) или [скачать PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)

> Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования SqlMembershipProvider. После этого мы рассмотрим ключевые таблицы в схеме и обсудим их назначение и важность. В этом руководстве рассказывается о том, как сообщить ASP.NET приложению, какой поставщик должен использовать платформа членства.

## <a name="introduction"></a>Введение

В предыдущих двух учебниках рассматривалась проверка подлинности с помощью форм для идентификации посетителей веб-сайта. Платформа проверки подлинности с помощью форм упрощает для разработчиков регистрацию пользователя на веб-сайте и запоминать их на страницах, используя билеты проверки подлинности. `FormsAuthentication`Класс включает методы для создания билета и его добавления в файлы cookie посетителя. `FormsAuthenticationModule`Проверяет все входящие запросы и, для тех, у которых есть действительный билет проверки подлинности, создает и связывает `GenericPrincipal` `FormsIdentity` объект и с текущим запросом. Проверка подлинности с помощью форм — это просто механизм предоставления билета проверки подлинности посетителю при входе в систему и, при последующих запросах, анализ этого билета для определения удостоверения пользователя. Чтобы веб-приложение поддерживало учетные записи пользователей, нам по-прежнему необходимо реализовать хранилище пользователей и добавить функции для проверки учетных данных, регистрации новых пользователей и множества других задач, связанных с учетной записью пользователя.

До ASP.NET 2,0 разработчики были в процессе реализации всех этих задач, связанных с учетной записью пользователя. К счастью, команда ASP.NET распознал этот недостаток и представил инфраструктуру членства с ASP.NET 2,0. Платформа членства — это набор классов в .NET Framework, предоставляющих программный интерфейс для выполнения основных задач, связанных с учетной записью пользователя. Эта платформа построена на основе [модели поставщика](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), которая позволяет разработчикам подключать пользовательскую реализацию к стандартизированному API.

Как обсуждалось в <a id="Tutorial1"></a> учебнике [*основы безопасности и поддержка ASP.NET*](../introduction/security-basics-and-asp-net-support-vb.md) , .NET Framework поставляется с двумя встроенными поставщиками членства: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) и [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) . Как следует из названия, `SqlMembershipProvider` компонент использует базу данных Microsoft SQL Server в качестве хранилища пользователя. Чтобы использовать этот поставщик в приложении, необходимо сообщить поставщику, какую базу данных использовать в качестве хранилища. Как вы, возможно, представим, что `SqlMembershipProvider` база данных хранилища пользователя должна иметь определенные таблицы, представления и хранимые процедуры базы данных. Необходимо добавить эту ожидаемую схему в выбранную базу данных.

Этот учебник начинается с изучения методов добавления необходимой схемы в базу данных для использования `SqlMembershipProvider` . После этого мы рассмотрим ключевые таблицы в схеме и обсудим их назначение и важность. В этом руководстве рассказывается о том, как сообщить ASP.NET приложению, какой поставщик должен использовать платформа членства.

Приступим к работе!

## <a name="step-1-deciding-where-to-place-the-user-store"></a>Шаг 1. Выбор места размещения хранилища пользователей

Данные приложения ASP.NET обычно хранятся в нескольких таблицах базы данных. При реализации `SqlMembershipProvider` схемы базы данных необходимо решить, следует ли поместить схему членства в ту же базу данных, что и данные приложения, или в альтернативную базу данных.

Я рекомендую найти схему членства в той же базе данных, что и данные приложения, по следующим причинам:

- **Удобство сопровождения**  приложение, данные которого инкапсулируются в одной базе данных, проще понимать, обслуживать и развертывать, чем приложение с двумя отдельными базами данных.
- **Реляционная целостность**  путем поиска связанных с членством таблиц в той же базе данных, что и таблицы приложения, можно установить [ограничения внешнего ключа](http://en.wikipedia.org/wiki/Foreign_key) между первичными ключами в связанных с членством таблицах и связанных таблицах приложений.

Отделение хранилища пользователей от данных приложений к отдельным базам данных имеет смысл только в том случае, если у вас несколько приложений, каждый из которых использует отдельные базы данных, но им нужно предоставить общий доступ к хранилищу пользователей.

### <a name="creating-a-database"></a>Создание базы данных

Приложение, которое мы создали с момента создания второго руководства, еще не требовало базы данных. Однако для магазина пользователя нам нужно еще одно. Давайте создадим его, а затем добавим к нему схему, требуемую для `SqlMembershipProvider` поставщика (см. шаг 2).

> [!NOTE]
> В рамках этой серии руководств мы будем использовать базу данных [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) для хранения таблиц приложений и `SqlMembershipProvider` схемы. Это решение было принято по двум причинам: во-первых, это связано с тем, что выпуск Express Edition является самой доступной для чтения версией SQL Server 2005; Во-вторых, SQL Server 2005, экспресс-выпуск базы данных могут быть помещены непосредственно в `App_Data` папку Web Application, что делает ее очень просто, чтобы упаковать базу данных и веб-приложение в один сжатый файл и повторно развернуть его без каких-либо специальных инструкций по настройке или параметров конфигурации. Если вы предпочитаете использовать версию SQL Server, отличную от Express Edition, вы можете бесплатно воспользоваться этой версией. Эти шаги практически идентичны. `SqlMembershipProvider`Схема будет работать с любой версией Microsoft SQL Server 2000 и выше.

В обозреватель решений щелкните правой кнопкой мыши `App_Data` папку и выберите Добавить новый элемент. (Если `App_Data` Папка в проекте не отображается, щелкните проект правой кнопкой мыши в Обозреватель решений, выберите Добавить папку ASP.NET и выберите `App_Data` .) В диалоговом окне Добавление нового элемента выберите, чтобы добавить новую базу данных SQL с именем `SecurityTutorials.mdf` . В этом учебнике мы добавим `SqlMembershipProvider` схему в эту базу данных. в последующих руководствах мы создадим дополнительные таблицы для записи данных приложения.

[![Добавление новой базы данных SQL с именем Секурититуториалс. mdf в папку App_Data](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)

**Рис. 1**. Добавление новой базы данных SQL с именем `SecurityTutorials.mdf` Database в `App_Data` папку ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))

Добавление базы данных в `App_Data` папку автоматически включает ее в представление Обозреватель базы данных. (В версии Visual Studio, отличной от Express Edition, обозреватель базы данных называется обозреватель сервера.) Перейдите к обозреватель базы данных и разверните только что добавленную `SecurityTutorials` базу данных. Если на экране не отображается обозреватель базы данных, перейдите в меню Вид и выберите пункт обозреватель базы данных или нажмите клавиши CTRL + ALT + S. Как показано на рис. 2, `SecurityTutorials` база данных пуста — она не содержит ни таблиц, ни представлений, ни хранимых процедур.

[![База данных Секурититуториалс сейчас пуста](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)

**Рис. 2**. `SecurityTutorials` база данных в данный момент пуста ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a>Шаг 2. добавление `SqlMembershipProvider` схемы в базу данных

`SqlMembershipProvider`Для необходимо установить определенный набор таблиц, представлений и хранимых процедур в базу данных хранилища пользователей. Эти необходимые объекты базы данных можно добавить с помощью [ `aspnet_regsql.exe` средства](https://msdn.microsoft.com/library/ms229862.aspx). Этот файл находится в `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` папке.

> [!NOTE]
> `aspnet_regsql.exe`Средство предлагает как функциональность командной строки, так и графический пользовательский интерфейс. Графический интерфейс является более удобным для пользователя, и он будет рассмотрен в этом руководстве. Интерфейс командной строки полезен в тех случаях, когда добавление `SqlMembershipProvider` схемы необходимо автоматизировать, например в скриптах сборки или в сценариях автоматического тестирования.

`aspnet_regsql.exe`Средство используется для добавления или удаления *служб приложений ASP.NET* в указанной базе данных SQL Server. Службы приложений ASP.NET охватывают схемы для `SqlMembershipProvider` и `SqlRoleProvider` , а также схемы для поставщиков на основе SQL для других платформ ASP.NET 2,0. В средство необходимо предоставить два бита информации `aspnet_regsql.exe` :

- Нужно ли добавлять или удалять службы приложений;
- База данных, из которой будет добавлена или удалена схема служб приложений

При запросе использования базы данных `aspnet_regsql.exe` средство предложит указать имя сервера, на котором находится база данных, учетные данные безопасности для подключения к базе данных и имя базы данных. Если вы используете SQL Server, отличный от Express, эти сведения уже должны быть знакомы, так как это те же сведения, которые необходимо предоставить через строку подключения при работе с базой данных через веб-страницу ASP.NET. Однако определение имени сервера и базы данных при использовании базы данных SQL Server 2005, экспресс-выпуск в `App_Data` папке, тем не менее, является более сложным.

В следующем разделе рассматривается простой способ указания имени сервера и базы данных для SQL Server 2005, экспресс-выпуск базы данных в `App_Data` папке. Если вы не используете SQL Server 2005, экспресс-выпуск вы можете перейти к разделу Установка Службы приложений.

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a>Определение имени сервера и базы данных для SQL Server 2005, экспресс-выпуск базы данных в `App_Data` папке

Чтобы использовать `aspnet_regsql.exe` средство, необходимо знать имена сервера и базы данных. Имя сервера — `localhost\InstanceName` . Скорее всего, *instanceName* имеет значение `SQLExpress` . Однако если вы установили SQL Server 2005, экспресс-выпуск вручную (то есть не устанавливали его автоматически при установке Visual Studio), возможно, выбрано другое имя экземпляра.

Имя базы данных немного сложнее для определения. Базы данных в `App_Data` папке обычно имеют имя базы данных, содержащее [глобальный уникальный идентификатор](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) вместе с путем к файлу базы данных. Чтобы добавить схему служб приложений с помощью, необходимо определить это имя базы данных `aspnet_regsql.exe` .

Самый простой способ выяснить имя базы данных — это проверить ее с помощью SQL Server Management Studio. SQL Server Management Studio предоставляет графический интерфейс для управления базами данных SQL Server 2005, но он не поставляется с выпуском Express SQL Server 2005. Хорошая новость заключается в том, что [вы можете скачать](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) бесплатную экспресс-версию SQL Server Management Studio.

> [!NOTE]
> Если на рабочем столе установлена версия SQL Server 2005, не являющейся Express Edition, скорее всего, будет установлена полная версия Management Studio. Можно использовать полную версию для определения имени базы данных, выполнив те же действия, что описаны ниже для выпуска Express.

Сначала закройте Visual Studio, чтобы убедиться, что все блокировки, накладываемые Visual Studio на файл базы данных, закрыты. Затем запустите SQL Server Management Studio и подключитесь к `localhost\InstanceName` базе данных для SQL Server 2005, Экспресс-выпуск. Как отмечалось ранее, скорее всего, имя экземпляра — `SQLExpress` . Для параметра Проверка подлинности выберите Проверка подлинности Windows.

[![Подключение к экземпляру SQL Server 2005, экспресс-выпуск](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)

**Рис. 3**. подключение к экземпляру SQL Server 2005, Экспресс-выпуск ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))

После подключения к экземпляру SQL Server 2005, экспресс-выпуск Management Studio отображает папки для баз данных, параметры безопасности, объекты сервера и т. д. Если развернуть вкладку базы данных, вы увидите, что `SecurityTutorials.mdf` база данных *не* зарегистрирована в экземпляре базы данных — сначала необходимо присоединить базу данных.

Щелкните правой кнопкой мыши папку базы данных и выберите команду Присоединить в контекстном меню. Отобразится диалоговое окно Присоединение баз данных. Здесь нажмите кнопку Добавить, перейдите к `SecurityTutorials.mdf` базе данных и нажмите кнопку ОК. На рис. 4 показано диалоговое окно Присоединение баз данных после `SecurityTutorials.mdf` выбора базы данных. На рис. 5 показан обозреватель объектов Management Studio после успешного подключения базы данных.

[![Присоединение базы данных Секурититуториалс. mdf](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)

**Рис. 4**. присоединение `SecurityTutorials.mdf` базы данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))

[![База данных Секурититуториалс. mdf появится в папке базы данных](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)

**Рис. 5**. `SecurityTutorials.mdf` база данных отображается в папке базы данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))

Как показано на рис. 5, `SecurityTutorials.mdf` база данных имеет довольно абструсе имя. Давайте изменим его на более запоминающееся (и проще в вводе) имени. Щелкните правой кнопкой мыши базу данных, выберите команду Переименовать в контекстном меню и переименуйте ее `SecurityTutorialsDatabase` . При этом имя файла не изменяется, просто имя, используемое базой данных для идентификации себя в SQL Server.

[![Переименование базы данных в Секурититуториалсдатабасе](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)

**Рис. 6**. Переименование базы данных в `SecurityTutorialsDatabase` ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))

На этом этапе мы понимаем имена сервера и базы данных для `SecurityTutorials.mdf` файла базы данных: `localhost\InstanceName` и `SecurityTutorialsDatabase` соответственно. Теперь все готово для установки служб приложений с помощью `aspnet_regsql.exe` средства.

### <a name="installing-the-application-services"></a>Установка Службы приложений

Чтобы запустить `aspnet_regsql.exe` средство, перейдите в меню "Пуск" и выберите команду "выполнить". Введите `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` в текстовое поле и нажмите кнопку ОК. Кроме того, можно воспользоваться проводником Windows, чтобы выполнить детализацию до соответствующей папки и дважды щелкнуть `aspnet_regsql.exe` файл. Один из этих подходов выдает одинаковые результаты.

Запуск `aspnet_regsql.exe` средства без аргументов командной строки запускает графический пользовательский интерфейс мастера установки SQL Server ASP.NET. Мастер упрощает добавление или удаление служб приложений ASP.NET в указанной базе данных. На первом экране мастера, показанном на рис. 7, описывается назначение этого средства.

[![Добавление схемы членства с помощью мастера установки SQL Server ASP.NET](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)

**Рис. 7**. Использование мастера установки ASP.NET SQL Server для добавления схемы членства ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))

На втором шаге мастера запрашивается, нужно ли добавить службы приложений или удалить их. Так как мы хотим добавить таблицы, представления и хранимые процедуры, необходимые для `SqlMembershipProvider` , выберите параметр настроить SQL Server для служб приложений. Позже, если вы хотите удалить эту схему из базы данных, перезапустите этот мастер, а вместо этого выберите параметр удалить сведения о службах приложений из существующей базы данных.

[![Выберите параметр настроить SQL Server для Службы приложений](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)

**Рис. 8**. Выбор параметра настройки SQL Server для службы приложений ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))

На третьем шаге запрашиваются сведения о базе данных: имя сервера, сведения о проверке подлинности и имя базы данных. Если вы уже выполнили инструкции в этом учебнике и добавили `SecurityTutorials.mdf` базу данных в `App_Data` , подключили ее к и `localhost\InstanceName` переименовали в `SecurityTutorialsDatabase` , используйте следующие значения:

- Сервер: `localhost\InstanceName`
- Проверка подлинности Windows
- СУБД `SecurityTutorialsDatabase`

[![Введите сведения о базе данных](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)

**Рис. 9**. Ввод сведений о базе данных ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))

После ввода сведений о базе данных нажмите кнопку Далее. На последнем шаге выполняется сводка действий, которые будут выполнены. Нажмите кнопку Далее, чтобы установить службы приложений и завершить работу мастера.

> [!NOTE]
> Если вы использовали Management Studio для присоединения базы данных и переименования файла базы данных, не забудьте отсоединить базу данных и закрыть Management Studio перед повторной попыткой открытия Visual Studio. Чтобы отсоединить `SecurityTutorialsDatabase` базу данных, щелкните имя базы данных правой кнопкой мыши и в меню задачи выберите пункт Отсоединить.

После завершения работы мастера вернитесь в Visual Studio и перейдите к обозреватель базы данных. Разверните папку Таблицы. Вы увидите ряд таблиц, имена которых начинаются с префикса `aspnet_` . Аналогично, в папках views и хранимые процедуры можно найти разнообразные представления и хранимые процедуры. Эти объекты базы данных составляют схему служб приложений. В шаге 3 будут рассмотрены объекты базы данных, относящиеся к членству и ролям.

[![В базу данных добавлены разнообразные таблицы, представления и хранимые процедуры.](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)

**Рис. 10**. в базу данных добавлены разнообразные таблицы, представления и хранимые процедуры ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))

> [!NOTE]
> `aspnet_regsql.exe`Графический пользовательский интерфейс средства устанавливает всю схему служб приложений. Но при выполнении `aspnet_regsql.exe` из командной строки можно указать, какие конкретные компоненты служб приложений следует установить (или удалить). Таким образом, если нужно добавить только таблицы, представления и хранимые процедуры, необходимые для `SqlMembershipProvider` `SqlRoleProvider` поставщиков и, запустите `aspnet_regsql.exe` из командной строки. Кроме того, можно вручную запустить соответствующее подмножество скриптов создания T-SQL, используемых `aspnet_regsql.exe` . Эти скрипты находятся в `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` папке с такими именами `InstallCommon.sql` , как,,,, `InstallMembership.sql` `InstallRoles.sql` `InstallProfile.sql` `InstallSqlState.sql` и т. д.

На этом этапе мы создали объекты базы данных, необходимые для `SqlMembershipProvider` . Тем не менее нам по-прежнему нужно указать платформе членства, что она должна использовать `SqlMembershipProvider` (и, скажем, `ActiveDirectoryMembershipProvider` ) и что компонент `SqlMembershipProvider` должен использовать `SecurityTutorials` базу данных. Мы рассмотрим, как указать, какой поставщик использовать, и как настроить параметры выбранного поставщика на шаге 4. Но сначала давайте более подробно рассмотрим объекты базы данных, которые были только что созданы.

## <a name="step-3-a-look-at-the-schemas-core-tables"></a>Шаг 3. Просмотр основных таблиц схемы

При работе с платформами членства и ролей в приложении ASP.NET сведения о реализации инкапсулируются поставщиком. В следующих учебных курсах мы будем взаимодействовать с этими платформами с помощью `Membership` классов .NET Framework и `Roles` . При использовании этих API-интерфейсов высокого уровня не нужно заботиться о низкоуровневых уровнях, таких как выполняемые запросы или таблицы, измененные с помощью `SqlMembershipProvider` и `SqlRoleProvider` .

Учитывая это, можно было бы уверенно использовать платформы членства и ролей без изучения схемы базы данных, созданной на шаге 2. Однако при создании таблиц для хранения данных приложения может потребоваться создать сущности, связанные с пользователями или ролями. `SqlMembershipProvider` `SqlRoleProvider` При установке ограничений внешнего ключа между таблицами данных приложения и таблицами, созданными на шаге 2, полезно иметь представление о схемах и. Более того, в некоторых редких случаях может потребоваться взаимодействовать с хранилищами пользователей и ролей непосредственно на уровне базы данных (вместо `Membership` `Roles` классов или).

### <a name="partitioning-the-user-store-into-applications"></a>Разделение пользовательского хранилища на приложения

Структуры членства и ролей спроектированы таким образом, что один пользователь и хранилище ролей могут совместно использоваться разными приложениями. Приложение ASP.NET, использующее платформы членства или ролей, должно указывать, какую секцию приложения следует использовать. Вкратце, несколько веб-приложений могут использовать одни и те же хранилища пользователей и ролей. На рис. 11 показаны хранилища пользователей и ролей, разделенные на три приложения: Хрсите, Кустомерсите и Салессите. Каждый из этих трех веб-приложений имеет собственные уникальные пользователи и роли, но все они физически хранят свои учетные записи и сведения о ролях в одних и тех же таблицах базы данных.

[![Учетные записи пользователей могут быть разделены между несколькими приложениями.](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)

**Рис. 11**. учетные записи пользователей могут быть разделены между несколькими приложениями ([щелкните, чтобы просмотреть изображение с полным размером](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))

`aspnet_Applications`Таблица определяет эти секции. Каждое приложение, использующее базу данных для хранения данных учетной записи пользователя, представлено строкой в этой таблице. `aspnet_Applications`Таблица состоит из четырех столбцов: `ApplicationId` , `ApplicationName` , `LoweredApplicationName` и `Description` .`ApplicationId` имеет тип [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) и является первичным ключом таблицы; `ApplicationName` предоставляет уникальное понятное имя для каждого приложения.

Другие таблицы, относящиеся к членству и ролям, связываются с `ApplicationId` полем в `aspnet_Applications` . Например, `aspnet_Users` Таблица, содержащая запись для каждой учетной записи пользователя, имеет `ApplicationId` поле внешнего ключа, Дитто для `aspnet_Roles` таблицы. В `ApplicationId` поле в этих таблицах указывается Секция приложения, к которой принадлежит учетная запись пользователя или роль.

### <a name="storing-user-account-information"></a>Хранение сведений об учетной записи пользователя

Сведения об учетной записи пользователя размещены в двух таблицах: `aspnet_Users` и `aspnet_Membership` . `aspnet_Users`Таблица содержит поля, в которых хранятся сведения о наиболее ценных учетных записях пользователей. Ниже перечислены три наиболее подсоответствующие столбцы.

- `UserId`
- `UserName`
- `ApplicationId`

`UserId` является первичным ключом (и типом `uniqueidentifier` ). `UserName` имеет тип `nvarchar(256)` и, вместе с паролем, создает учетные данные пользователя. (Пароль пользователя хранится в `aspnet_Membership` таблице.) `ApplicationId` связывает учетную запись пользователя с определенным приложением в `aspnet_Applications` . Существует составное [ `UNIQUE` ограничение](https://msdn.microsoft.com/library/ms191166.aspx) для `UserName` `ApplicationId` столбцов и. Это гарантирует, что каждое имя пользователя уникально в данном приложении, но это позволит использовать его `UserName` в разных приложениях.

`aspnet_Membership`Таблица содержит дополнительные сведения об учетной записи пользователя, такие как пароль пользователя, адрес электронной почты, Дата и время последнего входа в систему и т. д. Между записями в таблицах и есть соответствие "один к одному `aspnet_Users` " `aspnet_Membership` . Эта связь обеспечивается `UserId` полем в `aspnet_Membership` , которое служит первичным ключом таблицы. Как и в `aspnet_Users` таблице, `aspnet_Membership` включает `ApplicationId` поле, которое связывает эту информацию с определенной секцией приложения.

### <a name="securing-passwords"></a>Защита паролей

Сведения о пароле хранятся в `aspnet_Membership` таблице. `SqlMembershipProvider`Позволяет хранить пароли в базе данных с помощью одного из следующих трех методов:

- **Clear** — пароль хранится в базе данных в виде обычного текста. Я настоятельно не хочу использовать этот параметр. Если база данных скомпрометирована, то злоумышленник, который находит заднюю дверцу или недовольным сотрудника, имеющего доступ к базе данных, может использовать все учетные данные одного пользователя.
- **Хэшированные** — пароли хэшируются с использованием одностороннего алгоритма хэширования и случайным образом сформированным расширяющим значением. Это хэшированное значение (вместе с Salt) хранится в базе данных.
- **Зашифровано** — зашифрованная версия пароля хранится в базе данных.

Используемый способ хранения паролей зависит от параметров, `SqlMembershipProvider` указанных в `Web.config` . Мы рассмотрим настройку `SqlMembershipProvider` параметров на шаге 4. Поведение по умолчанию — хранить хэш пароля.

Столбцы, отвечающие за хранение пароля `Password` ,:, `PasswordFormat` и `PasswordSalt` . `PasswordFormat` поле типа `int` , значение которого указывает метод, используемый для хранения пароля: 0 для Clear; 1 — для хэширования; 2 — для шифрования. `PasswordSalt` присваивается случайным образом сформированная строка независимо от используемого метода хранения паролей. значение используется `PasswordSalt` только при вычислении хэша пароля. Наконец, `Password` столбец содержит фактические данные пароля, то есть пароль в виде обычного текста, хэш пароля или зашифрованный пароль.

В таблице 1 показано, как могут выглядеть эти три столбца для различных методов хранения при хранении пароля MySecret! .

| **Метод хранения &lt; \_ O3A \_ p/&gt;** | **&lt; \_ O3A пароля \_ p/&gt;** | **Пассвордформат &lt; \_ O3A \_ p/&gt;** | **Пассвордсалт &lt; \_ O3A \_ p/&gt;** |
| --- | --- | --- | --- |
| Clear | MySecret! | 0 | tTnkPlesqissc2y2SMEygA = = |
| Хэшируется | 2oXm6sZHWbTHFgjgkGQsc2Ec9ZM = | 1 | wFgjUfhdUFOCKQiI61vtiQ = = |
| С шифрованием | 62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp | 2 | Лсрзгс/AA/Окаксглхжнбв = = |

**Таблица 1**. примеры значений для полей, связанных с паролем, при хранении пароля mysecret!

> [!NOTE]
> Конкретный алгоритм шифрования или хэширования, используемый объектом, `SqlMembershipProvider` определяется параметрами в `<machineKey>` элементе. Мы обсуждали этот элемент конфигурации на шаге 3 <a id="Tutorial3"></a> учебника [*Настройка проверки подлинности с помощью форм и дополнительные разделы*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) .

### <a name="storing-roles-and-role-associations"></a>Хранение ролей и сопоставлений ролей

Платформа ролей позволяет разработчикам определять набор ролей и указывать, к каким ролям относятся пользователи. Эти сведения фиксируются в базе данных с помощью двух таблиц: `aspnet_Roles` и `aspnet_UsersInRoles` . Каждая запись в `aspnet_Roles` таблице представляет роль для конкретного приложения. Подобно `aspnet_Users` таблице, `aspnet_Roles` таблица имеет три столбца, которые относятся к нашему обсуждению:

- `RoleId`
- `RoleName`
- `ApplicationId`

`RoleId` является первичным ключом (и типом `uniqueidentifier` ). `RoleName` имеет тип `nvarchar(256)`. И `ApplicationId` связывает учетную запись пользователя с определенным приложением в `aspnet_Applications` . Существует составное `UNIQUE` ограничение для `RoleName` `ApplicationId` столбцов и, гарантирующих уникальность имени каждой роли в данном приложении.

`aspnet_UsersInRoles`Таблица служит сопоставлением между пользователями и ролями. Существует только два столбца — `UserId` и `RoleId` вместе они составляют составной первичный ключ.

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a>Шаг 4. Указание поставщика и настройка его параметров

Все платформы, поддерживающие модель поставщика (например, структуры членства и ролей), не имеют самих деталей реализации, а делегируют ответственность за класс поставщика. В случае с платформой членства `Membership` класс определяет API для управления учетными записями пользователей, но не взаимодействует напрямую с каким-либо хранилищем пользователя. Вместо этого `Membership` методы класса передают запрос настроенному поставщику — мы будем использовать `SqlMembershipProvider` . Когда мы вызываем один из методов в `Membership` классе, как платформа членства знает, как делегировать вызов функции `SqlMembershipProvider` ?

`Membership`Класс имеет [ `Providers` свойство](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , содержащее ссылку на все зарегистрированные классы поставщиков, доступные для использования платформой членства. Каждый зарегистрированный поставщик имеет связанное имя и тип. Имя предлагает человеку удобный способ ссылки на конкретный поставщик в `Providers` коллекции, а тип определяет класс поставщика. Кроме того, каждый зарегистрированный поставщик может включать параметры конфигурации. Параметры конфигурации для инфраструктуры членства включают `PasswordFormat` и `requiresUniqueEmail` , и, кроме многих других. Полный список параметров конфигурации, используемых, см. в табл. 2 `SqlMembershipProvider` .

`Providers`Содержимое свойства задается с помощью параметров конфигурации веб-приложения. По умолчанию у всех веб-приложений есть поставщик с именем `AspNetSqlMembershipProvider` типа `SqlMembershipProvider` . Этот поставщик членства по умолчанию регистрируется в `machine.config` (расположенном в `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG` ):

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

Как показано в разметке выше, [ `<membership>` элемент](https://msdn.microsoft.com/library/1b9hw62f.aspx) определяет параметры конфигурации для платформы членства, а [ `<providers>` дочерний элемент](https://msdn.microsoft.com/library/6d4936ht.aspx) указывает зарегистрированных поставщиков. Поставщики можно добавлять или удалять с помощью [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) элементов или [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) ; Используйте элемент, [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) чтобы удалить все зарегистрированные в настоящее время поставщики. Как показано в приведенной выше разметке, `machine.config` Добавляет поставщик с именем `AspNetSqlMembershipProvider` типа `SqlMembershipProvider` .

В дополнение к `name` `type` атрибутам и `<add>` элемент содержит атрибуты, определяющие значения для различных параметров настройки. В табл. 2 перечислены доступные `SqlMembershipProvider` Параметры конфигурации, а также их описание.

> [!NOTE]
> Все значения по умолчанию, указанные в таблице 2, относятся к значениям по умолчанию, определенным в `SqlMembershipProvider` классе. Обратите внимание, что не все параметры конфигурации в `AspNetSqlMembershipProvider` соответствуют значениям по умолчанию для `SqlMembershipProvider` класса. Например, если значение не указано в поставщике членства, `requiresUniqueEmail` по умолчанию устанавливается значение true. Однако `AspNetSqlMembershipProvider` переопределяет это значение по умолчанию, явно указав значение `false` .

| **Настройка &lt; \_ O3A \_ p/&gt;** | **Описание &lt; \_ O3A \_ p/&gt;** |
| --- | --- |
| `ApplicationName` | Вспомним, что платформа членства позволяет секционировать единое хранилище пользователей в нескольких приложениях. Этот параметр указывает имя секции приложения, используемой поставщиком членства. Если это значение явно не указано, во время выполнения задается значение виртуального корневого пути приложения. |
| `commandTimeout` | Указывает значение времени ожидания команды SQL (в секундах). Значение по умолчанию — 30. |
| `connectionStringName` | Имя строки подключения в `<connectionStrings>` элементе, используемом для подключения к базе данных хранилища пользователей. Это значение обязательно. |
| `description` | Предоставляет удобное описание зарегистрированного поставщика. |
| `enablePasswordRetrieval` | Указывает, могут ли пользователи извлекать забытый пароль. Значение по умолчанию — `false`. |
| `enablePasswordReset` | Указывает, разрешено ли пользователям сбрасывать свой пароль. По умолчанию — `true`. |
| `maxInvalidPasswordAttempts` | Максимальное количество неудачных попыток входа, которые могут произойти для данного пользователя в течение указанного периода `passwordAttemptWindow` до блокировки пользователя. Значение по умолчанию — 5. |
| `minRequiredNonalphanumericCharacters` | Минимальное число символов, отличных от буквенно-цифровых, которые должны присутствовать в пароле пользователя. Это значение должно находиться в диапазоне от 0 до 128; значение по умолчанию — 1. |
| `minRequiredPasswordLength` | Минимальное число символов, необходимых в пароле. Это значение должно находиться в диапазоне от 0 до 128; значение по умолчанию — 7. |
| `name` | Имя зарегистрированного поставщика. Это значение обязательно. |
| `passwordAttemptWindow` | Количество минут, в течение которых отправляются неудачные попытки входа. Если пользователь вводит недопустимые учетные данные входа `maxInvalidPasswordAttempts` в указанное окно, они будут заблокированы. Значение по умолчанию — 10. |
| `PasswordFormat` | Формат хранилища паролей: `Clear` , `Hashed` или `Encrypted` . Значение по умолчанию — `Hashed`. |
| `passwordStrengthRegularExpression` | Это регулярное выражение используется для проверки силы выбранного пароля пользователя при создании новой учетной записи или при смене пароля. Значение по умолчанию — пустая строка. |
| `requiresQuestionAndAnswer` | Указывает, должен ли пользователь отвечать на свой контрольный вопрос при получении или сбросе пароля. Значение по умолчанию — `true`. |
| `requiresUniqueEmail` | Указывает, должны ли все учетные записи пользователей в заданном разделе приложения иметь уникальный адрес электронной почты. Значение по умолчанию — `true`. |
| `type` | Указывает тип поставщика. Это значение обязательно. |

**Таблица 2**. параметры членства и `SqlMembershipProvider` конфигурации

Кроме `AspNetSqlMembershipProvider` того, другие поставщики членства могут быть зарегистрированы на уровне приложения, добавляя подобную разметку к `Web.config` файлу.

> [!NOTE]
> Платформа ролей работает практически так же: зарегистрированный поставщик ролей по умолчанию в `machine.config` и зарегистрированные поставщики могут быть настроены отдельно для каждого приложения в `Web.config` . В следующем руководстве мы подробно рассмотрим платформу ролей и разметку конфигурации.

### <a name="customizing-thesqlmembershipprovidersettings"></a>Настройка `SqlMembershipProvider` параметров

Значение по умолчанию `SqlMembershipProvider` ( `AspNetSqlMembershipProvider` ) `connectionStringName` атрибута равно `LocalSqlServer` . Как и `AspNetSqlMembershipProvider` поставщик, имя строки подключения `LocalSqlServer` определяется в `machine.config` .

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

Как видите, эта строка подключения определяет базу данных SQL 2005 Express Edition, расположенную по адресу | DataDirectory | aspnetdb. mdf. Строка | DataDirectory | преобразуется во время выполнения, чтобы указывать на `~/App_Data/` каталог, поэтому путь к базе данных | Подкаталог DataDirectory | aspnetdb. mdf преобразуется в `~/App_Data` / `aspnet.mdf` .

Если в файле приложения не были указаны сведения о поставщике членства `Web.config` , приложение использует зарегистрированного поставщика членства по умолчанию `AspNetSqlMembershipProvider` . Если `~/App_Data/aspnet.mdf` база данных не существует, среда выполнения ASP.NET автоматически создаст ее и добавит схему служб приложений. Однако мы не хотим использовать `aspnet.mdf` базу данных. вместо этого мы хотим использовать `SecurityTutorials.mdf` базу данных, созданную на шаге 2. Это изменение можно выполнить одним из двух способов:

- <strong>Укажите значение для</strong> <strong>`LocalSqlServer`</strong> <strong>имя строки подключения в</strong> <strong>`Web.config`</strong> <strong>.</strong> Переписывая `LocalSqlServer` значение имени строки подключения в `Web.config` , можно использовать зарегистрированного поставщика членства по умолчанию ( `AspNetSqlMembershipProvider` ) и правильно работать с `SecurityTutorials.mdf` базой данных. Этот подход подходит, если вы используете содержимое с параметрами конфигурации, заданными параметром `AspNetSqlMembershipProvider` . Дополнительные сведения об этом методе см. в записи блога [Скотта Гатри (](https://weblogs.asp.net/scottgu/), [которая настраивает ASP.NET 2,0 Службы приложений для использования SQL Server 2000 или SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).
- <strong>Добавление нового зарегистрированного поставщика типа</strong> <strong>`SqlMembershipProvider`</strong> <strong>и настройте его</strong> <strong>`connectionStringName`</strong> <strong>параметр, указывающий</strong> <strong>`SecurityTutorials.mdf`</strong> на <strong>база данных.</strong> Этот подход полезен в сценариях, где необходимо настроить другие свойства конфигурации в дополнение к строке подключения к базе данных. В собственных проектах я всегда использую этот подход из-за его гибкости и удобочитаемости.

Прежде чем можно будет добавить новый зарегистрированный поставщик, ссылающийся на `SecurityTutorials.mdf` базу данных, сначала необходимо добавить соответствующее значение строки подключения в `<connectionStrings>` раздел `Web.config` . Следующая разметка добавляет новую строку подключения с именем `SecurityTutorialsConnectionString` , которая ссылается на SQL Server 2005, Экспресс-выпуск `SecurityTutorials.mdf` базу данных в `App_Data` папке.

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> При использовании альтернативного файла базы данных обновите строку подключения по мере необходимости. Дополнительные сведения о создании правильной строки подключения см. в разделе [connectionStrings.com](http://www.connectionstrings.com/).

Затем добавьте следующую разметку конфигурации членства в `Web.config` файл. Эта разметка регистрирует нового поставщика с именем `SecurityTutorialsSqlMembershipProvider` .

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

Помимо регистрации `SecurityTutorialsSqlMembershipProvider` поставщика, приведенная выше разметка определяет в `SecurityTutorialsSqlMembershipProvider` качестве поставщика по умолчанию (через `defaultProvider` атрибут в `<membership>` элементе). Вспомним, что инфраструктура членства может иметь несколько зарегистрированных поставщиков. Так как `AspNetSqlMembershipProvider` регистрируется в качестве первого поставщика в `machine.config` , он выступает в качестве поставщика по умолчанию, если не указано иное.

В настоящее время наше приложение имеет два зарегистрированных поставщика: `AspNetSqlMembershipProvider` и `SecurityTutorialsSqlMembershipProvider` . Однако перед регистрацией `SecurityTutorialsSqlMembershipProvider` поставщика можно было удалить все ранее зарегистрированные поставщики, добавив [ `<clear />` элемент](https://msdn.microsoft.com/library/t062y6yc.aspx) непосредственно перед нашим `<add>` элементом. Это приведет к очистке `AspNetSqlMembershipProvider` из списка зарегистрированных поставщиков, что означает, что `SecurityTutorialsSqlMembershipProvider` единственным зарегистрированным поставщиком членства является. Если мы использовали такой подход, не нужно помечать его `SecurityTutorialsSqlMembershipProvider` как поставщик по умолчанию, так как это единственный зарегистрированный поставщик членства. Дополнительные сведения об использовании см `<clear />` . в разделе [использование `<clear />` при добавлении поставщиков](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).

Обратите внимание, что `SecurityTutorialsSqlMembershipProvider` `connectionStringName` параметр имеет ссылку на только что добавленное `SecurityTutorialsConnectionString` имя строки подключения и `applicationName` для его параметра задано значение секурититуториалс. Кроме того, `requiresUniqueEmail` для параметра задано значение `true` . Все остальные параметры конфигурации идентичны значениям в `AspNetSqlMembershipProvider` . При желании вы можете настроить здесь любые изменения конфигурации. Например, можно усилить стойкость пароля, запросив два небуквенно-цифровых символа, а не один, или увеличить длину пароля до восьми символов, а не семь.

> [!NOTE]
> Вспомним, что платформа членства позволяет секционировать единое хранилище пользователей в нескольких приложениях. Параметр поставщика членства `applicationName` указывает, какое приложение использует поставщик при работе с хранилищем пользователей. Важно явно задать значение `applicationName` параметра конфигурации, так как если параметр `applicationName` не задан явно, он назначается виртуальному корневому каталогу веб-приложения во время выполнения. Это работает нормально, пока виртуальный корневой каталог приложения не изменится, но при перемещении приложения в другой путь этот `applicationName` параметр также изменится. В этом случае поставщик членства начнет работать с другой секцией приложения, чем использовалась ранее. Учетные записи пользователей, созданные до перемещения, будут находиться в разных разделах приложений, и эти пользователи больше не смогут войти на сайт. Более подробное обсуждение этой проблемы см. в разделе [всегда устанавливать `applicationName` свойство при настройке членства в ASP.NET 2,0 и других поставщиках](https://weblogs.asp.net/scottgu/443634).

## <a name="summary"></a>Сводка

На этом этапе у нас есть база данных с настроенными службами приложений ( `SecurityTutorials.mdf` ) и настроено веб-приложение, чтобы инфраструктура членства использовала `SecurityTutorialsSqlMembershipProvider` только что зарегистрированный поставщик. Этот зарегистрированный поставщик имеет тип `SqlMembershipProvider` и имеет свой `connectionStringName` набор для соответствующей строки подключения ( `SecurityTutorialsConnectionString` ), и ее `applicationName` значение явно задано.

Теперь мы готовы использовать платформу членства из нашего приложения. В следующем учебном курсе будет рассмотрено создание новых учетных записей пользователей. Далее мы рассмотрим проверку подлинности пользователей, выполнение авторизации на основе пользователей и хранение в базе данных дополнительных сведений, относящихся к пользователю.

Поздравляем с программированием!

### <a name="further-reading"></a>Дополнительные материалы

Дополнительные сведения о разделах, обсуждаемых в этом руководстве, см. в следующих ресурсах:

- [Всегда устанавливайте `applicationName` свойство при настройке членства ASP.NET 2,0 и других поставщиков](https://weblogs.asp.net/scottgu/443634)
- [Настройка ASP.NET 2,0 Службы приложений для использования SQL Server 2000 или SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [Скачать SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [Изучение членства, ролей и профиля ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [`<add>`Элемент для поставщиков для членства](https://msdn.microsoft.com/library/whae3t94.aspx)
- [`<membership>`Элемент](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [`<providers>`Элемент для членства](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [Использование `<clear />` при добавлении поставщиков](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [Работа непосредственно с `SqlMembershipProvider`](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a>Видеообучение по темам, содержащимся в этом руководстве

- [Общие сведения о членствах ASP.NET](../../../videos/authentication/understanding-aspnet-memberships.md)
- [Настройка SQL для работы со схемами членства](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [Изменение настроек членства в схеме членства по умолчанию](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a>Об авторе

Скотт Митчелл, автор нескольких книг по ASP/ASP. NET и основатель 4GuysFromRolla.com, работал с веб-технологиями Майкрософт с 1998. Скотт работает как независимый консультант, преподаватель и модуль записи. Его последняя книга — *[Sams обучать себя ASP.NET 2,0 за 24 часа](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*. Скотт можно связаться по адресу [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) или через его блог по адресу [http://ScottOnWriting.NET](http://scottonwriting.net/) .

### <a name="special-thanks-to"></a>Специальная благодарность

Эта серия руководств была рассмотрена многими полезными рецензентами. Специалист по интересу для этого руководства был Аликжа Мазиарз. Хотите ознакомиться с моими будущими статьями MSDN? Если это так, удалите строку в [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) .

> [!div class="step-by-step"]
> [Назад](storing-additional-user-information-cs.md)
> [Вперед](creating-user-accounts-vb.md)
