---
uid: web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
title: Обзор проверки подлинности форм (C#) | Документация Майкрософт
author: rick-anderson
description: Создание пользовательских маршрутов
ms.author: riande
ms.date: 01/14/2008
ms.assetid: de2d65b9-aadc-42ba-abe1-4e87e66521a0
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
msc.type: authoredcontent
ms.openlocfilehash: 5bb3cf45e50e480d81a441280842c1eec58f4877
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59406877"
---
# <a name="an-overview-of-forms-authentication-c"></a><span data-ttu-id="b7bb4-103">Обзор проверки подлинности форм (C#)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-103">An Overview of Forms Authentication (C#)</span></span>

<span data-ttu-id="b7bb4-104">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b7bb4-105">[Скачать код](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) или [скачать PDF](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-105">[Download Code](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) or [Download PDF](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span></span>

> <span data-ttu-id="b7bb4-106">В этом руководстве мы приводит к отключению от простое обсуждений для реализации; в частности мы рассмотрим реализацию проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-106">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="b7bb4-107">Веб-приложение, мы начнем, создав в этом руководстве будут продолжать создаваться на основе в последующих руководствах описывается, как мы переходим от простых форм проверки подлинности к членства и ролей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-107">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>
> 
> <span data-ttu-id="b7bb4-108">См. Видеоролик, Дополнительные сведения по этой теме: [С помощью Basic проверки подлинности форм в ASP.NET](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-108">Please see this video for more information on this topic: [Using Basic Forms Authentication in ASP.NET](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span></span>


## <a name="introduction"></a><span data-ttu-id="b7bb4-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="b7bb4-109">Introduction</span></span>

<span data-ttu-id="b7bb4-110">В [предыдущем учебном курсе](security-basics-and-asp-net-support-cs.md) мы рассмотрели различные проверки подлинности, авторизации и пользователя учетной записи параметры, предоставляемые ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-110">In the [preceding tutorial](security-basics-and-asp-net-support-cs.md) we discussed the various authentication, authorization, and user account options provided by ASP.NET.</span></span> <span data-ttu-id="b7bb4-111">В этом руководстве мы приводит к отключению от простое обсуждений для реализации; в частности мы рассмотрим реализацию проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-111">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="b7bb4-112">Веб-приложение, мы начнем, создав в этом руководстве будут продолжать создаваться на основе в последующих руководствах описывается, как мы переходим от простых форм проверки подлинности к членства и ролей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-112">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>

<span data-ttu-id="b7bb4-113">Это руководство начинается с подробное описание рабочего процесса проверки подлинности форм, это тема, которую мы рассмотрели при изучении предыдущего руководства.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-113">This tutorial begins with an in-depth look at the forms authentication workflow, a topic we touched upon in the previous tutorial.</span></span> <span data-ttu-id="b7bb4-114">После этого мы создадим веб-сайта ASP.NET через который продемонстрировать основные понятия проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-114">Following that, we will create an ASP.NET website through which to demo the concepts of forms authentication.</span></span> <span data-ttu-id="b7bb4-115">Далее мы настроить сайт для проверки подлинности в формах, создание простой страницы входа и узнать, как определить, в коде, ли пользователь проверку подлинности, и если да, имя пользователя, они вошли в систему.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-115">Next, we will configure the site to use forms authentication, create a simple login page, and see how to determine, in code, whether a user is authenticated and, if so, the username they logged in with.</span></span>

<span data-ttu-id="b7bb4-116">Понимание того, форм, рабочего процесса проверки подлинности, включив в веб-приложения и создания страниц входа и выхода из системы являются все жизненно важных этапов построения приложения ASP.NET, который поддерживает учетные записи пользователей и проверяет подлинность пользователей через веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-116">Understanding the forms authentication workflow, enabling it in a web application, and creating the login and logoff pages are all vital steps in building an ASP.NET application that supports user accounts and authenticates users through a web page.</span></span> <span data-ttu-id="b7bb4-117">Из-за этого — и так как эти руководства созданы друг с другом - я рекомендую для работы с этим руководством в полном объеме, прежде чем переходить к следующему даже если вы уже имели возможности настройки проверки подлинности форм в прошлых проектов.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-117">Because of this – and because these tutorials build upon one another - I would encourage you to work through this tutorial in full before moving on to the next one even if you already have had experience configuring forms authentication in past projects.</span></span>

## <a name="understanding-the-forms-authentication-workflow"></a><span data-ttu-id="b7bb4-118">Основные сведения о рабочем процессе проверки подлинности форм</span><span class="sxs-lookup"><span data-stu-id="b7bb4-118">Understanding the Forms Authentication Workflow</span></span>

<span data-ttu-id="b7bb4-119">Когда среда выполнения ASP.NET обрабатывает запрос для ресурса ASP.NET, например страницы ASP.NET или веб-службы ASP.NET, запрос Возводит число событий во время его жизненного цикла.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-119">When the ASP.NET runtime processes a request for an ASP.NET resource, such as an ASP.NET page or ASP.NET Web service, the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="b7bb4-120">Существуют события, возникающие в конце очень начинающим и самого запроса, те, которые вызывается, когда запрос прошел проверку подлинности и авторизацию, событие, вызываемое в случае необработанных исключений и т. д.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-120">There are events raised at the very beginning and very end of the request, ones raised when the request is being authenticated and authorized, an event raised in the case of an unhandled exception, and so forth.</span></span> <span data-ttu-id="b7bb4-121">Чтобы увидеть полный список событий, просмотрите [события объекта HttpApplication](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-121">To see a complete listing of the events, refer to the [HttpApplication object's events](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span></span>

<span data-ttu-id="b7bb4-122">*HTTP-модули* — управляемые классы, код которого выполняется в ответ на определенное событие в жизненном цикле запроса.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-122">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="b7bb4-123">В ASP.NET имеется ряд модулей HTTP, выполнения важных задач за кулисами.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-123">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span> <span data-ttu-id="b7bb4-124">Ниже приведены два встроенных модулей HTTP, которые особенно важны для нас.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-124">Two built-in HTTP Modules that are especially relevant to our discussion are:</span></span>

- <span data-ttu-id="b7bb4-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** — проверяет подлинность пользователя, проверяя билета проверки подлинности, который обычно содержится в коллекции файлов cookie пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – authenticates the user by inspecting the forms authentication ticket, which is typically included in the user's cookies collection.</span></span> <span data-ttu-id="b7bb4-126">Если присутствует не билета проверки подлинности, пользователь является анонимным.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-126">If no forms authentication ticket is present, the user is anonymous.</span></span>
- <span data-ttu-id="b7bb4-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** — Определяет, разрешено ли текущий пользователь для доступа к запрошенному URL-АДРЕСУ.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – determines whether or not the current user is authorized to access the requested URL.</span></span> <span data-ttu-id="b7bb4-128">Этот модуль определяет полномочия по журналу правил авторизации, указанных в файлах конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-128">This module determines the authority by consulting the authorization rules specified in the application's configuration files.</span></span> <span data-ttu-id="b7bb4-129">ASP.NET также включает [ `FileAuthorizationModule` ](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) , определяющий центр по журналу запрошенного файлы списки управления доступом.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-129">ASP.NET also includes the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) that determines authority by consulting the requested file(s) ACLs.</span></span>

<span data-ttu-id="b7bb4-130">`FormsAuthenticationModule` Пытается проверить подлинность пользователя до `UrlAuthorizationModule` (и `FileAuthorizationModule`) выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-130">The `FormsAuthenticationModule` attempts to authenticate the user prior to the `UrlAuthorizationModule` (and `FileAuthorizationModule`) executing.</span></span> <span data-ttu-id="b7bb4-131">Если имя пользователя, отправившего запрос не авторизован для доступа к запрошенному ресурсу, модуль авторизации завершает запрос и возвращает [HTTP 401 несанкционированный](http://www.checkupdown.com/status/E401.html) состояния.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-131">If the user making the request is not authorized to access the requested resource, the authorization module terminates the request and returns an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="b7bb4-132">В сценарии проверки подлинности Windows состояние HTTP 401 возвращается в браузер.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-132">In Windows authentication scenarios, the HTTP 401 status is returned to the browser.</span></span> <span data-ttu-id="b7bb4-133">Этот код состояния браузер приглашение ввести свои учетные данные с помощью модального диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-133">This status code causes the browser to prompt the user for their credentials via a modal dialog box.</span></span> <span data-ttu-id="b7bb4-134">С помощью форм, тем не менее, состояние HTTP 401 несанкционированный никогда не отправляется в браузер поскольку FormsAuthenticationModule обнаруживает это состояние и изменяет его, чтобы перенаправить пользователя на страницу входа, вместо этого (через [HTTP 302 перенаправления](http://www.checkupdown.com/status/E302.html) состояния).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-134">With forms authentication, however, the HTTP 401 Unauthorized status is never sent to the browser because the FormsAuthenticationModule detects this status and modifies it to redirect the user to the login page instead (via an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) status).</span></span>

<span data-ttu-id="b7bb4-135">Ответственность на страницу входа — определить, если учетные данные пользователя действительны, и если да, для создания билета проверки подлинности и перенаправить пользователя на страницу они требовалось посетить.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-135">The login page's responsibility is to determine if the user's credentials are valid and, if so, to create a forms authentication ticket and redirect the user back to the page they were attempting to visit.</span></span> <span data-ttu-id="b7bb4-136">Билет проверки подлинности включается в последующих запросах к страницам на веб-сайт, который `FormsAuthenticationModule` используется для идентификации пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-136">The authentication ticket is included in subsequent requests to the pages on the website, which the `FormsAuthenticationModule` uses to identify the user.</span></span>


![Рабочий процесс проверки подлинности форм](an-overview-of-forms-authentication-cs/_static/image1.png)

<span data-ttu-id="b7bb4-138">**Рис. 1**: Рабочий процесс проверки подлинности форм</span><span class="sxs-lookup"><span data-stu-id="b7bb4-138">**Figure 1**: The Forms Authentication Workflow</span></span>


### <a name="remembering-the-authentication-ticket-across-page-visits"></a><span data-ttu-id="b7bb4-139">Запоминание билет проверки подлинности между посещений страницы</span><span class="sxs-lookup"><span data-stu-id="b7bb4-139">Remembering the Authentication Ticket Across Page Visits</span></span>

<span data-ttu-id="b7bb4-140">После входа в систему, билета проверки подлинности должны отправляться веб-сервере при каждом запросе, так что пользователь остается вошедшего в систему, при просмотре сайта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-140">After logging in, the forms authentication ticket must be sent back to the web server on each request so that the user remains logged in as they browse the site.</span></span> <span data-ttu-id="b7bb4-141">Обычно это выполняется путем размещения билет проверки подлинности в коллекции файлов cookie пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-141">This is typically accomplished by placing the authentication ticket in the user's cookies collection.</span></span> <span data-ttu-id="b7bb4-142">[Файлы cookie](http://en.wikipedia.org/wiki/HTTP_cookie) маленькие текстовые файлы, которые находятся на компьютере пользователя и передаются в заголовках HTTP для каждого запроса на веб-сайт, который создал файл cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-142">[Cookies](http://en.wikipedia.org/wiki/HTTP_cookie) are small text files that reside on the user's computer and are transmitted in the HTTP headers on each request to the website that created the cookie.</span></span> <span data-ttu-id="b7bb4-143">Таким образом после создания и сохранены в файлах cookie браузера билет проверки подлинности форм, каждый последующий посещение веб-сайта этого сайта отправляет билет проверки подлинности вместе с запросом, тем самым идентификатором пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-143">Therefore, once the forms authentication ticket has been created and stored in the browser's cookies, each subsequent visit to that site sends the authentication ticket along with the request, thereby identifying the user.</span></span>

<span data-ttu-id="b7bb4-144">Одним из аспектов файлы cookie является истек их срок действия, который является дата и время, по которому браузер удаляет файл cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-144">One aspect of cookies is their expiration, which is the date and time at which the browser discards the cookie.</span></span> <span data-ttu-id="b7bb4-145">По истечении срока действия файла cookie проверки подлинности форм, пользователь может больше не прошел проверку подлинности и поэтому стать анонимный.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-145">When the forms authentication cookie expires, the user can no longer be authenticated and therefore become anonymous.</span></span> <span data-ttu-id="b7bb4-146">Когда пользователь посещает из общедоступного терминала, скорее всего, они хотят их билет проверки подлинности, срок действия при закрытии браузера.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-146">When a user is visiting from a public terminal, chances are they want their authentication ticket to expire when they close their browser.</span></span> <span data-ttu-id="b7bb4-147">При посещении из дома, однако этого же пользователя может потребоваться возможность запоминать перезапуска браузера, чтобы они не имеют билет проверки подлинности для повторной регистрации в каждом посещении сайта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-147">When visiting from home, however, that same user might want the authentication ticket to be remembered across browser restarts so that they do not have to re-log in each time they visit the site.</span></span> <span data-ttu-id="b7bb4-148">Это решение часто принимается пользователем в форме «Запомнить мои данные» на странице входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-148">This decision is often made by the user in the form of a "Remember me" checkbox on the login page.</span></span> <span data-ttu-id="b7bb4-149">На шаге 3 мы рассмотрим, как реализовать флажка «Запомнить мои данные» на странице входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-149">In Step 3 we will examine how to implement a "Remember me" checkbox in the login page.</span></span> <span data-ttu-id="b7bb4-150">Следующие руководства рассматриваются параметры времени ожидания билета проверки подлинности, подробно.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-150">The following tutorial addresses the authentication ticket timeout settings in detail.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-151">Вполне возможно, что агент пользователя, который используется для входа на веб-сайта может не поддерживать файлы cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-151">It is possible that the user agent used to log on to the website may not support cookies.</span></span> <span data-ttu-id="b7bb4-152">В этом случае ASP.NET можно использовать билеты аутентификации форм без поддержки файлов cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-152">In such a case, ASP.NET can use cookieless forms authentication tickets.</span></span> <span data-ttu-id="b7bb4-153">В этом режиме билет проверки подлинности кодируется в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-153">In this mode, the authentication ticket is encoded into the URL.</span></span> <span data-ttu-id="b7bb4-154">Мы рассмотрим при использовании билеты без поддержки файлов cookie проверки подлинности и как они создаются и управляются в следующем учебном курсе.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-154">We will look at when cookieless authentication tickets are used and how they are created and managed in the next tutorial.</span></span>


### <a name="the-scope-of-forms-authentication"></a><span data-ttu-id="b7bb4-155">Область проверки подлинности форм</span><span class="sxs-lookup"><span data-stu-id="b7bb4-155">The Scope of Forms Authentication</span></span>

<span data-ttu-id="b7bb4-156">`FormsAuthenticationModule` — Управляемый код, который является частью среды выполнения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-156">The `FormsAuthenticationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="b7bb4-157">До выхода версии 7 компании Microsoft [Internet Information Services (IIS)](https://www.iis.net/) веб-сервере произошла distinct барьера между конвейер HTTP в IIS и среда выполнения ASP.NET конвейера.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-157">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="b7bb4-158">Короче говоря, в IIS 6 и более ранних версиях `FormsAuthenticationModule` выполняется, только если запрос делегируется среды выполнения ASP.NET с IIS.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-158">In short, in IIS 6 and earlier, the `FormsAuthenticationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="b7bb4-159">По умолчанию IIS обрабатывает статического содержимого, сам — например страниц HTML и CSS и файлы изображений — и только передает запросы в среду выполнения ASP.NET при запросе страницы с расширением .aspx, .asmx или .ashx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-159">By default, IIS processes static content itself – like HTML pages and CSS and image files – and only hands off requests to the ASP.NET runtime when a page with an extension of .aspx, .asmx, or .ashx is requested.</span></span>

<span data-ttu-id="b7bb4-160">IIS 7, однако позволяет для интеграции IIS и ASP.NET конвейеров.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-160">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="b7bb4-161">Некоторые параметры конфигурации можно настроить IIS 7 для вызова FormsAuthenticationModule для *все* запросов.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-161">With a few configuration settings you can setup IIS 7 to invoke the FormsAuthenticationModule for *all* requests.</span></span> <span data-ttu-id="b7bb4-162">Кроме того со службами IIS 7 можно определить правила авторизации URL-адрес для файлов любого типа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-162">Furthermore, with IIS 7 you can define URL authorization rules for files of any type.</span></span> <span data-ttu-id="b7bb4-163">Дополнительные сведения см. в разделе [изменения между IIS6 и системы безопасности в IIS7](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [ваш веб-платформы безопасности](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), и [Авторизация URL-адреса IIS7 понимание](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-163">For more information, see [Changes Between IIS6 and IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Your Web Platform Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), and [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span>

<span data-ttu-id="b7bb4-164">Короче говоря, в версиях, предшествующих IIS 7, можно использовать только проверку подлинности форм для защиты ресурсов, обработано средой выполнения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-164">Long story short, in versions prior to IIS 7, you can only use forms authentication to protect resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="b7bb4-165">Аналогичным образом правила авторизации URL-адреса применяются только к ресурсам, которые обрабатываются средой выполнения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-165">Likewise, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="b7bb4-166">Но со службами IIS 7 можно интегрировать FormsAuthenticationModule и UrlAuthorizationModule в конвейер HTTP в IIS, тем самым расширяя эта функция ко всем запросам.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-166">But with IIS 7 it is possible to integrate the FormsAuthenticationModule and UrlAuthorizationModule into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

## <a name="step-1-creating-an-aspnet-website-for-this-tutorial-series"></a><span data-ttu-id="b7bb4-167">Шаг 1. Создание веб-сайта ASP.NET для этой серии руководств</span><span class="sxs-lookup"><span data-stu-id="b7bb4-167">Step 1: Creating an ASP.NET Website for this Tutorial Series</span></span>

<span data-ttu-id="b7bb4-168">Для достижения максимально широкой аудиторией, мы будем строить с помощью серии веб-сайта ASP.NET будет создана с корпорации Microsoft бесплатную версию Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-168">In order to reach the widest possible audience, the ASP.NET website we will be building throughout this series will be created with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="b7bb4-169">Мы будем реализовывать `SqlMembershipProvider` хранилище пользователей в [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) базы данных.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-169">We will implement the `SqlMembershipProvider` user store in a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database.</span></span> <span data-ttu-id="b7bb4-170">Если вы используете Visual Studio 2005 или другого выпуска Visual Studio 2008 или SQL Server, не беспокойтесь — действия будут практически идентичны и будет подчеркиваться любой нетривиальный различия.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-170">If you are using Visual Studio 2005 or a different edition of Visual Studio 2008 or SQL Server, don't worry - the steps will be nearly identical and any non-trivial differences will be pointed out.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-171">Демонстрационное веб-приложение, используемые в каждом руководстве, доступен для загрузки.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-171">The demo web application used in each tutorial is available as a download.</span></span> <span data-ttu-id="b7bb4-172">Это загружаемое приложение создано с помощью Visual Web Developer 2008, предназначенных для .NET Framework версии 3.5.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-172">This downloadable application was created with Visual Web Developer 2008 targeted for the .NET Framework version 3.5.</span></span> <span data-ttu-id="b7bb4-173">Так как приложение предназначено для .NET 3.5, его файл Web.config содержит элементы конфигурации дополнительные, зависящие от 3.5.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-173">Since the application is targeted for .NET 3.5, its Web.config file includes additional, 3.5-specific configuration elements.</span></span> <span data-ttu-id="b7bb4-174">Короче говоря, если вы еще установка .NET 3.5 на компьютере, затем загружаемые веб-приложение не будет работать без предварительного удаления 3.5-разметку из файла Web.config.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-174">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from Web.config.</span></span>


<span data-ttu-id="b7bb4-175">Перед тем как можно настроить проверку подлинности форм, необходимо сначала на веб-сайте ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-175">Before we can configure forms authentication, we first need an ASP.NET website.</span></span> <span data-ttu-id="b7bb4-176">Начните с создания нового файла на основе системы веб-узла ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-176">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="b7bb4-177">Для этого необходимо запустить Visual Web Developer и перейдите к меню "файл" и выберите новый веб-сайт, отображает диалоговое окно нового веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-177">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box.</span></span> <span data-ttu-id="b7bb4-178">Выберите шаблон веб-сайт ASP.NET, задайте раскрывающемся списке расположение в файловой системе, выберите папку для размещения веб-сайта и задать язык C#.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-178">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="b7bb4-179">Это создаст новый веб-сайт со страницей Default.aspx ASP.NET, приложение\_папки данных и файл Web.config.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-179">This will create a new web site with a Default.aspx ASP.NET page, an App\_Data folder, and a Web.config file.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-180">Visual Studio поддерживает два режима управления проектом. Проекты веб-сайтов и проектов веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-180">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="b7bb4-181">Проекты веб-сайта не хватает файл проекта, тогда как Web Application Projects имитируют архитектура проекта в Visual Studio .NET 2002/2003 — они включают файл проекта и компиляции исходного кода проекта в единую сборку, которая размещается в папке/Bin.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-181">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 – they include a project file and compile the project's source code into a single assembly, which is placed in the /bin folder.</span></span> <span data-ttu-id="b7bb4-182">Проекты Visual Studio 2005 изначально только поддерживаемые веб-сайта, несмотря на то, что было возвращено модели проекта веб-приложения с пакетом обновления 1; Visual Studio 2008 включает в себя оба проекта модели.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-182">Visual Studio 2005 initially only supported Web Site Projects, although the Web Application Project model was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="b7bb4-183">Visual Web Developer 2005 и 2008 выпусков, однако поддерживают только проектов веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-183">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="b7bb4-184">Я буду использовать модели проекта веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-184">I will be using the Web Site Project model.</span></span> <span data-ttu-id="b7bb4-185">Если при использовании выпуска отличных от Express и хотите использовать [модели проекта веб-приложения](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) вместо этого вы можете сделать это, но имейте в виду, что могут существовать некоторые несоответствия между отображаемые на экране и действия, которые необходимо выполнить сравнение снимки экрана и следуйте инструкциям в этих учебниках.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-185">If you are using a non-Express edition and want to use the [Web Application Project model](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>


<span data-ttu-id="b7bb4-186">[![Создать новый файл на основе системы веб-сайт](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-186">[![Create a New File System-Based Web Site](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span></span>

<span data-ttu-id="b7bb4-187">**Рис. 2**: Создание веб-сайта New File System-Based ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-187">**Figure 2**: Create a New File System-Based Web Site ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image4.png))</span></span>


### <a name="adding-a-master-page"></a><span data-ttu-id="b7bb4-188">Добавление главной страницы</span><span class="sxs-lookup"><span data-stu-id="b7bb4-188">Adding a Master Page</span></span>

<span data-ttu-id="b7bb4-189">Затем добавьте Создание главной страницы на сайт в корневом каталоге с именем Site.master.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-189">Next, add a new Master Page to the site in the root directory named Site.master.</span></span> <span data-ttu-id="b7bb4-190">[Главные страницы](https://msdn.microsoft.com/library/wtxbf3hh.aspx) позволяют разработчику страницы задать шаблон сайта, который можно использовать на страницах ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-190">[Master pages](https://msdn.microsoft.com/library/wtxbf3hh.aspx) enable a page developer to define a site-wide template that can be applied to ASP.NET pages.</span></span> <span data-ttu-id="b7bb4-191">Основным преимуществом главных страниц является то, что общий внешний вид веб-узла можно определить в одном месте, тем самым облегчая процесс для обновления или настроить макет веб-узла.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-191">The main benefit of master pages is that the site's overall appearance can be defined in a single location, thereby making it easy to update or tweak the site's layout.</span></span>


<span data-ttu-id="b7bb4-192">[![Добавить эталонную страницу с именем Site.master на веб-сайт](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-192">[![Add a Master Page Named Site.master to the Website](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span></span>

<span data-ttu-id="b7bb4-193">**Рис. 3**: Добавление Site.master Master с именем страницы на веб-сайт ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-193">**Figure 3**: Add a Master Page Named Site.master to the Website ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image7.png))</span></span>


<span data-ttu-id="b7bb4-194">Определение макета страницы для всего здесь на главной странице.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-194">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="b7bb4-195">Можно использовать представление проектирования и добавьте любые макета или веб-элементы управления, или можно вручную добавить разметку вручную в представлении источника.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-195">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="b7bb4-196">Я структурировал моей главной страницы макета для имитации макет, используемый в моей *[работа с данными в ASP.NET 2.0](../../data-access/index.md)* серии руководств (см. рис. 4).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-196">I structured my master page's layout to mimic the layout used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series (see Figure 4).</span></span> <span data-ttu-id="b7bb4-197">На главной странице используется [каскадных таблиц стилей](http://www.w3schools.com/css/default.asp) для определения положения и стили CSS параметры, определенные в файле Style.css (включенного в этом руководстве загрузки).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-197">The master page uses [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the file Style.css (which is included in this tutorial's associated download).</span></span> <span data-ttu-id="b7bb4-198">Хотя из приведенной ниже разметки этого невозможно определить, правила CSS определены таким образом, чтобы навигации &lt;div&gt;элемента (абсолютное) положение, что отображается слева и имеет фиксированную ширину 200 пикселей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-198">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation &lt;div&gt;'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample1.aspx)]

<span data-ttu-id="b7bb4-199">На главной странице определяются как статические, так и регионов, которые могут изменяться страницами ASP.NET, испольузющими эту главную станицу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-199">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="b7bb4-200">Изменяемые области обозначаются `ContentPlaceHolder` элемента управления, который можно увидеть в содержимом &lt;div&gt;.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-200">These content editable regions are indicated by the `ContentPlaceHolder` control, which can be seen within the content &lt;div&gt;.</span></span> <span data-ttu-id="b7bb4-201">Нас на главной странице имеется один `ContentPlaceHolder` (MainContent), но главной страницы может быть и несколько.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-201">Our master page has a single `ContentPlaceHolder` (MainContent), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="b7bb4-202">С помощью введете указанную выше разметку переключение в режим конструктора показан макет главной страницы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-202">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="b7bb4-203">Любая страница ASP.NET, использующая эту главную страницу будет иметь этот единообразного расположения, с возможностью указать разметку для `MainContent` регион.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-203">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>


<span data-ttu-id="b7bb4-204">[![Главной страницы, при просмотре в режиме конструктора](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-204">[![The Master Page, When Viewed Through the Design View](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span></span>

<span data-ttu-id="b7bb4-205">**Рис. 4**: Главной страницы, при просмотре через конструктор ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-205">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image10.png))</span></span>


### <a name="creating-content-pages"></a><span data-ttu-id="b7bb4-206">Создание страниц содержимого</span><span class="sxs-lookup"><span data-stu-id="b7bb4-206">Creating Content Pages</span></span>

<span data-ttu-id="b7bb4-207">На этом этапе у нас есть страницу Default.aspx в наш веб-сайт, но он не использует главную страницу, которую мы только что создали.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-207">At this point we have a Default.aspx page in our website, but it does not use the master page we just created.</span></span> <span data-ttu-id="b7bb4-208">Хотя и существует возможность управлять декларативная разметка веб-страницы, использующие эталонную страницу, если страница не содержит любое содержимое еще проще просто удалить страницу и повторно добавьте его в проект, указав главную страницу для использования.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-208">While it is possible to manipulate the declarative markup of a web page to use a master page, if the page doesn't contain any content yet it is easier to just delete the page and re-add it to the project, specifying the master page to use.</span></span> <span data-ttu-id="b7bb4-209">Таким образом начните, удалив файл Default.aspx из проекта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-209">Therefore, start by deleting Default.aspx from the project.</span></span>

<span data-ttu-id="b7bb4-210">Затем щелкните правой кнопкой мыши имя проекта в обозревателе решений и выберите Добавление нового веб-формы с именем Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-210">Next, right-click on the project name in the Solution Explorer and choose to add a new Web Form named Default.aspx.</span></span> <span data-ttu-id="b7bb4-211">На этот раз, установите флажок «Выбрать главную страницу» и выберите из списка страницей Site.master.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-211">This time, check the "Select master page" checkbox and choose the Site.master master page from the list.</span></span>


<span data-ttu-id="b7bb4-212">[![Добавьте новую страницу Default.aspx, решили Выбор главной страницы](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-212">[![Add a New Default.aspx Page Choosing to Select a Master Page](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span></span>

<span data-ttu-id="b7bb4-213">**Рис. 5**: Добавить новый Default.aspx страницы решили Выбор главной страницы ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-213">**Figure 5**: Add a New Default.aspx Page Choosing to Select a Master Page ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image13.png))</span></span>


![Использовать Site.master главной страницы](an-overview-of-forms-authentication-cs/_static/image14.png)

<span data-ttu-id="b7bb4-215">**Рис. 6**: Использовать Site.master главной страницы</span><span class="sxs-lookup"><span data-stu-id="b7bb4-215">**Figure 6**: Use the Site.master Master Page</span></span>


> [!NOTE]
> <span data-ttu-id="b7bb4-216">При использовании модели проекта веб-приложения в диалоговом окне Добавить новый элемент не включает флажок «Выбрать главную страницу».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-216">If you are using the Web Application Project Model the Add New Item dialog box does not include a "Select master page" checkbox.</span></span> <span data-ttu-id="b7bb4-217">Вместо этого необходимо добавить элемент типа «Форма веб-содержимого.»</span><span class="sxs-lookup"><span data-stu-id="b7bb4-217">Instead, you need to add an item of type "Web Content Form."</span></span> <span data-ttu-id="b7bb4-218">После выбора параметра «Веб-содержимого формы» и нажмите кнопку Добавить, Visual Studio отобразит же Select шаблона диалоговое окно, показанное на рис. 6.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-218">After choosing the "Web Content Form" option and clicking Add, Visual Studio will display the same Select a Master dialog box shown in Figure 6.</span></span>


<span data-ttu-id="b7bb4-219">Декларативная разметка новая страница Default.aspx просто содержит @Page директива, указав путь к главной странице файл и элемент управления содержимым для элемента ContentPlaceHolder на главной странице MainContent.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-219">The new Default.aspx page's declarative markup includes just a @Page directive specifying the path to the master page file and a Content control for the master page's MainContent ContentPlaceHolder.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample2.aspx)]

<span data-ttu-id="b7bb4-220">Пока оставьте пустым Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-220">For now, leave Default.aspx empty.</span></span> <span data-ttu-id="b7bb4-221">Мы вернемся к нему позже в этом руководстве для добавления содержимого.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-221">We will return to it later in this tutorial to add content.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-222">Нас на главной странице содержит раздел для меню или другой интерфейс навигации.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-222">Our master page includes a section for a menu or some other navigation interface.</span></span> <span data-ttu-id="b7bb4-223">В следующем учебном курсе мы создадим такой интерфейс.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-223">We will create such an interface in a future tutorial.</span></span>

## <a name="step-2-enabling-forms-authentication"></a><span data-ttu-id="b7bb4-224">Шаг 2. Включение проверки подлинности форм</span><span class="sxs-lookup"><span data-stu-id="b7bb4-224">Step 2: Enabling Forms Authentication</span></span>

<span data-ttu-id="b7bb4-225">ASP.NET веб-сайт создан DAL следующей задачей является возможность проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-225">With the ASP.NET website created, our next task is to enable forms authentication.</span></span> <span data-ttu-id="b7bb4-226">Настройка проверки подлинности приложения указывается с помощью [ `<authentication>` элемент](https://msdn.microsoft.com/library/532aee0e.aspx) в файле Web.config. `<authentication>` Элемент содержит один атрибут с именем mode, указывающее модель проверки подлинности, используемые приложением.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-226">The application's authentication configuration is specified through the [`<authentication>` element](https://msdn.microsoft.com/library/532aee0e.aspx) in Web.config. The `<authentication>` element contains a single attribute named mode that specifies the authentication model used by the application.</span></span> <span data-ttu-id="b7bb4-227">Этот атрибут может иметь одно из следующих четырех значений:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-227">This attribute can have one of the following four values:</span></span>

- <span data-ttu-id="b7bb4-228">**Windows** — как описано в предыдущем учебном курсе, когда приложение использует проверку подлинности Windows отвечает веб сервера для проверки подлинности посетитель, и обычно это делается через Basic, Digest или встроенная Windows Проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-228">**Windows** – as discussed in the preceding tutorial, when an application uses Windows authentication it is the web server's responsibility to authenticate the visitor, and this is usually done through Basic, Digest, or Integrated Windows authentication.</span></span>
- <span data-ttu-id="b7bb4-229">**Forms**— пользователи проходят проверку подлинности через форму на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-229">**Forms**– users are authenticated via a form on a web page.</span></span>
- <span data-ttu-id="b7bb4-230">**Passport**— пользователи проходят проверку подлинности с помощью Microsoft Passport Network.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-230">**Passport**– users are authenticated using Microsoft's Passport Network.</span></span>
- <span data-ttu-id="b7bb4-231">**Нет**— одна из моделей проверки подлинности не используется; все посетители являются анонимными.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-231">**None**– no authentication model is used; all visitors are anonymous.</span></span>

<span data-ttu-id="b7bb4-232">По умолчанию приложения ASP.NET использовать проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-232">By default, ASP.NET applications use Windows authentication.</span></span> <span data-ttu-id="b7bb4-233">Чтобы изменить тип проверки подлинности для проверки подлинности форм, затем нам нужно изменить `<authentication>` атрибут режима элемента формы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-233">To change the authentication type to forms authentication, then, we need to modify the `<authentication>` element's mode attribute to Forms.</span></span>

<span data-ttu-id="b7bb4-234">Если проект еще не содержит файл Web.config, добавьте один теперь, щелкнув правой кнопкой мыши имя проекта в обозревателе решений, выбрав Add New Item и затем добавление файла конфигурации веб-узла.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-234">If your project does not yet contain a Web.config file, add one now by right-clicking on the project name in the Solution Explorer, choosing Add New Item, and then adding a Web Configuration file.</span></span>


<span data-ttu-id="b7bb4-235">[![Если проект еще не содержит файл Web.config, добавьте его сейчас](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-235">[![If Your Project Does Not Yet Include Web.config, Add It Now](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span></span>

<span data-ttu-id="b7bb4-236">**Рис. 7**: Если ваш проект Does не еще включают Web.config, добавьте его теперь ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-236">**Figure 7**: If Your Project Does Not Yet Include Web.config, Add It Now ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image17.png))</span></span>


<span data-ttu-id="b7bb4-237">Затем найдите `<authentication>` элемента и обновление его для использования проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-237">Next, locate the `<authentication>` element and update it to use forms authentication.</span></span> <span data-ttu-id="b7bb4-238">После этого изменения файла Web.config разметка должна выглядеть следующим:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-238">After this change, your Web.config file's markup should look similar to the following:</span></span>

[!code-xml[Main](an-overview-of-forms-authentication-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="b7bb4-239">Поскольку XML-файл Web.config, регистр важен.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-239">Since Web.config is an XML file, casing is important.</span></span> <span data-ttu-id="b7bb4-240">Убедитесь, что устанавливают атрибут режима в формы, с заглавной буквы «F».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-240">Make sure that you set the mode attribute to Forms, with a capital "F".</span></span> <span data-ttu-id="b7bb4-241">Если вы используете другой регистр символов, таких как «формы», вы получите ошибку конфигурации при посещении узла через браузер.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-241">If you use a different casing, such as "forms", you'll receive a configuration error when visiting the site through a browser.</span></span>


<span data-ttu-id="b7bb4-242">`<authentication>` Элемента может включать `<forms>` дочерний элемент, содержащий параметры проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-242">The `<authentication>` element may optionally include a `<forms>` child element that contains forms authentication-specific settings.</span></span> <span data-ttu-id="b7bb4-243">Пока Давайте просто использовать параметры по умолчанию для проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-243">For now, let's just use the default forms authentication settings.</span></span> <span data-ttu-id="b7bb4-244">Мы изучим `<forms>` дочерний элемент более подробно в следующем учебном курсе.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-244">We will explore the `<forms>` child element in more detail in the next tutorial.</span></span>

## <a name="step-3-building-the-login-page"></a><span data-ttu-id="b7bb4-245">Шаг 3. Создание страницы входа</span><span class="sxs-lookup"><span data-stu-id="b7bb4-245">Step 3: Building the Login Page</span></span>

<span data-ttu-id="b7bb4-246">Для поддержки проверки подлинности форм наш веб-сайт должен страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-246">In order to support forms authentication our website needs a login page.</span></span> <span data-ttu-id="b7bb4-247">Как описано в разделе «Основные сведения о форм проверки подлинности Workflow» `FormsAuthenticationModule` будет автоматически перенаправления пользователя на страницу входа, если они пытаются получить доступ к странице, которым они не имеют прав для просмотра.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-247">As discussed in the "Understanding the Forms Authentication Workflow" section, the `FormsAuthenticationModule` will automatically redirect the user to the login page if they attempt to access a page that they are not authorized to view.</span></span> <span data-ttu-id="b7bb4-248">Кроме того, существуют также элементы управления ASP.NET Web, отображается ссылка на страницу входа для анонимных пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-248">There are also ASP.NET Web controls that will display a link to the login page to anonymous users.</span></span> <span data-ttu-id="b7bb4-249">Это вызывает вопрос «Что такое URL-адрес страницы входа?»</span><span class="sxs-lookup"><span data-stu-id="b7bb4-249">This begs the question, "What is the URL of the login page?"</span></span>

<span data-ttu-id="b7bb4-250">По умолчанию системой проверки подлинности форм ожидает, что страница входа на с именем Login.aspx и помещается в корневом каталоге веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-250">By default, the forms authentication system expects the login page to be named Login.aspx and placed in the root directory of the web application.</span></span> <span data-ttu-id="b7bb4-251">Если вы хотите использовать URL-адрес входа на разные страницы, это можно сделать, указав его в файле Web.config. Мы увидим, как это сделать в следующем руководстве.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-251">If you want to use a different login page URL, you can do so by specifying it in Web.config. We will see how to do this in the subsequent tutorial.</span></span>

<span data-ttu-id="b7bb4-252">На страницу входа имеет три функциональные обязанности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-252">The login page has three responsibilities:</span></span>

1. <span data-ttu-id="b7bb4-253">Предоставьте интерфейс, позволяющий посетителя вводить свои учетные данные.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-253">Provide an interface that allows the visitor to enter their credentials.</span></span>
2. <span data-ttu-id="b7bb4-254">Определите, если отправленные учетные данные недопустимы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-254">Determine if the submitted credentials are valid.</span></span>
3. <span data-ttu-id="b7bb4-255">«Вход» пользователя путем создания билета проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-255">"Log in" the user by creating the forms authentication ticket.</span></span>

### <a name="creating-the-login-pages-user-interface"></a><span data-ttu-id="b7bb4-256">Создание пользовательского интерфейса на страницу входа</span><span class="sxs-lookup"><span data-stu-id="b7bb4-256">Creating the Login Page's User Interface</span></span>

<span data-ttu-id="b7bb4-257">Давайте начнем с первой задачи.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-257">Let's get started with the first task.</span></span> <span data-ttu-id="b7bb4-258">Добавьте новую страницу ASP.NET в корневой каталог веб-узла, с именем Login.aspx и свяжите его с главной страницей Site.master.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-258">Add a new ASP.NET page to the site's root directory named Login.aspx and associate it with the Site.master master page.</span></span>


<span data-ttu-id="b7bb4-259">[![Добавьте новую страницу ASP.NET с именем Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-259">[![Add a New ASP.NET Page Named Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span></span>

<span data-ttu-id="b7bb4-260">**Рис. 8**: Добавление нового ASP.NET страницы с именем Login.aspx ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-260">**Figure 8**: Add a New ASP.NET Page Named Login.aspx ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image20.png))</span></span>


<span data-ttu-id="b7bb4-261">Интерфейс страницы входа обычно состоит из два текстовых поля — одно для имени пользователя, по одному для пароля — и кнопку для отправки формы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-261">The typical login page interface consists of two textboxes – one for the user's name, one for their password – and a button to submit the form.</span></span> <span data-ttu-id="b7bb4-262">Веб-сайтов очень часто включают флажок «Запомнить мои данные», которая, если этот флажок установлен, сохраняет полученный билет проверки подлинности между перезагрузками браузера.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-262">Websites oftentimes include a "Remember me" checkbox that, if checked, persists the resulting authentication ticket across browser restarts.</span></span>

<span data-ttu-id="b7bb4-263">Добавить два текстовых поля Login.aspx и задайте их `ID` свойства, имя пользователя и пароль, соответственно.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-263">Add two TextBoxes to Login.aspx and set their `ID` properties to UserName and Password, respectively.</span></span> <span data-ttu-id="b7bb4-264">Также задайте пароля пользователя `TextMode` значение пароля.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-264">Also set Password's `TextMode` property to Password.</span></span> <span data-ttu-id="b7bb4-265">Добавьте элемент управления CheckBox, установка его `ID` свойства RememberMe и его `Text` свойства «Запомнить меня».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-265">Next, add a CheckBox control, setting its `ID` property to RememberMe and its `Text` property to "Remember Me".</span></span> <span data-ttu-id="b7bb4-266">После этого добавьте кнопку с именем LoginButton которого `Text` свойство имеет значение «Вход».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-266">Following that, add a Button named LoginButton whose `Text` property is set to "Login".</span></span> <span data-ttu-id="b7bb4-267">И наконец, добавьте элемент управления Label Web и задайте его `ID` свойства InvalidCredentialsMessage, его `Text` свойства «имя пользователя или пароль является недопустимым.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-267">And finally, add a Label Web control and set its `ID` property to InvalidCredentialsMessage, its `Text` property to "Your username or password is invalid.</span></span> <span data-ttu-id="b7bb4-268">Повторите попытку.», ее `ForeColor` свойство на красный и его `Visible` значение False.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-268">Please try again.", its `ForeColor` property to Red, and its `Visible` property to False.</span></span>

<span data-ttu-id="b7bb4-269">На этом этапе экран должен выглядеть как снимке на рис. 9 экрана и декларативный синтаксис страницы должна выглядеть следующим:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-269">At this point your screen should look similar to the screen shot in Figure 9, and your page's declarative syntax should like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample4.aspx)]


<span data-ttu-id="b7bb4-270">[![На страницу входа содержит два текстовых поля, CheckBox, кнопки и метки](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-270">[![The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span></span>

<span data-ttu-id="b7bb4-271">**Рис. 9**: Имя входа страницы содержит два текстовых поля, флажок, кнопку и метку ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-271">**Figure 9**: The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image23.png))</span></span>


<span data-ttu-id="b7bb4-272">Наконец, создайте обработчик событий для нажатия LoginButton событий.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-272">Finally, create an event handler for the LoginButton's Click event.</span></span> <span data-ttu-id="b7bb4-273">В конструкторе дважды щелкните элемент управления Button, чтобы создать этот обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-273">From the Designer, simply double-click the Button control to create this event handler.</span></span>

### <a name="determining-if-the-supplied-credentials-are-valid"></a><span data-ttu-id="b7bb4-274">Определение, если предоставленные учетные данные допустимы</span><span class="sxs-lookup"><span data-stu-id="b7bb4-274">Determining If the Supplied Credentials are Valid</span></span>

<span data-ttu-id="b7bb4-275">Теперь нам нужно реализовать задача 2 в Click кнопки обработчик событий — определить, допустимы ли указанные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-275">We now need to implement task 2 in the Button's Click event handler – determining whether the supplied credentials are valid.</span></span> <span data-ttu-id="b7bb4-276">Для этого необходимо настроить хранилище пользователя, который содержит все учетные данные пользователей, чтобы мы могли определить, если предоставленные учетные данные соответствуют все известные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-276">In order to do this there needs to be a user store that holds all of the users' credentials so that we can determine if the supplied credentials match up with any known credentials.</span></span>

<span data-ttu-id="b7bb4-277">До версии ASP.NET 2.0 разработчикам было ответственный за внедрение оба собственные хранилища пользователя и написания кода, чтобы проверить предоставленные учетные данные в хранилище.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-277">Prior to ASP.NET 2.0, developers were responsible for implementing both their own user stores and writing the code to validate the supplied credentials against the store.</span></span> <span data-ttu-id="b7bb4-278">Большинство разработчиков реализовали бы хранилище пользователя в базе данных, создание таблицы с именами пользователей с столбцы, такие как имя пользователя, пароль, адрес электронной почты, LastLoginDate и т. д.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-278">Most developers would implement the user store in a database, creating a table named Users with columns like UserName, Password, Email, LastLoginDate, and so forth.</span></span> <span data-ttu-id="b7bb4-279">Тогда, эта таблица будет содержать одну запись для каждой учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-279">This table, then, would have one record per user account.</span></span> <span data-ttu-id="b7bb4-280">Проверка того, предоставленные учетные данные пользователя будет включать в себя запрос в базу данных для сопоставления имени пользователя и гарантируя, что введенный пароль предоставивших пароль в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-280">Verifying a user's supplied credentials would involve querying the database for a matching username and then ensuring that the password in the database corresponded to the supplied password.</span></span>

<span data-ttu-id="b7bb4-281">В ASP.NET 2.0 разработчикам следует использовать один из поставщиков участия для управления в хранилище пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-281">With ASP.NET 2.0, developers should use one of the Membership providers to manage the user store.</span></span> <span data-ttu-id="b7bb4-282">В этой серии руководств мы используем SqlMembershipProvider, который использует базу данных SQL Server для хранилища пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-282">In this tutorial series we will be using the SqlMembershipProvider, which uses a SQL Server database for the user store.</span></span> <span data-ttu-id="b7bb4-283">При использовании SqlMembershipProvider, нам нужно реализовать схему конкретной базы данных, включает таблицы, представления и хранимые процедуры, ожидаемый поставщиком.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-283">When using the SqlMembershipProvider we need to implement a specific database schema that includes the tables, views, and stored procedures expected by the provider.</span></span> <span data-ttu-id="b7bb4-284">Мы рассмотрим, как реализация этой схемы в ***Создание схемы членства в SQL Server*** руководства.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-284">We will examine how to implement this schema in the ***Creating the Membership Schema in SQL Server*** tutorial.</span></span> <span data-ttu-id="b7bb4-285">С поставщиком членства в месте, проверка учетных данных пользователя осуществляется простым вызовом [класс членства](https://msdn.microsoft.com/library/system.web.security.membership.aspx) [ValidateUser (*username*, *пароль*) метод](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), который возвращает логическое значение, указывающее, является ли допустимость *имя пользователя* и *пароль* сочетания.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-285">With the Membership provider in place, validating the user's credentials is as simple as calling the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx)'s [ValidateUser(*username*, *password*) method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), which returns a Boolean value indicating whether the validity of the *username* and *password* combination.</span></span> <span data-ttu-id="b7bb4-286">Зная, как мы еще не реализован SqlMembershipProvider хранилище пользователя, мы класс членства ValidateUser метод нельзя использовать в настоящее время.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-286">Seeing as we have not yet implemented the SqlMembershipProvider's user store, we cannot use the Membership class's ValidateUser method at this time.</span></span>

<span data-ttu-id="b7bb4-287">А не тратить время на создание собственных пользовательских пользователей таблицы базы данных (что бывает устаревшим после мы реализовали SqlMembershipProvider), давайте вместо жестко действительные учетные данные в имени входа странице сам.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-287">Rather than take the time to build our own custom Users database table (which would be obsolete once we implemented the SqlMembershipProvider), let's instead hard-code the valid credentials within the login page itself.</span></span> <span data-ttu-id="b7bb4-288">LoginButton выберите обработчик событий, добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-288">In the LoginButton's Click event handler, add the following code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample5.cs)]

<span data-ttu-id="b7bb4-289">Как вы видите, существуют три действительные учетные записи пользователей — Скотт, Цзисунь и Сэм — и все три класса имеют один и тот же пароль («password»).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-289">As you can see, there are three valid user accounts – Scott, Jisun, and Sam – and all three have the same password ("password").</span></span> <span data-ttu-id="b7bb4-290">Код проходит через массивы пользователей и паролей, ищет совпадение допустимое имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-290">The code loops through the users and passwords arrays looking for a valid username and password match.</span></span> <span data-ttu-id="b7bb4-291">Если имя пользователя и пароль являются допустимыми, необходимо войти в систему пользователя и затем перенаправлять их на соответствующую страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-291">If both the username and password are valid, we need to login the user and then redirect them to the appropriate page.</span></span> <span data-ttu-id="b7bb4-292">Если учетные данные недействительны, после чего мы отображаем InvalidCredentialsMessage метки.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-292">If the credentials are invalid, then we display the InvalidCredentialsMessage Label.</span></span>

<span data-ttu-id="b7bb4-293">Если пользователь введет действительные учетные данные, я упомянул, что они затем перенаправляются «соответствующую страницу».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-293">When a user enters valid credentials, I mentioned that they are then redirected to the "appropriate page."</span></span> <span data-ttu-id="b7bb4-294">Что такое соответствующей странице, хотя?</span><span class="sxs-lookup"><span data-stu-id="b7bb4-294">What is the appropriate page, though?</span></span> <span data-ttu-id="b7bb4-295">Помните, что при посещении пользователем страницы, которые не авторизованы для просмотра, FormsAuthenticationModule автоматически перенаправит его на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-295">Recall that when a user visits a page they are not authorized to view, the FormsAuthenticationModule automatically redirects them to the login page.</span></span> <span data-ttu-id="b7bb4-296">Таким образом, он включает запрошенного URL-адреса в строке запроса через параметр ReturnUrl.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-296">In doing so, it includes the requested URL in the querystring via the ReturnUrl parameter.</span></span> <span data-ttu-id="b7bb4-297">То есть если пользователь пытался посетите ProtectedPage.aspx, и им не было разрешено для этого, FormsAuthenticationModule перенаправит их:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-297">That is, if a user attempted to visit ProtectedPage.aspx, and they were not authorized to do so, the FormsAuthenticationModule would redirect them to:</span></span>

<span data-ttu-id="b7bb4-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span><span class="sxs-lookup"><span data-stu-id="b7bb4-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span></span>

<span data-ttu-id="b7bb4-299">После успешного входа в систему пользователь должен перенаправляться к ProtectedPage.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-299">Upon successfully logging in, the user should be redirected back to ProtectedPage.aspx.</span></span> <span data-ttu-id="b7bb4-300">Кроме того пользователи могут найти на страницу входа в свои собственные желанию.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-300">Alternatively, users may visit the login page on their own volition.</span></span> <span data-ttu-id="b7bb4-301">В этом случае после входа пользователя они должны отправляться на страницу Default.aspx в корневую папку.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-301">In that case, after logging in the user they should be sent to the root folder's Default.aspx page.</span></span>

### <a name="logging-in-the-user"></a><span data-ttu-id="b7bb4-302">Вход пользователя</span><span class="sxs-lookup"><span data-stu-id="b7bb4-302">Logging In the User</span></span>

<span data-ttu-id="b7bb4-303">Предположим, что предоставленные учетные данные являются допустимыми, необходимо создать билет проверки подлинности форм, тем самым входа пользователя на сайт.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-303">Assuming that the supplied credentials are valid, we need to create a forms authentication ticket, thereby logging in the user to the site.</span></span> <span data-ttu-id="b7bb4-304">[Класс FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) в [пространства имен System.Web.Security](https://msdn.microsoft.com/library/system.web.security.aspx) предоставляет различные методы для ведения журнала в и ведения журнала, пользователей с помощью форм системой проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-304">The [FormsAuthentication class](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) provides assorted methods for logging in and logging out users via the forms authentication system.</span></span> <span data-ttu-id="b7bb4-305">Хотя существует несколько методов в классе FormsAuthentication, которые нас интересуют на этом этапе встречаются:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-305">While there are several methods in the FormsAuthentication class, the three we are interested in at this juncture are:</span></span>

- <span data-ttu-id="b7bb4-306">[GetAuthCookie (*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) — создает билет проверки подлинности форм для предоставленного имени *username*.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span></span> <span data-ttu-id="b7bb4-307">Затем этот метод создает и возвращает объект HttpCookie, который содержит содержимое билет проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-307">Next, this method creates and returns an HttpCookie object that holds the contents of the authentication ticket.</span></span> <span data-ttu-id="b7bb4-308">Если *persistCookie* имеет значение true, создается постоянный файл cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-308">If *persistCookie* is true, a persistent cookie is created.</span></span>
- <span data-ttu-id="b7bb4-309">[SetAuthCookie (*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) — вызывает GetAuthCookie (*username*, *persistCookie*) метод для создания файла cookie проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span></span> <span data-ttu-id="b7bb4-310">Затем этот метод добавляет файл cookie, возвращенный GetAuthCookie к коллекции (при условии, что форм на основе файлов cookie проверки подлинности, используемые; в противном случае, этот метод вызывает внутренний класс, обрабатывающий логику без поддержки файлов cookie билета).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-310">This method then adds the cookie returned by GetAuthCookie to the Cookies collection (assuming cookies-based forms authentication is being used; otherwise, this method calls an internal class that handles the cookieless ticket logic).</span></span>
- <span data-ttu-id="b7bb4-311">[RedirectFromLoginPage (*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) — этот метод вызывает SetAuthCookie (*username*, *persistCookie*) и затем перенаправляет пользователя на соответствующую страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span></span>

<span data-ttu-id="b7bb4-312">GetAuthCookie удобно в тех случаях, когда необходимо изменить билет проверки подлинности перед записи файла cookie в коллекции файлов cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-312">GetAuthCookie is handy when you need to modify the authentication ticket before writing the cookie out to the Cookies collection.</span></span> <span data-ttu-id="b7bb4-313">SetAuthCookie полезно в том случае, если создание билета проверки подлинности форм и добавить его в коллекцию файлов cookie, но не хотите перенаправить пользователя на соответствующую страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-313">SetAuthCookie is useful if you want to create the forms authentication ticket and add it to the Cookies collection, but do not want to redirect the user to the appropriate page.</span></span> <span data-ttu-id="b7bb4-314">Возможно, вам необходимо сохранить их на странице входа или отправлять их на альтернативные страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-314">Perhaps you want to keep them on the login page or send them to some alternate page.</span></span>

<span data-ttu-id="b7bb4-315">Поскольку нам требуется вход пользователя и перенаправит их на соответствующую страницу, давайте используем RedirectFromLoginPage.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-315">Since we want to log in the user and redirect them to the appropriate page, let's use RedirectFromLoginPage.</span></span> <span data-ttu-id="b7bb4-316">Обновить LoginButton нажмите кнопку обработчика событий, заменив два закомментированных строк TODO следующую строку кода:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-316">Update the LoginButton's Click event handler, replacing the two commented TODO lines with the following line of code:</span></span>

<span data-ttu-id="b7bb4-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span><span class="sxs-lookup"><span data-stu-id="b7bb4-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span></span>

<span data-ttu-id="b7bb4-318">При создании билета проверки подлинности форм, мы используем свойство Text текстового поля имени пользователя для билета проверки подлинности *username* параметра и проверенное состояние объекта флажок RememberMe  *persistCookie* параметра.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-318">When creating the forms authentication ticket we use the UserName TextBox's Text property for the forms authentication ticket *username* parameter, and the checked state of the RememberMe CheckBox for the *persistCookie* parameter.</span></span>

<span data-ttu-id="b7bb4-319">Чтобы протестировать страницы входа, посетите его в браузере.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-319">To test the login page, visit it in a browser.</span></span> <span data-ttu-id="b7bb4-320">Начните с ввода недействительные учетные данные, такие как «Nope» имя пользователя и паролем «Неизвестная ошибка».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-320">Start by entering invalid credentials, such as a username of "Nope" and a password of "wrong".</span></span> <span data-ttu-id="b7bb4-321">После нажатия кнопки кнопки входа произойдет обратная передача, и будет отображаться метка InvalidCredentialsMessage.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-321">Upon clicking the Login button a postback will occur and the InvalidCredentialsMessage Label will be displayed.</span></span>


<span data-ttu-id="b7bb4-322">[![Метка InvalidCredentialsMessage — отображаются при вводе неверных учетных данных](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-322">[![The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span></span>

<span data-ttu-id="b7bb4-323">**Рис. 10**: Метка InvalidCredentialsMessage — отображаются при вводе неверных учетных данных ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-323">**Figure 10**: The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image26.png))</span></span>


<span data-ttu-id="b7bb4-324">Затем введите действительные учетные данные и нажмите кнопку "Вход".</span><span class="sxs-lookup"><span data-stu-id="b7bb4-324">Next, enter valid credentials and click the Login button.</span></span> <span data-ttu-id="b7bb4-325">Это время, при обратной передаче билета проверки подлинности создается и вы будете автоматически перенаправлены обратно на Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-325">This time when the postback occurs a forms authentication ticket is created and you are automatically redirected back to Default.aspx.</span></span> <span data-ttu-id="b7bb4-326">На этом этапе вы вошли на веб-сайт, несмотря на то, что нет никаких визуальных подсказок, чтобы указать, что вы вошли.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-326">At this point you have logged in to the website, although there are no visual cues to indicate that you are currently logged in.</span></span> <span data-ttu-id="b7bb4-327">На шаге 4, будет показано, как программно определять, может ли пользователь регистрируется в или не, а также способ идентификации пользователя, посещающего страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-327">In Step 4 we will see how to programmatically determine whether a user is logged in or not as well as how to identify the user visiting the page.</span></span>

<span data-ttu-id="b7bb4-328">Шаг 5 рассматриваются методы для ведения журнала пользователя из веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-328">Step 5 examines techniques for logging a user out of the website.</span></span>

### <a name="securing-the-login-page"></a><span data-ttu-id="b7bb4-329">Обеспечение безопасности на страницу входа</span><span class="sxs-lookup"><span data-stu-id="b7bb4-329">Securing the Login Page</span></span>

<span data-ttu-id="b7bb4-330">Когда пользователь вводит свои учетные данные и отправляет форму страницы входа, учетные данные, в том числе свой пароль — передаются через Интернет на веб-сервер в *обычный текст*.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-330">When the user enters her credentials and submits the login page form, the credentials – including her password – are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="b7bb4-331">Это означает, что любой злоумышленник, проанализировать сетевой трафик можно увидеть имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-331">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="b7bb4-332">Чтобы избежать этого, очень важно для шифрования сетевого трафика с помощью [Secure слои сокетов (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-332">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="b7bb4-333">Это позволит гарантировать, что учетные данные (а также всей страницы HTML-разметка) будут зашифрованы с момента они покидают браузера, пока они не будут получены веб-сервером.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-333">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

<span data-ttu-id="b7bb4-334">Если веб-сайт не содержит конфиденциальную информацию, будет достаточно для использования SSL на странице входа, а также на других страницах пароля бы в противном случае отправки по сети в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-334">Unless your website contains sensitive information, you will only need to use SSL on the login page and on other pages where the user's password would otherwise be sent over the wire in plain text.</span></span> <span data-ttu-id="b7bb4-335">Не нужно беспокоиться о защите билета проверки подлинности форм, так как, по умолчанию, он как шифрования и цифровой подписью (чтобы предотвратить незаконное изменение).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-335">You do not need to worry about securing the forms authentication ticket since, by default, it is both encrypted and digitally signed (to prevent tampering).</span></span> <span data-ttu-id="b7bb4-336">Более подробное обсуждение безопасности билет проверки подлинности forms представлены в следующем учебном курсе.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-336">A more thorough discussion on forms authentication ticket security is presented in the following tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-337">Многие финансовые и медицинские веб-сайты настроены для использования SSL на *все* страницы, доступной для прошедших проверку пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-337">Many financial and medical websites are configured to use SSL on *all* pages accessible to authenticated users.</span></span> <span data-ttu-id="b7bb4-338">При создании такого веб-сайта, система проверки подлинности форм можно настроить таким образом, чтобы только билета проверки подлинности передается через безопасное подключение.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-338">If you are building such a website you can configure the forms authentication system so that the forms authentication ticket is only transmitted over a secure connection.</span></span> <span data-ttu-id="b7bb4-339">Мы рассмотрим различные параметры конфигурации для форм проверки подлинности в следующем учебном курсе,  *[конфигурацию проверки подлинности форм и дополнительные разделы](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-339">We will look at the various forms authentication configuration options in the next tutorial, *[Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span></span>


## <a name="step-4-detecting-authenticated-visitors-and-determining-their-identity"></a><span data-ttu-id="b7bb4-340">Шаг 4. Обнаружение прошедшего проверку подлинности посетителей и определения их удостоверений</span><span class="sxs-lookup"><span data-stu-id="b7bb4-340">Step 4: Detecting Authenticated Visitors and Determining Their Identity</span></span>

<span data-ttu-id="b7bb4-341">На этом этапе мы включена проверка подлинности форм и создать страницу элементарные входа, но у нас есть еще для проверки того, как мы можно определить, является ли пользователь проверку подлинности или анонимные.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-341">At this point we have enabled forms authentication and created a rudimentary login page, but we have yet to examine how we can determine whether a user is authenticated or anonymous.</span></span> <span data-ttu-id="b7bb4-342">В некоторых сценариях нужно отображать сведения в зависимости от ли проверку подлинности или анонимный пользователь использует страницы или другие данные.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-342">In certain scenarios we may wish to display different data or information depending on whether an authenticated or anonymous user is visiting the page.</span></span> <span data-ttu-id="b7bb4-343">Кроме того мы часто нужно знать удостоверение пользователя, прошедшего проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-343">Moreover, we oftentimes need to know the identity of the authenticated user.</span></span>

<span data-ttu-id="b7bb4-344">Давайте расширить существующую страницу Default.aspx, чтобы продемонстрировать данные методы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-344">Let's augment the existing Default.aspx page to illustrate these techniques.</span></span> <span data-ttu-id="b7bb4-345">На странице Default.aspx добавьте двумя Панельными элементами управления, один именованный AuthenticatedMessagePanel и другой именованный AnonymousMessagePanel.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-345">In Default.aspx add two Panel controls, one named AuthenticatedMessagePanel and another named AnonymousMessagePanel.</span></span> <span data-ttu-id="b7bb4-346">Добавьте элемент управления Label с именем WelcomeBackMessage на первой панели.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-346">Add a Label control named WelcomeBackMessage in the first Panel.</span></span> <span data-ttu-id="b7bb4-347">На второй панели добавьте элемент управления HyperLink, задать его свойства Text «Вход» и его свойства NavigateUrl «~ / Login.aspx».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-347">In the second Panel add a HyperLink control, set its Text property to "Log In" and its NavigateUrl property to "~/Login.aspx".</span></span> <span data-ttu-id="b7bb4-348">На этом этапе декларативная разметка для Default.aspx должен выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-348">At this point the declarative markup for Default.aspx should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample6.aspx)]

<span data-ttu-id="b7bb4-349">Как вы уже, вероятно, догадались, здесь суть для отображения только AuthenticatedMessagePanel для прошедшего проверку подлинности посетителей и просто AnonymousMessagePanel для анонимных пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-349">As you have probably guessed by now, the idea here is to display just the AuthenticatedMessagePanel to authenticated visitors and just the AnonymousMessagePanel to anonymous visitors.</span></span> <span data-ttu-id="b7bb4-350">Для этого нам нужно установить эти панели видимых свойств в зависимости от того, вошел ли пользователь или нет.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-350">To accomplish this we need to set these Panels' Visible properties depending on whether the user is logged in or not.</span></span>

<span data-ttu-id="b7bb4-351">[Request.IsAuthenticated свойство](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) возвращает логическое значение, указывающее, прошел ли запрос проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-351">The [Request.IsAuthenticated property](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) returns a Boolean value indicating whether the request has been authenticated.</span></span> <span data-ttu-id="b7bb4-352">Введите следующий код в страницу\_загрузить код обработчика событий:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-352">Enter the following code into the Page\_Load event handler code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample7.cs)]

<span data-ttu-id="b7bb4-353">Этот код в месте посетите Default.aspx через браузер.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-353">With this code in place, visit Default.aspx through a browser.</span></span> <span data-ttu-id="b7bb4-354">Если у вас еще выполнить вход, вы увидите ссылку на страницу входа (см. рис. 11).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-354">Assuming that you have yet to log in, you will see a link to the login page (see Figure 11).</span></span> <span data-ttu-id="b7bb4-355">Щелкните эту ссылку и войдите на сайт.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-355">Click this link and log in to the site.</span></span> <span data-ttu-id="b7bb4-356">Как мы видели в шаге 3, после ввода учетных данных вы вернетесь к странице Default.aspx, но в настоящее время на странице отображается «Добро пожаловать назад!»</span><span class="sxs-lookup"><span data-stu-id="b7bb4-356">As we saw in Step 3, after entering your credentials you will be returned to Default.aspx, but this time the page shows the "Welcome back!"</span></span> <span data-ttu-id="b7bb4-357">сообщения (см. рис. 12).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-357">message (see Figure 12).</span></span>


![При посещении анонимно, ссылка журнала в отображении](an-overview-of-forms-authentication-cs/_static/image27.png)

<span data-ttu-id="b7bb4-359">**Рис. 11**: При посещении анонимно, ссылка журнала в отображении</span><span class="sxs-lookup"><span data-stu-id="b7bb4-359">**Figure 11**: When Visiting Anonymously, a Log In Link is Displayed</span></span>


![Отображаются пользователи, прошедшие проверку подлинности](an-overview-of-forms-authentication-cs/_static/image28.png)

<span data-ttu-id="b7bb4-361">**Рис. 12**: Прошедшие проверку подлинности пользователи отображаются «Добро пожаловать»!</span><span class="sxs-lookup"><span data-stu-id="b7bb4-361">**Figure 12**: Authenticated Users are Shown the "Welcome back!"</span></span> <span data-ttu-id="b7bb4-362">Сообщение</span><span class="sxs-lookup"><span data-stu-id="b7bb4-362">Message</span></span>


<span data-ttu-id="b7bb4-363">Мы можем определить удостоверение текущего пользователя через [объекта HttpContext](https://msdn.microsoft.com/library/system.web.httpcontext.aspx) [свойство пользователя](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-363">We can determine the currently logged on user's identity via the [HttpContext object](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [User property](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span></span> <span data-ttu-id="b7bb4-364">Объект HttpContext представляет сведения о текущем запросе и является центром для таких распространенных объектов ASP.NET, как ответ, запроса и сеанса, среди прочего.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-364">The HttpContext object represents information about the current request, and is the home for such common ASP.NET objects as Response, Request, and Session, among others.</span></span> <span data-ttu-id="b7bb4-365">Свойства пользователя представляет контекст безопасности текущего HTTP-запроса и реализует [интерфейс IPrincipal](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-365">The User property represents the security context of the current HTTP request and implements the [IPrincipal interface](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span></span>

<span data-ttu-id="b7bb4-366">Свойства пользователя задается FormsAuthenticationModule.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-366">The User property is set by the FormsAuthenticationModule.</span></span> <span data-ttu-id="b7bb4-367">В частности когда FormsAuthenticationModule находит билета проверки подлинности во входящем запросе, он создает новый объект GenericPrincipal и присваивает его свойству пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-367">Specifically, when the FormsAuthenticationModule finds a forms authentication ticket in the incoming request, it creates a new GenericPrincipal object and assigns it to the User property.</span></span>

<span data-ttu-id="b7bb4-368">Объекты-участники (такие как GenericPrincipal) предоставляют сведения о личности пользователя и роли, к которым они относятся.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-368">Principal objects (like GenericPrincipal) provide information on the user's identity and the roles to which they belong.</span></span> <span data-ttu-id="b7bb4-369">Интерфейс IPrincipal определяет два члена:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-369">The IPrincipal interface defines two members:</span></span>

- <span data-ttu-id="b7bb4-370">[IsInRole (*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) — метод, возвращающий логическое значение, указывающее, принадлежит ли участник в указанную роль.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-370">[IsInRole(*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – a method that returns a Boolean value indicating if the principal belongs to the specified role.</span></span>
- <span data-ttu-id="b7bb4-371">[Удостоверение](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) — свойство, которое возвращает объект, реализующий [интерфейс IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – a property that returns an object that implements the [IIdentity interface](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span></span> <span data-ttu-id="b7bb4-372">Интерфейс IIdentity определяет три свойства: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), и [имя](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-372">The IIdentity interface defines three properties: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), and [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span></span>

<span data-ttu-id="b7bb4-373">Можно определить имя текущего посетителя, используя следующий код:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-373">We can determine the name of the current visitor using the following code:</span></span>

<span data-ttu-id="b7bb4-374">string currentUsersName = User.Identity.Name;</span><span class="sxs-lookup"><span data-stu-id="b7bb4-374">string currentUsersName = User.Identity.Name;</span></span>

<span data-ttu-id="b7bb4-375">Когда с помощью форм проверки подлинности, [FormsIdentity объект](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) создается для GenericPrincipal свойство Identity.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-375">When using forms authentication, a [FormsIdentity object](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) is created for the GenericPrincipal's Identity property.</span></span> <span data-ttu-id="b7bb4-376">Класс FormsIdentity всегда возвращает строку «Forms» для свойства AuthenticationType и true для свойства IsAuthenticated.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-376">The FormsIdentity class always returns the string "Forms" for its AuthenticationType property and true for its IsAuthenticated property.</span></span> <span data-ttu-id="b7bb4-377">Свойство Name возвращает имя пользователя, указанный при создании билета проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-377">The Name property returns the username specified when creating the forms authentication ticket.</span></span> <span data-ttu-id="b7bb4-378">В дополнение к эти три свойства FormsIdentity включает доступ к базовой билет проверки подлинности с помощью его [билета свойство](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-378">In addition to these three properties, FormsIdentity includes access to the underlying authentication ticket via its [Ticket property](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span></span> <span data-ttu-id="b7bb4-379">Билет свойство возвращает объект типа [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), который имеет свойства, такие как срок действия, IsPersistent, IssueDate, имя и т. д.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-379">The Ticket property returns an object of type [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), which has properties like Expiration, IsPersistent, IssueDate, Name, and so on.</span></span>

<span data-ttu-id="b7bb4-380">Важно убрать здесь является то, что *username* параметр, указанный в FormsAuthentication.GetAuthCookie (*username*, *persistCookie*), FormsAuthentication.SetAuthCookie (*username*, *persistCookie*) и метод FormsAuthentication.RedirectFromLoginPage (*username*, *persistCookie*) методы — это же значение, возвращаемое User.Identity.Name.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-380">The important point to take away here is that the *username* parameter specified in the FormsAuthentication.GetAuthCookie(*username*, *persistCookie*), FormsAuthentication.SetAuthCookie(*username*, *persistCookie*), and FormsAuthentication.RedirectFromLoginPage(*username*, *persistCookie*) methods is the same value returned by User.Identity.Name.</span></span> <span data-ttu-id="b7bb4-381">Кроме того билет проверки подлинности, созданные при использовании этих методов доступна, приведение User.Identity объекту FormsIdentity и затем при обращении к свойству билета:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-381">Moreover, the authentication ticket created by these methods is available by casting User.Identity to a FormsIdentity object and then accessing the Ticket property:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample8.cs)]

<span data-ttu-id="b7bb4-382">Давайте предоставим более персонализированные сообщения в файле Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-382">Let's provide a more personalized message in Default.aspx.</span></span> <span data-ttu-id="b7bb4-383">Обновление страницы\_загрузки обработчика событий, таким образом, чтобы метки WelcomeBackMessage свойство Text присваивается строка «Добро пожаловать, *username*!»</span><span class="sxs-lookup"><span data-stu-id="b7bb4-383">Update the Page\_Load event handler so that the WelcomeBackMessage Label's Text property is assigned the string "Welcome back, *username*!"</span></span>

<span data-ttu-id="b7bb4-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span><span class="sxs-lookup"><span data-stu-id="b7bb4-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span></span>

<span data-ttu-id="b7bb4-385">Рис. 13 показан результат этого изменения (при входе в систему как пользователь Скотт).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-385">Figure 13 shows the effect of this modification (when logging in as user Scott).</span></span>


![Приветственное сообщение включает в себя пользователя в имени пользователя](an-overview-of-forms-authentication-cs/_static/image29.png)

<span data-ttu-id="b7bb4-387">**Рис. 13**: Приветственное сообщение включает в себя пользователя в имени пользователя</span><span class="sxs-lookup"><span data-stu-id="b7bb4-387">**Figure 13**: The Welcome Message Includes the Currently Logged In User's Name</span></span>


### <a name="using-the-loginview-and-loginname-controls"></a><span data-ttu-id="b7bb4-388">Используя LoginView и элементы управления LoginName</span><span class="sxs-lookup"><span data-stu-id="b7bb4-388">Using the LoginView and LoginName Controls</span></span>

<span data-ttu-id="b7bb4-389">Отображение различное содержимое для прошедшего проверку подлинности и анонимных пользователей часто используется; Поэтому отображает имя текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-389">Displaying different content to authenticated and anonymous users is a common requirement; so is displaying the name of the currently logged on user.</span></span> <span data-ttu-id="b7bb4-390">По этой причине в ASP.NET имеются два веб-элементы управления, которые обеспечивают ту же функциональность, показанный на рис. 13, но не требуется писать ни одной строки кода.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-390">For that reason, ASP.NET includes two Web controls that provide the same functionality shown in Figure 13, but without the need to write a single line of code.</span></span>

<span data-ttu-id="b7bb4-391">[Элемента управления LoginView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) является на основе шаблона веб-элемент управления, облегчающий отображают различные данные для прошедшего проверку подлинности и анонимных пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-391">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) is a template-based Web control that makes it easy to display different data to authenticated and anonymous users.</span></span> <span data-ttu-id="b7bb4-392">LoginView используются два стандартных шаблона:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-392">The LoginView includes two predefined templates:</span></span>

- <span data-ttu-id="b7bb4-393">AnonymousTemplate — любую разметку, добавляемый в этот шаблон отображается только для анонимных пользователей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-393">AnonymousTemplate – any markup added to this template is only displayed to anonymous visitors.</span></span>
- <span data-ttu-id="b7bb4-394">LoggedInTemplate – этот шаблон разметка показана только пользователям, прошедшим проверку.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-394">LoggedInTemplate – this template's markup is shown only to authenticated users.</span></span>

<span data-ttu-id="b7bb4-395">Давайте добавим элемент управления LoginView главную страницу наш сайт, Site.master.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-395">Let's add the LoginView control to our site's master page, Site.master.</span></span> <span data-ttu-id="b7bb4-396">Вместо добавления только элемента управления LoginView, давайте добавим обоих нового элемента ContentPlaceHolder элемента управления, а затем указать элемент управления LoginView в рамках этого нового элемента ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-396">Rather than adding just the LoginView control, though, let's add both a new ContentPlaceHolder control and then put the LoginView control within that new ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-397">Скоро станет очевидным обоснование для этого решения.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-397">The rationale for this decision will become apparent shortly.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-398">Помимо AnonymousTemplate и LoggedInTemplate элемент управления LoginView могут включать шаблоны конкретной роли.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-398">In addition to the AnonymousTemplate and LoggedInTemplate, the LoginView control can include role-specific templates.</span></span> <span data-ttu-id="b7bb4-399">Шаблоны для конкретных ролей Показать разметку только для пользователей, принадлежащих к определенной роли.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-399">Role-specific templates show markup only to those users that belong to a specified role.</span></span> <span data-ttu-id="b7bb4-400">В следующем учебном курсе мы рассмотрим возможности элемента управления LoginView на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-400">We will examine the role-based features of the LoginView control in a future tutorial.</span></span>


<span data-ttu-id="b7bb4-401">Начните с добавления элемента ContentPlaceHolder, с именем LoginContent в файл главной страницы в области навигации &lt;div&gt; элемент.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-401">Start by adding a ContentPlaceHolder named LoginContent into the master page within the navigation &lt;div&gt; element.</span></span> <span data-ttu-id="b7bb4-402">Можно просто перетащить элемент управления ContentPlaceHolder из области элементов в представлении источника, поместив разметка прямо над разделом «TODO: Меню будет здесь...» текст.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-402">You can simply drag a ContentPlaceHolder control from the Toolbox onto the Source view, placing the resulting markup right above the "TODO: Menu will go here…" text.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample9.aspx)]

<span data-ttu-id="b7bb4-403">Добавьте элемент управления LoginView в LoginContent ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-403">Next, add a LoginView control within the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-404">Содержимое, помещаются в элементы управления ContentPlaceHolder на главной странице, считаются *по умолчанию содержимое* для элемента ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-404">Content placed into the master page's ContentPlaceHolder controls are considered *default content* for the ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-405">То есть страницы ASP.NET, использующая эту главную страницу можно указать свой собственный контент для каждого элемента ContentPlaceHolder или использовать содержимое главной страницы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-405">That is, ASP.NET pages that use this master page can specify their own content for each ContentPlaceHolder or use the master page's default content.</span></span>

<span data-ttu-id="b7bb4-406">LoginView и другие элементы управления входа расположены на вкладке панели элементов имени входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-406">The LoginView and other login-related controls are located in the Toolbox's Login tab.</span></span>


![На панели инструментов элемента управления LoginView](an-overview-of-forms-authentication-cs/_static/image30.png)

<span data-ttu-id="b7bb4-408">**Рис. 14**: На панели инструментов элемента управления LoginView</span><span class="sxs-lookup"><span data-stu-id="b7bb4-408">**Figure 14**: The LoginView Control in the Toolbox</span></span>


<span data-ttu-id="b7bb4-409">Добавьте два &lt;br /&gt; элементов сразу после элемента управления LoginView, но по-прежнему внутри элемента ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-409">Next, add two &lt;br /&gt; elements immediately after the LoginView control, but still within the ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-410">На этом этапе навигации &lt;div&gt; элемента должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-410">At this point, the navigation &lt;div&gt; element's markup should look like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample10.aspx)]

<span data-ttu-id="b7bb4-411">Можно определить шаблоны LoginView из конструктора или декларативной разметке.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-411">The LoginView's templates can be defined from the Designer or the declarative markup.</span></span> <span data-ttu-id="b7bb4-412">В конструкторе Visual Studio разверните LoginView смарт-тег, который перечисляет настроенные шаблоны, в раскрывающемся списке.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-412">From Visual Studio's Designer, expand the LoginView's smart tag, which lists the configured templates in a drop-down list.</span></span> <span data-ttu-id="b7bb4-413">Введите текст «Hello, stranger» в AnonymousTemplate; затем добавьте элемент управления гиперссылки и задайте свойства текста и NavigateUrl, чтобы «Вход» и «~ / Login.aspx» соответственно.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-413">Type in the text "Hello, stranger" into the AnonymousTemplate; next, add a HyperLink control and set its Text and NavigateUrl properties to "Log In" and "~/Login.aspx", respectively.</span></span>

<span data-ttu-id="b7bb4-414">После настройки AnonymousTemplate, переключитесь на LoggedInTemplate и ввода текста, «Добро пожаловать,».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-414">After configuring the AnonymousTemplate, switch to the LoggedInTemplate and enter the text, "Welcome back, ".</span></span> <span data-ttu-id="b7bb4-415">Затем перетащите элемент управления LoginName из области элементов в LoggedInTemplate, поместив его непосредственно после «Добро пожаловать,» текст.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-415">Then drag a LoginName control from the Toolbox into the LoggedInTemplate, placing it immediately after the "Welcome back, " text.</span></span> <span data-ttu-id="b7bb4-416">[Управления LoginName](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), как предполагает название, имя пользователя, выполнившего вход.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-416">The [LoginName control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), as its name implies, displays the name of the currently logged in user.</span></span> <span data-ttu-id="b7bb4-417">На внутреннем уровне управления LoginName просто выводит свойство User.Identity.Name</span><span class="sxs-lookup"><span data-stu-id="b7bb4-417">Internally, the LoginName control simply outputs the User.Identity.Name property</span></span>

<span data-ttu-id="b7bb4-418">После внесения этих изменений в шаблоны LoginView, разметка должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-418">After making these additions to the LoginView's templates, the markup should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample11.aspx)]

<span data-ttu-id="b7bb4-419">В результате этого добавления к главной странице Site.master каждая страница в наш веб-сайт будет отображаться различные сообщения в зависимости от того, является ли пользователь проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-419">With this addition to the Site.master master page, each page in our website will display a different message depending on whether the user is authenticated.</span></span> <span data-ttu-id="b7bb4-420">Рис. 15 приведен на странице Default.aspx, при посещении через браузер пользователя Цзисунь.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-420">Figure 15 shows the Default.aspx page when visited through a browser by user Jisun.</span></span> <span data-ttu-id="b7bb4-421">Сообщение «С возвращением, Цзисунь» повторяется дважды: один раз в разделе на главной странице навигации в левой части (с помощью элемента управления LoginView, мы только что добавили) и один раз в файле Default.aspx содержимого области (с помощью панели элементов управления и программная логика).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-421">The "Welcome back, Jisun" message is repeated twice: once in the master page's navigation section on the left (via the LoginView control we just added) and once in the Default.aspx's content area (via Panel controls and programmatic logic).</span></span>


![Отображает элемент управления LoginView](an-overview-of-forms-authentication-cs/_static/image31.png)

<span data-ttu-id="b7bb4-423">**Рис. 15**: Отображает элемент управления LoginView «Добро пожаловать, Цзисунь.»</span><span class="sxs-lookup"><span data-stu-id="b7bb4-423">**Figure 15**: The LoginView Control Displays "Welcome back, Jisun."</span></span>


<span data-ttu-id="b7bb4-424">Так как мы добавили LoginView на главную страницу, она может отображаться на каждой странице на нашем сайте.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-424">Because we added the LoginView to the master page, it can appear in every page on our site.</span></span> <span data-ttu-id="b7bb4-425">Тем не менее могут существовать веб-страниц где мы не хотим показывать это сообщение.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-425">However, there may be web pages where we don't want to show this message.</span></span> <span data-ttu-id="b7bb4-426">Одну страницу является страница входа, так как ссылка на страницу входа кажется неуместными существует.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-426">One such page is the login page, since a link to the login page seems out of place there.</span></span> <span data-ttu-id="b7bb4-427">Так как мы разместили элемент управления LoginView в ContentPlaceHolder на главной странице, мы Эта разметка по умолчанию можно переопределить на нашей странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-427">Since we placed the LoginView control in a ContentPlaceHolder in the master page, we can override this default markup in our content page.</span></span> <span data-ttu-id="b7bb4-428">Откройте страницу Login.aspx и перейдите в конструктор.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-428">Open Login.aspx and go to the Designer.</span></span> <span data-ttu-id="b7bb4-429">Так как мы не определен явно элемент управления содержимым в Login.aspx LoginContent ContentPlaceHolder на главной странице, на странице входа будет отображаться разметки главной страницы по умолчанию для этого элемента ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-429">Since we have not explicitly defined a Content control in Login.aspx for the LoginContent ContentPlaceHolder in the master page, the login page will show the master page's default markup for this ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-430">Это можно увидеть через конструктор – LoginContent ContentPlaceHolder показана разметка по умолчанию (элемент управления LoginView).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-430">You can see this through the Designer – the LoginContent ContentPlaceHolder shows the default markup (the LoginView control).</span></span>


<span data-ttu-id="b7bb4-431">[![Страница входа отображается по умолчанию содержимое для элемента ContentPlaceHolder на главной странице LoginContent](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-431">[![The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span></span>

<span data-ttu-id="b7bb4-432">**Рис. 16**: На страницу входа отображается по умолчанию содержимое для элемента ContentPlaceHolder на главной странице LoginContent ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-432">**Figure 16**: The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image34.png))</span></span>


<span data-ttu-id="b7bb4-433">Чтобы переопределить стандартную разметку для LoginContent ContentPlaceHolder, просто щелкните правой кнопкой мыши в области конструктора и выберите параметр создания пользовательского содержимого в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-433">To override the default markup for the LoginContent ContentPlaceHolder, simply right-click on the region in the Designer and choose the Create Custom Content option from the context menu.</span></span> <span data-ttu-id="b7bb4-434">(Если использовать Visual Studio 2008 ContentPlaceHolder включают в себя область смарт-тега, при выборе предлагает тот же параметр.) Это добавляет нового содержимого элемента управления в разметке страницы и тем самым позволяет определить пользовательское содержимое для этой страницы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-434">(When using Visual Studio 2008 the ContentPlaceHolder includes a smart tag that, when selected, offers the same option.) This adds a new Content control to the page's markup and thereby allows us to define custom content for this page.</span></span> <span data-ttu-id="b7bb4-435">Может добавить пользовательское сообщение, например «Войдите» свежая новость, но давайте просто оставьте это поле пустым.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-435">You could add a custom message here, such as "Please log in…", but let's just leave this blank.</span></span>

> [!NOTE]
> <span data-ttu-id="b7bb4-436">В Visual Studio 2005 при создании пользовательского содержимого создается пустой содержимого элемента управления на странице ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-436">In Visual Studio 2005, creating custom content creates an empty Content control in the ASP.NET page.</span></span> <span data-ttu-id="b7bb4-437">В Visual Studio 2008 Однако создание пользовательского содержимого копирует содержимое главной страницы по умолчанию в только что созданный элемент управления содержимым.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-437">In Visual Studio 2008, however, creating custom content copies the master page's default content into the newly created Content control.</span></span> <span data-ttu-id="b7bb4-438">Если вы используете Visual Studio 2008, затем, после создания нового содержимого элемента управления убедитесь, что для очистки содержимого, копируемые из главной страницы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-438">If you are using Visual Studio 2008, then, after creating the new Content control make sure to clear out the content copied over from the master page.</span></span>


<span data-ttu-id="b7bb4-439">Рис. 17 показано на страницу Login.aspx при посещении страниц в браузере после внесения этого изменения.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-439">Figure 17 shows the Login.aspx page when visited from a browser after making this change.</span></span> <span data-ttu-id="b7bb4-440">Обратите внимание, что не «Hello, stranger» или «Добро пожаловать, *username*"сообщения в области навигации слева &lt;div&gt; как при посещении Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-440">Note that there is no "Hello, stranger" or "Welcome back, *username*" message in the left navigation &lt;div&gt; as there is when visiting Default.aspx.</span></span>


<span data-ttu-id="b7bb4-441">[![На страницу входа скрывает разметки элемента LoginContent ContentPlaceHolder по умолчанию](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-441">[![The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span></span>

<span data-ttu-id="b7bb4-442">**Рис. 17**: На страницу входа скрывает разметки LoginContent ContentPlaceHolder по умолчанию ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-442">**Figure 17**: The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image37.png))</span></span>


## <a name="step-5-logging-out"></a><span data-ttu-id="b7bb4-443">Шаг 5. При выходе</span><span class="sxs-lookup"><span data-stu-id="b7bb4-443">Step 5: Logging Out</span></span>

<span data-ttu-id="b7bb4-444">На шаге 3 мы рассмотрели создание страницу входа для входа пользователя в систему на сайте, но мы еще должен проверить, как выполнить выход пользователя. Помимо методов для входа пользователя в FormsAuthentication класс также предоставляет [SignOut метод](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-444">In Step 3 we looked at building a login page to log a user in to the site, but we have yet to see how to log a user out. In addition to methods for logging a user in, the FormsAuthentication class also provides a [SignOut method](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span></span> <span data-ttu-id="b7bb4-445">Метод SignOut просто уничтожает билета проверки подлинности, тем самым ведение журнала пользователя из узла.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-445">The SignOut method simply destroys the forms authentication ticket, thereby logging the user out of the site.</span></span>

<span data-ttu-id="b7bb4-446">Предлагают журнал out ссылка — это стандартная функция ASP.NET включает в себя элемент управления, специально разработанные для выхода пользователя. [Управления LoginStatus](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) отображает LinkButton «Login» или «Выход» LinkButton, в зависимости от состояния проверки подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-446">Offering a log out link is such a common feature that ASP.NET includes a control specifically designed to log a user out. The [LoginStatus control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) displays either a "Login" LinkButton or a "Logout" LinkButton, depending on the user's authentication status.</span></span> <span data-ttu-id="b7bb4-447">«Вход» LinkButton подготавливается к просмотру для анонимных пользователей, тогда как LinkButton «Logout» отображается пользователям, прошедшим проверку.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-447">A "Login" LinkButton is rendered for anonymous users, whereas a "Logout" LinkButton is displayed to authenticated users.</span></span> <span data-ttu-id="b7bb4-448">Текст для элементов управления LinkButton «Выход» и «Login» можно настроить с помощью параметра LoginStatus LoginText и LogoutText свойства.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-448">The text for the "Login" and "Logout" LinkButtons can be configured via the LoginStatus's LoginText and LogoutText properties.</span></span>

<span data-ttu-id="b7bb4-449">Щелчок LinkButton «Вход» вызывает обратную передачу, из которого выпускается перенаправление на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-449">Clicking the "Login" LinkButton causes a postback, from which a redirect is issued to the login page.</span></span> <span data-ttu-id="b7bb4-450">Щелчок LinkButton «Logout» элемент управления LoginStatus для вызова метода FormsAuthentication.SignOff и затем перенаправляет пользователя на страницу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-450">Clicking the "Logout" LinkButton causes the LoginStatus control to invoke the FormsAuthentication.SignOff method and then redirects the user to a page.</span></span> <span data-ttu-id="b7bb4-451">Страница, вошедших в систему сеанс пользователя перенаправляется зависит от свойства LogoutAction, которое может быть назначено одному из трех следующих значений:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-451">The page the logged off user is redirected to depends on the LogoutAction property, which can be assigned to one of the three following values:</span></span>

- <span data-ttu-id="b7bb4-452">Обновление — по умолчанию. перенаправляет пользователя на страницу, на который они просто посещаете.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-452">Refresh – the default; redirects the user to the page they were just visiting.</span></span> <span data-ttu-id="b7bb4-453">Если страница, которую они просто посещения не позволяет анонимным пользователям, затем FormsAuthenticationModule будет автоматически перенаправлять пользователя на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-453">If the page they were just visiting does not allow anonymous users, then the FormsAuthenticationModule will automatically redirect the user to the login page.</span></span>

<span data-ttu-id="b7bb4-454">Возможно, чтобы узнать, почему здесь выполняется перенаправление.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-454">You may be curious as to why a redirect is performed here.</span></span> <span data-ttu-id="b7bb4-455">Если пользователь хочет остаются на той же странице, почему необходимости явного перенаправления?</span><span class="sxs-lookup"><span data-stu-id="b7bb4-455">If the user wants to remain on the same page, why the need for the explicit redirect?</span></span> <span data-ttu-id="b7bb4-456">Причина в том, так как при щелчке элемента управления LinkButton «Выход», пользователь по-прежнему имеет билета проверки подлинности в своей коллекции файлов cookie.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-456">The reason is because when the "Logoff" LinkButton is clicked, the user still has the forms authentication ticket in their cookies collection.</span></span> <span data-ttu-id="b7bb4-457">Поэтому обратного запроса является запрос с проверкой подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-457">Consequently, the postback request is an authenticated request.</span></span> <span data-ttu-id="b7bb4-458">Элемент управления LoginStatus вызывает метод SignOut, однако это происходит после FormsAuthenticationModule проверки подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-458">The LoginStatus control calls the SignOut method, but that happens after the FormsAuthenticationModule has authenticated the user.</span></span> <span data-ttu-id="b7bb4-459">Таким образом явного перенаправления браузер для повторного запроса страницы.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-459">Therefore, an explicit redirect causes the browser to re-request the page.</span></span> <span data-ttu-id="b7bb4-460">Когда браузер повторно запрашивает страницу билета проверки подлинности была удалена, и поэтому входящего запроса является анонимным.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-460">By the time the browser re-requests the page, the forms authentication ticket has been removed and therefore the incoming request is anonymous.</span></span>

- <span data-ttu-id="b7bb4-461">Перенаправление — пользователь перенаправляется на URL-адрес, указанный в свойстве LogoutPageUrl LoginStatus.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-461">Redirect – the user is redirected to the URL specified by the LoginStatus's LogoutPageUrl property.</span></span>
- <span data-ttu-id="b7bb4-462">RedirectToLoginPage — пользователь перенаправляется на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-462">RedirectToLoginPage – the user is redirected to the login page.</span></span>

<span data-ttu-id="b7bb4-463">Добавим элемент управления LoginStatus на главную страницу и настроить его для использования перенаправления параметр будет перенаправлен на страницу, на которой отображается сообщение, подтверждающее, что они вышли из системы. Начните с создания страницу в корневом каталоге с именем Logout.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-463">Let's add a LoginStatus control to the master page and configure it to use the Redirect option to send the user to a page that displays a message confirming that they have been signed out. Start by creating a page in the root directory named Logout.aspx.</span></span> <span data-ttu-id="b7bb4-464">Не забудьте связать эту страницу со страницей Site.master.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-464">Don't forget to associate this page with the Site.master master page.</span></span> <span data-ttu-id="b7bb4-465">Затем введите сообщение в разметке страницы, объясняющее пользователю, который они отключены.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-465">Next, enter a message in the page's markup explaining to the user that they have been logged out.</span></span>

<span data-ttu-id="b7bb4-466">Затем вернуться на главную страницу Site.master и добавьте элемент управления LoginStatus под LoginView в LoginContent ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-466">Next, return to the Site.master master page and add a LoginStatus control beneath the LoginView in the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="b7bb4-467">Задать свойства элемента управления LoginStatus LogoutAction перенаправление и его свойства LogoutPageUrl «~ / Logout.aspx».</span><span class="sxs-lookup"><span data-stu-id="b7bb4-467">Set the LoginStatus control's LogoutAction property to Redirect and its LogoutPageUrl property to "~/Logout.aspx".</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample12.aspx)]

<span data-ttu-id="b7bb4-468">Поскольку за пределами элемента управления LoginView LoginStatus, он будет отображаться для пользователей, прошедших проверку подлинности и анонимный, но это нормально, так как LoginStatus будет правильно отображать «Login» или «Выход» LinkButton.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-468">Since the LoginStatus is outside of the LoginView control, it will appear for both anonymous and authenticated users, but that's OK because the LoginStatus will correctly display a "Login" or "Logout" LinkButton.</span></span> <span data-ttu-id="b7bb4-469">С добавлением элемента управления LoginStatus HyperLink «Вход» в AnonymousTemplate является излишним, поэтому удалите ее.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-469">With the addition of the LoginStatus control, the "Log In" HyperLink in the AnonymousTemplate is superfluous, so remove it.</span></span>

<span data-ttu-id="b7bb4-470">Рис. 18 показана Default.aspx, когда Цзисунь посещает.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-470">Figure 18 shows Default.aspx when Jisun visits.</span></span> <span data-ttu-id="b7bb4-471">Обратите внимание на то, что в левом столбце отображается сообщение, «Добро пожаловать, Цзисунь» вместе со ссылкой, чтобы выйти. Щелкните Выход LinkButton вызывает обратную передачу, Цзисунь выходит из системы и затем перенаправляет ей Logout.aspx.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-471">Note that the left column displays the message, "Welcome back, Jisun" along with a link to log out. Clicking the log out LinkButton causes a postback, signs Jisun out of the system, and then redirects her to Logout.aspx.</span></span> <span data-ttu-id="b7bb4-472">Как показано на рис. 19, к моменту Цзисунь достигает Logout.aspx она уже выхода и таким образом является анонимным.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-472">As Figure 19 shows, by the time Jisun reaches Logout.aspx she has already been signed out and is therefore anonymous.</span></span> <span data-ttu-id="b7bb4-473">Следовательно, в левом столбце отображается текст «Добро пожаловать, stranger» и ссылку на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-473">Consequently, the left column shows the text "Welcome, stranger" and a link to the login page.</span></span>


<span data-ttu-id="b7bb4-474">[![Показывает Default.aspx](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-474">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span></span>

<span data-ttu-id="b7bb4-475">**Рис. 18**: Default.aspx показано «Добро пожаловать, Цзисунь» вместе с LinkButton «Logout» ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-475">**Figure 18**: Default.aspx Shows "Welcome Back, Jisun" Along with a "Logout" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image40.png))</span></span>


<span data-ttu-id="b7bb4-476">[![Показывает Logout.aspx](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-476">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span></span>

<span data-ttu-id="b7bb4-477">**Рис. 19**: Logout.aspx показано «Добро пожаловать, stranger» вместе с LinkButton «Login» ([Просмотр полноразмерного изображения](an-overview-of-forms-authentication-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="b7bb4-477">**Figure 19**: Logout.aspx Shows "Welcome, stranger" Along with a "Login" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image43.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b7bb4-478">Я советую вам для настройки страницы Logout.aspx для скрытия элемента ContentPlaceHolder на главной странице LoginContent (как это делалось для Login.aspx на шаге 4).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-478">I encourage you to customize the Logout.aspx page to hide the master page's LoginContent ContentPlaceHolder (like we did for Login.aspx in Step 4).</span></span> <span data-ttu-id="b7bb4-479">Потому, что отображаемый элементом управления LoginStatus LinkButton «Login» (один под «Hello, stranger») направляет пользователя на страницу входа, передавая параметр строки запроса ReturnUrl текущий URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-479">The reason is because the "Login" LinkButton rendered by the LoginStatus control (the one beneath "Hello, stranger") sends the user to the login page passing the current URL in the ReturnUrl querystring parameter.</span></span> <span data-ttu-id="b7bb4-480">Иными словами Если пользователь, выполнивший вход out щелкает этот LoginStatus LinkButton «Вход» и затем регистрирует в, они будут перенаправляться к Logout.aspx, который легко может запутать пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-480">In short, if a user who has logged out clicks this LoginStatus's "Login" LinkButton, and then logs in, they will be redirected back to Logout.aspx, which could easily confuse the user.</span></span>


## <a name="summary"></a><span data-ttu-id="b7bb4-481">Сводка</span><span class="sxs-lookup"><span data-stu-id="b7bb4-481">Summary</span></span>

<span data-ttu-id="b7bb4-482">В этом руководстве мы к работе с проверкой рабочего процесса проверки подлинности форм, а затем выключили для реализации проверки подлинности форм в приложении ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-482">In this tutorial we started with an examination of the forms authentication workflow and then turned to implementing forms authentication in an ASP.NET application.</span></span> <span data-ttu-id="b7bb4-483">Проверка подлинности форм работает на платформе FormsAuthenticationModule, который имеет два вида ответственности: идентификации пользователей, исходя их билета проверки подлинности и Перенаправление неавторизованных пользователей на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-483">Forms authentication is powered by the FormsAuthenticationModule, which has two responsibilities: identifying users based on their forms authentication ticket, and redirecting unauthorized users to the login page.</span></span>

<span data-ttu-id="b7bb4-484">Класс FormsAuthentication платформы .NET Framework включает методы для создания, проверки и удаления билеты аутентификации форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-484">The .NET Framework's FormsAuthentication class includes methods for creating, inspecting, and removing forms authentication tickets.</span></span> <span data-ttu-id="b7bb4-485">Свойство Request.IsAuthenticated и объект пользователя предоставляют дополнительные программную поддержку для определения, является ли запрос проходит проверку подлинности и сведения об удостоверении пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-485">The Request.IsAuthenticated property and User object provide additional programmatic support for determining whether a request is authenticated and information about the user's identity.</span></span> <span data-ttu-id="b7bb4-486">Кроме того, существуют также элементы управления LoginView, LoginStatus и LoginName Web, которые предоставляют разработчикам возможность быстрого написания кода способ для выполнения многих обычных задач, относящихся ко входу.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-486">There are also the LoginView, LoginStatus, and LoginName Web controls, which give developers a quick, code-free way for performing many common login-related tasks.</span></span> <span data-ttu-id="b7bb4-487">Мы рассмотрим эти и другие связанные с входом веб-элементы управления более подробно в последующих учебных курсах.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-487">We will examine these and other login-related Web controls in greater detail in future tutorials.</span></span>

<span data-ttu-id="b7bb4-488">Этот учебник предоставляются проводится поверхностное обзор проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-488">This tutorial provided a cursory overview of forms authentication.</span></span> <span data-ttu-id="b7bb4-489">Мы не изучить различные параметры, рассмотрим, как без поддержки файлов cookie рабочих билетов проверки подлинности форм или изучите, как ASP.NET позволяет защитить содержимое билета проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-489">We did not examine the assorted configuration options, look at how cookieless forms authentication tickets work, or explore how ASP.NET protects the contents of the forms authentication ticket.</span></span> <span data-ttu-id="b7bb4-490">Будут рассмотрены эти и другие в темы [следующему руководству](forms-authentication-configuration-and-advanced-topics-cs.md).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-490">We will discuss these topics and more in the [next tutorial](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span>

<span data-ttu-id="b7bb4-491">Счастливого вам программирования!</span><span class="sxs-lookup"><span data-stu-id="b7bb4-491">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b7bb4-492">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="b7bb4-492">Further Reading</span></span>

<span data-ttu-id="b7bb4-493">Дополнительные сведения по темам, обсуждавшимся в этом руководстве см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="b7bb4-493">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b7bb4-494">Изменения между IIS6 и системы безопасности в IIS7</span><span class="sxs-lookup"><span data-stu-id="b7bb4-494">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="b7bb4-495">Элементы управления входом ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b7bb4-495">Login ASP.NET Controls</span></span>](https://msdn.microsoft.com/library/d51ttbhx.aspx)
- <span data-ttu-id="b7bb4-496">[Professional ASP.NET 2.0 безопасности, членства и управления ролями](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-496">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="b7bb4-497">`<authentication>` Элемент</span><span class="sxs-lookup"><span data-stu-id="b7bb4-497">The `<authentication>` Element</span></span>](https://msdn.microsoft.com/library/532aee0e.aspx)
- [<span data-ttu-id="b7bb4-498">`<forms>` -Элемент для `<authentication>`</span><span class="sxs-lookup"><span data-stu-id="b7bb4-498">The `<forms>` Element for `<authentication>`</span></span>](https://msdn.microsoft.com/library/1d3t3c61.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="b7bb4-499">Учебные видеоматериалы по таким темам, содержащихся в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="b7bb4-499">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="b7bb4-500">Использование базовой проверки подлинности на основе форм в ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b7bb4-500">Using Basic Forms Authentication in ASP.NET</span></span>](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md)

## <a name="about-the-author"></a><span data-ttu-id="b7bb4-501">Об авторе</span><span class="sxs-lookup"><span data-stu-id="b7bb4-501">About the Author</span></span>

<span data-ttu-id="b7bb4-502">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP.NET и основатель веб- [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Microsoft с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b7bb4-503">Скотт — независимый консультант, преподаватель и автор.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-503">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b7bb4-504">Его последняя книга — [ *Sams Teach ASP.NET 2.0 in 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-504">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b7bb4-505">Ним можно связаться по адресу [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-505">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="b7bb4-506">или через его блог, который можно найти в [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b7bb4-506">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="b7bb4-507">Особая благодарность</span><span class="sxs-lookup"><span data-stu-id="b7bb4-507">Special Thanks To…</span></span>

<span data-ttu-id="b7bb4-508">В этой серии руководств пособий рецензировалась многими компетентными редакторами.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-508">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b7bb4-509">Основной рецензент этого учебного был в этом учебном курсе серии пособий рецензировалась многими компетентными редакторами.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-509">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b7bb4-510">Лиз Шалок в этом руководстве включают Alicja Maziarz (John suru) и Терезой Мерфи.</span><span class="sxs-lookup"><span data-stu-id="b7bb4-510">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="b7bb4-511">Хотите поработать с моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="b7bb4-511">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b7bb4-512">Если Да, напишите мне [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-512">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b7bb4-513">[Назад](security-basics-and-asp-net-support-cs.md)
> [Вперед](forms-authentication-configuration-and-advanced-topics-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b7bb4-513">[Previous](security-basics-and-asp-net-support-cs.md)
[Next](forms-authentication-configuration-and-advanced-topics-cs.md)</span></span>
