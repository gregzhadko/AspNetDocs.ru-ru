---
uid: web-forms/overview/performance-and-caching/using-asynchronous-methods-in-aspnet-45
title: Использование асинхронных методов в ASP.NET 4,5 | Документация Майкрософт
author: Rick-Anderson
description: В этом учебнике вы узнаете об основах создания асинхронного приложения ASP.NET Web Forms с помощью Visual Studio Express 2012 для Web, что является бесплатным...
ms.author: riande
ms.date: 01/02/2019
ms.assetid: a585c9a2-7c8e-478b-9706-90f3739c50d1
msc.legacyurl: /web-forms/overview/performance-and-caching/using-asynchronous-methods-in-aspnet-45
msc.type: authoredcontent
ms.openlocfilehash: 7abc3d7acc60d7d868958f2a313bc408f96c95a4
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78507168"
---
# <a name="using-asynchronous-methods-in-aspnet-45"></a>Использование асинхронных методов в ASP.NET 4.5

по [Рик Андерсон (](https://twitter.com/RickAndMSFT)

> В этом учебнике вы узнаете об основах создания асинхронного приложения ASP.NET Web Forms с помощью [Visual Studio Express 2012 для Web](https://www.microsoft.com/visualstudio/11), которое является бесплатной версией Microsoft Visual Studio. Также можно использовать [Visual Studio 2012](https://www.microsoft.com/visualstudio/11). В этом руководстве содержатся следующие разделы.
> 
> - [Обработка запросов пулом потоков](#HowRequestsProcessedByTP)
> - [Выбор синхронных или асинхронных методов](#ChoosingSyncVasync)
> - [Пример приложения](#SampleApp)
> - [Синхронная страница приспособлений](#GizmosSynch)
> - [Создание асинхронной страницы приспособлений](#CreatingAsynchGizmos)
> - [Параллельное выполнение нескольких операций](#Parallel)
> - [Использование токена отмены](#CancelToken)
> - [Конфигурация сервера для вызовов веб-службы с высоким уровнем параллелизма и высокой задержкой](#ServerConfig)
> 
> Полный пример для этого руководства приведен на  
> [https://github.com/RickAndMSFT/Async-ASP.NET/](https://github.com/RickAndMSFT/Async-ASP.NET/) на сайте [GitHub](https://github.com/) .

ASP.NET 4,5. веб-страницы в комбинации [.net 4,5](https://msdn.microsoft.com/library/w0x726c2(VS.110).aspx) позволяют регистрировать асинхронные методы, возвращающие объект типа [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx). В .NET Framework 4 появилась концепция асинхронного программирования, называемая [задачей](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) , а ASP.NET 4,5 поддерживает [задачу](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx). Задачи представлены типом **задачи** и связанными типами в пространстве имен [System. Threading. Tasks](https://msdn.microsoft.com/library/system.threading.tasks.aspx) . .NET Framework 4,5 построена на этой асинхронной поддержке с помощью ключевых слов [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) и [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) , которые делают работу с объектами [задач](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) гораздо менее сложными, чем предыдущие асинхронные подходы. Ключевое слово [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) — это сокращенная синтаксическая форма, указывающая, что фрагмент кода должен асинхронно ожидать какой-либо другой фрагмент кода. Ключевое слово [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) представляет указание, которое можно использовать для пометки методов как асинхронных методов, основанных на задачах. Сочетание **await**, **Async**и объекта **Task** значительно упрощает написание асинхронного кода в .NET 4,5. Новая модель для асинхронных методов называется *асинхронной моделью на основе задач* (**TAP**). В этом учебнике предполагается, что вы знакомы с асинхронной программой с помощью ключевых слов [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) и [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) и пространства имен [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) .

Дополнительные сведения о ключевых словах с использованием [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) и [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) и пространстве имен [задачи](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) см. в следующих статьях.

- [Технический документ: асинхронность в .NET](https://go.microsoft.com/fwlink/?LinkId=204844)
- [Асинхронные/неожидаемые вопросы и ответы](https://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)
- [Асинхронное программирование в Visual Studio](https://msdn.microsoft.com/vstudio/gg316360)

## <a id="HowRequestsProcessedByTP"></a>Обработка запросов пулом потоков

На веб-сервере .NET Framework поддерживает пул потоков, используемых для обслуживания запросов ASP.NET. При получении запроса, для его обработки из этого пула выделяется поток. Если запрос обрабатывается синхронно, поток, обрабатывающий запрос, занят во время обработки запроса, и этот поток не может обслуживать другой запрос.   
  
Это может не быть проблемой, так как пул потоков можно сделать достаточно большим для размещения множества занятых потоков. Однако количество потоков в пуле потоков ограничено (максимальное значение по умолчанию для .NET 4,5 — 5 000). В больших приложениях с высоким параллелизмом долго выполняющихся запросов все доступные потоки могут быть заняты. Такая ситуация называется нехваткой потоков. При достижении этого условия веб-сервер помещает запросы в очередь. Если очередь запросов заполнена, веб-сервер отклоняет запросы с состоянием HTTP 503 (сервер слишком занят). Пул потоков CLR имеет ограничения на новые внедрения потоков. Если параллелизм — это пакетная обработка (то есть веб-сайт может получить большое количество запросов), а все доступные потоки запросов заняты из-за внутренних вызовов с высокой задержкой, ограниченная скорость внедрения потоков может привести к плохому реагированию приложения. Кроме того, каждый новый поток, добавляемый в пул потоков, имеет накладные расходы (например, 1 МБ стековой памяти). Веб-приложение, использующее синхронные методы для обработки вызовов с высокой задержкой, когда пул потоков увеличился до версии .NET 4,5 по умолчанию (5), 000 потоков потребляет примерно 5 ГБ памяти, чем приложение может обрабатывать те же запросы с помощью асинхронные методы и только 50 потоков. При выполнении асинхронной работы вы не всегда используете поток. Например, при выполнении асинхронного запроса веб-службы ASP.NET не будет использовать потоки между **асинхронным** вызовом метода и **await**. Использование пула потоков для запросов на обслуживание с высокой задержкой может привести к увеличению объема памяти и низкому использованию аппаратного обеспечения сервера.

## <a name="processing-asynchronous-requests"></a>Обработка асинхронных запросов

В веб-приложениях, которые видят большое количество одновременных запросов при запуске или имеют нагрузку с максимальной нагрузкой (при внезапном увеличении параллелизма), вызов веб-службы приведет к увеличению скорости реагирования приложения. Асинхронный запрос обрабатывается такое же количество времени, что и синхронный запрос. Например, если запрос выполняет вызов веб-службы, для которого требуется две секунды, запрос занимает две секунды независимо от того, выполняется ли оно синхронно или асинхронно. Однако во время асинхронного вызова поток не блокирует реагирование на другие запросы, пока он ожидает завершения первого запроса. Поэтому асинхронные запросы предотвращают увеличение очереди запросов и роста пула потоков при наличии большого количества параллельных запросов, вызывающих длительные операции.

## <a id="ChoosingSyncVasync"></a>Выбор синхронных или асинхронных методов

В этом разделе приводятся рекомендации по использованию синхронных или асинхронных методов. Это только рекомендации. Изучите каждое приложение по отдельности, чтобы определить, помогают ли асинхронные методы обеспечить производительность.

Как правило, используйте синхронные методы для следующих условий:

- Операции являются простыми и кратковременными.
- Простота имеет большое значение, чем эффективность.
- Операции в основном являются операциями ЦП, а не операциями, в которых широко используется диск или сетевые ресурсы. Использование асинхронных методов в операциях, связанных с ЦП, не дает никаких преимуществ и дает дополнительные издержки.

Как правило, используйте асинхронные методы для следующих условий:

- Вы вызываете службы, которые могут использоваться асинхронными методами, и вы используете .NET 4,5 или более поздней версии.
- Операции связаны с использованием сети или ввода-вывода, а не с ЦП.
- Параллелизм имеет большее значение, чем простота кода.
- Необходимо предоставить механизм, который позволяет пользователям отменить длительные по времени запросы.
- Если преимущество переключения потоков превышает затраты на переключение контекста. Как правило, метод следует делать асинхронным, если синхронный метод блокирует поток запроса ASP.NET, не выполняя никаких действий. Делая вызов асинхронным, поток запроса ASP.NET не блокируется, пока ожидает завершения запроса веб-службы.
- Тестирование показывает, что блокирующие операции являются узким местом в производительности сайта и что IIS может обслуживать больше запросов с помощью асинхронных методов для этих блокирующих вызовов.

  В загружаемом образце показано, как эффективно использовать асинхронные методы. Представленный образец предназначен для простой демонстрации асинхронного программирования в ASP.NET 4,5. Образец не предназначен для использования в качестве эталонной архитектуры для асинхронного программирования в ASP.NET. Пример программы вызывает [веб-API ASP.NET](../../../web-api/index.md) методы, которые в свою очередь вызывают [Task. Delay](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) для имитации длительно выполняемых вызовов веб-служб. Большинство рабочих приложений не будут показывать такие очевидные преимущества при использовании асинхронных методов.   
  
Для некоторых приложений требуется, чтобы все методы были асинхронными. Часто преобразование нескольких синхронных методов в асинхронные методы обеспечивает лучшее повышение эффективности для требуемого объема работы.

## <a id="SampleApp"></a>Пример приложения

Вы можете скачать пример приложения из [https://github.com/RickAndMSFT/Async-ASP.NET](https://github.com/RickAndMSFT/Async-ASP.NET) на сайте [GitHub](https://github.com/) . Репозиторий состоит из трех проектов:

- *Вебаппасинк*: проект веб-форм ASP.NET, использующий службу **ВЕБАПИПВГ** веб-API. Большая часть кода для этого учебника относится к этому проекту.
- *Вебапипгв*: проект веб-API ASP.NET MVC 4, который реализует контроллеры `Products, Gizmos and Widgets`. Он предоставляет данные для проекта *вебаппасинк* и проекта *Mvc4Async* .
- *Mvc4Async*: проект ASP.NET MVC 4, содержащий код, используемый в другом учебнике. Он выполняет вызовы веб-API в службу **вебапипвг** .

## <a id="GizmosSynch"></a>Синхронная страница приспособлений

 В следующем коде показан `Page_Load` синхронный метод, используемый для отображения списка приспособлений. (В этой статье гизмо — вымышленное механическое устройство.) 

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample1.cs)]

В следующем коде показан метод `GetGizmos` службы гизмо.

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample2.cs)]

Метод `GizmoService GetGizmos` передает универсальный код ресурса (URI) веб-API ASP.NET службе HTTP, которая возвращает список данных приспособлений. Проект *вебапипгв* содержит реализацию `gizmos, widget` и контроллеров `product` веб-API.  
На следующем рисунке показана страница приспособлений из примера проекта.

![Приспособлений](using-asynchronous-methods-in-aspnet-45/_static/image1.png)

## <a id="CreatingAsynchGizmos"></a>Создание асинхронной страницы приспособлений

В примере используются новые ключевые слова [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) и [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) (доступные в .NET 4,5 и Visual Studio 2012), позволяющие компилятору отвечать за поддержание сложных преобразований, необходимых для асинхронного программирования. Компилятор позволяет писать код с помощью C#синхронных конструкций потока управления, и компилятор автоматически применяет преобразования, необходимые для использования обратных вызовов, чтобы избежать блокировки потоков.

Асинхронные страницы ASP.NET должны содержать директиву [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) с атрибутом `Async`, для которого задано значение true. В следующем коде показана директива [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) с атрибутом `Async`, для которого задано значение true для страницы *гизмосасинк. aspx* .

[!code-aspx[Main](using-asynchronous-methods-in-aspnet-45/samples/sample3.aspx?highlight=1)]

В следующем коде показан `Gizmos` синхронный метод `Page_Load` и асинхронная страница `GizmosAsync`. Если ваш браузер поддерживает [HTML 5 &lt;mark&gt;](http://www.w3.org/wiki/HTML/Elements/mark), вы увидите изменения в `GizmosAsync`, выделенные желтым цветом.

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample4.cs)]

Асинхронная версия:

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample5.cs?highlight=3,6-7,9,11)]

 Для того, чтобы страница `GizmosAsync` была асинхронной, были применены следующие изменения.

- Директива [страницы](https://msdn.microsoft.com/library/ydy4x04a.aspx) должна иметь атрибут `Async` со значением "true".
- Метод `RegisterAsyncTask` используется для регистрации асинхронной задачи, содержащей код, который выполняется асинхронно.
- Новый метод `GetGizmosSvcAsync` помечается ключевым словом [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) , которое указывает компилятору создавать обратные вызовы для частей тела и автоматически создавать возвращаемые `Task`.
- &quot;асинхронный&quot; был добавлен к имени асинхронного метода. Добавление "Async" не является обязательным, но является соглашением при написании асинхронных методов.
- Тип возвращаемого значения нового метода `GetGizmosSvcAsync` `Task`. Тип возвращаемого значения `Task` представляет текущую работу и предоставляет вызывающие методы метода с помощью обработчика, который ожидает завершения асинхронной операции.
- Ключевое слово [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) было применено к вызову веб-службы.
- Вызван API асинхронной веб-службы (`GetGizmosAsync`).

В теле метода `GetGizmosSvcAsync`а другой асинхронный метод, вызывается `GetGizmosAsync`. `GetGizmosAsync` немедленно возвращает `Task<List<Gizmo>>`, который в конечном итоге завершится, когда данные станут доступны. Так как вы не хотите делать что-то еще, пока не гизмо данные, код ожидает задачу (с помощью ключевого слова **await** ). Ключевое слово **await** можно использовать только в методах, снабженных ключевым словом **Async** .

Ключевое слово **await** не блокирует поток до завершения задачи. Он регистрирует оставшуюся часть метода в качестве обратного вызова задачи и сразу же возвращает. Когда ожидаемая задача в конечном итоге завершается, она вызывает этот обратный вызов и, таким способом, возобновляет выполнение метода прямо там, где он был отключен. Дополнительные сведения об использовании ключевых слов [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) и [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) и пространства имен [задачи](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) см. в статье [асинхронные ссылки](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/async).

В следующем коде приведены методы `GetGizmos` и `GetGizmosAsync`.

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample6.cs)]

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample7.cs?highlight=1,4-8)]

 Асинхронные изменения похожи на те, которые были сделаны в **гизмосасинк** выше. 

- Сигнатура метода была помечена ключевым словом [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) , тип возвращаемого значения был изменен на `Task<List<Gizmo>>`, а *Async* был добавлен к имени метода.
- Вместо синхронного класса [WebClient](https://msdn.microsoft.com/library/system.net.webclient.aspx) используется асинхронный класс [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx) .
- Ключевое слово [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) было применено к асинхронному методу [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx)[Async](https://msdn.microsoft.com/library/hh158944(VS.110).aspx) .

На следующем рисунке показано асинхронное представление гизмо.

![async](using-asynchronous-methods-in-aspnet-45/_static/image2.png)

Представление данных приспособлений в браузерах идентично представлению, созданному синхронным вызовом. Единственное отличие заключается в том, что асинхронная версия может быть более производительной при высоких нагрузках.

## <a name="registerasynctask-notes"></a>Заметки метод RegisterAsyncTask

Методы, привязанные к `RegisterAsyncTask`, будут выполняться сразу после завершения [PreRender](https://msdn.microsoft.com/library/ms178472.aspx). Можно также напрямую использовать асинхронные события страницы void, как показано в следующем коде:

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample8.cs)]

Недостаток асинхронных событий void заключается в том, что разработчики больше не имеют полного контроля над временем выполнения событий. Например, если и. aspx, и. Мастер определяет `Page_Load` события, а один или оба они являются асинхронными, порядок выполнения не гарантируется. Применяется тот же порядок индетерминиате для обработчиков, не являющихся событиями (например, `async void Button_Click`). Для большинства разработчиков это должно быть приемлемым, но те, кому требуется полный контроль над порядком выполнения, должны использовать только API, такие как `RegisterAsyncTask`, которые используют методы, возвращающие объект Task.

## <a id="Parallel"></a>Параллельное выполнение нескольких операций

Асинхронные методы имеют значительное преимущество по сравнению с синхронными методами, когда действие должно выполнять несколько независимых операций. В приведенном образце синхронная страница *ПВГ. aspx*(для продуктов, мини-приложений и приспособлений) отображает результаты трех вызовов Web Service, чтобы получить список продуктов, мини-приложений и приспособлений. Проект [веб-API ASP.NET](../../../web-api/index.md) , предоставляющий эти службы, использует [Task. Delay](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) для имитации задержки или медленных сетевых вызовов. Если задержка устанавливается равным 500 миллисекундам, асинхронная страница *пвгасинк. aspx* занимает немного более 500 миллисекунд, пока синхронная `PWG`ная версия занимает свыше 1 500 миллисекунд. В следующем коде показана синхронная страница *ПВГ. aspx* .

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample9.cs)]

Асинхронный `PWGasync` код программной части показан ниже.

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample10.cs?highlight=5,11,21)]

На следующем рисунке показано представление, возвращенное на асинхронной странице *пвгасинк. aspx* .

![](using-asynchronous-methods-in-aspnet-45/_static/image3.png)

## <a id="CancelToken"></a>Использование токена отмены

Асинхронные методы, возвращающие `Task`, поддерживают отмену, то есть принимают параметр [CancellationToken](https://msdn.microsoft.com/library/system.threading.cancellationtoken(VS.110).aspx) , когда он предоставляется с атрибутом `AsyncTimeout` директивы [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) . В следующем коде показана страница *гизмосканцеласинк. aspx* с временем ожидания в секундах.

[!code-aspx[Main](using-asynchronous-methods-in-aspnet-45/samples/sample11.aspx?highlight=1)]

В следующем коде показан файл *GizmosCancelAsync.aspx.CS* .

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample12.cs?highlight=6,9)]

В предоставленном примере приложения выбор ссылки *гизмосканцеласинк* вызывает страницу *гизмосканцеласинк. aspx* и демонстрирует отмену (по истечении времени ожидания) асинхронного вызова. Поскольку время задержки находится в случайном диапазоне, может потребоваться несколько раз обновить страницу, чтобы получить сообщение об ошибке истечения времени ожидания.

## <a id="ServerConfig"></a>Конфигурация сервера для вызовов веб-службы с высоким уровнем параллелизма и высокой задержкой

Чтобы реализовать преимущества асинхронного веб-приложения, может потребоваться внести некоторые изменения в конфигурацию сервера по умолчанию. При настройке и нагрузочном тестировании асинхронного веб-приложения учитывайте следующее.

- Windows 7, Windows Vista, Window 8 и все клиентские операционные системы Windows имеют максимум 10 одновременных запросов. Для просмотра преимуществ асинхронных методов при высокой нагрузке потребуется операционная система Windows Server.
- Зарегистрируйте .NET 4,5 со службами IIS из командной строки с повышенными привилегиями, используя следующую команду:  
  %windir%\Microsoft.NET\Framework64 \v4.0.30319\aspnet\_regiis-i  
  См [. раздел ASP.NET IIS Registration Tool (Aspnet\_regiis. exe)](https://msdn.microsoft.com/library/k6h9cz8h.aspx) .
- Может потребоваться увеличить ограничение очереди [http. sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) на значение по умолчанию 1 000 до 5 000. Если значение параметра слишком мало, то можно увидеть запросы отклонения [http. sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) с состоянием HTTP 503. Чтобы изменить ограничение очереди HTTP. sys, сделайте следующее:

    - Откройте диспетчер IIS и перейдите в область пулы приложений.
    - Щелкните правой кнопкой мыши целевой пул приложений и выберите **Дополнительные параметры**.  
        ![дополнительные](using-asynchronous-methods-in-aspnet-45/_static/image4.png)
    - В диалоговом окне **Дополнительные параметры** измените *длину очереди* с 1 000 на 5 000.  
        Длина очереди ![](using-asynchronous-methods-in-aspnet-45/_static/image5.png)  
  
  Обратите внимание, что на приведенных выше изображениях платформа .NET Framework указана как версия 4.0, несмотря на то, что пул приложений использует .NET 4,5. Чтобы понять это расхождение, см. следующие сведения:

- [Управление версиями .NET и многоплатформенная нацеливание — .NET 4,5 — это обновление на месте до .NET 4,0](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)
- [Как настроить приложение IIS или AppPool для использования ASP.NET 3,5, а не 2,0](http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx)
- [Версии и зависимости платформы .NET Framework](https://msdn.microsoft.com/library/bb822049(VS.110).aspx)

- Если приложение использует веб-службы или System.NET для взаимодействия с серверной частью по протоколу HTTP, может потребоваться увеличить элемент [элемент connectionManagement/maxConnection](https://msdn.microsoft.com/library/fb6y0fyc(VS.110).aspx) . Для приложений ASP.NET это ограничено функцией автонастройки в 12 раз больше, чем количество процессоров. Это означает, что на четырехъядерном уровне можно использовать не более 12 \* 4 = 48 одновременных подключений к конечной точке IP. Поскольку это связано с [автоматической конфигурацией](https://msdn.microsoft.com/library/7w2sway1(VS.110).aspx), самый простой способ увеличить `maxconnection` в приложении ASP.NET — установить [System .NET. ServicePointManager. DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit(VS.110).aspx) программно в метод from `Application_Start` в файле *Global. asax* . Пример см. в примере загрузки.
- В .NET 4,5 значение по умолчанию 5000 для [максконкуррентрекуестсперкпу](https://blogs.msdn.com/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx) должно быть точным.

## <a name="contributors"></a>участники;

- [Бродерикка (взимаемая)](http://stackoverflow.com/users/59641/levi)
- [Tom Dykstra)](http://www.bing.com/search?q=site%3Aasp.net+%22Tom+Dykstra%22+-forums.asp.net&amp;qs=n&amp;form=QBRE&amp;pq=site%3Aasp.net+%22tom+dykstra%22+-forums.asp.net&amp;sc=8-42&amp;sp=-1&amp;sk=)
- [Михаил Уилсон (](http://bradwilson.typepad.com/)
- [Хонгмеи GE](https://blogs.msdn.com/b/hongmeig/)
