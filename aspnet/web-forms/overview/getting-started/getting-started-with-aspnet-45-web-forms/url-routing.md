---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
title: Маршрутизация URL-адресов | Документация Майкрософт
author: Erikre
description: В этой серии руководств будет основы создания приложений веб-форм ASP.NET с помощью ASP.NET 4.5 и Microsoft Visual Studio Express 2013 для мы...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 4f4bf092-c400-471f-a876-78fda0417890
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
msc.type: authoredcontent
ms.openlocfilehash: 992cea256302231ee7031a21c798117b73eaa01c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59384328"
---
# <a name="url-routing"></a><span data-ttu-id="a8beb-103">Маршрутизация URL-адресов</span><span class="sxs-lookup"><span data-stu-id="a8beb-103">URL Routing</span></span>

<span data-ttu-id="a8beb-104">по [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="a8beb-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="a8beb-105">[Скачайте пример проекта Wingtip Toys (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) или [скачайте электронную книгу (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="a8beb-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="a8beb-106">В этой серии руководств будет основы создания приложений веб-форм ASP.NET с помощью ASP.NET 4.5 и Microsoft Visual Studio Express 2013 для Web.</span><span class="sxs-lookup"><span data-stu-id="a8beb-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="a8beb-107">Visual Studio 2013 [проект с исходным кодом C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) доступен на следующей странице этой серии руководств.</span><span class="sxs-lookup"><span data-stu-id="a8beb-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="a8beb-108">В этом руководстве вы измените пример приложения Wingtip Toys для поддержки маршрутизации URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-108">In this tutorial, you will modify the Wingtip Toys sample application to support URL routing.</span></span> <span data-ttu-id="a8beb-109">Маршрутизация позволяет использовать URL-адреса, которые являются понятное, легче для запоминания и лучше поддерживается поисковыми веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="a8beb-109">Routing enables your web application to use URLs that are friendly, easier to remember, and better supported by search engines.</span></span> <span data-ttu-id="a8beb-110">Этот учебник основан на предыдущем учебном курсе «Членство и администрирование» и является частью серии руководств Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="a8beb-110">This tutorial builds on the previous tutorial "Membership and Administration" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="a8beb-111">Вы узнаете, как:</span><span class="sxs-lookup"><span data-stu-id="a8beb-111">What you'll learn:</span></span>

- <span data-ttu-id="a8beb-112">Как зарегистрировать маршруты для приложения веб-форм ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a8beb-112">How to register routes for an ASP.NET Web Forms application.</span></span>
- <span data-ttu-id="a8beb-113">Как добавить маршруты на веб-страницу.</span><span class="sxs-lookup"><span data-stu-id="a8beb-113">How to add routes to a web page.</span></span>
- <span data-ttu-id="a8beb-114">Способ выбора данных из базы данных для поддержки маршруты.</span><span class="sxs-lookup"><span data-stu-id="a8beb-114">How to select data from a database to support routes.</span></span>

## <a name="aspnet-routing-overview"></a><span data-ttu-id="a8beb-115">Общие сведения о маршрутизации ASP.NET</span><span class="sxs-lookup"><span data-stu-id="a8beb-115">ASP.NET Routing Overview</span></span>

<span data-ttu-id="a8beb-116">Маршрутизация URL-адресов можно настроить приложение для принятия URL-адреса, которые не сопоставлены с физическими файлами запросов.</span><span class="sxs-lookup"><span data-stu-id="a8beb-116">URL routing allows you to configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="a8beb-117">URL-адрес запроса — это просто URL-адрес, пользователь вводит в браузер, чтобы найти страницу на веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="a8beb-117">A request URL is simply the URL a user enters into their browser to find a page on your web site.</span></span> <span data-ttu-id="a8beb-118">Маршрутизация используется для определения URL-адреса, которые семантически значимые для пользователей и, которые могут помочь в оптимизации поисковой системы (SEO).</span><span class="sxs-lookup"><span data-stu-id="a8beb-118">You use routing to define URLs that are semantically meaningful to users and that can help with search-engine optimization (SEO).</span></span>

<span data-ttu-id="a8beb-119">По умолчанию в шаблоне веб-форм есть [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span><span class="sxs-lookup"><span data-stu-id="a8beb-119">By default, the Web Forms template includes [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span></span> <span data-ttu-id="a8beb-120">Большую часть основных маршрутизации работы будут реализованы с помощью *Friendly URLs*.</span><span class="sxs-lookup"><span data-stu-id="a8beb-120">Much of the basic routing work will be implemented by using *Friendly URLs*.</span></span> <span data-ttu-id="a8beb-121">Тем не менее в этом руководстве вы добавите настраиваемые возможности маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="a8beb-121">However, in this tutorial you will add customized routing capabilities.</span></span>

<span data-ttu-id="a8beb-122">Перед началом настройки маршрутизации URL-адресов, пример приложения Wingtip Toys можно связать с продукта с помощью следующих URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="a8beb-122">Before customizing URL routing, the Wingtip Toys sample application can link to a product using the following URL:</span></span>

`https://localhost:44300/ProductDetails.aspx?productID=2`

<span data-ttu-id="a8beb-123">Настраивая маршрутизации URL-адресов, пример приложения Wingtip Toys будет ссылка на тот же продукт, с помощью более удобную для восприятия URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="a8beb-123">By customizing URL routing, the Wingtip Toys sample application will link to the same product using an easier to read URL:</span></span>

`https://localhost:44300/Product/Convertible%20Car`

### <a name="routes"></a><span data-ttu-id="a8beb-124">Маршруты</span><span class="sxs-lookup"><span data-stu-id="a8beb-124">Routes</span></span>

<span data-ttu-id="a8beb-125">Маршрут — это шаблон URL-адрес, который сопоставляется с обработчиком.</span><span class="sxs-lookup"><span data-stu-id="a8beb-125">A route is a URL pattern that is mapped to a handler.</span></span> <span data-ttu-id="a8beb-126">Обработчик может быть физический файл, например ASPX-файл в приложении Web Forms.</span><span class="sxs-lookup"><span data-stu-id="a8beb-126">The handler can be a physical file, such as an .aspx file in a Web Forms application.</span></span> <span data-ttu-id="a8beb-127">Обработчик также может быть класс, который обрабатывает запрос.</span><span class="sxs-lookup"><span data-stu-id="a8beb-127">A handler can also be a class that processes the request.</span></span> <span data-ttu-id="a8beb-128">Для определения маршрута, создайте экземпляр класса Route, указав шаблон URL-адреса, обработчик и при необходимости имя маршрута.</span><span class="sxs-lookup"><span data-stu-id="a8beb-128">To define a route, you create an instance of the Route class by specifying the URL pattern, the handler, and optionally a name for the route.</span></span>

<span data-ttu-id="a8beb-129">Чтобы добавить маршрут в приложение, добавив `Route` объекту статического `Routes` свойство `RouteTable` класса.</span><span class="sxs-lookup"><span data-stu-id="a8beb-129">You add the route to the application by adding the `Route` object to the static `Routes` property of the `RouteTable` class.</span></span> <span data-ttu-id="a8beb-130">Свойство маршруты `RouteCollection` объект, который хранит все маршруты для приложения.</span><span class="sxs-lookup"><span data-stu-id="a8beb-130">The Routes property is a `RouteCollection` object that stores all the routes for the application.</span></span>

### <a name="url-patterns"></a><span data-ttu-id="a8beb-131">Шаблоны URL-адресов</span><span class="sxs-lookup"><span data-stu-id="a8beb-131">URL Patterns</span></span>

<span data-ttu-id="a8beb-132">Шаблон URL-адрес может содержать литеральные значения и заполнители переменных (которые называются параметрами URL-адрес).</span><span class="sxs-lookup"><span data-stu-id="a8beb-132">A URL pattern can contain literal values and variable placeholders (referred to as URL parameters).</span></span> <span data-ttu-id="a8beb-133">Литералы и заполнители, находятся в сегменты URL-адреса, которые разделяются косой черты (`/`) символов.</span><span class="sxs-lookup"><span data-stu-id="a8beb-133">The literals and placeholders are located in segments of the URL which are delimited by the slash (`/`) character.</span></span>

<span data-ttu-id="a8beb-134">При запросе в веб-приложение, URL-адрес анализируется на сегменты и заполнители, и значения переменных, позволяющих обработчик запроса.</span><span class="sxs-lookup"><span data-stu-id="a8beb-134">When a request to your web application is made, the URL is parsed into segments and placeholders, and the variable values are provided to the request handler.</span></span> <span data-ttu-id="a8beb-135">Этот процесс аналогично тому, как данные в строку запроса анализируется и передается в обработчик запроса.</span><span class="sxs-lookup"><span data-stu-id="a8beb-135">This process is similar to the way the data in a query string is parsed and passed to the request handler.</span></span> <span data-ttu-id="a8beb-136">В обоих случаях сведения о переменных включен в URL-адрес и передается обработчику в виде пар "ключ значение".</span><span class="sxs-lookup"><span data-stu-id="a8beb-136">In both cases, variable information is included in the URL and passed to the handler in the form of key-value pairs.</span></span> <span data-ttu-id="a8beb-137">Для строк запросов ключи и значения находятся в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-137">For query strings, both the keys and the values are in the URL.</span></span> <span data-ttu-id="a8beb-138">Для маршрутов ключами являются имена-заполнители, определенной в шаблоне URL-адрес, а только значения находятся в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-138">For routes, the keys are the placeholder names defined in the URL pattern, and only the values are in the URL.</span></span>

<span data-ttu-id="a8beb-139">В шаблоне URL-адрес, заполнители задаются путем их заключения в фигурные скобки ( `{` и `}` ).</span><span class="sxs-lookup"><span data-stu-id="a8beb-139">In a URL pattern, you define placeholders by enclosing them in braces ( `{` and `}` ).</span></span> <span data-ttu-id="a8beb-140">Можно определить несколько заполнителей в сегментах, но заполнители должны разделяться литералом.</span><span class="sxs-lookup"><span data-stu-id="a8beb-140">You can define more than one placeholder in a segment, but the placeholders must be separated by a literal value.</span></span> <span data-ttu-id="a8beb-141">Например `{language}-{country}/{action}` является допустимым шаблоном маршрута.</span><span class="sxs-lookup"><span data-stu-id="a8beb-141">For example, `{language}-{country}/{action}` is a valid route pattern.</span></span> <span data-ttu-id="a8beb-142">Тем не менее `{language}{country}/{action}` не является допустимым шаблоном, так как нет литеральное значение или заполнители в качестве разделителя.</span><span class="sxs-lookup"><span data-stu-id="a8beb-142">However, `{language}{country}/{action}` is not a valid pattern, because there is no literal value or delimiter between the placeholders.</span></span> <span data-ttu-id="a8beb-143">Таким образом маршрутизация не может указать, где для разделения значения заполнителя языка из значения заполнителя страны.</span><span class="sxs-lookup"><span data-stu-id="a8beb-143">Therefore, routing cannot determine where to separate the value for the language placeholder from the value for the country placeholder.</span></span>

### <a name="mapping-and-registering-routes"></a><span data-ttu-id="a8beb-144">Сопоставление и регистрации маршрутов</span><span class="sxs-lookup"><span data-stu-id="a8beb-144">Mapping and Registering Routes</span></span>

<span data-ttu-id="a8beb-145">Прежде чем можно включить маршруты к страницам пример приложения Wingtip Toys, необходимо зарегистрировать маршруты при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="a8beb-145">Before you can include routes to pages of the Wingtip Toys sample application, you must register the routes when the application starts.</span></span> <span data-ttu-id="a8beb-146">Чтобы зарегистрировать маршруты, вы измените `Application_Start` обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="a8beb-146">To register the routes, you will modify the `Application_Start` event handler.</span></span>

1. <span data-ttu-id="a8beb-147">В **обозревателе решений**Visual Studio, найдите и откройте *Global.asax.cs* файл.</span><span class="sxs-lookup"><span data-stu-id="a8beb-147">In **Solution Explorer**of Visual Studio, find and open the *Global.asax.cs* file.</span></span>
2. <span data-ttu-id="a8beb-148">Добавьте код, они выделены желтым цветом, чтобы *Global.asax.cs* файл следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-148">Add the code highlighted in yellow to the *Global.asax.cs* file as follows:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample1.cs?highlight=30-31,34-46)]

<span data-ttu-id="a8beb-149">Когда Wingtip Toys примере запускается приложение, он вызывает `Application_Start` обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="a8beb-149">When the Wingtip Toys sample application starts, it calls the `Application_Start` event handler.</span></span> <span data-ttu-id="a8beb-150">В конце этого обработчика событий `RegisterCustomRoutes` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="a8beb-150">At the end of this event handler, the `RegisterCustomRoutes` method is called.</span></span> <span data-ttu-id="a8beb-151">`RegisterCustomRoutes` Метод добавляет каждый маршрут путем вызова `MapPageRoute` метод `RouteCollection` объекта.</span><span class="sxs-lookup"><span data-stu-id="a8beb-151">The `RegisterCustomRoutes` method adds each route by calling the `MapPageRoute` method of the `RouteCollection` object.</span></span> <span data-ttu-id="a8beb-152">Маршруты определяются, используя имя маршрута, URL-адрес маршрута и физический URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-152">Routes are defined using a route name, a route URL and a physical URL.</span></span>

<span data-ttu-id="a8beb-153">Первый параметр (»`ProductsByCategoryRoute`«) — имя маршрута.</span><span class="sxs-lookup"><span data-stu-id="a8beb-153">The first parameter ("`ProductsByCategoryRoute`") is the route name.</span></span> <span data-ttu-id="a8beb-154">Он используется для вызова маршрут, когда он необходим.</span><span class="sxs-lookup"><span data-stu-id="a8beb-154">It is used to call the route when it is needed.</span></span> <span data-ttu-id="a8beb-155">Второй параметр (»`Category/{categoryName}`«) Определяет понятное замены, URL-адрес, который может быть динамическим на основе кода.</span><span class="sxs-lookup"><span data-stu-id="a8beb-155">The second parameter ("`Category/{categoryName}`") defines the friendly replacement URL that can be dynamic based on code.</span></span> <span data-ttu-id="a8beb-156">При заполнении данных со ссылками, которые создаются на основе данных, используйте этот маршрут.</span><span class="sxs-lookup"><span data-stu-id="a8beb-156">You use this route when you are populating a data control with links that are generated based on data.</span></span> <span data-ttu-id="a8beb-157">Маршрут отображается следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-157">A route is shown as follows:</span></span>

[!code-csharp[Main](url-routing/samples/sample2.cs)]

<span data-ttu-id="a8beb-158">Второй параметр маршрута включает в себя динамическое значение, указанное в фигурные скобки (`{ }`).</span><span class="sxs-lookup"><span data-stu-id="a8beb-158">The second parameter of the route includes a dynamic value specified by braces (`{ }`).</span></span> <span data-ttu-id="a8beb-159">В этом случае `categoryName` является переменной, которая будет использоваться для определения правильного пути маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="a8beb-159">In this case, the `categoryName` is a variable that will be used to determine the proper routing path.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="a8beb-160">**Необязательный**</span><span class="sxs-lookup"><span data-stu-id="a8beb-160">**Optional**</span></span>
> 
> <span data-ttu-id="a8beb-161">Может оказаться проще управлять кодом, переместив `RegisterCustomRoutes` метод в отдельном классе.</span><span class="sxs-lookup"><span data-stu-id="a8beb-161">You might find it easier to manage your code by moving the `RegisterCustomRoutes` method to a separate class.</span></span> <span data-ttu-id="a8beb-162">В *логики* папки, создайте отдельное `RouteActions` класса.</span><span class="sxs-lookup"><span data-stu-id="a8beb-162">In the *Logic* folder, create a separate `RouteActions` class.</span></span> <span data-ttu-id="a8beb-163">Перемещение выше `RegisterCustomRoutes` метода из *Global.asax.cs* файл в новый `RoutesActions` класса.</span><span class="sxs-lookup"><span data-stu-id="a8beb-163">Move the above `RegisterCustomRoutes` method from the *Global.asax.cs* file into the new `RoutesActions` class.</span></span> <span data-ttu-id="a8beb-164">Используйте `RoleActions` класс и `createAdmin` метод в качестве примера того, как вызвать `RegisterCustomRoutes` метода из *Global.asax.cs* файл.</span><span class="sxs-lookup"><span data-stu-id="a8beb-164">Use the `RoleActions` class and the `createAdmin` method as an example of how to call the `RegisterCustomRoutes` method from the *Global.asax.cs* file.</span></span>


<span data-ttu-id="a8beb-165">Вы также могли заметить, `RegisterRoutes` вызов метода с помощью `RouteConfig` объект, находящийся в начале `Application_Start` обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="a8beb-165">You may also have noticed the `RegisterRoutes` method call using the `RouteConfig` object at the beginning of the `Application_Start` event handler.</span></span> <span data-ttu-id="a8beb-166">Этот вызов выполняется для маршрутизации по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a8beb-166">This call is made to implement default routing.</span></span> <span data-ttu-id="a8beb-167">Она включалась в код по умолчанию, при создании приложения с помощью шаблона веб-форм Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a8beb-167">It was included as default code when you created the application using Visual Studio's Web Forms template.</span></span>

## <a name="retrieving-and-using-route-data"></a><span data-ttu-id="a8beb-168">Получение и использование данных маршрута</span><span class="sxs-lookup"><span data-stu-id="a8beb-168">Retrieving and Using Route Data</span></span>

<span data-ttu-id="a8beb-169">Как упоминалось выше, можно определить маршруты.</span><span class="sxs-lookup"><span data-stu-id="a8beb-169">As mentioned above, routes can be defined.</span></span> <span data-ttu-id="a8beb-170">Код, который вы добавили `Application_Start` обработчик событий в *Global.asax.cs* определяемые маршруты загружает файл.</span><span class="sxs-lookup"><span data-stu-id="a8beb-170">The code that you added to the `Application_Start` event handler in the *Global.asax.cs* file loads the definable routes.</span></span>

### <a name="setting-routes"></a><span data-ttu-id="a8beb-171">Настройка маршрутов</span><span class="sxs-lookup"><span data-stu-id="a8beb-171">Setting Routes</span></span>

<span data-ttu-id="a8beb-172">Маршруты необходимо добавить дополнительный код.</span><span class="sxs-lookup"><span data-stu-id="a8beb-172">Routes require you to add additional code.</span></span> <span data-ttu-id="a8beb-173">В этом руководстве используется привязка модели для получения `RouteValueDictionary` объект, используемый при создании маршрутов, используя данные из данных элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a8beb-173">In this tutorial, you will use model binding to retrieve a `RouteValueDictionary` object that is used when generating the routes using data from a data control.</span></span> <span data-ttu-id="a8beb-174">`RouteValueDictionary` Объект будет содержать список названий продуктов, принадлежащих к определенной категории продуктов.</span><span class="sxs-lookup"><span data-stu-id="a8beb-174">The `RouteValueDictionary` object will contain a list of product names that belong to a specific category of products.</span></span> <span data-ttu-id="a8beb-175">Для каждого продукта на основе данных и маршрут создается связь.</span><span class="sxs-lookup"><span data-stu-id="a8beb-175">A link is created for each product based on the data and route.</span></span>

#### <a name="enable-routes-for-categories-and-products"></a><span data-ttu-id="a8beb-176">Включить маршруты для категорий и продуктов</span><span class="sxs-lookup"><span data-stu-id="a8beb-176">Enable Routes for Categories and Products</span></span>

<span data-ttu-id="a8beb-177">Далее вы обновите приложение, чтобы использовать `ProductsByCategoryRoute` для определения правильного маршрута для включения для каждого канала категории продукта.</span><span class="sxs-lookup"><span data-stu-id="a8beb-177">Next, you'll update the application to use the `ProductsByCategoryRoute` to determine the correct route to include for each product category link.</span></span> <span data-ttu-id="a8beb-178">Мы также обновим *ProductList.aspx* страницу, чтобы включить перенаправленного ссылку для каждого продукта.</span><span class="sxs-lookup"><span data-stu-id="a8beb-178">You'll also update the *ProductList.aspx* page to include a routed link for each product.</span></span> <span data-ttu-id="a8beb-179">Ссылки отображается как до изменения, однако ссылки, теперь будут использовать маршрутизацию URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-179">The links will be displayed as they were before the change, however the links will now use URL routing.</span></span>

1. <span data-ttu-id="a8beb-180">В **обозревателе решений**откройте *Site.Master* странице, если он еще не открыт.</span><span class="sxs-lookup"><span data-stu-id="a8beb-180">In **Solution Explorer**, open the *Site.Master* page if it is not already open.</span></span>
2. <span data-ttu-id="a8beb-181">Обновление **ListView** управления с именем "`categoryList`" с изменениями, выделены желтым цветом, поэтому разметку выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-181">Update the **ListView** control named "`categoryList`" with the changes highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample3.aspx?highlight=7-9)]
3. <span data-ttu-id="a8beb-182">В **обозревателе решений**откройте *ProductList.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-182">In **Solution Explorer**, open the *ProductList.aspx* page.</span></span>
4. <span data-ttu-id="a8beb-183">Обновление `ItemTemplate` элемент *ProductList.aspx* страницы с обновлениями, выделенное желтым цветом, поэтому разметку выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-183">Update the `ItemTemplate` element of the *ProductList.aspx* page with the updates highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample4.aspx?highlight=6-9,14-16)]
5. <span data-ttu-id="a8beb-184">Открытие кода из *ProductList.aspx.cs* и добавьте следующее пространство имен выделены желтым цветом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-184">Open the code-behind of *ProductList.aspx.cs* and add the following namespace as highlighted in yellow:</span></span>  

    [!code-csharp[Main](url-routing/samples/sample5.cs?highlight=9)]
6. <span data-ttu-id="a8beb-185">Замените `GetProducts` метод из кода (*ProductList.aspx.cs*) следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-185">Replace the `GetProducts` method of the code-behind (*ProductList.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample6.cs)]

#### <a name="add-code-for-product-details"></a><span data-ttu-id="a8beb-186">Добавьте код для сведений о продукте</span><span class="sxs-lookup"><span data-stu-id="a8beb-186">Add Code for Product Details</span></span>

<span data-ttu-id="a8beb-187">Теперь обновите код программной части (*ProductDetails.aspx.cs*) для *ProductDetails.aspx* страницу, чтобы использовать данные о маршруте.</span><span class="sxs-lookup"><span data-stu-id="a8beb-187">Now, update the code-behind (*ProductDetails.aspx.cs*) for the *ProductDetails.aspx* page to use route data.</span></span> <span data-ttu-id="a8beb-188">Обратите внимание, что новый `GetProduct` метод также принимает значение строки запроса для случая, которых пользователь имеет связь с закладками, который использует более старых не с поддержкой, без маршрутизации URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="a8beb-188">Notice that the new `GetProduct` method also accepts a query string value for the case where the user has a link bookmarked that uses the older non-friendly, non-routed URL.</span></span>

1. <span data-ttu-id="a8beb-189">Замените `GetProduct` метод из кода (*ProductDetails.aspx.cs*) следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="a8beb-189">Replace the `GetProduct` method of the code-behind (*ProductDetails.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample7.cs)]

## <a name="running-the-application"></a><span data-ttu-id="a8beb-190">Запуск приложения</span><span class="sxs-lookup"><span data-stu-id="a8beb-190">Running the Application</span></span>

<span data-ttu-id="a8beb-191">Можно запустить приложение и просмотреть обновленный маршруты.</span><span class="sxs-lookup"><span data-stu-id="a8beb-191">You can run the application now to see the updated routes.</span></span>

1. <span data-ttu-id="a8beb-192">Нажмите клавишу **F5** запустить пример приложения Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="a8beb-192">Press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="a8beb-193">Откроется браузер и показывает *Default.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-193">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="a8beb-194">Нажмите кнопку **продуктов** ссылку в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-194">Click the **Products** link at the top of the page.</span></span>  
 <span data-ttu-id="a8beb-195">Все продукты, отображаются на *ProductList.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-195">All products are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="a8beb-196">Для браузера отображается следующий URL-адрес (используя свой номер порта).</span><span class="sxs-lookup"><span data-stu-id="a8beb-196">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/ProductList`
3. <span data-ttu-id="a8beb-197">Затем щелкните **автомобили** ссылку в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-197">Next, click the **Cars** category link near the top of the page.</span></span>  
 <span data-ttu-id="a8beb-198">Только автомобили, отображаются на *ProductList.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="a8beb-198">Only cars are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="a8beb-199">Для браузера отображается следующий URL-адрес (используя свой номер порта).</span><span class="sxs-lookup"><span data-stu-id="a8beb-199">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Category/Cars`
4. <span data-ttu-id="a8beb-200">Щелкните ссылку, содержащую имя первый автомобиль, перечисленные на странице («**автомобиль преобразуемыми**«) для получения сведений о продукте.</span><span class="sxs-lookup"><span data-stu-id="a8beb-200">Click the link containing the name of the first car listed on the page ("**Convertible Car**") to display the product details.</span></span>  
 <span data-ttu-id="a8beb-201">Для браузера отображается следующий URL-адрес (используя свой номер порта).</span><span class="sxs-lookup"><span data-stu-id="a8beb-201">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Product/Convertible%20Car`
5. <span data-ttu-id="a8beb-202">Затем введите следующие без маршрутизации URL-адрес (используя свой номер порта) в браузер:</span><span class="sxs-lookup"><span data-stu-id="a8beb-202">Next, enter the following non-routed URL (using your port number) into the browser:</span></span>  
    `https://localhost:44300/ProductDetails.aspx?productID=2`  
 <span data-ttu-id="a8beb-203">Код по-прежнему распознает URL-адрес, который включает строку запроса, в случае, когда у пользователя есть ссылка с закладками.</span><span class="sxs-lookup"><span data-stu-id="a8beb-203">The code still recognizes a URL that includes a query string, for the case where a user has a link bookmarked.</span></span>

## <a name="summary"></a><span data-ttu-id="a8beb-204">Сводка</span><span class="sxs-lookup"><span data-stu-id="a8beb-204">Summary</span></span>

<span data-ttu-id="a8beb-205">В этом руководстве вы добавили маршруты для категорий и продуктов.</span><span class="sxs-lookup"><span data-stu-id="a8beb-205">In this tutorial, you have added routes for categories and products.</span></span> <span data-ttu-id="a8beb-206">Вы узнали, как маршруты можно интегрировать с элементами управления данными, которые используют привязку модели.</span><span class="sxs-lookup"><span data-stu-id="a8beb-206">You have learned how routes can be integrated with data controls that use model binding.</span></span> <span data-ttu-id="a8beb-207">В следующем руководстве вы реализуете глобальной обработки ошибок.</span><span class="sxs-lookup"><span data-stu-id="a8beb-207">In the next tutorial, you will implement global error handling.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8beb-208">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="a8beb-208">Additional Resources</span></span>

[<span data-ttu-id="a8beb-209">ASP.NET Friendly URLs</span><span class="sxs-lookup"><span data-stu-id="a8beb-209">ASP.NET Friendly URLs</span></span>](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/)  
[<span data-ttu-id="a8beb-210">Развертывание безопасного веб-форм приложение ASP.NET с членством, OAuth и базой данных SQL в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="a8beb-210">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="a8beb-211">Microsoft Azure — бесплатная пробная версия</span><span class="sxs-lookup"><span data-stu-id="a8beb-211">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

> [!div class="step-by-step"]
> <span data-ttu-id="a8beb-212">[Назад](membership-and-administration.md)
> [Вперед](aspnet-error-handling.md)</span><span class="sxs-lookup"><span data-stu-id="a8beb-212">[Previous](membership-and-administration.md)
[Next](aspnet-error-handling.md)</span></span>
