---
uid: web-forms/overview/deployment/visual-studio-web-deployment/setting-folder-permissions
title: Веб-развертывание ASP.NET с помощью Visual Studio. Установка разрешений для папок | Документация Майкрософт
author: tdykstra
description: В этой серии руководств показано, как развернуть ASP.NET (публикации) веб-приложения, веб-приложениях службы приложений Azure или у стороннего поставщика размещения, Пол...
ms.author: riande
ms.date: 02/15/2013
ms.assetid: 9715a121-fa55-4f1b-a5d2-fb3f6cd8be8f
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/setting-folder-permissions
msc.type: authoredcontent
ms.openlocfilehash: 0a9181f741452e4abe256c9eab04615ce9819ff1
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59421697"
---
# <a name="aspnet-web-deployment-using-visual-studio-setting-folder-permissions"></a>Веб-развертывание ASP.NET с помощью Visual Studio. Установка разрешений для папки

по [том Дайкстра](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> В этой серии руководств показано, как развернуть ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения об этой серии см. в разделе [в первом учебнике серии](introduction.md).


## <a name="overview"></a>Обзор

В этом руководстве вы установите разрешения для *Elmah* папку в развернутой веб-сайта, чтобы приложения могли создавать файлы журналов в этой папке.

Если вы тестируете веб-приложения в Visual Studio с помощью Visual Studio Development Server (Cassini) или IIS Express, то приложение запущено под вашу личность. Вы являетесь скорее администратора на компьютере разработчика и имеет полный полномочия на ничего делать, чтобы любой файл в любой папке. Но если приложение выполняется под управлением служб IIS, выполняется с удостоверением, определенных для пула приложений, назначенный сайт. Обычно это системный учетной записи с ограниченными разрешениями. По умолчанию он разрешения read и execute для приложения веб-файлов и папок, но он не имеет доступ на запись.

Это становится проблемой, если приложение создает или файлы обновлений, которые достаточно распространена в веб-приложениях. В приложении университета Contoso, Elmah создает XML-файлы в *Elmah* папку для сохранения сведений об ошибках. Даже если вы не используете примерно Elmah, сайт может разрешить пользователям загружать файлы или выполнять другие задачи, которые записывают данные в папку на узле.

Напоминание. Если вы получаете сообщение об ошибке, или что-то не работает, как работать с руководством, обязательно проверьте [страница устранения неполадок](troubleshooting.md).

## <a name="test-error-logging-and-reporting"></a>Ведение журнала ошибок для тестирования и создания отчетов

Чтобы увидеть, как приложение не работает правильно в службах IIS (несмотря на то, что и при тестировании в Visual Studio), может вызвать ошибку, которая обычно регистрируется, Elmah, а затем откройте журнал ошибок Elmah, чтобы просмотреть подробные сведения. Если Elmah не удалось создать XML-файл и сохранить сведения об ошибке, вы увидите пустой отчет.

Откройте браузер и перейдите к `http://localhost/ContosoUniversity`, а затем запросить недопустимый URL-адрес, например *Studentsxxx.aspx*. Отобразится страница ошибки, сформированные системой вместо *GenericErrorPage.aspx* странице, так как `customErrors` параметр в файле Web.config является «RemoteOnly» и службы IIS выполняются локально:

![Страница ошибки 404 HTTP](setting-folder-permissions/_static/image1.png)

Теперь запустите *Elmah.axd* для просмотра отчета об ошибках. После входа в систему с учетными данными учетной записи администратора (&quot;администратора&quot; и &quot;devpwd&quot;), так как не удалось создать XML-файл в Elmah, отобразится страница журнала пустой ошибки *Elmah*папку:

![Ошибка журнала пуст](setting-folder-permissions/_static/image2.png)

## <a name="set-write-permission-on-the-elmah-folder"></a>Установить разрешения на запись для папки Elmah

Можно вручную задать разрешения для папки или его можно сделать автоматически в процессе процесс развертывания. Делая автоматического требуется сложный код MSBuild, а поскольку только для этого при первом развертывании, ниже описываются способы сделать это вручную. (Сведения о том, как сделать эту часть процесса развертывания, см. в разделе [установку разрешений на папку на веб-публикация](http://sedodream.com/2011/11/08/SettingFolderPermissionsOnWebPublish.aspx) в блоге Саид Хашими.)

1. В **проводнике**, перейдите к *C:\inetpub\wwwroot\ContosoUniversity*. Щелкните правой кнопкой мыши *Elmah* папку, выберите **свойства**, а затем выберите **безопасности** вкладки.
2. Нажмите кнопку **Правка**.
3. В **разрешения для Elmah** установите флажок **DefaultAppPool**, а затем выберите **записи** флажок в **Разрешить** столбца.

    ![Разрешения для папки ELMAH](setting-folder-permissions/_static/image3.png)

    (Если вы не видите **DefaultAppPool** в **имена групп или пользователей** списка, вы, вероятно, либо другим методом, отличной от указанной в этом руководстве для настройки используется IIS и ASP.NET 4 на вашем компьютере. В этом случае следует узнать, какие учетные данные используются пулом приложений, назначенных для приложения университета Contoso и предоставить разрешение на запись к этим удостоверением. См. по ссылкам о удостоверения пула приложений в конце этого руководства.) Нажмите кнопку **ОК** в обоих диалоговых окнах.

## <a name="retest-error-logging-and-reporting"></a>Повторное тестирование ведения журнала ошибок и создания отчетов

Проверьте, что вызывает ошибку снова таким же образом (запрос Неверный URL-адрес) и запустите **журнал ошибок** страницы. Это время ошибки отображается на странице.

![Страница "журнала ошибок ELMAH"](setting-folder-permissions/_static/image4.png)

## <a name="summary"></a>Сводка

Вы завершили все задачи, необходимые для получения университета Contoso работает надлежащим образом в IIS на локальном компьютере. В следующем учебном курсе который будет доступен сайта публично, развернув ее в Azure.

## <a name="more-information"></a>Дополнительные сведения

В этом примере причина, почему не удается сохранить файлы журнала Elmah был довольно очевидным. Трассировку IIS можно использовать в случаях, когда причиной проблемы не столь очевидно; см. в разделе [устранения неполадок запросов с помощью сбойных в IIS 7](https://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis) на веб-узле IIS.net.

Дополнительные сведения о том, как предоставить разрешения для удостоверения пула приложений см. в разделе [удостоверения пула приложений](https://www.iis.net/learn/manage/configuring-security/application-pool-identities) и [безопасный контент в IIS через файл списки управления доступом системы](https://www.iis.net/learn/get-started/planning-for-security/secure-content-in-iis-through-file-system-acls) на веб-узле IIS.net.

> [!div class="step-by-step"]
> [Назад](deploying-to-iis.md)
> [Вперед](deploying-to-production.md)
