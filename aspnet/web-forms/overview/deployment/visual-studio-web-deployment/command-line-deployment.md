---
uid: web-forms/overview/deployment/visual-studio-web-deployment/command-line-deployment
title: Веб-развертывание ASP.NET с помощью Visual Studio. Развертывание из командной строки | Документация Майкрософт
author: tdykstra
description: В этой серии руководств показано, как развернуть ASP.NET (публикации) веб-приложения, веб-приложениях службы приложений Azure или у стороннего поставщика размещения, Пол...
ms.author: riande
ms.date: 02/15/2013
ms.assetid: 82b8dea0-f062-4ee4-8784-3ffa30fbb1ca
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/command-line-deployment
msc.type: authoredcontent
ms.openlocfilehash: cd31ae26f0b0b0ad8d333ae93aea9bae8f6a9fc1
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2019
ms.locfileid: "58426020"
---
<a name="aspnet-web-deployment-using-visual-studio-command-line-deployment"></a>Веб-развертывание ASP.NET с помощью Visual Studio. Развертывание командной строки
====================
по [том Дайкстра](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> В этой серии руководств показано, как развернуть ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения об этой серии см. в разделе [в первом учебнике серии](introduction.md).


## <a name="overview"></a>Обзор

Этом руководстве показано, как вызвать веб-Visual Studio опубликовать конвейера из командной строки. Это полезно для сценариев, где вы хотите [автоматизации процесса развертывания](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery.md) вместо делать это вручную в Visual Studio, обычно с помощью [источника системы управления версиями кода](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control.md).

## <a name="make-a-change-to-deploy"></a>Изменения для развертывания

В настоящее время на страницу About код шаблона.

![Страница с кодом шаблона](command-line-deployment/_static/image1.png)

Вы замените, код, который отображает сводку систему зачисления учащихся.

Откройте *About.aspx* странице, удалить все это разметка внутри `MainContent` `Content` элемент и вставьте следующую разметку, вместо него:

[!code-aspx[Main](command-line-deployment/samples/sample1.aspx)]

Запустите проект и выберите **о** страницы.

![Страница About](command-line-deployment/_static/image2.png)

## <a name="deploy-to-test-by-using-the-command-line"></a>Развертывание для тестирования с помощью командной строки

Вы не развертывать еще одно изменение базы данных, так отключить развертывание базы данных dbDacFx для базы данных aspnet ContosoUniversity. Откройте **веб-публикации** мастера и в каждом из трех профилей, снимите флажок публикации **обновления базы данных** флажок на **параметры** вкладку.

В Windows 8 начальная страница, поиск **Командная строка разработчика для VS2012**.

Щелкните правой кнопкой мыши значок **Командная строка разработчика для VS2012** и нажмите кнопку **Запуск от имени администратора**.

Введите следующую команду в командной строке, заменив путь к файлу решения и путь к файлу решения:

[!code-console[Main](command-line-deployment/samples/sample2.cmd)]

MSBuild выполняет сборку решения и его развертывание в тестовую среду.

![Данные, выводимые в командной строке](command-line-deployment/_static/image3.png)

Откройте браузер и перейдите к `http://localhost/ContosoUniversity`, затем нажмите кнопку **о** страницу, чтобы убедиться, что развертывание выполнено успешно.

Если вы еще не создали учащихся в тесте, вы увидите пустую страницу в разделе **статистики учащихся текст** заголовок. Перейдите к **учащихся** щелкните **добавить учащихся**и добавить некоторые студенты, а затем вернитесь к **о** страницу для просмотра статистики учащихся.

![О странице в тестовой среде](command-line-deployment/_static/image4.png)

## <a name="key-command-line-options"></a>Параметры ключа командной строки

Команда, введенный путь к файлу решения и два свойства, передаваемые в MSBuild:

[!code-console[Main](command-line-deployment/samples/sample3.cmd)]

### <a name="deploying-the-solution-versus-deploying-individual-projects"></a>Развертывание решения и развертывание отдельных проектов

Задание файла решения приводит все проекты в решении для построения. Если у вас есть несколько веб-проектов в решении, применяются следующие правила MSBuild:

- Свойства, указываемые в командной строке, передаются в каждый проект. Следовательно каждый веб-проекта необходим профиль публикации с вами именем. Если указать `/p:PublishProfile=Test`, каждого веб-проекта должен быть профиль публикации с именем *теста*.
- Один проект может публикацию успешно в том случае, если другой даже не выполняет сборку. Дополнительные сведения см. в разделе обсуждений stackoverflow [MSBuild завершается сбоем с два пакета](http://stackoverflow.com/questions/14226451/msbuild-fails-with-two-packages).

При выборе отдельного проекта вместо решения, необходимо добавить параметр, указывающий, данная версия Visual Studio. Если вы используете Visual Studio 2012 командной строки будет выглядеть следующим образом:

[!code-console[Main](command-line-deployment/samples/sample4.cmd?highlight=1)]

Номер версии для Visual Studio 2010 — 10,0. Дополнительные сведения см. в разделе [совместимость проекта Visual Studio и VisualStudioVersion](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx) в блоге Саид Хашими.

### <a name="specifying-the-publish-profile"></a>Указание профиля публикации

Профиль публикации можно указать по имени или полный путь к *.pubxml* файл, как показано в следующем примере:

[!code-console[Main](command-line-deployment/samples/sample5.cmd?highlight=1)]

### <a name="web-publish-methods-supported-for-command-line-publishing"></a>Веб-публикация методов, поддерживаемых для публикации командной строки

Три публикации методы поддерживаются для публикация из командной строки:

- `MSDeploy` -Публикация с помощью веб-развертывания.
- `Package` -Опубликуйте, создав веб-пакета развертывания. Необходимо отдельно установить пакет с помощью команды MSBuild, который его создал.
- `FileSystem` -Публикации путем копирования файлов в указанную папку.

### <a name="specifying-the-build-configuration-and-platform"></a>Указание конфигурации сборки и платформы

Необходимо задать значение конфигурации сборки и платформы, в Visual Studio или в командной строке. Профили публикации включают свойства, которые называются `LastUsedBuildConfiguration` и `LastUsedPlatform`, но эти свойства невозможно установить, чтобы определить, как проект будет собран. Дополнительные сведения см. в разделе [MSBuild: Настройка свойства конфигурации](http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx) в блоге Саид Хашими.

## <a name="deploy-to-staging"></a>Развертывание в промежуточное хранилище

Для развертывания в Azure, необходимо добавить пароль в командную строку. Если пароль был сохранен в профиле публикации в Visual Studio, он был сохранен в зашифрованном виде в вашей *. pubxml.user* файл. Этот файл не осуществляется MSBuild при выполнении развертывания командной строки, поэтому вам нужно передать пароль в параметре командной строки.

1. Скопируйте пароль, вам понадобятся из *.publishsettings* файл, который вы скачали ранее для промежуточного веб-сайта. Пароль — это значение `userPWD` атрибут для веб-развертывания `publishProfile` элемент.

    ![Веб-развертывание пароль](command-line-deployment/_static/image5.png)
2. В Windows 8 начальная страница, поиск **Командная строка разработчика для VS2012**и щелкните значок, чтобы открыть окно командной строки. (Не нужно открыть его от имени администратора это время, так как не развертывании в службах IIS на локальном компьютере.)
3. Введите следующую команду в командной строке, заменив путь к файлу решения и путь к файлу решения и пароль с помощью пароля:

    [!code-console[Main](command-line-deployment/samples/sample6.cmd)]

    Обратите внимание на то, что эта команда включает дополнительный параметр: `/p:AllowUntrustedCertificate=true`. Так как этот учебник написан, `AllowUntrustedCertificate` свойство должно иметь значение, при публикации в Azure из командной строки. Когда будет выпущена для исправления этой ошибки, не нужно этого параметра.
4. Откройте браузер и перейдите к URL-адрес промежуточный сайт и нажмите кнопку **о** страницу, чтобы убедиться, что развертывание выполнено успешно.

    Как было показано ранее для тестовой среды, может потребоваться создать некоторые студенты для просмотра статистики на **о** страницы.

## <a name="deploy-to-production"></a>Развертывание в рабочей среде

Процесс развертывания в рабочей среде похож на процесс для промежуточного хранения.

1. Скопируйте пароль, вам понадобятся из *.publishsettings* файл, загруженный ранее для рабочих веб-сайта.
2. Откройте **Командная строка разработчика для VS2012**.
3. Введите следующую команду в командной строке, заменив путь к файлу решения и путь к файлу решения и пароль с помощью пароля:

    [!code-console[Main](command-line-deployment/samples/sample7.cmd)]

    На реальном рабочем узле, если было также изменение базы данных, обычно копируются *приложения\_offline.htm* файл на сайт перед развертыванием и удалить его после успешного развертывания.
4. Откройте браузер и перейдите к URL-адрес промежуточный сайт и нажмите кнопку **о** страницу, чтобы убедиться, что развертывание выполнено успешно.

## <a name="summary"></a>Сводка

Теперь вы развернули обновления приложения с помощью командной строки.

![О странице в тестовой среде](command-line-deployment/_static/image6.png)

В следующем руководстве, вы увидите пример расширения Интернета конвейера публикации. Пример будет показано, как для развертывания файлов, которые не находятся в проекте.

> [!div class="step-by-step"]
> [Назад](deploying-a-database-update.md)
> [Вперед](deploying-extra-files.md)
