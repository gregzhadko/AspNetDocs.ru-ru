---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/building-and-packaging-web-application-projects
title: Сборка и упаковка проектов веб-приложений | Документация Майкрософт
author: jrjlee
description: Если вы хотите развернуть проект веб-приложения в среде удаленного сервера, в первую очередь является сборку проекта и создание packa развертывания web...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 94e92f80-a7e3-4d18-9375-ff8be5d666ac
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/building-and-packaging-web-application-projects
msc.type: authoredcontent
ms.openlocfilehash: 1d0ee0264ce6461d7b0159f1a44de4de31e2d079
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65114677"
---
# <a name="building-and-packaging-web-application-projects"></a>Сборка и упаковка проектов веб-приложений

по [Джейсон Lee](https://github.com/jrjlee)

[Загрузить PDF-файл](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> Если вы хотите развернуть проект веб-приложения в среде удаленного сервера, в первую очередь является сборку проекта и создать пакет веб-развертывания. В этом разделе описывает работу процесса сборки для проектов веб-приложений. В частности его описание.
> 
> - Как конвейер публикации Web (WPP) расширяет процесс построения, чтобы включить функциональные возможности развертывания.
> - Как средство Internet Information Services (IIS) веб-развертывания (Web Deploy) включает веб-приложения в пакет развертывания.
> - Том, как сборки и упаковки процесс и о созданных файлах.

Процесс построения и развертывания для проектов веб-приложений в Visual Studio 2010, поддерживается конвейера публикации в Интернете. WPP предоставляет набор целевых объектов Microsoft Build Engine (MSBuild), которые расширяют функциональные возможности MSBuild и включить его для интеграции с веб-развертывания. В Visual Studio вы увидите этот расширенных функций на страницах свойств для проекта веб-приложения. **Пакета и публикация веб-** страницы, вместе с **упаковка и публикация SQL** странице позволяет настроить как проект веб-приложения создается установочный пакет для развертывания по завершении процесса сборки.

![](building-and-packaging-web-application-projects/_static/image1.png)

## <a name="how-does-the-wpp-work"></a>Как работает WPP?

Если вы взгляните на файл проекта C#-на основе веб-проект приложения, можно увидеть, что он импортирует два TARGETS-файлы.

[!code-xml[Main](building-and-packaging-web-application-projects/samples/sample1.xml)]

Первый **импорта** инструкции являются общими для всех проектов Visual C#. Этот файл *Microsoft.CSharp.targets*, содержащий целевые объекты и задачи, относящиеся к Visual C#. Например, компилятор C# (**Csc**) здесь вызове задачи. *Microsoft.CSharp.targets* файл в свою очередь импортирует *Microsoft.Common.targets* файл. Определяет целевые объекты, которые являются общими для всех проектов, например **построения**, **Перестроить**, **запуска**, **компиляции**, и **очистить** . Второй **импорта** инструкция относится только к проектам веб-приложений. *Microsoft.WebApplication.targets* файл в свою очередь импортирует *Microsoft.Web.Publishing.targets* файла. *Microsoft.Web.Publishing.targets* файл по сути *является* конвейера публикации в Интернете. Он определяет целевые объекты, например **пакета** и **MSDeployPublish**, что вызвать веб-развертывания для выполнения различных задач развертывания.

Чтобы понять, как используются эти дополнительные целевые объекты, в примере решения диспетчера контактов, откройте *Publish.proj* файл и взгляните на **BuildProjects** целевой объект.

[!code-xml[Main](building-and-packaging-web-application-projects/samples/sample2.xml)]

Этот целевой объект использует **MSBuild** задачи для создания различных проектов. Обратите внимание, что **DeployOnBuild** и **DeployTarget** свойства:

- **DeployOnBuild = true** свойство по существу это означает «Я хочу выполнить дополнительной целью при успешном завершении сборки».
- **DeployTarget** свойство определяет имя назначения, можно также выполнить, когда **DeployOnBuild** равно **true**. В этом случае вы указываете, что требуется MSBuild для выполнения **пакета** целевой объект после создания проекта.

**Пакета** целевой объект определен в *Microsoft.Web.Publishing.targets* файла. По сути этот целевой объект принимает выходные данные построения проекта веб-приложения и преобразует его в пакет веб-развертывания, который можно опубликовать на веб-сервер IIS.

> [!NOTE]
> Чтобы просмотреть файл проекта (например, <em>ContactManager.Mvc.csproj</em>) в Visual Studio 2010, необходимо сначала нужно выгрузить проект из решения. В <strong>обозревателе решений</strong> окно, щелкните правой кнопкой мыши узел проекта и нажмите кнопку <strong>выгрузить проект</strong>. Щелкните правой кнопкой мыши узел проекта и нажмите кнопку <strong>изменить</strong><em>[файл проекта]</em>). Файл проекта откроется в необработанном виде XML. Не забудьте перезагрузить проект в том случае, когда все будет готово.  
> Дополнительные сведения о целевых объектов MSBuild, задачи, и <strong>импорта</strong> инструкций, см. в разделе [основные сведения о файле проекта](understanding-the-project-file.md). Более подробное введение в файлы проекта и WPP, см. в разделе [Inside the Microsoft Build Engine: С помощью MSBuild и Team Foundation Build](http://amzn.com/0735645248) Саид Ибрагим Хашими и William Bartholomew, ISBN: 978-0-7356-4524-0.

## <a name="what-is-a-web-deployment-package"></a>Что такое пакет веб-развертывания?

При построении и развертывании проекта веб-приложения с помощью Visual Studio 2010 или напрямую с помощью MSBuild, конечным результатом обычно является *пакет веб-развертывания*. Пакет веб-развертывания — это ZIP-файл. Он содержит все, что с службами IIS и веб-развертывания нужно, чтобы повторно создать веб-приложения, включая:

- Выходные данные компиляции веб-приложения, включая содержимое, файлы ресурсов, файлы конфигурации, JavaScript и каскадных стилей (CSS) ресурсы стиля и т. д.
- Сборки для проекта веб-приложения и для любой ссылки на проекты в решении.
- Скрипты SQL для создания базы данных, которые вы развертываете с веб-приложением.

После создания пакета веб-развертывания, его можно опубликовать веб-сервере IIS различными способами. Например можно развернуть его удаленно, предназначенных для службы агента веб-развертывания удаленного или веб-развертывание обработчик на веб-сервере назначения или вручную импортировать пакет на веб-сервере назначения можно использовать диспетчер служб IIS. Дополнительные сведения об этих подходов к развертыванию, см. в разделе [Выбор оптимального подхода для веб-развертывания справа](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md).

## <a name="how-does-the-build-process-work"></a>Как работает процесс построения?

Это показывает, что происходит, когда вы собрали и упаковали проект веб-приложения:

![](building-and-packaging-web-application-projects/_static/image2.png)

При создании проекта веб-приложения, процесс сборки создает файл с именем *[имя_проекта]. SourceManifest.xml*. А также файл проекта и выходные данные сборки это *. SourceManifest.xml* файл указывает веб-развертывания необходимых для включения в пакет веб-развертывания. С помощью этих входных данных, веб-развертывания создает пакет веб-развертывания с именем *ZIP-файл [имя_проекта]*.

Вместе с веб-пакета развертывания процесс построения создает два файла, которые помогут вам использовать пакет:

- *. Deploy.cmd* файл включает набор параметризованных команд Web Deploy (MSDeploy.exe), используемыми для публикации веб-пакет развертывания на удаленном веб-сервере IIS. Под управлением *. deploy.cmd* файл с необходимыми параметрами обычно предоставляет более быстрый и упростить альтернативные для вручную создав MSDeploy.exe команд самостоятельно.
- *SetParameters.xml* файл предоставляет набор значений параметров, команда MSDeploy.exe. К этим значениям относятся свойства, такие как имя веб-приложение IIS, к которому вы хотите развернуть пакет, значения конечные точки службы и строки соединения, определенные в *web.config* файл, а также любого свойства развертывания Допустимые значения определяются на страницах свойств проекта.

*SetParameters.xml* файл является ключом к управлению процесс развертывания. Этот файл создается динамически в соответствии с содержимым проекта веб-приложения. Например, если добавить строку подключения к вашей *web.config* файл, процесс сборки будет автоматически обнаружит строку подключения, соответствующим образом параметризовать развертывания и создает запись в  *SetParameters.xml* файл, чтобы можно было изменить строку подключения в ходе процесса развертывания. Следующий раздел, [Настройка параметров для развертывания веб-пакета](configuring-parameters-for-web-package-deployment.md), роль этого файла более подробно и описываются различные способы, в котором его можно изменить во время построения и развертывания.

> [!NOTE]
> В Visual Studio 2010 конвейера публикации в Интернете не поддерживает предварительно скомпилированные страницы в веб-приложении перед упаковкой. Следующая версия Visual Studio и WPP будет включать возможность предварительной компиляции веб-приложения, как средство упаковки.

## <a name="conclusion"></a>Заключение

В этом разделе предоставлен Обзор построения и обработки пакетов для проектов веб-приложений в Visual Studio 2010. Описано, как WPP позволяет вызывать команды веб-развертывания из MSBuild, и описано, как сборки и упаковки процесс.

После создания веб-пакет развертывания, следующим шагом является его развертывание. Дополнительные сведения об этом см. в разделе [Настройка параметров для развертывания веб-пакета](configuring-parameters-for-web-package-deployment.md) и [развертывание веб-пакеты](deploying-web-packages.md).

## <a name="further-reading"></a>Дополнительные сведения

Далее разделы в этом руководстве [Настройка параметров для развертывания веб-пакета](configuring-parameters-for-web-package-deployment.md) и [развертывание веб-пакетов](deploying-web-packages.md), предоставить рекомендации по использованию веб-пакета, вы создали. Это последний учебник, в этой серии [Advanced корпоративное веб-развертывание](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md), руководство по настройке и устранение неполадок в процессе упаковки.

Более подробное введение в файлы проекта и WPP, см. в разделе [Inside the Microsoft Build Engine: С помощью MSBuild и Team Foundation Build](http://amzn.com/0735645248) Саид Ибрагим Хашими и William Bartholomew, ISBN: 978-0-7356-4524-0.

> [!div class="step-by-step"]
> [Назад](understanding-the-build-process.md)
> [Вперед](configuring-parameters-for-web-package-deployment.md)
