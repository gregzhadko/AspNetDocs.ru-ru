---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/manually-installing-web-packages
title: Установка веб-пакетов вручную | Документация Майкрософт
author: jrjlee
description: В этом разделе описано, как вручную импортировать пакет веб-развертывания в службы IIS (IIS). Раздел Создание и упаковка веб-боя...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: f11d22a7-5d32-4ad0-8a9b-276460a61c06
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/manually-installing-web-packages
msc.type: authoredcontent
ms.openlocfilehash: f778549d3e26989a2e71ef21171adec521842729
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78514890"
---
# <a name="manually-installing-web-packages"></a>Установка веб-пакетов вручную

кто [Джейсон Иванов](https://github.com/jrjlee)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описано, как вручную импортировать пакет веб-развертывания в службы IIS (IIS).
> 
> В разделе [Создание и упаковка проектов веб-приложений](building-and-packaging-web-application-projects.md) описано, как средство веб-развертывания IIS (веб-развертывание) в сочетании с Microsoft Build Engine (MSBuild) и конвейером веб-публикаций (WPP) позволяет упаковывать проекты веб-приложения в один сжатый ZIP-файл. Этот файл, который обычно называется пакетом веб-развертывания (или просто пакетом развертывания), содержит все сведения о содержимом и конфигурации, необходимые IIS для повторного создания веб-приложения на веб-сервере.
> 
> После создания пакета веб-развертывания его можно опубликовать на сервере IIS различными способами. В большинстве случаев необходимо воспользоваться преимуществами точек интеграции между MSBuild, WPP и веб-развертывание, чтобы создавать и устанавливать веб-пакеты удаленно в рамках автоматизированного или одноэтапного процесса сборки и развертывания. Этот процесс описан в разделе [Развертывание веб-пакетов](deploying-web-packages.md). Однако это не всегда возможно. Предположим, что требуется развернуть веб-приложение в рабочей среде с выходом в Интернет. По соображениям безопасности такая рабочая среда находится по крайней мере скорее всего за брандмауэром в подсети, отдельной от сервера сборки, в сети периметра (также называемой демилитаризованной зоной, промежуточной подсетью). В большинстве случаев Рабочая среда будет находиться в отдельном домене или в физической изолированной сети.
> 
> В этих сценариях единственным вариантом может быть переносить веб-пакет на целевой сервер и вручную импортировать его в IIS. Несмотря на то, что этот подход исключает автоматическое развертывание, он по-прежнему является очень эффективным способом публикации&#x2014;веб-приложения, поэтому вы просто копируете на веб-сервер один ZIP-файл и используете мастер для выполнения процесса импорта.

Этот раздел является частью серии руководств, основанных на требованиях Enterprise к развертыванию вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [диспетчера контактов](the-contact-manager-solution.md)&#x2014;для представления веб-приложения с реалистичным уровнем сложности, включая приложение ASP.NET MVC 3, службу Windows Communication Foundation (WCF) и проект базы данных.

## <a name="task-overview"></a>Обзор задач

Вам потребуется выполнить эти высокоуровневые задачи для импорта пакета веб-развертывания в службы IIS:

- Создайте пакет веб-развертывания с помощью командной строки MSBuild, Team Build или Visual Studio 2010.
- Скопируйте веб-пакет на целевой веб-сервер.
- Используйте мастер импорта пакета приложения в диспетчере служб IIS, чтобы установить веб-пакет и указать значения переменных, таких как строки подключения и конечные точки служб.

В этом разделе будет показано, как выполнять эти процедуры. В задачах и пошаговых руководствах этого раздела предполагается, что вы уже знакомы с концепциями веб-пакетов, веб-развертывание и конвейера WPP. Дополнительные сведения см. в разделе [Сборка и упаковка проектов веб-приложений](building-and-packaging-web-application-projects.md).

> [!NOTE]
> Этот раздел лучше использовать в сочетании с [настройками веб-сервера для веб-развертывание публикации (автономного развертывания)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md), в котором объясняется, как установить необходимые компоненты и подготовить веб-сайт IIS для импорта пакетов.

## <a name="create-a-web-deployment-package"></a>Создание пакета веб-развертывания

Первая задача — создать пакет веб-развертывания для проекта веб-приложения, который требуется развернуть. Создавать веб-пакеты можно различными способами.

**Подход 1. Создание пакета в рамках процесса сборки с помощью Visual Studio**

Вы можете настроить проект веб-приложения для создания пакета веб-развертывания после каждой сборки на вкладке **Пакет/Публикация веб-сайта** страницы свойств проекта. Этот процесс описан в статье [Создание и упаковка проектов веб-приложений](building-and-packaging-web-application-projects.md).

**Подход 2. Создание пакета в рамках процесса сборки с помощью MSBuild**

Если вы создаете проект веб-приложения с помощью MSBuild напрямую, с помощью пользовательского файла проекта MSBuild или из командной строки, можно создать пакет веб-развертывания в рамках процесса сборки, включив в команду Свойства **деплойонбуилд = true** и **деплойтаржет = Package** . Этот процесс описан в разделе [Основные сведения о процессе сборки](understanding-the-build-process.md).

**Подход 3. Создание пакета по запросу в Visual Studio**

Пакет веб-развертывания для проекта веб-приложения можно создать в любой момент в Visual Studio 2010. Для этого в окне **Обозреватель решений** щелкните правой кнопкой мыши проект веб-приложения и выберите команду **создать пакет развертывания**.

![](manually-installing-web-packages/_static/image1.png)

**Подход 4. Создание пакета по запросу из командной строки**

Вы можете создать пакет веб-развертывания из командной строки, вызвав целевой объект **пакета** в проекте веб-приложения с помощью MSBuild. Команда должна выглядеть примерно так:

[!code-console[Main](manually-installing-web-packages/samples/sample1.cmd)]

При любом подходе конечный результат будет таким же. В этом случае в выходной папке проекта веб-приложения создается пакет веб-развертывания в формате ZIP, а также различные вспомогательные ресурсы.

![](manually-installing-web-packages/_static/image2.png)

Если вы планируете импортировать веб-пакет вручную, вам потребуется только файл ZIP. Скопируйте этот файл на целевой веб-сервер, и вы сможете начать процесс импорта.

## <a name="import-a-web-package-into-iis"></a>Импорт веб-пакета в IIS

Следующую процедуру можно использовать для импорта пакета веб-развертывания из локальной файловой системы на веб-сайт IIS. Перед выполнением этой процедуры убедитесь, что у вас есть:

- Пакет веб-развертывания скопирован на веб-сервер.
- Настроен веб-сервер IIS для размещения приложения.

Дополнительные сведения о настройке веб-сервера IIS для поддержки пакетов веб-развертывания см. в статье [Настройка веб-сервера для веб-развертывание публикации (автономное развертывание)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md).

**Импорт пакета веб-развертывания с помощью диспетчера IIS**

1. В диспетчере служб IIS в области **подключения** щелкните правой кнопкой мыши веб-сайт IIS, наведите указатель на пункт **развернуть**и выберите пункт **Импорт приложения**.

    ![](manually-installing-web-packages/_static/image3.png)
2. В мастере импорта пакетов приложений на странице **Выбор пакета** перейдите к расположению пакета веб-развертывания и нажмите кнопку **Далее**.
3. На странице **Выбор содержимого пакета** очистите все ненужные материалы и нажмите кнопку **Далее**.

    ![](manually-installing-web-packages/_static/image4.png)

    > [!NOTE]
    > В большинстве случаев вам может не понадобиться импортировать все, что поставляется с пакетом веб-развертывания. Например, может потребоваться запретить веб-развертывание заменить связанную базу данных.  
    > Записи **разрешений GRANT** задают разрешения на целевую файловую систему, чтобы гарантировать, что удостоверение пула приложений может получить доступ к физической папке, в которой хранится содержимое веб-сайта. Кроме того, пользователю с анонимной проверкой подлинности предоставляется разрешение на чтение папки, чтобы позволить приложению обслуживать файлы типов MIME. При желании вы можете удалить эти записи и настроить разрешения вручную.
4. На странице **Ввод сведений о пакете приложения** укажите требуемые сведения.

    ![](manually-installing-web-packages/_static/image5.png)
5. При создании веб-пакета в КОНВЕЙЕРе планируется анализ файла конфигурации приложения и обнаружение переменных, таких как строки подключения и конечные точки служб. В данном случае:

    1. **Путь к приложению** — это путь IIS, по которому требуется установить приложение. Этот параметр является общим для всех пакетов развертывания, создаваемых в КОНВЕЙЕРе.
    2. **Адрес конечной точки службы контактсервице** — это адрес, который приложение должно использовать для взаимодействия с развернутой службой WCF. Этот параметр соответствует записи в файле *Web. config* .
    3. Первый параметр **строки подключения** — это строка подключения, которую веб-развертывание следует использовать для развертывания базы данных, связанной с приложением (в данном случае база данных членства ASP.NET). Этот параметр соответствует параметру на вкладке **Пакет/Публикация SQL** в Visual Studio.
    4. Второй параметр **строки подключения** — это строка подключения, которую приложение будет использовать для взаимодействия с базой данных, когда она работает. Это соответствует записи строки подключения в файле *Web. config* .

        > [!NOTE]
        > Дополнительные сведения о том, откуда берутся эти параметры, см. в разделе [Настройка параметров для развертывания веб-пакетов](configuring-parameters-for-web-package-deployment.md).
6. Щелкните **Далее**.
7. Если вы не развернули приложение на этом веб-сайте в первый раз, вам будет предложено указать, нужно ли удалить все существующее содержимое перед установкой. Выберите подходящий вариант для ваших требований и нажмите кнопку **Далее**.

    ![](manually-installing-web-packages/_static/image6.png)
8. После завершения установки пакета службами IIS нажмите кнопку **Готово**.

    ![](manually-installing-web-packages/_static/image7.png)

На этом этапе вы успешно опубликовали веб-приложение в IIS.

## <a name="conclusion"></a>Заключение

В этом разделе описано, как импортировать пакет веб-развертывания на веб-сайт IIS с помощью диспетчера IIS. Этот подход к публикации веб-приложений подходит, когда ограничения безопасности или инфраструктуры делают удаленное развертывание невозможным или нежелательным.

## <a name="further-reading"></a>Дополнительные материалы

Инструкции по настройке веб-сервера IIS для поддержки ручного импорта веб-пакета см. в статье [Настройка веб-сервера для веб-развертывание публикации (автономное развертывание)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md). Общие рекомендации по развертыванию веб-пакетов см. в разделе [Пошаговое руководство. Развертывание проекта веб-приложения с помощью пакета веб-развертывания (часть 1 из 4)](https://msdn.microsoft.com/library/dd483479.aspx).

> [!div class="step-by-step"]
> [Назад](creating-and-running-a-deployment-command-file.md)
