---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build
title: Развертывание конкретной сборки | Документация Майкрософт
author: jrjlee
description: В этом разделе описывается развертывание веб-пакеты и скрипты базы данных из определенной предыдущей сборки в новое место назначения, такие как промежуточное хранение или производство стандартной среды рабочего...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: c979535f-48a3-4ec4-a633-a77889b86ddb
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build
msc.type: authoredcontent
ms.openlocfilehash: e788f02795fc83ac98c5a0ba307f16b0f506e489
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57062181"
---
<a name="deploying-a-specific-build"></a>Развертывание конкретной сборки
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Загрузить PDF-файл](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описывается развертывание веб-пакеты и скрипты базы данных из определенной предыдущей сборки в новое место назначения, например в промежуточной или производственной среде.


Этот раздел является частью серии учебников, исходя из требования к развертыванию enterprise вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;для представления веб-приложения с более реалистичные уровень сложности, включая приложения ASP.NET MVC 3, Windows Communication Служба Foundation (WCF) и проект базы данных.

Метод развертывания в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в которой процесс построения и развертывания управляется двумя файлы проекта&#x2014;один содержащая инструкции сборки, которые применяются к каждой целевой среде и содержащего параметры построения и развертывания для конкретной среды. Во время сборки файл проекта для конкретной среды объединяется в файл проекта независимой от среды, чтобы полный набор инструкций построения.

## <a name="task-overview"></a>Общие сведения о задачах

До сих пор разделы в рамках этого учебного курса с фокусом ввода, о том, как для сборки, упаковки и развертывания веб-приложений и баз данных как часть один шаг или автоматизировать процесс. Однако в некоторых распространенных сценариев, нужно будет выбрать из списка сборок в папке сброса развертываемым ресурсам. Другими словами последней сборке может оказаться сборки, который вы хотите развернуть.

Рассмотрим сценарий непрерывной интеграции (CI), описанные в предыдущем разделе, [Создание сборки определение что поддерживает развертывания](creating-a-build-definition-that-supports-deployment.md). Вы создали определение сборки в Team Foundation Server (TFS) 2010. Каждый раз, чтобы разработчик возвращает код в Team Foundation Server, Team Build будет сборки кода, создание веб-пакеты и скрипты базы данных как часть процесса построения, выполните все модульные тесты и развертывания ресурсов в среде тестирования. В зависимости от политики хранения, которые были настроены при создании определения построения TFS будет сохранять определенное количество предыдущих сборок.

![](deploying-a-specific-build/_static/image1.png)

Теперь предположим, что вы выполнили проверку подлинности и Проверочное тестирование для одного из этих сборок в среде тестирования, вы будете готовы развернуть приложение в промежуточной среде. В то же время разработчики могут проверили в новом коде. Вы не хотите Перестройте решение и развертывание в промежуточной среде, и вы не хотите развернуть последнюю сборку в промежуточной среде. Вместо этого требуется выполнить развертывание конкретной сборки, вы проверен и проверенных на тестовых серверах.

Для этого необходимо указать Microsoft Build Engine (MSBuild), где можно найти на веб-пакеты и скрипты базы данных, которые созданы для определенной сборки.

## <a name="overriding-the-outputroot-property"></a>Переопределения свойства OutputRoot

В [образец решения](../web-deployment-in-the-enterprise/the-contact-manager-solution.md), *Publish.proj* файле объявляется свойство с именем **OutputRoot**. Как и предполагает имя, это корневой папке, которая содержит все, что процесс построения создает. В *Publish.proj* файл, вы увидите, **OutputRoot** свойство ссылается на корневой каталог для всех ресурсов развертывания.

> [!NOTE]
> **OutputRoot** — это имя часто используемые свойства. Файлы Visual C# и Visual Basic проекта также объявлять это свойство для хранения корневой каталог для всех выходных данных сборки.


[!code-xml[Main](deploying-a-specific-build/samples/sample1.xml)]


Если требуется, чтобы в файле проекта для развертывания веб-пакетов и скриптов в другом расположении базы данных&#x2014;выходные данные предыдущей сборки TFS, такие как&#x2014;вам просто нужно переопределить **OutputRoot** свойство. Следует задать значение свойства в соответствующую папку на сервере Team Build. При запуске MSBuild из командной строки, можно указать значение для **OutputRoot** аргумент командной строки:


[!code-console[Main](deploying-a-specific-build/samples/sample2.cmd)]


На практике, тем не менее, будет также нужно пропустить **построения** целевой&#x2014;нет смысла в создании решения в том случае, если вы не планируете использовать выходные данные сборки. Это можно сделать путем указания целей, которые вы хотите выполнить из командной строки:


[!code-console[Main](deploying-a-specific-build/samples/sample3.cmd)]


Однако в большинстве случаев необходимо встроить логики развертывания в определении сборки TFS. Это позволяет пользователям с **помещать сборки в очередь** разрешений на активацию развертывания из любой установки Visual Studio с подключением к серверу TFS.

## <a name="creating-a-build-definition-to-deploy-specific-builds"></a>Создание определения сборки для развертывания определенных сборок

Далее описано, как создать определение сборки, который позволяет пользователям активацию развертывания в промежуточной среде, с помощью одной команды.

В этом случае вы не хотите определения построения к фактической сборке ничего&#x2014;необходимо просто выполнение логики развертывания в файле пользовательского проекта. *Publish.proj* файл включает условную логику, которая пропускает **построения** ориентироваться на базе файла выполняется в Team Build. Это достигается путем оценки встроенных **BuildingInTeamBuild** свойство, которое автоматически присваивается **true** при запуске файла проекта в Team Build. Таким образом можно пропустить процесс построения и просто запустите файл проекта, чтобы развертывать существующую сборку.

**Чтобы создать определение сборки, чтобы активировать развертывание вручную**

1. В Visual Studio 2010 в **Team Explorer** окна, разверните узел командного проекта, щелкните правой кнопкой мыши **построения**, а затем нажмите кнопку **создать определение сборки**.

    ![](deploying-a-specific-build/_static/image2.png)
2. На **Общие** вкладке, присвойте имя определения сборки (например, **DeployToStaging**) и необязательное описание.
3. На **триггера** выберите **вручную — возвраты не запускают новую сборку**.
4. На **сборки по умолчанию** на вкладке **Копировать выходные данные в следующую папку сброса** введите путь к транзитному универсальными именами (UNC) (например,  **\\TFSBUILD\Drops**).

    ![](deploying-a-specific-build/_static/image3.png)
5. На **процесс** на вкладке **файл процесса сборки** раскрывающегося списка, оставьте **DefaultTemplate.xaml** выбранного. Это один из шаблонов процесса сборки по умолчанию, добавляемых в новые командные проекты.
6. В **параметры процесса сборки** таблицы, щелкните поле **элементы для построения** строк, а затем нажмите кнопку **кнопку с многоточием** кнопки.

    ![](deploying-a-specific-build/_static/image4.png)
7. В **элементы для построения** диалоговом окне щелкните **добавить**.
8. В **элементы типа** раскрывающемся списке выберите **файлы проекта MSBuild**.
9. Перейдите к расположению файла пользовательского проекта с помощью которого можно контролировать процесс развертывания, выберите файл и нажмите кнопку **ОК**.

    ![](deploying-a-specific-build/_static/image5.png)
10. В **элементы для построения** диалоговом окне щелкните **ОК**.
11. В **параметры процесса сборки** таблицу, разверните узел **Дополнительно** раздел.
12. В **Аргументы MSBuild** строк, укажите расположение файла проекта для конкретной среды и добавить заполнитель для расположения папки сборки:

    [!code-console[Main](deploying-a-specific-build/samples/sample4.cmd)]

    ![](deploying-a-specific-build/_static/image6.png)

    > [!NOTE]
    > Необходимо переопределить **OutputRoot** значение каждый раз, поставьте построение в очередь. Это рассматривается в следующей процедуре.
13. Нажмите кнопку **Сохранить**.

Когда вы запускаете сборку, необходимо обновить **OutputRoot** свойство, чтобы она указывала на сборку, необходимо развернуть.

**Для развертывания определенной сборки из определения сборки**

1. В **Team Explorer** окно, щелкните правой кнопкой мыши определение построения и нажмите кнопку **поставить новую сборку в**.

    ![](deploying-a-specific-build/_static/image7.png)
2. В **поставить сборку в очередь** диалоговом окне **параметры** вкладке, разверните узел **Дополнительно** раздел.
3. В **Аргументы MSBuild** строк, замените значение **OutputRoot** свойство с расположением папки сборки. Пример:

    [!code-console[Main](deploying-a-specific-build/samples/sample5.cmd)]

    ![](deploying-a-specific-build/_static/image8.png)

    > [!NOTE]
    > Не забудьте включить косую черту в конце пути к папке сборки.
4. Нажмите кнопку **очереди**.

Когда построение в очередь, файл проекта будет развертывать скрипты базы данных и web пакеты из папки размещения построений, указанному в **OutputRoot** свойство.

## <a name="conclusion"></a>Заключение

В этом разделе описано, как опубликовать развертывания ресурсов, таких как веб-пакеты и скрипты базы данных, из определенной предыдущей сборки с помощью модели развертывания проекта файл разбиения. Оно описывает способ переопределения **OutputRoot** определение сборки и включения логики развертывания в TFS.

## <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения о создании определений сборки см. в разделе [создание базового определения сборки](https://msdn.microsoft.com/library/ms181716.aspx) и [определить процедуру сборки](https://msdn.microsoft.com/library/ms181715.aspx). Дополнительные рекомендации по очереди сборок см. в разделе [поставить в очередь сборку](https://msdn.microsoft.com/library/ms181722.aspx).

> [!div class="step-by-step"]
> [Назад](creating-a-build-definition-that-supports-deployment.md)
> [Вперед](configuring-permissions-for-team-build-deployment.md)
