---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
title: Настройка разрешений для развертывания Team Build | Документация Майкрософт
author: jrjlee
description: В этом разделе описывается настройка разрешений, позволяющих серверу сборки развертывать содержимое на веб-серверах и серверах баз данных в составе автоматизированной версии b...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 2488a91e-b0a8-465a-b874-3233f724b56b
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
msc.type: authoredcontent
ms.openlocfilehash: 5699f72af6b8d7f18d1a2c631dfdedd63c66e1e6
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78518508"
---
# <a name="configuring-permissions-for-team-build-deployment"></a>Настройка разрешений для развертывания командной сборки

кто [Джейсон Иванов](https://github.com/jrjlee)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описывается настройка разрешений, позволяющих серверу сборки развертывать содержимое на веб-серверах и серверах баз данных в рамках автоматизированного процесса сборки.

Этот раздел является частью серии руководств, основанных на требованиях Enterprise к развертыванию вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;для представления веб-приложения с реалистичным уровнем сложности, включая приложение ASP.NET MVC 3, службу Windows Communication Foundation (WCF) и проект базы данных.

Метод развертывания в сердце этих учебников основан на подходе к файлам проекта Split, описанному в разделе [понимание файла проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в котором процесс сборки управляется двумя файлами&#x2014;проекта, содержащими инструкции по сборке, которые применяются к каждой целевой среде, и одна содержит параметры сборки и развертывания, относящиеся к конкретной среде. Во время сборки файл проекта, зависящий от среды, объединяется в файл проекта независимо от среды, чтобы сформировать полный набор инструкций по сборке.

## <a name="task-overview"></a>Обзор задач

При установке службы сборки Team Foundation Server (TFS) 2010 необходимо указать удостоверение, с которым должна выполняться служба. По умолчанию это учетная запись сетевой службы. Кроме того, службу сборки можно настроить для запуска с использованием доменной учетной записи.

Все задачи развертывания, для которых требуется проверка подлинности Windows и которые планируется автоматизировать с помощью Team Build, будут выполняться с использованием удостоверения службы сборки. Таким образом, необходимо предоставить удостоверению службы сборки все необходимые разрешения на веб-серверах и серверах баз данных.

> [!NOTE]
> Учетная запись сетевой службы использует учетную запись компьютера для проверки подлинности на других компьютерах. Учетные записи компьютеров принимают форму * [домен имя]\[имя компьютера] * **$** &#x2014;например **фабрикам\тфсбуилд $** . Таким образом, если служба сборки выполняется с использованием удостоверения сетевой службы, необходимо предоставить всем необходимым пользователям разрешения на доступ к удостоверению учетной записи компьютера для сервера сборки.

## <a name="configuring-web-server-permissions"></a>Настройка разрешений веб-сервера

Как описано в разделе [Выбор правильного подхода к веб-развертыванию](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), можно использовать два основных подхода к развертыванию веб-пакетов на удаленном веб-сервере.

- Разверните приложение из удаленного расположения, нацеливание на *службу веб-Deployment Agent* (также называемую удаленным агентом) на целевом сервере.
- Разверните приложение из удаленного расположения, нацеливания на обработчик веб-развертывание *службы IIS* (*IIS)* на целевом сервере.

В этом случае удаленный агент имеет два ключевых ограничения:

- Удаленный агент поддерживает только проверку подлинности NTLM. Иными словами, развертывание должно использовать удостоверение&#x2014;службы сборки, но нельзя олицетворять другую учетную запись.
- Чтобы использовать удаленный агент, учетная запись, выполняющая развертывание, должна иметь права администратора на целевом сервере.

Вместе эти два ограничения делают удаленный агент нежелательным для автоматизированного развертывания Team Build. Чтобы использовать этот подход, необходимо сделать учетную запись службы сборок администратором на любом целевом веб-сервере.

В отличие от этого, подход обработчика веб-развертывание предлагает различные преимущества:

- Обработчик веб-развертывание поддерживает обычную проверку подлинности по протоколу HTTPS, что позволяет передавать учетные данные альтернативной учетной записи средству веб-развертывания IIS (веб-развертывание).
- Можно настроить целевые веб-серверы, чтобы разрешить пользователям без прав администратора развертывать содержимое на определенные веб-сайты IIS с помощью обработчика веб-развертывание.

В результате, при автоматизации развертывания веб-пакета из Team Build, ясно предпочтительнее ориентироваться на обработчик веб-развертывание. Это рекомендуемый процесс.

1. Создайте учетную запись домена с низким уровнем привилегий, которая будет использоваться для развертывания.
2. Настройте обработчик веб-развертывание и предоставьте учетной записи необходимые разрешения для развертывания содержимого на определенном веб-сайте IIS, как описано в разделе [Настройка веб-сервера для публикации веб-развертывание (обработчик веб-развертывание)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).
3. Вызовите веб-развертывание и назначьте обработчик веб-развертывание, используя обычную проверку подлинности и указав учетные данные созданной учетной записи домена, чтобы выполнить развертывание.

В образце решения [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) вы указываете тип проверки подлинности (Basic или NTLM), веб-развертывание учетные данные и адрес конечной точки (удаленный агент или обработчик веб-развертывание) в файле проекта, относящемся к конкретной среде. Эти значения используются для формулировки и выполнения команды веб-развертывание при выполнении файла проекта. Дополнительные сведения см. в разделе [Развертывание веб-пакетов](../web-deployment-in-the-enterprise/deploying-web-packages.md).

Дополнительные сведения о настройке обработчика веб-развертывание, включая настройку разрешений, см. в разделе [Настройка веб-сервера для публикации веб-развертывание (обработчик веб-развертывание)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md). Дополнительные сведения о настройке удаленного агента см. в разделе [Настройка веб-сервера для веб-развертывание публикации (удаленный агент)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).

## <a name="configuring-database-server-permissions"></a>Настройка разрешений сервера базы данных

Для развертывания базы данных на SQL Server необходимо выполнить следующие действия.

- Создайте имя входа для учетной записи развертывания на экземпляре SQL Server.
- Предоставьте имени входа **dbcreator** разрешения на экземпляр SQL Server.
- После первоначального развертывания добавьте имя входа в роль **владельца db\_** в целевой базе данных. Это необходимо, поскольку при последующих развертываниях вы изменяете существующую базу данных, а не создаете новую базу данных.

Проверку подлинности в экземпляре SQL Server можно выполнить с помощью проверки подлинности NTLM или SQL Server проверки подлинности.

- При использовании проверки подлинности NTLM необходимо предоставить учетной записи службы сборки разрешения, описанные выше.
- При использовании SQL Server проверки подлинности необходимо предоставить учетной записи SQL Server разрешения, описанные выше. Также необходимо включить SQL Server имя пользователя и пароль в строку подключения, используемую для развертывания базы данных.

Пошаговые инструкции по настройке разрешений для развертывания базы данных см. в разделе [Настройка сервера базы данных для веб-развертывание публикации](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).

## <a name="conclusion"></a>Заключение

На этом этапе следует понимать необходимые разрешения, а также открытые параметры проверки подлинности при автоматизации развертывания веб-приложений и баз данных из Team Build. Кроме того, вы должны иметь возможность реализовать необходимые разрешения на веб-серверах IIS и SQL Server серверах баз данных.

## <a name="further-reading"></a>Дополнительные материалы

Дополнительные сведения о настройке сред Windows Server для поддержки удаленного развертывания см. в разделе [Настройка серверных сред для веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).

> [!div class="step-by-step"]
> [Назад](deploying-a-specific-build.md)
