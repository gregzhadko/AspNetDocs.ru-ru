---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-a-tfs-build-server-for-web-deployment
title: Настройка сервера сборки TFS для веб-развертывания | Документация Майкрософт
author: jrjlee
description: В этом разделе описывается подготовка сервера сборки Team Foundation Server (TFS) для создания и развертывания решений с помощью Team Build и расформатов Интернета...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: f8400241-4f4b-4bbd-9994-54fb64909e6e
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-a-tfs-build-server-for-web-deployment
msc.type: authoredcontent
ms.openlocfilehash: b3aaf7234706d149a3c784347528923f662c3511
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78512226"
---
# <a name="configuring-a-tfs-build-server-for-web-deployment"></a>Настройка сервера сборки TFS для веб-развертывания

кто [Джейсон Иванов](https://github.com/jrjlee)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описано, как подготовить сервер сборки Team Foundation Server (TFS) для создания и развертывания решений с помощью Team Build и средства веб-развертывания службы IIS (IIS) (веб-развертывание).

Этот раздел является частью серии руководств, основанных на требованиях Enterprise к развертыванию вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;для представления веб-приложения с реалистичным уровнем сложности, включая приложение ASP.NET MVC 3, службу Windows Communication Foundation (WCF) и проект базы данных.

Метод развертывания в сердце этих учебников основан на подходе к файлам проекта Split, описанному в разделе [понимание файла проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в котором процесс сборки управляется двумя файлами&#x2014;проекта, содержащими инструкции по сборке, которые применяются к каждой целевой среде, и одна содержит параметры сборки и развертывания, относящиеся к конкретной среде. Во время сборки файл проекта, зависящий от среды, объединяется в файл проекта независимо от среды, чтобы сформировать полный набор инструкций по сборке.

## <a name="task-overview"></a>Обзор задач

Чтобы подготовить сервер сборки для создания и развертывания решений, необходимо выполнить следующие действия.

- Установите и настройте службу сборки TFS.
- Установите Visual Studio 2010.
- Установите все продукты или компоненты, необходимые для создания решения, например версии .NET Framework или ASP.NET MVC.
- Установите веб-развертывание 2,0 или более поздней версии.

В этом разделе будет показано, как выполнять эти процедуры или указывать на другие ресурсы, где они существуют. В задачах и пошаговых руководствах этого раздела предполагается, что:

- Вы начинаете с чистой сборки сервера под Windows Server 2008 R2 с пакетом обновления 1 (SP1).
- Сервер присоединен к домену со статическим IP-адресом.
- Вы установили уровень приложений TFS на отдельном сервере, как описано в разделе ["Корпоративный веб-развертывание": обзор сценария](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md).

### <a name="who-performs-these-procedures"></a>Кто выполняет эти процедуры?

В большинстве случаев администратор TFS будет отвечать за настройку серверов сборки. В некоторых случаях Группа разработчиков может стать владельцем определенных серверов сборки.

## <a name="install-and-configure-the-tfs-build-service"></a>Установка и Настройка службы сборки TFS

При настройке сервера сборки первая задача заключается в установке и настройке службы сборки TFS. В рамках этого процесса необходимо:

- Установите службу сборки TFS и настройте учетную запись службы. Любые задачи сборки, включая развертывание, будут выполняться с использованием удостоверения учетной записи службы сборки.
- Создайте *контроллер сборки* и один или несколько *агентов сборки*. Каждый контроллер сборки управляет набором агентов сборки. При постановке сборки в очередь контроллер сборки назначает задаче сборки доступному агенту сборки. Каждая коллекция командных проектов в TFS сопоставляется с одним контроллером сборки.
- Настройте транзитную папку для выходных данных сборки. Это сетевая папка. Любые выходные данные сборки, например пакеты веб-развертывания, отправляются в транзитную папку.

Глава [Администрирование Team Foundation Build](https://msdn.microsoft.com/library/ms252495.aspx) в MSDN содержит все ресурсы, необходимые для выполнения следующих задач:

- Общие сведения о сборке Team Foundation, включая службу сборки, контроллеры сборки и агенты сборки, см. в разделе [Основные сведения о системе сборки Team Foundation](https://msdn.microsoft.com/library/dd793166.aspx).
- Сведения об установке и настройке службы сборки см. в разделе [Настройка компьютера сборки](https://msdn.microsoft.com/library/ms181712.aspx).
- Сведения о создании контроллеров сборки см. в разделе [Создание и работа с контроллером сборки](https://msdn.microsoft.com/library/ee330987.aspx).
- Сведения о создании агентов сборки см. в разделе [Создание агентов сборки и работа с ними](https://msdn.microsoft.com/library/bb399135.aspx).
- Сведения о создании и настройке папок сброса см. в разделе [Настройка транзитных папок](https://msdn.microsoft.com/library/bb778394.aspx).

## <a name="install-required-products-and-components"></a>Установка необходимых продуктов и компонентов

Чтобы сервер сборки можно было использовать для построения решений, необходимо установить все продукты, компоненты или сборки, необходимые для решения. Перед установкой компонентов веб-платформы необходимо установить Visual Studio 2010 (любая версия) на сервере сборки. Это гарантирует доступность основных файлов целевых Microsoft Build Engine (MSBuild) и целевых файлов конвейера веб-публикации (WPP) для службы сборки. Установщик Visual Studio также должен установить веб-развертывание, который потребуется, если вы планируете развертывать веб-пакеты в рамках процесса сборки.

Лучшим способом установки общих компонентов веб-платформы является использование [установщика веб-платформы](https://go.microsoft.com/?linkid=9805118). Это гарантирует установку последней версии каждого продукта, а также автоматически обнаруживает и устанавливает необходимые компоненты для каждого продукта. В случае с решением [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) для установки этих продуктов и компонентов следует использовать установщик веб-платформы:

- **.NET Framework 4,0**. Это необходимо для запуска приложений, созданных на основе этой версии .NET Framework.
- **Средство веб-развертывания 2,1 или более поздней версии**. При этом на сервере устанавливаются веб-развертывание (и его базовый исполняемый файл, MSDeploy. exe). В рамках этого процесса он устанавливает и запускает службу веб-Deployment Agent. Эта служба позволяет развертывать веб-пакеты с удаленного компьютера.
- **ASP.NET MVC 3**. При этом устанавливаются сборки, необходимые для запуска приложений ASP.NET MVC 3.

**Установка необходимых продуктов и компонентов**

1. Установите Visual Studio 2010. При появлении запроса на выбор устанавливаемых компонентов необходимо включить:

    1. Любые языки программирования, которые необходимо скомпилировать.
    2. Visual Web Developer. Это гарантирует, что целевые объекты WPP будут добавлены на сервер сборки.

        ![](configuring-a-tfs-build-server-for-web-deployment/_static/image1.png)
2. После завершения установки Visual Studio 2010 Загрузите и установите пакет обновления 1 (SP1) для [Visual studio 2010](https://go.microsoft.com/?linkid=9805133) (если он еще не включен в установочный носитель).

    > [!NOTE]
    > Visual Studio 2010 с пакетом обновления 1 (SP1) разрешает ошибку, которая может препятствовать поиску исполняемого файла MSDeploy в MSBuild.
3. Скачайте и запустите [установщик веб-платформы](https://go.microsoft.com/?linkid=9805118).
4. В верхней части окна **установщика веб-платформы 3,0** щелкните **Products (продукты**).
5. В левой части окна в области навигации щелкните **платформы**.
6. В строке **Microsoft .NET Framework 4** , если .NET Framework еще не установлен, нажмите кнопку **Добавить**.

    > [!NOTE]
    > Возможно, вы уже установили .NET Framework 4,0 с помощью Центр обновления Windows. Если продукт или компонент уже установлен, установщик веб-платформы сообщит это, заменив кнопку **Добавить** на **установленный**текст.

    ![](configuring-a-tfs-build-server-for-web-deployment/_static/image2.png)
7. В строке **ASP.NET MVC 3 (Visual Studio 2010)** нажмите кнопку **Добавить**.
8. В области навигации щелкните **сервер**.
9. В строке **средства веб-развертывания 2,1** нажмите кнопку **Добавить**.
10. Щелкните **Install**(Установить). Установщик веб-платформы отобразит список продуктов&#x2014;вместе со всеми связанными зависимостями&#x2014;, которые будут установлены, и предложит принять условия лицензионного соглашения.
11. Ознакомьтесь с условиями лицензионного соглашения и, если вы согласны с условиями, нажмите кнопку **принимаю**.
12. По завершении установки нажмите кнопку **Готово**, а затем закройте окно **установщик веб-платформы 3,0** .

> [!NOTE]
> Если процесс развертывания включает использование таких средств, как VSDBCMD. exe или SQLCMD. exe, необходимо убедиться, что они установлены на сервере сборки. VSDBCMD. exe — это средство Visual Studio, которое обычно добавляется на сервер при установке Team Foundation Build. SQLCMD. exe — это SQL Server средство. Вы можете скачать автономную версию SQLCMD. exe со страницы [пакета дополнительных компонентов Microsoft SQL Server 2008 R2](https://go.microsoft.com/?linkid=9805134) .

## <a name="conclusion"></a>Заключение

На этом этапе сервер сборки готов приступить к созданию и развертыванию проектов веб-приложений. В следующем разделе [Создание определения сборки, поддерживающего развертывание](creating-a-build-definition-that-supports-deployment.md), описывается создание и настройка определения сборки для управления моментом и способом построения и развертывания проектов.

## <a name="further-reading"></a>Дополнительные материалы

Общие рекомендации по работе с Team Build см. в разделе [Администрирование Team Foundation Build](https://msdn.microsoft.com/library/ms252495.aspx).

> [!div class="step-by-step"]
> [Назад](adding-content-to-source-control.md)
> [Вперед](creating-a-build-definition-that-supports-deployment.md)
