---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
title: Выбор правильного подхода к веб-развертывание | Документация Майкрософт
author: jrjlee
description: При работе с Internet Information Services (IIS) средство веб-развертывания (Web Deploy) 2.0 или более поздней, существуют три основных подхода, которые можно использовать для получения...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 787a53fd-9901-4a11-9d58-61e0509cda45
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
msc.type: authoredcontent
ms.openlocfilehash: 65b77b016e02c2d9c8ff2b925b1567f26a6a05cc
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59407917"
---
# <a name="choosing-the-right-approach-to-web-deployment"></a>Выбор правильного подхода для веб-развертывания

по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> При работе с Internet Information Services (IIS) средство веб-развертывания (Web Deploy) 2.0 или более поздней, существует три основных подхода, которые можно использовать для получения упакованного веб-приложений на веб-сервер. Вы можете сделать следующее.
> 
> - Развертывание приложения из удаленного расположения, обращаясь к *службу агента веб-развертывания* (также называется «удаленного агента») на целевом сервере.
> - Развернете приложение из удаленного расположения с помощью Web развертывания по запросу (также называется «temp агента»).
> - Развертывание приложения из удаленного расположения, обращаясь к *IIS веб-развертывание обработчик* на целевом сервере.
> - Разверните приложение, вручную копирование веб-пакета на конечный сервер и импортировав их в диспетчере IIS.
> 
> Настройка назначения веб-серверов будет зависеть какой подход к развертыванию, вы хотите использовать. Этот раздел поможет вам решить, какой подход к развертыванию подходит для вас.


В этой таблице показаны основные преимущества и недостатки каждого подхода развертывания, а также сценарии, которые чаще всего в соответствии с каждого подхода.

| Подход | Преимущества | Недостатки | Типичные сценарии |
| --- | --- | --- | --- |
| Удаленный агент | Это легко настроить. Он подходит для регулярных обновлений на веб-приложений и содержимое. | Пользователь должен быть администратором на целевом сервере. пользователь не может предоставить альтернативные учетные данные. | Среды разработки. Тестовые среды. |
| TEMP агента | Нет необходимости для установки веб-развертывания на конечном компьютере. Последнюю версию веб-развертывания используется автоматически. | Пользователь должен быть администратором на целевом сервере. пользователь не может предоставить альтернативные учетные данные. | Среды разработки. Тестовые среды. |
| Обработчик веб-развертывания | Пользователи без прав администратора могут развертывать содержимое. Он подходит для регулярных обновлений на веб-приложений и содержимое. | Это гораздо более сложная настройка. | Промежуточные среды. Интрасети рабочих сред. Среде выполнения. |
| Автономное развертывание | Это очень легко настроить. Он подходит для изолированных средах. | Администратор сервера необходимо вручную скопировать и импортировать веб-пакета каждый раз. | Интернет-рабочих сред. Изолированные среды сети. |
  

## <a name="using-the-remote-agent"></a>С помощью удаленного агента

При установке веб-развертывания, используя параметры по умолчанию на конечном сервере службу агента веб-развертывания («удаленного агента») автоматически устанавливается и запускается. По умолчанию удаленный агент предоставляет конечную точку HTTP по этому адресу:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample1.cmd)]


> [!NOTE]
> Вы можете заменить [*server*] на имя компьютера веб-сервера, IP-адрес для веб-сервера или имени узла, разрешающее на веб-сервер.


Администраторы сервера можно развернуть веб-пакеты из удаленного расположения, например компьютере разработчика или на сервере сборки, указав этот адрес конечной точки. Например предположим, что Hink Мэтт компании Fabrikam, Inc. была выполнена сборка проекта ContactManager.Mvc веб-приложения на своем компьютере разработчика. Процесс построения создает веб-пакет, вместе с *. deploy.cmd* файл, содержащий команды веб-развертывания, необходимые для установки пакета. Если Мэтт является администратором сервера, на сервере TESTWEB1, он может разворачивать веб-приложения на веб-сервер тестирования, выполнив следующую команду на своем компьютере разработчика:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample2.cmd)]


Фактический фактически исполняемый файл веб-развертывания может вывести адрес конечной точки удаленного агента, если указать имя компьютера, поэтому Мэтт требуется только ввести это:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample3.cmd)]


> [!NOTE]
> Дополнительные сведения о синтаксисе командной строки на веб-развертывания и *. deploy.cmd* файлы, см. в разделе [как: Установка пакета развертывания с помощью файла deploy.cmd](https://msdn.microsoft.com/library/ff356104.aspx).


Удаленный агент предоставляют рациональный способ для развертывания содержимого из удаленного расположения, и этот подход может работать с одним щелчком или автоматического развертывания. Тем не менее пользователь, запускающий выполнение команды развертывания также необходимо быть администратором домена или членом группы локальных администраторов на конечном сервере. Кроме того удаленный агент не поддерживает обычную проверку подлинности, поэтому невозможно передать альтернативные учетные данные в командной строке.

Удаленный агент предоставляет полезным подходом к развертыванию в среде разработки или тестовых сценариев, где нередко разработчикам контролировать полного администратора в серверной среде тестирования и приложений обычно повторного создания и развертывания очень часто. Тем не менее этот подход обычно устанавливается менее для промежуточной или рабочей среде.

End-to-end примером сценария, которое использует подход удаленного агента, см. в разделе [сценария: Настройка среды тестирования для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md).

## <a name="using-the-temp-agent"></a>С помощью Temp агента

Temp агента подхода к развертыванию аналогична подход удаленного агента. Тем не менее в отличие от подхода удаленного агента, не требуется установка веб-развертывания на веб-сервере назначения. Вместо этого при выполнении развертывания веб-развертывания установит временной версии службы веб-развертывания агента на целевом сервере и будет использоваться для развертывания содержимого в IIS. После завершения развертывания будут удалены все временные файлы.

Если вы хотите использовать параметр поставщика temp агента, добавьте **/g** флаг для вашей команды развертывания:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample4.cmd)]


> [!NOTE]
> Нельзя использовать агент temp Если службу агента веб-развертывания устанавливается на конечном компьютере, даже если служба не запущена.


Преимуществом такого подхода является то, что не нужно поддерживать установки веб-развертывания на серверах назначения. Кроме того не нужно убедиться, что исходный и конечный компьютеры под управлением той же версии веб-развертывания. Однако у этого подхода есть те же ограничения основной подход удаленный агент, а именно: необходимо быть локальным администратором на конечном сервере для развертывания содержимого, что поддерживается только проверка подлинности NTLM. Подход temp агента также требует намного больше начальной настройки целевой среде.

Дополнительные сведения об использовании временной агента см. в разделе [как: Установка пакета развертывания с помощью файла deploy.cmd](https://msdn.microsoft.com/library/ff356104.aspx) и [веб-развертывания по запросу](https://technet.microsoft.com/library/ee517345(WS.10).aspx).

## <a name="using-the-web-deploy-handler"></a>Использование веб-развертывание обработчика

Начиная с IIS 7 веб-развертывания предлагает другая технология развертывания через IIS веб-развертывание обработчик. Веб-развертывание обработчик тесно интегрирован с IIS службы веб-управления (WMSvc), который позволяет пользователям управлять веб-узлы IIS из удаленных расположений.

По умолчанию удаленный агент предоставляет конечную точку HTTP по этому адресу:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample5.cmd)]


> [!NOTE]
> Вы можете заменить [*server*] на имя компьютера веб-сервера, IP-адрес для веб-сервера или имени узла, разрешающее на веб-сервер.


Больших веб-развертывание обработчик удаленный агент, а агент temp удобен тем, можно настроить службы IIS, чтобы разрешить пользователям без прав администратора для развертывания приложений и содержимого для определенных веб-сайтов IIS. Веб-развертывание обработчик также поддерживает обычную проверку подлинности, поэтому можно указать альтернативные учетные данные в качестве параметров в командах веб-развертывания. Большой недостаток является изначально гораздо сложнее установить и настроить веб-развертывание обработчик.

В случае пользователей без прав администратора службы веб-управления (WMSvc) только позволит пользователю для подключения к IIS с помощью подключения уровня веб-сайта, а не подключение на уровне сервера. Чтобы получить доступ к определенному сайту, можно включить строку запроса, связанные с сайтом в адрес конечной точки:


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample6.cmd)]


Например предположим, что процесс сборки настраивается для автоматического развертывания веб-приложения в промежуточной среде после каждой успешной сборки. Если вы использовали подход удаленный агент, необходимо сделать администратором удостоверение процесса построения на серверах назначения. Напротив, метод веб-развертывание обработчик позволяет предоставлять пользователя без прав администратора&#x2014;**FABRIKAM\stagingdeployer** в данном случае&#x2014;разрешение на определенной веб-сайта IIS только и процесс сборки может предоставить эти учетные данные для развертывания веб-пакета.


[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample7.cmd)]


> [!NOTE]
> Дополнительные сведения о веб-развертывания операции командной строки и ее синтаксисе см. в разделе [веб-развертывание командной строки ссылки](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx). Дополнительные сведения об использовании *. deploy.cmd* файл, см. в разделе [как: Установка пакета развертывания с помощью файла deploy.cmd](https://msdn.microsoft.com/library/ff356104.aspx).


Веб-развертывание обработчик предоставляет полезно начать развертывание в промежуточных средах, средах размещения и интрасети рабочих средах, где доступна удаленного доступа к серверу, но не указаны учетные данные администратора.

End-to-end примером сценария, которое использует подход веб-развертывание обработчик, см. в разделе [сценария: Настройка промежуточной среды для веб-развертывания](scenario-configuring-a-staging-environment-for-web-deployment.md).

## <a name="using-offline-deployment"></a>С помощью развертывания в автономном режиме

В некоторых случаях это не возможно или целесообразно развертывать приложения и содержимое на веб-сайте IIS из удаленного расположения. Например исходный и конечный компьютеры возможно в изолированных сетях или сегменты сети, или политика брандмауэра может не разрешать удаленный доступ.

В сценариях, например они по-прежнему использовать об упаковке и публикации возможности веб-развертывания; Вы просто не может использовать их из удаленного расположения. Вместо этого администратор на целевом сервере необходимо скопировать веб-пакета на сервер и импортировать его в диспетчере IIS.

![](choosing-the-right-approach-to-web-deployment/_static/image1.png)

Автономное развертывание подход обычно используется в производственной среде Интернета, где серверы в сети периметра могут иметь ограниченную связь с компьютерами во внутренней сети.

End-to-end примером сценария, которое использует подход развертывания в автономном режиме, см. в разделе [сценария: Настройке рабочей среды для веб-развертывания](scenario-configuring-a-production-environment-for-web-deployment.md).

## <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения о веб-развертывания операции командной строки и ее синтаксисе см. в разделе [веб-развертывание командной строки ссылки](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx). Дополнительные сведения об использовании *. deploy.cmd* файл, см. в разделе [как: Установка пакета развертывания с помощью файла deploy.cmd](https://msdn.microsoft.com/library/ff356104.aspx).

Более общие рекомендации по разному, в котором можно развернуть веб-пакетов с удаленного компьютера см. в разделе [с помощью Web развертывание удаленно](https://technet.microsoft.com/library/ee461175(WS.10).aspx). Дополнительные сведения об использовании развертывание Web по запросу см. в разделе [развертывание Web по запросу](https://technet.microsoft.com/library/ee517345(WS.10).aspx).

> [!div class="step-by-step"]
> [Назад](configuring-server-environments-for-web-deployment.md)
> [Вперед](scenario-configuring-a-test-environment-for-web-deployment.md)
