---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
title: Выбор правильного подхода к веб-развертыванию | Документация Майкрософт
author: jrjlee
description: При работе со веб-развертывание средством веб-развертывания службы IIS (IIS) 2,0 или более поздней версии существует три основных подхода, которые можно использовать для получения...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 787a53fd-9901-4a11-9d58-61e0509cda45
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment
msc.type: authoredcontent
ms.openlocfilehash: 13f784dd8e6404806104d56b026b3c41ca178892
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78441426"
---
# <a name="choosing-the-right-approach-to-web-deployment"></a>Выбор правильного подхода для веб-развертывания

кто [Джейсон Иванов](https://github.com/jrjlee)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> При работе со веб-развертывание средством веб-развертывания службы IIS (IIS) 2,0 или более поздней версии существует три основных подхода, которые можно использовать для получения упакованных веб-приложений на веб-сервер. Вы можете сделать одно из двух:
> 
> - Разверните приложение из удаленного расположения, указав *службу веб-Deployment Agent* (также называемую "удаленным агентом") на целевом сервере.
> - Разверните приложение из удаленного расположения, используя веб-развертывание по запросу (также называемое временным агентом).
> - Разверните приложение из удаленного расположения, указав на целевом сервере *обработчик IIS веб-развертывание* .
> - Разверните приложение, вручную скопировав веб-пакет на целевой сервер и импортировав его с помощью диспетчера служб IIS.
> 
> Настройка целевых веб-серверов зависит от того, какой подход следует использовать для развертывания. Этот раздел поможет решить, какой подход к развертыванию подходит вам.

В этой таблице показаны основные преимущества и недостатки каждого подхода к развертыванию, а также сценарии, которые обычно подходят для каждого подхода.

| Подход | Преимущества | Недостатки | Типичные сценарии |
| --- | --- | --- | --- |
| Удаленный агент | Его легко настроить. Он подходит для регулярного обновления веб-приложений и содержимого. | Пользователь должен быть администратором на целевом сервере. пользователь не может предоставить альтернативные учетные данные. | Среды разработки. Тестовые среды. |
| Временный агент | На целевом компьютере нет необходимости устанавливать веб-развертывание. Будет автоматически использоваться последняя версия веб-развертывание. | Пользователь должен быть администратором на целевом сервере. пользователь не может предоставить альтернативные учетные данные. | Среды разработки. Тестовые среды. |
| Обработчик веб-развертывание | Пользователи без прав администратора могут развертывать содержимое. Он подходит для регулярного обновления веб-приложений и содержимого. | Настройка будет намного сложнее. | Промежуточные среды. Рабочие среды в интрасети. Размещенные среды. |
| Автономное развертывание | Его очень легко настроить. Он подходит для изолированных сред. | Администратор сервера должен вручную копировать и импортировать веб-пакет каждый раз. | Рабочие среды с выходом в Интернет. Изолированные сетевые среды. |

## <a name="using-the-remote-agent"></a>Использование удаленного агента

При установке веб-развертывание с параметрами по умолчанию на целевом сервере служба веб-Deployment Agent ("удаленный агент") автоматически устанавливается и запускается. По умолчанию удаленный агент предоставляет конечную точку HTTP по этому адресу:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample1.cmd)]

> [!NOTE]
> Можно заменить [*Server*] именем компьютера веб-сервера, IP-адресом веб-сервера или именем узла, которое разрешается на веб-сервер.

Администраторы сервера могут развертывать веб-пакеты из удаленного расположения, например компьютера разработчика или сервера сборки, указав этот адрес конечной точки. Например, пусть Мэтт Хинк в компании Fabrikam, Inc. создала проект веб-приложения ContactManager. MVC на своем компьютере разработчика. Процесс сборки создает веб-пакет вместе с файлом *. deploy. cmd* , который содержит команды веб-развертывание, необходимые для установки пакета. Если Мэтт является администратором сервера TESTWEB1, он может развернуть веб-приложение на тестовом веб-сервере, выполнив следующую команду на своем компьютере разработчика:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample2.cmd)]

В действительности веб-развертывание исполняемый файл может определить адрес конечной точки удаленного агента, если указать имя компьютера, поэтому Мэтт нужно только ввести следующую команду:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample3.cmd)]

> [!NOTE]
> Дополнительные сведения о веб-развертывание синтаксисе командной строки и файлах *deploy. cmd* см. в разделе [как установить пакет развертывания с помощью файла deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx).

Удаленный агент предлагает простой способ развертывания содержимого из удаленного расположения, и этот подход хорошо работает с одним щелчком или автоматическим развертыванием. Однако пользователь, выполняющий команду развертывания, должен также быть администратором домена или членом локальной группы администраторов на целевом сервере. Кроме того, удаленный агент не поддерживает обычную проверку подлинности, поэтому нельзя передавать альтернативные учетные данные в командной строке.

Удаленный агент предоставляет полезный подход к развертыванию в сценариях разработки или тестирования, где разработчикам часто приходится иметь полный контроль над средой тестового сервера, и приложения обычно перестраиваются и развертываются повторно. часто. Однако этот подход обычно менее приемлем для промежуточных или рабочих сред.

Полный пример сценария, использующего подход с удаленным агентом, см. в разделе [сценарий: Настройка тестовой среды для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md).

## <a name="using-the-temp-agent"></a>Использование временного агента

Подход к развертыванию с временным агентом аналогичен подходу удаленного агента. Однако в отличие от подхода удаленного агента не требуется устанавливать веб-развертывание на целевом веб-сервере. Вместо этого при выполнении развертывания веб-развертывание установит временную версию службы агента веб-развертывания на целевом сервере и будет использовать ее для развертывания содержимого в службах IIS. После завершения развертывания удаляются все временные файлы.

Если вы хотите использовать параметр поставщика временных агентов, добавьте флаг **/g** в команду развертывания:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample4.cmd)]

> [!NOTE]
> Нельзя использовать временный агент, если на конечном компьютере установлена служба агента веб-развертывания, даже если служба не запущена.

Преимущество такого подхода заключается в том, что не нужно поддерживать установку веб-развертывание на целевых серверах. Кроме того, не нужно проверять, что на исходном и целевом компьютерах работает одна и та же версия веб-развертывание. Однако этот подход имеет те же ограничения, что и при использовании удаленного агента, а именно, для развертывания содержимого необходимо быть локальным администратором на целевом сервере, и поддерживается только проверка подлинности NTLM. При использовании временного агента также требуется гораздо более начальная настройка целевой среды.

Дополнительные сведения об использовании агента Temp см. в разделе [как установить пакет развертывания с помощью файла deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx) и [веб-развертывание по запросу](https://technet.microsoft.com/library/ee517345(WS.10).aspx).

## <a name="using-the-web-deploy-handler"></a>Использование обработчика веб-развертывание

Для IIS 7, веб-развертывание предлагает альтернативный подход к развертыванию с помощью обработчика веб-развертывание IIS. Обработчик веб-развертывание тесно интегрирован со службой веб-управления IIS (WMSvc), которая предназначена для предоставления пользователям возможности управлять веб-сайтами IIS из удаленных расположений.

По умолчанию удаленный агент предоставляет конечную точку HTTP по этому адресу:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample5.cmd)]

> [!NOTE]
> Можно заменить [*Server*] именем компьютера веб-сервера, IP-адресом веб-сервера или именем узла, которое разрешается на веб-сервер.

Большое преимущество обработчика веб-развертывание по отношению к удаленному агенту и временному агенту заключается в том, что можно настроить службы IIS так, чтобы пользователи без прав администратора могли развертывать приложения и содержимое на определенные веб-сайты IIS. Обработчик веб-развертывание также поддерживает обычную проверку подлинности, поэтому можно указать альтернативные учетные данные в качестве параметров в командах веб-развертывание. Основной недостаток заключается в том, что для установки и настройки обработчик веб-развертывание изначально гораздо сложнее.

В случае с пользователями, не являющимися администраторами, служба веб-управления (WMSvc) будет разрешать пользователю подключаться только к службам IIS с помощью подключения на уровне сайта, а не подключения на уровне сервера. Чтобы получить доступ к определенному сайту, можно включить строку запроса для конкретного сайта в адрес конечной точки:

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample6.cmd)]

Например, предположим, что процесс сборки настроен для автоматического развертывания веб-приложения в промежуточной среде после каждой успешной сборки. Если использовался подход с удаленным агентом, необходимо сделать процесс сборки удостоверением администратора на целевых серверах. В отличие от этого, использование обработчика веб-развертывание можно&#x2014;**предоставить пользователю без** прав администратора в этом случае&#x2014;разрешение на конкретный веб-сайт IIS, а процесс сборки может предоставить эти учетные данные для развертывания веб-пакета.

[!code-console[Main](choosing-the-right-approach-to-web-deployment/samples/sample7.cmd)]

> [!NOTE]
> Дополнительные сведения о веб-развертывание операциях и синтаксисе командной строки см. в разделе [веб-развертывание справочнике по командной строке](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx). Дополнительные сведения об использовании файла *. deploy. cmd* см. в разделе [как установить пакет развертывания с помощью файла deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx).

Обработчик веб-развертывание предоставляет полезный подход к развертыванию в промежуточных средах, средах размещения и рабочих средах на основе интрасети, где доступен удаленный доступ к серверу, а учетные данные администратора — нет.

Полный пример сценария, в котором используется метод обработчика веб-развертывание, см. [в разделе Сценарий: Настройка промежуточной среды для веб-развертывания](scenario-configuring-a-staging-environment-for-web-deployment.md).

## <a name="using-offline-deployment"></a>Использование автономного развертывания

В некоторых случаях невозможно или практично развертывать приложения и содержимое на веб-сайте IIS из удаленного расположения. Например, исходный и конечный компьютеры могут находиться в изолированных сетях или сегментах сети, либо политика брандмауэра не допускует удаленный доступ.

В таких сценариях можно по-прежнему использовать возможности упаковки и публикации веб-развертывание; Вы просто не можете использовать их из удаленного расположения. Вместо этого администратор на целевом сервере должен скопировать веб-пакет на сервер и импортировать его с помощью диспетчера служб IIS.

![](choosing-the-right-approach-to-web-deployment/_static/image1.png)

Подход к развертыванию в автономном режиме обычно полезен в рабочих средах с выходом в Интернет, где серверы в сети периметра могут иметь ограниченные возможности подключения к компьютерам во внутренней сети.

Полный пример сценария, в котором используется вариант автономного развертывания, см. в разделе [сценарий: Настройка рабочей среды для веб-развертывания](scenario-configuring-a-production-environment-for-web-deployment.md).

## <a name="further-reading"></a>Дополнительные материалы

Дополнительные сведения о веб-развертывание операциях и синтаксисе командной строки см. в разделе [веб-развертывание справочнике по командной строке](https://technet.microsoft.com/library/dd568991(v=ws.10).aspx). Дополнительные сведения об использовании файла *. deploy. cmd* см. в разделе [как установить пакет развертывания с помощью файла deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx).

Общие рекомендации по различным способам развертывания веб-пакетов с удаленного компьютера см. в разделе [использование веб-развертывание удаленно](https://technet.microsoft.com/library/ee461175(WS.10).aspx). Дополнительные сведения об использовании веб-развертывание по запросу см. в разделе [веб-развертывание по запросу](https://technet.microsoft.com/library/ee517345(WS.10).aspx).

> [!div class="step-by-step"]
> [Назад](configuring-server-environments-for-web-deployment.md)
> [Вперед](scenario-configuring-a-test-environment-for-web-deployment.md)
