---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
title: Настройка веб-сервера для публикации веб-развертывание (обработчик веб-развертывание) | Документация Майкрософт
author: jrjlee
description: В этом разделе описано, как настроить веб-сервер службы IIS (IIS) для поддержки веб-публикации и развертывания с помощью IIS веб-развертывание...
ms.author: riande
ms.date: 01/29/2017
ms.assetid: 90ebf911-1c46-4470-b876-1335bd0f590f
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
msc.type: authoredcontent
ms.openlocfilehash: baaebd32f08d3c6b861572c5c5a16ec0fb70aaf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78458640"
---
# <a name="configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler"></a>Настройка веб-сервера для публикации веб-развертывания (обработчик веб-развертывания)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описывается настройка веб-сервера службы IIS (IIS) для поддержки веб-публикации и развертывания с помощью обработчика веб-развертывание IIS.
> 
> При работе с веб-развертывание 2,0 или более поздней версии существует три основных подхода, которые можно использовать для получения приложений или сайтов на веб-сервер. Вы можете:
> 
> - Используйте *службу удаленного агента веб-развертывание*. Этот подход требует меньшей настройки веб-сервера, но для развертывания любых данных на сервере необходимо предоставить учетные данные администратора локального сервера.
> - Используйте *обработчик веб-развертывание*. Этот подход гораздо более сложен и требует более первоначальных усилий по настройке веб-сервера. Однако при использовании этого подхода можно настроить службы IIS, чтобы разрешить пользователям без прав администратора выполнять развертывание. Обработчик веб-развертывание доступен только в службах IIS версии 7 или более поздней.
> - Используйте *автономное развертывание*. Этот подход требует минимальной настройки веб-сервера, но администратор сервера должен вручную скопировать веб-пакет на сервер и импортировать его с помощью диспетчера служб IIS.
> 
> Дополнительные сведения о ключевых функциях, преимуществах и недостатках этих подходов см. [в разделе Выбор правильного подхода к веб-развертыванию](choosing-the-right-approach-to-web-deployment.md).

Да, если вы хотите разрешить пользователям без прав администратора развертывать содержимое на определенные веб-сайты IIS. Этот подход часто желательно применять в сценариях такого типа:

- Промежуточная или рабочая среда, где у пользователя или учетной записи службы, запускающей удаленное развертывание, вряд ли будет доступа к учетным данным администратора сервера.
- Размещенные среды, в которых вы хотите предоставить удаленным пользователям возможность обновлять свои веб-сайты, не предоставляя им полного контроля над веб-серверами (или доступом к веб-сайтам других пользователей).

В сценариях разработки или тестирования или в небольших организациях развертывание содержимого с помощью учетных данных администратора сервера часто менее спорными. В этих сценариях Настройка веб-серверов для поддержки развертывания с помощью [службы веб-развертывание Remote Agent](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md) предлагает более простой подход.

## <a name="task-overview"></a>Обзор задач

Чтобы настроить веб-сервер на прием и развертывание веб-пакетов с удаленного компьютера с помощью обработчика веб-развертывание, вам потребуется:

- Создайте или выберите учетную запись пользователя домена ("пользователь без прав администратора"), учетные данные которого будут использоваться для выполнения развертываний.
- Установите IIS 7,5, включая службу веб-управления и модуль обычной проверки подлинности.
- Установите веб-развертывание 2,1 или более поздней версии.
- Настройте службу веб-управления, чтобы разрешить удаленные подключения, и запустите службу.
- Создайте веб-сайт IIS для размещения развернутого содержимого.
- Предоставьте пользователям, не являющимся администраторами, разрешения на веб-сайт в диспетчере служб IIS.
- Убедитесь, что правила делегирования службы веб-управления позволяют службе добавлять и изменять содержимое веб-сайта с помощью учетной записи пользователя без прав администратора.
- Настройте все брандмауэры, разрешающие входящие подключения через порт 8172.

Чтобы разместить пример решения ContactManager в частности, вам потребуется:

- Установите .NET Framework 4,0.
- Установите ASP.NET MVC 3.

В этом разделе будет показано, как выполнить каждую из этих процедур. В задачах и пошаговых руководствах этого раздела предполагается, что вы начинаете с чистой серверной сборки под Windows Server 2016. Прежде чем продолжить, убедитесь в том, что:

- Windows Server 2016
- Сервер присоединен к домену.
- Сервер имеет статический IP-адрес.

> [!NOTE]
> Дополнительные сведения о присоединении компьютеров к домену см. в разделе [Присоединение компьютеров к домену и вход в систему](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx). Дополнительные сведения о настройке статических IP-адресов см. в статье [Настройка статического IP-](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx)адреса.

## <a name="install-products-and-components"></a>Установка продуктов и компонентов

Этот раздел поможет вам установить необходимые продукты и компоненты на веб-сервере. Прежде чем начать, рекомендуется запустить Центр обновления Windows, чтобы гарантировать, что сервер будет полностью обновлен.

В этом случае необходимо установить следующие компоненты:

- **Рекомендуемая конфигурация IIS 7**. Это включает роль **веб-сервера (IIS)** на веб-сервере и устанавливает набор модулей и компонентов IIS, необходимых для размещения приложения ASP.NET.
- **IIS: Служба управления**. При этом устанавливается служба веб-управления (WMSvc) в службах IIS. Эта служба обеспечивает удаленное управление веб-сайтами IIS и предоставляет клиентам конечную точку обработчика веб-развертывание.
- **IIS: обычная проверка подлинности**. При этом устанавливается модуль базовой проверки подлинности IIS. Это позволит службе веб-управления (WMSvc) пройти проверку подлинности предоставленных учетных данных.
- **Средство веб-развертывания 2,1 или более поздней версии**. При этом на сервере устанавливаются веб-развертывание (и его базовый исполняемый файл, MSDeploy. exe). В рамках этого процесса он устанавливает обработчик веб-развертывание и интегрирует его со службой веб-управления.
- **.NET Framework 4,0**. Это необходимо для запуска приложений, созданных на основе этой версии .NET Framework.
- **ASP.NET MVC 3**. При этом устанавливаются сборки, необходимые для запуска приложений MVC 3.

> [!NOTE]
> В этом пошаговом руководстве описывается использование установщика веб-платформы для установки и настройки различных компонентов. Хотя вам не нужно использовать установщик веб-платформы, он упрощает процесс установки, автоматически выявляя зависимости и гарантируя, что вы всегда получаете новейшие версии продукта. Дополнительные сведения см. в разделе [установщик веб-платформы Майкрософт](https://go.microsoft.com/?linkid=9805118).

**Установка необходимых продуктов и компонентов**

1. Скачайте и установите [установщик веб-платформы](https://go.microsoft.com/?linkid=9805118).
2. После завершения установки установщик веб-платформы запустится автоматически.

    > [!NOTE]
    > Теперь можно запустить установщик веб-платформы в любое время из меню " **Пуск** ". Для этого в меню **Пуск** выберите пункт **все программы**, а затем щелкните **установщик веб-платформы Майкрософт**.
3. В верхней части окна **Установщик веб-платформы** щелкните **Продукты**.
4. В левой части окна в области навигации щелкните **платформы**.
5. В строке **Microsoft .NET Framework 4** , если .NET Framework еще не установлен, нажмите кнопку **Добавить**.

    > [!NOTE]
    > Возможно, вы уже установили .NET Framework 4,0 с помощью Центр обновления Windows. Если продукт или компонент уже установлен, установщик веб-платформы сообщит это, заменив кнопку **Добавить** на **установленный**текст.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image1.png)
6. В строке **ASP.NET MVC 3 (Visual Studio 2010)** нажмите кнопку **Добавить**.
7. В области навигации щелкните **сервер**.
8. В строке **рекомендуемой конфигурации IIS 7** нажмите кнопку **Добавить**.
9. В строке **средства веб-развертывания 2,1** нажмите кнопку **Добавить**.
10. В строке **службы IIS: обычная проверка подлинности** нажмите кнопку **Добавить**.
11. В строке **Служба IIS: Управление** нажмите кнопку **Добавить**.
12. Щелкните **Install**(Установить). Установщик веб-платформы отобразит список продуктов&#x2014;вместе со всеми связанными зависимостями&#x2014;, которые будут установлены, и предложит принять условия лицензионного соглашения.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image2.png)
13. Ознакомьтесь с условиями лицензионного соглашения и, если вы согласны с условиями, нажмите кнопку **принимаю**.
14. По завершении установки нажмите кнопку **Готово**, а затем закройте окно **установщик веб-платформы** .

Если вы установили .NET Framework 4,0 до установки служб IIS, необходимо запустить [средство регистрации служб iis ASP.NET](https://msdn.microsoft.com/library/k6h9cz8h(v=VS.100).aspx) (ASPNET\_regiis. exe), чтобы зарегистрировать последнюю версию ASP.NET с IIS. В противном случае вы обнаружите, что IIS будет обслуживать статическое содержимое (например, HTML-файлы) без проблем, но при попытке перейти к содержимому ASP.NET будет возвращена **Ошибка HTTP 404,0 — не найдена** . Чтобы убедиться, что ASP.NET 4,0 зарегистрирован, можно использовать следующую процедуру.

**Регистрация ASP.NET 4,0 в службах IIS**

1. Нажмите кнопку **Пуск**и введите **Командная строка**.
2. В результатах поиска щелкните правой кнопкой мыши пункт **Командная строка**и выберите команду **Запуск от имени администратора**.
3. В окне командной строки перейдите в каталог **%WINDIR%\Microsoft.NET\Framework\v4.0.30319** .
4. Введите эту команду и нажмите клавишу ВВОД:

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample1.cmd)]
5. Если вы планируете размещать в системе 64-разрядные веб-приложения в любой момент, необходимо также зарегистрировать 64-разрядную версию ASP.NET с IIS. Для этого в окне командной строки перейдите в каталог **%WINDIR%\Microsoft.NET\Framework64\v4.0.30319** .
6. Введите эту команду и нажмите клавишу ВВОД:

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample2.cmd)]

Рекомендуется использовать Центр обновления Windows на этом этапе, чтобы скачать и установить все доступные обновления для новых продуктов и компонентов, которые вы установили.

## <a name="configure-the-web-management-service"></a>Настройка службы веб-управления

Теперь, когда вы установили все необходимое, следующим шагом является настройка службы веб-управления в службах IIS. На высоком уровне необходимо выполнить следующие задачи:

- Включите обычную проверку подлинности на уровне сервера.
- Настройка службы веб-управления для приема удаленных подключений.
- Запустите службу веб-управления.
- Убедитесь, что установлены необходимые правила делегирования службы веб-управления.

**Настройка службы веб-управления**

1. В меню **Пуск** укажите пункт **Администрирование**, а затем выберите пункт **Диспетчер службы IIS (IIS)** .
2. В диспетчере служб IIS в области **подключения** щелкните узел сервера (например, **STAGEWEB1**).

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image3.png)
3. В центральной области в разделе **IIS**дважды щелкните **Проверка подлинности**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image20.png)
4. Щелкните правой кнопкой мыши **Обычная проверка подлинности**и выберите команду **включить**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image5.png)
5. В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.
6. В центральной области в разделе **Управление**дважды щелкните **Служба управления**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image6.png)
7. В центральной области выберите **включить удаленные соединения**.

    > [!NOTE]
    > Если служба веб-управления уже запущена, ее необходимо сначала отключить.
8. На панели **действия** нажмите кнопку **запустить** , чтобы запустить службу веб-управления.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image7.png)
9. Если будет предложено сохранить параметры, нажмите кнопку **Да**.

    > [!NOTE]
    > Также может потребоваться настроить автоматический запуск службы. Для этого откройте консоль службы, щелкните правой кнопкой мыши **Служба веб-управления**и выберите пункт **свойства**. В раскрывающемся списке **Тип запуска** выберите **автоматически**, а затем нажмите кнопку **ОК**.
10. В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.
11. В центральной области в разделе **Управление**дважды щелкните **делегирование службы управления**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image8.png)
12. Убедитесь, что Центральная панель содержит набор правил.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image9.png)

    Эти правила позволяют пользователям службы веб-управления с правами использовать различные поставщики веб-развертывание. Например, для развертывания веб-приложений и содержимого в службах IIS с помощью обработчика веб-развертывание необходимо правило делегирования, которое позволяет всем пользователям службы веб-управления, прошедшим проверку подлинности, использовать поставщиков **контентпас** и **iisapp** (Последнее правило, которое можно увидеть на снимке экрана).

    Если вы установили продукты и компоненты в порядке, описанном в этом разделе, последняя версия веб-развертывание должна автоматически добавить все необходимые правила делегирования в службу веб-управления. Если на странице делегирования службы управления не отображаются правила, необходимо создать их самостоятельно. Инструкции по выполнению этой задачи см. в разделе [Настройка обработчика веб-развертывания](https://go.microsoft.com/?linkid=9805124).
13. В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.

## <a name="create-and-configure-an-iis-website"></a>Создание и Настройка веб-сайта IIS

Прежде чем можно будет развернуть веб-содержимое на сервере, необходимо создать и настроить веб-сайт IIS для размещения содержимого. Веб-развертывание может развертывать только веб-пакеты на существующем веб-сайте IIS; Он не может создать веб-сайт. Кроме того, необходимо выполнить дополнительную настройку, позволяющую учетной записи без прав администратора развертывать содержимое удаленно. На высоком уровне необходимо выполнить следующие задачи:

- Создайте папку в файловой системе для размещения содержимого.
- Создайте веб-сайт IIS для обслуживания содержимого и свяжите его с локальной папкой.
- Предоставьте разрешения на чтение удостоверению пула приложений в локальной папке.
- Предоставьте необходимые разрешения IIS учетной записи домена, которая будет развертывать веб-приложение.

Хотя ничто не мешает развертывать содержимое на веб-сайте по умолчанию в службах IIS, этот подход не рекомендуется использовать ни для тестов, ни для демонстрационных сценариев. Для имитации рабочей среды следует создать новый веб-сайт IIS с параметрами, зависящими от требований приложения.

**Создание веб-сайта IIS**

1. В локальной файловой системе создайте папку для хранения содержимого (например, **к:\демосите**).
2. В меню **Пуск** укажите пункт **Администрирование**, а затем выберите пункт **Диспетчер службы IIS (IIS)** .
3. В диспетчере служб IIS в области **подключения** разверните узел сервера (например, **STAGEWEB1**).

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image10.png)
4. Щелкните правой кнопкой мыши узел **сайты** и выберите команду **Добавить веб-сайт**.
5. В поле **имя сайта** введите имя веб-сайта IIS (например, **демосите**).
6. В поле **физический путь** введите (или перейдите к) путь к локальной папке (например, **к:\демосите**).
7. В поле **порт** введите номер порта, на котором будет размещен веб-сайт (например, **85**).

    > [!NOTE]
    > Номера стандартных портов 80 для HTTP и 443 для HTTPS. Однако при размещении этого веб-сайта на порту 80 необходимо будет закрыть веб-сайт по умолчанию, прежде чем можно будет получить доступ к сайту.
8. Оставьте поле **имя узла** пустым, если не требуется настроить запись службы доменных имен (DNS) для веб-сайта, а затем нажмите кнопку **ОК**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image11.png)

    > [!NOTE]
    > В рабочей среде вам, скорее всего, потребуется разместить веб-сайт через порт 80 и настроить заголовок узла вместе с соответствующими записями DNS. Дополнительные сведения о настройке заголовков узлов в IIS 7 см. в разделе [Настройка заголовка узла для веб-сайта (IIS 7)](https://technet.microsoft.com/library/cc753195(WS.10).aspx). Дополнительные сведения о роли DNS-сервера в Windows Server см. в разделе [Обзор DNS-сервера](https://technet.microsoft.com/library/cc770392.aspx) и [DNS-сервер](https://technet.microsoft.com/windowsserver/dd448607).
9. В области **Действия** в разделе **Изменение веб-сайта**выберите пункт **Привязки**.
10. В диалоговом окне **Привязки сайта** нажмите кнопку **Добавить**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image12.png)
11. В диалоговом окне **Добавление привязки сайта** задайте **IP-адрес** и **порт** в соответствии с существующей конфигурацией сайта.
12. В поле **имя узла** введите имя веб-сервера (например, **STAGEWEB1**) и нажмите кнопку **ОК**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image13.png)

    > [!NOTE]
    > Первая привязка сайта позволяет локально получить доступ к сайту с помощью IP-адреса и порта или `http://localhost:85`. Вторая привязка сайта позволяет получить доступ к сайту с других компьютеров в домене, используя имя компьютера (например, http://stageweb1:85).
13. В диалоговом окне **Привязки сайта** нажмите кнопку **Закрыть**.
14. В области **подключения** щелкните **Пулы приложений**.
15. В области **Пулы приложений** щелкните правой кнопкой мыши имя пула приложений и выберите пункт **Основные параметры**. По умолчанию имя пула приложений будет совпадать с именем вашего веб-сайта (например, **демосите**).
16. В списке **версия .NET CLR** выберите **.NET CLR v 4.0.30319**и нажмите кнопку **ОК**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image21.png)

    > [!NOTE]
    > Для примера решения требуется .NET Framework 4,0. Это не является обязательным для веб-развертывание в целом.

Чтобы веб-сайт мог обслуживать содержимое, удостоверение пула приложений должно иметь разрешения на чтение для локальной папки, в которой хранится содержимое. В IIS 7,5 пулы приложений работают с уникальным удостоверением пула приложений по умолчанию (в отличие от предыдущих версий IIS, где пулы приложений обычно выполнялись с использованием учетной записи сетевой службы). Удостоверение пула приложений не является реальной учетной записью пользователя и не отображается ни в каких списках пользователей или групп&#x2014;, но и динамически создается при запуске пула приложений. Каждое удостоверение пула приложений добавляется в группу безопасности Local **IIS\_IUSR** в качестве скрытого элемента.

Чтобы предоставить разрешения удостоверению пула приложений для файла или папки, можно использовать два варианта:

- Назначьте разрешения для удостоверения пула приложений напрямую, используя формат <strong>IIS AppPool\</strong ><em>[имя пула приложений]</em>(например, <strong>IIS апппул\демосите</strong>).
- Назначьте разрешения группе **IIS\_IUSR** .

Наиболее распространенным подходом является назначение разрешений локальной группе **IIS\_IUSR** , так как этот подход позволяет изменять пулы приложений без перенастройки разрешений файловой системы. Следующая процедура использует этот подход на основе группы.

> [!NOTE]
> Дополнительные сведения о удостоверениях пула приложений в IIS 7,5 см. в разделе [удостоверения пула приложений](https://go.microsoft.com/?linkid=9805123).

**Настройка разрешений папки для веб-сайта IIS**

1. В проводнике найдите расположение локальной папки.
2. Щелкните правой кнопкой мыши папку и выберите пункт **Свойства**.
3. На вкладке **Security** щелкните **Edit**, а затем **Add**.
4. Щелкните **Расположения**. В диалоговом окне **расположения** выберите локальный сервер и нажмите кнопку **ОК**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image15.png)
5. В диалоговом окне **Выбор пользователей или групп** введите **IIS\_IUSR**, щелкните **Проверить имена**, а затем нажмите кнопку **ОК**.
6. В диалоговом окне <strong>разрешения для</strong><em>[имя папки]</em> Обратите внимание, что новой группе назначено разрешение <strong>Чтение &amp; выполнение</strong>, <strong>список содержимого папки</strong>и разрешения на <strong>Чтение</strong> по умолчанию. Оставьте это без изменений и нажмите кнопку <strong>ОК</strong>.
7. Нажмите кнопку <strong>ОК</strong> , чтобы закрыть диалоговое окно<strong>Свойства</strong> <em>[имя папки]</em>.

В качестве конечной задачи необходимо предоставить соответствующие разрешения пользователю без прав администратора, учетные данные которого будут использоваться для развертывания содержимого. Этот пользователь должен иметь разрешения на удаленное развертывание содержимого на веб-сайте.

**Настройка разрешений веб-сайта IIS для пользователя домена без прав администратора**

1. В диспетчере служб IIS в области **подключения** щелкните правой кнопкой мыши узел веб-сайта (например, **демосите**), наведите указатель на пункт **развернуть**и выберите пункт **Настройка веб-развертывание публикации**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image16.png)
2. В диалоговом окне **Настройка публикации веб-развертывание** в правой части списка **выберите пользователя для предоставления разрешений публикации** нажмите кнопку с многоточием.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image17.png)
3. В диалоговом окне **Разрешить пользователя** введите домен и имя пользователя учетной записи, которую вы хотите использовать для развертывания содержимого, а затем нажмите кнопку **ОК**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image18.png)
4. В диалоговом окне **Настройка публикации веб-развертывание** нажмите кнопку **Настройка**.

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image19.png)

    > [!NOTE]
    > Эта операция выполняет две ключевые функции за один шаг. Во-первых, он предоставляет пользователю разрешение на удаленное изменение веб-сайта с помощью службы Web Management в соответствии с правилами делегирования, которые вы рассматривали в предыдущем разделе. Во-вторых, он предоставляет пользователю полный контроль над папкой исходного кода, что позволяет пользователю добавлять, изменять и задавать разрешения на доступ к содержимому веб-сайта.
5. В диалоговом окне **Настройка публикации веб-развертывание** нажмите кнопку **Закрыть**.

## <a name="configure-firewall-exceptions"></a>Настройка исключений брандмауэра

По умолчанию служба IIS Web Management Service прослушивает TCP-порт 8172. Если на веб-сервере включен брандмауэр Windows, необходимо создать новое правило для входящего трафика, разрешающее трафик TCP через порт 8172 (весь исходящий трафик по умолчанию разрешен в брандмауэре Windows). При использовании брандмауэра стороннего производителя необходимо создать правила, разрешающие трафик.

| Направление | Из порта | В порт | Тип порта |
| --- | --- | --- | --- |
| Входящий трафик | Любой | 8172 | TCP |
| Исходящие | 8172 | Любой | TCP |

Дополнительные сведения о настройке правил в брандмауэре Windows см. в разделе [Настройка правил брандмауэра](https://technet.microsoft.com/library/dd448559(WS.10).aspx). Для сторонних брандмауэров обратитесь к документации по продукту.

## <a name="conclusion"></a>Заключение

Теперь веб-сервер должен быть готов к приему удаленных развертываний обработчика веб-развертывание с помощью службы веб-управления. Перед развертыванием веб-приложения на сервере может потребоваться проверить следующие ключевые моменты:

- Включена ли обычная проверка подлинности на уровне сервера в службах IIS?
- Включены ли удаленные подключения к службе веб-управления?
- Вы начали работу со службой веб-управления?
- Существуют ли правила делегирования службы управления?
- Имеет ли удостоверение пула приложений доступ на чтение к исходной папке веб-сайта?
- Имеют ли учетная запись пользователя без прав администратора разрешения уровня сайта в службах IIS?
- Разрешает ли брандмауэр входящие подключения к серверу через TCP-порт 8172?

## <a name="further-reading"></a>Дополнительные материалы

Инструкции по настройке файлов проекта пользовательских Microsoft Build Engine (MSBuild) для развертывания веб-пакетов в обработчике веб-развертывание см. в разделе [Настройка свойств развертывания для целевой среды](configuring-deployment-properties-for-a-target-environment.md).

> [!div class="step-by-step"]
> [Назад](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)
> [Вперед](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)
