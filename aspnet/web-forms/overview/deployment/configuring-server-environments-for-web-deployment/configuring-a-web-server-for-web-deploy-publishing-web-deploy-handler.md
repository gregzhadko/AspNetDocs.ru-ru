---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
title: Настройка веб-сервера для веб-публикации развертывания (обработчик веб-развертывания) | Документация Майкрософт
author: jrjlee
description: В этом разделе описываются способы настройки веб-сервер Internet Information Services (IIS), для поддержки веб-публикации и развертывания с помощью Хан развертывание IIS Web...
ms.author: riande
ms.date: 01/29/2017
ms.assetid: 90ebf911-1c46-4470-b876-1335bd0f590f
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
msc.type: authoredcontent
ms.openlocfilehash: cf18a8860d34daa23f61e3dde13c2c79c6c0d4a5
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57048121"
---
# <a name="configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler"></a><span data-ttu-id="47964-103">Настройка веб-сервера для публикации веб-развертывания (обработчик веб-развертывания)</span><span class="sxs-lookup"><span data-stu-id="47964-103">Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)</span></span>

[<span data-ttu-id="47964-104">Загрузить PDF-файл</span><span class="sxs-lookup"><span data-stu-id="47964-104">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="47964-105">В этом разделе описываются способы настройки веб-сервер Internet Information Services (IIS), для поддержки веб-публикации и развертывания с помощью IIS веб-развертывание обработчик.</span><span class="sxs-lookup"><span data-stu-id="47964-105">This topic describes how to configure an Internet Information Services (IIS) web server to support web publishing and deployment using the IIS Web Deploy Handler.</span></span>
> 
> <span data-ttu-id="47964-106">При работе с Web Deploy 2.0 или более поздней версии, существует три основных подхода, которые можно использовать для получения приложений или сайтов на веб-сервер.</span><span class="sxs-lookup"><span data-stu-id="47964-106">When you work with Web Deploy 2.0 or later, there are three main approaches you can use to get your applications or sites onto a web server.</span></span> <span data-ttu-id="47964-107">Можно выполнить следующие действия: </span><span class="sxs-lookup"><span data-stu-id="47964-107">You can:</span></span>
> 
> - <span data-ttu-id="47964-108">Используйте *веб-развертывания службы удаленного агента*.</span><span class="sxs-lookup"><span data-stu-id="47964-108">Use the *Web Deploy Remote Agent Service*.</span></span> <span data-ttu-id="47964-109">Этот подход требует сократить количество конфигураций веб-сервера, но необходимо предоставить учетные данные администратора локального сервера для развертывания ничего на сервер.</span><span class="sxs-lookup"><span data-stu-id="47964-109">This approach requires less configuration of the web server, but you need to provide the credentials of a local server administrator in order to deploy anything to the server.</span></span>
> - <span data-ttu-id="47964-110">Используйте *обработчик веб-развертывания*.</span><span class="sxs-lookup"><span data-stu-id="47964-110">Use the *Web Deploy Handler*.</span></span> <span data-ttu-id="47964-111">Этот подход гораздо более сложна и требует больше усилий начальной для настройки веб-сервера.</span><span class="sxs-lookup"><span data-stu-id="47964-111">This approach is a lot more complex and requires more initial effort to set up the web server.</span></span> <span data-ttu-id="47964-112">Тем не менее при использовании этого подхода, можно настроить службы IIS, чтобы разрешить пользователям без прав администратора для выполнения развертывания.</span><span class="sxs-lookup"><span data-stu-id="47964-112">However, when you use this approach, you can configure IIS to allow non-administrator users to perform the deployment.</span></span> <span data-ttu-id="47964-113">Веб-развертывание обработчик доступна только в службах IIS 7 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="47964-113">The Web Deploy Handler is only available in IIS version 7 or later.</span></span>
> - <span data-ttu-id="47964-114">Используйте *автономное развертывание*.</span><span class="sxs-lookup"><span data-stu-id="47964-114">Use *offline deployment*.</span></span> <span data-ttu-id="47964-115">Этот подход требует минимальной конфигурации веб-сервера, но администратор сервера необходимо вручную скопировать веб-пакета на сервер и импортировать его в диспетчере IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-115">This approach requires the least configuration of the web server, but a server administrator must manually copy the web package onto the server and import it through IIS Manager.</span></span>
> 
> <span data-ttu-id="47964-116">Дополнительные сведения о ключевых функций, преимущества и недостатки этих подходов см. в разделе [Выбор оптимального подхода для веб-развертывания справа](choosing-the-right-approach-to-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="47964-116">For more information on the key features, advantages, and disadvantages of these approaches, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>


<span data-ttu-id="47964-117">Да, если вы хотите разрешить пользователям без прав администратора для развертывания содержимого для определенных веб-сайтов IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-117">Yes, if you want to allow non-administrator users to deploy content to specific IIS websites.</span></span> <span data-ttu-id="47964-118">Этот подход часто является предпочтительным в таких типов сценариев:</span><span class="sxs-lookup"><span data-stu-id="47964-118">This approach is often desirable in these types of scenarios:</span></span>

- <span data-ttu-id="47964-119">Промежуточной или рабочей среде, где учетной записи пользователя или службы, которое активирует удаленного развертывания вряд ли доступ к учетным данным администратора сервера.</span><span class="sxs-lookup"><span data-stu-id="47964-119">Staging or production environments, where the person or service account that triggers the remote deployment is unlikely to have access to the credentials of a server administrator.</span></span>
- <span data-ttu-id="47964-120">Размещенных средах, где вы хотите предоставить удаленным пользователям возможность обновить свои веб-сайты без предоставления им полного доступа веб-серверы (или доступ к вред веб-сайтов).</span><span class="sxs-lookup"><span data-stu-id="47964-120">Hosted environments, where you want to give remote users the ability to update their websites without giving them full control of your web servers (or access to anyone else's websites).</span></span>

<span data-ttu-id="47964-121">В сценариях разработки или тестирования, или в небольших организациях, развертывание содержимого, используя учетные данные администратора сервера меньше часто Соревнующиеся за ресурсы.</span><span class="sxs-lookup"><span data-stu-id="47964-121">In development or test scenarios, or in smaller organizations, deploying content using server administrator credentials is often less contentious.</span></span> <span data-ttu-id="47964-122">В этих сценариях Настройка веб-серверов для поддержки развертывания с помощью [службы веб-развертывание удаленного агента](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md) предлагает более простой подход.</span><span class="sxs-lookup"><span data-stu-id="47964-122">In these scenarios, configuring your web servers to support deployment using the [Web Deploy Remote Agent Service](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md) offers a more straightforward approach.</span></span>

## <a name="task-overview"></a><span data-ttu-id="47964-123">Общие сведения о задачах</span><span class="sxs-lookup"><span data-stu-id="47964-123">Task Overview</span></span>

<span data-ttu-id="47964-124">Чтобы настроить веб-сервер для принятия и развертывания веб-пакетов с удаленного компьютера с помощью веб-развертывание обработчик подход, необходимо:</span><span class="sxs-lookup"><span data-stu-id="47964-124">To configure the web server to accept and deploy web packages from a remote computer using the Web Deploy Handler approach, you'll need to:</span></span>

- <span data-ttu-id="47964-125">Создайте или выберите учетную запись пользователя домена («пользователь без прав администратора»), учетные данные которого будут использоваться для выполнения развертываний.</span><span class="sxs-lookup"><span data-stu-id="47964-125">Create, or choose, a domain user account (the "non-administrator user") whose credentials you'll use to perform deployments.</span></span>
- <span data-ttu-id="47964-126">Установите службы IIS 7.5, включая веб-службы управления и модуль обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="47964-126">Install IIS 7.5, including the Web Management Service and the Basic Authentication module.</span></span>
- <span data-ttu-id="47964-127">Установите веб-развертывания 2.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="47964-127">Install Web Deploy 2.1 or later.</span></span>
- <span data-ttu-id="47964-128">Настройка управления веб-службы для удаленных подключений и запустите службу.</span><span class="sxs-lookup"><span data-stu-id="47964-128">Configure the Web Management Service to allow remote connections, and start the service.</span></span>
- <span data-ttu-id="47964-129">Создание веб-сайта IIS для размещения развернутого содержимого.</span><span class="sxs-lookup"><span data-stu-id="47964-129">Create an IIS website to host the deployed content.</span></span>
- <span data-ttu-id="47964-130">Предоставьте разрешения пользователя без прав администратора на веб-сайте в диспетчере служб IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-130">Grant your non-administrator user permissions on your website in IIS Manager.</span></span>
- <span data-ttu-id="47964-131">Убедитесь, что веб-службы управления, правила делегирования разрешить службу, чтобы добавить и изменить содержимое веб-сайта, с помощью учетной записи пользователя без прав администратора.</span><span class="sxs-lookup"><span data-stu-id="47964-131">Ensure that the Web Management Service delegation rules permit the service to add and change website content using your non-administrator user account.</span></span>
- <span data-ttu-id="47964-132">Настройте все брандмауэры, чтобы разрешить входящие подключения через порт 8172.</span><span class="sxs-lookup"><span data-stu-id="47964-132">Configure any firewalls to allow incoming connections on port 8172.</span></span>

<span data-ttu-id="47964-133">Чтобы разместить в примере решения ContactManager в частности, также необходимо:</span><span class="sxs-lookup"><span data-stu-id="47964-133">To host the ContactManager sample solution specifically, you'll also need to:</span></span>

- <span data-ttu-id="47964-134">Установка .NET Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="47964-134">Install the .NET Framework 4.0.</span></span>
- <span data-ttu-id="47964-135">Установка ASP.NET MVC 3.</span><span class="sxs-lookup"><span data-stu-id="47964-135">Install ASP.NET MVC 3.</span></span>

<span data-ttu-id="47964-136">В этом разделе показано, как выполнить каждую из этих процедур.</span><span class="sxs-lookup"><span data-stu-id="47964-136">This topic will show you how to perform each of these procedures.</span></span> <span data-ttu-id="47964-137">Задачи и пошаговые руководства в этом разделе предполагается, что вы начинаете с построением чистого сервера под управлением Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="47964-137">The tasks and walkthroughs in this topic assume that you're starting with a clean server build running Windows Server 2016.</span></span> <span data-ttu-id="47964-138">Прежде чем продолжить, убедитесь, что:</span><span class="sxs-lookup"><span data-stu-id="47964-138">Before you continue, ensure that:</span></span>

- <span data-ttu-id="47964-139">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="47964-139">Windows Server 2016</span></span>
- <span data-ttu-id="47964-140">Сервер присоединен к домену.</span><span class="sxs-lookup"><span data-stu-id="47964-140">The server is domain-joined.</span></span>
- <span data-ttu-id="47964-141">Сервер имеет статический IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="47964-141">The server has a static IP address.</span></span>

> [!NOTE]
> <span data-ttu-id="47964-142">Дополнительные сведения о присоединении к домену компьютеров, см. в разделе [присоединение к домену и вход](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="47964-142">For more information on joining computers to a domain, see [Joining Computers to the Domain and Logging On](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx).</span></span> <span data-ttu-id="47964-143">Дополнительные сведения о настройке статического IP-адресов, см. в разделе [настроить статический IP-адрес](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="47964-143">For more information on configuring static IP addresses, see [Configure a Static IP Address](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx).</span></span>


## <a name="install-products-and-components"></a><span data-ttu-id="47964-144">Установить продукты и компоненты</span><span class="sxs-lookup"><span data-stu-id="47964-144">Install Products and Components</span></span>

<span data-ttu-id="47964-145">В этом разделе поможет установке необходимых продуктов и компонентов на веб-сервере.</span><span class="sxs-lookup"><span data-stu-id="47964-145">This section will guide you through installing the required products and components on the web server.</span></span> <span data-ttu-id="47964-146">Перед началом работы рекомендуется выполнить обновление Windows, чтобы убедиться, что ваш сервер находится полностью в актуальном состоянии.</span><span class="sxs-lookup"><span data-stu-id="47964-146">Before you begin, a good practice is to run Windows Update to ensure that your server is fully up to date.</span></span>

<span data-ttu-id="47964-147">В этом случае необходимо установить следующее:</span><span class="sxs-lookup"><span data-stu-id="47964-147">In this case, you need to install these things:</span></span>

- <span data-ttu-id="47964-148">**Рекомендуемая конфигурация IIS 7**.</span><span class="sxs-lookup"><span data-stu-id="47964-148">**IIS 7 Recommended Configuration**.</span></span> <span data-ttu-id="47964-149">Это позволяет **веб-сервер (IIS)** роли веб-сервера и устанавливает набор модулей IIS и компоненты, необходимые для размещения приложений ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="47964-149">This enables the **Web Server (IIS)** role on your web server and installs the set of IIS modules and components that you need in order to host an ASP.NET application.</span></span>
- <span data-ttu-id="47964-150">**IIS: Служба управления**.</span><span class="sxs-lookup"><span data-stu-id="47964-150">**IIS: Management Service**.</span></span> <span data-ttu-id="47964-151">При этом будут установлены службы веб-управления (WMSvc) в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-151">This installs the Web Management Service (WMSvc) in IIS.</span></span> <span data-ttu-id="47964-152">Эта служба позволяет удаленно управлять веб-сайтов IIS и предоставляет конечную точку веб-обработчик развертывания на клиентах.</span><span class="sxs-lookup"><span data-stu-id="47964-152">This service enables remote management of IIS websites and exposes the Web Deploy Handler endpoint to clients.</span></span>
- <span data-ttu-id="47964-153">**IIS: Обычная проверка подлинности**.</span><span class="sxs-lookup"><span data-stu-id="47964-153">**IIS: Basic Authentication**.</span></span> <span data-ttu-id="47964-154">В результате будет установлен модуль обычной проверки подлинности IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-154">This installs the IIS Basic Authentication module.</span></span> <span data-ttu-id="47964-155">Этот веб-службы управления (WMSvc) позволяет проверить учетные данные, указанные вами.</span><span class="sxs-lookup"><span data-stu-id="47964-155">This lets the Web Management Service (WMSvc) authenticate the credentials you provide.</span></span>
- <span data-ttu-id="47964-156">**Средство веб-развертывания 2.1 или более поздняя**.</span><span class="sxs-lookup"><span data-stu-id="47964-156">**Web Deployment Tool 2.1 or later**.</span></span> <span data-ttu-id="47964-157">При этом устанавливаются на сервере веб-развертывания (и его базового исполняемого файла, MSDeploy.exe).</span><span class="sxs-lookup"><span data-stu-id="47964-157">This installs Web Deploy (and its underlying executable, MSDeploy.exe) on your server.</span></span> <span data-ttu-id="47964-158">В рамках этого процесса он устанавливает веб-развертывание обработчик и интегрирует его с веб-службы управления.</span><span class="sxs-lookup"><span data-stu-id="47964-158">As part of this process, it installs the Web Deploy Handler and integrates it with the Web Management Service.</span></span>
- <span data-ttu-id="47964-159">**.NET framework 4.0**.</span><span class="sxs-lookup"><span data-stu-id="47964-159">**.NET Framework 4.0**.</span></span> <span data-ttu-id="47964-160">Это необходимо для запуска приложений, которые были созданы в этой версии платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="47964-160">This is required to run applications that were built on this version of the .NET Framework.</span></span>
- <span data-ttu-id="47964-161">**ASP.NET MVC 3**.</span><span class="sxs-lookup"><span data-stu-id="47964-161">**ASP.NET MVC 3**.</span></span> <span data-ttu-id="47964-162">Это устанавливает сборки, необходимые для запуска приложения MVC 3.</span><span class="sxs-lookup"><span data-stu-id="47964-162">This installs the assemblies you need to run MVC 3 applications.</span></span>

> [!NOTE]
> <span data-ttu-id="47964-163">В этом пошаговом руководстве описывается использование установщика веб-платформы для установки и настройки различных компонентов.</span><span class="sxs-lookup"><span data-stu-id="47964-163">This walkthrough describes the use of the Web Platform Installer to install and configure various components.</span></span> <span data-ttu-id="47964-164">Несмотря на то, что не нужно использовать установщик веб-платформы, это упрощает процесс установки автоматически обнаруживая зависимостей и обеспечение всегда получать последние версии продукта.</span><span class="sxs-lookup"><span data-stu-id="47964-164">Although you don't have to use the Web Platform Installer, it simplifies the installation process by automatically detecting dependencies and ensuring that you always get the latest product versions.</span></span> <span data-ttu-id="47964-165">Дополнительные сведения см. в разделе [Microsoft Web Platform Installer](https://go.microsoft.com/?linkid=9805118).</span><span class="sxs-lookup"><span data-stu-id="47964-165">For more information, see [Microsoft Web Platform Installer](https://go.microsoft.com/?linkid=9805118).</span></span>


<span data-ttu-id="47964-166">**Чтобы установить необходимые продукты и компоненты**</span><span class="sxs-lookup"><span data-stu-id="47964-166">**To install the required products and components**</span></span>

1. <span data-ttu-id="47964-167">Скачайте и установите [установщика веб-платформы](https://go.microsoft.com/?linkid=9805118).</span><span class="sxs-lookup"><span data-stu-id="47964-167">Download and install the [Web Platform Installer](https://go.microsoft.com/?linkid=9805118).</span></span>
2. <span data-ttu-id="47964-168">По завершении установки автоматически запустит установщик веб-платформы.</span><span class="sxs-lookup"><span data-stu-id="47964-168">When installation is complete, the Web Platform Installer will launch automatically.</span></span>

    > [!NOTE]
    > <span data-ttu-id="47964-169">Теперь можно запустить установщик веб-платформы в любое время с **запустить** меню.</span><span class="sxs-lookup"><span data-stu-id="47964-169">You can now launch the Web Platform Installer at any time from the **Start** menu.</span></span> <span data-ttu-id="47964-170">Для этого на **запустить** меню, щелкните **все программы**, а затем нажмите кнопку **Microsoft Web Platform Installer**.</span><span class="sxs-lookup"><span data-stu-id="47964-170">To do this, on the **Start** menu, click **All Programs**, and then click **Microsoft Web Platform Installer**.</span></span>
3. <span data-ttu-id="47964-171">В верхней части **установщика веб-платформы** окно, нажмите кнопку **продуктов**.</span><span class="sxs-lookup"><span data-stu-id="47964-171">At the top of the **Web Platform Installer** window, click **Products**.</span></span>
4. <span data-ttu-id="47964-172">В левой части окна, в области навигации щелкните **платформ**.</span><span class="sxs-lookup"><span data-stu-id="47964-172">On the left side of the window, in the navigation pane, click **Frameworks**.</span></span>
5. <span data-ttu-id="47964-173">В **Microsoft .NET Framework 4** строк, если .NET Framework еще не установлен, нажмите кнопку **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-173">In the **Microsoft .NET Framework 4** row, if the .NET Framework is not already installed, click **Add**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="47964-174">Вы возможно уже установлены .NET Framework 4.0 через Центр обновления Windows.</span><span class="sxs-lookup"><span data-stu-id="47964-174">You may have already installed the .NET Framework 4.0 through Windows Update.</span></span> <span data-ttu-id="47964-175">Если продукт или компонент уже установлен, установщик веб-платформы сообщит об этом, заменив **добавить** кнопка с текстом **установленные**.</span><span class="sxs-lookup"><span data-stu-id="47964-175">If a product or component is already installed, the Web Platform Installer will indicate this by replacing the **Add** button with the text **Installed**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image1.png)
6. <span data-ttu-id="47964-176">В **ASP.NET MVC 3 (Visual Studio 2010)** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-176">In the **ASP.NET MVC 3 (Visual Studio 2010)** row, click **Add**.</span></span>
7. <span data-ttu-id="47964-177">В области навигации щелкните **сервера**.</span><span class="sxs-lookup"><span data-stu-id="47964-177">In the navigation pane, click **Server**.</span></span>
8. <span data-ttu-id="47964-178">В **рекомендуемой конфигурации IIS 7** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-178">In the **IIS 7 Recommended Configuration** row, click **Add**.</span></span>
9. <span data-ttu-id="47964-179">В **2.1 средства развертывания Web** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-179">In the **Web Deployment Tool 2.1** row, click **Add**.</span></span>
10. <span data-ttu-id="47964-180">В **IIS: Обычная проверка подлинности** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-180">In the **IIS: Basic Authentication** row, click **Add**.</span></span>
11. <span data-ttu-id="47964-181">В **IIS: Служба управления** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-181">In the **IIS: Management Service** row, click **Add**.</span></span>
12. <span data-ttu-id="47964-182">Нажмите кнопку **Установить**.</span><span class="sxs-lookup"><span data-stu-id="47964-182">Click **Install**.</span></span> <span data-ttu-id="47964-183">Установщик веб-платформы Отображение списка продуктов&#x2014;совместно с любым связанные зависимости&#x2014;должен быть установлен и будет предложено принять условия лицензионного соглашения.</span><span class="sxs-lookup"><span data-stu-id="47964-183">The Web Platform Installer will show you a list of products&#x2014;together with any associated dependencies&#x2014;to be installed and will prompt you to accept the license terms.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image2.png)
13. <span data-ttu-id="47964-184">Ознакомьтесь с условиями лицензии, а если вы согласны с условиями, нажмите кнопку **я принимаю**.</span><span class="sxs-lookup"><span data-stu-id="47964-184">Review the license terms, and if you consent to the terms, click **I Accept**.</span></span>
14. <span data-ttu-id="47964-185">После завершения установки нажмите кнопку **Готово**, а затем закройте **установщика веб-платформы** окна.</span><span class="sxs-lookup"><span data-stu-id="47964-185">When the installation is complete, click **Finish**, and then close the **Web Platform Installer** window.</span></span>

<span data-ttu-id="47964-186">Если вы установили .NET Framework 4.0 до установки служб IIS, необходимо запустить [ASP.NET IIS Registration Tool](https://msdn.microsoft.com/library/k6h9cz8h(v=VS.100).aspx) (aspnet\_regiis.exe) для регистрации последнюю версию ASP.NET в IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-186">If you installed the .NET Framework 4.0 before you installed IIS, you'll need to run the [ASP.NET IIS Registration Tool](https://msdn.microsoft.com/library/k6h9cz8h(v=VS.100).aspx) (aspnet\_regiis.exe) to register the latest version of ASP.NET with IIS.</span></span> <span data-ttu-id="47964-187">Если этого не сделать, обнаружится, что IIS будет обслуживать статическое содержимое (например, HTML-файлы) без проблем, но он будет возвращать **404.0 Ошибка HTTP — не найден** при попытке перейти к содержимому ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="47964-187">If you don't do this, you'll find that IIS will serve static content (like HTML files) without any problems, but it will return **HTTP Error 404.0 – Not Found** when you attempt to browse to ASP.NET content.</span></span> <span data-ttu-id="47964-188">Можно использовать следующую процедуру, чтобы зарегистрировать ASP.NET 4.0.</span><span class="sxs-lookup"><span data-stu-id="47964-188">You can use the next procedure to ensure that ASP.NET 4.0 is registered.</span></span>

<span data-ttu-id="47964-189">**Чтобы зарегистрировать ASP.NET 4.0 в IIS**</span><span class="sxs-lookup"><span data-stu-id="47964-189">**To register ASP.NET 4.0 with IIS**</span></span>

1. <span data-ttu-id="47964-190">Нажмите кнопку **запустить**, а затем введите **командной**.</span><span class="sxs-lookup"><span data-stu-id="47964-190">Click **Start**, and then type **Command Prompt**.</span></span>
2. <span data-ttu-id="47964-191">В результатах поиска, щелкните правой кнопкой мыши **командной**, а затем нажмите кнопку **Запуск от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="47964-191">In the search results, right-click **Command Prompt**, and then click **Run as administrator**.</span></span>
3. <span data-ttu-id="47964-192">В окне командной строки перейдите в раздел **%WINDIR%\Microsoft.NET\Framework\v4.0.30319** каталога.</span><span class="sxs-lookup"><span data-stu-id="47964-192">In the Command Prompt window, navigate to the **%WINDIR%\Microsoft.NET\Framework\v4.0.30319** directory.</span></span>
4. <span data-ttu-id="47964-193">Введите следующую команду и нажмите клавишу ВВОД:</span><span class="sxs-lookup"><span data-stu-id="47964-193">Type this command, and then press Enter:</span></span>

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample1.cmd)]
5. <span data-ttu-id="47964-194">Если вы планируете размещать 64-разрядных веб-приложения в любой момент, то также зарегистрировать 64-разрядной версии ASP.NET в IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-194">If you plan to host 64-bit web applications at any point, you should also register the 64-bit version of ASP.NET with IIS.</span></span> <span data-ttu-id="47964-195">Чтобы сделать это, в окне командной строки, перейдите к **%WINDIR%\Microsoft.NET\Framework64\v4.0.30319** каталога.</span><span class="sxs-lookup"><span data-stu-id="47964-195">To do this, in the Command Prompt window, navigate to the **%WINDIR%\Microsoft.NET\Framework64\v4.0.30319** directory.</span></span>
6. <span data-ttu-id="47964-196">Введите следующую команду и нажмите клавишу ВВОД:</span><span class="sxs-lookup"><span data-stu-id="47964-196">Type this command, and then press Enter:</span></span>

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample2.cmd)]

<span data-ttu-id="47964-197">В качестве хорошей практикой используйте Windows Update еще раз на этом этапе для загрузки и установки доступных обновлений для новых продуктов и компонентов, которые вы установили.</span><span class="sxs-lookup"><span data-stu-id="47964-197">As a good practice, use Windows Update again at this point to download and install any available updates for the new products and components you've installed.</span></span>

## <a name="configure-the-web-management-service"></a><span data-ttu-id="47964-198">Настройка веб-службы управления</span><span class="sxs-lookup"><span data-stu-id="47964-198">Configure the Web Management Service</span></span>

<span data-ttu-id="47964-199">Теперь, когда вы установили все необходимые компоненты, следующим шагом является настройка управления веб-службы в IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-199">Now that you've installed everything you need, the next step is to configure the Web Management Service in IIS.</span></span> <span data-ttu-id="47964-200">На высоком уровне необходимо выполнить следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="47964-200">At a high level, you'll need to complete these tasks:</span></span>

- <span data-ttu-id="47964-201">Включите обычную проверку подлинности на уровне сервера.</span><span class="sxs-lookup"><span data-stu-id="47964-201">Enable basic authentication at the server level.</span></span>
- <span data-ttu-id="47964-202">Настройка управления веб-службы для удаленных соединений.</span><span class="sxs-lookup"><span data-stu-id="47964-202">Configure the Web Management Service to accept remote connections.</span></span>
- <span data-ttu-id="47964-203">Запуск службы веб-управления.</span><span class="sxs-lookup"><span data-stu-id="47964-203">Start the Web Management Service.</span></span>
- <span data-ttu-id="47964-204">Проверьте необходимые правила делегирования управления веб-службы на месте.</span><span class="sxs-lookup"><span data-stu-id="47964-204">Check that the required Web Management Service delegation rules are in place.</span></span>

<span data-ttu-id="47964-205">**Чтобы настроить веб-службы управления**</span><span class="sxs-lookup"><span data-stu-id="47964-205">**To configure the Web Management Service**</span></span>

1. <span data-ttu-id="47964-206">На **запустить** последовательно выберите пункты **Администрирование**, а затем нажмите кнопку **Internet Information Services (IIS) Manager**.</span><span class="sxs-lookup"><span data-stu-id="47964-206">On the **Start** menu, point to **Administrative Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>
2. <span data-ttu-id="47964-207">В диспетчере служб IIS в **подключений** щелкните правой кнопкой мыши узел сервера (например, **STAGEWEB1**).</span><span class="sxs-lookup"><span data-stu-id="47964-207">In IIS Manager, in the **Connections** pane, click the server node (for example, **STAGEWEB1**).</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image3.png)
3. <span data-ttu-id="47964-208">В центральной области в разделе **IIS**, дважды щелкните **проверки подлинности**.</span><span class="sxs-lookup"><span data-stu-id="47964-208">In the center pane, under **IIS**, double-click **Authentication**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image20.png)
4. <span data-ttu-id="47964-209">Щелкните правой кнопкой мыши **обычной проверки подлинности**, а затем нажмите кнопку **включить**.</span><span class="sxs-lookup"><span data-stu-id="47964-209">Right-click **Basic Authentication**, and then click **Enable**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image5.png)
5. <span data-ttu-id="47964-210">В **подключений** щелкните правой кнопкой мыши узел сервера еще раз, чтобы вернуться к настройкам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="47964-210">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>
6. <span data-ttu-id="47964-211">В центральной области в разделе **управления**, дважды щелкните **службы управления**.</span><span class="sxs-lookup"><span data-stu-id="47964-211">In the center pane, under **Management**, double-click **Management Service**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image6.png)
7. <span data-ttu-id="47964-212">В центральной области выберите **Включение удаленных подключений**.</span><span class="sxs-lookup"><span data-stu-id="47964-212">In the center pane, select **Enable remote connections**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="47964-213">Если веб-служба управления уже выполняется, необходимо сначала остановить его.</span><span class="sxs-lookup"><span data-stu-id="47964-213">If the Web Management Service is already running, you'll need to stop it first.</span></span>
8. <span data-ttu-id="47964-214">В **действия** панели щелкните **запустить** для запуска веб-службы управления.</span><span class="sxs-lookup"><span data-stu-id="47964-214">In the **Actions** pane, click **Start** to start the Web Management Service.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image7.png)
9. <span data-ttu-id="47964-215">Если будет предложено сохранить параметры, нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="47964-215">If you're prompted to save your settings, click **Yes**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="47964-216">Можно также настроить автоматический запуск службы.</span><span class="sxs-lookup"><span data-stu-id="47964-216">You may also want to configure the service to start automatically.</span></span> <span data-ttu-id="47964-217">Чтобы сделать это, откройте консоль служб щелкните правой кнопкой мыши **веб-служба управления**, а затем нажмите кнопку **свойства**.</span><span class="sxs-lookup"><span data-stu-id="47964-217">To do this, open the Services console, right-click **Web Management Service**, and then click **Properties**.</span></span> <span data-ttu-id="47964-218">В **тип запуска** раскрывающемся списке выберите **автоматического**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-218">In the **Startup type** dropdown list, select **Automatic**, and then click **OK**.</span></span>
10. <span data-ttu-id="47964-219">В **подключений** щелкните правой кнопкой мыши узел сервера еще раз, чтобы вернуться к настройкам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="47964-219">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>
11. <span data-ttu-id="47964-220">В центральной области в разделе **управления**, дважды щелкните **делегирования службы управления**.</span><span class="sxs-lookup"><span data-stu-id="47964-220">In the center pane, under **Management**, double-click **Management Service Delegation**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image8.png)
12. <span data-ttu-id="47964-221">Убедитесь, что в центральной области содержит набор правил.</span><span class="sxs-lookup"><span data-stu-id="47964-221">Verify that the center pane contains a set of rules.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image9.png)

    <span data-ttu-id="47964-222">Эти правила позволяют авторизованных пользователей веб-службы управления для использования различных поставщиков веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="47964-222">These rules allow authorized Web Management Service users to use various Web Deploy providers.</span></span> <span data-ttu-id="47964-223">Например, чтобы развернуть веб-приложений и содержимого с IIS через веб-развертывание обработчик, должен существовать правило делегирования, которое разрешает все прошедшие проверку пользователи веб-службы управления для использования **contentPath** и **сценарий iisApp**  поставщиков (последнее правило, которое показано на снимке экрана).</span><span class="sxs-lookup"><span data-stu-id="47964-223">For example, to deploy web applications and content to IIS through the Web Deploy Handler, there must be a delegation rule that allows all authenticated Web Management Service users to use the **contentPath** and **iisApp** providers (the last rule that you can see in the screenshot).</span></span>

    <span data-ttu-id="47964-224">Если вы установили продукты и компоненты в порядке, описанных в этом разделе, последнюю версию веб-развертывания автоматически добавит все правила делегирования требуется веб-службе управления.</span><span class="sxs-lookup"><span data-stu-id="47964-224">If you installed products and components in the order described in this topic, the latest version of Web Deploy should automatically add all the required delegation rules to the Web Management Service.</span></span> <span data-ttu-id="47964-225">Если на странице делегирования службы управления не содержит какие-либо правила, нужно будет создать их самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="47964-225">If the Management Service Delegation page does not show any rules, you'll need to create them yourself.</span></span> <span data-ttu-id="47964-226">Инструкции о том, как это сделать, см. в разделе [Настройка обработчика веб-развертывания](https://go.microsoft.com/?linkid=9805124).</span><span class="sxs-lookup"><span data-stu-id="47964-226">For instructions on how to do this, see [Configure the Web Deployment Handler](https://go.microsoft.com/?linkid=9805124).</span></span>
13. <span data-ttu-id="47964-227">В **подключений** щелкните правой кнопкой мыши узел сервера еще раз, чтобы вернуться к настройкам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="47964-227">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>

## <a name="create-and-configure-an-iis-website"></a><span data-ttu-id="47964-228">Создание и настройка веб-сайта IIS</span><span class="sxs-lookup"><span data-stu-id="47964-228">Create and Configure an IIS Website</span></span>

<span data-ttu-id="47964-229">Перед развертыванием веб-содержимого на сервер, необходимо создать и настроить веб-сайта IIS для размещения содержимого.</span><span class="sxs-lookup"><span data-stu-id="47964-229">Before you can deploy web content to your server, you need to create and configure an IIS website to host the content.</span></span> <span data-ttu-id="47964-230">Веб-развертывание можно развернуть веб-пакетов только для существующих веб-сайт IIS; не удается создать веб-сайт для вас.</span><span class="sxs-lookup"><span data-stu-id="47964-230">Web Deploy can only deploy web packages to an existing IIS website; it can't create the website for you.</span></span> <span data-ttu-id="47964-231">Вам также нужно немного дополнительной настройки, чтобы разрешить учетной записи без прав администратора для удаленного развертывания содержимого.</span><span class="sxs-lookup"><span data-stu-id="47964-231">You also need to do a little extra configuration to allow your non-administrator account to deploy content remotely.</span></span> <span data-ttu-id="47964-232">На высоком уровне необходимо выполнить следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="47964-232">At a high level, you'll need to complete these tasks:</span></span>

- <span data-ttu-id="47964-233">Создайте папку в файловой системе для размещения содержимого.</span><span class="sxs-lookup"><span data-stu-id="47964-233">Create a folder on the file system to host your content.</span></span>
- <span data-ttu-id="47964-234">Создание веб-сайта IIS для обслуживания содержимого и свяжите его с локальной папкой.</span><span class="sxs-lookup"><span data-stu-id="47964-234">Create an IIS website to serve the content, and associate it with the local folder.</span></span>
- <span data-ttu-id="47964-235">Предоставление разрешения на чтение для удостоверения пула приложений в локальной папке.</span><span class="sxs-lookup"><span data-stu-id="47964-235">Grant read permissions to the application pool identity on the local folder.</span></span>
- <span data-ttu-id="47964-236">Предоставьте необходимые разрешения учетной записи домена, который будет развертывать веб-приложения IIS.</span><span class="sxs-lookup"><span data-stu-id="47964-236">Grant the necessary IIS permissions to the domain account that will deploy your web application.</span></span>

<span data-ttu-id="47964-237">Хотя ничто не мешает развертывания содержимого на веб-сайт по умолчанию в службах IIS, этот подход не рекомендуется для всего, кроме сценариев тестирования или демонстрации.</span><span class="sxs-lookup"><span data-stu-id="47964-237">Although there's nothing stopping you from deploying content to the default website in IIS, this approach is not recommended for anything other than test or demonstration scenarios.</span></span> <span data-ttu-id="47964-238">Для имитации рабочей среде, следует создать новый веб-сайт IIS с параметрами, которые относятся к требованиям приложения.</span><span class="sxs-lookup"><span data-stu-id="47964-238">To simulate a production environment, you should create a new IIS website with settings that are specific to the requirements of your application.</span></span>

<span data-ttu-id="47964-239">**Создание веб-сайта IIS**</span><span class="sxs-lookup"><span data-stu-id="47964-239">**To create an IIS website**</span></span>

1. <span data-ttu-id="47964-240">В локальной файловой системе, создайте папку для хранения содержимого (например, **C:\DemoSite**).</span><span class="sxs-lookup"><span data-stu-id="47964-240">On the local file system, create a folder to store your content (for example, **C:\DemoSite**).</span></span>
2. <span data-ttu-id="47964-241">На **запустить** последовательно выберите пункты **Администрирование**, а затем нажмите кнопку **Internet Information Services (IIS) Manager**.</span><span class="sxs-lookup"><span data-stu-id="47964-241">On the **Start** menu, point to **Administrative Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>
3. <span data-ttu-id="47964-242">В диспетчере служб IIS в **подключений** панели раскройте узел сервера (например, **STAGEWEB1**).</span><span class="sxs-lookup"><span data-stu-id="47964-242">In IIS Manager, in the **Connections** pane, expand the server node (for example, **STAGEWEB1**).</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image10.png)
4. <span data-ttu-id="47964-243">Щелкните правой кнопкой мыши **сайты** узел, а затем щелкните **добавить веб-сайт**.</span><span class="sxs-lookup"><span data-stu-id="47964-243">Right-click the **Sites** node, and then click **Add Web Site**.</span></span>
5. <span data-ttu-id="47964-244">В **имя_сайта** введите имя для веб-сайта IIS (например, **DemoSite**).</span><span class="sxs-lookup"><span data-stu-id="47964-244">In the **Site name** box, type a name for the IIS website (for example, **DemoSite**).</span></span>
6. <span data-ttu-id="47964-245">В **физический путь** введите (или перейдите к) путь к локальной папке (например, **C:\DemoSite**).</span><span class="sxs-lookup"><span data-stu-id="47964-245">In the **Physical path** box, type (or browse to) the path to your local folder (for example, **C:\DemoSite**).</span></span>
7. <span data-ttu-id="47964-246">В **порт** введите номер порта, на котором будет размещаться веб-сайта (например, **85**).</span><span class="sxs-lookup"><span data-stu-id="47964-246">In the **Port** box, type the port number on which you want to host the website (for example, **85**).</span></span>

    > [!NOTE]
    > <span data-ttu-id="47964-247">Номера стандартных портов: 80 для HTTP и 443 для HTTPS.</span><span class="sxs-lookup"><span data-stu-id="47964-247">The standard port numbers are 80 for HTTP and 443 for HTTPS.</span></span> <span data-ttu-id="47964-248">Тем не менее если вы размещаете этого веб-сайта через порт 80, необходимо остановить веб-сайт по умолчанию, чтобы обеспечить доступ к веб-узла.</span><span class="sxs-lookup"><span data-stu-id="47964-248">However, if you host this website on port 80, you'll need to stop the default website before you can access your site.</span></span>
8. <span data-ttu-id="47964-249">Оставьте **имя узла** поле пустым, только если вы хотите настроить запись доменных имен (DNS) для веб-сайта, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-249">Leave the **Host name** box blank, unless you want to configure a Domain Name System (DNS) record for the website, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image11.png)

    > [!NOTE]
    > <span data-ttu-id="47964-250">В рабочей среде скорее всего нужно будет разместить веб-сайт через порт 80 и Настройка заголовка узла, а также соответствующие записи DNS.</span><span class="sxs-lookup"><span data-stu-id="47964-250">In a production environment, you'll likely want to host your website on port 80 and configure a host header, together with matching DNS records.</span></span> <span data-ttu-id="47964-251">Дополнительные сведения о настройке заголовков узлов в IIS 7, см. в разделе [Настройка заголовка узла для веб-сайта (IIS 7)](https://technet.microsoft.com/library/cc753195(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="47964-251">For more information on configuring host headers in IIS 7, see [Configure a Host Header for a Web Site (IIS 7)](https://technet.microsoft.com/library/cc753195(WS.10).aspx).</span></span> <span data-ttu-id="47964-252">Дополнительные сведения о роли DNS-сервера в Windows Server, см. в разделе [Обзор DNS-сервера](https://technet.microsoft.com/en-gb/library/cc770392.aspx) и [DNS-сервер](https://technet.microsoft.com/windowsserver/dd448607).</span><span class="sxs-lookup"><span data-stu-id="47964-252">For more information on the DNS Server role in Windows Server, see [DNS Server Overview](https://technet.microsoft.com/en-gb/library/cc770392.aspx) and [DNS Server](https://technet.microsoft.com/windowsserver/dd448607).</span></span>
9. <span data-ttu-id="47964-253">В области **Действия** в разделе **Изменение веб-сайта**выберите пункт **Привязки**.</span><span class="sxs-lookup"><span data-stu-id="47964-253">In the **Actions** pane, under **Edit Site**, click **Bindings**.</span></span>
10. <span data-ttu-id="47964-254">В **привязки сайта** диалоговом окне щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-254">In the **Site Bindings** dialog box, click **Add**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image12.png)
11. <span data-ttu-id="47964-255">В **Добавление привязки сайта** диалоговом окне set **IP-адрес** и **порт** в соответствии с существующей конфигурации сайта.</span><span class="sxs-lookup"><span data-stu-id="47964-255">In the **Add Site Binding** dialog box, set the **IP address** and **Port** to match your existing site configuration.</span></span>
12. <span data-ttu-id="47964-256">В **имя узла** введите имя веб-сервера (например, **STAGEWEB1**), а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-256">In the **Host name** box, type the name of your web server (for example, **STAGEWEB1**), and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image13.png)

    > [!NOTE]
    > <span data-ttu-id="47964-257">Первой привязки сайта дает возможность доступа к сайту, локально с помощью IP-адрес и порт или `http://localhost:85`.</span><span class="sxs-lookup"><span data-stu-id="47964-257">The first site binding allows you to access the site locally using the IP address and port or `http://localhost:85`.</span></span> <span data-ttu-id="47964-258">Вторая привязка сайта дает возможность доступа к сайту с других компьютеров в домене с помощью имени компьютера (например, http://stageweb1:85).</span><span class="sxs-lookup"><span data-stu-id="47964-258">The second site binding allows you to access the site from other computers on the domain using the machine name (for example, http://stageweb1:85).</span></span>
13. <span data-ttu-id="47964-259">В **привязки сайта** диалоговом окне щелкните **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="47964-259">In the **Site Bindings** dialog box, click **Close**.</span></span>
14. <span data-ttu-id="47964-260">В **подключений** панели щелкните **пулы приложений**.</span><span class="sxs-lookup"><span data-stu-id="47964-260">In the **Connections** pane, click **Application Pools**.</span></span>
15. <span data-ttu-id="47964-261">В **пулы приложений** панели, щелкните правой кнопкой мыши имя пула приложений и нажмите кнопку **основные параметры**.</span><span class="sxs-lookup"><span data-stu-id="47964-261">In the **Application Pools** pane, right-click the name of your application pool, and then click **Basic Settings**.</span></span> <span data-ttu-id="47964-262">По умолчанию имя пула приложений будет соответствовать имени веб-сайта (например, **DemoSite**).</span><span class="sxs-lookup"><span data-stu-id="47964-262">By default, the name of your application pool will match the name of your website (for example, **DemoSite**).</span></span>
16. <span data-ttu-id="47964-263">В **версия среды CLR .NET** выберите **среды CLR .NET v4.0.30319**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-263">In the **.NET CLR version** list, select **.NET CLR v4.0.30319**, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image21.png)

    > [!NOTE]
    > <span data-ttu-id="47964-264">В примере решения требуется .NET Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="47964-264">The sample solution requires .NET Framework 4.0.</span></span> <span data-ttu-id="47964-265">Это не является требованием для веб-развертывания в целом.</span><span class="sxs-lookup"><span data-stu-id="47964-265">This is not a requirement for Web Deploy in general.</span></span>

<span data-ttu-id="47964-266">Чтобы веб-сайт для предоставления содержимого удостоверение пула приложений должно иметь разрешения на чтение локальную папку, в котором хранится содержимое.</span><span class="sxs-lookup"><span data-stu-id="47964-266">In order for your website to serve content, the application pool identity must have read permissions on the local folder that stores the content.</span></span> <span data-ttu-id="47964-267">В IIS 7.5 пулы приложений выполняются с уникальным пула приложений по умолчанию (в отличие от предыдущих версий IIS, где пулы приложений будут обычно выполняются с помощью учетной записи сетевой службы).</span><span class="sxs-lookup"><span data-stu-id="47964-267">In IIS 7.5, application pools run with a unique application pool identity by default (in contrast to previous versions of IIS, where application pools would typically run using the Network Service account).</span></span> <span data-ttu-id="47964-268">Удостоверение пула приложений не является реальной учетной записью и не включаются в список пользователей или групп&#x2014;вместо этого оно создается динамически при запуске пула приложений.</span><span class="sxs-lookup"><span data-stu-id="47964-268">The application pool identity is not a real user account and does not show up on any lists of users or groups&#x2014;instead, it's created dynamically when the application pool is started.</span></span> <span data-ttu-id="47964-269">Каждый удостоверение пула приложений добавляется к локальной **IIS\_IUSRS** группы безопасности как скрытый элемент.</span><span class="sxs-lookup"><span data-stu-id="47964-269">Each application pool identity is added to the local **IIS\_IUSRS** security group as a hidden item.</span></span>

<span data-ttu-id="47964-270">Чтобы предоставить разрешения для удостоверения пула приложений для файла или папки, можно двумя способами:</span><span class="sxs-lookup"><span data-stu-id="47964-270">To grant permissions to an application pool identity on a file or folder, you have two options:</span></span>

- <span data-ttu-id="47964-271">Назначить разрешения для удостоверения пула приложений напрямую, используя формат <strong>IIS AppPool\</ strong ><em>[имя пула приложений]</em>(например, <strong>IIS AppPool\DemoSite</strong>).</span><span class="sxs-lookup"><span data-stu-id="47964-271">Assign permissions to the application pool identity directly, using the format <strong>IIS AppPool\</strong><em>[application pool name]</em>(for example, <strong>IIS AppPool\DemoSite</strong>).</span></span>
- <span data-ttu-id="47964-272">Назначение разрешений для **IIS\_IUSRS** группы.</span><span class="sxs-lookup"><span data-stu-id="47964-272">Assign permissions to the **IIS\_IUSRS** group.</span></span>

<span data-ttu-id="47964-273">Наиболее распространенным подходом является для назначения разрешений локальной **IIS\_IUSRS** группе, так как этот подход позволяет изменять пулы приложений без повторной настройки разрешений файловой системы.</span><span class="sxs-lookup"><span data-stu-id="47964-273">The most common approach is to assign permissions to the local **IIS\_IUSRS** group, because this approach lets you change application pools without reconfiguring file system permissions.</span></span> <span data-ttu-id="47964-274">В следующей процедуре используется этот подход на основе групп.</span><span class="sxs-lookup"><span data-stu-id="47964-274">The next procedure uses this group-based approach.</span></span>

> [!NOTE]
> <span data-ttu-id="47964-275">Дополнительные сведения о удостоверения пула приложений в IIS 7.5 см. в разделе [удостоверения пула приложений](https://go.microsoft.com/?linkid=9805123).</span><span class="sxs-lookup"><span data-stu-id="47964-275">For more information on application pool identities in IIS 7.5, see [Application Pool Identities](https://go.microsoft.com/?linkid=9805123).</span></span>


<span data-ttu-id="47964-276">**Чтобы настроить разрешения для веб-сайта IIS**</span><span class="sxs-lookup"><span data-stu-id="47964-276">**To configure folder permissions for an IIS website**</span></span>

1. <span data-ttu-id="47964-277">В обозревателе Windows перейдите в расположение своей локальной папки.</span><span class="sxs-lookup"><span data-stu-id="47964-277">In Windows Explorer, browse to the location of your local folder.</span></span>
2. <span data-ttu-id="47964-278">Щелкните правой кнопкой мыши папку и нажмите кнопку **свойства**.</span><span class="sxs-lookup"><span data-stu-id="47964-278">Right-click the folder, and then click **Properties**.</span></span>
3. <span data-ttu-id="47964-279">На **безопасности** щелкните **изменить**, а затем нажмите кнопку **добавить**.</span><span class="sxs-lookup"><span data-stu-id="47964-279">On the **Security** tab, click **Edit**, and then click **Add**.</span></span>
4. <span data-ttu-id="47964-280">Нажмите кнопку **расположения**.</span><span class="sxs-lookup"><span data-stu-id="47964-280">Click **Locations**.</span></span> <span data-ttu-id="47964-281">В **расположения** диалоговом окне выберите локальный сервер, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-281">In the **Locations** dialog box, select the local server, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image15.png)
5. <span data-ttu-id="47964-282">В **Выбор пользователей или групп** диалоговом окне **IIS\_IUSRS**, нажмите кнопку **проверить имена**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-282">In the **Select Users or Groups** dialog box, type **IIS\_IUSRS**, click **Check Names**, and then click **OK**.</span></span>
6. <span data-ttu-id="47964-283">В <strong>разрешения для</strong><em>[имя папки]</em> диалоговом окне Обратите внимание, что назначить новую группу <strong>чтения &amp; выполнение</strong>, <strong>папки содержимое</strong>, и <strong>чтения</strong> разрешения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="47964-283">In the <strong>Permissions for</strong><em>[folder name]</em> dialog box, notice that the new group has been assigned the <strong>Read &amp; execute</strong>, <strong>List folder contents</strong>, and <strong>Read</strong> permissions by default.</span></span> <span data-ttu-id="47964-284">Оставьте без изменений и нажмите кнопку <strong>ОК</strong>.</span><span class="sxs-lookup"><span data-stu-id="47964-284">Leave this unchanged and click <strong>OK</strong>.</span></span>
7. <span data-ttu-id="47964-285">Нажмите кнопку <strong>ОК</strong> закрыть <em>[имя папки]</em><strong>свойства</strong> диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="47964-285">Click <strong>OK</strong> to close the <em>[folder name]</em><strong>Properties</strong> dialog box.</span></span>

<span data-ttu-id="47964-286">Как последняя задача необходимо предоставить соответствующие разрешения для пользователя без прав администратора, учетные данные которого вы будете использовать для развертывания содержимого.</span><span class="sxs-lookup"><span data-stu-id="47964-286">As a final task, you must grant the appropriate permissions to the non-administrator user whose credentials you'll use to deploy content.</span></span> <span data-ttu-id="47964-287">Этому пользователю требуются разрешения для удаленного развертывания содержимого на веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="47964-287">This user requires the permissions to deploy content remotely to your website.</span></span>

<span data-ttu-id="47964-288">**Настройка разрешений веб-сайта IIS для пользователя без прав администратора домена**</span><span class="sxs-lookup"><span data-stu-id="47964-288">**To configure IIS website permissions for a non-administrator domain user**</span></span>

1. <span data-ttu-id="47964-289">В диспетчере служб IIS в **подключений** панели щелкните правой кнопкой мыши узел своей веб-сайта (например, **DemoSite**), пункты **развернуть**и нажмите кнопку **настройки веб- Публикации развертывания**.</span><span class="sxs-lookup"><span data-stu-id="47964-289">In IIS Manager, in the **Connections** pane, right-click your website node (for example, **DemoSite**), point to **Deploy**, and then click **Configure Web Deploy Publishing**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image16.png)
2. <span data-ttu-id="47964-290">В **настроить веб-развертывание публикаций** диалоговом окне справа от **выберите пользователя, чтобы предоставить разрешения публикации** щелкните кнопку с многоточием.</span><span class="sxs-lookup"><span data-stu-id="47964-290">In the **Configure Web Deploy Publishing** dialog box, to the right of the **Select a user to give publishing permissions** list, click the ellipsis button.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image17.png)
3. <span data-ttu-id="47964-291">В **разрешить пользователя** диалогового окна введите домен и имя учетной записи, которую необходимо использовать для развертывания содержимого и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47964-291">In the **Allow User** dialog box, type the domain and user name of the account you want to use to deploy content, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image18.png)
4. <span data-ttu-id="47964-292">В **настроить веб-развертывание публикаций** диалоговом окне щелкните **установки**.</span><span class="sxs-lookup"><span data-stu-id="47964-292">In the **Configure Web Deploy Publishing** dialog box, click **Setup**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image19.png)

    > [!NOTE]
    > <span data-ttu-id="47964-293">Эта операция выполняет две основные функции за один шаг.</span><span class="sxs-lookup"><span data-stu-id="47964-293">This operation performs two key functions in one step.</span></span> <span data-ttu-id="47964-294">Во-первых он предоставляет пользователю разрешение на изменение на веб-сайт удаленно через веб-службы управления, в соответствии с правилами делегирования, которые проверяются в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="47964-294">First, it grants the user permission to modify the website remotely through the Web Management Service, according to the delegation rules you examined in the previous section.</span></span> <span data-ttu-id="47964-295">Во-вторых он предоставляет пользователю полный контроль в исходную папку для веб-сайта, который позволяет пользователю добавлять, изменять и задать разрешения для содержимого веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="47964-295">Second, it grants the user full control of the source folder for the website, which allows the user to add, modify, and set permissions on the website content.</span></span>
5. <span data-ttu-id="47964-296">В **настроить веб-развертывание публикаций** диалоговом окне щелкните **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="47964-296">In the **Configure Web Deploy Publishing** dialog box, click **Close**.</span></span>

## <a name="configure-firewall-exceptions"></a><span data-ttu-id="47964-297">Настройка исключений брандмауэра</span><span class="sxs-lookup"><span data-stu-id="47964-297">Configure Firewall Exceptions</span></span>

<span data-ttu-id="47964-298">По умолчанию службы IIS веб-управления прослушивает TCP-порт 8172.</span><span class="sxs-lookup"><span data-stu-id="47964-298">By default, the IIS Web Management Service listens on TCP port 8172.</span></span> <span data-ttu-id="47964-299">Если на веб-сервере включен брандмауэр Windows, нужно будет создать новое входящее правило разрешает TCP-трафик через порт 8172 (весь исходящий трафик разрешен по умолчанию в брандмауэре Windows).</span><span class="sxs-lookup"><span data-stu-id="47964-299">If Windows Firewall is enabled on your web server, you'll need to create a new inbound rule to allow TCP traffic on port 8172 (all outbound traffic is permitted by default in Windows Firewall).</span></span> <span data-ttu-id="47964-300">Если используется сторонний брандмауэр, необходимо создать правила, чтобы разрешить трафик.</span><span class="sxs-lookup"><span data-stu-id="47964-300">If you use a third-party firewall, you'll need to create rules to allow traffic.</span></span>

| <span data-ttu-id="47964-301">Направление</span><span class="sxs-lookup"><span data-stu-id="47964-301">Direction</span></span> | <span data-ttu-id="47964-302">Из порта</span><span class="sxs-lookup"><span data-stu-id="47964-302">From Port</span></span> | <span data-ttu-id="47964-303">К порту</span><span class="sxs-lookup"><span data-stu-id="47964-303">To Port</span></span> | <span data-ttu-id="47964-304">Тип порта</span><span class="sxs-lookup"><span data-stu-id="47964-304">Port Type</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="47964-305">Входящих подключений</span><span class="sxs-lookup"><span data-stu-id="47964-305">Inbound</span></span> | <span data-ttu-id="47964-306">Любой</span><span class="sxs-lookup"><span data-stu-id="47964-306">Any</span></span> | <span data-ttu-id="47964-307">8172</span><span class="sxs-lookup"><span data-stu-id="47964-307">8172</span></span> | <span data-ttu-id="47964-308">TCP</span><span class="sxs-lookup"><span data-stu-id="47964-308">TCP</span></span> |
| <span data-ttu-id="47964-309">Исходящие</span><span class="sxs-lookup"><span data-stu-id="47964-309">Outbound</span></span> | <span data-ttu-id="47964-310">8172</span><span class="sxs-lookup"><span data-stu-id="47964-310">8172</span></span> | <span data-ttu-id="47964-311">Любой</span><span class="sxs-lookup"><span data-stu-id="47964-311">Any</span></span> | <span data-ttu-id="47964-312">TCP</span><span class="sxs-lookup"><span data-stu-id="47964-312">TCP</span></span> |
  

<span data-ttu-id="47964-313">Дополнительные сведения о настройке правил в брандмауэре Windows см. в разделе [Настройка правил брандмауэра](https://technet.microsoft.com/library/dd448559(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="47964-313">For more information on configuring rules in Windows Firewall, see [Configuring Firewall Rules](https://technet.microsoft.com/library/dd448559(WS.10).aspx).</span></span> <span data-ttu-id="47964-314">Сторонние брандмауэры можно найти в документации к продукту.</span><span class="sxs-lookup"><span data-stu-id="47964-314">For third-party firewalls, please consult your product documentation.</span></span>

## <a name="conclusion"></a><span data-ttu-id="47964-315">Заключение</span><span class="sxs-lookup"><span data-stu-id="47964-315">Conclusion</span></span>

<span data-ttu-id="47964-316">Веб-сервер станет готова к приему удаленного развертывания для веб-развертывание обработчик веб-служба управления.</span><span class="sxs-lookup"><span data-stu-id="47964-316">Your web server should now be ready to accept remote deployments to the Web Deploy Handler through the Web Management Service.</span></span> <span data-ttu-id="47964-317">Прежде чем пытаться развернуть веб-приложения к серверу, вы можете проверить следующие основные моменты:</span><span class="sxs-lookup"><span data-stu-id="47964-317">Before you attempt to deploy a web application to the server, you may want to check these key points:</span></span>

- <span data-ttu-id="47964-318">Включена обычная проверка подлинности на уровне сервера в IIS?</span><span class="sxs-lookup"><span data-stu-id="47964-318">Have you enabled basic authentication at the server level in IIS?</span></span>
- <span data-ttu-id="47964-319">Включен ли удаленные соединения с веб-службы управления?</span><span class="sxs-lookup"><span data-stu-id="47964-319">Have you enabled remote connections to the Web Management Service?</span></span>
- <span data-ttu-id="47964-320">Вы уже начали веб-службы управления?</span><span class="sxs-lookup"><span data-stu-id="47964-320">Have you started the Web Management Service?</span></span>
- <span data-ttu-id="47964-321">Существуют ли управления правила делегирования службы на месте?</span><span class="sxs-lookup"><span data-stu-id="47964-321">Are there management service delegation rules in place?</span></span>
- <span data-ttu-id="47964-322">Имеет ли удостоверение пула приложений доступ на чтение к папке источника для веб-сайта?</span><span class="sxs-lookup"><span data-stu-id="47964-322">Does the application pool identity have read access to the source folder for your website?</span></span>
- <span data-ttu-id="47964-323">Имеет ли учетная запись пользователя без прав администратора разрешения уровня веб-сайта в IIS?</span><span class="sxs-lookup"><span data-stu-id="47964-323">Does the non-administrator user account have site-level permissions in IIS?</span></span>
- <span data-ttu-id="47964-324">Позволяет ли входящие подключения к серверу через TCP-порт 8172 брандмауэр?</span><span class="sxs-lookup"><span data-stu-id="47964-324">Does your firewall allow incoming connections to the server on TCP port 8172?</span></span>

## <a name="further-reading"></a><span data-ttu-id="47964-325">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="47964-325">Further Reading</span></span>

<span data-ttu-id="47964-326">Рекомендации о том, как настроить пользовательские файлы проекта Microsoft Build Engine (MSBuild) для развертывания веб-пакеты на веб-развертывание обработчик, см. в разделе [Настройка свойств развертывания для целевой среды](configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="47964-326">For guidance on how to configure custom Microsoft Build Engine (MSBuild) project files to deploy web packages to the Web Deploy Handler, see [Configuring Deployment Properties for a Target Environment](configuring-deployment-properties-for-a-target-environment.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="47964-327">[Назад](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)
> [Вперед](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="47964-327">[Previous](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)
[Next](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)</span></span>
