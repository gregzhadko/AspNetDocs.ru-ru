---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
title: Настройка веб-сервера для публикации веб-развертывание (обработчик веб-развертывание) | Документация Майкрософт
author: jrjlee
description: В этом разделе описано, как настроить веб-сервер службы IIS (IIS) для поддержки веб-публикации и развертывания с помощью IIS веб-развертывание...
ms.author: riande
ms.date: 01/29/2017
ms.assetid: 90ebf911-1c46-4470-b876-1335bd0f590f
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler
msc.type: authoredcontent
ms.openlocfilehash: baaebd32f08d3c6b861572c5c5a16ec0fb70aaf0
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74589037"
---
# <a name="configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler"></a><span data-ttu-id="01c26-103">Настройка веб-сервера для публикации веб-развертывания (обработчик веб-развертывания)</span><span class="sxs-lookup"><span data-stu-id="01c26-103">Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)</span></span>

[<span data-ttu-id="01c26-104">Загрузить PDF-файл</span><span class="sxs-lookup"><span data-stu-id="01c26-104">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="01c26-105">В этом разделе описывается настройка веб-сервера службы IIS (IIS) для поддержки веб-публикации и развертывания с помощью обработчика веб-развертывание IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-105">This topic describes how to configure an Internet Information Services (IIS) web server to support web publishing and deployment using the IIS Web Deploy Handler.</span></span>
> 
> <span data-ttu-id="01c26-106">При работе с веб-развертывание 2,0 или более поздней версии существует три основных подхода, которые можно использовать для получения приложений или сайтов на веб-сервер.</span><span class="sxs-lookup"><span data-stu-id="01c26-106">When you work with Web Deploy 2.0 or later, there are three main approaches you can use to get your applications or sites onto a web server.</span></span> <span data-ttu-id="01c26-107">Вы можете выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="01c26-107">You can:</span></span>
> 
> - <span data-ttu-id="01c26-108">Используйте *службу удаленного агента веб-развертывание*.</span><span class="sxs-lookup"><span data-stu-id="01c26-108">Use the *Web Deploy Remote Agent Service*.</span></span> <span data-ttu-id="01c26-109">Этот подход требует меньшей настройки веб-сервера, но для развертывания любых данных на сервере необходимо предоставить учетные данные администратора локального сервера.</span><span class="sxs-lookup"><span data-stu-id="01c26-109">This approach requires less configuration of the web server, but you need to provide the credentials of a local server administrator in order to deploy anything to the server.</span></span>
> - <span data-ttu-id="01c26-110">Используйте *обработчик веб-развертывание*.</span><span class="sxs-lookup"><span data-stu-id="01c26-110">Use the *Web Deploy Handler*.</span></span> <span data-ttu-id="01c26-111">Этот подход гораздо более сложен и требует более первоначальных усилий по настройке веб-сервера.</span><span class="sxs-lookup"><span data-stu-id="01c26-111">This approach is a lot more complex and requires more initial effort to set up the web server.</span></span> <span data-ttu-id="01c26-112">Однако при использовании этого подхода можно настроить службы IIS, чтобы разрешить пользователям без прав администратора выполнять развертывание.</span><span class="sxs-lookup"><span data-stu-id="01c26-112">However, when you use this approach, you can configure IIS to allow non-administrator users to perform the deployment.</span></span> <span data-ttu-id="01c26-113">Обработчик веб-развертывание доступен только в службах IIS версии 7 или более поздней.</span><span class="sxs-lookup"><span data-stu-id="01c26-113">The Web Deploy Handler is only available in IIS version 7 or later.</span></span>
> - <span data-ttu-id="01c26-114">Используйте *автономное развертывание*.</span><span class="sxs-lookup"><span data-stu-id="01c26-114">Use *offline deployment*.</span></span> <span data-ttu-id="01c26-115">Этот подход требует минимальной настройки веб-сервера, но администратор сервера должен вручную скопировать веб-пакет на сервер и импортировать его с помощью диспетчера служб IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-115">This approach requires the least configuration of the web server, but a server administrator must manually copy the web package onto the server and import it through IIS Manager.</span></span>
> 
> <span data-ttu-id="01c26-116">Дополнительные сведения о ключевых функциях, преимуществах и недостатках этих подходов см. [в разделе Выбор правильного подхода к веб-развертыванию](choosing-the-right-approach-to-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="01c26-116">For more information on the key features, advantages, and disadvantages of these approaches, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="01c26-117">Да, если вы хотите разрешить пользователям без прав администратора развертывать содержимое на определенные веб-сайты IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-117">Yes, if you want to allow non-administrator users to deploy content to specific IIS websites.</span></span> <span data-ttu-id="01c26-118">Этот подход часто желательно применять в сценариях такого типа:</span><span class="sxs-lookup"><span data-stu-id="01c26-118">This approach is often desirable in these types of scenarios:</span></span>

- <span data-ttu-id="01c26-119">Промежуточная или рабочая среда, где у пользователя или учетной записи службы, запускающей удаленное развертывание, вряд ли будет доступа к учетным данным администратора сервера.</span><span class="sxs-lookup"><span data-stu-id="01c26-119">Staging or production environments, where the person or service account that triggers the remote deployment is unlikely to have access to the credentials of a server administrator.</span></span>
- <span data-ttu-id="01c26-120">Размещенные среды, в которых вы хотите предоставить удаленным пользователям возможность обновлять свои веб-сайты, не предоставляя им полного контроля над веб-серверами (или доступом к веб-сайтам других пользователей).</span><span class="sxs-lookup"><span data-stu-id="01c26-120">Hosted environments, where you want to give remote users the ability to update their websites without giving them full control of your web servers (or access to anyone else's websites).</span></span>

<span data-ttu-id="01c26-121">В сценариях разработки или тестирования или в небольших организациях развертывание содержимого с помощью учетных данных администратора сервера часто менее спорными.</span><span class="sxs-lookup"><span data-stu-id="01c26-121">In development or test scenarios, or in smaller organizations, deploying content using server administrator credentials is often less contentious.</span></span> <span data-ttu-id="01c26-122">В этих сценариях Настройка веб-серверов для поддержки развертывания с помощью [службы веб-развертывание Remote Agent](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md) предлагает более простой подход.</span><span class="sxs-lookup"><span data-stu-id="01c26-122">In these scenarios, configuring your web servers to support deployment using the [Web Deploy Remote Agent Service](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md) offers a more straightforward approach.</span></span>

## <a name="task-overview"></a><span data-ttu-id="01c26-123">Обзор задач</span><span class="sxs-lookup"><span data-stu-id="01c26-123">Task Overview</span></span>

<span data-ttu-id="01c26-124">Чтобы настроить веб-сервер на прием и развертывание веб-пакетов с удаленного компьютера с помощью обработчика веб-развертывание, вам потребуется:</span><span class="sxs-lookup"><span data-stu-id="01c26-124">To configure the web server to accept and deploy web packages from a remote computer using the Web Deploy Handler approach, you'll need to:</span></span>

- <span data-ttu-id="01c26-125">Создайте или выберите учетную запись пользователя домена ("пользователь без прав администратора"), учетные данные которого будут использоваться для выполнения развертываний.</span><span class="sxs-lookup"><span data-stu-id="01c26-125">Create, or choose, a domain user account (the "non-administrator user") whose credentials you'll use to perform deployments.</span></span>
- <span data-ttu-id="01c26-126">Установите IIS 7,5, включая службу веб-управления и модуль обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="01c26-126">Install IIS 7.5, including the Web Management Service and the Basic Authentication module.</span></span>
- <span data-ttu-id="01c26-127">Установите веб-развертывание 2,1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="01c26-127">Install Web Deploy 2.1 or later.</span></span>
- <span data-ttu-id="01c26-128">Настройте службу веб-управления, чтобы разрешить удаленные подключения, и запустите службу.</span><span class="sxs-lookup"><span data-stu-id="01c26-128">Configure the Web Management Service to allow remote connections, and start the service.</span></span>
- <span data-ttu-id="01c26-129">Создайте веб-сайт IIS для размещения развернутого содержимого.</span><span class="sxs-lookup"><span data-stu-id="01c26-129">Create an IIS website to host the deployed content.</span></span>
- <span data-ttu-id="01c26-130">Предоставьте пользователям, не являющимся администраторами, разрешения на веб-сайт в диспетчере служб IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-130">Grant your non-administrator user permissions on your website in IIS Manager.</span></span>
- <span data-ttu-id="01c26-131">Убедитесь, что правила делегирования службы веб-управления позволяют службе добавлять и изменять содержимое веб-сайта с помощью учетной записи пользователя без прав администратора.</span><span class="sxs-lookup"><span data-stu-id="01c26-131">Ensure that the Web Management Service delegation rules permit the service to add and change website content using your non-administrator user account.</span></span>
- <span data-ttu-id="01c26-132">Настройте все брандмауэры, разрешающие входящие подключения через порт 8172.</span><span class="sxs-lookup"><span data-stu-id="01c26-132">Configure any firewalls to allow incoming connections on port 8172.</span></span>

<span data-ttu-id="01c26-133">Чтобы разместить пример решения ContactManager в частности, вам потребуется:</span><span class="sxs-lookup"><span data-stu-id="01c26-133">To host the ContactManager sample solution specifically, you'll also need to:</span></span>

- <span data-ttu-id="01c26-134">Установите .NET Framework 4,0.</span><span class="sxs-lookup"><span data-stu-id="01c26-134">Install the .NET Framework 4.0.</span></span>
- <span data-ttu-id="01c26-135">Установите ASP.NET MVC 3.</span><span class="sxs-lookup"><span data-stu-id="01c26-135">Install ASP.NET MVC 3.</span></span>

<span data-ttu-id="01c26-136">В этом разделе будет показано, как выполнить каждую из этих процедур.</span><span class="sxs-lookup"><span data-stu-id="01c26-136">This topic will show you how to perform each of these procedures.</span></span> <span data-ttu-id="01c26-137">В задачах и пошаговых руководствах этого раздела предполагается, что вы начинаете с чистой серверной сборки под Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="01c26-137">The tasks and walkthroughs in this topic assume that you're starting with a clean server build running Windows Server 2016.</span></span> <span data-ttu-id="01c26-138">Прежде чем продолжить, убедитесь в том, что:</span><span class="sxs-lookup"><span data-stu-id="01c26-138">Before you continue, ensure that:</span></span>

- <span data-ttu-id="01c26-139">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="01c26-139">Windows Server 2016</span></span>
- <span data-ttu-id="01c26-140">Сервер присоединен к домену.</span><span class="sxs-lookup"><span data-stu-id="01c26-140">The server is domain-joined.</span></span>
- <span data-ttu-id="01c26-141">Сервер имеет статический IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="01c26-141">The server has a static IP address.</span></span>

> [!NOTE]
> <span data-ttu-id="01c26-142">Дополнительные сведения о присоединении компьютеров к домену см. в разделе [Присоединение компьютеров к домену и вход в систему](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="01c26-142">For more information on joining computers to a domain, see [Joining Computers to the Domain and Logging On](https://technet.microsoft.com/library/cc725618(v=WS.10).aspx).</span></span> <span data-ttu-id="01c26-143">Дополнительные сведения о настройке статических IP-адресов см. в статье [Настройка статического IP-](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx)адреса.</span><span class="sxs-lookup"><span data-stu-id="01c26-143">For more information on configuring static IP addresses, see [Configure a Static IP Address](https://technet.microsoft.com/library/cc754203(v=ws.10).aspx).</span></span>

## <a name="install-products-and-components"></a><span data-ttu-id="01c26-144">Установка продуктов и компонентов</span><span class="sxs-lookup"><span data-stu-id="01c26-144">Install Products and Components</span></span>

<span data-ttu-id="01c26-145">Этот раздел поможет вам установить необходимые продукты и компоненты на веб-сервере.</span><span class="sxs-lookup"><span data-stu-id="01c26-145">This section will guide you through installing the required products and components on the web server.</span></span> <span data-ttu-id="01c26-146">Прежде чем начать, рекомендуется запустить Центр обновления Windows, чтобы гарантировать, что сервер будет полностью обновлен.</span><span class="sxs-lookup"><span data-stu-id="01c26-146">Before you begin, a good practice is to run Windows Update to ensure that your server is fully up to date.</span></span>

<span data-ttu-id="01c26-147">В этом случае необходимо установить следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="01c26-147">In this case, you need to install these things:</span></span>

- <span data-ttu-id="01c26-148">**Рекомендуемая конфигурация IIS 7**.</span><span class="sxs-lookup"><span data-stu-id="01c26-148">**IIS 7 Recommended Configuration**.</span></span> <span data-ttu-id="01c26-149">Это включает роль **веб-сервера (IIS)** на веб-сервере и устанавливает набор модулей и компонентов IIS, необходимых для размещения приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="01c26-149">This enables the **Web Server (IIS)** role on your web server and installs the set of IIS modules and components that you need in order to host an ASP.NET application.</span></span>
- <span data-ttu-id="01c26-150">**IIS: Служба управления**.</span><span class="sxs-lookup"><span data-stu-id="01c26-150">**IIS: Management Service**.</span></span> <span data-ttu-id="01c26-151">При этом устанавливается служба веб-управления (WMSvc) в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-151">This installs the Web Management Service (WMSvc) in IIS.</span></span> <span data-ttu-id="01c26-152">Эта служба обеспечивает удаленное управление веб-сайтами IIS и предоставляет клиентам конечную точку обработчика веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="01c26-152">This service enables remote management of IIS websites and exposes the Web Deploy Handler endpoint to clients.</span></span>
- <span data-ttu-id="01c26-153">**IIS: обычная проверка подлинности**.</span><span class="sxs-lookup"><span data-stu-id="01c26-153">**IIS: Basic Authentication**.</span></span> <span data-ttu-id="01c26-154">При этом устанавливается модуль базовой проверки подлинности IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-154">This installs the IIS Basic Authentication module.</span></span> <span data-ttu-id="01c26-155">Это позволит службе веб-управления (WMSvc) пройти проверку подлинности предоставленных учетных данных.</span><span class="sxs-lookup"><span data-stu-id="01c26-155">This lets the Web Management Service (WMSvc) authenticate the credentials you provide.</span></span>
- <span data-ttu-id="01c26-156">**Средство веб-развертывания 2,1 или более поздней версии**.</span><span class="sxs-lookup"><span data-stu-id="01c26-156">**Web Deployment Tool 2.1 or later**.</span></span> <span data-ttu-id="01c26-157">При этом на сервере устанавливаются веб-развертывание (и его базовый исполняемый файл, MSDeploy. exe).</span><span class="sxs-lookup"><span data-stu-id="01c26-157">This installs Web Deploy (and its underlying executable, MSDeploy.exe) on your server.</span></span> <span data-ttu-id="01c26-158">В рамках этого процесса он устанавливает обработчик веб-развертывание и интегрирует его со службой веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-158">As part of this process, it installs the Web Deploy Handler and integrates it with the Web Management Service.</span></span>
- <span data-ttu-id="01c26-159">**.NET Framework 4,0**.</span><span class="sxs-lookup"><span data-stu-id="01c26-159">**.NET Framework 4.0**.</span></span> <span data-ttu-id="01c26-160">Это необходимо для запуска приложений, созданных на основе этой версии .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="01c26-160">This is required to run applications that were built on this version of the .NET Framework.</span></span>
- <span data-ttu-id="01c26-161">**ASP.NET MVC 3**.</span><span class="sxs-lookup"><span data-stu-id="01c26-161">**ASP.NET MVC 3**.</span></span> <span data-ttu-id="01c26-162">При этом устанавливаются сборки, необходимые для запуска приложений MVC 3.</span><span class="sxs-lookup"><span data-stu-id="01c26-162">This installs the assemblies you need to run MVC 3 applications.</span></span>

> [!NOTE]
> <span data-ttu-id="01c26-163">В этом пошаговом руководстве описывается использование установщика веб-платформы для установки и настройки различных компонентов.</span><span class="sxs-lookup"><span data-stu-id="01c26-163">This walkthrough describes the use of the Web Platform Installer to install and configure various components.</span></span> <span data-ttu-id="01c26-164">Хотя вам не нужно использовать установщик веб-платформы, он упрощает процесс установки, автоматически выявляя зависимости и гарантируя, что вы всегда получаете новейшие версии продукта.</span><span class="sxs-lookup"><span data-stu-id="01c26-164">Although you don't have to use the Web Platform Installer, it simplifies the installation process by automatically detecting dependencies and ensuring that you always get the latest product versions.</span></span> <span data-ttu-id="01c26-165">Дополнительные сведения см. в разделе [установщик веб-платформы Майкрософт](https://go.microsoft.com/?linkid=9805118).</span><span class="sxs-lookup"><span data-stu-id="01c26-165">For more information, see [Microsoft Web Platform Installer](https://go.microsoft.com/?linkid=9805118).</span></span>

<span data-ttu-id="01c26-166">**Установка необходимых продуктов и компонентов**</span><span class="sxs-lookup"><span data-stu-id="01c26-166">**To install the required products and components**</span></span>

1. <span data-ttu-id="01c26-167">Скачайте и установите [установщик веб-платформы](https://go.microsoft.com/?linkid=9805118).</span><span class="sxs-lookup"><span data-stu-id="01c26-167">Download and install the [Web Platform Installer](https://go.microsoft.com/?linkid=9805118).</span></span>
2. <span data-ttu-id="01c26-168">После завершения установки установщик веб-платформы запустится автоматически.</span><span class="sxs-lookup"><span data-stu-id="01c26-168">When installation is complete, the Web Platform Installer will launch automatically.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01c26-169">Теперь можно запустить установщик веб-платформы в любое время из меню " **Пуск** ".</span><span class="sxs-lookup"><span data-stu-id="01c26-169">You can now launch the Web Platform Installer at any time from the **Start** menu.</span></span> <span data-ttu-id="01c26-170">Для этого в меню **Пуск** выберите пункт **все программы**, а затем щелкните **установщик веб-платформы Майкрософт**.</span><span class="sxs-lookup"><span data-stu-id="01c26-170">To do this, on the **Start** menu, click **All Programs**, and then click **Microsoft Web Platform Installer**.</span></span>
3. <span data-ttu-id="01c26-171">В верхней части окна **установщика веб-платформы** щелкните **Products (продукты**).</span><span class="sxs-lookup"><span data-stu-id="01c26-171">At the top of the **Web Platform Installer** window, click **Products**.</span></span>
4. <span data-ttu-id="01c26-172">В левой части окна в области навигации щелкните **платформы**.</span><span class="sxs-lookup"><span data-stu-id="01c26-172">On the left side of the window, in the navigation pane, click **Frameworks**.</span></span>
5. <span data-ttu-id="01c26-173">В строке **Microsoft .NET Framework 4** , если .NET Framework еще не установлен, нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-173">In the **Microsoft .NET Framework 4** row, if the .NET Framework is not already installed, click **Add**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01c26-174">Возможно, вы уже установили .NET Framework 4,0 с помощью Центр обновления Windows.</span><span class="sxs-lookup"><span data-stu-id="01c26-174">You may have already installed the .NET Framework 4.0 through Windows Update.</span></span> <span data-ttu-id="01c26-175">Если продукт или компонент уже установлен, установщик веб-платформы сообщит это, заменив кнопку **Добавить** на **установленный**текст.</span><span class="sxs-lookup"><span data-stu-id="01c26-175">If a product or component is already installed, the Web Platform Installer will indicate this by replacing the **Add** button with the text **Installed**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image1.png)
6. <span data-ttu-id="01c26-176">В строке **ASP.NET MVC 3 (Visual Studio 2010)** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-176">In the **ASP.NET MVC 3 (Visual Studio 2010)** row, click **Add**.</span></span>
7. <span data-ttu-id="01c26-177">В области навигации щелкните **сервер**.</span><span class="sxs-lookup"><span data-stu-id="01c26-177">In the navigation pane, click **Server**.</span></span>
8. <span data-ttu-id="01c26-178">В строке **рекомендуемой конфигурации IIS 7** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-178">In the **IIS 7 Recommended Configuration** row, click **Add**.</span></span>
9. <span data-ttu-id="01c26-179">В строке **средства веб-развертывания 2,1** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-179">In the **Web Deployment Tool 2.1** row, click **Add**.</span></span>
10. <span data-ttu-id="01c26-180">В строке **службы IIS: обычная проверка подлинности** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-180">In the **IIS: Basic Authentication** row, click **Add**.</span></span>
11. <span data-ttu-id="01c26-181">В строке **Служба IIS: Управление** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-181">In the **IIS: Management Service** row, click **Add**.</span></span>
12. <span data-ttu-id="01c26-182">Нажмите кнопку **Установить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-182">Click **Install**.</span></span> <span data-ttu-id="01c26-183">Установщик веб-платформы отобразит список продуктов&#x2014;вместе со всеми связанными зависимостями&#x2014;, которые будут установлены, и предложит принять условия лицензионного соглашения.</span><span class="sxs-lookup"><span data-stu-id="01c26-183">The Web Platform Installer will show you a list of products&#x2014;together with any associated dependencies&#x2014;to be installed and will prompt you to accept the license terms.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image2.png)
13. <span data-ttu-id="01c26-184">Ознакомьтесь с условиями лицензионного соглашения и, если вы согласны с условиями, нажмите кнопку **принимаю**.</span><span class="sxs-lookup"><span data-stu-id="01c26-184">Review the license terms, and if you consent to the terms, click **I Accept**.</span></span>
14. <span data-ttu-id="01c26-185">По завершении установки нажмите кнопку **Готово**, а затем закройте окно **установщик веб-платформы** .</span><span class="sxs-lookup"><span data-stu-id="01c26-185">When the installation is complete, click **Finish**, and then close the **Web Platform Installer** window.</span></span>

<span data-ttu-id="01c26-186">Если вы установили .NET Framework 4,0 до установки служб IIS, необходимо запустить [средство регистрации служб iis ASP.NET](https://msdn.microsoft.com/library/k6h9cz8h(v=VS.100).aspx) (ASPNET\_regiis. exe), чтобы зарегистрировать последнюю версию ASP.NET с IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-186">If you installed the .NET Framework 4.0 before you installed IIS, you'll need to run the [ASP.NET IIS Registration Tool](https://msdn.microsoft.com/library/k6h9cz8h(v=VS.100).aspx) (aspnet\_regiis.exe) to register the latest version of ASP.NET with IIS.</span></span> <span data-ttu-id="01c26-187">В противном случае вы обнаружите, что IIS будет обслуживать статическое содержимое (например, HTML-файлы) без проблем, но при попытке перейти к содержимому ASP.NET будет возвращена **Ошибка HTTP 404,0 — не найдена** .</span><span class="sxs-lookup"><span data-stu-id="01c26-187">If you don't do this, you'll find that IIS will serve static content (like HTML files) without any problems, but it will return **HTTP Error 404.0 – Not Found** when you attempt to browse to ASP.NET content.</span></span> <span data-ttu-id="01c26-188">Чтобы убедиться, что ASP.NET 4,0 зарегистрирован, можно использовать следующую процедуру.</span><span class="sxs-lookup"><span data-stu-id="01c26-188">You can use the next procedure to ensure that ASP.NET 4.0 is registered.</span></span>

<span data-ttu-id="01c26-189">**Регистрация ASP.NET 4,0 в службах IIS**</span><span class="sxs-lookup"><span data-stu-id="01c26-189">**To register ASP.NET 4.0 with IIS**</span></span>

1. <span data-ttu-id="01c26-190">Нажмите кнопку **Пуск**и введите **Командная строка**.</span><span class="sxs-lookup"><span data-stu-id="01c26-190">Click **Start**, and then type **Command Prompt**.</span></span>
2. <span data-ttu-id="01c26-191">В результатах поиска щелкните правой кнопкой мыши пункт **Командная строка**и выберите команду **Запуск от имени администратора**.</span><span class="sxs-lookup"><span data-stu-id="01c26-191">In the search results, right-click **Command Prompt**, and then click **Run as administrator**.</span></span>
3. <span data-ttu-id="01c26-192">В окне командной строки перейдите в каталог **%WINDIR%\Microsoft.NET\Framework\v4.0.30319** .</span><span class="sxs-lookup"><span data-stu-id="01c26-192">In the Command Prompt window, navigate to the **%WINDIR%\Microsoft.NET\Framework\v4.0.30319** directory.</span></span>
4. <span data-ttu-id="01c26-193">Введите эту команду и нажмите клавишу ВВОД:</span><span class="sxs-lookup"><span data-stu-id="01c26-193">Type this command, and then press Enter:</span></span>

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample1.cmd)]
5. <span data-ttu-id="01c26-194">Если вы планируете размещать в системе 64-разрядные веб-приложения в любой момент, необходимо также зарегистрировать 64-разрядную версию ASP.NET с IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-194">If you plan to host 64-bit web applications at any point, you should also register the 64-bit version of ASP.NET with IIS.</span></span> <span data-ttu-id="01c26-195">Для этого в окне командной строки перейдите в каталог **%WINDIR%\Microsoft.NET\Framework64\v4.0.30319** .</span><span class="sxs-lookup"><span data-stu-id="01c26-195">To do this, in the Command Prompt window, navigate to the **%WINDIR%\Microsoft.NET\Framework64\v4.0.30319** directory.</span></span>
6. <span data-ttu-id="01c26-196">Введите эту команду и нажмите клавишу ВВОД:</span><span class="sxs-lookup"><span data-stu-id="01c26-196">Type this command, and then press Enter:</span></span>

    [!code-console[Main](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/samples/sample2.cmd)]

<span data-ttu-id="01c26-197">Рекомендуется использовать Центр обновления Windows на этом этапе, чтобы скачать и установить все доступные обновления для новых продуктов и компонентов, которые вы установили.</span><span class="sxs-lookup"><span data-stu-id="01c26-197">As a good practice, use Windows Update again at this point to download and install any available updates for the new products and components you've installed.</span></span>

## <a name="configure-the-web-management-service"></a><span data-ttu-id="01c26-198">Настройка службы веб-управления</span><span class="sxs-lookup"><span data-stu-id="01c26-198">Configure the Web Management Service</span></span>

<span data-ttu-id="01c26-199">Теперь, когда вы установили все необходимое, следующим шагом является настройка службы веб-управления в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="01c26-199">Now that you've installed everything you need, the next step is to configure the Web Management Service in IIS.</span></span> <span data-ttu-id="01c26-200">На высоком уровне необходимо выполнить следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="01c26-200">At a high level, you'll need to complete these tasks:</span></span>

- <span data-ttu-id="01c26-201">Включите обычную проверку подлинности на уровне сервера.</span><span class="sxs-lookup"><span data-stu-id="01c26-201">Enable basic authentication at the server level.</span></span>
- <span data-ttu-id="01c26-202">Настройка службы веб-управления для приема удаленных подключений.</span><span class="sxs-lookup"><span data-stu-id="01c26-202">Configure the Web Management Service to accept remote connections.</span></span>
- <span data-ttu-id="01c26-203">Запустите службу веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-203">Start the Web Management Service.</span></span>
- <span data-ttu-id="01c26-204">Убедитесь, что установлены необходимые правила делегирования службы веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-204">Check that the required Web Management Service delegation rules are in place.</span></span>

<span data-ttu-id="01c26-205">**Настройка службы веб-управления**</span><span class="sxs-lookup"><span data-stu-id="01c26-205">**To configure the Web Management Service**</span></span>

1. <span data-ttu-id="01c26-206">В меню **Пуск** укажите пункт **Администрирование**, а затем выберите пункт **Диспетчер службы IIS (IIS)** .</span><span class="sxs-lookup"><span data-stu-id="01c26-206">On the **Start** menu, point to **Administrative Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>
2. <span data-ttu-id="01c26-207">В диспетчере служб IIS в области **подключения** щелкните узел сервера (например, **STAGEWEB1**).</span><span class="sxs-lookup"><span data-stu-id="01c26-207">In IIS Manager, in the **Connections** pane, click the server node (for example, **STAGEWEB1**).</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image3.png)
3. <span data-ttu-id="01c26-208">В центральной области в разделе **IIS**дважды щелкните **Проверка подлинности**.</span><span class="sxs-lookup"><span data-stu-id="01c26-208">In the center pane, under **IIS**, double-click **Authentication**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image20.png)
4. <span data-ttu-id="01c26-209">Щелкните правой кнопкой мыши **Обычная проверка подлинности**и выберите команду **включить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-209">Right-click **Basic Authentication**, and then click **Enable**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image5.png)
5. <span data-ttu-id="01c26-210">В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="01c26-210">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>
6. <span data-ttu-id="01c26-211">В центральной области в разделе **Управление**дважды щелкните **Служба управления**.</span><span class="sxs-lookup"><span data-stu-id="01c26-211">In the center pane, under **Management**, double-click **Management Service**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image6.png)
7. <span data-ttu-id="01c26-212">В центральной области выберите **включить удаленные соединения**.</span><span class="sxs-lookup"><span data-stu-id="01c26-212">In the center pane, select **Enable remote connections**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01c26-213">Если служба веб-управления уже запущена, ее необходимо сначала отключить.</span><span class="sxs-lookup"><span data-stu-id="01c26-213">If the Web Management Service is already running, you'll need to stop it first.</span></span>
8. <span data-ttu-id="01c26-214">На панели **действия** нажмите кнопку **запустить** , чтобы запустить службу веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-214">In the **Actions** pane, click **Start** to start the Web Management Service.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image7.png)
9. <span data-ttu-id="01c26-215">Если будет предложено сохранить параметры, нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="01c26-215">If you're prompted to save your settings, click **Yes**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01c26-216">Также может потребоваться настроить автоматический запуск службы.</span><span class="sxs-lookup"><span data-stu-id="01c26-216">You may also want to configure the service to start automatically.</span></span> <span data-ttu-id="01c26-217">Для этого откройте консоль службы, щелкните правой кнопкой мыши **Служба веб-управления**и выберите пункт **свойства**.</span><span class="sxs-lookup"><span data-stu-id="01c26-217">To do this, open the Services console, right-click **Web Management Service**, and then click **Properties**.</span></span> <span data-ttu-id="01c26-218">В раскрывающемся списке **Тип запуска** выберите **автоматически**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-218">In the **Startup type** dropdown list, select **Automatic**, and then click **OK**.</span></span>
10. <span data-ttu-id="01c26-219">В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="01c26-219">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>
11. <span data-ttu-id="01c26-220">В центральной области в разделе **Управление**дважды щелкните **делегирование службы управления**.</span><span class="sxs-lookup"><span data-stu-id="01c26-220">In the center pane, under **Management**, double-click **Management Service Delegation**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image8.png)
12. <span data-ttu-id="01c26-221">Убедитесь, что Центральная панель содержит набор правил.</span><span class="sxs-lookup"><span data-stu-id="01c26-221">Verify that the center pane contains a set of rules.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image9.png)

    <span data-ttu-id="01c26-222">Эти правила позволяют пользователям службы веб-управления с правами использовать различные поставщики веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="01c26-222">These rules allow authorized Web Management Service users to use various Web Deploy providers.</span></span> <span data-ttu-id="01c26-223">Например, для развертывания веб-приложений и содержимого в службах IIS с помощью обработчика веб-развертывание необходимо правило делегирования, которое позволяет всем пользователям службы веб-управления, прошедшим проверку подлинности, использовать поставщиков **контентпас** и **iisapp** (Последнее правило, которое можно увидеть на снимке экрана).</span><span class="sxs-lookup"><span data-stu-id="01c26-223">For example, to deploy web applications and content to IIS through the Web Deploy Handler, there must be a delegation rule that allows all authenticated Web Management Service users to use the **contentPath** and **iisApp** providers (the last rule that you can see in the screenshot).</span></span>

    <span data-ttu-id="01c26-224">Если вы установили продукты и компоненты в порядке, описанном в этом разделе, последняя версия веб-развертывание должна автоматически добавить все необходимые правила делегирования в службу веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-224">If you installed products and components in the order described in this topic, the latest version of Web Deploy should automatically add all the required delegation rules to the Web Management Service.</span></span> <span data-ttu-id="01c26-225">Если на странице делегирования службы управления не отображаются правила, необходимо создать их самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="01c26-225">If the Management Service Delegation page does not show any rules, you'll need to create them yourself.</span></span> <span data-ttu-id="01c26-226">Инструкции по выполнению этой задачи см. в разделе [Настройка обработчика веб-развертывания](https://go.microsoft.com/?linkid=9805124).</span><span class="sxs-lookup"><span data-stu-id="01c26-226">For instructions on how to do this, see [Configure the Web Deployment Handler](https://go.microsoft.com/?linkid=9805124).</span></span>
13. <span data-ttu-id="01c26-227">В области **подключения** снова щелкните узел сервера, чтобы вернуться к параметрам верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="01c26-227">In the **Connections** pane, click the server node again to return to the top-level settings.</span></span>

## <a name="create-and-configure-an-iis-website"></a><span data-ttu-id="01c26-228">Создание и Настройка веб-сайта IIS</span><span class="sxs-lookup"><span data-stu-id="01c26-228">Create and Configure an IIS Website</span></span>

<span data-ttu-id="01c26-229">Прежде чем можно будет развернуть веб-содержимое на сервере, необходимо создать и настроить веб-сайт IIS для размещения содержимого.</span><span class="sxs-lookup"><span data-stu-id="01c26-229">Before you can deploy web content to your server, you need to create and configure an IIS website to host the content.</span></span> <span data-ttu-id="01c26-230">Веб-развертывание может развертывать только веб-пакеты на существующем веб-сайте IIS; Он не может создать веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="01c26-230">Web Deploy can only deploy web packages to an existing IIS website; it can't create the website for you.</span></span> <span data-ttu-id="01c26-231">Кроме того, необходимо выполнить дополнительную настройку, позволяющую учетной записи без прав администратора развертывать содержимое удаленно.</span><span class="sxs-lookup"><span data-stu-id="01c26-231">You also need to do a little extra configuration to allow your non-administrator account to deploy content remotely.</span></span> <span data-ttu-id="01c26-232">На высоком уровне необходимо выполнить следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="01c26-232">At a high level, you'll need to complete these tasks:</span></span>

- <span data-ttu-id="01c26-233">Создайте папку в файловой системе для размещения содержимого.</span><span class="sxs-lookup"><span data-stu-id="01c26-233">Create a folder on the file system to host your content.</span></span>
- <span data-ttu-id="01c26-234">Создайте веб-сайт IIS для обслуживания содержимого и свяжите его с локальной папкой.</span><span class="sxs-lookup"><span data-stu-id="01c26-234">Create an IIS website to serve the content, and associate it with the local folder.</span></span>
- <span data-ttu-id="01c26-235">Предоставьте разрешения на чтение удостоверению пула приложений в локальной папке.</span><span class="sxs-lookup"><span data-stu-id="01c26-235">Grant read permissions to the application pool identity on the local folder.</span></span>
- <span data-ttu-id="01c26-236">Предоставьте необходимые разрешения IIS учетной записи домена, которая будет развертывать веб-приложение.</span><span class="sxs-lookup"><span data-stu-id="01c26-236">Grant the necessary IIS permissions to the domain account that will deploy your web application.</span></span>

<span data-ttu-id="01c26-237">Хотя ничто не мешает развертывать содержимое на веб-сайте по умолчанию в службах IIS, этот подход не рекомендуется использовать ни для тестов, ни для демонстрационных сценариев.</span><span class="sxs-lookup"><span data-stu-id="01c26-237">Although there's nothing stopping you from deploying content to the default website in IIS, this approach is not recommended for anything other than test or demonstration scenarios.</span></span> <span data-ttu-id="01c26-238">Для имитации рабочей среды следует создать новый веб-сайт IIS с параметрами, зависящими от требований приложения.</span><span class="sxs-lookup"><span data-stu-id="01c26-238">To simulate a production environment, you should create a new IIS website with settings that are specific to the requirements of your application.</span></span>

<span data-ttu-id="01c26-239">**Создание веб-сайта IIS**</span><span class="sxs-lookup"><span data-stu-id="01c26-239">**To create an IIS website**</span></span>

1. <span data-ttu-id="01c26-240">В локальной файловой системе создайте папку для хранения содержимого (например, **к:\демосите**).</span><span class="sxs-lookup"><span data-stu-id="01c26-240">On the local file system, create a folder to store your content (for example, **C:\DemoSite**).</span></span>
2. <span data-ttu-id="01c26-241">В меню **Пуск** укажите пункт **Администрирование**, а затем выберите пункт **Диспетчер службы IIS (IIS)** .</span><span class="sxs-lookup"><span data-stu-id="01c26-241">On the **Start** menu, point to **Administrative Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>
3. <span data-ttu-id="01c26-242">В диспетчере служб IIS в области **подключения** разверните узел сервера (например, **STAGEWEB1**).</span><span class="sxs-lookup"><span data-stu-id="01c26-242">In IIS Manager, in the **Connections** pane, expand the server node (for example, **STAGEWEB1**).</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image10.png)
4. <span data-ttu-id="01c26-243">Щелкните правой кнопкой мыши узел **сайты** и выберите команду **Добавить веб-сайт**.</span><span class="sxs-lookup"><span data-stu-id="01c26-243">Right-click the **Sites** node, and then click **Add Web Site**.</span></span>
5. <span data-ttu-id="01c26-244">В поле **имя сайта** введите имя веб-сайта IIS (например, **демосите**).</span><span class="sxs-lookup"><span data-stu-id="01c26-244">In the **Site name** box, type a name for the IIS website (for example, **DemoSite**).</span></span>
6. <span data-ttu-id="01c26-245">В поле **физический путь** введите (или перейдите к) путь к локальной папке (например, **к:\демосите**).</span><span class="sxs-lookup"><span data-stu-id="01c26-245">In the **Physical path** box, type (or browse to) the path to your local folder (for example, **C:\DemoSite**).</span></span>
7. <span data-ttu-id="01c26-246">В поле **порт** введите номер порта, на котором будет размещен веб-сайт (например, **85**).</span><span class="sxs-lookup"><span data-stu-id="01c26-246">In the **Port** box, type the port number on which you want to host the website (for example, **85**).</span></span>

    > [!NOTE]
    > <span data-ttu-id="01c26-247">Номера стандартных портов 80 для HTTP и 443 для HTTPS.</span><span class="sxs-lookup"><span data-stu-id="01c26-247">The standard port numbers are 80 for HTTP and 443 for HTTPS.</span></span> <span data-ttu-id="01c26-248">Однако при размещении этого веб-сайта на порту 80 необходимо будет закрыть веб-сайт по умолчанию, прежде чем можно будет получить доступ к сайту.</span><span class="sxs-lookup"><span data-stu-id="01c26-248">However, if you host this website on port 80, you'll need to stop the default website before you can access your site.</span></span>
8. <span data-ttu-id="01c26-249">Оставьте поле **имя узла** пустым, если не требуется настроить запись службы доменных имен (DNS) для веб-сайта, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-249">Leave the **Host name** box blank, unless you want to configure a Domain Name System (DNS) record for the website, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image11.png)

    > [!NOTE]
    > <span data-ttu-id="01c26-250">В рабочей среде вам, скорее всего, потребуется разместить веб-сайт через порт 80 и настроить заголовок узла вместе с соответствующими записями DNS.</span><span class="sxs-lookup"><span data-stu-id="01c26-250">In a production environment, you'll likely want to host your website on port 80 and configure a host header, together with matching DNS records.</span></span> <span data-ttu-id="01c26-251">Дополнительные сведения о настройке заголовков узлов в IIS 7 см. в разделе [Настройка заголовка узла для веб-сайта (IIS 7)](https://technet.microsoft.com/library/cc753195(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="01c26-251">For more information on configuring host headers in IIS 7, see [Configure a Host Header for a Web Site (IIS 7)](https://technet.microsoft.com/library/cc753195(WS.10).aspx).</span></span> <span data-ttu-id="01c26-252">Дополнительные сведения о роли DNS-сервера в Windows Server см. в разделе [Обзор DNS-сервера](https://technet.microsoft.com/library/cc770392.aspx) и [DNS-сервер](https://technet.microsoft.com/windowsserver/dd448607).</span><span class="sxs-lookup"><span data-stu-id="01c26-252">For more information on the DNS Server role in Windows Server, see [DNS Server Overview](https://technet.microsoft.com/library/cc770392.aspx) and [DNS Server](https://technet.microsoft.com/windowsserver/dd448607).</span></span>
9. <span data-ttu-id="01c26-253">В области **Действия** в разделе **Изменение веб-сайта**выберите пункт **Привязки**.</span><span class="sxs-lookup"><span data-stu-id="01c26-253">In the **Actions** pane, under **Edit Site**, click **Bindings**.</span></span>
10. <span data-ttu-id="01c26-254">В диалоговом окне " **привязки сайта** " нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-254">In the **Site Bindings** dialog box, click **Add**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image12.png)
11. <span data-ttu-id="01c26-255">В диалоговом окне **Добавление привязки сайта** задайте **IP-адрес** и **порт** в соответствии с существующей конфигурацией сайта.</span><span class="sxs-lookup"><span data-stu-id="01c26-255">In the **Add Site Binding** dialog box, set the **IP address** and **Port** to match your existing site configuration.</span></span>
12. <span data-ttu-id="01c26-256">В поле **имя узла** введите имя веб-сервера (например, **STAGEWEB1**) и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-256">In the **Host name** box, type the name of your web server (for example, **STAGEWEB1**), and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image13.png)

    > [!NOTE]
    > <span data-ttu-id="01c26-257">Первая привязка сайта позволяет локально получить доступ к сайту с помощью IP-адреса и порта или `http://localhost:85`.</span><span class="sxs-lookup"><span data-stu-id="01c26-257">The first site binding allows you to access the site locally using the IP address and port or `http://localhost:85`.</span></span> <span data-ttu-id="01c26-258">Вторая привязка сайта позволяет получить доступ к сайту с других компьютеров в домене, используя имя компьютера (например, http://stageweb1:85).</span><span class="sxs-lookup"><span data-stu-id="01c26-258">The second site binding allows you to access the site from other computers on the domain using the machine name (for example, http://stageweb1:85).</span></span>
13. <span data-ttu-id="01c26-259">В диалоговом окне **привязки сайта** нажмите кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="01c26-259">In the **Site Bindings** dialog box, click **Close**.</span></span>
14. <span data-ttu-id="01c26-260">В области **подключения** щелкните **Пулы приложений**.</span><span class="sxs-lookup"><span data-stu-id="01c26-260">In the **Connections** pane, click **Application Pools**.</span></span>
15. <span data-ttu-id="01c26-261">В области **Пулы приложений** щелкните правой кнопкой мыши имя пула приложений и выберите пункт **Основные параметры**.</span><span class="sxs-lookup"><span data-stu-id="01c26-261">In the **Application Pools** pane, right-click the name of your application pool, and then click **Basic Settings**.</span></span> <span data-ttu-id="01c26-262">По умолчанию имя пула приложений будет совпадать с именем вашего веб-сайта (например, **демосите**).</span><span class="sxs-lookup"><span data-stu-id="01c26-262">By default, the name of your application pool will match the name of your website (for example, **DemoSite**).</span></span>
16. <span data-ttu-id="01c26-263">В списке **версия .NET CLR** выберите **.NET CLR v 4.0.30319**и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-263">In the **.NET CLR version** list, select **.NET CLR v4.0.30319**, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image21.png)

    > [!NOTE]
    > <span data-ttu-id="01c26-264">Для примера решения требуется .NET Framework 4,0.</span><span class="sxs-lookup"><span data-stu-id="01c26-264">The sample solution requires .NET Framework 4.0.</span></span> <span data-ttu-id="01c26-265">Это не является обязательным для веб-развертывание в целом.</span><span class="sxs-lookup"><span data-stu-id="01c26-265">This is not a requirement for Web Deploy in general.</span></span>

<span data-ttu-id="01c26-266">Чтобы веб-сайт мог обслуживать содержимое, удостоверение пула приложений должно иметь разрешения на чтение для локальной папки, в которой хранится содержимое.</span><span class="sxs-lookup"><span data-stu-id="01c26-266">In order for your website to serve content, the application pool identity must have read permissions on the local folder that stores the content.</span></span> <span data-ttu-id="01c26-267">В IIS 7,5 пулы приложений работают с уникальным удостоверением пула приложений по умолчанию (в отличие от предыдущих версий IIS, где пулы приложений обычно выполнялись с использованием учетной записи сетевой службы).</span><span class="sxs-lookup"><span data-stu-id="01c26-267">In IIS 7.5, application pools run with a unique application pool identity by default (in contrast to previous versions of IIS, where application pools would typically run using the Network Service account).</span></span> <span data-ttu-id="01c26-268">Удостоверение пула приложений не является реальной учетной записью пользователя и не отображается ни в каких списках пользователей или групп&#x2014;, но и динамически создается при запуске пула приложений.</span><span class="sxs-lookup"><span data-stu-id="01c26-268">The application pool identity is not a real user account and does not show up on any lists of users or groups&#x2014;instead, it's created dynamically when the application pool is started.</span></span> <span data-ttu-id="01c26-269">Каждое удостоверение пула приложений добавляется в группу безопасности Local **IIS\_IUSR** в качестве скрытого элемента.</span><span class="sxs-lookup"><span data-stu-id="01c26-269">Each application pool identity is added to the local **IIS\_IUSRS** security group as a hidden item.</span></span>

<span data-ttu-id="01c26-270">Чтобы предоставить разрешения удостоверению пула приложений для файла или папки, можно использовать два варианта:</span><span class="sxs-lookup"><span data-stu-id="01c26-270">To grant permissions to an application pool identity on a file or folder, you have two options:</span></span>

- <span data-ttu-id="01c26-271">Назначьте разрешения для удостоверения пула приложений напрямую, используя формат <strong>IIS AppPool\</strong ><em>[имя пула приложений]</em>(например, <strong>IIS апппул\демосите</strong>).</span><span class="sxs-lookup"><span data-stu-id="01c26-271">Assign permissions to the application pool identity directly, using the format <strong>IIS AppPool\</strong><em>[application pool name]</em>(for example, <strong>IIS AppPool\DemoSite</strong>).</span></span>
- <span data-ttu-id="01c26-272">Назначьте разрешения группе **IIS\_IUSR** .</span><span class="sxs-lookup"><span data-stu-id="01c26-272">Assign permissions to the **IIS\_IUSRS** group.</span></span>

<span data-ttu-id="01c26-273">Наиболее распространенным подходом является назначение разрешений локальной группе **IIS\_IUSR** , так как этот подход позволяет изменять пулы приложений без перенастройки разрешений файловой системы.</span><span class="sxs-lookup"><span data-stu-id="01c26-273">The most common approach is to assign permissions to the local **IIS\_IUSRS** group, because this approach lets you change application pools without reconfiguring file system permissions.</span></span> <span data-ttu-id="01c26-274">Следующая процедура использует этот подход на основе группы.</span><span class="sxs-lookup"><span data-stu-id="01c26-274">The next procedure uses this group-based approach.</span></span>

> [!NOTE]
> <span data-ttu-id="01c26-275">Дополнительные сведения о удостоверениях пула приложений в IIS 7,5 см. в разделе [удостоверения пула приложений](https://go.microsoft.com/?linkid=9805123).</span><span class="sxs-lookup"><span data-stu-id="01c26-275">For more information on application pool identities in IIS 7.5, see [Application Pool Identities](https://go.microsoft.com/?linkid=9805123).</span></span>

<span data-ttu-id="01c26-276">**Настройка разрешений папки для веб-сайта IIS**</span><span class="sxs-lookup"><span data-stu-id="01c26-276">**To configure folder permissions for an IIS website**</span></span>

1. <span data-ttu-id="01c26-277">В проводнике найдите расположение локальной папки.</span><span class="sxs-lookup"><span data-stu-id="01c26-277">In Windows Explorer, browse to the location of your local folder.</span></span>
2. <span data-ttu-id="01c26-278">Щелкните правой кнопкой мыши папку и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="01c26-278">Right-click the folder, and then click **Properties**.</span></span>
3. <span data-ttu-id="01c26-279">На вкладке **Безопасность** нажмите кнопку **изменить**, а затем нажмите кнопку **добавить**.</span><span class="sxs-lookup"><span data-stu-id="01c26-279">On the **Security** tab, click **Edit**, and then click **Add**.</span></span>
4. <span data-ttu-id="01c26-280">Щелкните **расположения**.</span><span class="sxs-lookup"><span data-stu-id="01c26-280">Click **Locations**.</span></span> <span data-ttu-id="01c26-281">В диалоговом окне **расположения** выберите локальный сервер и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-281">In the **Locations** dialog box, select the local server, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image15.png)
5. <span data-ttu-id="01c26-282">В диалоговом окне **Выбор пользователей или групп** введите **IIS\_IUSR**, щелкните **Проверить имена**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-282">In the **Select Users or Groups** dialog box, type **IIS\_IUSRS**, click **Check Names**, and then click **OK**.</span></span>
6. <span data-ttu-id="01c26-283">В диалоговом окне <strong>разрешения для</strong><em>[имя папки]</em> Обратите внимание, что новой группе назначено разрешение <strong>Чтение &amp; выполнение</strong>, <strong>список содержимого папки</strong>и разрешения на <strong>Чтение</strong> по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="01c26-283">In the <strong>Permissions for</strong><em>[folder name]</em> dialog box, notice that the new group has been assigned the <strong>Read &amp; execute</strong>, <strong>List folder contents</strong>, and <strong>Read</strong> permissions by default.</span></span> <span data-ttu-id="01c26-284">Оставьте это без изменений и нажмите кнопку <strong>ОК</strong>.</span><span class="sxs-lookup"><span data-stu-id="01c26-284">Leave this unchanged and click <strong>OK</strong>.</span></span>
7. <span data-ttu-id="01c26-285">Нажмите кнопку <strong>ОК</strong> , чтобы закрыть диалоговое окно<strong>Свойства</strong> <em>[имя папки]</em>.</span><span class="sxs-lookup"><span data-stu-id="01c26-285">Click <strong>OK</strong> to close the <em>[folder name]</em><strong>Properties</strong> dialog box.</span></span>

<span data-ttu-id="01c26-286">В качестве конечной задачи необходимо предоставить соответствующие разрешения пользователю без прав администратора, учетные данные которого будут использоваться для развертывания содержимого.</span><span class="sxs-lookup"><span data-stu-id="01c26-286">As a final task, you must grant the appropriate permissions to the non-administrator user whose credentials you'll use to deploy content.</span></span> <span data-ttu-id="01c26-287">Этот пользователь должен иметь разрешения на удаленное развертывание содержимого на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="01c26-287">This user requires the permissions to deploy content remotely to your website.</span></span>

<span data-ttu-id="01c26-288">**Настройка разрешений веб-сайта IIS для пользователя домена без прав администратора**</span><span class="sxs-lookup"><span data-stu-id="01c26-288">**To configure IIS website permissions for a non-administrator domain user**</span></span>

1. <span data-ttu-id="01c26-289">В диспетчере служб IIS в области **подключения** щелкните правой кнопкой мыши узел веб-сайта (например, **демосите**), наведите указатель на пункт **развернуть**и выберите пункт **Настройка веб-развертывание публикации**.</span><span class="sxs-lookup"><span data-stu-id="01c26-289">In IIS Manager, in the **Connections** pane, right-click your website node (for example, **DemoSite**), point to **Deploy**, and then click **Configure Web Deploy Publishing**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image16.png)
2. <span data-ttu-id="01c26-290">В диалоговом окне **Настройка публикации веб-развертывание** в правой части списка **выберите пользователя для предоставления разрешений публикации** нажмите кнопку с многоточием.</span><span class="sxs-lookup"><span data-stu-id="01c26-290">In the **Configure Web Deploy Publishing** dialog box, to the right of the **Select a user to give publishing permissions** list, click the ellipsis button.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image17.png)
3. <span data-ttu-id="01c26-291">В диалоговом окне **Разрешить пользователя** введите домен и имя пользователя учетной записи, которую вы хотите использовать для развертывания содержимого, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="01c26-291">In the **Allow User** dialog box, type the domain and user name of the account you want to use to deploy content, and then click **OK**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image18.png)
4. <span data-ttu-id="01c26-292">В диалоговом окне **Настройка публикации веб-развертывание** нажмите кнопку **Настройка**.</span><span class="sxs-lookup"><span data-stu-id="01c26-292">In the **Configure Web Deploy Publishing** dialog box, click **Setup**.</span></span>

    ![](configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler/_static/image19.png)

    > [!NOTE]
    > <span data-ttu-id="01c26-293">Эта операция выполняет две ключевые функции за один шаг.</span><span class="sxs-lookup"><span data-stu-id="01c26-293">This operation performs two key functions in one step.</span></span> <span data-ttu-id="01c26-294">Во-первых, он предоставляет пользователю разрешение на удаленное изменение веб-сайта с помощью службы Web Management в соответствии с правилами делегирования, которые вы рассматривали в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="01c26-294">First, it grants the user permission to modify the website remotely through the Web Management Service, according to the delegation rules you examined in the previous section.</span></span> <span data-ttu-id="01c26-295">Во-вторых, он предоставляет пользователю полный контроль над папкой исходного кода, что позволяет пользователю добавлять, изменять и задавать разрешения на доступ к содержимому веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="01c26-295">Second, it grants the user full control of the source folder for the website, which allows the user to add, modify, and set permissions on the website content.</span></span>
5. <span data-ttu-id="01c26-296">В диалоговом окне **Настройка публикации веб-развертывание** нажмите кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="01c26-296">In the **Configure Web Deploy Publishing** dialog box, click **Close**.</span></span>

## <a name="configure-firewall-exceptions"></a><span data-ttu-id="01c26-297">Настройка исключений брандмауэра</span><span class="sxs-lookup"><span data-stu-id="01c26-297">Configure Firewall Exceptions</span></span>

<span data-ttu-id="01c26-298">По умолчанию служба IIS Web Management Service прослушивает TCP-порт 8172.</span><span class="sxs-lookup"><span data-stu-id="01c26-298">By default, the IIS Web Management Service listens on TCP port 8172.</span></span> <span data-ttu-id="01c26-299">Если на веб-сервере включен брандмауэр Windows, необходимо создать новое правило для входящего трафика, разрешающее трафик TCP через порт 8172 (весь исходящий трафик по умолчанию разрешен в брандмауэре Windows).</span><span class="sxs-lookup"><span data-stu-id="01c26-299">If Windows Firewall is enabled on your web server, you'll need to create a new inbound rule to allow TCP traffic on port 8172 (all outbound traffic is permitted by default in Windows Firewall).</span></span> <span data-ttu-id="01c26-300">При использовании брандмауэра стороннего производителя необходимо создать правила, разрешающие трафик.</span><span class="sxs-lookup"><span data-stu-id="01c26-300">If you use a third-party firewall, you'll need to create rules to allow traffic.</span></span>

| <span data-ttu-id="01c26-301">Направление</span><span class="sxs-lookup"><span data-stu-id="01c26-301">Direction</span></span> | <span data-ttu-id="01c26-302">Из порта</span><span class="sxs-lookup"><span data-stu-id="01c26-302">From Port</span></span> | <span data-ttu-id="01c26-303">В порт</span><span class="sxs-lookup"><span data-stu-id="01c26-303">To Port</span></span> | <span data-ttu-id="01c26-304">Тип порта</span><span class="sxs-lookup"><span data-stu-id="01c26-304">Port Type</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="01c26-305">Трафика</span><span class="sxs-lookup"><span data-stu-id="01c26-305">Inbound</span></span> | <span data-ttu-id="01c26-306">Любая</span><span class="sxs-lookup"><span data-stu-id="01c26-306">Any</span></span> | <span data-ttu-id="01c26-307">8172</span><span class="sxs-lookup"><span data-stu-id="01c26-307">8172</span></span> | <span data-ttu-id="01c26-308">TCP</span><span class="sxs-lookup"><span data-stu-id="01c26-308">TCP</span></span> |
| <span data-ttu-id="01c26-309">Ходящую</span><span class="sxs-lookup"><span data-stu-id="01c26-309">Outbound</span></span> | <span data-ttu-id="01c26-310">8172</span><span class="sxs-lookup"><span data-stu-id="01c26-310">8172</span></span> | <span data-ttu-id="01c26-311">Любая</span><span class="sxs-lookup"><span data-stu-id="01c26-311">Any</span></span> | <span data-ttu-id="01c26-312">TCP</span><span class="sxs-lookup"><span data-stu-id="01c26-312">TCP</span></span> |

<span data-ttu-id="01c26-313">Дополнительные сведения о настройке правил в брандмауэре Windows см. в разделе [Настройка правил брандмауэра](https://technet.microsoft.com/library/dd448559(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="01c26-313">For more information on configuring rules in Windows Firewall, see [Configuring Firewall Rules](https://technet.microsoft.com/library/dd448559(WS.10).aspx).</span></span> <span data-ttu-id="01c26-314">Для сторонних брандмауэров обратитесь к документации по продукту.</span><span class="sxs-lookup"><span data-stu-id="01c26-314">For third-party firewalls, please consult your product documentation.</span></span>

## <a name="conclusion"></a><span data-ttu-id="01c26-315">Заключение</span><span class="sxs-lookup"><span data-stu-id="01c26-315">Conclusion</span></span>

<span data-ttu-id="01c26-316">Теперь веб-сервер должен быть готов к приему удаленных развертываний обработчика веб-развертывание с помощью службы веб-управления.</span><span class="sxs-lookup"><span data-stu-id="01c26-316">Your web server should now be ready to accept remote deployments to the Web Deploy Handler through the Web Management Service.</span></span> <span data-ttu-id="01c26-317">Перед развертыванием веб-приложения на сервере может потребоваться проверить следующие ключевые моменты:</span><span class="sxs-lookup"><span data-stu-id="01c26-317">Before you attempt to deploy a web application to the server, you may want to check these key points:</span></span>

- <span data-ttu-id="01c26-318">Включена ли обычная проверка подлинности на уровне сервера в службах IIS?</span><span class="sxs-lookup"><span data-stu-id="01c26-318">Have you enabled basic authentication at the server level in IIS?</span></span>
- <span data-ttu-id="01c26-319">Включены ли удаленные подключения к службе веб-управления?</span><span class="sxs-lookup"><span data-stu-id="01c26-319">Have you enabled remote connections to the Web Management Service?</span></span>
- <span data-ttu-id="01c26-320">Вы начали работу со службой веб-управления?</span><span class="sxs-lookup"><span data-stu-id="01c26-320">Have you started the Web Management Service?</span></span>
- <span data-ttu-id="01c26-321">Существуют ли правила делегирования службы управления?</span><span class="sxs-lookup"><span data-stu-id="01c26-321">Are there management service delegation rules in place?</span></span>
- <span data-ttu-id="01c26-322">Имеет ли удостоверение пула приложений доступ на чтение к исходной папке веб-сайта?</span><span class="sxs-lookup"><span data-stu-id="01c26-322">Does the application pool identity have read access to the source folder for your website?</span></span>
- <span data-ttu-id="01c26-323">Имеют ли учетная запись пользователя без прав администратора разрешения уровня сайта в службах IIS?</span><span class="sxs-lookup"><span data-stu-id="01c26-323">Does the non-administrator user account have site-level permissions in IIS?</span></span>
- <span data-ttu-id="01c26-324">Разрешает ли брандмауэр входящие подключения к серверу через TCP-порт 8172?</span><span class="sxs-lookup"><span data-stu-id="01c26-324">Does your firewall allow incoming connections to the server on TCP port 8172?</span></span>

## <a name="further-reading"></a><span data-ttu-id="01c26-325">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="01c26-325">Further Reading</span></span>

<span data-ttu-id="01c26-326">Инструкции по настройке файлов проекта пользовательских Microsoft Build Engine (MSBuild) для развертывания веб-пакетов в обработчике веб-развертывание см. в разделе [Настройка свойств развертывания для целевой среды](configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="01c26-326">For guidance on how to configure custom Microsoft Build Engine (MSBuild) project files to deploy web packages to the Web Deploy Handler, see [Configuring Deployment Properties for a Target Environment](configuring-deployment-properties-for-a-target-environment.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="01c26-327">[Назад](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)
> [Вперед](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="01c26-327">[Previous](configuring-a-web-server-for-web-deploy-publishing-remote-agent.md)
[Next](configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md)</span></span>
