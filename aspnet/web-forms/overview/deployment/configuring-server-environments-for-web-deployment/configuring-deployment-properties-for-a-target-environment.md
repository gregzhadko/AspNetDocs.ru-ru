---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Настройка свойств развертывания для целевой среды | Документация Майкрософт
author: jrjlee
description: В этом разделе описываются способы настройки свойства, относящиеся к среде, чтобы развернуть пример решения диспетчера контактов в конкретной среде...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 74fc0f4cb7d3ed7d1ef091cdb8fa829091af5a7a
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59388690"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="aa0b8-103">Настройка свойств развертывания для целевой среды</span><span class="sxs-lookup"><span data-stu-id="aa0b8-103">Configuring Deployment Properties for a Target Environment</span></span>

<span data-ttu-id="aa0b8-104">по [Джейсон Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="aa0b8-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="aa0b8-105">Загрузить PDF-файл</span><span class="sxs-lookup"><span data-stu-id="aa0b8-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="aa0b8-106">В этом разделе описываются способы настройки свойства, относящиеся к среде, чтобы развернуть пример решения диспетчера контактов в конкретной среде.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>


<span data-ttu-id="aa0b8-107">Этот раздел является частью серии учебников, исходя из требования к развертыванию enterprise вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) решение&#x2014;для представления веб-приложения с более реалистичные уровень сложности, включая приложения ASP.NET MVC 3, Windows Communication Служба Foundation (WCF) и проект базы данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="aa0b8-108">Метод развертывания в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о процессе построения](../web-deployment-in-the-enterprise/understanding-the-build-process.md), в которой процесс построения управляется двумя файлы проекта&#x2014;один с Создание инструкции, которые применяются для каждой целевой среде и содержащего параметры построения и развертывания для конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="aa0b8-109">Во время сборки файл проекта для конкретной среды объединяется в файл проекта независимой от среды, чтобы полный набор инструкций построения.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="aa0b8-110">Общие сведения о процессе</span><span class="sxs-lookup"><span data-stu-id="aa0b8-110">Process Overview</span></span>

<span data-ttu-id="aa0b8-111">Файл проекта, которое будет использоваться для создания и развертывания решения диспетчера контактов разбивается на два физических файлов:</span><span class="sxs-lookup"><span data-stu-id="aa0b8-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="aa0b8-112">Содержащий универсальный сборки, параметры и инструкции ( *Publish.proj* файла).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="aa0b8-113">Параметры, содержащей конкретной среды сборки (*Env Dev.proj*, *Env Stage.proj*, и так далее).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="aa0b8-114">Во время сборки, соответствующий конкретной среды файл проекта добавляются в universal *Publish.proj* файл, чтобы полный набор инструкций построения.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="aa0b8-115">Создание или Настройка файлов проекта для конкретной среды с параметрами, которые описывают сценария развертывания можно настроить развертывание для определенных целевых средах.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="aa0b8-116">Множество этих значений, определяются как настроено целевой среды&#x2014;в частности, ли целевой веб-сервер настроен для использования службы агента веб-развертывания (удаленный агент) или веб-развертывание обработчик.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="aa0b8-117">Дополнительные сведения об этих подходах и рекомендации по выбору правильного подхода для конкретной среды, см. в разделе [Выбор оптимального подхода для веб-развертывания справа](choosing-the-right-approach-to-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="aa0b8-118">[Сценарий Contact Manager](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) требуется два файла проекта для конкретной среды:</span><span class="sxs-lookup"><span data-stu-id="aa0b8-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="aa0b8-119">Развертывание в тестовой среде разработчика (*Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="aa0b8-120">Тестовая среда разработки настроена для приема удаленных развертываний с помощью удаленного агента, как описано в разделе [сценария: Настройка среды тестирования для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="aa0b8-121">Этот файл должен предоставить удаленный агент, адрес конечной точки, а также параметры относящиеся к размещению, например строки подключения и конечных точек службы.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="aa0b8-122">Развертывание в промежуточной среде (*Env Stage.proj*).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="aa0b8-123">Промежуточная среда настроена для принятия удаленных развертываний с помощью веб-обработчик развертывания, как описано в разделе [сценария: Настройка промежуточной среды для веб-развертывания](scenario-configuring-a-staging-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="aa0b8-124">Этот файл должен предоставлять адрес конечной точки веб-развертывание обработчик, а также параметры, относящиеся к размещению как строки подключения и конечные точки службы.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="aa0b8-125">Это важно отметить, что параметры, настроенные в файле проекта для конкретной среды не влияют на содержимое веб-пакета, сам&#x2014;вместо этого они управляют развертыванием пакета и какие значения параметров приведены в том случае, если включен пакет извлечь.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="aa0b8-126">Вы импортируете веб-пакета в рабочей среде вручную, как описано в разделе [сценария: Настройке рабочей среды для веб-развертывания](scenario-configuring-a-production-environment-for-web-deployment.md) и [вручную Установка веб-пакеты](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), поэтому неважно, какие параметры, используемые в файле проекта для конкретной среды при создании пакета.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="aa0b8-127">Диспетчер Internet Information Services (IIS) предложит ввести любой параметризованными значениями, например строки подключения и конечных точек службы, при импорте пакета.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="aa0b8-128">Чтобы развернуть решение диспетчера контактов в целевой среде, можно либо настроить этот файл или использовать его как шаблон и создать собственный файл.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="aa0b8-129">**Чтобы настроить параметры конкретной среды развертывания для решения диспетчера контактов**</span><span class="sxs-lookup"><span data-stu-id="aa0b8-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="aa0b8-130">Откройте решение ContactManager WCF в Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="aa0b8-131">В **обозревателе решений** окне разверните **публикации** папку, разверните **EnvConfig** папку и дважды щелкните **Env-Dev.proj**.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="aa0b8-132">Замените значения свойств в *Env Dev.proj* файл правильными значениями для тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="aa0b8-133">В таблице, после этой процедуры приведены дополнительные сведения по каждой из этих свойств.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="aa0b8-134">Сохранить результаты работы, а затем закройте *Env Dev.proj* файл.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="aa0b8-135">Выбор свойства развертывания, наиболее подходящий</span><span class="sxs-lookup"><span data-stu-id="aa0b8-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="aa0b8-136">Эта таблица описывает назначение каждого свойства в файле проекта для конкретной среды примера *Env Dev.proj*и даны некоторые рекомендации по значениям, необходимо предоставить.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>


|                                                        <span data-ttu-id="aa0b8-137">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="aa0b8-137">Property Name</span></span>                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="aa0b8-138">Подробные сведения</span><span class="sxs-lookup"><span data-stu-id="aa0b8-138">Details</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <span data-ttu-id="aa0b8-139"><strong>MSDeployComputerName</strong> имя конечной точки сервера или службы веб-назначения.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-139"><strong>MSDeployComputerName</strong> The name of the destination web server or service endpoint.</span></span>               |                                                                                                                                                                                                                                              <span data-ttu-id="aa0b8-140">Если вы развертываете к службе удаленного агента на веб-сервере назначения, можно указать имя конечного компьютера (например, <strong>TESTWEB1</strong> или <strong>TESTWEB1.fabrikam.net</strong>), или указать удаленный агент конечной точки (например, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, <strong>TESTWEB1</strong> or <strong>TESTWEB1.fabrikam.net</strong>), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="aa0b8-141">Развертывание выполняется так же, как в каждом конкретном случае.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="aa0b8-142">Если вы развертываете в веб-развертывание обработчик на веб-сервере назначения, следует указывать конечную точку службы и имя веб-сайт IIS в качестве параметра строки запроса (например, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span>                                                                                                                                                                                                                                              |
|         <span data-ttu-id="aa0b8-143"><strong>MSDeployAuth</strong> метод, который веб-развертывания следует использовать для проверки подлинности к удаленному компьютеру.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-143"><strong>MSDeployAuth</strong> The method that Web Deploy should use to authenticate to the remote computer.</span></span>          |                                                                                                                                                                                                                          <span data-ttu-id="aa0b8-144">Это должно быть присвоено <strong>NTLM</strong> или <strong>основные</strong>.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-144">This should be set to <strong>NTLM</strong> or <strong>Basic</strong>.</span></span> <span data-ttu-id="aa0b8-145">Как правило, вы используете <strong>NTLM</strong> при развертывании в службу удаленного агента и <strong>основные</strong> при развертывании для веб-развертывание обработчик.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-145">Typically, you'll use <strong>NTLM</strong> if you're deploying to the remote agent service and <strong>Basic</strong> if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="aa0b8-146">При использовании обычной проверки подлинности, необходимо также указать имя пользователя и пароль, которая должна олицетворяться средство IIS веб-развертывания (веб-развертывание) для выполнения развертывания.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="aa0b8-147">В данном случае эти значения предоставляются через <strong>MSDeployUsername</strong> и <strong>MSDeployPassword</strong> свойства.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-147">In this example, these values are provided through the <strong>MSDeployUsername</strong> and <strong>MSDeployPassword</strong> properties.</span></span> <span data-ttu-id="aa0b8-148">Если вы используете проверку подлинности NTLM, можно исключить эти свойства или оставить их пустыми.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="aa0b8-149"><strong>MSDeployUsername</strong> при использовании обычной проверки подлинности веб-развертывания будет использовать эту учетную запись на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-149"><strong>MSDeployUsername</strong> If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="aa0b8-150">Это должно задаваться в виде <em>домена</em>\*имя пользователя \* (например, <strong>FABRIKAM\matt</strong>).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-150">This should take the form <em>DOMAIN</em>\*username\* (for example, <strong>FABRIKAM\matt</strong>).</span></span> <span data-ttu-id="aa0b8-151">Это значение используется только в том случае, если задать обычную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="aa0b8-152">Если вы используете проверку подлинности NTLM, свойство может быть опущено.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="aa0b8-153">Если значение задано, оно будет игнорироваться.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-153">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="aa0b8-154"><strong>MSDeployPassword</strong> при использовании обычной проверки подлинности веб-развертывания этот пароль будет использоваться на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-154"><strong>MSDeployPassword</strong> If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="aa0b8-155">Это пароль для учетной записи пользователя, указанной в <strong>MSDeployUsername</strong> свойство.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-155">This is the password for the user account you specified in the <strong>MSDeployUsername</strong> property.</span></span> <span data-ttu-id="aa0b8-156">Это значение используется только в том случае, если задать обычную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="aa0b8-157">Если вы используете проверку подлинности NTLM, свойство может быть опущено.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="aa0b8-158">Если значение задано, оно будет игнорироваться.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-158">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <span data-ttu-id="aa0b8-159"><strong>ContactManagerIisPath</strong> путь IIS, на котором вы хотите развернуть приложение диспетчера контактов MVC.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-159"><strong>ContactManagerIisPath</strong> The IIS path on which you want to deploy the Contact Manager MVC application.</span></span>     |                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="aa0b8-160">Это должно содержать путь, как оно отображается в диспетчере служб IIS в форме [<em>имя веб-сайта IIS</em>] / [<em>web</em><em>имя_приложения</em>].</span><span class="sxs-lookup"><span data-stu-id="aa0b8-160">This should be the path as it appears in IIS Manager, in the form [<em>IIS website name</em>]/[<em>web</em><em>application name</em>].</span></span> <span data-ttu-id="aa0b8-161">Помните, что веб-сайт IIS должно существовать до развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="aa0b8-162">Например если вы создали на веб-сайт IIS с именем DemoSite, можно указать путь IIS для приложения MVC как DemoSite/ContactManager.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span>                                                                                                                                                                                                                                                                                                                                                                        |
|   <span data-ttu-id="aa0b8-163"><strong>ContactManagerServiceIisPath</strong> путь IIS, на котором требуется выполнить развертывание службы WCF диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-163"><strong>ContactManagerServiceIisPath</strong> The IIS path on which you want to deploy the Contact Manager WCF service.</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="aa0b8-164">Например, если вы создали на веб-сайт IIS с именем DemoSite, можно указать путь IIS для службы WCF, поскольку <strong>DemoSite/ContactManagerService</strong>.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as <strong>DemoSite/ContactManagerService</strong>.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <span data-ttu-id="aa0b8-165"><strong>ContactManagerTargetUrl</strong> URL-адрес, по которому можно связаться со службой WCF.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-165"><strong>ContactManagerTargetUrl</strong> The URL at which the WCF service can be reached.</span></span>                   |                                                                                                                                                     <span data-ttu-id="aa0b8-166">Это будет иметь вид [<em>URL-адрес корневого веб-сайта IIS</em>] / [<em>имя приложения службы</em>] / [<em>конечная точка службы</em>].</span><span class="sxs-lookup"><span data-stu-id="aa0b8-166">This will take the form [<em>IIS website root URL</em>]/[<em>service application name</em>]/[<em>service endpoint</em>].</span></span> <span data-ttu-id="aa0b8-167">Например, если вы создали веб-сайт IIS на порту 85, URL-адрес потребуется форме `http://localhost:85/ContactManagerService/ContactService.svc`.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="aa0b8-168">Помните, что MVC-приложения и службы WCF развертываются на том же сервере.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="aa0b8-169">Таким образом этот URL-адрес осуществляется только с компьютера, на котором он установлен.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="aa0b8-170">По этой причине лучше использовать localhost или IP-адрес, а не имя компьютера или заголовок узла, в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="aa0b8-171">Если вы используете имя компьютера или заголовок узла, [проверки замыкания на себя](https://go.microsoft.com/?linkid=9805131) функция безопасности в службах IIS может заблокировать URL-адрес и возвращают <strong>HTTP 401.1 - доступ запрещен</strong> ошибки.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an <strong>HTTP 401.1 - Unauthorized</strong> error.</span></span>                                                                                                                                                     |
|                  <span data-ttu-id="aa0b8-172"><strong>CmDatabaseConnectionString</strong> строку подключения для сервера базы данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-172"><strong>CmDatabaseConnectionString</strong> The connection string for the database server.</span></span>                  | <span data-ttu-id="aa0b8-173">Строка подключения определяет, как учетные данные, которые будут использовать средство VSDBCMD для связи с сервером базы данных и создания базы данных и учетные данные, пул веб-сервера приложений будет использоваться для связи с сервером базы данных и взаимодействовать с базой данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="aa0b8-174">По сути имеется два варианта здесь.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-174">Essentially you have two choices here.</span></span> <span data-ttu-id="aa0b8-175">Можно указать <strong>Integrated Security = true</strong>, в этом случае используется встроенная проверка подлинности Windows: <strong>Источник данных = TESTDB1; Integrated Security = true</strong> в этом случае базы данных создается с использованием учетных данных пользователя, который запускает исполняемый файл VSDBCMD и приложение будет обращаться к базе данных с использованием удостоверения машины веб-сервера Учетная запись.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-175">You can specify <strong>Integrated Security=true</strong>, in which case integrated Windows authentication is used: <strong>Data Source=TESTDB1;Integrated Security=true</strong> In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="aa0b8-176">Кроме того можно указать имя пользователя и пароль учетной записи SQL Server.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="aa0b8-177">В этом случае VSDBCMD, чтобы создать базу данных и пулом приложений для взаимодействия с базой данных, используются учетные данные SQL Server: <strong>Источник данных = TESTDB1; Идентификатор пользователя = ASqlUser; Пароль = Pa$ $w0rd</strong> пошаговые руководства в этом разделе предполагается, вы сможете использовать встроенную проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: <strong>Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd</strong> The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
|        <span data-ttu-id="aa0b8-178"><strong>CmTargetDatabase</strong> имя, назначаемое базы данных, вы создадите на сервере базы данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-178"><strong>CmTargetDatabase</strong> The name you want to give the database you'll create on the database server.</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="aa0b8-179">Значение, которые вы указываете добавляется средство VSDBCMD команды как параметр.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="aa0b8-180">Он также используется для создания строки подключения целиком, пул приложений веб-сервера можно использовать для взаимодействия с базой данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<span data-ttu-id="aa0b8-181">Эти примеры показывают, как можно настроить эти свойства для конкретных сценариев развертывания.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="aa0b8-182">Пример 1&#x2014;развертывание в службе удаленного агента</span><span class="sxs-lookup"><span data-stu-id="aa0b8-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="aa0b8-183">В этом примере:</span><span class="sxs-lookup"><span data-stu-id="aa0b8-183">In this example:</span></span>

- <span data-ttu-id="aa0b8-184">Вы развертываете к службе удаленного агента на TESTWEB1.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="aa0b8-185">Вы указываете веб-развертывание для использования проверки подлинности NTLM.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="aa0b8-186">Веб-развертывание будет выполняться с использованием учетных данных, которая использовалась для вызова Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="aa0b8-187">Вы используете встроенную проверку подлинности для развертывания **ContactManager** базу данных TESTDB1.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="aa0b8-188">Базы данных будут развернуты с использованием учетных данных, которая использовалась для вызова MSBuild.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]


### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="aa0b8-189">Пример 2&#x2014;развертывание в веб-развертывание обработчика конечной точки</span><span class="sxs-lookup"><span data-stu-id="aa0b8-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="aa0b8-190">В этом примере:</span><span class="sxs-lookup"><span data-stu-id="aa0b8-190">In this example:</span></span>

- <span data-ttu-id="aa0b8-191">Вы развертываете в конечную точку службы веб-развертывание обработчик на STAGEWEB1.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="aa0b8-192">Вы указываете веб-развертывание для использования обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="aa0b8-193">Вы указываете, что веб-развертывания должно олицетворять учетную запись FABRIKAM\stagingdeployer на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="aa0b8-194">Вы используете проверку подлинности SQL Server для развертывания **ContactManager** STAGEDB1 базы данных.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]


## <a name="conclusion"></a><span data-ttu-id="aa0b8-195">Заключение</span><span class="sxs-lookup"><span data-stu-id="aa0b8-195">Conclusion</span></span>

<span data-ttu-id="aa0b8-196">На этом этапе файлы проекта полностью настроены на создание и развертывание решения диспетчера контактов в один или несколько сред назначения.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="aa0b8-197">Чтобы использовать эти файлы проекта в рамках процесса одношаговой, воспроизводимые развертывания, необходимо выполнить *Publish.proj* файлов с помощью MSBuild и передайте расположение файла проекта для конкретной среды как параметр.</span><span class="sxs-lookup"><span data-stu-id="aa0b8-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="aa0b8-198">Это можно сделать разными способами:</span><span class="sxs-lookup"><span data-stu-id="aa0b8-198">You can do this in various ways:</span></span>

- <span data-ttu-id="aa0b8-199">Общие сведения о MSBuild и общие сведения о файлах пользовательских проектов, см. в разделе [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="aa0b8-200">Сведения о том, как формулировать команды MSBuild, которая выполняет файлы пользовательского проекта, см. в разделе [развертывание веб-пакеты](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="aa0b8-201">Сведения о том, как внедрить MSBuild команды в командный файл один шаг, повторяемых развертываний, см. в разделе [Создание и запуск командного файла развертывания](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="aa0b8-202">Сведения о том, как выполнить файлы пользовательского проекта из Team Build, см. в разделе [Создание определения сборки, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="aa0b8-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="aa0b8-203">Назад</span><span class="sxs-lookup"><span data-stu-id="aa0b8-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
