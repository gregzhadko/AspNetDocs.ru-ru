---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Настройка свойств развертывания для целевой среды | Документация Майкрософт
author: jrjlee
description: В этом разделе описывается настройка свойств конкретной среды для развертывания образца решения диспетчера контактов в определенной целевой среде...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78516810"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="981d6-103">Настройка свойств развертывания для целевой среды</span><span class="sxs-lookup"><span data-stu-id="981d6-103">Configuring Deployment Properties for a Target Environment</span></span>

<span data-ttu-id="981d6-104">кто [Джейсон Иванов](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="981d6-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="981d6-105">Скачать в формате PDF</span><span class="sxs-lookup"><span data-stu-id="981d6-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="981d6-106">В этом разделе описывается настройка свойств конкретной среды для развертывания примера решения диспетчера контактов в определенной целевой среде.</span><span class="sxs-lookup"><span data-stu-id="981d6-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>

<span data-ttu-id="981d6-107">Этот раздел является частью серии руководств, основанных на требованиях Enterprise к развертыванию вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) &#x2014;для представления веб-приложения с реалистичным уровнем сложности, включая приложение ASP.NET MVC 3, службу Windows Communication Foundation (WCF) и проект базы данных.</span><span class="sxs-lookup"><span data-stu-id="981d6-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="981d6-108">Метод развертывания в сердце этих учебников основан на подходе к файлам проекта Split, описанному в разделе [понимание процесса сборки](../web-deployment-in-the-enterprise/understanding-the-build-process.md), в котором процесс сборки управляется двумя файлами&#x2014;проекта, содержащими инструкции по сборке, которые применяются к каждой целевой среде, и одна содержит параметры сборки и развертывания, относящиеся к конкретной среде.</span><span class="sxs-lookup"><span data-stu-id="981d6-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="981d6-109">Во время сборки файл проекта, зависящий от среды, объединяется в файл проекта независимо от среды, чтобы сформировать полный набор инструкций по сборке.</span><span class="sxs-lookup"><span data-stu-id="981d6-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="981d6-110">Обзор процесса</span><span class="sxs-lookup"><span data-stu-id="981d6-110">Process Overview</span></span>

<span data-ttu-id="981d6-111">Файл проекта, который будет использоваться для сборки и развертывания решения диспетчера контактов, делится на два физических файла:</span><span class="sxs-lookup"><span data-stu-id="981d6-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="981d6-112">Один, содержащий универсальные параметры сборки и инструкции (файл *Publish. proj* ).</span><span class="sxs-lookup"><span data-stu-id="981d6-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="981d6-113">Один содержит параметры сборки для конкретного окружения (*env-dev. proj*, *env-Stage. proj*и т. д.).</span><span class="sxs-lookup"><span data-stu-id="981d6-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="981d6-114">Во время сборки соответствующий файл проекта конкретной среды объединяется в файл универсальной *публикации. proj* для формирования полного набора инструкций по построению.</span><span class="sxs-lookup"><span data-stu-id="981d6-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="981d6-115">Можно настроить развертывание в определенные целевые среды, создав или настроив файлы проекта для конкретной среды с помощью параметров, описывающих собственный сценарий развертывания.</span><span class="sxs-lookup"><span data-stu-id="981d6-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="981d6-116">Многие из этих значений определяются способом настройки&#x2014;целевой среды, независимо от того, настроен ли целевой веб-сервер для использования службы веб-Deployment Agent (удаленный агент) или обработчика веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="981d6-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="981d6-117">Дополнительные сведения об этих подходах и рекомендации по выбору правильного подхода для вашей среды см. [в разделе Выбор правильного подхода к веб-развертыванию](choosing-the-right-approach-to-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="981d6-118">Для [сценария диспетчера контактов](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) требуется два файла проекта для конкретной среды:</span><span class="sxs-lookup"><span data-stu-id="981d6-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="981d6-119">Развертывание в тестовой среде разработчика (*env-dev. proj*).</span><span class="sxs-lookup"><span data-stu-id="981d6-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="981d6-120">Среда тестирования для разработчиков настроена на прием удаленных развертываний с помощью удаленного агента, как описано в статье [Настройка тестовой среды для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="981d6-121">Этот файл должен предоставлять адрес конечной точки удаленного агента, а также параметры для конкретного расположения, такие как строки подключения и конечные точки службы.</span><span class="sxs-lookup"><span data-stu-id="981d6-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="981d6-122">Развертывание в промежуточной среде (*env-Stage. proj*).</span><span class="sxs-lookup"><span data-stu-id="981d6-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="981d6-123">Промежуточная среда настроена для приема удаленных развертываний с помощью обработчика веб-развертывание, как описано в разделе [сценарий: Настройка промежуточной среды для веб-развертывания](scenario-configuring-a-staging-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="981d6-124">Этот файл должен предоставить адрес конечной точки обработчика веб-развертывание, а также параметры для конкретного расположения, такие как строки подключения и конечные точки службы.</span><span class="sxs-lookup"><span data-stu-id="981d6-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="981d6-125">Важно отметить, что параметры, настроенные в файле проекта для конкретной среды, не влияют на содержимое самого&#x2014;веб-пакета, а определяют способ развертывания пакета и значения параметров, предоставляемые при извлечении пакета.</span><span class="sxs-lookup"><span data-stu-id="981d6-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="981d6-126">Вы импортируете веб-пакет в рабочую среду вручную, как описано в [сценарии: Настройка рабочей среды для веб-развертывания](scenario-configuring-a-production-environment-for-web-deployment.md) и [Ручная установка веб-пакетов](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), поэтому не имеет значения, какие параметры использовались в файле проекта конкретной среды при создании пакета.</span><span class="sxs-lookup"><span data-stu-id="981d6-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="981d6-127">Диспетчер службы IIS (IIS) выводит запрос на ввод любых параметризованных значений, таких как строки подключения и конечные точки службы, при импорте пакета.</span><span class="sxs-lookup"><span data-stu-id="981d6-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="981d6-128">Чтобы развернуть решение диспетчера контактов в собственной целевой среде, можно либо настроить этот файл или использовать его в качестве шаблона, а также создать собственный файл.</span><span class="sxs-lookup"><span data-stu-id="981d6-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="981d6-129">**Настройка параметров развертывания, зависящих от среды, для решения диспетчера контактов**</span><span class="sxs-lookup"><span data-stu-id="981d6-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="981d6-130">Откройте решение ContactManager-WCF в Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="981d6-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="981d6-131">В окне **Обозреватель решений** разверните папку **Публикация** , разверните папку **енвконфиг** , а затем дважды щелкните **env-dev. proj**.</span><span class="sxs-lookup"><span data-stu-id="981d6-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="981d6-132">Замените значения свойств в файле *env-dev. proj* на правильные значения для собственной тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="981d6-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="981d6-133">В таблице, следующей за этой процедурой, содержатся дополнительные сведения о каждом из этих свойств.</span><span class="sxs-lookup"><span data-stu-id="981d6-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="981d6-134">Сохраните свою работу и закройте файл *env-dev. proj* .</span><span class="sxs-lookup"><span data-stu-id="981d6-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="981d6-135">Выбор правильных свойств развертывания</span><span class="sxs-lookup"><span data-stu-id="981d6-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="981d6-136">В этой таблице описывается назначение каждого свойства в файле проекта Sample- *dev. proj*для конкретного окружения, а также приводятся некоторые рекомендации по предоставленным значениям.</span><span class="sxs-lookup"><span data-stu-id="981d6-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>

|                                                        <span data-ttu-id="981d6-137">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="981d6-137">Property Name</span></span>                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="981d6-138">Сведения</span><span class="sxs-lookup"><span data-stu-id="981d6-138">Details</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <span data-ttu-id="981d6-139"><strong>Мсдеплойкомпутернаме</strong> Имя целевого веб-сервера или конечной точки службы.</span><span class="sxs-lookup"><span data-stu-id="981d6-139"><strong>MSDeployComputerName</strong> The name of the destination web server or service endpoint.</span></span>               |                                                                                                                                                                                                                                              <span data-ttu-id="981d6-140">При развертывании в службе удаленного агента на целевом веб-сервере можно указать имя целевого компьютера (например, <strong>TESTWEB1</strong> или <strong>TESTWEB1.fabrikam.NET</strong>) или указать конечную точку удаленного агента (например, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span><span class="sxs-lookup"><span data-stu-id="981d6-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, <strong>TESTWEB1</strong> or <strong>TESTWEB1.fabrikam.net</strong>), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="981d6-141">В каждом случае развертывание работает одинаковым образом.</span><span class="sxs-lookup"><span data-stu-id="981d6-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="981d6-142">Если выполняется развертывание в обработчик веб-развертывание на целевом веб-сервере, следует указать конечную точку службы и включить имя веб-сайта IIS в качестве параметра строки запроса (например, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span><span class="sxs-lookup"><span data-stu-id="981d6-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span>                                                                                                                                                                                                                                              |
|         <span data-ttu-id="981d6-143"><strong>Мсдеплойаус</strong> Метод, который веб-развертывание должен использоваться для проверки подлинности на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="981d6-143"><strong>MSDeployAuth</strong> The method that Web Deploy should use to authenticate to the remote computer.</span></span>          |                                                                                                                                                                                                                          <span data-ttu-id="981d6-144">Это значение должно быть равно <strong>NTLM</strong> или <strong>Basic</strong>.</span><span class="sxs-lookup"><span data-stu-id="981d6-144">This should be set to <strong>NTLM</strong> or <strong>Basic</strong>.</span></span> <span data-ttu-id="981d6-145">Как правило, <strong>NTLM</strong> используется при развертывании в службе удаленного <strong>агента и при</strong> развертывании в обработчике веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="981d6-145">Typically, you'll use <strong>NTLM</strong> if you're deploying to the remote agent service and <strong>Basic</strong> if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="981d6-146">При использовании обычной проверки подлинности также необходимо указать имя пользователя и пароль, которые должен олицетворять средство веб-развертывания IIS (веб-развертывание) для выполнения развертывания.</span><span class="sxs-lookup"><span data-stu-id="981d6-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="981d6-147">В этом примере эти значения предоставляются с помощью свойств <strong>мсдеплойусернаме</strong> и <strong>мсдеплойпассворд</strong> .</span><span class="sxs-lookup"><span data-stu-id="981d6-147">In this example, these values are provided through the <strong>MSDeployUsername</strong> and <strong>MSDeployPassword</strong> properties.</span></span> <span data-ttu-id="981d6-148">При использовании проверки подлинности NTLM можно опустить эти свойства или оставить их пустыми.</span><span class="sxs-lookup"><span data-stu-id="981d6-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="981d6-149"><strong>Мсдеплойусернаме</strong> Если используется обычная проверка подлинности, веб-развертывание будет использовать эту учетную запись на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="981d6-149"><strong>MSDeployUsername</strong> If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="981d6-150">Это должна быть форма <em>DOMAIN</em>\*имя_пользователя \* (например, <strong>фабрикам\матт</strong>).</span><span class="sxs-lookup"><span data-stu-id="981d6-150">This should take the form <em>DOMAIN</em>\*username\* (for example, <strong>FABRIKAM\matt</strong>).</span></span> <span data-ttu-id="981d6-151">Это значение используется только в том случае, если указана обычная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="981d6-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="981d6-152">Если используется проверка подлинности NTLM, свойство можно опустить.</span><span class="sxs-lookup"><span data-stu-id="981d6-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="981d6-153">Если указано значение, оно будет пропущено.</span><span class="sxs-lookup"><span data-stu-id="981d6-153">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="981d6-154"><strong>Мсдеплойпассворд</strong> При использовании обычной проверки подлинности веб-развертывание будет использовать этот пароль на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="981d6-154"><strong>MSDeployPassword</strong> If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="981d6-155">Это пароль для учетной записи пользователя, указанной в свойстве <strong>мсдеплойусернаме</strong> .</span><span class="sxs-lookup"><span data-stu-id="981d6-155">This is the password for the user account you specified in the <strong>MSDeployUsername</strong> property.</span></span> <span data-ttu-id="981d6-156">Это значение используется только в том случае, если указана обычная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="981d6-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="981d6-157">Если используется проверка подлинности NTLM, свойство можно опустить.</span><span class="sxs-lookup"><span data-stu-id="981d6-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="981d6-158">Если указано значение, оно будет пропущено.</span><span class="sxs-lookup"><span data-stu-id="981d6-158">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <span data-ttu-id="981d6-159"><strong>Контактманажерииспас</strong> Путь IIS, по которому необходимо развернуть приложение MVC диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="981d6-159"><strong>ContactManagerIisPath</strong> The IIS path on which you want to deploy the Contact Manager MVC application.</span></span>     |                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="981d6-160">Это должен быть путь, отображаемый в диспетчере IIS, в формате [<em>имя веб-сайта IIS</em>]/[имя<em>веб-</em><em>приложения</em>].</span><span class="sxs-lookup"><span data-stu-id="981d6-160">This should be the path as it appears in IIS Manager, in the form [<em>IIS website name</em>]/[<em>web</em><em>application name</em>].</span></span> <span data-ttu-id="981d6-161">Помните, что веб-сайт IIS должен существовать до развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="981d6-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="981d6-162">Например, если вы создали веб-сайт IIS с именем Демосите, можно указать путь IIS для приложения MVC как Демосите/ContactManager.</span><span class="sxs-lookup"><span data-stu-id="981d6-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span>                                                                                                                                                                                                                                                                                                                                                                        |
|   <span data-ttu-id="981d6-163"><strong>Контактманажерсервицеииспас</strong> Путь IIS, по которому требуется развернуть службу WCF диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="981d6-163"><strong>ContactManagerServiceIisPath</strong> The IIS path on which you want to deploy the Contact Manager WCF service.</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="981d6-164">Например, если вы создали веб-сайт IIS с именем Демосите, можно указать путь IIS для службы WCF как <strong>демосите/контактманажерсервице</strong>.</span><span class="sxs-lookup"><span data-stu-id="981d6-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as <strong>DemoSite/ContactManagerService</strong>.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <span data-ttu-id="981d6-165"><strong>Контактманажертаржетурл</strong> URL-адрес, по которому может быть достигнута служба WCF.</span><span class="sxs-lookup"><span data-stu-id="981d6-165"><strong>ContactManagerTargetUrl</strong> The URL at which the WCF service can be reached.</span></span>                   |                                                                                                                                                     <span data-ttu-id="981d6-166">Будет получен следующий вид: [<em>корневой URL-адрес сайта IIS</em>]/[<em>имя приложения службы</em>]/[<em>Конечная точка службы</em>].</span><span class="sxs-lookup"><span data-stu-id="981d6-166">This will take the form [<em>IIS website root URL</em>]/[<em>service application name</em>]/[<em>service endpoint</em>].</span></span> <span data-ttu-id="981d6-167">Например, если вы создали веб-сайт IIS на порту 85, URL-адрес будет иметь форму `http://localhost:85/ContactManagerService/ContactService.svc`.</span><span class="sxs-lookup"><span data-stu-id="981d6-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="981d6-168">Помните, что приложение MVC и служба WCF развертываются на одном и том же сервере.</span><span class="sxs-lookup"><span data-stu-id="981d6-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="981d6-169">Поэтому доступ к этому URL-адресу возможен только с компьютера, на котором он установлен.</span><span class="sxs-lookup"><span data-stu-id="981d6-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="981d6-170">По этой причине лучше использовать localhost или IP-адрес, а не имя компьютера или заголовок узла в URL-адресе.</span><span class="sxs-lookup"><span data-stu-id="981d6-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="981d6-171">Если вы используете имя компьютера или заголовок узла, функция безопасности [проверки на замыкание на себя](https://go.microsoft.com/?linkid=9805131) в IIS может заблокировать URL-адрес и вернуть ошибку <strong>HTTP 401,1-несанкционированный</strong> доступ.</span><span class="sxs-lookup"><span data-stu-id="981d6-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an <strong>HTTP 401.1 - Unauthorized</strong> error.</span></span>                                                                                                                                                     |
|                  <span data-ttu-id="981d6-172"><strong>Кмдатабасеконнектионстринг</strong> Строка подключения для сервера базы данных.</span><span class="sxs-lookup"><span data-stu-id="981d6-172"><strong>CmDatabaseConnectionString</strong> The connection string for the database server.</span></span>                  | <span data-ttu-id="981d6-173">Строка подключения определяет как учетные данные, которые будут использоваться VSDBCMD для связи с сервером базы данных, так и учетные данные, которые будут использоваться пулом приложений веб-сервера для связи с сервером базы данных и взаимодействия с базой данных.</span><span class="sxs-lookup"><span data-stu-id="981d6-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="981d6-174">По сути, у вас есть два варианта.</span><span class="sxs-lookup"><span data-stu-id="981d6-174">Essentially you have two choices here.</span></span> <span data-ttu-id="981d6-175">Можно указать <strong>встроенную безопасность = true</strong>. в этом случае используется встроенная проверка подлинности Windows: <strong>Data Source = TESTDB1; Integrated Security = true</strong> в этом случае база данных будет создана с использованием учетных данных пользователя, запускающего исполняемый файл VSDBCMD, и приложение будет обращаться к базе данных, используя удостоверение учетной записи компьютера веб-сервера.</span><span class="sxs-lookup"><span data-stu-id="981d6-175">You can specify <strong>Integrated Security=true</strong>, in which case integrated Windows authentication is used: <strong>Data Source=TESTDB1;Integrated Security=true</strong> In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="981d6-176">Кроме того, можно указать имя пользователя и пароль учетной записи SQL Server.</span><span class="sxs-lookup"><span data-stu-id="981d6-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="981d6-177">В этом случае учетные данные SQL Server используются программой VSDBCMD для создания базы данных и пулом приложений для взаимодействия с базой данных: <strong>Data Source = TESTDB1; Идентификатор пользователя = Асклусер; Password = PA $ $w 0rd</strong> . в этом разделе пошаговые руководства предполагают, что используется встроенная проверка подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="981d6-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: <strong>Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd</strong> The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
|        <span data-ttu-id="981d6-178"><strong>Кмтаржетдатабасе</strong> Имя, которое будет присвоено базе данных, создаваемой на сервере базы данных.</span><span class="sxs-lookup"><span data-stu-id="981d6-178"><strong>CmTargetDatabase</strong> The name you want to give the database you'll create on the database server.</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="981d6-179">Предоставленное здесь значение добавляется в команду VSDBCMD в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="981d6-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="981d6-180">Он также используется для создания полной строки подключения, которую пул приложений на веб-сервере может использовать для взаимодействия с базой данных.</span><span class="sxs-lookup"><span data-stu-id="981d6-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<span data-ttu-id="981d6-181">В этих примерах показано, как можно настроить эти свойства для конкретных сценариев развертывания.</span><span class="sxs-lookup"><span data-stu-id="981d6-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="981d6-182">Пример 1&#x2014;. Развертывание в удаленной службе агента</span><span class="sxs-lookup"><span data-stu-id="981d6-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="981d6-183">В данном примере:</span><span class="sxs-lookup"><span data-stu-id="981d6-183">In this example:</span></span>

- <span data-ttu-id="981d6-184">Выполняется развертывание в службу удаленного агента на TESTWEB1.</span><span class="sxs-lookup"><span data-stu-id="981d6-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="981d6-185">Вы указываете веб-развертывание использовать проверку подлинности NTLM.</span><span class="sxs-lookup"><span data-stu-id="981d6-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="981d6-186">Веб-развертывание будут выполняться с использованием учетных данных, которые использовались для вызова Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="981d6-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="981d6-187">Вы используете встроенную проверку подлинности для развертывания базы данных **ContactManager** в TESTDB1.</span><span class="sxs-lookup"><span data-stu-id="981d6-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="981d6-188">База данных будет развернута с использованием учетных данных, которые использовались для вызова MSBuild.</span><span class="sxs-lookup"><span data-stu-id="981d6-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="981d6-189">Пример 2&#x2014;. Развертывание в конечной точке обработчика веб-развертывание</span><span class="sxs-lookup"><span data-stu-id="981d6-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="981d6-190">В данном примере:</span><span class="sxs-lookup"><span data-stu-id="981d6-190">In this example:</span></span>

- <span data-ttu-id="981d6-191">Выполняется развертывание в конечной точке службы обработчика веб-развертывание в STAGEWEB1.</span><span class="sxs-lookup"><span data-stu-id="981d6-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="981d6-192">Вы указываете веб-развертывание использовать обычную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="981d6-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="981d6-193">Вы указываете, что веб-развертывание должен олицетворять учетную запись Фабрикам\стагингдеплойер на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="981d6-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="981d6-194">Вы используете SQL Server проверку подлинности для развертывания базы данных **ContactManager** в STAGEDB1.</span><span class="sxs-lookup"><span data-stu-id="981d6-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a><span data-ttu-id="981d6-195">Заключение</span><span class="sxs-lookup"><span data-stu-id="981d6-195">Conclusion</span></span>

<span data-ttu-id="981d6-196">На этом этапе файлы проекта полностью настроены для создания и развертывания решения диспетчера контактов в одной или нескольких конечных средах.</span><span class="sxs-lookup"><span data-stu-id="981d6-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="981d6-197">Чтобы использовать эти файлы проекта в рамках одношагового, повторяемого процесса развертывания, необходимо выполнить файл *Publish. proj* с помощью MSBuild и передать в качестве параметра расположение файла проекта, относящегося к конкретной среде.</span><span class="sxs-lookup"><span data-stu-id="981d6-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="981d6-198">Это можно сделать различными способами.</span><span class="sxs-lookup"><span data-stu-id="981d6-198">You can do this in various ways:</span></span>

- <span data-ttu-id="981d6-199">Общие сведения о MSBuild и общие сведения о файлах пользовательских проектов см. [в разделе Основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="981d6-200">Сведения о том, как сформулировать команду MSBuild, которая выполняет файлы пользовательских проектов, см. в разделе [Развертывание веб-пакетов](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="981d6-201">Сведения о том, как внедрять команды MSBuild в командный файл для одношаговых и повторяемых развертываний, см. в разделе [Создание и запуск командного файла развертывания](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="981d6-202">Сведения о том, как выполнять пользовательские файлы проекта из Team Build, см. в разделе [Создание определения сборки, поддерживающего развертывание](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="981d6-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="981d6-203">Назад</span><span class="sxs-lookup"><span data-stu-id="981d6-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
