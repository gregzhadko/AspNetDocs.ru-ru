---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Развертывание базы данных членства в корпоративных средах | Документация Майкрософт
author: jrjlee
description: В этом разделе объясняются ключевые соображения и проблем, которые необходимо преодолеть при подготовке базы данных служб приложения ASP.NET (чаще используется...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 307375843c51f31d3d8ae0f2ef0a17a3e58d3a64
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57028191"
---
<a name="deploying-membership-databases-to-enterprise-environments"></a>Развертывание баз данных членства в корпоративных средах
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Загрузить PDF-файл](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе объясняются ключевые соображения и проблем, с которой необходимо преодолеть, когда базы данных (более часто называют баз данных членства) в тестовой, промежуточной или рабочей средах служб подготовки приложения ASP.NET. Он также описывает подходы, которые можно использовать для выполнения этих задач.


Этот раздел является частью серии учебников, исходя из требования к развертыванию enterprise вымышленной компании Fabrikam, Inc. В этой серии руководств используется пример решения&#x2014; [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;для представления веб-приложения с более реалистичные уровень сложности, включая приложения ASP.NET MVC 3, Windows Communication Служба Foundation (WCF) и проект базы данных.

Метод развертывания в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в которой процесс построения управляется двумя файлы проекта&#x2014;один с Создание инструкции, которые применяются для каждой целевой среде и содержащего параметры построения и развертывания для конкретной среды. Во время сборки файл проекта для конкретной среды объединяется в файл проекта независимой от среды, чтобы полный набор инструкций построения.

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a>При развертывании базы данных членства с какими проблемами?

В большинстве случаев разработать стратегию развертывания для базы данных, в первую очередь следует принять во внимание при какие данные вы хотите развернуть. В среде разработки или тестирования может потребоваться развернуть данных учетной записи пользователя, чтобы упростить тестирование быстро и просто. В промежуточной или рабочей среде это очень маловероятно, что нужно для развертывания данных учетной записи пользователя.

К сожалению баз данных членства ASP.NET описываются некоторые проблемы, которые делают это решение гораздо более сложных:

- Только схема развертывания будет оставить базу данных членства в нерабочем состоянии. Дело в базе данных членства включает в себя некоторые данные конфигурации (в **aspnet\_SchemaVersions** таблицы), база данных требует для работы. Таким образом при выполнении развертывания только схемы базы данных членства, чтобы исключить данные учетной записи пользователя, необходимо выполнить сценарий после развертывания для добавления данных настройки.
- В зависимости от настройки вашей базы данных членства поставщик членства может использовать ключ компьютера для шифрования паролей и хранить их в базе данных. В этом случае данные учетных записей пользователей, развертываемого с базой данных станет непригодным для использования на конечном сервере. По этой причине развернув данные учетной записи пользователя не является поддерживаемым сценарием.

## <a name="choosing-a-membership-database-strategy"></a>Выбор стратегии базы данных членства

Используйте эти рекомендации при выборе как подготовить базу данных членства в корпоративной среде сервера.

- По возможности не следует развертывать базы данных членства. Вместо этого создайте базу данных членства вручную на целевом сервере базы данных. Если вы не настроили схему базы данных членства, можно просто создать новый в situ на назначения с помощью [средство регистрации ASP.NET SQL Server (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).
- Если у вас нет, но чтобы развернуть базу данных членства&#x2014;к примеру, если вы внесли расширенных изменений в схему базы данных&#x2014;следует выполнить развертывание схемой членства в базе данных, чтобы исключить данные учетной записи пользователя, а затем Запустите сценарий после развертывания, чтобы добавить все необходимые данные конфигурации. Общие рекомендации можно найти на этих способов [как: Развертывание базы данных членства ASP.NET без включения учетных записей пользователей](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).

Важно помнить, что *схему базы данных членства, вероятнее всего будут довольно статическими*. Даже если вы настроили в базу данных членства, маловероятно, что вам потребуется обновить схему на регулярной основе&#x2014;он не будет изменяться с такой же частотой, что и код на веб-приложение или проект базы данных. Таким образом не требуется включать базы данных членства в отношении любого процесса автоматической или один шаг развертывания.

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a>Обновление схемы базы данных членства с помощью VSDBCMD

Если вы изменяете структуру базы данных членства после первого развертывания, можно не использовать средство Internet Information Services (IIS) веб-развертывания (веб-развертывание) для повторного развертывания базы данных. Функциональные возможности развертывания базы данных в веб-развертывания не включает возможность сделать разностные обновления в целевую базу данных&#x2014;вместо этого веб-развертывания необходимо удалить и повторно создать базу данных. Это означает, что вы потеряете все существующие данные учетной записи пользователя, обычно нежелательно в промежуточной или рабочей среде.

Альтернативой является использование служебной программы VSDBCMD для обновления схемы целевой базы данных. Средство VSDBCMD включает в себя две важные возможности. Во-первых его можно импортировать схему существующей базы данных в DBSCHEMA-файл. Во-вторых его можно развернуть DBSCHEMA-файл для существующей базы данных как разностные обновления, это означает, что вносятся только изменения, необходимые для приведения целевой базы данных в актуальном состоянии, и вы не потеряете данные.

Чтобы обновить схему базы данных членства можно использовать следующие общие действия:

1. Используйте средство VSDBCMD **импорта** действие для создания DBSCHEMA-файл для исходной базы данных членства. Эта процедура описана в [как: Импорт схемы из командной строки](https://msdn.microsoft.com/library/dd172135.aspx).
2. Используйте средство VSDBCMD **развернуть** действия для развертывания DBSCHEMA-файл на целевой базы данных членства. Эта процедура описана в [Справочник по командной строки VSDBCMD. EXE (развертывание и импорт схемы)](https://msdn.microsoft.com/library/dd193283.aspx).

## <a name="conclusion"></a>Заключение

В этом разделе описываются некоторые проблемы, которые могут возникнуть, если вам нужно подготовить базы данных членства ASP.NET в различных целевых средах. В частности это объяснить, почему схемой развертывания будет оставить базу данных членства в нерабочем состоянии и почему развертывание данных учетной записи пользователя не поддерживается. Раздел также представлены рекомендации о том, как подготовить и развернуть обновления баз данных членства в различных сценариях.

## <a name="further-reading"></a>Дополнительные сведения

Дополнительные справочные сведения и примеры того, как использовать средство VSDBCMD см. в разделе [Справочник по командной строки VSDBCMD. EXE (развертывание и импорт схемы)](https://msdn.microsoft.com/library/dd193283.aspx) и [как: Импорт схемы из командной строки](https://msdn.microsoft.com/library/dd172135.aspx). Дополнительные сведения об использовании aspnet\_regsql.exe на создание баз данных членства, см. в разделе [средство регистрации ASP.NET SQL Server (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx). Дополнительные общие рекомендации по развертыванию баз данных членства, см. в разделе [как: Развертывание базы данных членства ASP.NET без включения учетных записей пользователей](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).

> [!div class="step-by-step"]
> [Назад](deploying-database-role-memberships-to-test-environments.md)
> [Вперед](excluding-files-and-folders-from-deployment.md)
