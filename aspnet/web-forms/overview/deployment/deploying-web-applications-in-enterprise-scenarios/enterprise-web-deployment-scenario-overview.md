---
uid: web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview
title: 'Корпоративное веб-развертывание: обзор сценария | Документация Майкрософт'
author: jrjlee
description: В этом наборе учебников используется пример решения с реалистичным уровнем сложности, а также вымышленный сценарий корпоративного развертывания для предоставления ссылки...
ms.author: riande
ms.date: 05/03/2012
ms.assetid: aa862153-4cd8-4e33-beeb-abf502c6664f
msc.legacyurl: /web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview
msc.type: authoredcontent
ms.openlocfilehash: 9786879844da13c21e6a953b1ab24b29ca8121e2
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78463410"
---
# <a name="enterprise-web-deployment-scenario-overview"></a>Корпоративное веб-развертывание: обзор сценария

кто [Джейсон Иванов](https://github.com/jrjlee)

[Скачать в формате PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом наборе учебников используется пример решения с реалистичным уровнем сложности, а также вымышленный сценарий корпоративного развертывания для предоставления эталонной реализации и предоставления задачам и пошаговым руководствам общего контекста. В этом разделе описывается сценарий учебника и представлен пример решения.

## <a name="scenario-description"></a>Описание сценария

Компании Fabrikam, Inc. вымышленная компания создает решение, которое позволяет удаленным группам продаж хранить и получать контактную информацию из веб-интерфейса.

Процесс управления жизненным циклом приложения (ALM) в компании Fabrikam, Inc. требует, чтобы решение было развернуто в трех серверных средах на различных стадиях процесса разработки программного обеспечения:

- Тестовая среда для разработчиков или "песочница".
- Промежуточная среда на основе интрасети.
- Рабочая среда с выходом в Интернет.

Каждая из этих сред имеет разные требования к конфигурации и безопасности, и каждая из них создает уникальные проблемы развертывания.

### <a name="the-fabrikam-inc-server-infrastructure"></a>Серверная инфраструктура Fabrikam, Inc.

Это инфраструктура высокого уровня разработки и развертывания компании Fabrikam, Inc.

![](enterprise-web-deployment-scenario-overview/_static/image1.png)

Рабочие станции разработчиков, инфраструктура управления исходным кодом, среда тестирования для разработчиков и промежуточная среда находятся в сети интрасети в домене Fabrikam.net. Рабочая среда находится в сети периметра (также называемой демилитаризованной зоной, промежуточной подсетью), которая изолирована от сети интрасети брандмауэром. Это распространенный сценарий развертывания. обычно веб-серверы с выходом в Интернет изолируются от внутренней серверной инфраструктуры за счет использования брандмауэров или серверов шлюзов.

В данном примере:

- Сервер Team Foundation Server (TFS) 2010 с отдельным сервером сборки обеспечивает функциональность системы управления версиями и непрерывной интеграции (CI).
- Среда тестирования для разработчиков включает веб-сервер службы IIS (IIS) 7,5 и сервер базы данных SQL Server 2008 R2.
- Рабочая среда включает несколько веб-серверов IIS 7,5, синхронизированных сервером контроллера веб-фермы (WFF), вместе с сервером базы данных SQL Server 2008 R2. На практике сервер базы данных может использовать кластеризацию или зеркальное отображение для повышения масштабируемости и доступности.
- Промежуточная среда предназначена для репликации конфигурации рабочей среды как можно ближе.
- Политики брандмауэра и сетевой изоляции не допускают прямого и автоматического развертывания из интрасети в сеть периметра.

Настройка каждой из этих сред более подробно описана во втором руководстве по [настройке серверных сред для веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).

### <a name="team-roles-for-alm"></a>Роли команды для ALM

Эти пользователи участвуют в создании, управлении, сборке и публикации решения диспетчера контактов.

- Мэтт Хинк — это разработчик веб-приложения в компании Fabrikam, Inc. Он является частью команды, разработавшей решение диспетчера контактов с помощью Visual Studio 2010. Мэтт обладает полными правами администратора на серверах в тестовой среде разработчика, что позволяет настроить среду в соответствии с потребностями. Он также имеет доступ пользователей к экземпляру TFS Visual Studio 2010, где хранится исходный код решения диспетчера контактов.
- Вадим Валтерс является администратором сервера для группы разработчиков Fabrikam, Inc. Вадим имеет административный доступ на сервере TFS, чтобы он мог настраивать все аспекты TFS и Team Build. Вадим также имеет административный доступ к тестовому и промежуточному веб-серверу и действует как администратор базы данных (DBA) для серверов баз данных в тестовой и промежуточной средах. Вадим настроил Team Build на сервере TFS для выполнения следующих задач:

    - Создавайте и запускайте модульные тесты в приложении каждый раз, когда пользователь возвращает файл в TFS. Это называется CI.
    - Автоматически развертывать приложение диспетчера контактов в тестовой среде, когда приложение проходит модульные тесты. Это включает публикацию базы данных на тестовые серверы при первоначальном развертывании и любые обновления базы данных после первоначального развертывания.
    - Разверните приложение диспетчера контактов в промежуточной среде в одношаговом процессе.
    - Создайте веб-пакет, который администратор веб-сервера и администратор базы данных могут использовать для публикации приложения в рабочей среде.
- Lisa Andrews) — это администратор сервера, ответственный за развертывание приложений на рабочих серверах Fabrikam, Inc. Она имеет доступ на чтение к общей папке, в которой Командная сборка TFS сохраняет пакет веб-развертывания после сборки приложения диспетчера контактов. Она также имеет административный доступ к рабочим веб-серверам, чтобы он мог развернуть приложение в рабочей среде. Кроме того, она выступает в качестве администратора баз данных, который развертывает базы и обновления базы данных на сервере базы в рабочей среде.

<a id="_The_Contact_Manager"></a>

### <a name="the-contact-manager-solution"></a>Решение диспетчера контактов

Решение диспетчера контактов предназначено для того, чтобы позволить зарегистрированным, вошедшим в систему пользователям добавлять и изменять контактные данные через веб-интерфейс. Решение диспетчера контактов состоит из четырех отдельных проектов:

![](enterprise-web-deployment-scenario-overview/_static/image2.png)

- **ContactManager. MVC**. Это проект веб-приложения ASP.NET MVC3, представляющий точку входа для решения. Она предлагает некоторые базовые функции веб-приложений, например предоставление пользователям возможности создавать и просматривать контактные данные. Приложение использует службу Windows Communication Foundation (WCF) для управления контактами и базой данных служб приложений ASP.NET для управления проверкой подлинности и авторизацией.
- **ContactManager. Database**. Это проект базы данных Visual Studio 2010. Проект определяет схему для базы данных, в которой хранятся контактные данные.
- **ContactManager. Service**. Это проект веб-службы WCF. WCF предоставляет конечную точку, которая позволяет вызывающим объектам выполнять операции создания, извлечения, обновления и удаления (CRUD) в базе данных диспетчера контактов. Служба использует базу данных диспетчера контактов и сборку ContactManager. Common. dll.
- **ContactManager. Common**. Это проект библиотеки классов. Служба WCF использует типы, определенные в этой сборке.

Полное рассмотрение решения и его требований к развертыванию приводится в первом руководстве в этой серии — [веб-развертывании на предприятии](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md).

<a id="_Deployment_Tasks"></a>

## <a name="deployment-tasks"></a>Задачи развертывания

Существует несколько отдельных задач, связанных с развертыванием приложений в различных средах крупной организации. Ниже приведены основные задачи, которые охватывает учебники.

![](enterprise-web-deployment-scenario-overview/_static/image3.png)

Ниже приведен список всех шагов в процессе развертывания с точки зрения пользователей, описанных выше в этом документе.

1. Все участники группы просматривают решение диспетчера контактов в Visual Studio 2010, чтобы определить ключевые требования и проблемы развертывания.
2. Мэтт Хинк может развернуть решение диспетчера контактов непосредственно с рабочей станции разработчика в тестовую среду разработчика, чтобы провести первоначальный тест логики развертывания.
3. Мэтт Хинк добавляет приложение в систему управления версиями в TFS.
4. Вадим Валтерс создает различные определения сборки для решения диспетчера контактов в Team Build. Одно определение сборки использует CI для развертывания решения в среде тестирования разработчика каждый раз, когда пользователь возвращает новый код. Другое определение сборки позволяет пользователям запускать развертывания в промежуточной среде по мере необходимости.
5. Каждый раз, когда пользователь возвращает новый код, Team Build автоматически создает компоненты решения, выполняет модульные тесты и развертывает решение в тестовой среде разработчика, если сборка прошла успешно и модульные тесты пройдены.
6. Когда пользователь запускает развертывание в промежуточной среде, решение упаковывается и развертывается в одношаговом процессе. Этот процесс также создает пакет для ручного развертывания в рабочей среде.
7. Lisa Andrews) развертывает приложение в рабочей среде путем ручного импорта веб-пакета, созданного на шаге 6.

### <a name="key-deployment-issues"></a>Основные проблемы при развертывании

Решение диспетчера контактов и сценарий Fabrikam, Inc. выделяют различные распространенные проблемы и проблемы, которые могут возникнуть при развертывании сложных решений корпоративного уровня. Пример:

- Необходимо иметь возможность развертывать проекты в нескольких средах, таких как среды разработки или тестирования, промежуточные платформы и рабочие серверы. Решение должно быть развернуто с разными параметрами конфигурации для каждой среды.
- Несколько зависимых проектов необходимо развернуть одновременно в рамках одного этапа или автоматизированного процесса сборки и развертывания.
- Необходимо иметь возможность выполнять развертывание из автоматизированного процесса. Например, вы хотите использовать процесс CI для развертывания веб-приложений в промежуточной среде при возврате нового кода.
- Необходимо иметь возможность управлять процессом развертывания и устанавливать переменные развертывания извне Visual Studio, так как разработчики вряд ли будут иметь правильные параметры конфигурации или необходимые учетные данные для каждой целевой среды.
- Необходимо развернуть проекты баз данных на основе схем и сохранить существующие данные при последующих развертываниях.
- Необходимо развертывать базы данных членства на нерегламентированном уровне без развертывания данных учетной записи пользователя. Также может потребоваться обновить схему развернутых баз данных членства без потери существующих данных учетной записи пользователя.
- При развертывании содержимого в различных целевых средах необходимо исключить определенные файлы или папки.

Кроме того, Управление развертыванием в случаях, когда обновления происходят часто, а добавочное — вызывает некоторые дополнительные проблемы. Пример:

- Модульные тесты выполняются каждый раз, когда разработчик проверяет новый код. Развертывание решения требуется только в том случае, если код проходит модульные тесты.
- При развертывании веб-приложения в промежуточной или рабочей среде необходимо перенаправить пользователей в *приложение\_автономный htm* -файл в течение процесса развертывания.
- Вы хотите регистрировать действия по развертыванию. Процесс развертывания должен отправлять уведомления по электронной почте об успешном или неудачном развертывании назначенных получателей.
- В случае сбоя автоматического развертывания процесс развертывания должен повторить текущее развертывание или развернуть предыдущий веб-пакет.

> [!div class="step-by-step"]
> [Назад](deploying-web-applications-in-enterprise-scenarios.md)
> [Вперед](application-lifecycle-management-from-development-to-production.md)
