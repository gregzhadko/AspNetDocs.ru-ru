---
uid: web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
title: 'Управление жизненным циклом приложения: От разработки к производству | Документация Майкрософт'
author: jrjlee
description: В этом разделе показано, как вымышленная компания управляет развертыванием веб-приложения ASP.NET через тестовой, промежуточной и рабочей средах как par...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: f97a1145-6470-4bca-8f15-ccfb25fb903c
msc.legacyurl: /web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
msc.type: authoredcontent
ms.openlocfilehash: 7cb9c949936c3af73d4c904d401c36d4d83f3e18
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57045691"
---
<a name="application-lifecycle-management-from-development-to-production"></a>Управление жизненным циклом приложения: от разработки до рабочей среды
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Загрузить PDF-файл](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе показано, как вымышленная компания управляет развертыванием веб-приложения ASP.NET до тестирования, промежуточной и рабочей сред в рамках процесса непрерывной разработки. В разделе приведены ссылки на дополнительные сведения и пошаговые руководства по выполнению конкретных задач.
> 
> В этой статье используется для предоставления общий обзор для [серии учебников](deploying-web-applications-in-enterprise-scenarios.md) на веб-развертывания на предприятии. Не беспокойтесь, если вы не знакомы с некоторыми описанные здесь принципы&#x2014;учебники, выполните предоставляют подробные сведения о всех этих задач и методы.
> 
> > [!NOTE]
> > Forthe размещу простоты в этом разделе не рассматриваются обновление баз данных как часть процесса развертывания. Тем не менее вносить добавочные обновления функций баз данных является обязательным для различных сценариев развертывания enterprise, и вы найдете рекомендации о том, как это сделать далее в этой серии руководств. Дополнительные сведения см. в разделе [развертывание проектов баз данных](../web-deployment-in-the-enterprise/deploying-database-projects.md).


## <a name="overview"></a>Обзор

Процесс развертывания, показанный здесь основан на сценарии развертывания Fabrikam, Inc., описанном в [корпоративное веб-развертывание: Обзор сценария](enterprise-web-deployment-scenario-overview.md). Обзор сценария необходимо прочитать перед изучить в этом разделе. По сути, сценарий проверяет, как организация управляет развертыванием достаточно сложными веб-приложения, [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md), через различные этапы в типичной корпоративной среде.

На высоком уровне решение диспетчера контактов проходит через эти этапы в процессе разработки и процесса развертывания:

1. Разработчик возвращает код в Team Foundation Server (TFS) 2010.
2. TFS создает код и выполняет все модульные тесты, связанные с командным проектом.
3. TFS развертывает решение в среде тестирования.
4. Команда разработчиков проверяет и решения в тестовой среде.
5. Администратор среды размещения выполняет «what if» развертывание в промежуточной среде, для установки, будет ли развертывание любой проблемы.
6. Администратор среды размещения выполняет динамическую развертывания в промежуточной среде.
7. Решение проходит приемочное тестирование в промежуточной среде.
8. Пакеты веб-развертывания вручную импортируются в рабочую среду.

Эти этапы являются частью цикла непрерывной разработки.

![](application-lifecycle-management-from-development-to-production/_static/image1.png)

На практике процесс несколько сложнее, чем это, как можно будет увидеть, когда мы рассмотрим каждый этап подробно. Fabrikam, Inc. использует другой подход к развертыванию для каждой целевой среды.

![](application-lifecycle-management-from-development-to-production/_static/image2.png)

В остальной части этого раздела рассматриваются эти ключевых этапах этого жизненного цикла развертывания:

- **Предварительные требования**: Как необходимо настроить серверной инфраструктуры, прежде чем поместить логику развертывания на месте.
- **Начальной разработки и развертывания**: Что необходимо выполнить перед развертыванием решения в первый раз.
- **Развертывание, чтобы проверить**: Как упаковать и развернуть содержимое в тестовой среде автоматически, когда разработчик возвращает в новом коде.
- **Развертывание в промежуточной**: Развертывание определенных сборок, промежуточную среду и как выполнять «what if» развертываний, чтобы убедиться, что развертывание не приводит к возникновению проблем.
- **Развертывание в рабочей среде**: Как импортировать веб-пакетов в рабочей среде, когда сетевой инфраструктуры, вызовет сбой удаленного развертывания.

## <a name="prerequisites"></a>Предварительные требования

Первая задача в любом сценарии развертывания должен соответствовать требованиям вашего развертывания средств и приемов серверной инфраструктуры. В этом случае Fabrikam, Inc. настроил свою инфраструктуру сервера следующим образом:

- TFS настроен для включения коллекции командных проектов, контроллеры построений и агенты сборки. См. в разделе [Настройка Team Foundation Server для автоматического развертывания веб-](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md) Дополнительные сведения.
- Среда тестирования настроен для приема удаленных развертываний, используя службу агента веб-развертывания («удаленного агента»), как описано в разделе [сценария: Настройка среды тестирования для веб-развертывания](../configuring-server-environments-for-web-deployment/scenario-configuring-a-test-environment-for-web-deployment.md) и [Настройка веб-сервера для публикации (удаленный агент) веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).
- Промежуточная среда настроена для принятия удаленных развертываний с помощью конечной точки веб-развертывание обработчик, как описано в разделе [сценария: Настройка промежуточной среды для веб-развертывания](../configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment.md) и [Настройка веб-сервера для публикации веб-развертывания (обработчик веб-развертывания)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).
- В рабочей среде настроена администратором, чтобы вручную импортировать пакеты веб-развертывания в Internet Information Services (IIS), как описано в разделе [сценария: Настройке рабочей среды для веб-развертывания](../configuring-server-environments-for-web-deployment/scenario-configuring-a-production-environment-for-web-deployment.md) и [Настройка веб-сервера для публикации (автономное развертывание) веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md).

## <a name="initial-development-and-deployment"></a>Начальной разработки и развертывания

Прежде чем команда разработчиков компании Fabrikam, Inc. может развернуть решение диспетчера контактов в первый раз, его необходимо выполнять эти задачи:

- Создание нового командного проекта в Team Foundation Server.
- Создание файлов проекта Microsoft Build Engine (MSBuild), которые содержат логику развертывания.
- Создание определения сборки TFS для запуска процессов развертывания.

### <a name="create-a-new-team-project"></a>Создание нового командного проекта

- Администратор TFS, Rob Walters создает нового командного проекта для приложения, как описано в разделе [создания командного проекта в Team Foundation Server](../configuring-team-foundation-server-for-web-deployment/creating-a-team-project-in-tfs.md). Затем ведущий разработчик, Hink Мэтт создает скелет решения. Он проверяет его файлы в новый командный проект в TFS, как описано в разделе [Добавление содержимого в систему управления версиями](../configuring-team-foundation-server-for-web-deployment/adding-content-to-source-control.md).

### <a name="create-the-deployment-logic"></a>Создание логики развертывания

Мэтт Hink создает различные пользовательские файлы проекта MSBuild, с помощью разбиения проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md). Мэтт создает:

- Файл проекта с именем *Publish.proj* , которое будет выполняться процесс развертывания. Этот файл содержит целевые объекты MSBuild, построить проекты в решении, создайте веб-пакетов и развертывания пакетов в среде сервера назначения.
- Файлы проекта для конкретной среды с именем *Env Dev.proj* и *Env Stage.proj*. Они содержат параметры, относящиеся к тестовой среде и промежуточной среде соответственно как строки подключения, конечные точки службы и сведения об удаленной службы, который будет получать веб-пакета. Рекомендации по выбору параметров для определенных целевых сред см. в разделе [настройки свойств развертывания для целевой среды](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).

Чтобы выполнить развертывание, пользователь выполняет *Publish.proj* файла с помощью MSBuild или Team Build и указывает расположение файла проекта соответствующие конкретной среды (*Env Dev.proj* или *Env Stage.proj*) аргумент командной строки. *Publish.proj* файл затем импортирует файл проекта для конкретной среды, чтобы создать полный набор публикации инструкции для каждой целевой среды.

> [!NOTE]
> Эти файлы пользовательского проекта работы не зависит от механизма, используемого для вызова MSBuild. Например, можно использовать командной строке MSBuild напрямую, как описано в разделе [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md). Позволяет выполнять файлы проекта из командный файл, как описано в разделе [Создание и запуск командного файла развертывания](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md). Кроме того, позволяет выполнять файлы проекта из определения сборки в TFS, как описано в разделе [Создание определения сборки, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).  
> В обоих случаях конечным результатом является же&#x2014;MSBuild выполняет файл объединенных проекта и развертывает решение к целевой среде. Это обеспечивает высокую степень гибкости в том, как запустить процесс публикации.


Когда он создан пользовательский проект файлы, Мэтт добавляет их в папку решения и проверяет их в систему управления версиями.

### <a name="create-build-definitions"></a>Создание определений построений

Как задачу окончательной подготовки Мэтт и Роб работают вместе для создания трех определения сборки для нового командного проекта:

- **DeployToTest**. Будет выполнена сборка решения диспетчера контактов и развертывает его в тестовую среду при каждом возникновении возврата.
- **DeployToStaging**. Это развертывает ресурсы из указанной предыдущей сборки, в промежуточной среде, когда разработчик ставит в очередь сборки.
- **DeployToStaging-WhatIf**. Это выполняет «what if» развертывание в промежуточной среде, когда разработчик ставит в очередь сборки.

В последующих разделах приведены дополнительные сведения о каждой из этих определений сборки.

## <a name="deployment-to-test"></a>Развертывание для тестирования

Команда разработчиков компании Fabrikam, Inc. поддерживает среды тестирования для выполнения различных задач, например, проверки и проверки, тестирование удобства в использовании, тестирование на совместимость и нерегламентированные или произвольного тестирования для тестирования программного обеспечения.

Команда разработчиков создала определение сборки в Team Foundation Server с именем **DeployToTest**. Это определение сборки использует триггер непрерывной интеграции, это означает, что процесс сборки выполняется при каждом запуске членом команды разработчиков компании Fabrikam, Inc. выполняет возврат. При запуске построения будет определение сборки:

- Постройте решение ContactManager.sln. Это в свою очередь создает каждый проект в решении.
- Выполните все модульные тесты в структуре папок решения (если построения решения).
- Запустите пользовательский проект файлы, которые управляют процесс развертывания (если решение сборка прошла успешно и передает все модульные тесты).

Конечным результатом является то, что если решение сборка прошла успешно и передает модульные тесты, веб-пакеты и другие ресурсы развертывания будут развернуты в тестовую среду.

![](application-lifecycle-management-from-development-to-production/_static/image3.png)

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

**DeployToTest** создавать блоки определения этих аргументов в MSBuild:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample1.cmd)]


**DeployOnBuild = true** и **DeployTarget = пакет** свойства используются в том случае, когда Team Build создает проекты в решении. Если проект является проектом веб-приложения, эти свойства указать MSBuild для создания пакета веб-развертывания для проекта. **TargetEnvPropsFile** свойство сообщает *Publish.proj* где найти файл проекта от среды, чтобы импортировать файл.

> [!NOTE]
> Подробное пошаговое руководство о том, как создать определение сборки следующим образом, см. в разделе [Создание определения сборки, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).


*Publish.proj* файл содержит целевые объекты, которые занимаются каждого проекта в решении. Тем не менее она также включает условную логику, что пропускает эти сборки целевых объектов, если при выполнении файла в Team Build. Это позволяет воспользоваться преимуществами возможностей дополнительные сборки Team Build предлагает, такие как возможность выполнять модульные тесты. Если сборки решения или блок тестов завершаются ошибкой, *Publish.proj* файл не выполняется и не будет развернуто приложение.

Условная логика выполняется путем вычисления **BuildingInTeamBuild** свойство. Это свойство MSBuild, автоматически присваивается **true** при использовании Team Build для построения проектов.

## <a name="deployment-to-staging"></a>Развертывание в промежуточное хранилище

После построения полностью соответствует всем требованиям команды разработчиков, в тестовой среде, команда может потребоваться развернуть ту же сборку в промежуточной среде. Промежуточные среды обычно настраиваются в соответствии с характеристики производства или как «live» среды, точно, насколько возможно, например, с точки зрения спецификации сервера, операционные системы и программное обеспечение и конфигурации сети. Промежуточные среды часто используются для нагрузочного тестирования, пользовательское приемочное тестирование и более широкие внутренние обзоры. Сборки развертываются в промежуточной среде непосредственно с сервера сборки.

![](application-lifecycle-management-from-development-to-production/_static/image4.png)

Определения сборки, используемые для развертывания решения в промежуточной среде **DeployToStaging-WhatIf** и **DeployToStaging**, имеют следующие характеристики:

- Они не создавайте фактически ничего. Когда Роб развертывает решения в промежуточной среде, он хочет развернуть сборку конкретных, существующей уже были проверены и проверенных в тестовой среде. Определения сборок просто нужно запустить пользовательский проект файлы, которые управляют процессом развертывания.
- Когда Роб активирует сборку, он использует параметры сборки для указания, какая сборка содержит ресурсы, которые он хочет развернуть на сервере сборки.
- Определения сборок, не будут создаваться автоматически. Роб вручную ставит сборку, когда он хочет развернуть решение в промежуточной среде.

Это описание обобщенного процесса развертывания в промежуточной среде:

1. Администратор промежуточной среды, Rob Walters ставит в очередь сборки с помощью **DeployToStaging-WhatIf** определение сборки. Роб использует параметры определения сборки, указание какие сборки, он хочет развернуть.
2. **DeployToStaging-WhatIf** сборка выполняется определение файлов пользовательского проекта в режиме «что если». Это создает файлы журналов, как в том случае, если Роб выполнение динамической развертывания, но он не вносите никаких изменений в целевой среде.
3. Роб проверяет файлы журнала для выяснения последствия развертывания в промежуточной среде. В частности Роб хочет проверить, что будут добавляться, что будет обновляться и что будут удалены.
4. Если Роб удовлетворена, что развертывание не будет вносить нежелательные изменения к существующим ресурсам или данным, он помещает в очередь сборки с помощью **DeployToStaging** определение сборки.
5. **DeployToStaging** сборка выполняется определение файлов пользовательский проект. Ресурсы для развертывания их публикации на основном веб-сервере в промежуточной среде.
6. Контроллер веб-фермы (WFF) синхронизирует веб-серверы в промежуточной среде. Это делает приложение доступным на всех веб-серверах в ферме серверов.

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

**DeployToStaging** создавать блоки определения этих аргументов в MSBuild:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample2.cmd)]


**TargetEnvPropsFile** свойство сообщает *Publish.proj* где найти файл проекта от среды, чтобы импортировать файл. **OutputRoot** свойство переопределяет значение встроенных и указывает расположение папки сборки, которая содержит ресурсы, которые вы хотите развернуть. Когда Роб ставит в очередь построение, он использует **параметры** tab, чтобы предоставить обновленное значение **OutputRoot** свойство.

![](application-lifecycle-management-from-development-to-production/_static/image5.png)

> [!NOTE]
> Дополнительные сведения о том, как создать определение сборки следующим образом, см. в разделе [развертывание конкретного построения](../configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build.md).


**DeployToStaging-WhatIf** определение сборки содержит ту же логику развертывания **DeployToStaging** определение сборки. Тем не менее, он включает дополнительный аргумент **WhatIf = true**:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample3.cmd)]


В рамках *Publish.proj* файл, **WhatIf** свойство указывает, что все ресурсы для развертывания следует опубликовывать в режиме «что если». Другими словами файлы журнала создаются как в том случае, если развертывание вышли вперед, но ничего не изменилось в целевой среде. Это позволяет оценить влияние предложенное развертывания&#x2014;в частности, что будут добавляться, что будут обновлены, и что будут удалены&#x2014;перед внесением любых изменений фактически.

> [!NOTE]
> Дополнительные сведения о настройке «what if» развертываний см. в разделе [выполнение развертывания «What If»](../advanced-enterprise-web-deployment/performing-a-what-if-deployment.md).


После развертывания приложения на основной веб-сервер в промежуточной среде, WFF автоматически синхронизировать приложения по всем серверам в ферме серверов.

> [!NOTE]
> Дополнительные сведения о настройке WFF для синхронизации веб-серверов см. в разделе [Создание фермы серверов с помощью Web Farm Framework](../configuring-server-environments-for-web-deployment/creating-a-server-farm-with-the-web-farm-framework.md).


## <a name="deployment-to-production"></a>Развертывание в рабочей среде

Когда сборка утверждена в промежуточной среде, команда Fabrikam, Inc. можно опубликовать приложение в рабочую среду. В рабочей среде — где приложение переходит в реальном времени,» и достигает его целевая аудитория конечных пользователей.

В рабочей среде находится в сети периметра выходом в Интернет. Это изолирована от внутренней сети, который содержит сервер сборки. Администратор производственной среды, Лиза Андреева, необходимо вручную скопировать веб-развертывания пакетов на сервере сборки и импортируйте их в IIS основного рабочего веб-сервера.

![](application-lifecycle-management-from-development-to-production/_static/image6.png)

Это описание обобщенного процесса развертывания в рабочей среде:

1. Команда разработчиков будет указано Лиза, что сборки готов к развертыванию в рабочей среде. Команда будет указано Лиза расположения пакетов веб-развертывания в папку сброса на сервере сборки.
2. Лиза собирает веб-пакетов с сервера сборки и копирует их в основном веб-сервере в рабочей среде.
3. Лиза использует диспетчер IIS, импортировать и опубликовать веб-пакеты на основном веб-сервере.
4. Контроллера WFF синхронизирует веб-серверов в рабочей среде. Это делает приложение доступным на всех веб-серверах в ферме серверов.

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

Диспетчер служб IIS включает в себя Мастер импорта приложения пакетов позволяет легко опубликовать веб-пакеты на веб-сайте IIS. Пошаговое руководство по выполнению этой процедуры см. в разделе [вручную Установка веб-пакеты](../web-deployment-in-the-enterprise/manually-installing-web-packages.md).

## <a name="conclusion"></a>Заключение

В этом разделе предоставляются иллюстрация жизненный цикл развертывания веб-приложения обычно корпоративного уровня.

В этом разделе является частью серии учебников, которые предоставляют рекомендации по различным аспектам развертывание веб-приложений. На практике существует множество дополнительных задачи и вопросы на каждом этапе процесса развертывания, и невозможно осветить их все в одном Пошаговое руководство. Дополнительные сведения см. в этих учебниках:

- [Веб-развертывания на предприятии](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md). Этот учебник информацию о методах развертывания web, с помощью MSBuild и средство IIS веб-развертывания (веб-развертывания).
- [Настройка серверных сред для веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md). Этот учебник руководство по настройке среды Windows server для поддержки различных сценариев развертывания.
- [Настройка Team Foundation Server для автоматического развертывания веб-приложения](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md). Этот учебник рекомендации о том, как интегрировать процессы сборки TFS логики развертывания.
- [Advanced корпоративное веб-развертывание](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md). Этот учебник рекомендации о том, как выполнить некоторые более сложные проблемы развертывания, с которыми сталкиваются организации.

> [!div class="step-by-step"]
> [Назад](enterprise-web-deployment-scenario-overview.md)
