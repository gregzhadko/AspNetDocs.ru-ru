---
uid: web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
title: Борьба программы-роботы (C#) | Документация Майкрософт
author: wenz
description: Автоматическая программы-роботы Пластер блогов и другие веб-сайты с нежелательной почтой, Отправка форм комментариев без участия пользователя. Элемент управления Нобот в ASP.NET AJAX Con...
ms.author: riande
ms.date: 06/02/2008
ms.assetid: 0a1917e0-884a-4576-8e93-9ed660faae51
msc.legacyurl: /web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
msc.type: authoredcontent
ms.openlocfilehash: fef55edf12a024e4dd66e2a18ea371ab4dac861f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78509070"
---
# <a name="fighting-bots-c"></a>Борьба с ботами (C#)

по [Кристиан Венз](https://github.com/wenz)

[Скачать код](https://download.microsoft.com/download/9/3/f/93f8daea-bebd-4821-833b-95205389c7d0/NoBot0.cs.zip) или [скачать PDF](https://download.microsoft.com/download/b/6/a/b6ae89ee-df69-4c87-9bfb-ad1eb2b23373/nobot0CS.pdf)

> Автоматическая программы-роботы Пластер блогов и другие веб-сайты с нежелательной почтой, Отправка форм комментариев без участия пользователя. Элемент управления Нобот в наборе средств управления AJAX ASP.NET может помочь в борьбе с этими программы-роботы.

## <a name="overview"></a>Обзор

Автоматическая программы-роботы Пластер блогов и другие веб-сайты с нежелательной почтой, Отправка форм комментариев без участия пользователя. Элемент управления Нобот в наборе средств управления AJAX ASP.NET может помочь в борьбе с этими программы-роботы.

## <a name="steps"></a>Шаги

Один из распространенных подходов к отказаться от программы-роботы — использовать Каптчас полностью автоматизированный открытый тест Turing для информирования компьютеров и людей друг от друга. Тестирование Turing было первоначально протестировать, где нужно было решить, является ли партнер по соединению человеком или компьютером. В Интернете CAPTCHA обычно состоит из изображения с искаженными буквами. Идея состоит в том, что только человек может читать буквы на изображении, в то время как алгоритмы OCR завершатся ошибкой.

Этот подход имеет несколько преимуществ и недостатков, но его обсуждение выходит за рамки данного руководства. Однако в наборе средств ASP.NET AJAX Control Toolkit есть элемент управления, обеспечивающий подобный подход: `NoBot`. Это проще преодолеть, чем CAPTCHA, но очень легко использовать и году на веб-сайтах, например в блогах, где они считаются успешными, если большинство нежелательных попыток нежелательной почты отменяются, что может сделать элемент управления `NoBot`.

`NoBot` перехватывает обратную передачу текущей веб-формы ASP.NET при соблюдении хотя бы одного из следующих условий:

- Браузеру не удается решить головоломку JavaScript (например, при деактивации JavaScript)
- Пользователь отправил форму на быструю
- IP-адрес клиента передавал форму слишком часто в течение определенного периода времени.

Чтобы проверить эти условия, элементу управления `NoBot` требуются эти атрибуты (все они являются необязательными):

- `ResponseMinimumDelaySeconds` минимальное количество секунд между обратными передачами
- `CutoffWindowSeconds` интервал времени, в течение которого обратная передача с одного IP-адреса является мерами
- `CutoffMaximumInstances` максимальное количество секунд на интервал времени

Следующая разметка требует, чтобы по крайней мере две секунды пройдут между обратными передачами и что в течение 30-секундного интервала было только пять обратных передач или меньше.

[!code-aspx[Main](fighting-bots-cs/samples/sample1.aspx)]

Затем, как обычно, необходимо включить `ScriptManager` на страницу, чтобы загрузить библиотеку ASP.NET AJAX и воспользоваться набором элементов управления:

[!code-aspx[Main](fighting-bots-cs/samples/sample2.aspx)]

Так как большая часть проверок `NoBot` выполняется на стороне сервера, необходимо проверить результат таких проверок. Это можно сделать, вызвав метод `IsValid()` метода `NoBot`. Он имеет один аргумент (в виде `out` параметра или`ByRef`), который имеет тип `NoBotState`. Его строковое представление содержит причину сбоя проверки и `Valid` в противном случае. Следующий код выводит сообщение в соответствии с результатом `NoBot`:

[!code-aspx[Main](fighting-bots-cs/samples/sample3.aspx)]

Наконец, необходимо отправить форму и элемент Label для вывода сообщения, и все готово.

[!code-aspx[Main](fighting-bots-cs/samples/sample4.aspx)]

При запуске этого скрипта и отключении JavaScript или отправке формы в течение первых двух секунд или при отправке формы семь раз в течение тридцати секунд появляется сообщение об ошибке. Тем не менее следует использовать этот элемент управления в разумном объеме, поскольку активирован JavaScript только около 90-95% пользователей, поэтому 5-10% пользователей не сможет протестировать `NoBot`.

[![это сообщение об ошибке могло быть вызвано программой-роботом](fighting-bots-cs/_static/image2.png)](fighting-bots-cs/_static/image1.png)

Это сообщение об ошибке могло быть вызвано программой-роботом ([щелкните, чтобы просмотреть изображение с полным размером](fighting-bots-cs/_static/image3.png))

> [!div class="step-by-step"]
> [Дальше](fighting-bots-vb.md)
