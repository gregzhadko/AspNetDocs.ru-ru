---
uid: web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
title: Борьба с программами-роботами (C#) | Документация Майкрософт
author: wenz
description: Автоматические программы-роботы Гипс блогов и других веб-сайтов с нежелательной почтой, отправка форм комментарий без вмешательства пользователя. Элемент управления NoBot в ASP.NET AJAX Con...
ms.author: riande
ms.date: 06/02/2008
ms.assetid: 0a1917e0-884a-4576-8e93-9ed660faae51
msc.legacyurl: /web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
msc.type: authoredcontent
ms.openlocfilehash: 52ed34e7640cd125a3b4c3b50ab760a7c1d713f1
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57035401"
---
<a name="fighting-bots-c"></a>Борьба с ботами (C#)
====================
по [Кристиан Wenz](https://github.com/wenz)

[Скачать код](http://download.microsoft.com/download/9/3/f/93f8daea-bebd-4821-833b-95205389c7d0/NoBot0.cs.zip) или [скачать PDF](http://download.microsoft.com/download/b/6/a/b6ae89ee-df69-4c87-9bfb-ad1eb2b23373/nobot0CS.pdf)

> Автоматические программы-роботы Гипс блогов и других веб-сайтов с нежелательной почтой, отправка форм комментарий без вмешательства пользователя. Элемент управления NoBot в ASP.NET AJAX Control Toolkit, помогающих бороться с этими программами-роботами.


## <a name="overview"></a>Обзор

Автоматические программы-роботы Гипс блогов и других веб-сайтов с нежелательной почтой, отправка форм комментарий без вмешательства пользователя. Элемент управления NoBot в ASP.NET AJAX Control Toolkit, помогающих бороться с этими программами-роботами.

## <a name="steps"></a>Шаги

Распространенный подход к вообще отменить эффект действия программ-роботов является использование test CAPTCHAs полностью автоматизировать общих Тьюринга о компьютерах и люди друг от друга. Тест Тьюринга изначально теста кто-то необходимости принятии решений о связи партнера человек или компьютере. В веб-тест CAPTCHA обычно состоит из образа на некоторые искаженные буквы на нем. Суть в том что только человек может читать буквы на изображение, в то время как алгоритмы OCR завершится ошибкой.

Существует ряд преимуществ и недостатков этого подхода, но обсуждение этого вопроса выходит за рамки данного руководства. Однако есть элемент управления в наборе элементов управления AJAX ASP.NET, который предоставляет подобный подход: `NoBot`. Это проще, чем тест CAPTCHA преодолеть, но очень прост в использовании и платежах чрезвычайно эффективно на веб-сайтах, такие как блоги, где он считается успешной, если большинство нежелательной почты попыток нарушается, который `NoBot` управления звонками.

`NoBot` перехватывает обратной передачи текущего веб-формы ASP.NET, если соблюдается по крайней мере одно из следующих условий:

- Браузер не сможет решить головоломку JavaScript (например если JavaScript отключен)
- Пользователь отправил форму, чтобы быстро
- IP-адрес клиента отправки формы Сотрудник слишком часто в определенный период времени.

Чтобы проверить выполнение этих условий `NoBot` элемент управления требует эти атрибуты (все из них необязательно):

- `ResponseMinimumDelaySeconds` Минимальное количество секунд между обратными передачами
- `CutoffWindowSeconds` Продолжительность интервала времени, в котором обратные передачи из одного IP-адреса являются мерами
- `CutoffMaximumInstances` Максимальное количество секунд в интервале времени

Следующие требования разметки, по крайней мере две секунды должно пройти между обратными передачами, и существует только пять обратных передач или меньше, в пределах 30-секундного интервала:

[!code-aspx[Main](fighting-bots-cs/samples/sample1.aspx)]

Затем обычным образом Убедитесь, что для включения `ScriptManager` на странице, ASP.NET AJAX library загружается и может использоваться набор элементов управления:

[!code-aspx[Main](fighting-bots-cs/samples/sample2.aspx)]

Так как большинство проверок `NoBot` делает происходят на стороне сервера, необходимо проверить результат этих проверок. Это можно сделать, вызвав `NoBot` `IsValid()` метод. Он имеет один аргумент (как `out` параметр /`ByRef` параметров) типа `NoBotState`. Строковое представление содержит причину, если проверка завершается неудачно и `Valid` в противном случае. Следующий код выводит сообщение в соответствии с `NoBot`в результате:

[!code-aspx[Main](fighting-bots-cs/samples/sample3.aspx)]

Наконец вам потребуется формы для отправки и элемента label для вывода сообщения и все готово!

[!code-aspx[Main](fighting-bots-cs/samples/sample4.aspx)]

При выполнении этого скрипта и деактивировать JavaScript или отправить форму в течение первых двух секунд или отправить форму семь раз в течение 30 секунд, вы получите сообщение об ошибке. Тем не менее этот элемент управления использовать осмотрительно, поскольку только около 90-95% пользователи активировали JavaScript, таким образом 5 – 10% пользователей не удастся `NoBot`элемента теста.


[![Это сообщение об ошибке может быть вызвано программы-робота](fighting-bots-cs/_static/image2.png)](fighting-bots-cs/_static/image1.png)

Это сообщение об ошибке может быть вызвано программы-робота ([Просмотр полноразмерного изображения](fighting-bots-cs/_static/image3.png))

> [!div class="step-by-step"]
> [Вперед](fighting-bots-vb.md)
