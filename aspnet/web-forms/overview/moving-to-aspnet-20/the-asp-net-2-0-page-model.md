---
uid: web-forms/overview/moving-to-aspnet-20/the-asp-net-2-0-page-model
title: Модель страницы ASP.NET 2.0 (англ.) Документы Майкрософт
author: rick-anderson
description: В ASP.NET 1.x у разработчиков был выбор между встроенной моделью кода и моделью кода за кодом. Код-за может быть реализована с помощью либо Src attr ...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: af4575a3-0ae3-4638-ba4d-218fad7a1642
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/the-asp-net-2-0-page-model
msc.type: authoredcontent
ms.openlocfilehash: 6c2435a06d04209db21fb8e075f68ff0b7a9ef7e
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542863"
---
# <a name="the-aspnet-20-page-model"></a><span data-ttu-id="4b38e-104">Модель страницы ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-104">The ASP.NET 2.0 Page Model</span></span>

<span data-ttu-id="4b38e-105">[корпорацией Майкрософт](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="4b38e-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="4b38e-106">В ASP.NET 1.x у разработчиков был выбор между встроенной моделью кода и моделью кода за кодом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-106">In ASP.NET 1.x, developers had a choice between an inline code model and a code-behind code model.</span></span> <span data-ttu-id="4b38e-107">Закодава может быть реализован либо атрибут Src, @Page либо атрибут CodeBehind директивы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-107">Code-behind could be implemented using either the Src attribute or the CodeBehind attribute of the @Page directive.</span></span> <span data-ttu-id="4b38e-108">В ASP.NET 2.0 у разработчиков по-прежнему есть выбор между встроенным кодом и кодом, но были значительные усовершенствования модели, стоящей за кодом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-108">In ASP.NET 2.0, developers still have a choice between inline code and code-behind, but there have been significant enhancements to the code-behind model.</span></span>

<span data-ttu-id="4b38e-109">В ASP.NET 1.x у разработчиков был выбор между встроенной моделью кода и моделью кода за кодом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-109">In ASP.NET 1.x, developers had a choice between an inline code model and a code-behind code model.</span></span> <span data-ttu-id="4b38e-110">Закодава может быть реализован либо атрибут Src, @Page либо атрибут CodeBehind директивы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-110">Code-behind could be implemented using either the Src attribute or the CodeBehind attribute of the @Page directive.</span></span> <span data-ttu-id="4b38e-111">В ASP.NET 2.0 у разработчиков по-прежнему есть выбор между встроенным кодом и кодом, но были значительные усовершенствования модели, стоящей за кодом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-111">In ASP.NET 2.0, developers still have a choice between inline code and code-behind, but there have been significant enhancements to the code-behind model.</span></span>

## <a name="improvements-in-the-code-behind-model"></a><span data-ttu-id="4b38e-112">Улучшения в модели code-behind</span><span class="sxs-lookup"><span data-stu-id="4b38e-112">Improvements in the Code-Behind Model</span></span>

<span data-ttu-id="4b38e-113">Для того, чтобы полностью понять изменения в модели за кодом в ASP.NET 2.0, лучше всего быстро пересмотреть модель, как она существовала в ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="4b38e-113">In order to fully understand the changes in the code-behind model in ASP.NET 2.0, its best to quickly review the model as it existed in ASP.NET 1.x.</span></span>

## <a name="the-code-behind-model-in-aspnet-1x"></a><span data-ttu-id="4b38e-114">Модель Code-Behind в ASP.NET 1.x</span><span class="sxs-lookup"><span data-stu-id="4b38e-114">The Code-Behind Model in ASP.NET 1.x</span></span>

<span data-ttu-id="4b38e-115">В ASP.NET 1.x модель за кодом состояла из файла ASPX (Webform) и файла с кодом, содержащего программный код.</span><span class="sxs-lookup"><span data-stu-id="4b38e-115">In ASP.NET 1.x, the code-behind model consisted of an ASPX file (the Webform) and a code-behind file containing programming code.</span></span> <span data-ttu-id="4b38e-116">Эти два файла @Page были подключены с помощью директивы в файле ASPX.</span><span class="sxs-lookup"><span data-stu-id="4b38e-116">The two files were connected using the @Page directive in the ASPX file.</span></span> <span data-ttu-id="4b38e-117">Каждый элемент управления на странице ASPX имел соответствующее заявление в файле за кодом в качестве переменной экземпляра.</span><span class="sxs-lookup"><span data-stu-id="4b38e-117">Each control on the ASPX page had a corresponding declaration in the code-behind file as an instance variable.</span></span> <span data-ttu-id="4b38e-118">Файл с кодом также содержал код для привязки событий и сгенерированный код, необходимый для дизайнера Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4b38e-118">The code-behind file also contained code for event binding and generated code necessary for the Visual Studio designer.</span></span> <span data-ttu-id="4b38e-119">Эта модель работала довольно хорошо, но из-за того, что каждый элемент ASP.NET на странице ASPX требовал соответствующего кода в файле сзади кода, не было истинного разделения кода и содержимого.</span><span class="sxs-lookup"><span data-stu-id="4b38e-119">This model worked fairly well, but because every ASP.NET element in the ASPX page required corresponding code in the code-behind file, there was no true separation of code and content.</span></span> <span data-ttu-id="4b38e-120">Например, если дизайнер добавил новый элемент управления сервером в файл ASPX за пределами Visual Studio IDE, приложение может сломаться из-за отсутствия декларации для этого элемента управления в файле с кодом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-120">For example, if a designer added a new server control to an ASPX file outside of the Visual Studio IDE, the application would break due to the absence of a declaration for that control in the code-behind file.</span></span>

## <a name="the-code-behind-model-in-aspnet-20"></a><span data-ttu-id="4b38e-121">Модель Code-Behind в ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-121">The Code-Behind Model in ASP.NET 2.0</span></span>

<span data-ttu-id="4b38e-122">ASP.NET 2.0 значительно улучшает эту модель.</span><span class="sxs-lookup"><span data-stu-id="4b38e-122">ASP.NET 2.0 greatly improves upon this model.</span></span> <span data-ttu-id="4b38e-123">В ASP.NET 2.0, код-за текует с использованием новых *частичных классов, предусмотренных* в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-123">In ASP.NET 2.0, code-behind is implemented using the new *partial classes* provided in ASP.NET 2.0.</span></span> <span data-ttu-id="4b38e-124">Класс за кодом в ASP.NET 2.0 определяется как частичный класс, означающий, что он содержит только часть определения класса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-124">The code-behind class in ASP.NET 2.0 is defined as a partial class meaning that it contains only part of the class definition.</span></span> <span data-ttu-id="4b38e-125">Оставшаяся часть определения класса динамически генерируется ASP.NET 2.0 с помощью страницы ASPX во время выполнения или при предварительной компилировании веб-узла.</span><span class="sxs-lookup"><span data-stu-id="4b38e-125">The remaining part of the class definition is dynamically generated by ASP.NET 2.0 using the ASPX page at runtime or when the Web site is precompiled.</span></span> <span data-ttu-id="4b38e-126">Связь между файлом с кодом и страницей ASPX по-прежнему устанавливается с помощью директивы «Страница».</span><span class="sxs-lookup"><span data-stu-id="4b38e-126">The link between the code-behind file and the ASPX page is still established using the @ Page directive.</span></span> <span data-ttu-id="4b38e-127">Однако вместо атрибута CodeBehind или Src ASP.NET 2.0 теперь использует атрибут CodeFile.</span><span class="sxs-lookup"><span data-stu-id="4b38e-127">However, instead of a CodeBehind or Src attribute, ASP.NET 2.0 now uses the CodeFile attribute.</span></span> <span data-ttu-id="4b38e-128">Атрибут Inherits также используется для указания имени класса для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-128">The Inherits attribute is also used to specify the class name for the page.</span></span>

<span data-ttu-id="4b38e-129">Типичная директива «Страница» может выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-129">A typical @ Page directive might look like this:</span></span>

[!code-aspx[Main](the-asp-net-2-0-page-model/samples/sample1.aspx)]

<span data-ttu-id="4b38e-130">Типичное определение класса в ASP.NET 2.0 код-за файл может выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-130">A typical class definition in an ASP.NET 2.0 code-behind file might look like this:</span></span>

[!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample2.cs)]

> [!NOTE]
> <span data-ttu-id="4b38e-131">Си-Эи и Visual Basic являются единственными управляемыми языками, которые в настоящее время поддерживают частичные классы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-131">C# and Visual Basic are the only managed languages that currently support partial classes.</span></span> <span data-ttu-id="4b38e-132">Таким образом, разработчики, использующие J'A, не смогут использовать модель за кодом в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-132">Therefore, developers using J# will not be able to use the code-behind model in ASP.NET 2.0.</span></span>

<span data-ttu-id="4b38e-133">Новая модель улучшает модель, за которой стоит код, поскольку разработчики теперь будут иметь файлы кода, содержащие только созданный ими код.</span><span class="sxs-lookup"><span data-stu-id="4b38e-133">The new model enhances the code-behind model because developers will now have code files that contain only the code that they have created.</span></span> <span data-ttu-id="4b38e-134">Он также предусматривает истинное разделение кода и содержимого, поскольку в файле с переменным кодом нет переменных деклараций экземпляра.</span><span class="sxs-lookup"><span data-stu-id="4b38e-134">It also provides for a true separation of code and content because there are no instance variable declarations in the code-behind file.</span></span>

> [!NOTE]
> <span data-ttu-id="4b38e-135">Поскольку частичный класс для страницы ASPX — это место, где происходит привязка событий, разработчики Visual Basic могут реализовать небольшое увеличение производительности, используя ключевое слово Handles в коде позади, чтобы связать события.</span><span class="sxs-lookup"><span data-stu-id="4b38e-135">Because the partial class for the ASPX page is where event binding takes place, Visual Basic developers can realize a slight performance increase by using the Handles keyword in code-behind to bind events.</span></span> <span data-ttu-id="4b38e-136">У C' нет эквивалентного ключевого слова.</span><span class="sxs-lookup"><span data-stu-id="4b38e-136">C# has no equivalent keyword.</span></span>

## <a name="new--page-directive-attributes"></a><span data-ttu-id="4b38e-137">Новые атрибуты Директивы страницы</span><span class="sxs-lookup"><span data-stu-id="4b38e-137">New @ Page Directive Attributes</span></span>

<span data-ttu-id="4b38e-138">ASP.NET 2.0 добавляет много новых атрибутов в директиву «Страница».</span><span class="sxs-lookup"><span data-stu-id="4b38e-138">ASP.NET 2.0 adds many new attributes to the @ Page directive.</span></span> <span data-ttu-id="4b38e-139">Следующие атрибуты являются новыми в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-139">The following attributes are new in ASP.NET 2.0.</span></span>

## <a name="async"></a><span data-ttu-id="4b38e-140">Async</span><span class="sxs-lookup"><span data-stu-id="4b38e-140">Async</span></span>

<span data-ttu-id="4b38e-141">Атрибут Async позволяет настроить страницу для асинхронного выполнения.</span><span class="sxs-lookup"><span data-stu-id="4b38e-141">The Async attribute allows you to configure page to be executed asynchronously.</span></span> <span data-ttu-id="4b38e-142">Ну покрытия асинхронных страниц позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-142">Well cover asynchronous pages later in this module.</span></span>

## <a name="asynctimeout"></a><span data-ttu-id="4b38e-143">AsyncTimeout</span><span class="sxs-lookup"><span data-stu-id="4b38e-143">AsyncTimeout</span></span>

<span data-ttu-id="4b38e-144">Указано тайм-аут для асинхронных страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-144">Specified the timeout for asynchronous pages.</span></span> <span data-ttu-id="4b38e-145">По умолчанию она составляет 45 секунд.</span><span class="sxs-lookup"><span data-stu-id="4b38e-145">The default is 45 seconds.</span></span>

## <a name="codefile"></a><span data-ttu-id="4b38e-146">Codefile</span><span class="sxs-lookup"><span data-stu-id="4b38e-146">CodeFile</span></span>

<span data-ttu-id="4b38e-147">Атрибут CodeFile является заменой атрибута CodeBehind в Visual Studio 2002/2003.</span><span class="sxs-lookup"><span data-stu-id="4b38e-147">The CodeFile attribute is the replacement for the CodeBehind attribute in Visual Studio 2002/2003.</span></span>

### <a name="codefilebaseclass"></a><span data-ttu-id="4b38e-148">CodeFileBaseClass</span><span class="sxs-lookup"><span data-stu-id="4b38e-148">CodeFileBaseClass</span></span>

<span data-ttu-id="4b38e-149">Атрибут CodeFileBaseClass используется в тех случаях, когда требуется, чтобы несколько страниц были получены из одного базового класса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-149">The CodeFileBaseClass attribute is used in cases where you want multiple pages to derive from a single base class.</span></span> <span data-ttu-id="4b38e-150">Из-за реализации частичных классов в ASP.NET, без этого атрибута базовый класс, который использует общие поля для эталонных элементов управления, заявленные на странице ASPX, не будет работать должным образом, поскольку движок компиляции ASP.NET автоматически создает новые элементы на основе элементов управления на странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-150">Because of the implementation of partial classes in ASP.NET, without this attribute, a base class that uses shared common fields to reference controls declared in an ASPX page would not work properly because ASP.NETs compilation engine will automatically create new members based on controls in the page.</span></span> <span data-ttu-id="4b38e-151">Поэтому, если вы хотите общий базовый класс для двух или более страниц в ASP.NET, вам нужно будет определить указать базовый класс в атрибуте CodeFileBaseClass, а затем получить каждый класс страниц из этого базового класса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-151">Therefore, if you want a common base class for two or more pages in ASP.NET, you will need to define specify your base class in the CodeFileBaseClass attribute and then derive each pages class from that base class.</span></span> <span data-ttu-id="4b38e-152">Атрибут CodeFile также требуется при использовании этого атрибута.</span><span class="sxs-lookup"><span data-stu-id="4b38e-152">The CodeFile attribute is also required when this attribute is used.</span></span>

## <a name="compilationmode"></a><span data-ttu-id="4b38e-153">КомпиляцияMode</span><span class="sxs-lookup"><span data-stu-id="4b38e-153">CompilationMode</span></span>

<span data-ttu-id="4b38e-154">Этот атрибут позволяет установить свойство CompilationMode страницы ASPX.</span><span class="sxs-lookup"><span data-stu-id="4b38e-154">This attribute allows you to set the CompilationMode property of the ASPX page.</span></span> <span data-ttu-id="4b38e-155">Свойство CompilationMode представляет собой перечисление, содержащее значения **Всегда,** **Авто**и **Никогда.**</span><span class="sxs-lookup"><span data-stu-id="4b38e-155">The CompilationMode property is an enumeration containing the values **Always**, **Auto**, and **Never**.</span></span> <span data-ttu-id="4b38e-156">По умолчанию **всегда**.</span><span class="sxs-lookup"><span data-stu-id="4b38e-156">The default is **Always**.</span></span> <span data-ttu-id="4b38e-157">Настройка **Auto** предотвратит динамическую компиляцию страницы ASP.NET, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-157">The **Auto** setting will prevent ASP.NET from dynamically compiling the page if possible.</span></span> <span data-ttu-id="4b38e-158">Исключение страниц из динамической компиляции повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="4b38e-158">Excluding pages from dynamic compilation increases performance.</span></span> <span data-ttu-id="4b38e-159">Однако, если исключенная страница содержит код, который должен быть скомпилирован, ошибка будет брошена при просмотре страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-159">However, if a page that is excluded contains that code that must be compiled, an error will be thrown when the page is browsed.</span></span>

## <a name="enableeventvalidation"></a><span data-ttu-id="4b38e-160">ВключитьСобытие</span><span class="sxs-lookup"><span data-stu-id="4b38e-160">EnableEventValidation</span></span>

<span data-ttu-id="4b38e-161">Этот атрибут определяет, проверяются ли события послеотката и обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="4b38e-161">This attribute specifies whether or not postback and callback events are validated.</span></span> <span data-ttu-id="4b38e-162">При включении аргументы в события послеотката или обратного откидки проверяются, чтобы убедиться, что они возникли из элемента управления сервера, который первоначально их визуалировал.</span><span class="sxs-lookup"><span data-stu-id="4b38e-162">When this is enabled, arguments to postback or callback events are checked to ensure that they originated from the server control that originally rendered them.</span></span>

## <a name="enabletheming"></a><span data-ttu-id="4b38e-163">EnableTheming</span><span class="sxs-lookup"><span data-stu-id="4b38e-163">EnableTheming</span></span>

<span data-ttu-id="4b38e-164">Этот атрибут определяет, используются ли на странице ASP.NET темы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-164">This attribute specifies whether or not ASP.NET themes are used on a page.</span></span> <span data-ttu-id="4b38e-165">По умолчанию **является ложным.**</span><span class="sxs-lookup"><span data-stu-id="4b38e-165">The default is **false**.</span></span> <span data-ttu-id="4b38e-166">ASP.NET темы рассматриваются в [модуле 10](profiles-themes-and-web-parts.md).</span><span class="sxs-lookup"><span data-stu-id="4b38e-166">ASP.NET themes are covered in [Module 10](profiles-themes-and-web-parts.md).</span></span>

## <a name="linepragmas"></a><span data-ttu-id="4b38e-167">LinePragmas</span><span class="sxs-lookup"><span data-stu-id="4b38e-167">LinePragmas</span></span>

<span data-ttu-id="4b38e-168">Этот атрибут определяет, следует ли добавлять прагмы строк во время компиляции.</span><span class="sxs-lookup"><span data-stu-id="4b38e-168">This attribute specifies whether line pragmas should be added during compilation.</span></span> <span data-ttu-id="4b38e-169">Линейные прагмы — это варианты, используемые отладчиками для обозначения определенных разделов кода.</span><span class="sxs-lookup"><span data-stu-id="4b38e-169">Line pragmas are options used by debuggers to mark specific sections of code.</span></span>

## <a name="maintainscrollpositiononpostback"></a><span data-ttu-id="4b38e-170">ВедениеScrollpositionOnPostback</span><span class="sxs-lookup"><span data-stu-id="4b38e-170">MaintainScrollPositionOnPostback</span></span>

<span data-ttu-id="4b38e-171">Этот атрибут определяет, вводится ли JavaScript на страницу для поддержания позиции прокрутки между postbacks.</span><span class="sxs-lookup"><span data-stu-id="4b38e-171">This attribute specifies whether or not JavaScript is injected into the page in order to maintain scroll position between postbacks.</span></span> <span data-ttu-id="4b38e-172">Этот атрибут **является ложным** по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4b38e-172">This attribute is **false** by default.</span></span>

<span data-ttu-id="4b38e-173">Когда этот атрибут **истинен,** &lt;ASP.NET&gt; добавим блок скрипта на postback который смотрит как это:</span><span class="sxs-lookup"><span data-stu-id="4b38e-173">When this attribute is **true**, ASP.NET will add a &lt;script&gt; block on postback that looks like this:</span></span>

[!code-html[Main](the-asp-net-2-0-page-model/samples/sample3.html)]

<span data-ttu-id="4b38e-174">Обратите внимание, что src для этого блока скрипта WebResource.axd.</span><span class="sxs-lookup"><span data-stu-id="4b38e-174">Note that the src for this script block is WebResource.axd.</span></span> <span data-ttu-id="4b38e-175">Этот ресурс не является физическим путем.</span><span class="sxs-lookup"><span data-stu-id="4b38e-175">This resource is not a physical path.</span></span> <span data-ttu-id="4b38e-176">Когда этот скрипт запрашивается, ASP.NET динамически создает сценарий.</span><span class="sxs-lookup"><span data-stu-id="4b38e-176">When this script is requested, ASP.NET dynamically builds the script.</span></span>

### <a name="masterpagefile"></a><span data-ttu-id="4b38e-177">MasterPageFile</span><span class="sxs-lookup"><span data-stu-id="4b38e-177">MasterPageFile</span></span>

<span data-ttu-id="4b38e-178">Этот атрибут определяет файл главной страницы для текущей страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-178">This attribute specifies the master page file for the current page.</span></span> <span data-ttu-id="4b38e-179">Путь может быть как относительным, так и абсолютным.</span><span class="sxs-lookup"><span data-stu-id="4b38e-179">The path can be relative or absolute.</span></span> <span data-ttu-id="4b38e-180">Мастер-страницы покрыты [модулем 4](master-pages.md).</span><span class="sxs-lookup"><span data-stu-id="4b38e-180">Master pages are covered in [Module 4](master-pages.md).</span></span>

## <a name="stylesheettheme"></a><span data-ttu-id="4b38e-181">StyleSheetTheme</span><span class="sxs-lookup"><span data-stu-id="4b38e-181">StyleSheetTheme</span></span>

<span data-ttu-id="4b38e-182">Этот атрибут позволяет переопределить свойства внешнего вида пользовательского интерфейса, определяемые темой ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-182">This attribute allows you to override user-interface appearance properties defined by an ASP.NET 2.0 theme.</span></span> <span data-ttu-id="4b38e-183">Темы описаны в [модуле 10](profiles-themes-and-web-parts.md).</span><span class="sxs-lookup"><span data-stu-id="4b38e-183">Themes are covered in [Module 10](profiles-themes-and-web-parts.md).</span></span>

## <a name="theme"></a><span data-ttu-id="4b38e-184">Тема</span><span class="sxs-lookup"><span data-stu-id="4b38e-184">Theme</span></span>

<span data-ttu-id="4b38e-185">Определяет тему для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-185">Specifies the theme for the page.</span></span> <span data-ttu-id="4b38e-186">Если значение не указано для атрибута StyleSheetTheme, атрибут «Тема» переопределяет все стили, применяемые к элементам управления на странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-186">If a value is not specified for the StyleSheetTheme attribute, the Theme attribute overrides all styles applied to controls on the page.</span></span>

## <a name="title"></a><span data-ttu-id="4b38e-187">Title</span><span class="sxs-lookup"><span data-stu-id="4b38e-187">Title</span></span>

<span data-ttu-id="4b38e-188">Устанавливает заголовок для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-188">Sets the title for the page.</span></span> <span data-ttu-id="4b38e-189">Значение, указанное здесь, &lt;&gt; будет отображаться в элементе заголовка отображаемых страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-189">The value specified here will appear in the &lt;title&gt; element of the rendered page.</span></span>

### <a name="viewstateencryptionmode"></a><span data-ttu-id="4b38e-190">ViewStateEncryptionMode</span><span class="sxs-lookup"><span data-stu-id="4b38e-190">ViewStateEncryptionMode</span></span>

<span data-ttu-id="4b38e-191">Устанавливает значение для перечисления ViewStateEncryptionMode.</span><span class="sxs-lookup"><span data-stu-id="4b38e-191">Sets the value for the ViewStateEncryptionMode enumeration.</span></span> <span data-ttu-id="4b38e-192">Доступные значения **всегда,** **Авто**, и **никогда**.</span><span class="sxs-lookup"><span data-stu-id="4b38e-192">The available values are **Always**, **Auto**, and **Never**.</span></span> <span data-ttu-id="4b38e-193">Значение по умолчанию **— Авто**. Когда этот атрибут установлен на значение **Auto,** состояние представления зашифровано, это контроль запрашивает его, позвонив **методу шифрования RegisterRequiresViewState.**</span><span class="sxs-lookup"><span data-stu-id="4b38e-193">The default value is **Auto**. When this attribute is set to a value of **Auto**, viewstate is encrypted is a control requests it by calling the **RegisterRequiresViewStateEncryption** method.</span></span>

## <a name="setting-public-property-values-via-the--page-directive"></a><span data-ttu-id="4b38e-194">Установка значений государственного имущества с помощью Директивы о страницах</span><span class="sxs-lookup"><span data-stu-id="4b38e-194">Setting Public Property Values via the @ Page Directive</span></span>

<span data-ttu-id="4b38e-195">Еще одной новой возможностью директивы «Страница» в ASP.NET 2.0 является возможность установить начальное значение публичных свойств базового класса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-195">Another new capability of the @ Page directive in ASP.NET 2.0 is the ability to set the initial value of public properties of a base class.</span></span> <span data-ttu-id="4b38e-196">Предположим, например, что у вас есть общедоступное свойство **someText** в базовом классе, и вы бы хотели, чтобы она была инициализована **hello** при загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-196">Suppose, for example, that you have a public property called **SomeText** in your base class and you d like it to be initialized to **Hello** when a page is loaded.</span></span> <span data-ttu-id="4b38e-197">Вы можете достичь этого, просто установив значение в директиве «Страница» следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-197">You can accomplish this by simply setting the value in the @ Page directive like so:</span></span>

[!code-aspx[Main](the-asp-net-2-0-page-model/samples/sample4.aspx)]

<span data-ttu-id="4b38e-198">Атрибут **SomeText** директивы «Страница» устанавливает начальное значение свойства SomeText в базовом классе *на Hello!*.</span><span class="sxs-lookup"><span data-stu-id="4b38e-198">The **SomeText** attribute of the @ Page directive sets the initial value of the SomeText property in the base class to *Hello!*.</span></span> <span data-ttu-id="4b38e-199">Видео ниже представляет собой пошаговый шаг по установлению начальной стоимости государственной собственности в базовом классе с использованием директивы «Страница».</span><span class="sxs-lookup"><span data-stu-id="4b38e-199">The video below is a walkthrough of setting the initial value of a public property in a base class using the @ Page directive.</span></span>

![](the-asp-net-2-0-page-model/_static/image1.png)

[<span data-ttu-id="4b38e-200">Открытое полноэкранное видео</span><span class="sxs-lookup"><span data-stu-id="4b38e-200">Open Full-Screen Video</span></span>](the-asp-net-2-0-page-model/_static/setprop1.wmv)

## <a name="new-public-properties-of-the-page-class"></a><span data-ttu-id="4b38e-201">Новые публичные свойства класса Страницы</span><span class="sxs-lookup"><span data-stu-id="4b38e-201">New Public Properties of the Page Class</span></span>

<span data-ttu-id="4b38e-202">Следующие общественные свойства являются новыми в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-202">The following public properties are new in ASP.NET 2.0.</span></span>

## <a name="apprelativetemplatesourcedirectory"></a><span data-ttu-id="4b38e-203">AppRelativeTemplateИсточник</span><span class="sxs-lookup"><span data-stu-id="4b38e-203">AppRelativeTemplateSourceDirectory</span></span>

<span data-ttu-id="4b38e-204">Возвращает относительно-относительный путь приложения на страницу или элемент управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-204">Returns the application-relative path to the page or control.</span></span> <span data-ttu-id="4b38e-205">Например, для страницы, расположенной по адресу, http://app/folder/page.aspxсвойство возвращается q/folder/.</span><span class="sxs-lookup"><span data-stu-id="4b38e-205">For example, for a page located at http://app/folder/page.aspx, the property returns ~/folder/.</span></span>

## <a name="apprelativevirtualpath"></a><span data-ttu-id="4b38e-206">AppRelativeVirtualPath</span><span class="sxs-lookup"><span data-stu-id="4b38e-206">AppRelativeVirtualPath</span></span>

<span data-ttu-id="4b38e-207">Возвращает относительный виртуальный путь каталога на страницу или элемент управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-207">Returns the relative virtual directory path to the page or control.</span></span> <span data-ttu-id="4b38e-208">Например, для страницы, расположенной по адресу http://app/folder/page.aspx, свойство возвращается q/folder/page.aspx.</span><span class="sxs-lookup"><span data-stu-id="4b38e-208">For example for a page located at http://app/folder/page.aspx, the property returns ~/folder/page.aspx.</span></span>

## <a name="asynctimeout"></a><span data-ttu-id="4b38e-209">AsyncTimeout</span><span class="sxs-lookup"><span data-stu-id="4b38e-209">AsyncTimeout</span></span>

<span data-ttu-id="4b38e-210">Получает или устанавливает тайм-аут, используемый для асинхронной обработки страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-210">Gets or sets the timeout used for asynchronous page handling.</span></span> <span data-ttu-id="4b38e-211">(Асинхронные страницы будут покрыты позже в этом модуле.)</span><span class="sxs-lookup"><span data-stu-id="4b38e-211">(Asynchronous pages will be covered later in this module.)</span></span>

## <a name="clientquerystring"></a><span data-ttu-id="4b38e-212">КлиенткуриСтринг</span><span class="sxs-lookup"><span data-stu-id="4b38e-212">ClientQueryString</span></span>

<span data-ttu-id="4b38e-213">Свойство только для чтения, возвращающего строку запроса в запрашиваемом URL.</span><span class="sxs-lookup"><span data-stu-id="4b38e-213">A read-only property that returns the query string portion of the requested URL.</span></span> <span data-ttu-id="4b38e-214">Это значение закодировано URL.</span><span class="sxs-lookup"><span data-stu-id="4b38e-214">This value is URL encoded.</span></span> <span data-ttu-id="4b38e-215">Для его декодирования можно использовать метод UrlDecode класса HttpServerUtility.</span><span class="sxs-lookup"><span data-stu-id="4b38e-215">You can use the UrlDecode method of the HttpServerUtility class to decode it.</span></span>

## <a name="clientscript"></a><span data-ttu-id="4b38e-216">КлиентСкийсценарий</span><span class="sxs-lookup"><span data-stu-id="4b38e-216">ClientScript</span></span>

<span data-ttu-id="4b38e-217">Это свойство возвращает объект ClientScriptManager, который может быть использован для управления выбросом ASP.NETs сценария на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-217">This property returns a ClientScriptManager object that can be used to manage ASP.NETs emission of client-side script.</span></span> <span data-ttu-id="4b38e-218">(Класс ClientScriptManager описан позже в этом модуле.)</span><span class="sxs-lookup"><span data-stu-id="4b38e-218">(The ClientScriptManager class is covered later in this module.)</span></span>

## <a name="enableeventvalidation"></a><span data-ttu-id="4b38e-219">ВключитьСобытие</span><span class="sxs-lookup"><span data-stu-id="4b38e-219">EnableEventValidation</span></span>

<span data-ttu-id="4b38e-220">Это свойство контролирует, включена ли проверка событий для событий послевозврата и обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="4b38e-220">This property controls whether or not event validation is enabled for postback and callback events.</span></span> <span data-ttu-id="4b38e-221">При включении аргументы в события послеотката или обратного откаста проверяются, чтобы убедиться, что они возникли из управления сервера, который первоначально их визуализировал.</span><span class="sxs-lookup"><span data-stu-id="4b38e-221">When enabled, arguments to postback or callback events are verified to ensure that they originated from the server control that originally rendered them.</span></span>

## <a name="enabletheming"></a><span data-ttu-id="4b38e-222">EnableTheming</span><span class="sxs-lookup"><span data-stu-id="4b38e-222">EnableTheming</span></span>

<span data-ttu-id="4b38e-223">Это свойство получает или устанавливает Boolean, который определяет, является ли ASP.NET 2.0 тема относится к странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-223">This property gets or sets a Boolean that specifies whether or not an ASP.NET 2.0 theme applies to the page.</span></span>

## <a name="form"></a><span data-ttu-id="4b38e-224">Form</span><span class="sxs-lookup"><span data-stu-id="4b38e-224">Form</span></span>

<span data-ttu-id="4b38e-225">Это свойство возвращает форму HTML на странице ASPX в качестве объекта HTMLForm.</span><span class="sxs-lookup"><span data-stu-id="4b38e-225">This property returns the HTML form on the ASPX page as an HtmlForm object.</span></span>

## <a name="header"></a><span data-ttu-id="4b38e-226">Заголовок</span><span class="sxs-lookup"><span data-stu-id="4b38e-226">Header</span></span>

<span data-ttu-id="4b38e-227">Это свойство возвращает ссылку на объект HtmlHead, содержащий заголовок страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-227">This property returns a reference to an HtmlHead object that contains the page header.</span></span> <span data-ttu-id="4b38e-228">Вы можете использовать возвращенный объект HtmlHead для получения/установки листов стилей, меток Meta и т.д.</span><span class="sxs-lookup"><span data-stu-id="4b38e-228">You can use the returned HtmlHead object to get/set style sheets, Meta tags, etc.</span></span>

## <a name="idseparator"></a><span data-ttu-id="4b38e-229">ИдСепаратор</span><span class="sxs-lookup"><span data-stu-id="4b38e-229">IdSeparator</span></span>

<span data-ttu-id="4b38e-230">Это свойство только для чтения получает символ, который используется для разделения идентификаторов управления, когда ASP.NET строит уникальный идентификатор для элементов управления на странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-230">This read-only property gets the character that is used to separate control identifiers when ASP.NET is building a unique ID for controls on a page.</span></span> <span data-ttu-id="4b38e-231">Он не предназначен для использования непосредственно в вашем коде.</span><span class="sxs-lookup"><span data-stu-id="4b38e-231">It is not intended to be used directly from your code.</span></span>

## <a name="isasync"></a><span data-ttu-id="4b38e-232">IsAsync</span><span class="sxs-lookup"><span data-stu-id="4b38e-232">IsAsync</span></span>

<span data-ttu-id="4b38e-233">Это свойство позволяет асинхронные страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-233">This property allows for asynchronous pages.</span></span> <span data-ttu-id="4b38e-234">Асинхронные страницы обсуждаются позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-234">Asynchronous pages are discussed later in this module.</span></span>

## <a name="iscallback"></a><span data-ttu-id="4b38e-235">IsCallback</span><span class="sxs-lookup"><span data-stu-id="4b38e-235">IsCallback</span></span>

<span data-ttu-id="4b38e-236">Это только чтение собственности возвращается **верно,** если страница является результатом вызова обратно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-236">This read-only property returns **true** if the page is the result of a call back.</span></span> <span data-ttu-id="4b38e-237">Обратный вызов обсуждается позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-237">Call backs are discussed later in this module.</span></span>

## <a name="iscrosspagepostback"></a><span data-ttu-id="4b38e-238">IsCrossPagePostBack</span><span class="sxs-lookup"><span data-stu-id="4b38e-238">IsCrossPagePostBack</span></span>

<span data-ttu-id="4b38e-239">Это только чтение собственности **возвращается верно,** если страница является частью кросс-страницы postback.</span><span class="sxs-lookup"><span data-stu-id="4b38e-239">This read-only property returns **true** if the page is part of a cross-page postback.</span></span> <span data-ttu-id="4b38e-240">Кросс-страницы postbacks рассматриваются позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-240">Cross-page postbacks are covered later in this module.</span></span>

## <a name="items"></a><span data-ttu-id="4b38e-241">Items</span><span class="sxs-lookup"><span data-stu-id="4b38e-241">Items</span></span>

<span data-ttu-id="4b38e-242">Возвращает ссылку на экземпляр IDictionary, содержащий все объекты, хранящиеся в контексте страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-242">Returns a reference to an IDictionary instance that contains all objects stored in the pages context.</span></span> <span data-ttu-id="4b38e-243">Вы можете добавить элементы к этому объекту IDictionary, и они будут доступны вам в течение всего срока действия контекста.</span><span class="sxs-lookup"><span data-stu-id="4b38e-243">You can add items to this IDictionary object and they will be available to you throughout the lifetime of the context.</span></span>

## <a name="maintainscrollpositiononpostback"></a><span data-ttu-id="4b38e-244">ВедениеScrollpositiononPostback</span><span class="sxs-lookup"><span data-stu-id="4b38e-244">MaintainScrollPositionOnPostBack</span></span>

<span data-ttu-id="4b38e-245">Это свойство контролирует, излучает ли ASP.NET JavaScript, который поддерживает положение прокрутки страниц в браузере после возникновения postback.</span><span class="sxs-lookup"><span data-stu-id="4b38e-245">This property controls whether or not ASP.NET emits JavaScript that maintains the pages scroll position in the browser after a postback occurs.</span></span> <span data-ttu-id="4b38e-246">(Детали этого свойства обсуждались ранее в этом модуле.)</span><span class="sxs-lookup"><span data-stu-id="4b38e-246">(Details of this property were discussed earlier in this module.)</span></span>

## <a name="master"></a><span data-ttu-id="4b38e-247">master.</span><span class="sxs-lookup"><span data-stu-id="4b38e-247">Master</span></span>

<span data-ttu-id="4b38e-248">Это свойство только для чтения возвращает ссылку на экземпляр MasterPage для страницы, к которой была применена главная страница.</span><span class="sxs-lookup"><span data-stu-id="4b38e-248">This read-only property returns a reference to the MasterPage instance for a page to which a master page has been applied.</span></span>

## <a name="masterpagefile"></a><span data-ttu-id="4b38e-249">MasterPageFile</span><span class="sxs-lookup"><span data-stu-id="4b38e-249">MasterPageFile</span></span>

<span data-ttu-id="4b38e-250">Получает или устанавливает имя файла главной страницы для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-250">Gets or sets the master page filename for the page.</span></span> <span data-ttu-id="4b38e-251">Это свойство может быть установлено только в методе PreInit.</span><span class="sxs-lookup"><span data-stu-id="4b38e-251">This property can only be set in the PreInit method.</span></span>

## <a name="maxpagestatefieldlength"></a><span data-ttu-id="4b38e-252">MaxPageStateFieldДлин</span><span class="sxs-lookup"><span data-stu-id="4b38e-252">MaxPageStateFieldLength</span></span>

<span data-ttu-id="4b38e-253">Это свойство получает или устанавливает максимальную длину для состояния страниц в байтах.</span><span class="sxs-lookup"><span data-stu-id="4b38e-253">This property gets or sets the maximum length for the pages state in bytes.</span></span> <span data-ttu-id="4b38e-254">Если свойство настроено на положительное число, состояние представления страниц будет разбито на несколько скрытых полей, чтобы оно не превышало указанное количество байтов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-254">If the property is set to a positive number, the pages view state will be broken up into multiple hidden fields so that it doesnt exceed the number of bytes specified.</span></span> <span data-ttu-id="4b38e-255">Если свойство является отрицательным числом, состояние представления не будет разбито на куски.</span><span class="sxs-lookup"><span data-stu-id="4b38e-255">If the property is a negative number, the view state will not be broken into chunks.</span></span>

## <a name="pageadapter"></a><span data-ttu-id="4b38e-256">PageAdapter</span><span class="sxs-lookup"><span data-stu-id="4b38e-256">PageAdapter</span></span>

<span data-ttu-id="4b38e-257">Возвращает ссылку на объект PageAdapter, который изменяет страницу для запрашивающего браузера.</span><span class="sxs-lookup"><span data-stu-id="4b38e-257">Returns a reference to the PageAdapter object that modifies the page for the requesting browser.</span></span>

## <a name="previouspage"></a><span data-ttu-id="4b38e-258">ПредыдущаяСтраница</span><span class="sxs-lookup"><span data-stu-id="4b38e-258">PreviousPage</span></span>

<span data-ttu-id="4b38e-259">Возвращает ссылку на предыдущую страницу в случаях Server.Transfer или кросс-страницы postback.</span><span class="sxs-lookup"><span data-stu-id="4b38e-259">Returns a reference to the previous page in cases of a Server.Transfer or a cross-page postback.</span></span>

## <a name="skinid"></a><span data-ttu-id="4b38e-260">SkinID</span><span class="sxs-lookup"><span data-stu-id="4b38e-260">SkinID</span></span>

<span data-ttu-id="4b38e-261">Упомяните ASP.NET 2.0 кожи, чтобы применить к странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-261">Specifies the ASP.NET 2.0 skin to apply to the page.</span></span>

## <a name="stylesheettheme"></a><span data-ttu-id="4b38e-262">StyleSheetTheme</span><span class="sxs-lookup"><span data-stu-id="4b38e-262">StyleSheetTheme</span></span>

<span data-ttu-id="4b38e-263">Это свойство получает или устанавливает лист стиля, который применяется к странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-263">This property gets or sets the style sheet that is applied to a page.</span></span>

## <a name="templatecontrol"></a><span data-ttu-id="4b38e-264">TemplateControl</span><span class="sxs-lookup"><span data-stu-id="4b38e-264">TemplateControl</span></span>

<span data-ttu-id="4b38e-265">Возвращает ссылку на элемент управления для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-265">Returns a reference to the containing control for the page.</span></span>

## <a name="theme"></a><span data-ttu-id="4b38e-266">Тема</span><span class="sxs-lookup"><span data-stu-id="4b38e-266">Theme</span></span>

<span data-ttu-id="4b38e-267">Получает или устанавливает название темы ASP.NET 2.0, применяемой на странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-267">Gets or sets the name of the ASP.NET 2.0 theme applied to the page.</span></span> <span data-ttu-id="4b38e-268">Это значение должно быть установлено до метода PreInit.</span><span class="sxs-lookup"><span data-stu-id="4b38e-268">This value must be set prior to the PreInit method.</span></span>

## <a name="title"></a><span data-ttu-id="4b38e-269">Title</span><span class="sxs-lookup"><span data-stu-id="4b38e-269">Title</span></span>

<span data-ttu-id="4b38e-270">Это свойство получает или устанавливает название страницы, полученное от заголовка страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-270">This property gets or sets the title for the page as obtained from the pages header.</span></span>

## <a name="viewstateencryptionmode"></a><span data-ttu-id="4b38e-271">ViewStateEncryptionMode</span><span class="sxs-lookup"><span data-stu-id="4b38e-271">ViewStateEncryptionMode</span></span>

<span data-ttu-id="4b38e-272">Получает или устанавливает ViewStateEncryptionMode страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-272">Gets or sets the ViewStateEncryptionMode of the page.</span></span> <span data-ttu-id="4b38e-273">Смотрите подробное обсуждение этого свойства ранее в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-273">See a detailed discussion of this property earlier in this module.</span></span>

## <a name="new-protected-properties-of-the-page-class"></a><span data-ttu-id="4b38e-274">Новые защищенные свойства класса Страницы</span><span class="sxs-lookup"><span data-stu-id="4b38e-274">New Protected Properties of the Page Class</span></span>

<span data-ttu-id="4b38e-275">Ниже приведены новые защищенные свойства класса Страницы в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-275">The following are the new protected properties of the Page class in ASP.NET 2.0.</span></span>

## <a name="adapter"></a><span data-ttu-id="4b38e-276">Адаптер</span><span class="sxs-lookup"><span data-stu-id="4b38e-276">Adapter</span></span>

<span data-ttu-id="4b38e-277">Возвращает ссылку на ControlAdapter, который отображает страницу на запрашиваемом устройстве.</span><span class="sxs-lookup"><span data-stu-id="4b38e-277">Returns a reference to the ControlAdapter that renders the page on the device that requested it.</span></span>

## <a name="asyncmode"></a><span data-ttu-id="4b38e-278">AsyncMode</span><span class="sxs-lookup"><span data-stu-id="4b38e-278">AsyncMode</span></span>

<span data-ttu-id="4b38e-279">Это свойство указывает, обрабатывается ли страница асинхронно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-279">This property indicates whether or not the page is processed asynchronously.</span></span> <span data-ttu-id="4b38e-280">Предназначен для использования времен выполнения, а не непосредственно в коде.</span><span class="sxs-lookup"><span data-stu-id="4b38e-280">It is intended for use by the runtime and not directly in code.</span></span>

## <a name="clientidseparator"></a><span data-ttu-id="4b38e-281">ClientIDСепаратор</span><span class="sxs-lookup"><span data-stu-id="4b38e-281">ClientIDSeparator</span></span>

<span data-ttu-id="4b38e-282">Это свойство возвращает символ, используемый в качестве сепаратора при создании уникальных идонов клиента для элементов управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-282">This property returns the character used as a separator when creating unique client IDs for controls.</span></span> <span data-ttu-id="4b38e-283">Предназначен для использования времен выполнения, а не непосредственно в коде.</span><span class="sxs-lookup"><span data-stu-id="4b38e-283">It is intended for use by the runtime and not directly in code.</span></span>

## <a name="pagestatepersister"></a><span data-ttu-id="4b38e-284">PageStatePersister</span><span class="sxs-lookup"><span data-stu-id="4b38e-284">PageStatePersister</span></span>

<span data-ttu-id="4b38e-285">Это свойство возвращает объект PageStatePersister для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-285">This property returns the PageStatePersister object for the page.</span></span> <span data-ttu-id="4b38e-286">Это свойство в основном используется разработчиками ASP.NET управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-286">This property is primarily used by ASP.NET control developers.</span></span>

## <a name="uniquefilepathsuffix"></a><span data-ttu-id="4b38e-287">УникальныйFilePathSuffix</span><span class="sxs-lookup"><span data-stu-id="4b38e-287">UniqueFilePathSuffix</span></span>

<span data-ttu-id="4b38e-288">Это свойство возвращает уникальный суффикс, который придатимся к пути файла для кэширования браузеров.</span><span class="sxs-lookup"><span data-stu-id="4b38e-288">This property returns a unique suffix that is appended to the file path for caching browsers.</span></span> <span data-ttu-id="4b38e-289">Значение по \_ \_умолчанию является ufps и 6-значным числом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-289">The default value is \_\_ufps= and a 6-digit number.</span></span>

## <a name="new-public-methods-for-the-page-class"></a><span data-ttu-id="4b38e-290">Новые общедоступные методы для класса Страницы</span><span class="sxs-lookup"><span data-stu-id="4b38e-290">New Public Methods for the Page Class</span></span>

<span data-ttu-id="4b38e-291">Следующие общедоступные методы являются новыми для класса Страницы в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-291">The following public methods are new to the Page class in ASP.NET 2.0.</span></span>

## <a name="addonprerendercompleteasync"></a><span data-ttu-id="4b38e-292">АддонпререндерКомплектАсин</span><span class="sxs-lookup"><span data-stu-id="4b38e-292">AddOnPreRenderCompleteAsync</span></span>

<span data-ttu-id="4b38e-293">Этот метод регистрирует делегатов обработчика событий для асинхронного выполнения страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-293">This method registers event handler delegates for asynchronous page execution.</span></span> <span data-ttu-id="4b38e-294">Асинхронные страницы обсуждаются позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-294">Asynchronous pages are discussed later in this module.</span></span>

## <a name="applystylesheetskin"></a><span data-ttu-id="4b38e-295">ApplyStyleSheetSkin</span><span class="sxs-lookup"><span data-stu-id="4b38e-295">ApplyStyleSheetSkin</span></span>

<span data-ttu-id="4b38e-296">Применяет свойства в листе стиля страниц на страницу.</span><span class="sxs-lookup"><span data-stu-id="4b38e-296">Applies the properties in a pages style sheet to the page.</span></span>

## <a name="executeregisteredasynctasks"></a><span data-ttu-id="4b38e-297">ВыполнениеЗарегистрированныеазадачи</span><span class="sxs-lookup"><span data-stu-id="4b38e-297">ExecuteRegisteredAsyncTasks</span></span>

<span data-ttu-id="4b38e-298">Этот метод является асинхронной задачей.</span><span class="sxs-lookup"><span data-stu-id="4b38e-298">This method beings an asynchronous task.</span></span>

### <a name="getvalidators"></a><span data-ttu-id="4b38e-299">GetValidators</span><span class="sxs-lookup"><span data-stu-id="4b38e-299">GetValidators</span></span>

<span data-ttu-id="4b38e-300">Возвращает коллекцию валидаторов для указанной группы проверки или группы проверки по умолчанию, если ни один из них не указан.</span><span class="sxs-lookup"><span data-stu-id="4b38e-300">Returns a collection of validators for the specified validation group or the default validation group if none is specified.</span></span>

## <a name="registerasynctask"></a><span data-ttu-id="4b38e-301">RegisterAsyncTask</span><span class="sxs-lookup"><span data-stu-id="4b38e-301">RegisterAsyncTask</span></span>

<span data-ttu-id="4b38e-302">Этот метод регистрирует новую задачу асин.</span><span class="sxs-lookup"><span data-stu-id="4b38e-302">This method registers a new async task.</span></span> <span data-ttu-id="4b38e-303">Асинхронные страницы рассматриваются позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-303">Asynchronous pages are covered later in this module.</span></span>

## <a name="registerrequirescontrolstate"></a><span data-ttu-id="4b38e-304">РегистрацияТребуетКонтрольГосударства</span><span class="sxs-lookup"><span data-stu-id="4b38e-304">RegisterRequiresControlState</span></span>

<span data-ttu-id="4b38e-305">Этот метод говорит ASP.NET, что состояние управления страницами должно быть упорным.</span><span class="sxs-lookup"><span data-stu-id="4b38e-305">This method tells ASP.NET that the pages control state must be persisted.</span></span>

## <a name="registerrequiresviewstateencryption"></a><span data-ttu-id="4b38e-306">РегистрТребуетСяВгогосударственноешифрование</span><span class="sxs-lookup"><span data-stu-id="4b38e-306">RegisterRequiresViewStateEncryption</span></span>

<span data-ttu-id="4b38e-307">Этот метод говорит ASP.NET, что состояние просмотра страниц требует шифрования.</span><span class="sxs-lookup"><span data-stu-id="4b38e-307">This method tells ASP.NET that the pages viewstate requires encryption.</span></span>

## <a name="resolveclienturl"></a><span data-ttu-id="4b38e-308">ResolveClientUrl</span><span class="sxs-lookup"><span data-stu-id="4b38e-308">ResolveClientUrl</span></span>

<span data-ttu-id="4b38e-309">Возвращает относительный URL-адрес, который может быть использован для запросов клиентов на изображения и т.д.</span><span class="sxs-lookup"><span data-stu-id="4b38e-309">Returns a relative URL that can be used for client requests for images, etc.</span></span>

## <a name="setfocus"></a><span data-ttu-id="4b38e-310">SetFocus</span><span class="sxs-lookup"><span data-stu-id="4b38e-310">SetFocus</span></span>

<span data-ttu-id="4b38e-311">Этот метод установит фокус на элемент управления, который указан при первоначальной загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-311">This method will set the focus to the control that is specified when the page is initially loaded.</span></span>

## <a name="unregisterrequirescontrolstate"></a><span data-ttu-id="4b38e-312">НерегистрируйтеТребуетКонтрольгосударства</span><span class="sxs-lookup"><span data-stu-id="4b38e-312">UnregisterRequiresControlState</span></span>

<span data-ttu-id="4b38e-313">Этот метод будет отменить регистрацию элемента управления, который передается ему, как не требующий сохранения состояния управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-313">This method will unregister the control that is passed to it as no longer requiring control state persistence.</span></span>

## <a name="changes-to-the-page-lifecycle"></a><span data-ttu-id="4b38e-314">Изменения жизненного цикла Страницы</span><span class="sxs-lookup"><span data-stu-id="4b38e-314">Changes to the Page Lifecycle</span></span>

<span data-ttu-id="4b38e-315">Жизненный цикл страницы в ASP.NET 2.0 не изменился кардинально, но есть некоторые новые методы, которые вы должны знать.</span><span class="sxs-lookup"><span data-stu-id="4b38e-315">The page lifecycle in ASP.NET 2.0 hasn't changed dramatically, but there are some new methods that you should be aware of.</span></span> <span data-ttu-id="4b38e-316">В приведенный ниже жизненный цикл ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-316">The ASP.NET 2.0 page lifecycle is outlined below.</span></span>

## <a name="preinit-new-in-aspnet-20"></a><span data-ttu-id="4b38e-317">PreInit (Новый в ASP.NET 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-317">PreInit (New in ASP.NET 2.0)</span></span>

<span data-ttu-id="4b38e-318">Событие PreInit является самым ранним этапом жизненного цикла, к которым может получить сяопрожитель.</span><span class="sxs-lookup"><span data-stu-id="4b38e-318">The PreInit event is the earliest stage in the lifecycle that a developer can access.</span></span> <span data-ttu-id="4b38e-319">Добавление этого события позволяет программно менять ASP.NET 2.0 темы, мастер-страницы, свойства доступа для профиля ASP.NET 2.0 и т.д. Если вы находитесь в состоянии послебека, важно понимать, что Viewstate еще не был применен к элементам управления на данном этапе жизненного цикла.</span><span class="sxs-lookup"><span data-stu-id="4b38e-319">The addition of this event makes it possible to programmatically change ASP.NET 2.0 themes, master pages, access properties for an ASP.NET 2.0 profile, etc. If you are in a postback state, its important to realize that Viewstate has not yet been applied to controls at this point in the lifecycle.</span></span> <span data-ttu-id="4b38e-320">Таким образом, если разработчик изменяет свойство элемента управления на данном этапе, он, скорее всего, будет перезаписан позже в жизненном цикле страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-320">Therefore, if a developer changes a property of a control at this stage, it will likely be overwritten later in the pages lifecycle.</span></span>

## <a name="init"></a><span data-ttu-id="4b38e-321">Init</span><span class="sxs-lookup"><span data-stu-id="4b38e-321">Init</span></span>

<span data-ttu-id="4b38e-322">Событие Init не изменилось с ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="4b38e-322">The Init event has not changed from ASP.NET 1.x.</span></span> <span data-ttu-id="4b38e-323">Здесь вы хотели бы прочитать или инициализировать свойства элементов управления на вашей странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-323">This is where you would want to read or initialize properties of controls on your page.</span></span> <span data-ttu-id="4b38e-324">На этом этапе на страницу уже применяются мастер-страницы, темы и т.д.</span><span class="sxs-lookup"><span data-stu-id="4b38e-324">At this stage, master pages, themes, etc. are already applied to the page.</span></span>

## <a name="initcomplete-new-in-20"></a><span data-ttu-id="4b38e-325">InitComplete (Новый в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-325">InitComplete (New in 2.0)</span></span>

<span data-ttu-id="4b38e-326">Событие InitComplete называется в конце этапа инициализации страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-326">The InitComplete event is called at the end of the pages initialization stage.</span></span> <span data-ttu-id="4b38e-327">На этом этапе жизненного цикла можно получить доступ к элементам управления на странице, но их состояние еще не заселены.</span><span class="sxs-lookup"><span data-stu-id="4b38e-327">At this point in the lifecycle, you can access controls on the page, but their state has not yet been populated.</span></span>

## <a name="preload-new-in-20"></a><span data-ttu-id="4b38e-328">Предгрузка (Новая в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-328">PreLoad (New in 2.0)</span></span>

<span data-ttu-id="4b38e-329">Это событие вызывается после того, как все данные postback были применены и непосредственно перед загрузкой Страницы.\_</span><span class="sxs-lookup"><span data-stu-id="4b38e-329">This event is called after all postback data has been applied and just prior to Page\_Load.</span></span>

## <a name="load"></a><span data-ttu-id="4b38e-330">Загрузить</span><span class="sxs-lookup"><span data-stu-id="4b38e-330">Load</span></span>

<span data-ttu-id="4b38e-331">Событие нагрузки не изменилось с ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="4b38e-331">The Load event has not changed from ASP.NET 1.x.</span></span>

## <a name="loadcomplete-new-in-20"></a><span data-ttu-id="4b38e-332">ЗагрузкаПолл (Новый в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-332">LoadComplete (New in 2.0)</span></span>

<span data-ttu-id="4b38e-333">Событие LoadComplete является последним событием на этапе загрузки страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-333">The LoadComplete event is the last event in the pages load stage.</span></span> <span data-ttu-id="4b38e-334">На этом этапе все данные postback и viewstate были применены к странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-334">At this stage, all postback and viewstate data has been applied to the page.</span></span>

## <a name="prerender"></a><span data-ttu-id="4b38e-335">Prerender</span><span class="sxs-lookup"><span data-stu-id="4b38e-335">PreRender</span></span>

<span data-ttu-id="4b38e-336">Если вы хотите, чтобы состояние представления было надлежащим образом сохранено для элементов управления, которые добавляются на страницу динамически, событие PreRender является последней возможностью добавить их.</span><span class="sxs-lookup"><span data-stu-id="4b38e-336">If you would like for viewstate to be properly maintained for controls that are added to the page dynamically, the PreRender event is the last opportunity to add them.</span></span>

## <a name="prerendercomplete-new-in-20"></a><span data-ttu-id="4b38e-337">PreRenderComplete (Новый в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-337">PreRenderComplete (New in 2.0)</span></span>

<span data-ttu-id="4b38e-338">На этапе PreRenderComplete все элементы управления были добавлены на страницу, и страница готова к визуализации.</span><span class="sxs-lookup"><span data-stu-id="4b38e-338">At the PreRenderComplete stage, all controls have been added to the page and the page is ready to be rendered.</span></span> <span data-ttu-id="4b38e-339">Событие PreRenderComplete — это последнее событие, поднятое до сохранения состояния просмотра страниц.</span><span class="sxs-lookup"><span data-stu-id="4b38e-339">The PreRenderComplete event is the last event raised before the pages viewstate is saved.</span></span>

## <a name="savestatecomplete-new-in-20"></a><span data-ttu-id="4b38e-340">SaveStateComplete (Новый в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-340">SaveStateComplete (New in 2.0)</span></span>

<span data-ttu-id="4b38e-341">Событие SaveStateComplete вызывается сразу после сохранения состояния просмотра и управления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-341">The SaveStateComplete event is called immediately after all page viewstate and control state has been saved.</span></span> <span data-ttu-id="4b38e-342">Это последнее событие, прежде чем страница фактически отображается в браузере.</span><span class="sxs-lookup"><span data-stu-id="4b38e-342">This is the last event before the page is actually rendered to the browser.</span></span>

## <a name="render"></a><span data-ttu-id="4b38e-343">Render</span><span class="sxs-lookup"><span data-stu-id="4b38e-343">Render</span></span>

<span data-ttu-id="4b38e-344">Метод Рендера не изменялся с ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="4b38e-344">The Render method has not changed since ASP.NET 1.x.</span></span> <span data-ttu-id="4b38e-345">Здесь инициализирован атакжемирован htmlTextWriter и страница отображается в браузере.</span><span class="sxs-lookup"><span data-stu-id="4b38e-345">This is where the HtmlTextWriter is initialized and the page is rendered to the browser.</span></span>

## <a name="cross-page-postback-in-aspnet-20"></a><span data-ttu-id="4b38e-346">Кросс-Page Postback в ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-346">Cross-Page Postback in ASP.NET 2.0</span></span>

<span data-ttu-id="4b38e-347">В ASP.NET 1.x, postbacks были необходимы для того чтобы вывесить к такой же странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-347">In ASP.NET 1.x, postbacks were required to post to the same page.</span></span> <span data-ttu-id="4b38e-348">Кросс-страницы postbacks не были разрешены.</span><span class="sxs-lookup"><span data-stu-id="4b38e-348">Cross-page postbacks were not allowed.</span></span> <span data-ttu-id="4b38e-349">ASP.NET 2.0 добавляет возможность отправлять на другую страницу через интерфейс IButtonControl.</span><span class="sxs-lookup"><span data-stu-id="4b38e-349">ASP.NET 2.0 adds the ability to post back to a different page via the IButtonControl interface.</span></span> <span data-ttu-id="4b38e-350">Любой элемент управления, который реализует новый интерфейс IButtonControl (Button, LinkButton и ImageButton в дополнение к сторонним пользовательским элементам управления), может воспользоваться этой новой функциональностью с помощью атрибута PostBackUrl.</span><span class="sxs-lookup"><span data-stu-id="4b38e-350">Any control that implements the new IButtonControl interface (Button, LinkButton, and ImageButton in addition to third-party custom controls) can take advantage of this new functionality via the use of the PostBackUrl attribute.</span></span> <span data-ttu-id="4b38e-351">Следующий код показывает элемент управления кнопки, который публикует обратно на вторую страницу.</span><span class="sxs-lookup"><span data-stu-id="4b38e-351">The following code shows a Button control that posts back to a second page.</span></span>

[!code-aspx[Main](the-asp-net-2-0-page-model/samples/sample5.aspx)]

<span data-ttu-id="4b38e-352">Когда страница размещена обратно, Страница, которая инициирует postback, доступна через свойство PreviousPage на второй странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-352">When the page is posted back, the Page that initiates the postback is accessible via the PreviousPage property on the second page.</span></span> <span data-ttu-id="4b38e-353">Эта функциональность реализуется с\_помощью новой функции клиента WebForm DoPostBackWithOptions, которая ASP.NET 2.0 отображается на странице, когда элемент управления возвращается на другую страницу.</span><span class="sxs-lookup"><span data-stu-id="4b38e-353">This functionality is implemented via the new WebForm\_DoPostBackWithOptions client-side function that ASP.NET 2.0 renders to the page when a control posts back to a different page.</span></span> <span data-ttu-id="4b38e-354">Эта функция JavaScript обеспечивается новым обработчиком WebResource.axd, который излучает скрипт для клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-354">This JavaScript function is provided by the new WebResource.axd handler which emits script to the client.</span></span>

<span data-ttu-id="4b38e-355">Видео ниже является пошаговой перекрестной странице postback.</span><span class="sxs-lookup"><span data-stu-id="4b38e-355">The video below is a walkthrough of a cross-page postback.</span></span>

![](the-asp-net-2-0-page-model/_static/image2.png)

[<span data-ttu-id="4b38e-356">Открытое полноэкранное видео</span><span class="sxs-lookup"><span data-stu-id="4b38e-356">Open Full-Screen Video</span></span>](the-asp-net-2-0-page-model/_static/xpage1.wmv)

## <a name="more-details-on-cross-page-postbacks"></a><span data-ttu-id="4b38e-357">Более подробная информация о Кросс-Page Postbacks</span><span class="sxs-lookup"><span data-stu-id="4b38e-357">More Details on Cross-Page Postbacks</span></span>

### <a name="viewstate"></a><span data-ttu-id="4b38e-358">Viewstate</span><span class="sxs-lookup"><span data-stu-id="4b38e-358">Viewstate</span></span>

<span data-ttu-id="4b38e-359">Возможно, вы уже задали себе вопрос о том, что происходит с состоянием представления с первой страницы в сценарии постбека на перекрестной странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-359">You may have asked yourself already about what happens to the viewstate from the first page in a cross-page postback scenario.</span></span> <span data-ttu-id="4b38e-360">В конце концов, любой элемент управления, который не реализует IPostBackDataHandler будет сохранять свое состояние через viewstate, так что иметь доступ к свойствам этого элемента управления на второй странице кросс-страницы postback, вы должны иметь доступ к состоянию представления для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-360">After all, any control that does not implement IPostBackDataHandler will persist its state via viewstate, so to have access to the properties of that control on the second page of a cross-page postback, you must have access to the viewstate for the page.</span></span> <span data-ttu-id="4b38e-361">ASP.NET 2.0 заботится об этом сценарии, используя \_ \_новое скрытое поле на второй странице под названием PREVIOUSPAGE.</span><span class="sxs-lookup"><span data-stu-id="4b38e-361">ASP.NET 2.0 takes care of this scenario using a new hidden field in the second page called \_\_PREVIOUSPAGE.</span></span> <span data-ttu-id="4b38e-362">Поле \_ \_формы PREVIOUSPAGE содержит состояние представления для первой страницы, чтобы вы могли иметь доступ к свойствам всех элементов управления на второй странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-362">The \_\_PREVIOUSPAGE form field contains the viewstate for the first page so that you can have access to the properties of all controls in the second page.</span></span>

### <a name="circumventing-findcontrol"></a><span data-ttu-id="4b38e-363">Обход ПоискаКонтроль</span><span class="sxs-lookup"><span data-stu-id="4b38e-363">Circumventing FindControl</span></span>

<span data-ttu-id="4b38e-364">В видео-пошаговое решение кросс-страницы postback, я использовал метод FindControl, чтобы получить ссылку на контроль TextBox на первой странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-364">In the video walkthrough of a cross-page postback, I used the FindControl method to get a reference to the TextBox control on the first page.</span></span> <span data-ttu-id="4b38e-365">Этот метод хорошо работает для этой цели, но FindControl является дорогостоящим и требует написания дополнительного кода.</span><span class="sxs-lookup"><span data-stu-id="4b38e-365">That method works well for that purpose, but FindControl is expensive and it requires writing additional code.</span></span> <span data-ttu-id="4b38e-366">К счастью, ASP.NET 2.0 предоставляет альтернативу FindControl для этой цели, которая будет работать во многих сценариях.</span><span class="sxs-lookup"><span data-stu-id="4b38e-366">Fortunately, ASP.NET 2.0 provides an alternative to FindControl for this purpose that will work in many scenarios.</span></span> <span data-ttu-id="4b38e-367">Директива PreviousPageType позволяет иметь сильно типировую ссылку на предыдущую страницу, используя либо TypeName, либо атрибут VirtualPath.</span><span class="sxs-lookup"><span data-stu-id="4b38e-367">The PreviousPageType directive allows you to have a strongly-typed reference to the previous page by using either the TypeName or the VirtualPath attribute.</span></span> <span data-ttu-id="4b38e-368">Атрибут TypeName позволяет указать тип предыдущей страницы, в то время как атрибут VirtualPath позволяет ссылаться на предыдущую страницу с помощью виртуального пути.</span><span class="sxs-lookup"><span data-stu-id="4b38e-368">The TypeName attribute allows you to specify the type of the previous page while the VirtualPath attribute allows you to refer to the previous page using a virtual path.</span></span> <span data-ttu-id="4b38e-369">После установки директивы PreviousPageType необходимо предоставить элементы управления и т.д., к которым вы хотите разрешить доступ с помощью общедоступных свойств.</span><span class="sxs-lookup"><span data-stu-id="4b38e-369">After you've set the PreviousPageType directive, you must then expose the controls, etc. to which you want to allow access using public properties.</span></span>

## <a name="lab-1-cross-page-postback"></a><span data-ttu-id="4b38e-370">Лаборатория 1 Кросс-Пейдж Постбэк</span><span class="sxs-lookup"><span data-stu-id="4b38e-370">Lab 1 Cross-Page Postback</span></span>

<span data-ttu-id="4b38e-371">В этой лаборатории вы создадите приложение, используювшее новую функцию постбека кросс-страницы ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-371">In this lab, you will create an application that uses the new cross-page postback functionality of ASP.NET 2.0.</span></span>

1. <span data-ttu-id="4b38e-372">Открыть Visual Studio 2005 и создать новый веб-сайт ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4b38e-372">Open Visual Studio 2005 and create a new ASP.NET Web site.</span></span>
2. <span data-ttu-id="4b38e-373">Добавьте новую веб-форму под названием page2.aspx.</span><span class="sxs-lookup"><span data-stu-id="4b38e-373">Add a new Webform called page2.aspx.</span></span>
3. <span data-ttu-id="4b38e-374">Откройте Default.aspx в представлении design view и добавьте управление кнопки и управление TextBox.</span><span class="sxs-lookup"><span data-stu-id="4b38e-374">Open the Default.aspx in Design view and add a Button control and a TextBox control.</span></span> 

    1. <span data-ttu-id="4b38e-375">Дайте кнопке управления ID **SubmitButton** и TextBox управления ID **UserName**.</span><span class="sxs-lookup"><span data-stu-id="4b38e-375">Give the Button control an ID of **SubmitButton** and the TextBox control an ID of **UserName**.</span></span>
    2. <span data-ttu-id="4b38e-376">Установите свойство PostBackUrl кнопки на page2.aspx.</span><span class="sxs-lookup"><span data-stu-id="4b38e-376">Set the PostBackUrl property of the Button to page2.aspx.</span></span>
4. <span data-ttu-id="4b38e-377">Откройте страницу2.aspx в представлении Исходного кода.</span><span class="sxs-lookup"><span data-stu-id="4b38e-377">Open page2.aspx in Source view.</span></span>
5. <span data-ttu-id="4b38e-378">Добавить директиву «ПредыдущийPageType», как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="4b38e-378">Add a @ PreviousPageType directive as shown below:</span></span>
6. <span data-ttu-id="4b38e-379">Добавьте следующий код\_в страницу Загрузить страницу page2.aspx в код-за:</span><span class="sxs-lookup"><span data-stu-id="4b38e-379">Add the following code to the Page\_Load of page2.aspx's code-behind:</span></span> 

    [!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample6.cs)]
7. <span data-ttu-id="4b38e-380">Создайте проект, нажав на меню Build on the Build.</span><span class="sxs-lookup"><span data-stu-id="4b38e-380">Build the project by clicking on Build on the Build menu.</span></span>
8. <span data-ttu-id="4b38e-381">Добавьте следующий код в код-задля для Default.aspx:</span><span class="sxs-lookup"><span data-stu-id="4b38e-381">Add the following code to the code-behind for Default.aspx:</span></span> 

    [!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample7.cs)]
9. <span data-ttu-id="4b38e-382">Измените\_загрузку страницы в page2.aspx на следующее:</span><span class="sxs-lookup"><span data-stu-id="4b38e-382">Change the Page\_Load in page2.aspx to the following:</span></span> 

    [!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample8.cs)]
10. <span data-ttu-id="4b38e-383">Создайте проект.</span><span class="sxs-lookup"><span data-stu-id="4b38e-383">Build the project.</span></span>
11. <span data-ttu-id="4b38e-384">Запустите проект.</span><span class="sxs-lookup"><span data-stu-id="4b38e-384">Run the project.</span></span>
12. <span data-ttu-id="4b38e-385">Введите свое имя в TextBox и нажмите кнопку.</span><span class="sxs-lookup"><span data-stu-id="4b38e-385">Enter your name in the TextBox and click the button.</span></span>
13. <span data-ttu-id="4b38e-386">Каков результат?</span><span class="sxs-lookup"><span data-stu-id="4b38e-386">What is the result?</span></span>

## <a name="asynchronous-pages-in-aspnet-20"></a><span data-ttu-id="4b38e-387">Асинхронные страницы в ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-387">Asynchronous Pages in ASP.NET 2.0</span></span>

<span data-ttu-id="4b38e-388">Многие проблемы с утверждением в ASP.NET вызваны задержкой внешних вызовов (таких как веб-служба или вызовы базы данных), задержкой в исправления файла и т.д. Когда запрос сделан против ASP.NET приложения, ASP.NET использует один из своих рабочих потоков для обслуживания этого запроса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-388">Many contention problems in ASP.NET are caused by latency of external calls (such as Web service or database calls), file IO latency, etc. When a request is made against an ASP.NET application, ASP.NET uses one of its worker threads to service that request.</span></span> <span data-ttu-id="4b38e-389">Этот запрос владеет этим потоком до тех пор, пока запрос не будет завершен и не будет отправлен ответ.</span><span class="sxs-lookup"><span data-stu-id="4b38e-389">That request owns that thread until the request is complete and the response has been sent.</span></span> <span data-ttu-id="4b38e-390">ASP.NET 2.0 стремится решить проблемы с задержкой с этими типами проблем, добавив возможность выполнять страницы асинхронно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-390">ASP.NET 2.0 seeks to resolve latency issues with these types of issues by adding the capability to execute pages asynchronously.</span></span> <span data-ttu-id="4b38e-391">Это означает, что поток рабочего может начать запрос, а затем передать дополнительное выполнение другому потоку, тем самым быстро вернувшись в доступный пул потока.</span><span class="sxs-lookup"><span data-stu-id="4b38e-391">That means that a worker thread can start the request and then hand off additional execution to another thread, thereby returning to the available thread pool quickly.</span></span> <span data-ttu-id="4b38e-392">Когда вызов файла io, вызов базы данных и т.д. завершен, новый поток получается из пула потоков для завершения запроса.</span><span class="sxs-lookup"><span data-stu-id="4b38e-392">When the file IO, database call, etc. has completed, a new thread is obtained from the thread pool to finish the request.</span></span>

<span data-ttu-id="4b38e-393">Первым шагом в обеспечении асинхронного выполнения страницы является установка атрибута **Async** директивы страницы следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-393">The first step in making a page execute asynchronously is to set the **Async** attribute of the page directive like so:</span></span>

[!code-aspx[Main](the-asp-net-2-0-page-model/samples/sample9.aspx)]

<span data-ttu-id="4b38e-394">Этот атрибут говорит ASP.NET для реализации IHttpAsyncHandler для страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-394">This attribute tells ASP.NET to implement the IHttpAsyncHandler for the page.</span></span>

<span data-ttu-id="4b38e-395">Следующим шагом является вызов метода AddOnPreRenderCompleteAsync в точке жизненного цикла страницы до PreRender.</span><span class="sxs-lookup"><span data-stu-id="4b38e-395">The next step is to call the AddOnPreRenderCompleteAsync method at a point in the lifecycle of the page prior to PreRender.</span></span> <span data-ttu-id="4b38e-396">(Этот метод обычно вызывается в Page\_Load.) Метод AddOnPreRenderCompleteAsync занимает два параметра; BeginEventHandler и EndEventHandler.</span><span class="sxs-lookup"><span data-stu-id="4b38e-396">(This method is typically called in Page\_Load.) The AddOnPreRenderCompleteAsync method takes two parameters; a BeginEventHandler and an EndEventHandler.</span></span> <span data-ttu-id="4b38e-397">BeginEventHandler возвращает IAsyncResult, который затем передается в качестве параметра в EndEventHandler.</span><span class="sxs-lookup"><span data-stu-id="4b38e-397">The BeginEventHandler returns an IAsyncResult which is then passed as a parameter to the EndEventHandler.</span></span>

<span data-ttu-id="4b38e-398">Видео ниже является пошаговый шаг асинхронного запроса страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-398">The video below is a walkthrough of an asynchronous page request.</span></span>

![](the-asp-net-2-0-page-model/_static/image3.png)

[<span data-ttu-id="4b38e-399">Открытое полноэкранное видео</span><span class="sxs-lookup"><span data-stu-id="4b38e-399">Open Full-Screen Video</span></span>](the-asp-net-2-0-page-model/_static/async1.wmv)

> [!NOTE]
> <span data-ttu-id="4b38e-400">Страница async не отображается в браузере до завершения EndEventHandler.</span><span class="sxs-lookup"><span data-stu-id="4b38e-400">An async page does not render to the browser until the EndEventHandler has completed.</span></span> <span data-ttu-id="4b38e-401">Без сомнения, но что некоторые разработчики будут думать о async запросы как похожие на async обратных вызовов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-401">No doubt but that some developers will think of async requests as being similar to async callbacks.</span></span> <span data-ttu-id="4b38e-402">Важно понимать, что это не так.</span><span class="sxs-lookup"><span data-stu-id="4b38e-402">It's important to realize that they are not.</span></span> <span data-ttu-id="4b38e-403">Преимущество асинхронных запросов заключается в том, что первый поток рабочего может быть возвращен в пул потоков для обслуживания новых запросов, тем самым уменьшая раздор из-за того, что он связан с истечением времени и т.д.</span><span class="sxs-lookup"><span data-stu-id="4b38e-403">The benefit to asynchronous requests is that the first worker thread can be returned to the thread pool to service new requests, thereby reducing contention due to being IO bound, etc.</span></span>

## <a name="script-callbacks-in-aspnet-20"></a><span data-ttu-id="4b38e-404">Обратный вызов в ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-404">Script Callbacks in ASP.NET 2.0</span></span>

<span data-ttu-id="4b38e-405">Веб-разработчики всегда искали способы предотвратить мерцание, связанное с обратным вызовом.</span><span class="sxs-lookup"><span data-stu-id="4b38e-405">Web developers have always looked for ways to prevent the flickering associated with a callback.</span></span> <span data-ttu-id="4b38e-406">В ASP.NET 1.x, SmartNavigation был наиболее распространенным методом для избежания мерцания, но SmartNavigation вызвало проблемы для некоторых разработчиков из-за сложности его реализации на клиенте.</span><span class="sxs-lookup"><span data-stu-id="4b38e-406">In ASP.NET 1.x, SmartNavigation was the most common method for avoiding flickering, but SmartNavigation caused problems for some developers because of the complexity of its implementation on the client.</span></span> <span data-ttu-id="4b38e-407">ASP.NET 2.0 решает эту проблему с помощью обратных вызовов скриптов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-407">ASP.NET 2.0 addresses this issue with script callbacks.</span></span> <span data-ttu-id="4b38e-408">Обратные вызовы скриптов используют XMLHttp для запросов на веб-сервер через JavaScript.</span><span class="sxs-lookup"><span data-stu-id="4b38e-408">Script callbacks utilize XMLHttp to make requests against the Web server via JavaScript.</span></span> <span data-ttu-id="4b38e-409">Запрос XMLHttp возвращает данные XML, которыми затем можно манипулировать с помощью DOM браузера.</span><span class="sxs-lookup"><span data-stu-id="4b38e-409">The XMLHttp request returns XML data that can then be manipulated via the browser's DOM.</span></span> <span data-ttu-id="4b38e-410">Код XMLHttp скрыт от пользователя новым обработчиком WebResource.axd.</span><span class="sxs-lookup"><span data-stu-id="4b38e-410">XMLHttp code is hidden from the user by the new WebResource.axd handler.</span></span>

<span data-ttu-id="4b38e-411">Есть несколько шагов, которые необходимы для настройки вызова скрипта в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-411">There are several steps that are necessary in order to configure a script callback in ASP.NET 2.0.</span></span>

## <a name="step-1--implement-the-icallbackeventhandler-interface"></a><span data-ttu-id="4b38e-412">Шаг 1 : Реализация интерфейса ICallbackEventHandler</span><span class="sxs-lookup"><span data-stu-id="4b38e-412">Step 1 : Implement the ICallbackEventHandler Interface</span></span>

<span data-ttu-id="4b38e-413">Для того, чтобы ASP.NET распознать вашу страницу как участвующую в обратном вызове скриптов, необходимо реализовать интерфейс ICallbackEventHandler.</span><span class="sxs-lookup"><span data-stu-id="4b38e-413">In order for ASP.NET to recognize your page as participating in a script callback, you must implement the ICallbackEventHandler interface.</span></span> <span data-ttu-id="4b38e-414">Вы можете сделать это в файле с кодом так:</span><span class="sxs-lookup"><span data-stu-id="4b38e-414">You can do this in your code-behind file like so:</span></span>

[!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample10.cs)]

<span data-ttu-id="4b38e-415">Вы также можете сделать это с помощью директивы «Реализации» следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-415">You can also do this using the @ Implements directive like so:</span></span>

[!code-aspx[Main](the-asp-net-2-0-page-model/samples/sample11.aspx)]

<span data-ttu-id="4b38e-416">Обычно при использовании вневого ASP.NET кода используется директива «Реализации».</span><span class="sxs-lookup"><span data-stu-id="4b38e-416">You would typically use the @ Implements directive when using inline ASP.NET code.</span></span>

## <a name="step-2--call-getcallbackeventreference"></a><span data-ttu-id="4b38e-417">Шаг 2 : Позвоните GetCallbackEventСправка</span><span class="sxs-lookup"><span data-stu-id="4b38e-417">Step 2 : Call GetCallbackEventReference</span></span>

<span data-ttu-id="4b38e-418">Как упоминалось ранее, вызов XMLHttp инкапсулируется в обработчике WebResource.axd.</span><span class="sxs-lookup"><span data-stu-id="4b38e-418">As mentioned previously, the XMLHttp call is encapsulated in the WebResource.axd handler.</span></span> <span data-ttu-id="4b38e-419">Когда ваша страница будет визуализирована,\_ASP.NET добавит вызов webForm DoCallback, клиентский скрипт, предоставляемый WebResource.axd.</span><span class="sxs-lookup"><span data-stu-id="4b38e-419">When your page is rendered, ASP.NET will add a call to WebForm\_DoCallback, a client script that is provided by WebResource.axd.</span></span> <span data-ttu-id="4b38e-420">Функция WebForm\_DoCallback заменяет функцию \_ \_doPostBack для обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="4b38e-420">The WebForm\_DoCallback function replaces the \_\_doPostBack function for a callback.</span></span> <span data-ttu-id="4b38e-421">Помните, что \_ \_doPostBack программно представляет форму на странице.</span><span class="sxs-lookup"><span data-stu-id="4b38e-421">Remember that \_\_doPostBack programmatically submits the form on the page.</span></span> <span data-ttu-id="4b38e-422">В сценарии обратного вызова, вы хотите \_ \_предотвратить postback, так doPostBack не будет достаточно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-422">In a callback scenario, you want to prevent a postback, so \_\_doPostBack will not suffice.</span></span>

> [!NOTE]
> <span data-ttu-id="4b38e-423">\_\_doPostBack по-прежнему отображается на страницу в сценарии обратного вызова сценария клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-423">\_\_doPostBack is still rendered to the page in a client script callback scenario.</span></span> <span data-ttu-id="4b38e-424">Тем не менее, он не используется для обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="4b38e-424">However, it's not used for the callback.</span></span>

<span data-ttu-id="4b38e-425">Аргументы в пользу\_функции клиента WebForm DoCallback предоставляются через функцию на стороне сервера GetCallbackEventReference, которая обычно называется в Page\_Load.</span><span class="sxs-lookup"><span data-stu-id="4b38e-425">The arguments for the WebForm\_DoCallback client-side function are provided via the server-side function GetCallbackEventReference which would normally be called in Page\_Load.</span></span> <span data-ttu-id="4b38e-426">Типичный звонок на GetCallbackEventReference может выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-426">A typical call to GetCallbackEventReference might look like this:</span></span>

[!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample12.cs)]

> [!NOTE]
> <span data-ttu-id="4b38e-427">В этом случае см является экземпляром ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="4b38e-427">In this case, cm is an instance of ClientScriptManager.</span></span> <span data-ttu-id="4b38e-428">Класс ClientScriptManager будет рассмотрен позже в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-428">The ClientScriptManager class will be covered later in this module.</span></span>

<span data-ttu-id="4b38e-429">Есть несколько перегруженных версий GetCallbackEventReference.</span><span class="sxs-lookup"><span data-stu-id="4b38e-429">There are several overloaded versions of GetCallbackEventReference.</span></span> <span data-ttu-id="4b38e-430">В этом случае аргументы следующие:</span><span class="sxs-lookup"><span data-stu-id="4b38e-430">In this case, the arguments are as follows:</span></span>

`this`

<span data-ttu-id="4b38e-431">Ссылка на элемент управления, где GetCallbackEventReference в настоящее время называется.</span><span class="sxs-lookup"><span data-stu-id="4b38e-431">A reference to the control where GetCallbackEventReference is being called.</span></span> <span data-ttu-id="4b38e-432">В этом случае, это сама страница.</span><span class="sxs-lookup"><span data-stu-id="4b38e-432">In this case, it's the page itself.</span></span>

[!code-javascript[Main](the-asp-net-2-0-page-model/samples/sample13.js)]

<span data-ttu-id="4b38e-433">Строка аргумент, который будет передан от клиента стороне кода на сервер стороне события.</span><span class="sxs-lookup"><span data-stu-id="4b38e-433">A string argument that will be passed from the client-side code to the server-side event.</span></span> <span data-ttu-id="4b38e-434">В этом случае Im передает значение выпадения, называемое ddlCompany.</span><span class="sxs-lookup"><span data-stu-id="4b38e-434">In this case, Im passing the value of a dropdown called ddlCompany.</span></span>

`ShowCompanyName`

<span data-ttu-id="4b38e-435">Имя функции клиента, которая будет принимать значение возврата (как строка) от события обратного вызова на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="4b38e-435">The name of the client-side function that will accept the return value (as string) from the server-side callback event.</span></span> <span data-ttu-id="4b38e-436">Эта функция будет вызываться только тогда, когда обратный вызов на стороне сервера будет успешным.</span><span class="sxs-lookup"><span data-stu-id="4b38e-436">This function will only be called when the server-side callback is successful.</span></span> <span data-ttu-id="4b38e-437">Поэтому, ради надежности, обычно рекомендуется использовать перегруженную версию GetCallbackEventReference, которая требует дополнительного аргумента строки, определяющей название функции клиента для выполнения в случае ошибки.</span><span class="sxs-lookup"><span data-stu-id="4b38e-437">Therefore, for the sake of robustness, it is generally recommended to use the overloaded version of GetCallbackEventReference that takes an additional string argument specifying the name of a client-side function to execute in the event of an error.</span></span>

`null`

<span data-ttu-id="4b38e-438">Строка, представляющая функцию стороны клиента, инициированную до обратного вызова на сервер.</span><span class="sxs-lookup"><span data-stu-id="4b38e-438">A string representing a client-side function that it initiated before the callback to the server.</span></span> <span data-ttu-id="4b38e-439">В этом случае такого сценария нет, поэтому аргумент необылен.</span><span class="sxs-lookup"><span data-stu-id="4b38e-439">In this case, there is no such script, so the argument is null.</span></span>

`true`

<span data-ttu-id="4b38e-440">Булеан, определяющий, следует ли проводить обратный вызов асинхронно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-440">A Boolean specifying whether or not to conduct the callback asynchronously.</span></span>

<span data-ttu-id="4b38e-441">Вызов webForm\_DoCallback на клиента будет передавать эти аргументы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-441">The call to WebForm\_DoCallback on the client will pass these arguments.</span></span> <span data-ttu-id="4b38e-442">Поэтому, когда эта страница отображается на клиенте, этот код будет выглядеть так:</span><span class="sxs-lookup"><span data-stu-id="4b38e-442">Therefore, when this page is rendered on the client, that code will look like so:</span></span>

[!code-javascript[Main](the-asp-net-2-0-page-model/samples/sample14.js)]

<span data-ttu-id="4b38e-443">Обратите внимание, что подпись функции на клиенте немного отличается.</span><span class="sxs-lookup"><span data-stu-id="4b38e-443">Notice that the signature of the function on the client is a bit different.</span></span> <span data-ttu-id="4b38e-444">Функция клиентской стороны проходит 5 строк и Boolean.</span><span class="sxs-lookup"><span data-stu-id="4b38e-444">The client-side function passes 5 strings and a Boolean.</span></span> <span data-ttu-id="4b38e-445">Дополнительная строка (которая является нулевой в приведенном выше примере) содержит функцию стороны клиента, которая будет обрабатывать любые ошибки, связанные с обратным вызовом на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="4b38e-445">The additional string (which is null in the above example) contains the client-side function that will handle any errors from the server-side callback.</span></span>

## <a name="step-3--hook-the-client-side-control-event"></a><span data-ttu-id="4b38e-446">Шаг 3 : Крюк клиент-сторона событие управления</span><span class="sxs-lookup"><span data-stu-id="4b38e-446">Step 3 : Hook the Client-Side Control Event</span></span>

<span data-ttu-id="4b38e-447">Обратите внимание, что значение возврата GetCallbackEventReference выше было назначено строке переменной.</span><span class="sxs-lookup"><span data-stu-id="4b38e-447">Notice that the return value of GetCallbackEventReference above was assigned to a string variable.</span></span> <span data-ttu-id="4b38e-448">Эта строка используется для подключения события на стороне клиента для управления, которое инициирует обратный вызов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-448">That string is used to hook a client-side event for the control that initiates the callback.</span></span> <span data-ttu-id="4b38e-449">В этом примере обратный вызов инициируется выпадением на странице, поэтому я хочу подключить событие *OnChange.*</span><span class="sxs-lookup"><span data-stu-id="4b38e-449">In this example, the callback is initiated by a dropdown on the page, so I want to hook the *OnChange* event.</span></span>

<span data-ttu-id="4b38e-450">Чтобы подключить событие на стороне клиента, просто добавьте обработчик в разметку на стороне клиента следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4b38e-450">To hook the client-side event, simply add a handler to the client-side markup as follows:</span></span>

[!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample15.cs)]

<span data-ttu-id="4b38e-451">Напомним, что *cbRef* является значением возврата от вызова к GetCallbackEventReference.</span><span class="sxs-lookup"><span data-stu-id="4b38e-451">Recall that *cbRef* is the return value from the call to GetCallbackEventReference.</span></span> <span data-ttu-id="4b38e-452">Он содержит вызов WebForm\_DoCallback, который был показан выше.</span><span class="sxs-lookup"><span data-stu-id="4b38e-452">It contains the call to WebForm\_DoCallback that was shown above.</span></span>

## <a name="step-4--register-the-client-side-script"></a><span data-ttu-id="4b38e-453">Шаг 4 : Регистрация сценария клиента</span><span class="sxs-lookup"><span data-stu-id="4b38e-453">Step 4 : Register the Client-Side Script</span></span>

<span data-ttu-id="4b38e-454">Напомним, что вызов в GetCallbackEventReference уточнил, что клиентский скрипт под названием **ShowCompanyName** будет выполнен, когда обратный вызов на стороне сервера будет выполнен.</span><span class="sxs-lookup"><span data-stu-id="4b38e-454">Recall that the call to GetCallbackEventReference specified that a client-side script called **ShowCompanyName** would be executed when the server-side callback succeeds.</span></span> <span data-ttu-id="4b38e-455">Этот скрипт должен быть добавлен на страницу с помощью экземпляра ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="4b38e-455">That script needs to be added to the page using a ClientScriptManager instance.</span></span> <span data-ttu-id="4b38e-456">(Класс ClientScriptManager будет обсуждаться позже в этом модуле.) Вы делаете это так:</span><span class="sxs-lookup"><span data-stu-id="4b38e-456">(The ClientScriptManager class will be discussed later in this module.) You do that like so:</span></span>

[!code-javascript[Main](the-asp-net-2-0-page-model/samples/sample16.js)]

## <a name="step-5--call-the-methods-of-the-icallbackeventhandler-interface"></a><span data-ttu-id="4b38e-457">Шаг 5 : Позвоните методы интерфейса ICallbackEventHandler</span><span class="sxs-lookup"><span data-stu-id="4b38e-457">Step 5 : Call the Methods of the ICallbackEventHandler Interface</span></span>

<span data-ttu-id="4b38e-458">ICallbackEventHandler содержит два метода, которые необходимо реализовать в коде.</span><span class="sxs-lookup"><span data-stu-id="4b38e-458">The ICallbackEventHandler contains two methods that you need to implement in your code.</span></span> <span data-ttu-id="4b38e-459">Они **RaiseCallbackEvent** и **GetCallbackEvent**.</span><span class="sxs-lookup"><span data-stu-id="4b38e-459">They are **RaiseCallbackEvent** and **GetCallbackEvent**.</span></span>

<span data-ttu-id="4b38e-460">**RaiseCallbackEvent** принимает строку в качестве аргумента и ничего не возвращает.</span><span class="sxs-lookup"><span data-stu-id="4b38e-460">**RaiseCallbackEvent** takes a string as an argument and returns nothing.</span></span> <span data-ttu-id="4b38e-461">Аргумент строки передается от вызова на\_стороне клиента к WebForm DoCallback.</span><span class="sxs-lookup"><span data-stu-id="4b38e-461">The string argument is passed from the client-side call to WebForm\_DoCallback.</span></span> <span data-ttu-id="4b38e-462">В этом случае это значение является атрибутом *значения* выпадения, называемым ddlCompany.</span><span class="sxs-lookup"><span data-stu-id="4b38e-462">In this case, that value is the *value* attribute of the dropdown called ddlCompany.</span></span> <span data-ttu-id="4b38e-463">Код сервера должен быть помещен в метод RaiseCallbackEvent.</span><span class="sxs-lookup"><span data-stu-id="4b38e-463">Your server-side code should be placed in the RaiseCallbackEvent method.</span></span> <span data-ttu-id="4b38e-464">Например, если ваш обратный вызов делает WebRequest против внешнего ресурса, этот код должен быть размещен в RaiseCallbackEvent.</span><span class="sxs-lookup"><span data-stu-id="4b38e-464">For example, if your callback is making a WebRequest against an external resource, that code should be placed in RaiseCallbackEvent.</span></span>

<span data-ttu-id="4b38e-465">**GetCallbackEvent** отвечает за обработку возврата обратного вызова клиенту.</span><span class="sxs-lookup"><span data-stu-id="4b38e-465">**GetCallbackEvent** is responsible for processing the return of the callback to the client.</span></span> <span data-ttu-id="4b38e-466">Он не принимает никаких аргументов и возвращает строку.</span><span class="sxs-lookup"><span data-stu-id="4b38e-466">It takes no arguments and returns a string.</span></span> <span data-ttu-id="4b38e-467">Строка, которую она возвращает, будет передана в качестве аргумента функции клиента, в данном случае *ShowCompanyName*.</span><span class="sxs-lookup"><span data-stu-id="4b38e-467">The string that it returns will be passed as an argument to the client-side function, in this case *ShowCompanyName*.</span></span>

<span data-ttu-id="4b38e-468">После того как вы завершили вышеуказанные шаги, вы готовы выполнить обратный вызов скрипта в ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b38e-468">Once you have completed the above steps, you are ready to perform a script callback in ASP.NET 2.0.</span></span>

![](the-asp-net-2-0-page-model/_static/image4.png)

[<span data-ttu-id="4b38e-469">Открытое полноэкранное видео</span><span class="sxs-lookup"><span data-stu-id="4b38e-469">Open Full-Screen Video</span></span>](the-asp-net-2-0-page-model/_static/callback1.wmv)

<span data-ttu-id="4b38e-470">Обратные вызовы с криптами в ASP.NET поддерживаются в любом браузере, который поддерживает вызовы XMLHttp.</span><span class="sxs-lookup"><span data-stu-id="4b38e-470">Script callbacks in ASP.NET are supported in any browser that supports making XMLHttp calls.</span></span> <span data-ttu-id="4b38e-471">Это включает в себя все современные браузеры в использовании сегодня.</span><span class="sxs-lookup"><span data-stu-id="4b38e-471">That includes all of the modern browsers in use today.</span></span> <span data-ttu-id="4b38e-472">Internet Explorer использует объект XMLHttp ActiveX, в то время как другие современные браузеры (включая предстоящий IE 7) используют внутренний объект XMLHttp.</span><span class="sxs-lookup"><span data-stu-id="4b38e-472">Internet Explorer uses the XMLHttp ActiveX object while other modern browsers (including the upcoming IE 7) use an intrinsic XMLHttp object.</span></span> <span data-ttu-id="4b38e-473">Чтобы программно определить, поддерживает ли браузер обратные вызовы, можно использовать свойство **Request.Browser.SupportCallback.**</span><span class="sxs-lookup"><span data-stu-id="4b38e-473">To programmatically determine if a browser supports callbacks, you can use the **Request.Browser.SupportCallback** property.</span></span> <span data-ttu-id="4b38e-474">Это свойство **вернется,** если запрашивающий клиент поддерживает обратные вызовы скриптов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-474">This property will return **true** if the requesting client supports script callbacks.</span></span>

## <a name="working-with-client-script-in-aspnet-20"></a><span data-ttu-id="4b38e-475">Работа с клиентским скриптом в ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="4b38e-475">Working with Client Script in ASP.NET 2.0</span></span>

<span data-ttu-id="4b38e-476">Клиентские скрипты в ASP.NET 2.0 управляются с помощью класса ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="4b38e-476">Client scripts in ASP.NET 2.0 are managed via the use of the ClientScriptManager class.</span></span> <span data-ttu-id="4b38e-477">Класс ClientScriptManager отслеживает клиентские сценарии с использованием типа и имени.</span><span class="sxs-lookup"><span data-stu-id="4b38e-477">The ClientScriptManager class keeps track of client scripts using a type and a name.</span></span> <span data-ttu-id="4b38e-478">Это предотвращает программную вставку одного и того же скрипта на странице несколько раз.</span><span class="sxs-lookup"><span data-stu-id="4b38e-478">This prevents the same script from being programmatically inserted on a page more than once.</span></span>

> [!NOTE]
> <span data-ttu-id="4b38e-479">После того, как скрипт был успешно зарегистрирован на странице, любая последующая попытка зарегистрировать тот же скрипт просто приведет к тому, что сценарий не будет зарегистрирован во второй раз.</span><span class="sxs-lookup"><span data-stu-id="4b38e-479">After a script has been successfully registered on a page, any subsequent attempt to register the same script will simply result in the script not being registered a second time.</span></span> <span data-ttu-id="4b38e-480">Дублировать скрипты не добавляется, и никаких исключений не происходит.</span><span class="sxs-lookup"><span data-stu-id="4b38e-480">No duplicate scripts are added and no exception occurs.</span></span> <span data-ttu-id="4b38e-481">Чтобы избежать ненужных вычислений, существуют методы, которые можно использовать, чтобы определить, зарегистрирован ли скрипт, чтобы не пытаться зарегистрировать его более одного раза.</span><span class="sxs-lookup"><span data-stu-id="4b38e-481">To avoid unnecessary computation, there are methods that you can use to determine if a script is already registered so that you do not attempt to register it more than once.</span></span>

<span data-ttu-id="4b38e-482">Методы ClientScriptManager должны быть знакомы всем действующим ASP.NET разработчикам:</span><span class="sxs-lookup"><span data-stu-id="4b38e-482">The methods of the ClientScriptManager should be familiar to all current ASP.NET developers:</span></span>

## <a name="registerclientscriptblock"></a><span data-ttu-id="4b38e-483">РегистрацияКлиентСКрипт</span><span class="sxs-lookup"><span data-stu-id="4b38e-483">RegisterClientScriptBlock</span></span>

<span data-ttu-id="4b38e-484">Этот метод добавляет скрипт в верхнюю часть отображаемой страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-484">This method adds a script to the top of the rendered page.</span></span> <span data-ttu-id="4b38e-485">Это полезно для добавления функций, которые будут явно вызваны для клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-485">This is useful for adding functions that will be explicitly called on the client.</span></span>

<span data-ttu-id="4b38e-486">Существует две перегруженные версии этого метода.</span><span class="sxs-lookup"><span data-stu-id="4b38e-486">There are two overloaded versions of this method.</span></span> <span data-ttu-id="4b38e-487">Среди них распространены три из четырех аргументов.</span><span class="sxs-lookup"><span data-stu-id="4b38e-487">Three of four arguments are common among them.</span></span> <span data-ttu-id="4b38e-488">К ним относятся:</span><span class="sxs-lookup"><span data-stu-id="4b38e-488">They are:</span></span>

`type (string)`

<span data-ttu-id="4b38e-489">Аргумент ***типа*** определяет тип для скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-489">The ***type*** argument identifies a type for the script.</span></span> <span data-ttu-id="4b38e-490">Это, как правило, хорошая идея, чтобы использовать тип страницы (это. GetType()) для типа.</span><span class="sxs-lookup"><span data-stu-id="4b38e-490">It is generally a good idea to use the page's type (this.GetType()) for the type.</span></span>

`key (string)`

<span data-ttu-id="4b38e-491">***Ключевым*** аргументом является пользовательский ключ для скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-491">The ***key*** argument is a user-defined key for the script.</span></span> <span data-ttu-id="4b38e-492">Это должно быть уникальным для каждого скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-492">This should be unique for each script.</span></span> <span data-ttu-id="4b38e-493">Если вы попытаетесь добавить сценарий с тем же ключом и типом уже добавленного скрипта, он не будет добавлен.</span><span class="sxs-lookup"><span data-stu-id="4b38e-493">If you attempt to add a script with the same key and type of an already added script, it will not be added.</span></span>

`script (string)`

<span data-ttu-id="4b38e-494">Аргумент ***скрипта*** — это строка, содержащая фактический сценарий для добавления.</span><span class="sxs-lookup"><span data-stu-id="4b38e-494">The ***script*** argument is a string containing the actual script to add.</span></span> <span data-ttu-id="4b38e-495">Рекомендуется использовать StringBuilder для создания скрипта, а затем использовать метод ToString() на StringBuilder для присвоения аргумента ***скрипта.***</span><span class="sxs-lookup"><span data-stu-id="4b38e-495">It's recommended that you use a StringBuilder to create the script and then use the ToString() method on the StringBuilder to assign the ***script*** argument.</span></span>

<span data-ttu-id="4b38e-496">Если вы используете перегруженный RegisterClientScriptBlock, который принимает только три&lt;аргумента, вы должны включить элементы скрипта (скрипт и&gt; &lt;/скрипт)&gt;в свой сценарий.</span><span class="sxs-lookup"><span data-stu-id="4b38e-496">If you use the overloaded RegisterClientScriptBlock that only takes three arguments, you must include script elements (&lt;script&gt; and &lt;/script&gt;) in your script.</span></span>

<span data-ttu-id="4b38e-497">Вы можете использовать перегрузку RegisterClientScriptBlock, которая принимает четвертый аргумент.</span><span class="sxs-lookup"><span data-stu-id="4b38e-497">You may choose to use the overload of RegisterClientScriptBlock that takes a fourth argument.</span></span> <span data-ttu-id="4b38e-498">Четвертым аргументом является Boolean, который определяет, следует ли ASP.NET добавлять элементы сценария для вас.</span><span class="sxs-lookup"><span data-stu-id="4b38e-498">The fourth argument is a Boolean that specifies whether or not ASP.NET should add script elements for you.</span></span> <span data-ttu-id="4b38e-499">Если этот аргумент **верный,** сценарий не должен включать элементы скрипта явно.</span><span class="sxs-lookup"><span data-stu-id="4b38e-499">If this argument is **true**, your script should not include the script elements explicitly.</span></span>

<span data-ttu-id="4b38e-500">Используйте метод IsClientScriptBlockRegistered, чтобы определить, был ли скрипт уже зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="4b38e-500">Use the IsClientScriptBlockRegistered method to determine if a script has already been registered.</span></span> <span data-ttu-id="4b38e-501">Это позволяет избежать попытки перерегистрации уже зарегистрированного скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-501">This allows you to avoid an attempt to re-register a script that has already been registered.</span></span>

### <a name="registerclientscriptinclude-new-in-20"></a><span data-ttu-id="4b38e-502">RegisterClientScriptInclude (Новый в 2.0)</span><span class="sxs-lookup"><span data-stu-id="4b38e-502">RegisterClientScriptInclude (New in 2.0)</span></span>

<span data-ttu-id="4b38e-503">Тег RegisterClientScriptInclude создает блок скрипта, который ссылается на внешний файл скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-503">The RegisterClientScriptInclude tag creates a script block that links to an external script file.</span></span> <span data-ttu-id="4b38e-504">Он имеет две перегрузки.</span><span class="sxs-lookup"><span data-stu-id="4b38e-504">It has two overloads.</span></span> <span data-ttu-id="4b38e-505">Один берет ключ и URL.</span><span class="sxs-lookup"><span data-stu-id="4b38e-505">One takes a key and a URL.</span></span> <span data-ttu-id="4b38e-506">Второй добавляет третий аргумент с указанием типа.</span><span class="sxs-lookup"><span data-stu-id="4b38e-506">The second adds a third argument specifying the type.</span></span>

<span data-ttu-id="4b38e-507">Например, следующий код генерирует блок скриптов, который ссылается на jsfunctions.js в корне папки скриптов приложения:</span><span class="sxs-lookup"><span data-stu-id="4b38e-507">For example, the following code generates a script block that links to jsfunctions.js in the root of the scripts folder of the application:</span></span>

[!code-csharp[Main](the-asp-net-2-0-page-model/samples/sample17.cs)]

<span data-ttu-id="4b38e-508">Этот код создает следующий код на отображаемых страницах:</span><span class="sxs-lookup"><span data-stu-id="4b38e-508">This code produces the following code in the rendered page:</span></span>

[!code-html[Main](the-asp-net-2-0-page-model/samples/sample18.html)]

> [!NOTE]
> <span data-ttu-id="4b38e-509">Блок скрипта отображается в нижней части страницы.</span><span class="sxs-lookup"><span data-stu-id="4b38e-509">The script block is rendered at the bottom of the page.</span></span>

<span data-ttu-id="4b38e-510">Используйте метод IsClientScriptIncludeRegistered, чтобы определить, был ли скрипт уже зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="4b38e-510">Use the IsClientScriptIncludeRegistered method to determine if a script has already been registered.</span></span> <span data-ttu-id="4b38e-511">Это позволяет избежать попытки перерегистрации скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-511">This allows you to avoid an attempt to re-register a script.</span></span>

## <a name="registerstartupscript"></a><span data-ttu-id="4b38e-512">РегистрацияStartupScript</span><span class="sxs-lookup"><span data-stu-id="4b38e-512">RegisterStartupScript</span></span>

<span data-ttu-id="4b38e-513">Метод RegisterStartupScript использует те же аргументы, что и метод RegisterClientScriptBlock.</span><span class="sxs-lookup"><span data-stu-id="4b38e-513">The RegisterStartupScript method takes the same arguments as the RegisterClientScriptBlock method.</span></span> <span data-ttu-id="4b38e-514">Скрипт, зарегистрированный в RegisterStartupScript, выполняется после загрузки страницы, но до события на стороне клиента OnLoad.</span><span class="sxs-lookup"><span data-stu-id="4b38e-514">A script registered with RegisterStartupScript executes after the page loads but before the OnLoad client-side event.</span></span> <span data-ttu-id="4b38e-515">В 1.X скрипты, зарегистрированные в RegisterStartupScript,&gt; были размещены непосредственно перед тегом закрытия/формы, &lt; &lt;&gt; в то время как скрипты, зарегистрированные в RegisterClientScriptBlock, были размещены сразу после тега формы открытия.</span><span class="sxs-lookup"><span data-stu-id="4b38e-515">In 1.X, scripts registered with RegisterStartupScript were placed just before the closing &lt;/form&gt; tag while scripts registered with RegisterClientScriptBlock were placed immediately after the opening &lt;form&gt; tag.</span></span> <span data-ttu-id="4b38e-516">В ASP.NET 2.0, оба размещаются непосредственно перед закрытием &lt;/ тег формы.&gt;</span><span class="sxs-lookup"><span data-stu-id="4b38e-516">In ASP.NET 2.0, both are placed immediately before the closing &lt;/form&gt; tag.</span></span>

> [!NOTE]
> <span data-ttu-id="4b38e-517">Если вы регистрируете функцию в RegisterStartupScript, эта функция не будет выполняться до тех пор, пока вы явно не назовете ее в коде клиентской стороны.</span><span class="sxs-lookup"><span data-stu-id="4b38e-517">If you register a function with RegisterStartupScript, that function will not execute until you explicitly call it in client-side code.</span></span>

<span data-ttu-id="4b38e-518">Используйте метод IsStartupScriptRegistered, чтобы определить, был ли скрипт уже зарегистрирован, и избежать попытки перерегистрации скрипта.</span><span class="sxs-lookup"><span data-stu-id="4b38e-518">Use the IsStartupScriptRegistered method to determine if a script has already been registered and avoid an attempt to re-register a script.</span></span>

## <a name="other-clientscriptmanager-methods"></a><span data-ttu-id="4b38e-519">Другие методы ClientScriptManager</span><span class="sxs-lookup"><span data-stu-id="4b38e-519">Other ClientScriptManager Methods</span></span>

<span data-ttu-id="4b38e-520">Вот некоторые из других полезных методов класса ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="4b38e-520">Here are some of the other useful methods of the ClientScriptManager class.</span></span>

|  <span data-ttu-id="4b38e-521"><strong>GetCallbackEventСправка</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-521"><strong>GetCallbackEventReference</strong></span></span>   |                                                 <span data-ttu-id="4b38e-522">Смотрите обратные вызовы сценариев ранее в этом модуле.</span><span class="sxs-lookup"><span data-stu-id="4b38e-522">See script callbacks earlier in this module.</span></span>                                                 |
|-----------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
|  <span data-ttu-id="4b38e-523"><strong>GetPostBackКлиентГиперлинк</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-523"><strong>GetPostBackClientHyperlink</strong></span></span>  |                <span data-ttu-id="4b38e-524">Получает ссылку JavaScript (javascript:&lt;вызов),&gt;который может быть использован для публикации от события на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-524">Gets a JavaScript reference (javascript:&lt;call&gt;) that can be used to post back from a client-side event.</span></span>                 |
|  <span data-ttu-id="4b38e-525"><strong>GetPostBackEventСправка</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-525"><strong>GetPostBackEventReference</strong></span></span>   |                                   <span data-ttu-id="4b38e-526">Получает строку, которая может быть использована для инициирования публикации обратно от клиента.</span><span class="sxs-lookup"><span data-stu-id="4b38e-526">Gets a string that can be used to initiate a post back from the client.</span></span>                                    |
|      <span data-ttu-id="4b38e-527"><strong>GetWebResourceUrl</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-527"><strong>GetWebResourceUrl</strong></span></span>       | <span data-ttu-id="4b38e-528">Возвращает URL-адрес ресурсу, встроенного в сборку.</span><span class="sxs-lookup"><span data-stu-id="4b38e-528">Returns a URL to a resource that is embedded in an assembly.</span></span> <span data-ttu-id="4b38e-529">Необходимо использовать совместно с <strong>RegisterClientScriptResource</strong>.</span><span class="sxs-lookup"><span data-stu-id="4b38e-529">Must be used in conjunction with <strong>RegisterClientScriptResource</strong>.</span></span> |
| <span data-ttu-id="4b38e-530"><strong>РегистрацияКлиентСКриптРесурс</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-530"><strong>RegisterClientScriptResource</strong></span></span> |     <span data-ttu-id="4b38e-531">Регистрация веб-ресурса со страницей.</span><span class="sxs-lookup"><span data-stu-id="4b38e-531">Registers a Web resource with the page.</span></span> <span data-ttu-id="4b38e-532">Это ресурсы, встроенные в сборку и обрабатываемые новым обработчиком WebResource.axd.</span><span class="sxs-lookup"><span data-stu-id="4b38e-532">These are resources embedded in an assembly and handled by the new WebResource.axd handler.</span></span>      |
|     <span data-ttu-id="4b38e-533"><strong>РегистрХидноеполе</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-533"><strong>RegisterHiddenField</strong></span></span>      |                                                 <span data-ttu-id="4b38e-534">Регистрирует скрытое поле формы со страницей.</span><span class="sxs-lookup"><span data-stu-id="4b38e-534">Registers a hidden form field with the page.</span></span>                                                 |
|  <span data-ttu-id="4b38e-535"><strong>RegisteronSubmitStatement</strong></span><span class="sxs-lookup"><span data-stu-id="4b38e-535"><strong>RegisterOnSubmitStatement</strong></span></span>   |                                  <span data-ttu-id="4b38e-536">Регистрирует код на стороне клиента, который выполняется при отправке формы HTML.</span><span class="sxs-lookup"><span data-stu-id="4b38e-536">Registers client-side code that executes when the HTML form is submitted.</span></span>                                   |
