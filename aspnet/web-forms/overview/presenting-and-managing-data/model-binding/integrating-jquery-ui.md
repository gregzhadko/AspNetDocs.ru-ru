---
uid: web-forms/overview/presenting-and-managing-data/model-binding/integrating-jquery-ui
title: Интеграция пользовательского интерфейса JQuery с привязкой модели и веб-формами | Документация Майкрософт
author: Rick-Anderson
description: В этой серии руководств демонстрируются основные аспекты использования привязки модели с проектом веб-форм ASP.NET. Привязка модели делает взаимодействие данных более прямым-...
ms.author: riande
ms.date: 02/27/2014
ms.assetid: 3cbab37b-fb0f-4751-9ec4-74e068c3f380
msc.legacyurl: /web-forms/overview/presenting-and-managing-data/model-binding/integrating-jquery-ui
msc.type: authoredcontent
ms.openlocfilehash: c8d711dd44950116f3a3e09d5d12c507918c543f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78521982"
---
# <a name="integrating-jquery-ui-datepicker-with-model-binding-and-web-forms"></a>Интеграция пользовательского интерфейса JQuery с привязкой модели и веб-формами

от [Tom фитзмаккен](https://github.com/tfitzmac)

> В этой серии руководств демонстрируются основные аспекты использования привязки модели с проектом веб-форм ASP.NET. Привязка модели делает взаимодействие данных более прямым, чем работа с объектами источника данных (например, ObjectDataSource или SqlDataSource). Эта серия начинается с вводного материала и переходит к более сложным концепциям в последующих руководствах.
> 
> В этом руководстве показано, как добавить мини-приложение [DatePicker](http://jqueryui.com/datepicker/) пользовательского интерфейса jQuery в форму Web Forms и использовать привязку модели для обновления базы данных с выбранным значением.
> 
> Это руководство строится на проекте, созданном в [первой](retrieving-data.md) и [второй](updating-deleting-and-creating-data.md) частях серии.
> 
> Вы можете [скачать](https://go.microsoft.com/fwlink/?LinkId=286116) полный проект в C# или VB. Загружаемый код работает как с Visual Studio 2012, так и с Visual Studio 2013. В нем используется шаблон Visual Studio 2012, который немного отличается от шаблона Visual Studio 2013, показанного в этом руководстве.

## <a name="what-youll-build"></a>Что будет построено

В этом руководстве вы выполните следующие действия.

1. Добавление свойства в модель для записи даты регистрации учащегося
2. Предоставление пользователю возможности выбора даты регистрации с помощью мини-приложения DatePicker пользовательского интерфейса JQuery
3. Применение правил проверки для даты регистрации

Мини-приложение DatePicker пользовательского интерфейса JQuery позволяет пользователям легко выбирать дату из календаря, который появляется, когда пользователь взаимодействует с полем. Использование этого мини-приложения может оказаться более удобным для пользователей, чем ввод даты вручную. Интеграция мини-приложения DatePicker в страницу, использующую привязку модели для операций с данными, требует лишь небольшого объема дополнительной работы.

## <a name="add-a-new-property-to-the-model"></a>Добавление нового свойства в модель

Во-первых, вы добавите свойство **DateTime** в модель учащихся и перенесите это изменение в базу данных. Откройте **UniversityModels.CS**и добавьте выделенный код в модель учащихся.

[!code-csharp[Main](integrating-jquery-ui/samples/sample1.cs?highlight=16-18)]

**Ранжеаттрибуте** включается для применения правил проверки для свойства. В этом руководстве предполагается, что университет Contoso основан на 1 января 2013, а значит, что предыдущие даты регистрации недействительны.

В окне Управление пакетами добавьте миграцию, выполнив команду **Add-Migration адденроллментдате**. Обратите внимание, что код миграции добавляет новый столбец datetime в таблицу Student. Чтобы сопоставить значение, указанное в Ранжеаттрибуте, добавьте значение по умолчанию для нового столбца, как показано в выделенном ниже коде.

[!code-csharp[Main](integrating-jquery-ui/samples/sample2.cs?highlight=11)]

Сохраните изменения в файле миграции.

Повторное заполнение данных не требуется. Поэтому откройте **Configuration.CS** в папке Migrations и удалите или закомментируйте код в методе **SEED** . Сохраните файл и закройте его.

Теперь выполните команду **Update-Database**. Обратите внимание, что столбец теперь существует в базе данных, а все существующие записи имеют значение по умолчанию для Енроллментдате.

## <a name="add-dynamic-controls-for-enrollment-date"></a>Добавление динамических элементов управления для даты регистрации

Теперь вы добавите элементы управления для отображения и изменения даты регистрации. На этом этапе значение изменяется через текстовое поле. Далее в этом руководстве вы измените текстовое поле на мини-приложение DatePicker JQuery.

Во-первых, важно отметить, что вносить изменения в файл **аддстудент. aspx** не требуется. Элемент управления DynamicControl автоматически выполнит визуализацию нового свойства.

Откройте **students. aspx**и добавьте следующий выделенный код.

[!code-aspx[Main](integrating-jquery-ui/samples/sample3.aspx?highlight=13)]

Запустите приложение и обратите внимание, что значение даты регистрации можно задать, введя дату. При добавлении нового учащегося:

![задать дату](integrating-jquery-ui/_static/image1.png)

Или измените существующее значение:

![изменить дату](integrating-jquery-ui/_static/image2.png)

Ввод даты работает, но может не быть клиентом, который вы хотите предоставлять. В следующем разделе вы включите выбор даты в календаре.

## <a name="install-nuget-package-to-work-with-jquery-ui"></a>Установка пакета NuGet для работы с пользовательским интерфейсом JQuery

Пакет NuGet **пользовательского интерфейса сок** обеспечивает простую интеграцию мини-приложений пользовательского интерфейса jQuery в ваше приложение. Чтобы использовать этот пакет, установите его через NuGet.

![Добавление пользовательского интерфейса сок](integrating-jquery-ui/_static/image3.png)

Устанавливаемая версия пользовательского интерфейса сок может конфликтовать с версией JQuery в приложении. Прежде чем продолжить работу с этим руководством, попробуйте запустить приложение. При возникновении ошибки JavaScript необходимо согласовать версию JQuery. Вы можете добавить ожидаемую версию JQuery в папку Scripts (версия 1.8.2 во время написания этого руководства) или в site. master укажите путь к файлу JQuery.

[!code-aspx[Main](integrating-jquery-ui/samples/sample4.aspx)]

## <a name="customize-datetime-template-to-include-datepicker-widget"></a>Настройка шаблона даты и времени для включения мини-приложения DatePicker

Вы добавите мини-приложение DatePicker в шаблон динамических данных для редактирования значения DateTime. Добавив мини-приложение в шаблон, оно автоматически отображается как в форме для добавления нового учащегося, так и в представлении сетки для редактирования учащихся. Откройте **DateTime\_Edit. ascx**и добавьте следующий выделенный код.

[!code-aspx[Main](integrating-jquery-ui/samples/sample5.aspx?highlight=3)]

В файле кода программной части будут заданы минимальные и максимальные даты для DatePicker. Устанавливая эти значения, пользователи не смогут переходить к недопустимым датам. Вы получите минимальное и максимальное значения из **ранжеаттрибуте** для свойства DateTime, если оно предоставлено. Откройте **DateTime\_Edit.ascx.CS**и добавьте следующий выделенный код на страницу\_метод Load.

[!code-csharp[Main](integrating-jquery-ui/samples/sample6.cs?highlight=9-14)]

Запустите веб-приложение и перейдите на страницу Аддстудент. Укажите значения для полей и обратите внимание, что при щелчке текстового поля для даты регистрации отображается календарь.

![Выбор даты](integrating-jquery-ui/_static/image4.png)

Выберите дату и нажмите кнопку **Вставить**. Ранжеаттрибуте принудительно применяет проверку на сервере. Установив свойство minDate для DatePicker, вы также примените проверку на клиенте. Календарь не позволяет пользователю переходить к дате до значения minDate.

При редактировании записи в представлении сетки также отображается календарь.

![DatePicker в GridView](integrating-jquery-ui/_static/image5.png)

## <a name="conclusion"></a>Заключение

В этом учебнике вы узнали, как внедрить мини-приложение JQuery в форму Web Forms, использующую привязку модели.

В следующем [руководстве](using-query-string-values-to-retrieve-data.md)для выбора данных будет использоваться значение строки запроса.

> [!div class="step-by-step"]
> [Назад](sorting-paging-and-filtering-data.md)
> [Вперед](using-query-string-values-to-retrieve-data.md)
