---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12
title: 'Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: развертывание в рабочей среде — 7 из 12 | Документация Майкрософт'
author: tdykstra
description: В этой серии учебников показано, как развернуть (опубликовать) проект веб-приложения ASP.NET, включающий базу данных SQL Server Compact, с помощью Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: b83ab819-2b05-4776-b7b4-79ef78d457a5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12
msc.type: authoredcontent
ms.openlocfilehash: db838633accdedd7c0693b126a007e254ca681e4
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74627226"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-the-production-environment---7-of-12"></a><span data-ttu-id="ecc27-103">Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: развертывание в рабочей среде — 7 из 12</span><span class="sxs-lookup"><span data-stu-id="ecc27-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to the Production Environment - 7 of 12</span></span>

<span data-ttu-id="ecc27-104">от [Tom Dykstra)](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ecc27-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="ecc27-105">Скачать начальный проект</span><span class="sxs-lookup"><span data-stu-id="ecc27-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="ecc27-106">В этой серии учебников показано, как развернуть (опубликовать) проект веб-приложения ASP.NET, включающий базу данных SQL Server Compact, с помощью Visual Studio 2012 RC или Visual Studio Express 2012 RC для Web.</span><span class="sxs-lookup"><span data-stu-id="ecc27-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="ecc27-107">При установке обновления веб-публикации можно также использовать Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="ecc27-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="ecc27-108">Введение в серию см. [в первом учебнике серии](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="ecc27-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="ecc27-109">Руководство, в котором показаны функции развертывания, появившиеся после выпуска версии-КАНДИДАТа Visual Studio 2012, демонстрирует развертывание SQL Server выпусков, отличных от SQL Server Compact, и демонстрация развертывания в веб-приложениях службы приложений Azure см. в разделе [ASP.NET Web Deploying using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="ecc27-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="ecc27-110">Обзор</span><span class="sxs-lookup"><span data-stu-id="ecc27-110">Overview</span></span>

<span data-ttu-id="ecc27-111">В этом руководстве вы настроите учетную запись с поставщиком услуг размещения и развернете веб-приложение ASP.NET в рабочей среде с помощью функции публикации одним щелчком в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ecc27-111">In this tutorial, you set up an account with a hosting provider and deploy your ASP.NET web application to the production environment by using the Visual Studio one-click publish feature.</span></span>

<span data-ttu-id="ecc27-112">Напоминание. Если вы получаете сообщение об ошибке или что-то не работает при работе с этим руководством, обязательно ознакомьтесь со [страницей устранения неполадок](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="ecc27-112">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="selecting-a-hosting-provider"></a><span data-ttu-id="ecc27-113">Выбор поставщика услуг размещения</span><span class="sxs-lookup"><span data-stu-id="ecc27-113">Selecting a Hosting Provider</span></span>

<span data-ttu-id="ecc27-114">Для приложения университета Contoso и этой серии руководств требуется поставщик, поддерживающий ASP.NET 4 и веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="ecc27-114">For the Contoso University application and this tutorial series, you need a provider that supports ASP.NET 4 and Web Deploy.</span></span> <span data-ttu-id="ecc27-115">Была выбрана конкретная компания по размещению, чтобы в руководствах были показаны все возможности развертывания на веб-сайте в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="ecc27-115">A specific hosting company was chosen so that the tutorials could illustrate the complete experience of deploying to a live website.</span></span> <span data-ttu-id="ecc27-116">Каждая компания размещения предоставляет различные функции, и процесс развертывания на серверах несколько отличается.</span><span class="sxs-lookup"><span data-stu-id="ecc27-116">Each hosting company provides different features, and the experience of deploying to their servers varies somewhat.</span></span> <span data-ttu-id="ecc27-117">Однако процесс, описанный в этом руководстве, является типичным для всего процесса.</span><span class="sxs-lookup"><span data-stu-id="ecc27-117">However, the process described in this tutorial is typical for the overall process.</span></span> <span data-ttu-id="ecc27-118">Поставщик услуг размещения, используемый для этого учебника, Cytanium.com, является одним из множества доступных, и его использование в этом руководстве не является рекомендацией или рекомендациями.</span><span class="sxs-lookup"><span data-stu-id="ecc27-118">The hosting provider used for this tutorial, Cytanium.com, is one of many that are available, and its use in this tutorial does not constitute an endorsement or recommendation.</span></span>

<span data-ttu-id="ecc27-119">Когда вы будете готовы выбрать собственного поставщика услуг размещения, вы можете сравнить функции и цены в [коллекции поставщиков](https://www.microsoft.com/web/hosting) на сайте Microsoft.com/Web.</span><span class="sxs-lookup"><span data-stu-id="ecc27-119">When you are ready to select your own hosting provider, you can compare features and prices in the [gallery of providers](https://www.microsoft.com/web/hosting) on the Microsoft.com/web site.</span></span>

## <a name="creating-an-account"></a><span data-ttu-id="ecc27-120">Создание учетной записи</span><span class="sxs-lookup"><span data-stu-id="ecc27-120">Creating an Account</span></span>

<span data-ttu-id="ecc27-121">Создайте учетную запись в выбранном поставщике.</span><span class="sxs-lookup"><span data-stu-id="ecc27-121">Create an account at your selected provider.</span></span> <span data-ttu-id="ecc27-122">Если поддержка полной SQL Server базы данных является дополнительным, вам не нужно выбирать ее для работы с этим руководством, но это потребуется для [перехода на SQL Server](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12.md) учебнике далее в этой серии.</span><span class="sxs-lookup"><span data-stu-id="ecc27-122">If support for a full SQL Server database is an added extra, you do not need to select it for this tutorial, but you'll need it for the [Migrating to SQL Server](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12.md) tutorial later in this series.</span></span>

<span data-ttu-id="ecc27-123">Для этих учебников не нужно регистрировать новое доменное имя.</span><span class="sxs-lookup"><span data-stu-id="ecc27-123">For these tutorials, you don't have to register a new domain name.</span></span> <span data-ttu-id="ecc27-124">Проверить успешность развертывания можно с помощью временного URL-адреса, назначенного сайту поставщиком.</span><span class="sxs-lookup"><span data-stu-id="ecc27-124">You can test to verify successful deployment by using the temporary URL assigned to the site by the provider.</span></span>

<span data-ttu-id="ecc27-125">После создания учетной записи вы обычно получаете приветственное сообщение электронной почты, содержащее всю необходимую информацию для развертывания и управления сайтом.</span><span class="sxs-lookup"><span data-stu-id="ecc27-125">After the account has been created, you typically receive a welcome email that contains all the information you need in order to deploy and manage your site.</span></span> <span data-ttu-id="ecc27-126">Сведения, которые отправляет поставщик услуг размещения, будут аналогичны приведенным здесь.</span><span class="sxs-lookup"><span data-stu-id="ecc27-126">The information that your hosting provider sends you will be similar to what is shown here.</span></span> <span data-ttu-id="ecc27-127">Приветственное сообщение Цитаниум, отправляемое новым владельцам учетных записей, содержит следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="ecc27-127">The Cytanium welcome email that's sent to new account owners includes the following information:</span></span>

- <span data-ttu-id="ecc27-128">URL-адрес сайта панели управления поставщика, на котором можно управлять параметрами сайта.</span><span class="sxs-lookup"><span data-stu-id="ecc27-128">The URL to the provider's control panel site, where you can manage settings for your site.</span></span> <span data-ttu-id="ecc27-129">Указанные вами идентификатор и пароль включены в эту часть приветственного сообщения электронной почты для справки.</span><span class="sxs-lookup"><span data-stu-id="ecc27-129">The ID and password you specified are included in this part of the welcome email for easy reference.</span></span> <span data-ttu-id="ecc27-130">(Оба были изменены на демонстрационное значение для этой иллюстрации.)</span><span class="sxs-lookup"><span data-stu-id="ecc27-130">(Both have been changed to a demo value for this illustration.)</span></span>

    <span data-ttu-id="ecc27-131">[![Welcome_Email_Control_Panel_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-131">[![Welcome_Email_Control_Panel_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image1.png)</span></span>
- <span data-ttu-id="ecc27-132">Версия .NET Framework по умолчанию и информация о том, как ее изменить.</span><span class="sxs-lookup"><span data-stu-id="ecc27-132">The default .NET Framework version and information about how to change it.</span></span> <span data-ttu-id="ecc27-133">Многие сайты размещения по умолчанию имеют значение 2,0, которое работает с ASP.NET приложениями, предназначенными для .NET Framework 2,0, 3,0 или 3,5.</span><span class="sxs-lookup"><span data-stu-id="ecc27-133">Many hosting sites default to 2.0, which works with ASP.NET applications that target the .NET Framework 2.0, 3.0, or 3.5.</span></span> <span data-ttu-id="ecc27-134">Однако университет Contoso — это приложение .NET Framework 4, поэтому необходимо изменить этот параметр.</span><span class="sxs-lookup"><span data-stu-id="ecc27-134">However Contoso University is a .NET Framework 4 application, so you have to change this setting.</span></span> <span data-ttu-id="ecc27-135">(Для приложения ASP.NET 4,5 следует использовать параметр .NET 4,0.)</span><span class="sxs-lookup"><span data-stu-id="ecc27-135">(For an ASP.NET 4.5 application you would use the .NET 4.0 setting.)</span></span>

    <span data-ttu-id="ecc27-136">[![Welcome_Email_Framework_Version](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-136">[![Welcome_Email_Framework_Version](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image3.png)</span></span>
- <span data-ttu-id="ecc27-137">Временный URL-адрес, который вы можете использовать для доступа к вашему сайту.</span><span class="sxs-lookup"><span data-stu-id="ecc27-137">The temporary URL that you can use to access your web site.</span></span> <span data-ttu-id="ecc27-138">При создании этой учетной записи в качестве существующего доменного имени была указана «contosouniversity.com».</span><span class="sxs-lookup"><span data-stu-id="ecc27-138">When this account was created, "contosouniversity.com" was entered as the existing domain name.</span></span> <span data-ttu-id="ecc27-139">Поэтому временный URL-адрес `http://contosouniversity.com.vserver01.cytanium.com`.</span><span class="sxs-lookup"><span data-stu-id="ecc27-139">Therefore the temporary URL is `http://contosouniversity.com.vserver01.cytanium.com`.</span></span>

    <span data-ttu-id="ecc27-140">[![Welcome_Email_Temporary_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-140">[![Welcome_Email_Temporary_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image5.png)</span></span>
- <span data-ttu-id="ecc27-141">Сведения о том, как настроить базы данных и строки подключения, необходимые для доступа к ним:</span><span class="sxs-lookup"><span data-stu-id="ecc27-141">Information about how to set up databases, and the connection strings that you need in order to access them:</span></span>

    <span data-ttu-id="ecc27-142">[![Welcome_Email_Database_Info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-142">[![Welcome_Email_Database_Info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image7.png)</span></span>
- <span data-ttu-id="ecc27-143">Сведения о средствах и параметрах для развертывания сайта.</span><span class="sxs-lookup"><span data-stu-id="ecc27-143">Information about tools and settings for deploying your site.</span></span> <span data-ttu-id="ecc27-144">(В сообщении электронной почты от Цитаниум также упоминается WebMatrix, который здесь опускается.)</span><span class="sxs-lookup"><span data-stu-id="ecc27-144">(The email from Cytanium also mentions WebMatrix, which is omitted here.)</span></span>

    <span data-ttu-id="ecc27-145">[![Welcome_Email_Deploy_info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image10.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-145">[![Welcome_Email_Deploy_info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image10.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image9.png)</span></span>

## <a name="setting-the-net-framework-version"></a><span data-ttu-id="ecc27-146">Задание версии .NET Framework</span><span class="sxs-lookup"><span data-stu-id="ecc27-146">Setting the .NET Framework Version</span></span>

<span data-ttu-id="ecc27-147">Приветственное сообщение Цитаниум содержит ссылку на инструкции по изменению версии .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="ecc27-147">The Cytanium welcome email includes a link to instructions on how to change the version of the .NET Framework.</span></span> <span data-ttu-id="ecc27-148">Эти инструкции объясняют, что это можно сделать с помощью панели управления Цитаниум.</span><span class="sxs-lookup"><span data-stu-id="ecc27-148">These instructions explain that this can be done through the Cytanium control panel.</span></span> <span data-ttu-id="ecc27-149">Другие поставщики имеют узлы панели управления, которые выглядят иначе, или они могут попытаться сделать это другим способом.</span><span class="sxs-lookup"><span data-stu-id="ecc27-149">Other providers have control panel sites that look different, or they may instruct you to do this in a different way.</span></span>

<span data-ttu-id="ecc27-150">Перейдите на страницу URL-адрес панели управления.</span><span class="sxs-lookup"><span data-stu-id="ecc27-150">Go to the control panel URL.</span></span> <span data-ttu-id="ecc27-151">После входа с использованием имени пользователя и пароля отобразится панель управления.</span><span class="sxs-lookup"><span data-stu-id="ecc27-151">After logging in with your user name and password, you see the control panel.</span></span>

<span data-ttu-id="ecc27-152">[![Cytanium_Control_Panel](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image12.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-152">[![Cytanium_Control_Panel](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image12.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image11.png)</span></span>

<span data-ttu-id="ecc27-153">В поле **пространства размещения** наведите указатель мыши на значок веб-сайта и выберите в меню пункт **веб-сайты** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-153">In the **Hosting Spaces** box, hold the pointer over the Web icon and select **Web Sites** from the menu.</span></span>

<span data-ttu-id="ecc27-154">[![Cytanium_Control_Panel_selecting_Web_Sites](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image14.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-154">[![Cytanium_Control_Panel_selecting_Web_Sites](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image14.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image13.png)</span></span>

<span data-ttu-id="ecc27-155">В поле **веб-сайты** щелкните **contosouniversity.com** (имя сайта, которое использовалось при создании учетной записи).</span><span class="sxs-lookup"><span data-stu-id="ecc27-155">In the **Web Sites** box, click **contosouniversity.com** (the name of the site that you used when you created the account).</span></span>

<span data-ttu-id="ecc27-156">[![Cytanium_Control_Panel_selecting_contosouniversity](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image16.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-156">[![Cytanium_Control_Panel_selecting_contosouniversity](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image16.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image15.png)</span></span>

<span data-ttu-id="ecc27-157">В диалоговом окне **Свойства веб-сайта** перейдите на вкладку **расширения** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-157">In the **Web Site Properties** box, select the **Extensions** tab.</span></span>

<span data-ttu-id="ecc27-158">[![Cytanium_Control_Panel_Extensions_tab](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-158">[![Cytanium_Control_Panel_Extensions_tab](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image17.png)</span></span>

<span data-ttu-id="ecc27-159">Измените ASP.NET с **интегрированного конвейера 2,0** на **4,0 (интегрированный конвейер)** и нажмите кнопку **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-159">Change ASP.NET from **2.0 Integrated Pipeline** to **4.0 (Integrated Pipeline)**, and then click **Update**.</span></span>

## <a name="publishing-to-the-hosting-provider"></a><span data-ttu-id="ecc27-160">Публикация в поставщике услуг размещения</span><span class="sxs-lookup"><span data-stu-id="ecc27-160">Publishing to the Hosting Provider</span></span>

<span data-ttu-id="ecc27-161">Приветственное сообщение от поставщика услуг размещения включает все параметры, необходимые для публикации проекта. Эти сведения можно ввести вручную в профиль публикации.</span><span class="sxs-lookup"><span data-stu-id="ecc27-161">The welcome email from the hosting provider includes all of the settings you need in order to publish the project, and you can enter that information manually into a publish profile.</span></span> <span data-ttu-id="ecc27-162">Но вы будете использовать простой и менее подверженный ошибкам метод настройки развертывания для поставщика: вы скачиваете *publishsettings* -файл и импортируете его в профиль публикации.</span><span class="sxs-lookup"><span data-stu-id="ecc27-162">But you'll use an easier and less error-prone method to configure deployment to the provider: you'll download a *.publishsettings* file and import it into a publish profile.</span></span>

<span data-ttu-id="ecc27-163">В браузере перейдите на панель управления Цитаниум и выберите **веб** - **сайты.**</span><span class="sxs-lookup"><span data-stu-id="ecc27-163">In your browser, go to the Cytanium control panel and select **Web** and then select **Web Sites.**</span></span>

![Панель управления "Выбор веб-сайтов"](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image19.png)

<span data-ttu-id="ecc27-165">Выберите веб-сайт **contosouniversity.com** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-165">Select the **contosouniversity.com** web site.</span></span>

![Панель управления выбор contosouniversity.com](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image20.png)

<span data-ttu-id="ecc27-167">Перейдите на вкладку **веб-публикация** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-167">Select the **Web Publishing** tab.</span></span>

![Вкладка веб-публикация панели управления](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image21.png)

<span data-ttu-id="ecc27-169">Создайте учетные данные, используемые для веб-публикации, введя имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="ecc27-169">Create credentials to use for web publishing by entering a user name and password.</span></span> <span data-ttu-id="ecc27-170">Вы можете ввести те же учетные данные, которые используются для входа в систему на панели управления.</span><span class="sxs-lookup"><span data-stu-id="ecc27-170">You can enter the same credentials that you use to log on to the control panel.</span></span> <span data-ttu-id="ecc27-171">Затем нажмите кнопку **включить**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-171">Then click **Enable**.</span></span>

![Панель управления "Создание учетных данных публикации"](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image22.png)

<span data-ttu-id="ecc27-173">Щелкните **скачать профиль публикации для этого веб-сайта**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-173">Click **Download Publishing Profile for this web site**.</span></span>

![Загрузить профиль публикации на панели управления](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image23.png)

<span data-ttu-id="ecc27-175">При появлении запроса на открытие или сохранение файла сохраните его.</span><span class="sxs-lookup"><span data-stu-id="ecc27-175">When you are prompted to open or save the file, save it.</span></span>

![Сохранить файл профиля публикации](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image24.png)

<span data-ttu-id="ecc27-177">В **Обозреватель решений** в Visual Studio щелкните правой кнопкой мыши проект ContosoUniversity и выберите **Publish (опубликовать**).</span><span class="sxs-lookup"><span data-stu-id="ecc27-177">In **Solution Explorer** in Visual Studio, right-click the ContosoUniversity project and select **Publish**.</span></span> <span data-ttu-id="ecc27-178">Диалоговое окно **Публикация веб-сайта** открывается на вкладке **Предварительный просмотр** с выбранным профилем **тестирования** , поскольку это последний использованный профиль.</span><span class="sxs-lookup"><span data-stu-id="ecc27-178">The **Publish Web** dialog box opens on the **Preview** tab with the **Test** profile selected because that is the last profile you used.</span></span>

<span data-ttu-id="ecc27-179">Перейдите на вкладку **профиль** и нажмите кнопку **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-179">Select the **Profile** tab and then Click **Import**.</span></span>

![Кнопка импорта мастера публикации веб-сайта](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image25.png)

<span data-ttu-id="ecc27-181">В диалоговом окне **Импорт параметров публикации** выберите скачанный файл *publishsettings* и нажмите кнопку **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-181">In the **Import Publish Settings** dialog box, select the *.publishsettings* file that you downloaded, and click **Open**.</span></span> <span data-ttu-id="ecc27-182">Мастер переходит на вкладку Подключение со всеми заполненными полями.</span><span class="sxs-lookup"><span data-stu-id="ecc27-182">The wizard advances to the Connection tab with all of the fields filled in.</span></span>

![Вкладка подключения мастера публикации веб-сайта](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image26.png)

<span data-ttu-id="ecc27-184">Файл. publishsettings помещает в поле URL-адреса запланированный постоянный URL-адрес сайта, но если вы еще не приобрели этот домен, замените значение временным URL-адресом.</span><span class="sxs-lookup"><span data-stu-id="ecc27-184">The .publishsettings file puts the planned permanent URL for the site in the Destination URL box, but if you haven't purchased that domain yet, replace the value with the temporary URL.</span></span> <span data-ttu-id="ecc27-185">В этом примере URL-адрес  *[http://contosouniversity.com.vserver01.cytanium.com](http://contosouniversity.com.vserver01.cytanium.com).*</span><span class="sxs-lookup"><span data-stu-id="ecc27-185">For this example, the URL is *[http://contosouniversity.com.vserver01.cytanium.com](http://contosouniversity.com.vserver01.cytanium.com).*</span></span> <span data-ttu-id="ecc27-186">Единственное назначение этого поля — указать URL-адрес, который браузер будет открывать автоматически после успешного развертывания.</span><span class="sxs-lookup"><span data-stu-id="ecc27-186">The only purpose of this box is to specify what URL the browser will open to automatically after successfully after deployment.</span></span> <span data-ttu-id="ecc27-187">Если оставить его пустым, единственное следствие заключается в том, что браузер не запустится автоматически после развертывания.</span><span class="sxs-lookup"><span data-stu-id="ecc27-187">If you leave it blank, the only consequence is that the browser won't start automatically after deployment.</span></span>

<span data-ttu-id="ecc27-188">Щелкните **проверить подключение** , чтобы убедиться, что параметры заданы правильно, и вы можете подключиться к серверу.</span><span class="sxs-lookup"><span data-stu-id="ecc27-188">Click **Validate Connection** to verify that the settings are correct and you can connect to the server.</span></span> <span data-ttu-id="ecc27-189">Как было показано ранее, зеленая галочка означает, что соединение прошло успешно.</span><span class="sxs-lookup"><span data-stu-id="ecc27-189">As you saw earlier, a green check mark verifies that the connection is successful.</span></span>

<span data-ttu-id="ecc27-190">При нажатии кнопки Проверить подключение может отобразиться диалоговое окно **Ошибка сертификата** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-190">When you click Validate Connection, you might see a **Certificate Error** dialog box.</span></span> <span data-ttu-id="ecc27-191">В этом случае убедитесь, что имя сервера отличается от предполагаемого.</span><span class="sxs-lookup"><span data-stu-id="ecc27-191">If you do, verify that the server name is what you expect.</span></span> <span data-ttu-id="ecc27-192">Если это так, выберите **сохранить этот сертификат для будущих сеансов Visual Studio** и нажмите кнопку **принять**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-192">If it is, select **Save this certificate for future sessions of Visual Studio** and click **Accept**.</span></span> <span data-ttu-id="ecc27-193">(Эта ошибка означает, что поставщик услуг размещения решил избежать расходов на приобретение сертификата SSL для URL-адреса, на который выполняется развертывание.</span><span class="sxs-lookup"><span data-stu-id="ecc27-193">(This error means that the hosting provider has chosen to avoid the expense of purchasing an SSL certificate for the URL that you are deploying to.</span></span> <span data-ttu-id="ecc27-194">Если вы предпочитаете установить безопасное подключение с помощью действительного сертификата, обратитесь к поставщику услуг размещения.)</span><span class="sxs-lookup"><span data-stu-id="ecc27-194">If you prefer to establish a secure connection by using a valid certificate, contact your hosting provider.)</span></span>

![Ошибка сертификата](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image27.png)

<span data-ttu-id="ecc27-196">Нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-196">Click **Next**.</span></span>

<span data-ttu-id="ecc27-197">В разделе **базы данных** на вкладке **Параметры** введите те же значения, которые были введены для профиля тестовой публикации.</span><span class="sxs-lookup"><span data-stu-id="ecc27-197">In the **Databases** section of the **Settings** tab, enter the same values that you entered for the Test publish profile.</span></span> <span data-ttu-id="ecc27-198">Нужные строки подключения можно найти в раскрывающихся списках.</span><span class="sxs-lookup"><span data-stu-id="ecc27-198">You'll find the connection strings you need in the drop-down lists.</span></span>

- <span data-ttu-id="ecc27-199">В поле Строка подключения для **SchoolContext** выберите `Data Source=|DataDirectory|School-Prod.sdf`</span><span class="sxs-lookup"><span data-stu-id="ecc27-199">In the connection string box for **SchoolContext,** select `Data Source=|DataDirectory|School-Prod.sdf`</span></span>
- <span data-ttu-id="ecc27-200">В разделе **SchoolContext**выберите **применить Code First migrations**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-200">Under **SchoolContext**, select **Apply Code First Migrations**.</span></span>
- <span data-ttu-id="ecc27-201">В поле Строка подключения для **DefaultConnection**выберите `Data Source=|DataDirectory|aspnet-Prod.sdf`</span><span class="sxs-lookup"><span data-stu-id="ecc27-201">In the connection string box for **DefaultConnection**, select `Data Source=|DataDirectory|aspnet-Prod.sdf`</span></span>
- <span data-ttu-id="ecc27-202">В разделе **DefaultConnection**оставьте поле **обновить базу данных** не выбрано.</span><span class="sxs-lookup"><span data-stu-id="ecc27-202">Under **DefaultConnection**, leave **Update database** cleared.</span></span>

![Вкладка параметров мастера публикации веб-сайта](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image28.png)

<span data-ttu-id="ecc27-204">Нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-204">Click **Next**.</span></span>

<span data-ttu-id="ecc27-205">На вкладке **Предварительный просмотр** нажмите кнопку **начать предварительный просмотр** , чтобы просмотреть список файлов, которые будут скопированы.</span><span class="sxs-lookup"><span data-stu-id="ecc27-205">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span> <span data-ttu-id="ecc27-206">Вы увидите тот же список, который вы видели ранее при развертывании служб IIS на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="ecc27-206">You see the same list that you saw earlier when you deployed to IIS on the local computer.</span></span>

<span data-ttu-id="ecc27-207">Перед публикацией измените имя профиля таким образом, чтобы файл преобразования Web. Production. config будет применен.</span><span class="sxs-lookup"><span data-stu-id="ecc27-207">Before you publish, change the name of the profile so that your Web.Production.config transformation file will be applied.</span></span> <span data-ttu-id="ecc27-208">Перейдите на вкладку **профиль** и щелкните **Управление профилями**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-208">Select the **Profile** tab and click **Manage Profiles**.</span></span>

![Мастер публикации веб-сайта Управление профилями](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image29.png)

<span data-ttu-id="ecc27-210">В диалоговом окне **изменение профилей веб-публикации** выберите профиль рабочей среды, нажмите кнопку **Переименовать**и измените имя профиля на Рабочая.</span><span class="sxs-lookup"><span data-stu-id="ecc27-210">In the **Edit Web Publish Profiles** dialog box, select the production profile, click **Rename**, and change the profile name to Production.</span></span> <span data-ttu-id="ecc27-211">Затем нажмите кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-211">Then click **Close**.</span></span>

![Диалоговое окно «изменение профилей веб-публикации»](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image30.png)

<span data-ttu-id="ecc27-213">Нажмите кнопку **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-213">Click **Publish**.</span></span>

<span data-ttu-id="ecc27-214">Приложение публикуется в поставщике услуг размещения.</span><span class="sxs-lookup"><span data-stu-id="ecc27-214">The application is published to the hosting provider.</span></span> <span data-ttu-id="ecc27-215">Результат отображается в окне **вывод** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-215">The result shows in the **Output** window.</span></span>

![Окно вывода после развертывания](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image31.png)

<span data-ttu-id="ecc27-217">Браузер автоматически откроется на URL-адресе, введенном в поле **URL-адрес назначения** на вкладке **Подключение** мастера **публикации веб-сайта** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-217">The browser automatically opens to the URL that you entered in **Destination URL** box on the **Connection** tab of the **Publish Web** wizard.</span></span> <span data-ttu-id="ecc27-218">Вы увидите ту же домашнюю страницу, что и при запуске сайта в Visual Studio, за исключением того, что в заголовке окна отсутствует индикатор среды "(тест)" или "(dev)".</span><span class="sxs-lookup"><span data-stu-id="ecc27-218">You see the same home page as when you run the site in Visual Studio, except now there is no "(Test)" or "(Dev)" environment indicator in the title bar.</span></span> <span data-ttu-id="ecc27-219">Это означает, что преобразование " *Web. config* " индикатора среды работало правильно.</span><span class="sxs-lookup"><span data-stu-id="ecc27-219">This indicates that the environment indicator *Web.config* transformation worked correctly.</span></span>

> [!NOTE]
> <span data-ttu-id="ecc27-220">Если в заголовке по-прежнему отображается "(тест)", удалите папку *obj* из проекта ContosoUniversity и выполните повторное развертывание.</span><span class="sxs-lookup"><span data-stu-id="ecc27-220">If you still see "(Test)" in the heading, delete the *obj* folder from the ContosoUniversity project and redeploy.</span></span> <span data-ttu-id="ecc27-221">В предварительных версиях программного обеспечения ранее примененный файл преобразования (Web. Test. config) может быть применен повторно, несмотря на то, что используется рабочий профиль.</span><span class="sxs-lookup"><span data-stu-id="ecc27-221">In pre-release versions of the software, the previously applied transformation file (Web.Test.config) might get applied again although you are using the Production profile.</span></span>

<span data-ttu-id="ecc27-222">[![Home_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image33.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-222">[![Home_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image33.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image32.png)</span></span>

<span data-ttu-id="ecc27-223">Перед запуском страницы, которая вызывает доступ к базе данных, убедитесь, что ELMAH сможет регистрировать все произошедшие ошибки.</span><span class="sxs-lookup"><span data-stu-id="ecc27-223">Before you run a page that causes database access, make sure that Elmah will be able to log any errors that occur.</span></span>

## <a name="setting-folder-permissions-for-elmah"></a><span data-ttu-id="ecc27-224">Настройка разрешений папки для ELMAH</span><span class="sxs-lookup"><span data-stu-id="ecc27-224">Setting Folder Permissions for Elmah</span></span>

<span data-ttu-id="ecc27-225">Как вы помните из предыдущего руководства в этой серии, необходимо убедиться, что приложение имеет разрешения на запись для папки в приложении, в которой ELMAH хранит файлы журнала ошибок.</span><span class="sxs-lookup"><span data-stu-id="ecc27-225">As you remember from the previous tutorial in this series, you must make sure that the application has Write permissions for the folder in your application where Elmah stores error log files.</span></span> <span data-ttu-id="ecc27-226">При развертывании служб IIS локально на компьютере эти разрешения устанавливаются вручную.</span><span class="sxs-lookup"><span data-stu-id="ecc27-226">When you deployed to IIS locally on your computer, you set those permissions manually.</span></span> <span data-ttu-id="ecc27-227">В этом разделе вы узнаете, как задать разрешения на Цитаниум.</span><span class="sxs-lookup"><span data-stu-id="ecc27-227">In this section, you'll see how to set permissions at Cytanium.</span></span> <span data-ttu-id="ecc27-228">(Некоторые поставщики услуг размещения могут не позволить это сделать. они могут предложить одну или несколько предопределенных папок с разрешениями на запись.</span><span class="sxs-lookup"><span data-stu-id="ecc27-228">(Some hosting providers may not enable you to do this; they may offer one or more predefined folders with Write permissions.</span></span> <span data-ttu-id="ecc27-229">В этом случае потребуется изменить приложение для использования указанных папок.)</span><span class="sxs-lookup"><span data-stu-id="ecc27-229">In that case you would have to modify your application to use the specified folders.)</span></span>

<span data-ttu-id="ecc27-230">Разрешения папки можно задать на панели управления Цитаниум.</span><span class="sxs-lookup"><span data-stu-id="ecc27-230">You can set folder permissions in the Cytanium control panel.</span></span> <span data-ttu-id="ecc27-231">Перейдите на страницу URL-адрес панели управления и выберите **Диспетчер файлов**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-231">Go to the control panel URL and select **File Manager**.</span></span>

<span data-ttu-id="ecc27-232">[![Cytanium_Control_Panel_with_File_Manager_selected](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image35.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-232">[![Cytanium_Control_Panel_with_File_Manager_selected](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image35.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image34.png)</span></span>

<span data-ttu-id="ecc27-233">В поле **Диспетчер файлов** выберите **contosouniversity.com** и **wwwroot** , чтобы увидеть корневую папку приложения.</span><span class="sxs-lookup"><span data-stu-id="ecc27-233">In the **File Manager** box, select **contosouniversity.com** and then **wwwroot** to see the application's root folder.</span></span> <span data-ttu-id="ecc27-234">Щелкните значок замка рядом с **ELMAH**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-234">Click the padlock icon next to **Elmah**.</span></span>

<span data-ttu-id="ecc27-235">[![Cytanium_Control_Panel_File_Manager_at_root_folder](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image37.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-235">[![Cytanium_Control_Panel_File_Manager_at_root_folder](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image37.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image36.png)</span></span>

<span data-ttu-id="ecc27-236">В окне **разрешения папки**/**файлов** установите флажки **Чтение** и **запись** для **contosouniversity.com** и нажмите кнопку **задать разрешения**.</span><span class="sxs-lookup"><span data-stu-id="ecc27-236">In the **File**/**Folder Permissions** window, select the **Read** and **Write** checkboxes for **contosouniversity.com** and click **Set Permissions**.</span></span>

<span data-ttu-id="ecc27-237">[![Cytanium_Control_Panel_File_Folder_Permissions_Elmah](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image39.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-237">[![Cytanium_Control_Panel_File_Folder_Permissions_Elmah](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image39.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image38.png)</span></span>

<span data-ttu-id="ecc27-238">Убедитесь, что ELMAH имеет доступ на запись к папке *ELMAH* , вызывая ошибку, а затем отображая отчет об ошибках ELMAH.</span><span class="sxs-lookup"><span data-stu-id="ecc27-238">Make sure that Elmah has write access to the *Elmah* folder by causing an error and then displaying the Elmah error report.</span></span> <span data-ttu-id="ecc27-239">Запросите недопустимый URL-адрес, например *студентскскскс. aspx*.</span><span class="sxs-lookup"><span data-stu-id="ecc27-239">Request an invalid URL like *Studentsxxx.aspx*.</span></span> <span data-ttu-id="ecc27-240">Как и раньше, отобразится страница *женерицеррорпаже. aspx* .</span><span class="sxs-lookup"><span data-stu-id="ecc27-240">As before, you see the *GenericErrorPage.aspx* page.</span></span> <span data-ttu-id="ecc27-241">Щелкните ссылку **выход** и запустите *ELMAH. axd*.</span><span class="sxs-lookup"><span data-stu-id="ecc27-241">Click the **Log Out** link, and then run *Elmah.axd*.</span></span> <span data-ttu-id="ecc27-242">Сначала вы получаете страницу **входа** , которая подтверждает, что преобразование *Web. config* успешно добавило авторизацию ELMAH.</span><span class="sxs-lookup"><span data-stu-id="ecc27-242">You get the **Log In** page first, which validates that the *Web.config* transform successfully added Elmah authorization.</span></span> <span data-ttu-id="ecc27-243">После входа в систему появится отчет, показывающий ошибку, которую вы только что вызывали.</span><span class="sxs-lookup"><span data-stu-id="ecc27-243">After you log in, you see the report that shows the error you just caused.</span></span>

<span data-ttu-id="ecc27-244">[![ELMAH. axd_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image41.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-244">[![Elmah.axd_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image41.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image40.png)</span></span>

## <a name="testing-in-the-production-environment"></a><span data-ttu-id="ecc27-245">Тестирование в рабочей среде</span><span class="sxs-lookup"><span data-stu-id="ecc27-245">Testing in the Production Environment</span></span>

<span data-ttu-id="ecc27-246">Запустите страницу **учащихся** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-246">Run the **Students** page.</span></span> <span data-ttu-id="ecc27-247">Приложение пытается получить доступ к базе данных School в первый раз, что активирует Code First Migrations создания базы данных.</span><span class="sxs-lookup"><span data-stu-id="ecc27-247">The application tries to access the School database for the first time, which triggers Code First Migrations to create the database.</span></span> <span data-ttu-id="ecc27-248">Когда страница отображается после задержки, она показывает, что учащихся нет.</span><span class="sxs-lookup"><span data-stu-id="ecc27-248">When the page displays after a moment's delay, it shows that there are no students.</span></span>

<span data-ttu-id="ecc27-249">[![Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image43.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-249">[![Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image43.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image42.png)</span></span>

<span data-ttu-id="ecc27-250">Запустите страницу **инструкторы** , чтобы убедиться, что начальные данные успешно вставили данные преподавателя в базу данных.</span><span class="sxs-lookup"><span data-stu-id="ecc27-250">Run the **Instructors** page to verify that the Seed data successfully inserted instructor data in the database.</span></span>

<span data-ttu-id="ecc27-251">[![Instructors_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image45.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-251">[![Instructors_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image45.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image44.png)</span></span>

<span data-ttu-id="ecc27-252">Как и в тестовой среде, необходимо убедиться, что обновления базы данных работают в рабочей среде, но обычно не требуется вводить тестовые данные в рабочую базу данных.</span><span class="sxs-lookup"><span data-stu-id="ecc27-252">As you did in the test environment, you want to verify that database updates work in the production environment, but you typically do not want to enter test data into your production database.</span></span> <span data-ttu-id="ecc27-253">В этом руководстве используется тот же метод, что и в тесте.</span><span class="sxs-lookup"><span data-stu-id="ecc27-253">For this tutorial, you'll use the same method you did in test.</span></span> <span data-ttu-id="ecc27-254">Но в реальном приложении может потребоваться найти метод, проверяющий успешность обновления базы данных, не вводя тестовые данные в рабочую базу данных.</span><span class="sxs-lookup"><span data-stu-id="ecc27-254">But in a real application you might want to find a method that validates that database updates are successful without introducing test data into the production database.</span></span> <span data-ttu-id="ecc27-255">В некоторых приложениях может быть целесообразно добавить что-то, а затем удалить.</span><span class="sxs-lookup"><span data-stu-id="ecc27-255">In some applications, it might be practical to add something and then delete it.</span></span>

<span data-ttu-id="ecc27-256">Добавьте учащийся и просмотрите данные, введенные на странице **учащихся** , чтобы убедиться в возможности обновления данных в базе данных.</span><span class="sxs-lookup"><span data-stu-id="ecc27-256">Add a student and then view the data you entered in the **Students** page to verify that you can update data in the database.</span></span>

<span data-ttu-id="ecc27-257">[![Add_Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image47.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-257">[![Add_Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image47.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image46.png)</span></span>

<span data-ttu-id="ecc27-258">[![Students_page_with_new_student_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image49.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-258">[![Students_page_with_new_student_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image49.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image48.png)</span></span>

<span data-ttu-id="ecc27-259">Проверьте правильность работы правил авторизации, выбрав пункт **Обновить кредиты** в меню **курсы** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-259">Validate that authorization rules are working correctly by selecting **Update Credits** from the **Courses** menu.</span></span> <span data-ttu-id="ecc27-260">Откроется страница **входа** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-260">The **Log In** page is displayed.</span></span> <span data-ttu-id="ecc27-261">Введите учетные данные администратора, щелкните **войти**и отобразится страница **Обновление кредитов** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-261">Enter your administrator account credentials, click **Log In**, and the **Update Credits** page is displayed.</span></span>

<span data-ttu-id="ecc27-262">[![Log_In_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image51.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-262">[![Log_In_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image51.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image50.png)</span></span>

<span data-ttu-id="ecc27-263">Если вход выполнен успешно, отображается страница **Обновление кредитов** .</span><span class="sxs-lookup"><span data-stu-id="ecc27-263">If login is successful, the **Update Credits** page is displayed.</span></span> <span data-ttu-id="ecc27-264">Это означает, что база данных членства ASP.NET (с одной учетной записью администратора) успешно развернута.</span><span class="sxs-lookup"><span data-stu-id="ecc27-264">This indicates that the ASP.NET membership database (with the single administrator account) was successfully deployed.</span></span>

<span data-ttu-id="ecc27-265">[![Update_Credits_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image53.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="ecc27-265">[![Update_Credits_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image53.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image52.png)</span></span>

<span data-ttu-id="ecc27-266">Вы успешно развернули и протестировали сайт, и доступ к нему открыт через Интернет.</span><span class="sxs-lookup"><span data-stu-id="ecc27-266">You have now successfully deployed and tested your site and it is available publicly over the Internet.</span></span>

## <a name="creating-a-more-reliable-test-environment"></a><span data-ttu-id="ecc27-267">Создание более надежной тестовой среды</span><span class="sxs-lookup"><span data-stu-id="ecc27-267">Creating a More Reliable Test Environment</span></span>

<span data-ttu-id="ecc27-268">Как описано в руководстве по [развертыванию в тестовой среде](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) , самая надежная тестовая среда будет второй учетной записью на поставщике услуг размещения, которая аналогична рабочей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="ecc27-268">As explained in the [Deploying to the Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) tutorial, the most reliable test environment would be a second account at the hosting provider that's just like the production account.</span></span> <span data-ttu-id="ecc27-269">Это было бы более затратно, чем использование локальных служб IIS в качестве тестовой среды, так как вам пришлось бы зарегистрировать вторую учетную запись размещения.</span><span class="sxs-lookup"><span data-stu-id="ecc27-269">This would be more expensive than using local IIS as your test environment, since you would have to sign up for a second hosting account.</span></span> <span data-ttu-id="ecc27-270">Но если это предотвращает ошибки или сбои рабочего сайта, вы можете решить, что это стоит делать.</span><span class="sxs-lookup"><span data-stu-id="ecc27-270">But if it prevents production site errors or outages, you might decide that it's worth the cost.</span></span>

<span data-ttu-id="ecc27-271">Большая часть процесса создания и развертывания в тестовой учетной записи похожа на то, что вы уже сделали для развертывания в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="ecc27-271">Most of the process for creating and deploying to a test account is similar to what you've already done to deploy to production:</span></span>

- <span data-ttu-id="ecc27-272">Создайте файл преобразования *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="ecc27-272">Create a *Web.config* transformation file.</span></span>
- <span data-ttu-id="ecc27-273">Создайте учетную запись на поставщике услуг размещения.</span><span class="sxs-lookup"><span data-stu-id="ecc27-273">Create an account at the hosting provider.</span></span>
- <span data-ttu-id="ecc27-274">Создайте новый профиль публикации и разверните его для тестовой учетной записи.</span><span class="sxs-lookup"><span data-stu-id="ecc27-274">Create a new publish profile and deploy to the test account.</span></span>

### <a name="preventing-public-access-to-the-test-site"></a><span data-ttu-id="ecc27-275">Запрет общего доступа к тестовому сайту</span><span class="sxs-lookup"><span data-stu-id="ecc27-275">Preventing Public Access to the Test Site</span></span>

<span data-ttu-id="ecc27-276">Важное замечание для тестовой учетной записи заключается в том, что она будет находиться в Интернете, но вы не хотите, чтобы она использовалась.</span><span class="sxs-lookup"><span data-stu-id="ecc27-276">An important consideration for the test account is that it will be live on the Internet, but you don't want the public to use it.</span></span> <span data-ttu-id="ecc27-277">Для сохранения личного сайта можно использовать один или несколько следующих методов.</span><span class="sxs-lookup"><span data-stu-id="ecc27-277">To keep the site private you can use one or more of the following methods:</span></span>

- <span data-ttu-id="ecc27-278">Обратитесь к поставщику услуг размещения, чтобы задать правила брандмауэра, которые разрешают доступ к проверочному сайту только с IP-адресов, используемых для тестирования.</span><span class="sxs-lookup"><span data-stu-id="ecc27-278">Contact the hosting provider to set firewall rules that allow access to the testing site only from IP addresses that you use for testing.</span></span>
- <span data-ttu-id="ecc27-279">Маскировка URL-адреса таким образом, чтобы он не был похож на URL-адрес общедоступного сайта.</span><span class="sxs-lookup"><span data-stu-id="ecc27-279">Disguise the URL so that it is not similar to the public site's URL.</span></span>
- <span data-ttu-id="ecc27-280">Используйте файл *robots. txt* , чтобы гарантировать, что поисковые системы не будут выполнять обход содержимого тестового сайта и передавать ссылки на него в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="ecc27-280">Use a *robots.txt* file to ensure that search engines will not crawl the test site and report links to it in search results.</span></span>

<span data-ttu-id="ecc27-281">Первый из этих методов, очевидно, является наиболее безопасным, но процедура для этого характерна для каждого поставщика услуг размещения и не будет рассмотрена в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="ecc27-281">The first of these methods is obviously the most secure, but the procedure for that is specific to each hosting provider and will not be covered in this tutorial.</span></span> <span data-ttu-id="ecc27-282">Если вы размещаете поставщика услуг размещения, чтобы разрешить только вашему IP-адресу просматривать URL-адрес тестовой учетной записи, теоретически не нужно беспокоиться о его обходе.</span><span class="sxs-lookup"><span data-stu-id="ecc27-282">If you do arrange with your hosting provider to allow only your IP address to browse to the test account URL, you theoretically don't have to worry about search engines crawling it.</span></span> <span data-ttu-id="ecc27-283">Но даже в этом случае развертывание файла *robots. txt* является хорошей идеей в качестве резервной копии на случай случайного выключения правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="ecc27-283">But even in that case, deploying a *robots.txt* file is a good idea as a backup in case that firewall rule is ever accidentally turned off.</span></span>

<span data-ttu-id="ecc27-284">Файл *robots. txt* находится в папке проекта и должен содержать в нем следующий текст:</span><span class="sxs-lookup"><span data-stu-id="ecc27-284">The *robots.txt* file goes in your project folder and should have the following text in it:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/samples/sample1.cmd)]

<span data-ttu-id="ecc27-285">`User-agent` строка указывает поисковым системам, что правила в файле применяются ко всем поисковым средствам поисковой системы (роботы), а строка `Disallow` указывает, что обход страниц на сайте не должен выполняться.</span><span class="sxs-lookup"><span data-stu-id="ecc27-285">The `User-agent` line tells search engines that the rules in the file apply to all search engine web crawlers (robots), and the `Disallow` line specifies that no pages on the site should be crawled.</span></span>

<span data-ttu-id="ecc27-286">Вы, вероятно, хотите, чтобы поисковые системы были в каталоге рабочего сайта, поэтому необходимо исключить этот файл из рабочего развертывания.</span><span class="sxs-lookup"><span data-stu-id="ecc27-286">You probably do want search engines to catalog your production site, so you need to exclude this file from production deployment.</span></span> <span data-ttu-id="ecc27-287">Для этого см. статью **можно ли исключить определенные файлы или папки из развертывания?** в разделе [часто задаваемые вопросы о развертывании проекта веб-приложения ASP.NET](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment).</span><span class="sxs-lookup"><span data-stu-id="ecc27-287">To do that, see **Can I exclude specific files or folders from deployment?** in [ASP.NET Web Application Project Deployment FAQ](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment).</span></span> <span data-ttu-id="ecc27-288">Убедитесь, что исключение указывается только для профиля публикации в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="ecc27-288">Make sure that you specify the exclusion only for the Production publish profile.</span></span>

<span data-ttu-id="ecc27-289">Создание второй учетной записи размещения является подходом к работе с тестовой средой, которая не является обязательной, но может быть, к добавлению затрат.</span><span class="sxs-lookup"><span data-stu-id="ecc27-289">Creating a second hosting account is an approach to working with a test environment that is not required but might be worth the added expense.</span></span> <span data-ttu-id="ecc27-290">В следующих учебниках вы продолжите использовать службы IIS в качестве тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="ecc27-290">In the following tutorials, you'll continue to use IIS as your test environment.</span></span>

<span data-ttu-id="ecc27-291">В следующем руководстве вы обновите код приложения и развернете изменения в тестовой и рабочей средах.</span><span class="sxs-lookup"><span data-stu-id="ecc27-291">In the next tutorial, you'll update application code and deploy your change to the test and production environments.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ecc27-292">[Назад](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)
> [Вперед](deployment-to-a-hosting-provider-deploying-a-code-only-update-8-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="ecc27-292">[Previous](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-code-only-update-8-of-12.md)</span></span>
