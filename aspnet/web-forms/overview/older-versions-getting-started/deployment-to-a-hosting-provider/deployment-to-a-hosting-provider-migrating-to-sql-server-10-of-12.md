---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: Миграция на SQL Server - 10 12 | Документация Майкрософт'
author: tdykstra
description: Этой серии руководств показано, как развернуть (публикации) ASP.NET проекта веб-приложения, который содержит базу данных SQL Server Compact с помощью Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: e47f9cb7df6cc119c69f0332df904183cef86405
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57062041"
---
<a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="2f9b4-103">Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: Миграция на SQL Server - 10 12</span><span class="sxs-lookup"><span data-stu-id="2f9b4-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>
====================
<span data-ttu-id="2f9b4-104">по [том Дайкстра](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="2f9b4-105">Загрузите начальный проект</span><span class="sxs-lookup"><span data-stu-id="2f9b4-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="2f9b4-106">Этой серии руководств показано, как развернуть (публикации) ASP.NET проекта веб-приложения, который содержит базу данных SQL Server Compact с помощью Visual Studio 2012 RC или Visual Studio Express 2012 RC для Web.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="2f9b4-107">Также можно использовать Visual Studio 2010, если установить обновление веб-публикации.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="2f9b4-108">Введение в серии, см. в разделе [в первом учебнике серии](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="2f9b4-109">Учебник, в котором показаны компоненты развертывания, появившиеся после выпуска версии-КАНДИДАТА Visual Studio 2012, содержит сведения о развертывании выпусков SQL Server, отличных от SQL Server Compact и содержит сведения о развертывании веб-приложения службы приложений Azure, см. в разделе [веб-развертывание ASP.NET с помощью Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="2f9b4-110">Обзор</span><span class="sxs-lookup"><span data-stu-id="2f9b4-110">Overview</span></span>

<span data-ttu-id="2f9b4-111">Этом руководстве показано, как перенести из SQL Server Compact в SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="2f9b4-112">Одна из причин, вы можете это сделать, — воспользоваться преимуществами функций SQL Server, SQL Server Compact не поддерживает, таких как хранимые процедуры, триггеры, представления или репликации.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="2f9b4-113">Дополнительные сведения о различиях между SQL Server Compact и SQL Server, см. в разделе [развертывание SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) руководства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="2f9b4-114">SQL Server Express и полной версии SQL Server для разработки</span><span class="sxs-lookup"><span data-stu-id="2f9b4-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="2f9b4-115">Если вы решили выполнить обновление до SQL Server, может потребоваться использовать SQL Server или SQL Server Express в средах разработки и тестирования.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="2f9b4-116">Помимо различий в средства поддержки и в функциях ядра СУБД существуют различия в реализации поставщика SQL Server Compact и других версиях SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="2f9b4-117">Эти различия может вызвать один и тот же код для формирования различных результатов.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="2f9b4-118">Таким образом Если необходимо сохранить в SQL Server Compact, как базы данных разработки, необходимо тщательно протестировать свой сайт в SQL Server или SQL Server Express в тестовой среде перед каждого развертывания в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="2f9b4-119">В отличие от SQL Server Compact SQL Server Express — это по сути тот же механизм базы данных и использует один и тот же поставщик .NET в качестве полной версии SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="2f9b4-120">При тестировании с SQL Server Express, вы можете быть уверены, получения те же результаты, как будет с помощью SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="2f9b4-121">Можно использовать большую часть тех же средств базы данных с SQL Server Express, можно использовать с SQL Server (важным исключением, [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), а также поддерживает другие функции SQL Server, таких как хранимые процедуры, представления, триггеры, и репликации.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="2f9b4-122">(Обычно необходимо использовать полную версию SQL Server в рабочем веб-сайте, однако.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="2f9b4-123">SQL Server Express можно запускать в общей среде размещения, но она не предназначалась для этого и многие поставщики услуг размещения не поддерживают его.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="2f9b4-124">Если вы используете Visual Studio 2012, обычно выбирается SQL Server Express LocalDB для среды разработки так, как это установленных по умолчанию с помощью Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="2f9b4-125">Тем не менее LocalDB не работает в IIS, поэтому для тестовой среды, необходимо использовать SQL Server или SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="2f9b4-126">Объединение и их поддержка отдельных баз данных</span><span class="sxs-lookup"><span data-stu-id="2f9b4-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="2f9b4-127">Приложение университета Contoso имеет две базы данных SQL Server Compact: базы данных членства (*aspnet.sdf*) и базе данных приложения (*School.sdf*).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="2f9b4-128">При миграции, можно перенести эти базы данных на две отдельные базы данных или в одной базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="2f9b4-129">Может потребоваться объединить их для упрощения базы данных соединения между вашей базы данных приложения и базы данных членства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="2f9b4-130">План размещения также может указать причину их объединение.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="2f9b4-131">Например поставщика услуг размещения может взимать плату сведения для нескольких баз данных или даже не поддерживают более одной базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="2f9b4-132">Это в случае с Cytanium Lite, размещение учетной записи, которая используется для этого руководства, что позволяет только отдельной базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="2f9b4-133">В этом руководстве будет перенести две базы данных таким образом:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="2f9b4-134">Перенос в две базы данных LocalDB в среде разработки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="2f9b4-135">Перенос в двух баз данных на SQL Server Express в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="2f9b4-136">Перенос одного объединенного полную базу данных SQL Server в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="2f9b4-137">Напоминание. Если вы получаете сообщение об ошибке, или что-то не работает, как работать с руководством, обязательно проверьте [страница устранения неполадок](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="2f9b4-138">Установка SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="2f9b4-138">Installing SQL Server Express</span></span>

<span data-ttu-id="2f9b4-139">SQL Server, экспресс-выпуск автоматически устанавливается по умолчанию вместе с Visual Studio 2010, но по умолчанию он не устанавливается вместе с Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="2f9b4-140">Чтобы установить SQL Server 2012 Express, щелкните следующую ссылку</span><span class="sxs-lookup"><span data-stu-id="2f9b4-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="2f9b4-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="2f9b4-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="2f9b4-142">Выберите *ENU/x64/SQLEXPR\_x64\_ENU.exe* или *ENU/x86/SQLEXPR\_x86\_ENU.exe*и в мастере установки примите имя по умолчанию Параметры.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="2f9b4-143">Дополнительные сведения о параметрах установки см. в разделе [Установка SQL Server 2012 с помощью мастера установки (программа установки)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="2f9b4-144">Создание баз данных SQL Server Express для тестовой среды</span><span class="sxs-lookup"><span data-stu-id="2f9b4-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="2f9b4-145">Следующим шагом является создание членства ASP.NET и базы данных School.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="2f9b4-146">Из **представление** меню выберите **обозревателя серверов** (**обозреватель баз данных** в Visual Web Developer) и щелкните правой кнопкой мыши **подключения к данным**и выберите **создать новую базу данных SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="2f9b4-148">В **создать новую базу данных SQL Server** диалогового окна введите «. \SQLExpress» в **имя сервера** поле и «aspnet-Test» в **новое имя базы данных** , а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="2f9b4-150">Выполните ту же процедуру, чтобы создать новую базу данных SQL Server Express School с именем «School-Test».</span><span class="sxs-lookup"><span data-stu-id="2f9b4-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="2f9b4-151">(Добавляются «Test» эти имена баз данных, так как позже вы создадите дополнительный экземпляр каждой базы данных для среды разработки, и вам нужно иметь возможность провести различие двух наборов баз данных.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="2f9b4-152">**Обозреватель серверов** теперь отображаются два новых баз данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="2f9b4-154">Создание скрипта предоставления доступа для новых баз данных</span><span class="sxs-lookup"><span data-stu-id="2f9b4-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="2f9b4-155">При выполнении приложения в службах IIS на компьютере разработчика, приложение обращается к базе данных, используя учетные данные пула приложений по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="2f9b4-156">Тем не менее по умолчанию удостоверение пула приложений имеет разрешение на открытие баз данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="2f9b4-157">Так что вам нужно запустить сценарий предоставлять ему такое разрешение.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="2f9b4-158">В этом разделе описано создание скрипта, что вы запустите более поздней версии, чтобы убедиться в том, что приложение можно открыть баз данных, когда оно работает в IIS.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="2f9b4-159">В решении *SolutionFiles* папку, созданную в [развертывание в рабочей среде](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) руководства, создайте новый файл SQL *Grant.sql*.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="2f9b4-160">Скопируйте следующие команды SQL в файл, а затем сохраните и закройте файл:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="2f9b4-161">Этот сценарий предназначен для работы с SQL Server 2008 и параметры IIS в Windows 7, как они указаны в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="2f9b4-162">При использовании другой версии SQL Server или Windows или если вы настроили IIS на компьютере по-разному, изменения в этот сценарий может потребоваться.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="2f9b4-163">Дополнительные сведения о сценарии SQL Server, см. в разделе [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>


> [!NOTE] 
> 
> <span data-ttu-id="2f9b4-164">**Примечание по безопасности** этот сценарий дает db\_права владельца для пользователя, который обращается к базе данных во время выполнения, который является то, что вы в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="2f9b4-165">В некоторых сценариях может потребоваться указать пользователя, имеющего схемы всей базы данных, обновить разрешения только для развертывания и указать во время выполнения другого пользователя с разрешениями только для чтения и записи данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="2f9b4-166">Дополнительные сведения см. в разделе **просмотрите автоматического изменения в файл Web.config для Code First Migrations** в [развертывание в IIS в качестве тестовой среды](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>


## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="2f9b4-167">Настройка развертывания базы данных для тестовой среды</span><span class="sxs-lookup"><span data-stu-id="2f9b4-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="2f9b4-168">Далее можно настроить Visual Studio, то есть он будет выполнять следующие задачи для каждой базы данных:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="2f9b4-169">Создайте скрипт SQL, который создает структуру исходной базы данных (таблицы, столбцы, ограничения и т. д.) в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="2f9b4-170">Создайте скрипт SQL, который вставляет исходной базы данных в таблицы в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="2f9b4-171">Запустите сформированные скрипты и предоставление сценарий, который вы создали, в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="2f9b4-172">Откройте **свойства проекта** и выберите **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="2f9b4-173">Убедитесь, что **Активная (Release)** или **выпуска** выбран в **конфигурации** стрелку раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="2f9b4-174">Нажмите кнопку **включить эту страницу**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="2f9b4-176">**Упаковка и публикация SQL** вкладка обычно отключена, поскольку он указывает метод развертывания устаревших версий.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="2f9b4-177">В большинстве случаев необходимо настроить развертывание базы данных в **веб-публикации** мастера.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="2f9b4-178">Миграция из SQL Server Compact в SQL Server или SQL Server Express является особым случаем, для которого этот метод является хорошим выбором.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="2f9b4-179">Нажмите кнопку **Импорт из Web.config**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="2f9b4-181">Visual Studio выполняет поиск строки подключения в *Web.config* файла, находит один для базы данных членства и один для базы данных School и добавляет строку, соответствующую каждой строки соединения в **записи базы данных**  таблицы.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="2f9b4-182">Находит строки подключения для существующих баз данных SQL Server Compact и следующим шагом будет Настройка, способ и место для развертывания этих баз данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="2f9b4-183">Введите параметры развертывания базы данных в **Подробности записи базы данных** раздел ниже **записи базы данных** таблицы.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="2f9b4-184">Параметры, отображаемые в **Подробности записи базы данных** разделе относятся к какой строки в **записи базы данных** выбрана таблица, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="2f9b4-186">Настройка параметров развертывания для базы данных членства</span><span class="sxs-lookup"><span data-stu-id="2f9b4-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="2f9b4-187">Выберите **DefaultConnection развертывания** строки в **записи базы данных** таблицы, чтобы настроить параметры, которые применяются к базе данных членства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="2f9b4-188">В **строку подключения для целевой базы данных**, введите строку подключения, который указывает на базе членства SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="2f9b4-189">Вы можете получить строку подключения, вам понадобятся из **обозревателя серверов**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="2f9b4-190">В **обозревателя серверов**, разверните **подключения к данным** и выберите **aspnetTest** базы данных, а затем из **свойства** окно копирования **Строку подключения** значение.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="2f9b4-192">Здесь приведен ту же строку подключения:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="2f9b4-193">Скопируйте и вставьте строку подключения в **строку подключения для целевой базы данных** в **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="2f9b4-194">Убедитесь, что **запрос данных или схемы из существующей базы данных** выбран.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="2f9b4-195">Это, что вызывает скрипты SQL для автоматически создается и запустить в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="2f9b4-196">**Строку подключения для базы данных-источника** значение извлекается из *Web.config* файл и указывает на базу данных SQL Server Compact разработки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="2f9b4-197">Это база данных источника, который будет использоваться для создания сценариев, которые будут выполняться далее в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="2f9b4-198">Так как вы хотите выполнить развертывание рабочей версии базы данных, измените «aspnet-Dev.sdf» на «aspnet-Prod.sdf».</span><span class="sxs-lookup"><span data-stu-id="2f9b4-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="2f9b4-199">Изменение **параметры скрипта базы данных** из **только схема** для **схему и данные**, поскольку требуется скопировать данные (учетные записи пользователей и роли), а также структуру базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="2f9b4-200">Для настройки развертывания для выполнения скриптов grant, которые вы создали ранее, необходимо добавить их в **скрипты базы данных** раздел.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="2f9b4-201">Нажмите кнопку **добавить сценарий**и в **Добавление скриптов SQL** диалоговом окне перейдите в папку, в котором был сохранен сценарий предоставления (это папку, содержащую файл решения).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="2f9b4-202">Выберите файл с именем *Grant.sql*и нажмите кнопку **откройте**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="2f9b4-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="2f9b4-204">Параметры для **DefaultConnection развертывания** строки в **записи базы данных** теперь выглядеть как на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="2f9b4-206">Настройка параметров развертывания для базы данных School</span><span class="sxs-lookup"><span data-stu-id="2f9b4-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="2f9b4-207">Затем выберите **SchoolContext развертывания** строки в **записи базы данных** таблицы, чтобы настроить параметры развертывания для базы данных School.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="2f9b4-208">Можно использовать тот же метод, который использовался ранее для получения строки подключения для новой базы данных SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="2f9b4-209">Скопируйте эту строку подключения в **строку подключения для целевой базы данных** в **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="2f9b4-210">Убедитесь, что **запрос данных или схемы из существующей базы данных** выбран.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="2f9b4-211">**Строку подключения для базы данных-источника** значение извлекается из *Web.config* файл и указывает на базу данных SQL Server Compact разработки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="2f9b4-212">Измените «School Dev.sdf» на «School-Prod.sdf» для развертывания рабочей версии базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="2f9b4-213">(Никогда не был создан файл School Prod.sdf в приложении\_папку данных, поэтому вы скопируете этот файл из тестовой среды в приложение\_папка данных в папке проекта ContosoUniversity позже.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="2f9b4-214">Изменение **параметры скрипта базы данных** для **схему и данные**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="2f9b4-215">Требуется, чтобы запустить сценарий предоставляют права чтения и записи разрешения для этой базы данных пула приложений, поэтому необходимо добавить *Grant.sql* файл сценария, как это делалось для базы данных членства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="2f9b4-216">Когда все будет готово, параметры **SchoolContext развертывания** строки в **записи базы данных** выглядеть как на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="2f9b4-218">Сохраните изменения в **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="2f9b4-219">Копировать *School-Prod.sdf* файла из *c:\inetpub\wwwroot\ContosoUniversity\App\_данных* папку для *приложения\_данных* папки в проект "ContosoUniversity".</span><span class="sxs-lookup"><span data-stu-id="2f9b4-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="2f9b4-220">Указание режима транзакций для предоставления скрипта</span><span class="sxs-lookup"><span data-stu-id="2f9b4-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="2f9b4-221">Процесс развертывания создает скрипты, которые развертывание схемы базы данных и данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="2f9b4-222">По умолчанию эти скрипты выполняются в транзакции.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="2f9b4-223">Тем не менее пользовательские скрипты (например, сценарии grant) по умолчанию не запускаются в транзакции.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="2f9b4-224">Если процесс развертывания содержатся одновременно режимы транзакций, может возникнуть ошибка времени ожидания, скрипты запускаются во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="2f9b4-225">В этом разделе вы измените файл проекта для настройки пользовательских скриптов для запуска в транзакции.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="2f9b4-226">В **обозревателе решений**, щелкните правой кнопкой мыши **ContosoUniversity** проекта и выберите **выгрузить проект**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="2f9b4-228">Затем щелкните правой кнопкой мыши проект и выберите **изменить ContosoUniversity.csproj**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="2f9b4-230">В редакторе Visual Studio показано XML-содержимое файла проекта.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="2f9b4-231">Обратите внимание на то, что существует несколько `PropertyGroup` элементов.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="2f9b4-232">(На рисунке, содержимое `PropertyGroup` элементы опущены.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Окно редактора файла проекта](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="2f9b4-234">Первый, который не имеет `Condition` атрибут, для параметров, которые применяются независимо от конфигурации построения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="2f9b4-235">Один `PropertyGroup` элемент применяется только к отладочной конфигурации сборки (Примечание `Condition` атрибут), один применяется только к конфигурации построения выпуска, и один применяется только к конфигурации сборки теста.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="2f9b4-236">В рамках `PropertyGroup` элемент конфигурации построения выпуска, вы увидите `PublishDatabaseSettings` элемент, который содержит параметры, введенные на **упаковка и публикация SQL** вкладки. Имеется `Object` элемент, соответствующий каждому сценариев grant заданных (Обратите внимание, что два экземпляра класса «Grant.sql»).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="2f9b4-237">По умолчанию `Transacted` атрибут `Source` отсутствует элемент для каждого сценария предоставления `False`.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="2f9b4-239">Измените значение свойства `Transacted` атрибут `Source` элемент `True`.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="2f9b4-241">Сохраните и закройте файл проекта щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **перезагрузить проект**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="2f9b4-243">Настройка преобразования Web.Config для строки подключения</span><span class="sxs-lookup"><span data-stu-id="2f9b4-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="2f9b4-244">Строки подключения для нового выпуска SQL Express баз данных, было введено **упаковка и публикация SQL** вкладке используются веб-развертывания только для обновления целевой базы данных во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="2f9b4-245">Вам по-прежнему нужно настроить *Web.config* преобразования таким образом, чтобы строки подключения в развернутой *Web.config* файл точки в новые базы данных SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="2f9b4-246">(При использовании **упаковка и публикация SQL** вкладке нельзя настроить строки подключения в профиле публикации.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="2f9b4-247">Откройте *Web.Test.config* и замените `connectionStrings` элемент с `connectionStrings` элемента в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="2f9b4-248">(Убедитесь, что вы только скопируйте элемент connectionStrings, не окружающий код, показанный здесь для предоставления контекста.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="2f9b4-249">Этот код приводит к `connectionString` и `providerName` атрибуты каждого `add` элемента, заменяемого в развернутой *Web.config* файл.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="2f9b4-250">Эти строки подключения не идентичны тем, введенный в **упаковка и публикация SQL** вкладки. Параметр «MultipleActiveResultSets = True» был добавлен к ним, так как это обязательно для Entity Framework и универсальные поставщики.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="2f9b4-251">Установка SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="2f9b4-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="2f9b4-252">Пакет SqlServerCompact NuGet предоставляет базе данных SQL Server Compact ядра сборок для приложения университета Contoso.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="2f9b4-253">Но теперь это не приложение, но веб-развертывания, который должен иметь возможность читать базы данных SQL Server Compact, чтобы создать скрипты для запуска в базах данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="2f9b4-254">Чтобы включить веб-развертывание для чтения базы данных SQL Server Compact, установите SQL Server Compact на компьютере разработчика, с помощью следующей ссылки: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="2f9b4-255">Развертывание в тестовой среде</span><span class="sxs-lookup"><span data-stu-id="2f9b4-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="2f9b4-256">Чтобы опубликовать в тестовую среду, необходимо создать профиль публикации, который настроен для использования **упаковка и публикация SQL** вкладку для базы данных публикации, а не параметры базы данных профиля публикации.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="2f9b4-257">Сначала удалите существующий профиль тестирования.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="2f9b4-258">В **обозревателе решений**, щелкните правой кнопкой мыши проект ContosoUniversity и нажмите кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="2f9b4-259">Выберите **профиль** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="2f9b4-260">Нажмите кнопку **Управление профилями**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="2f9b4-261">Выберите **теста**, нажмите кнопку **удалить**, а затем нажмите кнопку **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="2f9b4-262">Закрыть **веб-публикации** мастер должен сохранить это изменение.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="2f9b4-263">Затем создайте новый профиль тестирования и использовать его для публикации проекта.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="2f9b4-264">В **обозревателе решений**, щелкните правой кнопкой мыши проект ContosoUniversity и нажмите кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="2f9b4-265">Выберите **профиль** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="2f9b4-266">Выберите **&lt;New... &gt;** из раскрывающегося списка и введите имя профиля «Тестирование».</span><span class="sxs-lookup"><span data-stu-id="2f9b4-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="2f9b4-267">В **URL-адрес службы** введите *localhost*.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="2f9b4-268">В **сайт и приложение** введите *веб-сайт по умолчанию/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="2f9b4-269">В **URL-адрес назначения** введите `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="2f9b4-270">Нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-270">Click **Next**.</span></span>

<span data-ttu-id="2f9b4-271">**Параметры** вкладке предупреждает, **упаковка и публикация SQL** вкладке будет настроена, и он дает возможность переопределить их, нажав кнопку Разрешить улучшения публикации новой базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="2f9b4-272">Для этого развертывания не требуется переопределять **упаковка и публикация SQL** параметров вкладки, поэтому просто нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="2f9b4-274">Сообщение на **предварительной версии** вкладке указывает, что **не выбраны базы данных для публикации**, но это только означает, что публикация баз данных не настроена в профиле публикации.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="2f9b4-275">Нажмите кнопку **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="2f9b4-277">Visual Studio развертывает приложение и открывает браузер на домашнюю страницу сайта в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="2f9b4-278">Откройте страницу Instructors для см. в разделе, отображаются те же данные, обсуждавшейся ранее.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="2f9b4-279">Запустите **добавить учащихся** странице, добавить нового учащегося, а затем просмотрите нового учащегося в **учащихся** страницы.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="2f9b4-280">Это подтверждает, что можно обновлять базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="2f9b4-281">Выберите **обновления кредиты** страницы (вам потребуется снова войти) для проверки базы данных членства была развернута и у вас есть доступ к нему.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="2f9b4-282">Создание базы данных SQL Server для рабочей среды</span><span class="sxs-lookup"><span data-stu-id="2f9b4-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="2f9b4-283">Теперь, когда вы развернули в тестовую среду, вы будете готовы настроить развертывание в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="2f9b4-284">Как начать, как это делалось для тестовой среды, создав базу данных для развертывания.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="2f9b4-285">Как вы помните из обзора, Cytanium Lite плана размещения разрешает только отдельной базы данных SQL Server, поэтому необходимо настроить только одну базу данных, не как два.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="2f9b4-286">Все таблицы и данные из членства и базы данных School SQL Server Compact будут развернуты в одной базе данных SQL Server в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="2f9b4-287">Перейдите к панели управления Cytanium в [ http://panel.cytanium.com ](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="2f9b4-288">Наведите указатель мыши на **баз данных** и нажмите кнопку **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="2f9b4-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="2f9b4-290">В **SQL Server 2008** щелкните **Create Database**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="2f9b4-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="2f9b4-292">Имя базы данных «School» и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="2f9b4-293">(Страницы автоматически добавляет префикс «contosou», поэтому эффективный будет называться «contosouSchool».)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="2f9b4-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="2f9b4-295">На этой же странице щелкните **Create User**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="2f9b4-296">На Cytanium на серверах, а не с использованием встроенной безопасности Windows и позволить удостоверение пула приложений откройте нужную базу данных вы создадите пользователя, имеющего полномочия открывать базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="2f9b4-297">Вам предстоит добавить учетные данные пользователя строки подключения, которые необходимо выполнить в рабочей среде *Web.config* файл.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="2f9b4-298">На этом шаге вы создадите эти учетные данные.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-298">In this step you create those credentials.</span></span>

<span data-ttu-id="2f9b4-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="2f9b4-300">Заполните обязательные поля в **свойства пользователя SQL** страницы:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="2f9b4-301">Введите «ContosoUniversityUser» в качестве имени.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="2f9b4-302">Введите пароль.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-302">Enter a password.</span></span>
- <span data-ttu-id="2f9b4-303">Выберите **contosouSchool** как базы данных по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="2f9b4-304">Выберите **contosouSchool** "флажок".</span><span class="sxs-lookup"><span data-stu-id="2f9b4-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="2f9b4-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="2f9b4-306">Настройка развертывания базы данных для рабочей среды</span><span class="sxs-lookup"><span data-stu-id="2f9b4-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="2f9b4-307">Теперь все готово к настройке параметров развертывания базы данных в **упаковка и публикация SQL** вкладке, как это делалось ранее для тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="2f9b4-308">Откройте **свойства проекта** выберите **упаковка и публикация SQL** вкладке и убедитесь, что **Активная (Release)** или **выпуска** — выбранные в **конфигурации** стрелку раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="2f9b4-309">При настройке параметров развертывания для каждой базы данных, основное различие между возможностях для рабочей и тестовой сред находится в том, как настроить строки подключения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="2f9b4-310">Для тестовой среды, вы ввели строк подключения для другой базы данных, но для рабочей среды целевой строки подключения будет одинаковым для обеих баз данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="2f9b4-311">Это так, как вы развертываете обе базы данных к одной базе данных в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="2f9b4-312">Настройка параметров развертывания для базы данных членства</span><span class="sxs-lookup"><span data-stu-id="2f9b4-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="2f9b4-313">Чтобы настроить параметры, которые применяются к базе данных членства, выберите **DefaultConnection развертывания** строки в **записи базы данных** таблицы.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="2f9b4-314">В **строку подключения для целевой базы данных**, введите строку соединения, указывающий на новой базы данных SQL Server рабочей среде, вы только что создали.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="2f9b4-315">Строку подключения можно получить из вашей приветственное сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="2f9b4-316">Нужная часть сообщения электронной почты содержит следующий пример строки подключения:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="2f9b4-317">После замены три переменные, строки подключения, необходимые выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="2f9b4-318">Скопируйте и вставьте строку подключения в **строку подключения для целевой базы данных** в **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="2f9b4-319">Убедитесь, что **запрос данных или схемы из существующей базы данных** снимая выделение, и что **параметры скрипта базы данных** по-прежнему **схему и данные**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="2f9b4-320">В **скрипты базы данных** снимите флажок рядом с Grant.sql скрипт.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="2f9b4-322">Настройка параметров развертывания для базы данных School</span><span class="sxs-lookup"><span data-stu-id="2f9b4-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="2f9b4-323">Затем выберите **SchoolContext развертывания** строки в **записи базы данных** таблицы для настройки параметров базы данных School.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="2f9b4-324">Скопируйте одну и ту же строку подключения в **строку подключения для целевой базы данных** , скопированные в это поле для базы данных членства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="2f9b4-325">Убедитесь, что **запрос данных или схемы из существующей базы данных** снимая выделение, и что **параметры скрипта базы данных** по-прежнему **схему и данные**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="2f9b4-326">В **скрипты базы данных** снимите флажок рядом с Grant.sql скрипт.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="2f9b4-327">Сохраните изменения в **упаковка и публикация SQL** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="2f9b4-328">Настройка Web.Config преобразований для строк подключения к производственным базам данных</span><span class="sxs-lookup"><span data-stu-id="2f9b4-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="2f9b4-329">Далее необходимо настроить *Web.config* преобразования таким образом, чтобы строки подключения в развернутой *Web.config* в файле для новой рабочей базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="2f9b4-330">Строка подключения, введенных на **упаковка и публикация SQL** вкладка для веб-развертывания для использования является таким же, как приложение должно использовать, за исключением добавления `MultipleResultSets` параметр.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="2f9b4-331">Откройте *Web.Production.config* и замените `connectionStrings` элемент с `connectionStrings` элемент, который выглядит как в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="2f9b4-332">(Копировать только `connectionStrings` элемент, не окружающей теги, которые показывают контекста.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="2f9b4-333">Иногда см. Советы о том, чтобы всегда шифрования строк подключения в *Web.config* файл.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="2f9b4-334">Это может быть целесообразным, если вы выполняли развертывание серверов в сети вашей компании.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="2f9b4-335">При развертывании в общей среде размещения, вы просто Верите по обеспечению безопасности поставщика услуг размещения, и он является необязательным и удобным для шифрования строк подключения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="2f9b4-336">Развертывание в рабочей среде</span><span class="sxs-lookup"><span data-stu-id="2f9b4-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="2f9b4-337">Теперь все готово к развертыванию в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="2f9b4-338">Веб-развертывание будет считывать базах данных SQL Server Compact в вашем проекте *приложения\_данных* папки и заново создайте все таблицы и данных в SQL Server рабочей базы данных.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="2f9b4-339">Для публикации с помощью **пакета и публикация веб-** параметрами табуляции, то необходимо создать новый профиль публикации для рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="2f9b4-340">Во-первых можно удалите существующий профиль рабочей среде, как и раньше профиль тестирования.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="2f9b4-341">В **обозревателе решений**, щелкните правой кнопкой мыши проект ContosoUniversity и нажмите кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="2f9b4-342">Выберите **профиль** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="2f9b4-343">Нажмите кнопку **Управление профилями**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="2f9b4-344">Выберите **рабочей**, нажмите кнопку **удалить**, а затем нажмите кнопку **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="2f9b4-345">Закрыть **веб-публикации** мастер должен сохранить это изменение.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="2f9b4-346">Затем создайте новый профиль для производства и использовать его для публикации проекта.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="2f9b4-347">В **обозревателе решений**, щелкните правой кнопкой мыши проект ContosoUniversity и нажмите кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="2f9b4-348">Выберите **профиль** вкладки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="2f9b4-349">Нажмите кнопку **импорта**и выберите файл .publishsettings, который вы загрузили ранее.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="2f9b4-350">На **подключения** вкладке **URL-адрес назначения** на правильный временный URL-адрес, который в данном примере — http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="2f9b4-351">Переименуйте профиль в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-351">Rename the profile to Production.</span></span> <span data-ttu-id="2f9b4-352">(Выберите **профиль** вкладку и нажмите кнопку **Управление профилями** для этого).</span><span class="sxs-lookup"><span data-stu-id="2f9b4-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="2f9b4-353">Закрыть **веб-публикации** мастера, чтобы сохранить изменения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="2f9b4-354">В реальном приложении, в котором при обновлении базы данных в рабочей среде вы бы делать еще два действия перед публикацией:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="2f9b4-355">Отправка *приложения\_offline.htm*, как показано в [развертывание в рабочей среде](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) руководства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="2f9b4-356">Используйте **диспетчер файлов** компонент панели управления Cytanium копируемые *aspnet Prod.sdf* и *School-Prod.sdf* файлы с рабочего сайта *Приложения\_данных* папку проекта ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="2f9b4-357">Это гарантирует, что данные, которые вы развертываете в новую базу данных SQL Server включает последние обновления, выполненные на рабочем веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="2f9b4-358">В **веб-публикация одним щелкните** панели инструментов, убедитесь, что **рабочей** выбран, а затем нажмите кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="2f9b4-359">Если вы отправили <em>приложения\_offline.htm</em> перед публикацией, необходимо использовать <strong>диспетчер файлов</strong> в панели управления Cytanium удалить <em>приложения\_вне сети.</em> htm, прежде чем тестировать.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="2f9b4-360">Также можно одновременно удалить <em>.sdf</em> файлов из <em>приложения\_данных</em> папки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="2f9b4-361">Теперь можно открыть браузер и перейдите к URL-адрес общедоступного веб-сайта для тестирования приложения так же, как и после развертывания в тестовую среду.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="2f9b4-362">Переключение на SQL Server Express LocalDB в разработке</span><span class="sxs-lookup"><span data-stu-id="2f9b4-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="2f9b4-363">Как было упомянуто в обзоре, обычно лучше использовать один и тот же механизм базы данных в разработке, используемом в тестовой и рабочей.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="2f9b4-364">(Помните, что с помощью SQL Server Express в разработке удобен тем, что базы данных работают также в средах разработки, тестовой и рабочей). В этом разделе настроим ContosoUniversity проект для использования SQL Server Express LocalDB, при запуске приложения из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="2f9b4-365">Самый простой способ выполнить миграцию для Code First и система членства создать оба новые базы данных разработки для вас.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="2f9b4-366">С помощью этого метода для переноса состоит из трех шагов:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="2f9b4-367">Измените строку подключения для указания новых баз данных SQL Express LocalDB.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="2f9b4-368">Запустите средство администрирования веб-сайта, чтобы создать пользователя-администратора.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="2f9b4-369">При этом создается в базе данных членства.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-369">This creates the membership database.</span></span>
3. <span data-ttu-id="2f9b4-370">Команда обновления базы данных Code First Migrations для создания и заполнения базы данных приложения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="2f9b4-371">Обновление строки подключения в файле Web.config</span><span class="sxs-lookup"><span data-stu-id="2f9b4-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="2f9b4-372">Откройте *Web.config* и заменить `connectionStrings` следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="2f9b4-373">Создание базы данных членства</span><span class="sxs-lookup"><span data-stu-id="2f9b4-373">Creating the Membership Database</span></span>

<span data-ttu-id="2f9b4-374">В **обозревателе решений**, выберите проект ContosoUniversity и нажмите кнопку **Конфигурация ASP.NET** в **проекта** меню.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="2f9b4-375">Выберите вкладку «Безопасность».</span><span class="sxs-lookup"><span data-stu-id="2f9b4-375">Select the Security tab.</span></span>

<span data-ttu-id="2f9b4-376">Нажмите кнопку **Создание или управление ролями**, а затем создайте **администратора** роли.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="2f9b4-377">Вернитесь на вкладку Безопасность.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-377">Return to the Security tab.</span></span>

<span data-ttu-id="2f9b4-378">Нажмите кнопку **создать пользователя**, а затем выберите **администратора** флажок и создайте пользователя с именем администратора.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="2f9b4-379">Закрыть **Web Site Administration Tool**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="2f9b4-380">Создание базы данных School</span><span class="sxs-lookup"><span data-stu-id="2f9b4-380">Creating the School Database</span></span>

<span data-ttu-id="2f9b4-381">Откройте окно консоли диспетчера пакетов.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="2f9b4-382">В **проект по умолчанию** раскрывающегося списка выберите ContosoUniversity.DAL проекта.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="2f9b4-383">Введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2f9b4-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="2f9b4-384">Code First Migrations применяется начальной миграции, который создает базу данных, а затем применяет AddBirthDate миграции, а затем он выполняет метод заполнения.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="2f9b4-385">Запустите сайт, нажав клавишу Control F5.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="2f9b4-386">Как это делалось для сред тестирования и производственная среда выполнения **добавить учащихся** странице, добавить нового учащегося, а затем просмотрите нового учащегося в **учащихся** страницы.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="2f9b4-387">Это подтверждает, что базы данных School был создан и инициализирован, и что вы прочитали и доступ на запись к нему.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="2f9b4-388">Выберите **обновления кредиты** странице и войдите в систему, чтобы убедиться, что базе данных членства была развернута и у вас доступ к нему.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="2f9b4-389">Если не перенести учетные записи пользователей, создать учетную запись администратора, а затем выберите **обновления кредиты** страницу, чтобы убедиться, что оно работает.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="2f9b4-390">Очистка файлы SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="2f9b4-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="2f9b4-391">Ненужные файлы и пакеты NuGet, которые были включены для поддержки SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="2f9b4-392">Если вы хотите, чтобы (этот шаг не является обязательным), можно удалить ненужные файлы и ссылки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="2f9b4-393">В **обозревателе решений**, удалить *.sdf* файлов из *приложения\_данных* папки и *amd64* и *x86* папок из *bin* папки.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="2f9b4-394">В **обозревателе решений**, щелкните правой кнопкой мыши решение (не из проектов) и нажмите кнопку **управление пакетами NuGet для решения**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="2f9b4-395">В левой части **управление пакетами NuGet** выберите **установленные пакеты**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="2f9b4-396">Выберите **EntityFramework.SqlServerCompact** пакета и нажмите кнопку **управление**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="2f9b4-397">В **выберите проекты** диалоговом окне выбраны оба проекта.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="2f9b4-398">Чтобы удалить пакет, в обоих проектах, снимите оба флажка, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="2f9b4-399">В диалоговом окне с вопросом, следует ли также удалить зависимые пакеты, нажмите кнопку "Нет".</span><span class="sxs-lookup"><span data-stu-id="2f9b4-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="2f9b4-400">Один из них — это платформа Entity Framework, вам необходимо следить.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="2f9b4-401">Выполните ту же процедуру для удаления **SqlServerCompact** пакета.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="2f9b4-402">(Пакеты необходимо удалить в указанном порядке, так как **EntityFramework.SqlServerCompact** зависит от пакета **SqlServerCompact** пакета.)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="2f9b4-403">Вы успешно перенесли в SQL Server Express и полной версии SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="2f9b4-404">В следующем учебнике, другого изменения базы данных, и будет показано, как для развертывания изменений базы данных при тестовой и рабочей баз данных с помощью SQL Server Express и полной версии SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2f9b4-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2f9b4-405">[Назад](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Вперед](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="2f9b4-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
