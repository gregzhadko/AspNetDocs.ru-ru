---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12
title: 'Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: Устранение неполадок (12 из 12) | Документация Майкрософт'
author: tdykstra
description: В этой серии учебников показано, как развернуть (опубликовать) проект веб-приложения ASP.NET, включающий базу данных SQL Server Compact, с помощью Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 3fc23eed-921d-4d46-a610-a2d156e4bd03
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12
msc.type: authoredcontent
ms.openlocfilehash: db8f58e3679e6dea865dadb6f64916032dd9f38c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74639866"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-troubleshooting-12-of-12"></a>Развертывание веб-приложения ASP.NET с SQL Server Compact с помощью Visual Studio или Visual Web Developer: Устранение неполадок (12 из 12)

от [Tom Dykstra)](https://github.com/tdykstra)

[Скачать начальный проект](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> В этой серии учебников показано, как развернуть (опубликовать) проект веб-приложения ASP.NET, включающий базу данных SQL Server Compact, с помощью Visual Studio 2012 RC или Visual Studio Express 2012 RC для Web. При установке обновления веб-публикации можно также использовать Visual Studio 2010. Введение в серию см. [в первом учебнике серии](deployment-to-a-hosting-provider-introduction-1-of-12.md).
> 
> Руководство, в котором показаны функции развертывания, появившиеся после выпуска версии-КАНДИДАТа Visual Studio 2012, демонстрирует развертывание SQL Server выпусков, отличных от SQL Server Compact, и демонстрация развертывания на веб-сайтах Windows Azure см. в разделе [ASP.NET Web Deploying using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).

На этой странице описаны некоторые распространенные проблемы, которые могут возникнуть при развертывании веб-приложения ASP.NET с помощью Visual Studio. Для каждого из них предоставляются одна или несколько возможных причин и соответствующие решения.

## <a name="server-error-in--application---current-custom-error-settings-prevent-details-of-the-error-from-being-viewed-remotely"></a>Ошибка сервера в приложении "/" — текущие пользовательские параметры ошибок препятствуют удаленному просмотру сведений об ошибке

### <a name="scenario"></a>Сценарий

После развертывания сайта на удаленном узле появляется сообщение об ошибке, в котором упоминается параметр customErrors в файле Web. config, но не указано, какая причина ошибки:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample1.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию ASP.NET отображает подробные сведения об ошибке только в том случае, если веб-приложение работает на локальном компьютере. Как правило, вы не хотите отображать подробные сведения об ошибке, если веб-приложение является общедоступным через Интернет, так как хакеры могут использовать эту информацию для поиска уязвимостей в приложении. Однако при развертывании сайта или обновлений на сайте иногда возникает ошибка, и необходимо получить фактическое сообщение об ошибке.

Чтобы приложение отображало подробные сообщения об ошибках при запуске на удаленном узле, измените файл Web. config, чтобы установить `customErrors` режим, повторно разверните приложение и снова запустите приложение:

1. Если файл Web. config приложения содержит элемент `customErrors` в элементе `system.web`, измените атрибут `mode` на OFF. В противном случае добавьте элемент `customErrors` в элемент `system.web` с атрибутом `mode`, установленным в значение OFF, как показано в следующем примере:

    [!code-xml[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample2.xml?highlight=3)]
2. Развертывание приложения.
3. Запустите приложение и повторите все ранее, что привело к возникновению ошибки. Теперь можно увидеть фактическое сообщение об ошибке.
4. После устранения ошибки восстановите исходный параметр `customErrors` и повторно разверните приложение.

## <a name="access-is-denied-in-a-web-page-that-uses-sql-server-compact"></a>Отказано в доступе на веб-странице, использующей SQL Server Compact

### <a name="scenario"></a>Сценарий

При развертывании сайта, использующего SQL Server Compact и запуска страницы на развернутом сайте, который обращается к базе данных, отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample3.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Учетная запись сетевой службы на сервере должна иметь возможность чтения собственных двоичных файлов службы SQL Compact, которые находятся в папке *bin\amd64* или *bin\x86* , но не имеют разрешений на чтение этих папок. Установите разрешение чтение для NETWORK SERVICE в папке *bin* , чтобы расширить разрешения для вложенных папок.

## <a name="cannot-read-configuration-file-due-to-insufficient-permissions"></a>Не удается прочитать файл конфигурации из-за отсутствия необходимых разрешений

### <a name="scenario"></a>Сценарий

При нажатии кнопки "опубликовать" в Visual Studio для развертывания приложения в службах IIS на локальном компьютере происходит сбой публикации, а в окне **вывода** отображается сообщение об ошибке следующего вида:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample4.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Чтобы использовать публикацию одним щелчком в IIS на локальном компьютере, необходимо запустить Visual Studio с разрешениями администратора. Закройте Visual Studio и перезапустите его с правами администратора.

## <a name="could-not-connect-to-the-destination-computer--using-the-specified-process"></a>Не удалось подключиться к конечному компьютеру... Использование указанного процесса

### <a name="scenario"></a>Сценарий

При нажатии кнопки Опубликовать в Visual Studio для развертывания приложения происходит сбой публикации, а в окне **вывод** отображается сообщение об ошибке следующего вида:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample5.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Прокси-сервер прерывает связь с целевым сервером. На панели управления Windows или в Internet Explorer выберите **Свойства обозревателя** и перейдите на вкладку **подключения** . В диалоговом окне **Свойства Интернета** нажмите кнопку **Параметры локальной сети**. В диалоговом окне **Параметры локальной сети** снимите флажок **Автоматическое определение параметров** . Затем снова нажмите кнопку Опубликовать.

Если проблема не исчезнет, обратитесь к системному администратору, чтобы определить, что можно сделать с помощью параметров прокси-сервера или брандмауэра. Проблема возникает потому, что веб-развертывание использует нестандартный порт для развертывания службы веб-управления (8172); для других соединений веб-развертывание использует порт 80. При развертывании на сторонние поставщики услуг хостинга обычно используется служба веб-управления.

## <a name="default-net-40-application-pool-does-not-exist"></a>Пул приложений .NET 4,0 по умолчанию не существует

### <a name="scenario"></a>Сценарий

При развертывании приложения, для которого требуется .NET Framework 4, отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample6.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

ASP.NET 4 не установлен в службах IIS. Если сервер, на котором выполняется развертывание, является компьютером разработки и на нем установлен Visual Studio 2010, ASP.NET 4 устанавливается на компьютере, но может не быть установлен в службах IIS. На сервере, на котором выполняется развертывание, откройте командную строку с повышенными привилегиями и установите ASP.NET 4 в службах IIS, выполнив следующие команды:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample7.cmd)]

Также может потребоваться вручную задать .NET Framework версию пула приложений по умолчанию. Дополнительные сведения см. в руководстве [развертывание в службах IIS в качестве тестовой среды](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) .

## <a name="format-of-the-initialization-string-does-not-conform-to-specification-starting-at-index-0"></a>Формат строки инициализации не соответствует спецификации, начиная с индекса 0.

### <a name="scenario"></a>Сценарий

После развертывания приложения с помощью публикации одним щелчком при запуске страницы, которая обращается к базе данных, появляется следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample8.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Откройте файл *Web. config* на развернутом сайте и проверьте, начинаются ли значения строки подключения с `$(ReplaceableToken_`, как показано в следующем примере:

[!code-xml[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample9.xml)]

Если строки подключения выглядят как в этом примере, измените файл проекта и добавьте следующее свойство в элемент `PropertyGroup`, предназначенный для всех конфигураций сборки:

[!code-xml[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample10.xml)]

Затем повторно разверните приложение.

## <a name="http-500-internal-server-error"></a>Внутренняя ошибка сервера HTTP 500

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта отображается следующее сообщение об ошибке, в котором не указана причина ошибки:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample11.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Существует множество причин возникновения ошибок 500, но одна из возможных причин, которые следует выполнить при работе с этими учебниками, заключается в том, что элемент XML помещается в неправильное место в одном из XML-файлов преобразования. Например, эта ошибка возникает, если вы помещаете преобразование, которое вставляет элемент `<location>` в `<system.web>`, а не непосредственно в `<configuration>`. Решением в этом случае является исправление XML-файла преобразования и повторное развертывание.

## <a name="http-50021-internal-server-error"></a>Внутренняя ошибка сервера HTTP 500,21

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample12.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Развернутый сайт предназначен для ASP.NET 4, но ASP.NET 4 не зарегистрирован в службах IIS на сервере. На сервере откройте командную строку с повышенными привилегиями и зарегистрируйте ASP.NET 4, выполнив следующие команды:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample13.cmd)]

Также может потребоваться вручную задать .NET Framework версию пула приложений по умолчанию. Дополнительные сведения см. в руководстве [развертывание в службах IIS в качестве тестовой среды](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) .

## <a name="login-failed-opening-sql-server-express-database-in-app_data"></a>Ошибка входа при открытии базы данных SQL Server Express в приложении\_

### <a name="scenario"></a>Сценарий

Вы обновили строку подключения к файлу *Web. config* , чтобы она указывала на SQL Server Express базу данных в виде *MDF* -файла в папке *приложения\_данных* , и при первом запуске приложения появится следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample14.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Имя *MDF* -файла не может совпадать с именем любой SQL Server Express базы данных, которая когда-либо существовала на компьютере, даже если вы удалили *MDF* -файл ранее существующей базы данных. Измените имя *MDF* -файла на имя, которое никогда не использовалось в качестве имени базы данных, и измените файл *Web. config* , чтобы он использовал новое имя. В качестве альтернативы можно использовать [SQL Server Management Studio Express](https://www.microsoft.com/download/details.aspx?displaylang=en&amp;id=7593) для удаления ранее существующих SQL Server Express баз данных.

## <a name="model-compatibility-cannot-be-checked"></a>Не удается проверить совместимость модели

### <a name="scenario"></a>Сценарий

Вы обновили строку подключения к файлу *Web. config* , чтобы она указывала на новую базу данных SQL Server Express, и при первом запуске приложения появится следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample15.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Если имя базы данных, помещаемое в файл Web. config, использовалось ранее на компьютере, то база данных может уже существовать в некоторых таблицах. Выберите новое имя, которое не использовалось на компьютере, и измените файл *Web. config* , чтобы он указывал на новое имя базы данных. В качестве альтернативы можно использовать [SQL Server Express служебную программу](https://www.microsoft.com/download/details.aspx?DisplayLang=en&amp;id=3990) или [SQL Server Management Studio Express](https://www.microsoft.com/download/details.aspx?displaylang=en&amp;id=7593) для удаления существующей базы данных.

## <a name="sql-error-when-a-script-attempts-to-create-users-or-roles"></a>Ошибка SQL при попытке сценария создать пользователей или роли

### <a name="scenario"></a>Сценарий

Вы используете развертывание базы данных, настроенное на вкладке **Пакет/Публикация SQL** , скрипты SQL, выполняемые во время развертывания, включают команды Создать пользователя или создать роль, и выполнение скрипта завершается ошибкой при выполнении этих команд. Вы можете увидеть более подробные сообщения, например следующие:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample16.cmd)]

Если эта ошибка возникает при настройке развертывания базы данных в мастере **публикации веб-сайта** , а не на вкладке **Пакет/Публикация SQL** , создайте поток на форуме по [настройке и развертыванию](https://forums.asp.net/26.aspx/1?Configuration+and+Deployment) , и решение будет добавлено на эту страницу устранения неполадок.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Учетная запись пользователя, используемая для развертывания, не имеет разрешения на создание пользователей или ролей. Например, компания размещения может назначить роли `db_datareader`, `db_datawriter`и `db_ddladmin` учетной записи пользователя, которая настраивается для вас. Это достаточно для создания большинства объектов базы данных, но не для создания пользователей или ролей. Одним из способов избежать этой ошибки является исключение пользователей и ролей из развертывания базы данных. Это можно сделать, изменив элемент `PreSource` для автоматически создаваемого скрипта базы данных, чтобы он включал следующие атрибуты:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample17.cmd)]

Сведения о том, как изменить элемент `PreSource` в файле проекта, см. в разделе [инструкции. изменение параметров развертывания в файле проекта](https://msdn.microsoft.com/library/ff398069(v=vs.100).aspx). Если пользователи или роли в базе данных разработки должны находиться в целевой базе данных, обратитесь за помощью к поставщику услуг размещения.

## <a name="sql-server-timeout-error-when-running-custom-scripts-during-deployment"></a>Ошибка времени ожидания SQL Server при выполнении пользовательских скриптов во время развертывания

### <a name="scenario"></a>Сценарий

Вы указали пользовательские скрипты SQL для запуска во время развертывания, а когда веб-развертывание их запускает, время ожидания истекает.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Выполнение нескольких скриптов с разными режимами транзакций может привести к ошибкам времени ожидания. По умолчанию автоматически созданные скрипты выполняются в транзакции, но пользовательские скрипты — нет. Если выбрать параметр **извлечь данные и (или) схему из существующей базы данных** на вкладке **Пакет/Публикация SQL** , а при добавлении пользовательского скрипта SQL необходимо изменить параметры транзакций для некоторых скриптов так, чтобы все скрипты использовали одни и те же параметры транзакций. Дополнительные сведения см. [в разделе руководство. Развертывание базы данных с помощью проекта веб-приложения](https://msdn.microsoft.com/library/dd465343.aspx).

Если вы настроили параметры транзакций так, чтобы все они были одинаковыми, но по-прежнему получили эту ошибку, возможный обходной путь заключается в запуске сценариев отдельно. В сетке **скрипты базы данных** на вкладке **Пакет/Публикация** SQL снимите флажок **включить** для сценария, который вызывает ошибку времени ожидания, а затем опубликуйте проект. Затем вернитесь в сетку **скрипты базы данных** , установите флажок **включить** этот сценарий и снимите флажки **включить** для других скриптов. Затем опубликуйте проект еще раз. На этот раз при публикации будет запущен только выбранный пользовательский скрипт.

## <a name="stream-data-of-site-manifest-is-not-yet-available"></a>Потоковая передача данных манифеста сайта пока недоступна

### <a name="scenario"></a>Сценарий

При установке пакета с помощью файла *deploy. cmd* с параметром `t` (тест) отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample18.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Сообщение об ошибке означает, что команда не может создать тестовый отчет. Однако команда может выполняться при использовании параметра `y` (фактическая установка). Сообщение указывает только на наличие проблемы с выполнением команды в тестовом режиме.

## <a name="this-application-requires-managedruntimeversion-v40"></a>Для этого приложения требуется Манажедрунтимеверсион версии 4.0

### <a name="scenario"></a>Сценарий

При попытке развернуть вы увидите следующее сообщение об ошибке:

 Ошибка: данные потока "ситеманифест/Дбфуллскл [@path=" К:\темп\адвентуреворксгрант.скл "]/Склскрипт" пока недоступны. Для пула приложений, который вы пытаетесь использовать, свойство "Манажедрунтимеверсион" имеет значение "v 2.0". Для этого приложения требуется "v 4.0". 

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

ASP.NET 4 не установлен в службах IIS. Если сервер, на котором выполняется развертывание, является компьютером разработки и на нем установлен Visual Studio 2010, ASP.NET 4 устанавливается на компьютере, но может не быть установлен в службах IIS. На сервере, на котором выполняется развертывание, откройте командную строку с повышенными привилегиями и установите ASP.NET 4 в службах IIS, выполнив следующие команды:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample19.cmd)]

## <a name="unable-to-cast-microsoftwebdeploymentdeploymentprovideroptions"></a>Не удалось привести Microsoft. Web. Deployment. Деплойментпровидероптионс

### <a name="scenario"></a>Сценарий

При развертывании пакета отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample20.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Выполняется попытка развертывания из диспетчера IIS с помощью пользовательского интерфейса веб-развертывание 1,1 на сервере с установленными веб-развертывание 2,0. Если вы используете средство удаленного администрирования IIS для развертывания с помощью импорта пакета, проверьте диалоговое окно **новые функции, доступное** при установке соединения. (Это диалоговое окно может отображаться только один раз при первом установлении соединения. Чтобы очистить подключение и начать заново, закройте Диспетчер IIS и запустите его снова, введя `inetmgr /reset` в командной строке.) Если одна из перечисленных компонентов является **веб-развертывание пользовательском интерфейсе**и имеет номер версии ниже 8, то на сервере, на котором выполняется развертывание, могут быть установлены как 1,1, так и 2,0 версии веб-развертывание. Для развертывания с клиента, на котором установлено 2,0, на сервере должен быть установлен только веб-развертывание 2,0. Чтобы устранить эту проблему, необходимо обратиться к поставщику услуг размещения.

## <a name="unable-to-load-the-native-components-of-sql-server-compact"></a>Не удалось загрузить собственные компоненты SQL Server Compact

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта отображается следующее сообщение об ошибке:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample21.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Развернутый сайт не содержит подпапки *AMD64* и *x86* с собственными сборками в папке *bin* приложения. На компьютере, на котором установлена SQL Server Compact, сборки в машинном код находятся в папке *C:\Program Files\Microsoft SQL Server Compact Edition\v4.0\Private*. Лучшим способом получения правильных файлов в правильных папках в проекте Visual Studio является установка пакета NuGet Склсерверкомпакт. При установке пакета добавляется скрипт, выполняемый после сборки, для копирования машинных сборок в *AMD64* и *x86*. Однако для их развертывания необходимо вручную включить их в проект. Дополнительные сведения см. в руководстве по [развертыванию SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) .

## <a name="path-is-not-valid-error-after-deploying-an-entity-framework-code-first-application"></a>Ошибка "путь недопустим" после развертывания приложения Entity Framework Code First

### <a name="scenario"></a>Сценарий

Вы развертываете приложение, использующее Entity Framework Code First Migrations, и СУБД, например SQL Server Compact, в которой хранится база данных в файле в папке приложения\_данных. Вы Code First Migrations настроены для создания базы данных после первого развертывания. При запуске приложения появляется сообщение об ошибке, как в следующем примере:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample22.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Code First пытается создать базу данных, но папка данных приложения\_не существует. При развертывании отсутствуют файлы в папке " *приложение\_данных* " или на вкладке " **Пакет/Публикация веб-сайта** " окна " **Свойства проекта** " выбран вариант **Исключить приложение\_данные** . Процесс развертывания не создает папку на сервере, если в папке нет файлов для копирования на сервер. Если база данных уже настроена на сайте, процесс развертывания удалит файлы и папку *данных приложения\_* , если в профиле публикации было выбрано **Удаление дополнительных файлов в месте назначения** . Чтобы решить эту проблему, добавьте файл заполнителя, например TXT-файл, в папку " *приложение\_данные* ", убедитесь, что не выбраны **исключаемые данные\_** и повторно разверните развертывание. 

## <a name="com-object-that-has-been-separated-from-its-underlying-rcw-cannot-be-used"></a>"COM-объект, который был отделен от его базовой RCW, использовать нельзя".

### <a name="scenario"></a>Сценарий

Вы успешно используете публикацию одним щелчком для развертывания приложения, после чего вы начинаете получать эту ошибку:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample23.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Для устранения этой ошибки обычно требуется закрыть и перезапустить Visual Studio.

## <a name="deployment-fails-because-user-credentials-used-for-publishing-dont-have-setacl-authority"></a>Развертывание завершается сбоем, так как учетные данные пользователя, используемые для публикации, не имеют центра Сетакл

### <a name="scenario"></a>Сценарий

Публикация завершается сбоем с ошибкой, указывающей, что у вас нет полномочий на задание разрешений для папок (у используемой учетной записи пользователя нет центра Сетакл).

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию Visual Studio устанавливает разрешения на чтение корневой папки сайта и разрешения на запись в папке приложения\_данных. Если известно, что разрешения по умолчанию для папок сайта являются правильными и их не нужно задавать, отключите это поведение, добавив **&lt;назначение инклудесетаклпровидерон&gt;False&lt;/инклудесетаклпровидерондестинатион&gt;** в файл профиля публикации (для влияния на один профиль) или в файл WPP. targets (чтобы задействовать все профили). Дополнительные сведения об изменении этих файлов см. в разделе [как изменить параметры развертывания в файлах профиля (. pubxml)](https://msdn.microsoft.com/library/ff398069.aspx). 

## <a name="access-denied-errors-when-the-application-tries-to-write-to-an-application-folder"></a>Ошибки отказа в доступе при попытке приложения выполнить запись в папку приложения

### <a name="scenario"></a>Сценарий

В приложении возникают ошибки при попытке создать или изменить файл в одной из папок приложения, так как у него нет центра записи для этой папки.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию Visual Studio устанавливает разрешения на чтение корневой папки сайта и разрешения на запись в папке приложения\_данных. Если приложению требуется доступ на запись к вложенной папке, можно задать разрешения для этой папки, как показано в учебниках [Настройка разрешений для папок](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md) и [развертывание в рабочей среде](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) . Если приложению требуется доступ на запись к корневой папке сайта, необходимо запретить ему устанавливать доступ только для чтения к корневой папке, добавив **&lt;Инклудесетаклпровидерон Destination&gt;False&lt;/инклудесетаклпровидерондестинатион&gt;** в файл профиля публикации (для влияния на один профиль) или в файл WPP. targets (для влияния на все профили). Дополнительные сведения об изменении этих файлов см. в разделе [как изменить параметры развертывания в файлах профиля (. pubxml)](https://msdn.microsoft.com/library/ff398069.aspx). <a id="aspnet45error"></a>

## <a name="configuration-error---targetframework-attribute-references-a-version-that-is-later-than-the-installed-version-of-the-net-framework"></a>Ошибка конфигурации — атрибут targetFramework ссылается на версию, которая позже установленной версии .NET Framework

### <a name="scenario"></a>Сценарий

Вы успешно опубликовали веб-проект, предназначенный для ASP.NET 4,5, но при запуске приложения (в режиме `customErrors`, для которого в файле Web. config задано значение OFF), возникает следующая ошибка:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample24.cmd)]

В поле Источник ошибки страницы ошибки в качестве причины ошибки выделяется следующая строка из файла Web. config:

[!code-console[Main](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12/samples/sample25.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Сервер не поддерживает ASP.NET 4,5. Обратитесь к поставщику услуг размещения, чтобы определить, когда можно добавить поддержку ASP.NET 4,5. Если обновление сервера не является вариантом, необходимо развернуть веб-проект, предназначенный для ASP.NET 4 или более ранней версии. Если вы развертываете веб-проект ASP.NET 4 или более ранней версии в том же назначении, установите флажок **удалить дополнительные файлы в месте назначения** на вкладке **Параметры** мастера **публикации веб-сайта** . Если не выбрать пункт **удалить дополнительные файлы в месте назначения**, будет по-прежнему выведена страница ошибки конфигурации.

В окнах **свойств** проекта имеется раскрывающийся список Целевая платформа, но эту проблему нельзя устранить, просто изменив это с **.NET Framework 4,5** на **.NET Framework 4**. Если изменить целевую платформу до более ранней версии платформы, проект по-прежнему будет содержать ссылки на сборки более поздней версии платформы и не будет выполняться. Необходимо вручную изменить эти ссылки или создать новый проект, предназначенный для .NET Framework 4 или более ранней версии. Дополнительные сведения см. в разделе [.NET Framework нацеливание на веб-сайты](https://msdn.microsoft.com/library/bb398791(v=vs.100).aspx).

> [!div class="step-by-step"]
> [Назад](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)
