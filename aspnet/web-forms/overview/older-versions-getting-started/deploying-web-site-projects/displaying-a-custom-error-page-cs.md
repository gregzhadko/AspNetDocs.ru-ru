---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
title: Отображение настраиваемой страницы ошибки (C#) | Документация Майкрософт
author: rick-anderson
description: Что видят пользователи при возникновении ошибки времени выполнения в веб-приложении ASP.NET? Ответ зависит от того, как &lt;веб-сайта&gt; конфигурацию customErrors...
ms.author: riande
ms.date: 06/09/2009
ms.assetid: cb061642-faf3-41b2-9372-69e13444d458
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
msc.type: authoredcontent
ms.openlocfilehash: c1ff4c112b9a489b8fb9ef3443663cd71eda7965
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78420618"
---
# <a name="displaying-a-custom-error-page-c"></a><span data-ttu-id="ccb4c-104">Отображение страницы пользовательской ошибки (C#)</span><span class="sxs-lookup"><span data-stu-id="ccb4c-104">Displaying a Custom Error Page (C#)</span></span>

<span data-ttu-id="ccb4c-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ccb4c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ccb4c-106">[Скачать код](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) или [скачать PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="ccb4c-106">[Download Code](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) or [Download PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span></span>

> <span data-ttu-id="ccb4c-107">Что видят пользователи при возникновении ошибки времени выполнения в веб-приложении ASP.NET?</span><span class="sxs-lookup"><span data-stu-id="ccb4c-107">What does the user see when a runtime error occurs in an ASP.NET web application?</span></span> <span data-ttu-id="ccb4c-108">Ответ зависит от того, как конфигурация&gt; &lt;customErrors веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-108">The answer depends on how the website's &lt;customErrors&gt; configuration.</span></span> <span data-ttu-id="ccb4c-109">По умолчанию пользователи показывают невидимый желтый экран о том, что произошла ошибка времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-109">By default, users are shown an unsightly yellow screen proclaiming that a runtime error has occurred.</span></span> <span data-ttu-id="ccb4c-110">В этом учебнике показано, как настроить эти параметры для отображения страницы настраиваемой ошибки визуально, которая соответствует внешнему интерфейсу веб-узла.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-110">This tutorial shows how to customize these settings to display an aesthetically-pleasing custom error page that matches your site's look and feel.</span></span>

## <a name="introduction"></a><span data-ttu-id="ccb4c-111">Введение</span><span class="sxs-lookup"><span data-stu-id="ccb4c-111">Introduction</span></span>

<span data-ttu-id="ccb4c-112">В идеальном мире ошибки времени выполнения не возникают.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-112">In a perfect world there would be no run-time errors.</span></span> <span data-ttu-id="ccb4c-113">Программисты могут написать код, Нари ошибку и устойчивую проверку вводимых пользователем данных, а внешние ресурсы, такие как серверы баз данных и серверы электронной почты, никогда не переходят в автономный режим.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-113">Programmers would write code with nary a bug and with robust user input validation, and external resources like database servers and email servers would never go offline.</span></span> <span data-ttu-id="ccb4c-114">Разумеется, на практике ошибки неизбежны.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-114">Of course, in reality errors are inevitable.</span></span> <span data-ttu-id="ccb4c-115">Классы в .NET Framework сообщают об ошибке, вызывая исключение.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-115">The classes in the .NET Framework signal an error by throwing an exception.</span></span> <span data-ttu-id="ccb4c-116">Например, вызов метода Open объекта SqlConnection устанавливает соединение с базой данных, указанной в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-116">For example, calling a SqlConnection object's Open method establishes a connection to the database specified by a connection string.</span></span> <span data-ttu-id="ccb4c-117">Однако если база данных не работает или в строке подключения указаны недопустимые учетные данные, метод Open вызывает исключение `SqlException`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-117">However, if the database is down or if the credentials in the connection string are invalid then the Open method throws a `SqlException`.</span></span> <span data-ttu-id="ccb4c-118">Исключения могут обрабатываться с помощью блоков `try/catch/finally`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-118">Exceptions can be handled by the use of `try/catch/finally` blocks.</span></span> <span data-ttu-id="ccb4c-119">Если код в блоке `try` вызывает исключение, управление передается соответствующему блоку catch, где разработчик может попытаться устранить ошибку.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-119">If code within a `try` block throws an exception, control is transferred to the appropriate catch block where the developer can attempt to recover from the error.</span></span> <span data-ttu-id="ccb4c-120">Если соответствующий блок catch отсутствует или код, вызвавший исключение, находится не в блоке try, то исключение перколатес стек вызовов в поиске блоков `try/catch/finally`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-120">If there is no matching catch block, or if the code that threw the exception is not in a try block, the exception percolates up the call stack in search of `try/catch/finally` blocks.</span></span>

<span data-ttu-id="ccb4c-121">Если исключение восстановится до среды выполнения ASP.NET без обработки, вызывается [событие`Error`](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) [класса`HttpApplication`](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)и отображается страница настроенной *ошибки* .</span><span class="sxs-lookup"><span data-stu-id="ccb4c-121">If the exception bubbles all the way up to the ASP.NET runtime without being handled, the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)'s [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) is raised and the configured *error page* is displayed.</span></span> <span data-ttu-id="ccb4c-122">По умолчанию ASP.NET отображает страницу ошибки, ласковоую [желтым экраном смерти](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (исод).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-122">By default, ASP.NET displays an error page that is affectionately referred to as the [Yellow Screen of Death](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span></span> <span data-ttu-id="ccb4c-123">Существует две версии ИСОД: одна показывает сведения об исключении, трассировку стека и другие сведения, полезные для разработчиков при отладке приложения (см. **рис. 1**); в другом просто говорится об ошибке времени выполнения (см. рис. **2**).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-123">There are two versions of the YSOD: one shows the exception details, a stack trace, and other information helpful to developers debugging the application (see **Figure 1**); the other simply states that there was a run-time error (see **Figure 2**).</span></span>

<span data-ttu-id="ccb4c-124">Сведения об исключении ИСОД весьма полезны для разработчиков, которые выполняют отладку приложения, но показывают ИСОД для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-124">The exception details YSOD is quite helpful for developers debugging the application, but showing a YSOD to end users is tacky and unprofessional.</span></span> <span data-ttu-id="ccb4c-125">Вместо этого конечные пользователи должны быть переведены на страницу ошибки, которая обеспечивает внешний вид и удобство работы узла с более понятными для пользователя prose, описывающими ситуацию.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-125">Instead, end users should be taken to an error page that maintains the site's look and feel with more user-friendly prose describing the situation.</span></span> <span data-ttu-id="ccb4c-126">Хорошая новость состоит в том, что создание такой настраиваемой страницы ошибки довольно просто.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-126">The good news is that creating such a custom error page is quite easy.</span></span> <span data-ttu-id="ccb4c-127">В этом учебнике начинается знакомство с ASP. Различные страницы ошибок NET.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-127">This tutorial starts with a look at ASP.NET's different error pages.</span></span> <span data-ttu-id="ccb4c-128">Затем показано, как настроить веб-приложение таким способом, чтобы пользователи отображали настраиваемую страницу ошибки на лицевой стороне ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-128">It then shows how to configure the web application to show users a custom error page in the face of an error.</span></span>

### <a name="examining-the-three-types-of-error-pages"></a><span data-ttu-id="ccb4c-129">Изучение трех типов страниц ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-129">Examining the Three Types of Error Pages</span></span>

<span data-ttu-id="ccb4c-130">При возникновении необработанного исключения в приложении ASP.NET появляется один из трех типов страниц ошибок:</span><span class="sxs-lookup"><span data-stu-id="ccb4c-130">When an unhandled exception arises in an ASP.NET application one of three types of error pages is displayed:</span></span>

- <span data-ttu-id="ccb4c-131">Желтый экран сведений об исключении на странице ошибки смерти</span><span class="sxs-lookup"><span data-stu-id="ccb4c-131">The Exception Details Yellow Screen of Death error page,</span></span>
- <span data-ttu-id="ccb4c-132">Желтый экран ошибки времени выполнения на странице ошибки смерти или</span><span class="sxs-lookup"><span data-stu-id="ccb4c-132">The Runtime Error Yellow Screen of Death error page, or</span></span>
- <span data-ttu-id="ccb4c-133">Настраиваемая страница ошибки</span><span class="sxs-lookup"><span data-stu-id="ccb4c-133">A custom error page</span></span>

<span data-ttu-id="ccb4c-134">Наиболее знакомыми разработчиками страниц ошибок являются сведения об исключении ИСОД.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-134">The error page developers are most familiar with is the Exception Details YSOD.</span></span> <span data-ttu-id="ccb4c-135">По умолчанию эта страница отображается для пользователей, посещаемых локально, поэтому это страница, отображаемая при возникновении ошибки при тестировании сайта в среде разработки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-135">By default, this page is displayed to users who are visiting locally and therefore is the page that you see when an error occurs when testing the site in the development environment.</span></span> <span data-ttu-id="ccb4c-136">Как следует из названия, сведения об исключении ИСОД предоставляют подробные сведения об исключении: тип, сообщение и трассировку стека.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-136">As its name implies, the Exception Details YSOD provides details about the exception - the type, the message, and the stack trace.</span></span> <span data-ttu-id="ccb4c-137">Более того, если исключение было вызвано кодом в классе кода программной части страницы ASP.NET и если приложение настроено для отладки, то сведения об исключении ИСОД также будут показывать эту строку кода (и несколько строк кода выше и ниже).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-137">What's more, if the exception was raised by code in your ASP.NET page's code-behind class and if the application is configured for debugging then the Exception Details YSOD will also show this line of code (and a few lines of code above and below it).</span></span>

<span data-ttu-id="ccb4c-138">На **рис. 1** показана страница сведений об исключении исод.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-138">**Figure 1** shows the Exception Details YSOD page.</span></span> <span data-ttu-id="ccb4c-139">Запишите URL-адрес в окне адреса браузера: `http://localhost:62275/Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-139">Note the URL in the browser's address window: `http://localhost:62275/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="ccb4c-140">Помните, что на `Genre.aspx` странице перечислены обзоры книг в определенном жанре.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-140">Recall that the `Genre.aspx` page lists the book reviews in a particular genre.</span></span> <span data-ttu-id="ccb4c-141">Для этого требуется, чтобы значение `GenreId` (`uniqueidentifier`) передавалось через строку запроса. Например, правильный URL-адрес для просмотра вымышленных проверок `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-141">It requires that `GenreId` value (a `uniqueidentifier`) be passed through the querystring; for example, the appropriate URL to view the fiction reviews is `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span></span> <span data-ttu-id="ccb4c-142">Если значение, отличное от`uniqueidentifier`, передается через строку запроса (например, "foo"), возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-142">If a non-`uniqueidentifier` value is passed in through the querystring (such as "foo") an exception is thrown.</span></span>

> [!NOTE]
> <span data-ttu-id="ccb4c-143">Чтобы воспроизвести эту ошибку в демонстрационном веб-приложении, доступном для загрузки, можно либо посетить `Genre.aspx?ID=foo` напрямую, либо щелкнуть ссылку "создать ошибку времени выполнения" в `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-143">To reproduce this error in the demo web application available for download you can either visit `Genre.aspx?ID=foo` directly or click the "Generate a Runtime Error" link in `Default.aspx`.</span></span>

<span data-ttu-id="ccb4c-144">Обратите внимание на сведения об исключении, представленные на **рис. 1**.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-144">Note the exception information presented in **Figure 1**.</span></span> <span data-ttu-id="ccb4c-145">Сообщение об исключении "не удалось преобразовать строку символов в uniqueidentifier" в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-145">The exception message, "Conversion failed when converting from a character string to uniqueidentifier" is present at the top of the page.</span></span> <span data-ttu-id="ccb4c-146">Тип исключения, `System.Data.SqlClient.SqlException`, также присутствует в списке.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-146">The type of the exception, `System.Data.SqlClient.SqlException`, is listed, as well.</span></span> <span data-ttu-id="ccb4c-147">Также имеется трассировка стека.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-147">There's also the stack trace.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image2.png)](displaying-a-custom-error-page-cs/_static/image1.png)

<span data-ttu-id="ccb4c-148">**Рис. 1**. сведения об исключении Исод содержат сведения о исключении</span><span class="sxs-lookup"><span data-stu-id="ccb4c-148">**Figure 1**: The Exception Details YSOD Includes Information About the Exception</span></span>  
 <span data-ttu-id="ccb4c-149">([Щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-149">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="ccb4c-150">Другой тип ИСОД — это ошибка времени выполнения ИСОД и показана на рис. **2**.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-150">The other type of YSOD is the Runtime Error YSOD, and is shown in **Figure 2**.</span></span> <span data-ttu-id="ccb4c-151">Ошибка времени выполнения ИСОД информирует посетителя о том, что произошла ошибка времени выполнения, но не содержит сведений о возникшем исключении.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-151">The Runtime Error YSOD informs the visitor that a run-time error has occurred, but it does not include any information about the exception that was thrown.</span></span> <span data-ttu-id="ccb4c-152">(Однако он предоставляет инструкции о том, как сделать сведения об ошибке видимыми, изменив файл `Web.config`, который является частью того, что делает такую ИСОД непрофессиональной.)</span><span class="sxs-lookup"><span data-stu-id="ccb4c-152">(It does, however, provide instructions on how to make the error details viewable by modifying the `Web.config` file, which is part of what makes such a YSOD look unprofessional.)</span></span>

<span data-ttu-id="ccb4c-153">По умолчанию ошибка времени выполнения ИСОД отображается для пользователей, посещенных удаленно (через http://www.yoursite.com), как указано URL-адресом в адресной строке браузера на **рис. 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-153">By default, the Runtime Error YSOD is shown to users visiting remotely (through http://www.yoursite.com), as evidenced by the URL in the browser's Address bar in **Figure 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="ccb4c-154">Существуют два различных экрана ИСОД, так как разработчики заинтересованы в определении сведений об ошибках, но такие сведения не должны отображаться на активном сайте, так как они могут раскрыть потенциальные уязвимости или другие конфиденциальные сведения для всех, кто посещает ваш места.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-154">The two different YSOD screens exist because developers are interested in knowing the error details, but such information should not be shown on a live site as it may reveal potential security vulnerabilities or other sensitive information to anyone who visits your site.</span></span>

> [!NOTE]
> <span data-ttu-id="ccb4c-155">Если вы выполняете следующие функции и используете DiscountASP.NET в качестве веб-узла, вы можете заметить, что ошибка времени выполнения ИСОД не отображается при посещении активного сайта.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-155">If you are following along and are using DiscountASP.NET as your web host, you may notice that the Runtime Error YSOD does not display when visiting the live site.</span></span> <span data-ttu-id="ccb4c-156">Это обусловлено тем, что DiscountASP.NET содержит серверы, настроенные на отображение сведений об исключении ИСОД по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-156">This is because DiscountASP.NET has their servers configured to show the Exception Details YSOD by default.</span></span> <span data-ttu-id="ccb4c-157">Хорошая новость заключается в том, что вы можете переопределить это поведение по умолчанию, добавив раздел `<customErrors>` в файл `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-157">The good news is that you can override this default behavior by adding a `<customErrors>` section to your `Web.config` file.</span></span> <span data-ttu-id="ccb4c-158">Раздел "сведения о настройке отображаемой страницы ошибки" подробно рассматривает раздел `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-158">The "Configuring Which Error Page is Displayed" section examines the `<customErrors>` section in detail.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image5.png)](displaying-a-custom-error-page-cs/_static/image4.png)

<span data-ttu-id="ccb4c-159">**Рис. 2**. ошибка времени выполнения Исод не содержит сведений об ошибке</span><span class="sxs-lookup"><span data-stu-id="ccb4c-159">**Figure 2**: The Runtime Error YSOD Does Not Include Any Error Details</span></span>  
 <span data-ttu-id="ccb4c-160">([Щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-160">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="ccb4c-161">Третий тип страницы ошибки — настраиваемая страница ошибки, которая представляет собой создаваемую веб-страницу.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-161">The third type of error page is the custom error page, which is a web page that you create.</span></span> <span data-ttu-id="ccb4c-162">Преимущество пользовательской страницы ошибок состоит в том, что вы имеете полный контроль над информацией, отображаемой пользователю вместе с ее внешним видом и поведением. страница настраиваемой ошибки может использовать ту же главную страницу и стили, что и другие страницы.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-162">The benefit of a custom error page is that you have complete control over the information that is displayed to the user along with the page's look and feel; the custom error page can use the same master page and styles as your other pages.</span></span> <span data-ttu-id="ccb4c-163">Раздел "Использование настраиваемой страницы ошибки" содержит инструкции по созданию настраиваемой страницы ошибок и ее настройке для вывода в случае необработанного исключения.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-163">The "Using a Custom Error Page" section walks through creating a custom error page and configuring it to display in the event of an unhandled exception.</span></span> <span data-ttu-id="ccb4c-164">**На рис. 3** приведен краткий пик этой настраиваемой страницы ошибок.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-164">**Figure 3** offers a sneak peak of this custom error page.</span></span> <span data-ttu-id="ccb4c-165">Как видите, страница ошибки выглядит гораздо более профессионально, чем один из желтых экранов смерти, показанных на рис. 1 и 2.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-165">As you can see, the look and feel of the error page is much more professional-looking than either of the Yellow Screens of Death shown in Figures 1 and 2.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image8.png)](displaying-a-custom-error-page-cs/_static/image7.png)

<span data-ttu-id="ccb4c-166">**Рис. 3**. настраиваемая страница ошибки предлагает более специализированный внешний вид и оформление</span><span class="sxs-lookup"><span data-stu-id="ccb4c-166">**Figure 3**: A Custom Error Page Offers a More Tailored Look and Feel</span></span>  
 <span data-ttu-id="ccb4c-167">([Щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-167">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="ccb4c-168">Уделите время изучению адресной строки браузера на рис. **3**.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-168">Take a moment to inspect the browser's Address bar in **Figure 3**.</span></span> <span data-ttu-id="ccb4c-169">Обратите внимание, что в адресной строке отображается URL-адрес страницы настраиваемой ошибки (`/ErrorPages/Oops.aspx`).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-169">Note that the Address bar shows the URL of the custom error page (`/ErrorPages/Oops.aspx`).</span></span> <span data-ttu-id="ccb4c-170">На рис. 1 и 2 желтые экраны смерти отображаются на той же странице, на которой возникла ошибка (`Genre.aspx`).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-170">In Figures 1 and 2 the Yellow Screens of Death are shown in the same page that the error originated from (`Genre.aspx`).</span></span> <span data-ttu-id="ccb4c-171">На странице настраиваемой ошибки передается URL-адрес страницы, на которой произошла ошибка, с помощью параметра `aspxerrorpath` QueryString.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-171">The custom error page is passed the URL of the page where the error occurred via the `aspxerrorpath` querystring parameter.</span></span>

## <a name="configuring-which-error-page-is-displayed"></a><span data-ttu-id="ccb4c-172">Настройка отображаемой страницы ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-172">Configuring Which Error Page is Displayed</span></span>

<span data-ttu-id="ccb4c-173">Какая из трех возможных страниц ошибок отображается на основе двух переменных:</span><span class="sxs-lookup"><span data-stu-id="ccb4c-173">Which of the three possible error pages is displayed is based on two variables:</span></span>

- <span data-ttu-id="ccb4c-174">Сведения о конфигурации в разделе `<customErrors>` и</span><span class="sxs-lookup"><span data-stu-id="ccb4c-174">The configuration information in the `<customErrors>` section, and</span></span>
- <span data-ttu-id="ccb4c-175">Будет ли пользователь посещать сайт локально или удаленно.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-175">Whether the user is visiting the site locally or remotely.</span></span>

<span data-ttu-id="ccb4c-176">[Раздел`<customErrors>`](https://msdn.microsoft.com/library/h0hfz6fc.aspx) в `Web.config` имеет два атрибута, которые влияют на отображаемую страницу ошибки: `defaultRedirect` и `mode`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-176">The [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx) in `Web.config` has two attributes that affect what error page is shown: `defaultRedirect` and `mode`.</span></span> <span data-ttu-id="ccb4c-177">Атрибут `defaultRedirect` является необязательным.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-177">The `defaultRedirect` attribute is optional.</span></span> <span data-ttu-id="ccb4c-178">Если он указан, он указывает URL-адрес страницы настраиваемой ошибки и указывает, что вместо ошибки времени выполнения ИСОД должна отображаться пользовательская страница ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-178">If provided, it specifies the URL of the custom error page and indicates that the custom error page should be shown instead of the Runtime Error YSOD.</span></span> <span data-ttu-id="ccb4c-179">Атрибут `mode` является обязательным и принимает одно из трех значений: `On`, `Off`или `RemoteOnly`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-179">The `mode` attribute is required and accepts one of three values: `On`, `Off`, or `RemoteOnly`.</span></span> <span data-ttu-id="ccb4c-180">Эти значения имеют следующие особенности.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-180">These values have the following behavior:</span></span>

- <span data-ttu-id="ccb4c-181">`On` — указывает, что пользовательская страница ошибок или ошибка времени выполнения ИСОД отображаться для всех посетителей независимо от того, являются они локальными или удаленными.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-181">`On` - indicates that the custom error page or the Runtime Error YSOD is shown to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="ccb4c-182">`Off` — указывает, что сведения об исключении отображаются для всех посетителей, независимо от того, являются они локальными или удаленными.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-182">`Off` - specifies that the Exception Details YSOD is displayed to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="ccb4c-183">`RemoteOnly` — указывает, что пользовательская страница ошибок или ошибка времени выполнения ИСОД отображается удаленным посетителям, а сведения об исключении ИСОД — локальным посетителям.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-183">`RemoteOnly` - indicates that the custom error page or the Runtime Error YSOD is shown to remote visitors, while the Exception Details YSOD is shown to local visitors.</span></span>

<span data-ttu-id="ccb4c-184">Если не указано иное, ASP.NET действует так, как если бы вы установили атрибут mode в `RemoteOnly` и не указали `defaultRedirect` значение.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-184">Unless you specify otherwise, ASP.NET acts as if you had set the mode attribute to `RemoteOnly` and had not specified a `defaultRedirect` value.</span></span> <span data-ttu-id="ccb4c-185">Иными словами, поведение по умолчанию заключается в том, что сведения об исключении ИСОД отображаются локальным посетителям, а ошибка времени выполнения ИСОД отображается для удаленных посетителей.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-185">In other words, the default behavior is that the Exception Details YSOD is displayed to local visitors while the Runtime Error YSOD is shown to remote visitors.</span></span> <span data-ttu-id="ccb4c-186">Это поведение по умолчанию можно переопределить, добавив `<customErrors>` раздел в `Web.config file.` веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-186">You can override this default behavior by adding a `<customErrors>` section to your web application's `Web.config file.`</span></span>

## <a name="using-a-custom-error-page"></a><span data-ttu-id="ccb4c-187">Использование настраиваемой страницы ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-187">Using a Custom Error Page</span></span>

<span data-ttu-id="ccb4c-188">У каждого веб-приложения должна быть настраиваемая страница ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-188">Every web application should have a custom error page.</span></span> <span data-ttu-id="ccb4c-189">Она предоставляет более профессионально выглядящий альтернативу ошибке времени выполнения ИСОД, легко создавать и настраивать приложение для использования настраиваемой страницы ошибок занимает всего несколько секунд.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-189">It provides a more professional-looking alternative to the Runtime Error YSOD, it is easy to create, and configuring the application to use the custom error page takes only a few moments.</span></span> <span data-ttu-id="ccb4c-190">Первым шагом является создание настраиваемой страницы ошибок.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-190">The first step is creating the custom error page.</span></span> <span data-ttu-id="ccb4c-191">Я добавил новую папку в приложение для рецензирования книги с именем `ErrorPages` и добавил к этой новой странице ASP.NET с именем `Oops.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-191">I've added a new folder to the Book Reviews application named `ErrorPages` and added to that a new ASP.NET page named `Oops.aspx`.</span></span> <span data-ttu-id="ccb4c-192">Убедитесь, что страница использует ту же главную страницу, что и остальные страницы на сайте, чтобы он автоматически наследовал тот же внешний вид и поведение.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-192">Have the page use the same master page as the rest of the pages on your site so that it automatically inherits the same look and feel.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image11.png)](displaying-a-custom-error-page-cs/_static/image10.png)

<span data-ttu-id="ccb4c-193">**Рис. 4**. Создание настраиваемой страницы ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-193">**Figure 4**: Create a Custom Error Page</span></span>

<span data-ttu-id="ccb4c-194">Затем натратьте несколько минут на создание содержимого для страницы ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-194">Next, spend a few minutes creating the content for the error page.</span></span> <span data-ttu-id="ccb4c-195">Я создал простую настраиваемую страницу ошибки с сообщением, указывающим, что произошла непредвиденная ошибка, и обратная ссылка на домашнюю страницу сайта.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-195">I've created a rather simple custom error page with a message indicating that there was an unexpected error and a link back to the site's homepage.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image13.png)](displaying-a-custom-error-page-cs/_static/image12.png)

<span data-ttu-id="ccb4c-196">**Рис. 5**. Проектирование пользовательской страницы ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-196">**Figure 5**: Design Your Custom Error Page</span></span>  
 <span data-ttu-id="ccb4c-197">([Щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-197">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image14.png))</span></span>

<span data-ttu-id="ccb4c-198">После завершения страницы ошибки настройте веб-приложение на использование настраиваемой страницы ошибок вместо ошибки времени выполнения ИСОД.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-198">With the error page completed, configure the web application to use the custom error page in lieu of the Runtime Error YSOD.</span></span> <span data-ttu-id="ccb4c-199">Это достигается путем указания URL-адреса страницы ошибки в атрибуте `defaultRedirect` раздела `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-199">This is accomplished by specifying the URL of the error page in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="ccb4c-200">Добавьте следующую разметку в файл `Web.config` приложения:</span><span class="sxs-lookup"><span data-stu-id="ccb4c-200">Add the following markup to your application's `Web.config` file:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample1.xml)]

<span data-ttu-id="ccb4c-201">Приведенная выше разметка настраивает приложение для отображения сведений об исключении ИСОД пользователям, посещенным локально, при использовании пользовательской страницы ошибки ой. aspx для пользователей, посещенных удаленно.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-201">The above markup configures the application to show the Exception Details YSOD to users visiting locally, while using the custom error page Oops.aspx for those users visiting remotely.</span></span> <span data-ttu-id="ccb4c-202">Чтобы увидеть это в действии, разверните веб-сайт в рабочей среде, а затем посетите страницу жанр. aspx на активном сайте с недопустимым значением строки запроса.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-202">To see this in action, deploy your website to the production environment and then visit the Genre.aspx page on the live site with an invalid querystring value.</span></span> <span data-ttu-id="ccb4c-203">Вы увидите страницу настраиваемой ошибки (см. рис. **3**).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-203">You should see the custom error page (refer back to **Figure 3**).</span></span>

<span data-ttu-id="ccb4c-204">Чтобы убедиться, что пользовательская страница ошибки отображается только для удаленных пользователей, перейдите на страницу `Genre.aspx` с неверной строкой запроса из среды разработки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-204">To verify that the custom error page is only shown to remote users, visit the `Genre.aspx` page with an invalid querystring from the development environment.</span></span> <span data-ttu-id="ccb4c-205">Вы по-прежнему увидите сведения об исключении ИСОД (см. **рис. 1**).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-205">You should still see the Exception Details YSOD (refer back to **Figure 1**).</span></span> <span data-ttu-id="ccb4c-206">Параметр `RemoteOnly` гарантирует, что пользователи, посещающие сайт в рабочей среде, видят страницу настраиваемой ошибки, а разработчики, работающие локально, продолжают видеть сведения об исключении.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-206">The `RemoteOnly` setting ensures that users visiting the site on the production environment see the custom error page while developers working locally continue to see the details of the exception.</span></span>

## <a name="notifying-developers-and-logging-error-details"></a><span data-ttu-id="ccb4c-207">Уведомление разработчиков и запись сведений об ошибках</span><span class="sxs-lookup"><span data-stu-id="ccb4c-207">Notifying Developers and Logging Error Details</span></span>

<span data-ttu-id="ccb4c-208">Ошибки, возникающие в среде разработки, были вызваны разработчиком на компьютере.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-208">Errors that occur in the development environment were caused by the developer sitting at her computer.</span></span> <span data-ttu-id="ccb4c-209">Она показывает сведения об исключении в сведениях об исключении ИСОД и знает, какие шаги она выполняла в момент возникновения ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-209">She is shown the exception's information in the Exception Details YSOD, and she knows what steps she was performing when the error occurred.</span></span> <span data-ttu-id="ccb4c-210">Но при возникновении ошибки в рабочей среде разработчик не имеет сведений о том, что произошла ошибка, если пользователь, посещающий сайт, не потратит время на сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-210">But when an error occurs on production, the developer has no knowledge that an error occurred unless the end user visiting the site takes the time to report the error.</span></span> <span data-ttu-id="ccb4c-211">Даже если пользователь выходит из строя, чтобы предупредить команду разработчиков о том, что произошла ошибка, не зная тип исключения, сообщение и трассировку стека, это может быть трудно диагностировать причину ошибки, разрешить отдельно исправить ее.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-211">And even if the user goes out of his way to alert the development team that an error occurred, without knowing the exception type, message, and stack trace it can be difficult to diagnose the cause of the error, let alone fix it.</span></span>

<span data-ttu-id="ccb4c-212">По этим причинам важно, чтобы любая ошибка в рабочей среде записалась в какое-либо постоянное хранилище (например, в базу данных) и что разработчики предупреждают об этой ошибке.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-212">For these reasons it is paramount that any error in the production environment is logged to some persistent store (such as a database) and that the developers are alerted of this error.</span></span> <span data-ttu-id="ccb4c-213">Страница настраиваемой ошибки может показаться хорошим местом для ведения журнала и уведомления.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-213">The custom error page may seem like a good place to do this logging and notification.</span></span> <span data-ttu-id="ccb4c-214">К сожалению, настраиваемая страница ошибки не имеет доступа к сведениям об ошибке и поэтому не может использоваться для записи этих сведений в журнал.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-214">Unfortunately, the custom error page does not have access to the error details and therefore cannot be used to log this information.</span></span> <span data-ttu-id="ccb4c-215">Хорошая новость состоит в том, что существует несколько способов перехвата сведений об ошибке и их записи в журнал, а в следующих трех руководствах подробно рассматривается этот раздел.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-215">The good news is that there are a number of ways to intercept the error details and to log them, and the next three tutorials explore this topic in more detail.</span></span>

## <a name="using-different-custom-error-pages-for-different-http-error-statuses"></a><span data-ttu-id="ccb4c-216">Использование различных настраиваемых страниц ошибок для различных состояний ошибок HTTP</span><span class="sxs-lookup"><span data-stu-id="ccb4c-216">Using Different Custom Error Pages for Different HTTP Error Statuses</span></span>

<span data-ttu-id="ccb4c-217">Если исключение вызывается страницей ASP.NET и не обрабатывается, исключение перколатес до среды выполнения ASP.NET, которая отображает настроенную страницу ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-217">When an exception is thrown by an ASP.NET page and is not handled, the exception percolates up to the ASP.NET runtime, which displays the configured error page.</span></span> <span data-ttu-id="ccb4c-218">Если запрос поступает в подсистему ASP.NET Engine, но не может быть обработан по какой-либо причине, возможно, запрошенный файл не найден или для него отключены разрешения на чтение. Затем обработчик ASP.NET создает `HttpException`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-218">If a request comes into the ASP.NET engine but cannot be processed for some reason - perhaps the requested file is not found or Read permissions have been disabled for the file - then the ASP.NET engine raises an `HttpException`.</span></span> <span data-ttu-id="ccb4c-219">Это исключение, например исключения, возникающие на страницах ASP.NET, передается в среду выполнения, что приводит к отображению соответствующей страницы ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-219">This exception, like exceptions raised from ASP.NET pages, bubbles up to the runtime, causing the appropriate error page to be displayed.</span></span>

<span data-ttu-id="ccb4c-220">Это означает, что для веб-приложения в рабочей среде, если пользователь запрашивает страницу, которая не найдена, он увидит страницу настраиваемой ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-220">What this means for the web application in production is that if a user requests a page that is not found then they will see the custom error page.</span></span> <span data-ttu-id="ccb4c-221">**На рис. 6** показан пример.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-221">**Figure 6** shows such an example.</span></span> <span data-ttu-id="ccb4c-222">Поскольку запрос предназначен для несуществующей страницы (`NoSuchPage.aspx`), создается `HttpException` и отображается страница настраиваемой ошибки (Обратите внимание на ссылку на `NoSuchPage.aspx` в параметре строки запроса `aspxerrorpath`).</span><span class="sxs-lookup"><span data-stu-id="ccb4c-222">Because the request is for a non-existent page (`NoSuchPage.aspx`), an `HttpException` is thrown and the custom error page is displayed (note the reference to `NoSuchPage.aspx` in the `aspxerrorpath` querystring parameter).</span></span>

[![](displaying-a-custom-error-page-cs/_static/image16.png)](displaying-a-custom-error-page-cs/_static/image15.png)

<span data-ttu-id="ccb4c-223">**Рис. 6**. среда выполнения ASP.NET отображает настроенную страницу ошибки в ответ на недопустимый запрос ([щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-223">**Figure 6**: The ASP.NET Runtime Displays the Configured Error Page In Response to an Invalid Request ([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image17.png))</span></span>

<span data-ttu-id="ccb4c-224">По умолчанию все типы ошибок приводят к отображению одной и той же настраиваемой страницы ошибок.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-224">By default, all types of errors cause the same custom error page to be displayed.</span></span> <span data-ttu-id="ccb4c-225">Однако можно указать другую настраиваемую страницу ошибки для конкретного кода состояния HTTP с помощью `<error>` дочерних элементов в разделе `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-225">However, you can specify a different custom error page for a specific HTTP status code using `<error>` children elements within the `<customErrors>` section.</span></span> <span data-ttu-id="ccb4c-226">Например, чтобы страница ошибки отображалась в случае ошибки «страница не найдена» с кодом состояния HTTP 404, обновите раздел `<customErrors>`, включив в него следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="ccb4c-226">For example, to have a different error page displayed in the event of a page not found error, which has an HTTP status code of 404, update the `<customErrors>` section to include the following markup:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample2.xml)]

<span data-ttu-id="ccb4c-227">После этого изменения, когда пользователь посещает удаленно запрашивает несуществующий ресурс ASP.NET, он будет перенаправлен на `404.aspx` настраиваемую страницу ошибок вместо `Oops.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-227">With this change in place, whenever a user visiting remotely requests an ASP.NET resource that does not exist, they will be redirected to the `404.aspx` custom error page instead of `Oops.aspx`.</span></span> <span data-ttu-id="ccb4c-228">Как показано на **рис. 7** , страница `404.aspx` может содержать более конкретное сообщение, чем общая пользовательская страница ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-228">As **Figure 7** illustrates, the `404.aspx` page can include a more specific message than the general custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="ccb4c-229">Дополнительные сведения о создании эффективных 404 страниц ошибок см. на [страницах ошибок 404](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) .</span><span class="sxs-lookup"><span data-stu-id="ccb4c-229">Check out [404 Error Pages, One More Time](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) for guidance on creating effective 404 error pages.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image19.png)](displaying-a-custom-error-page-cs/_static/image18.png)

<span data-ttu-id="ccb4c-230">**Рис. 7**. на странице настраиваемой ошибки 404 отображается более целевое сообщение, чем `Oops.aspx`</span><span class="sxs-lookup"><span data-stu-id="ccb4c-230">**Figure 7**: The Custom 404 Error Page Displays a More Targeted Message Than `Oops.aspx`</span></span>  
<span data-ttu-id="ccb4c-231">([Щелкните, чтобы просмотреть изображение с полным размером](displaying-a-custom-error-page-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="ccb4c-231">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image20.png))</span></span> 

<span data-ttu-id="ccb4c-232">Так как известно, что страница `404.aspx` достижима только тогда, когда пользователь выполняет запрос к странице, которая не была найдена, можно улучшить эту настраиваемую страницу ошибки, включив в нее функции, помогающие пользователю устранить эту ошибку конкретного типа.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-232">Because you know that the `404.aspx` page is only reached when the user makes a request for a page that was not found, you can enhance this custom error page to include functionality to help the user address this specific type of error.</span></span> <span data-ttu-id="ccb4c-233">Например, можно создать таблицу базы данных, которая сопоставляет известные неправильные URL-адреса с хорошими URL-адресами, а затем попросит `404.aspx` настраиваемой страницы ошибок выполнить запрос к этой таблице и предложить страницы, к которым пользователь может обратиться.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-233">For example, you could build a database table that maps known bad URLs to good URLs, and then have the `404.aspx` custom error page run a query against that table and suggest pages the user may be trying to reach.</span></span>

> [!NOTE]
> <span data-ttu-id="ccb4c-234">Страница настраиваемой ошибки отображается только при выполнении запроса к ресурсу, обрабатываемому ядром ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-234">The custom error page is only displayed when a request is made to a resource handled by the ASP.NET engine.</span></span> <span data-ttu-id="ccb4c-235">Как обсуждалось в [основных различиях между IIS и ASP.NET Development Serverным](core-differences-between-iis-and-the-asp-net-development-server-cs.md) руководством, веб-сервер может выполнять определенные запросы.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-235">As we discussed in the [Core Differences Between IIS and the ASP.NET Development Server](core-differences-between-iis-and-the-asp-net-development-server-cs.md) tutorial, the web server may handle certain requests itself.</span></span> <span data-ttu-id="ccb4c-236">По умолчанию веб-сервер IIS обрабатывает запросы на статическое содержимое, например изображения и HTML-файлы, без вызова подсистемы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-236">By default, the IIS web server processes requests for static content like images and HTML files without invoking the ASP.NET engine.</span></span> <span data-ttu-id="ccb4c-237">Следовательно, если пользователь запрашивает несуществующий файл изображения, он получит сообщение об ошибке по умолчанию 404 IIS, а не ASP. NET — настроенная страница ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-237">Consequently, if the user requests a non-existent image file they will get back IIS's default 404 error message rather than ASP.NET's configured error page.</span></span>

## <a name="summary"></a><span data-ttu-id="ccb4c-238">Сводка</span><span class="sxs-lookup"><span data-stu-id="ccb4c-238">Summary</span></span>

<span data-ttu-id="ccb4c-239">Когда в приложении ASP.NET возникает необработанное исключение, пользователь показывает одну из трех страниц ошибок: желтой экран сведений об исключении. Желтый экран ошибки времени выполнения. или настраиваемую страницу ошибки.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-239">When an unhandled exception occurs in an ASP.NET application, the user is shown one of three error pages: the Exception Details Yellow Screen of Death; the Runtime Error Yellow Screen of Death; or a custom error page.</span></span> <span data-ttu-id="ccb4c-240">Отображаемая страница ошибки зависит от конфигурации `<customErrors>` приложения и от того, посещает пользователь локально или удаленно.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-240">Which error page is displayed depends on the application's `<customErrors>` configuration and whether the user is visiting locally or remotely.</span></span> <span data-ttu-id="ccb4c-241">Поведение по умолчанию — показывать сведения об исключении ИСОД локальным посетителям, а ошибка времени выполнения ИСОД удаленным посетителям.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-241">The default behavior is to show the Exception Details YSOD to local visitors and the Runtime Error YSOD to remote visitors.</span></span>

<span data-ttu-id="ccb4c-242">Несмотря на то, что ошибка времени выполнения ИСОД скрывает потенциально конфиденциальную информацию об ошибках от пользователя, который посещает сайт, она нарушает внешний вид веб-узла и делает приложение ошибками.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-242">While the Runtime Error YSOD hides potentially sensitive error information from the user visiting the site, it breaks from your site's look and feel and makes your application look buggy.</span></span> <span data-ttu-id="ccb4c-243">Лучшим подходом является использование настраиваемой страницы ошибок, которая включает создание и проектирование пользовательской страницы ошибок и указание ее URL-адреса в атрибуте `defaultRedirect` раздела `<customErrors>`.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-243">A better approach is to use a custom error page, which entails creating and designing the custom error page and specifying its URL in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="ccb4c-244">Можно даже иметь несколько настраиваемых страниц ошибок для различных состояний ошибок HTTP.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-244">You can even have multiple custom error pages for different HTTP error statuses.</span></span>

<span data-ttu-id="ccb4c-245">Страница настраиваемой ошибки является первым шагом в комплексной стратегии обработки ошибок для веб-сайта в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-245">The custom error page is the first step in a comprehensive error handling strategy for a website in production.</span></span> <span data-ttu-id="ccb4c-246">Также важны важные шаги для разработчика ошибки и ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-246">Alerting the developer of the error and logging its details are also important steps.</span></span> <span data-ttu-id="ccb4c-247">В следующих трех руководствах рассматриваются методы уведомления об ошибках и ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="ccb4c-247">The next three tutorials explore techniques for error notification and logging.</span></span>

<span data-ttu-id="ccb4c-248">Поздравляем с программированием!</span><span class="sxs-lookup"><span data-stu-id="ccb4c-248">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="ccb4c-249">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="ccb4c-249">Further Reading</span></span>

<span data-ttu-id="ccb4c-250">Дополнительные сведения о разделах, обсуждаемых в этом руководстве, см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="ccb4c-250">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ccb4c-251">Страницы ошибок, еще один раз</span><span class="sxs-lookup"><span data-stu-id="ccb4c-251">Error Pages, One More Time</span></span>](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)
- [<span data-ttu-id="ccb4c-252">Правила разработки исключений</span><span class="sxs-lookup"><span data-stu-id="ccb4c-252">Design Guidelines for Exceptions</span></span>](https://msdn.microsoft.com/library/ms229014.aspx)
- [<span data-ttu-id="ccb4c-253">Понятные пользователю страницы ошибок</span><span class="sxs-lookup"><span data-stu-id="ccb4c-253">User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="ccb4c-254">Обработка и создание исключений</span><span class="sxs-lookup"><span data-stu-id="ccb4c-254">Handling and Throwing Exceptions</span></span>](https://msdn.microsoft.com/library/5b2yeyab.aspx)
- [<span data-ttu-id="ccb4c-255">Правильное использование настраиваемых страниц ошибок в ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ccb4c-255">Properly Using Custom Error Pages in ASP.NET</span></span>](http://professionalaspnet.com/archive/2007/09/30/Properly-Using-Custom-Error-Pages-in-ASP.NET.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="ccb4c-256">[Назад](strategies-for-database-development-and-deployment-cs.md)
> [Вперед](processing-unhandled-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ccb4c-256">[Previous](strategies-for-database-development-and-deployment-cs.md)
[Next](processing-unhandled-exceptions-cs.md)</span></span>
