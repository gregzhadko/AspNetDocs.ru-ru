---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/precompiling-your-website-vb
title: Предварительная компиляция веб-сайта (VB) | Документация Майкрософт
author: rick-anderson
description: 'Visual Studio предлагает разработчикам ASP.NET два типа проектов: проекты веб-приложений (Вапс) и проекты веб-сайтов (ВСПС). Одно из ключевых различий бетве...'
ms.author: riande
ms.date: 06/09/2009
ms.assetid: c285dc6f-a1c6-46e6-ac03-3830947f57e3
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/precompiling-your-website-vb
msc.type: authoredcontent
ms.openlocfilehash: 1a46870b73f95300ef5bc1f72dda74d7d62ab11f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74588389"
---
# <a name="precompiling-your-website-vb"></a>Предварительная компиляция веб-сайта (VB)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_15_VB.zip) или [скачать PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial15_Precompiling_vb.pdf)

> Visual Studio предлагает разработчикам ASP.NET два типа проектов: проекты веб-приложений (Вапс) и проекты веб-сайтов (ВСПС). Одно из ключевых различий между двумя типами проектов заключается в том, что в Вапс должен быть явно скомпилирован код перед развертыванием, тогда как код в WSP может быть автоматически скомпилирован на веб-сервере. Однако перед развертыванием WSP можно предварительно скомпилировать. В этом руководстве рассматриваются преимущества предварительной компиляции и показано, как выполнить предварительную компиляцию веб-сайта из Visual Studio и из командной строки.

## <a name="introduction"></a>Введение

Visual Studio предлагает разработчикам ASP.NET два разных типа проектов: проекты веб-приложений (WAP) и проекты веб-сайтов (WSP). Одно из ключевых различий между этими типами проектов заключается в том, что Вапс требует *явной компиляции* , тогда как ВСПС по умолчанию использует *автоматическую компиляцию*. С помощью Вапс вы компилируете код веб-приложения в одну сборку, которая создается в папке `Bin` веб-сайта. Развертывание влечет за собой копирование содержимого разметки (`.aspx.ascx`и `.master` файлов) в проект вместе со сборкой в папке `Bin`. сами файлы классов кода программной части не нужно развертывать. С другой стороны, развертывание ВСПС выполняется путем копирования страниц разметки и соответствующих классов кода программной части в рабочую среду. Классы кода программной части компилируются на веб-сервере по требованию.

> [!NOTE]
> Дополнительные сведения о различиях между моделями проектов, явной и автоматической компиляцией, а также о влиянии модели компиляции на развертывание см. в разделе "явная компиляция и автоматическая компиляция" в [учебнике *Определение файлов, которые необходимо развернуть* ](determining-what-files-need-to-be-deployed-vb.md) .

Параметр автоматической компиляции прост в использовании. Нет явного этапа компиляции, и необходимо развернуть только измененные файлы, в то время как явная компиляция требует развертывания измененных страниц разметки и только что скомпилированной сборки. Однако автоматическое развертывание имеет два возможных недостатка:

- Поскольку страницы должны автоматически компилироваться при первом посещении, может быть короткая, но заметная задержка при запросе страницы ASP.NET в первый раз после развертывания.
- Для автоматической компиляции требуется, чтобы на веб-сервере присутствовала и декларативная разметка, и исходный код. Это может быть непривлекательным вариантом, если вы планируете продавать веб-приложение клиентам, которые будут устанавливать его на своих веб-серверах.

Если одним из двух описанных выше недостатков являются беспроблемные прерывания, можно либо переключиться на модель WAP, либо *предварительно СКОМПИЛИРОВАТЬ* WSP перед развертыванием. В этом учебнике рассматриваются параметры предварительной компиляции, которые лучше всего подходят для размещенного веб-сайта, а также рассматривается процесс предварительной компиляции и развертывания предварительно скомпилированного веб-сайта.

## <a name="an-overview-of-aspnet-code-generation-and-compilation"></a>Обзор создания и компиляции кода ASP.NET

Прежде чем мы рассмотрим доступные варианты предварительной компиляции, давайте сначала поговорим о создании кода и компиляции, которая происходит при запросе страницы ASP.NET в первый раз с момента ее создания или последнего обновления. Как известно, ASP.NET страницы состоят из двух частей: декларативная разметка в файле `.aspx`; и часть исходного кода, как правило, в отдельном файле класса кода программной части (`.aspx.vb`). Действия, выполняемые средой выполнения при запросе страницы ASP.NET, зависят от модели компиляции приложения.

При использовании Вапс исходный код страниц должен быть явно скомпилирован в одну сборку перед развертыванием. Во время развертывания эта сборка и различные страницы разметки копируются в рабочую среду. При поступлении запроса на веб-сервер для страницы ASP.NET среда выполнения создает экземпляр класса кода программной части страницы и вызывает его метод `ProcessRequest`, который запускает жизненный цикл страницы и, в конечном счете, создает содержимое страницы, которое возвращается запрашивающему. Среда выполнения может работать с классом кода программной части страницы ASP.NET, так как класс кода программной части уже был скомпилирован в сборку перед развертыванием.

При использовании ВСПС и автоматической компиляции нет явного этапа компиляции до развертывания. Вместо этого развертывание включает в рабочую среду копирование как декларативного, так и содержимого исходного кода. Когда запрос поступает на веб-сервер для страницы ASP.NET в первый раз с момента создания или последнего обновления страницы, среда выполнения должна сначала скомпилировать класс кода программной части в сборку. Эта скомпилированная сборка сохраняется в папке `%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files`, хотя расположение этой папки можно настроить с помощью элемента `<pages>` в `Web.config`. Так как сборка сохраняется на диске, ее не нужно перекомпилировать при последующих запросах к той же странице.

> [!NOTE]
> Как и вы ожидаете, при первом запросе страницы (или в первый раз с момента ее изменения) на сайте, использующем автоматическую компиляцию, возникает небольшая задержка, так как в течение некоторого времени сервер компилирует код страницы и сохраняет полученную сборку в свободного.

Вкратце, при явной компиляции необходимо скомпилировать исходный код веб-сайта перед развертыванием, сохранив среду выполнения от необходимости выполнения этого шага. При автоматической компиляции среда выполнения обрабатывает компиляцию исходного кода страниц, но с небольшой стоимостью инициализации при первом посещении страницы с момента ее создания или последнего обновления.

Но как насчет декларативной части страниц ASP.NET (файл `.aspx`)? Очевидно, что существует связь между файлами `.aspx` и кодом в своих классах кода программной части, так как веб-элементы управления, определенные в декларативной разметке, доступны в коде. Также очевидно, что содержимое в файлах `.aspx` существенно влияет на визуализированную разметку, созданную страницей. Итак, как среда выполнения работает с синтаксисом Text, HTML и Web Control, определенным в файле `.aspx` для создания отображаемого содержимого запрошенной страницы?

Я не хочу слишком затянули на детали реализации нижнего уровня, которые различаются между Вапс и ВСПС, но в двух словах среда выполнения автоматически создает файл класса, содержащий различные веб-элементы управления в качестве защищенных членов и методов. Этот созданный файл реализуется как *разделяемый класс* для соответствующего класса кода программной части. ([Разделяемые классы](http://www.dotnet-guide.com/partialclasses.html) позволяют распределять содержимое одного класса по нескольким файлам.) Таким образом, класс кода программной части определяется в двух местах: в создаваемом файле `.aspx.vb` и в этом автоматически создаваемом классе, созданном средой выполнения. Автоматически созданный класс хранится в папке `%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files`.

Важно отметить, что для отображения страницы ASP.NET в среде выполнения и ее декларативный и исходный код должны быть скомпилированы в сборку. При использовании Вапс исходный код явно компилируется в сборку перед развертыванием, но декларативная разметка по-прежнему должна быть преобразована в код и скомпилирована средой выполнения на веб-сервере. При использовании ВСПС с автоматической компиляцией как исходный код, так и декларативная разметка должны быть скомпилированы веб-сервером.

Можно использовать явную компиляцию с моделью WSP. Можно явно скомпилировать часть исходного кода, как в модели WAP. Более того, можно также скомпилировать декларативную разметку.

## <a name="precompilation-options"></a>Параметры предварительной компиляции

.NET Framework поставляется со [средством компиляции ASP.NET (`aspnet_compiler.exe`)](https://msdn.microsoft.com/library/ms229863.aspx) , позволяющим компилировать исходный код (и даже содержимое) приложения ASP.NET, созданного с помощью модели WSP. Это средство выпущено с .NET Framework версии 2,0 и находится в папке `%WINDIR%\Microsoft.NET\Framework\v2.0.50727`. его можно использовать из командной строки или запуска из Visual Studio с помощью параметра опубликовать веб-сайт в меню Сборка.

Средство компиляции предоставляет две общие формы компиляции: Предварительная компиляция на месте и предварительная компиляция для развертывания. При предварительной компиляции на месте запустите средство `aspnet_compiler.exe` из командной строки и укажите путь к виртуальному каталогу или физическому пути веб-сайта, расположенного на компьютере. Затем средство компиляции компилирует каждую страницу ASP.NET в проекте, сохраняя скомпилированную версию в папке `%WINDIR%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files`, как если бы страницы были посещены в первый раз из браузера. Предварительная компиляция на месте может ускорить первый запрос, сделанный на вновь развернутых страницах ASP.NET на сайте, так как он упрощает выполнение этого шага средой выполнения. Однако предварительная компиляция на месте не полезна для большинства размещенных веб-сайтов, так как для этого требуется, чтобы вы могли запускать программы из командной строки веб-сервера. В общих средах размещения этот уровень доступа запрещен.

> [!NOTE]
> Дополнительные сведения о предварительной компиляции на месте см. в [следующих руководствах: Предварительная компиляция веб-сайтов ASP.NET](https://msdn.microsoft.com/library/ms227972.aspx) и [Предварительная компиляция в ASP.NET 2,0](http://www.odetocode.com/Articles/417.aspx).

Вместо того чтобы компилировать страницы веб-сайта в папку `Temporary ASP.NET Files`, предварительная компиляция для развертывания компилирует страницы в нужный каталог и в формате, который можно развернуть в рабочей среде.

Существует две разновидности предварительной компиляции для развертывания, которые мы рассмотрим в этом руководстве: Предварительная компиляция с обновляемым пользовательским интерфейсом и предварительная компиляция с помощью необновляемого пользовательского интерфейса. Предварительная компиляция с обновляемым пользовательским интерфейсом оставляет декларативную разметку в файлах `.aspx`, `.ascx`и `.master`, тем самым позволяя разработчикам просматривать и при необходимости изменять декларативную разметку на рабочем сервере. Предварительная компиляция с необновляемым пользовательским интерфейсом создает `.aspx` страницы, которые являются недействительными для любого содержимого и удаляют `.ascx` и `.master` файлы, тем самым скрывая декларативную разметку и запрещая разработчику изменять ее из рабочей среды.

### <a name="precompiling-for-deployment-with-an-updatable-user-interface"></a>Предварительная компиляция для развертывания с обновляемым пользовательским интерфейсом

Лучший способ понять предварительную компиляцию для развертывания — увидеть пример в действии. Выполним предварительную компиляцию файла WSP рецензий книги для развертывания с помощью обновляемого пользовательского интерфейса. Средство компиляции ASP.NET можно вызвать из меню сборки Visual Studio или из командной строки. В этом разделе рассматривается использование средства в Visual Studio. в разделе «Предварительная компиляция из командной строки» рассматривается запуск средства компилятора из командной строки.

Откройте в Visual Studio веб-узел проверки книги, перейдите в меню Сборка и выберите пункт Опубликовать веб-сайт. Откроется диалоговое окно Публикация веб-сайта (см. **рис. 1**), где можно указать целевое расположение, независимо от того, является ли пользовательский интерфейс предкомпилированного сайта обновляемым, и другими параметрами средства компилятора. Целевое расположение может быть удаленным веб-сервером или сервером FTP, но для этого нужно выбрать папку на жестком диске компьютера. Так как требуется предварительная компиляция сайта с обновляемым пользовательским интерфейсом, установите флажок "разрешить обновление этого предварительно скомпилированного сайта" и нажмите кнопку "ОК".

[![](precompiling-your-website-vb/_static/image2.png)](precompiling-your-website-vb/_static/image1.png)

**Рис. 1**. средство компиляции ASP.NET будет выполнять предварительную компиляцию веб-сайта в указанное целевое расположение  
 ([Щелкните, чтобы просмотреть изображение с полным размером](precompiling-your-website-vb/_static/image3.png))

> [!NOTE]
> Параметр Опубликовать веб-сайт в меню Сборка недоступен в Visual Web Developer. При использовании Visual Web Developer необходимо использовать версию командной строки средства компиляции ASP.NET, которая рассматривается в разделе «Предварительная компиляция из командной строки».

После предварительной компиляции веб-сайта перейдите к целевому расположению, введенному в диалоговом окне "опубликовать веб-сайт". Потратьте время на сравнение содержимого этой папки с содержимым вашего веб-сайта. На **рис. 2** показана папка веб-сайта рецензий книги. Обратите внимание, что он содержит файлы `.aspx` и `.aspx.cs`. Кроме того, обратите внимание, что `Bin` Каталог включает только один файл, `Elmah.dll`, который мы добавили в [предыдущем руководстве](logging-error-details-with-elmah-vb.md) .

[![](precompiling-your-website-vb/_static/image5.png)](precompiling-your-website-vb/_static/image4.png)

**Рис. 2**. каталог проекта содержит файлы `.aspx` и `.aspx.cs`; `Bin`ная папка включает только `Elmah.dll`  
 ([Щелкните, чтобы просмотреть изображение с полным размером](precompiling-your-website-vb/_static/image6.png))

На **рис. 3** показана Целевая папка расположения, содержимое которой было создано средством компиляции ASP.NET. Эта папка не содержит файлов кода программной части. Кроме того, каталог `Bin` содержит несколько сборок и два `.compiled` файлов в дополнение к сборке `Elmah.dll`.

[![](precompiling-your-website-vb/_static/image8.png)](precompiling-your-website-vb/_static/image7.png)

**Рис. 3**. Целевая папка расположения содержит файлы для развертывания  
 ([Щелкните, чтобы просмотреть изображение с полным размером](precompiling-your-website-vb/_static/image9.png))

В отличие от явной компиляции в Вапс, предварительная компиляция для процесса развертывания не создает одну сборку для всего сайта. Вместо этого он объединяет несколько страниц в каждую сборку. Он также компилирует файл `Global.asax` (при его наличии) в собственную сборку, а также любые классы в папке `App_Code`. Файлы, содержащие декларативную разметку для веб-страниц ASP.NET, пользовательских элементов управления и главных страниц (`.aspx`, `.ascx`и `.master` файлов соответственно), копируются "как есть" в каталог целевого расположения. Аналогичным образом файл `Web.config` копируется прямо на, наряду со статическими файлами, такими как изображения, классы CSS и PDF-файлы. Более формальное описание того, как средство компиляции обрабатывает различные типы файлов, см. в разделе [Обработка файлов во время предварительной компиляции ASP.NET](https://msdn.microsoft.com/library/e22s60h9.aspx).

> [!NOTE]
> Вы можете указать средству компиляции создать одну сборку для каждой ASP.NET страницы, пользовательского элемента управления или главной страницы, установив флажок "использованные фиксированное именование и одностраничные сборки" в диалоговом окне "опубликовать веб-сайт". Каждая страница ASP.NET, скомпилированная в собственную сборку, позволяет более точно контролировать развертывание. Например, если вы обновили одну веб-страницу ASP.NET и хотите развернуть это изменение, необходимо развернуть только файл `.aspx` этой страницы и связанную сборку в рабочей среде. Дополнительные сведения см. в подразделах [Создание фиксированных имен с помощью средства компиляции ASP.NET](https://msdn.microsoft.com/library/ms228040.aspx) .

Каталог целевого расположения также содержит файл, который не был частью предкомпилированного веб-проекта, а именно `PrecompiledApp.config`. Этот файл информирует среду выполнения ASP.NET о том, что приложение было предварительно скомпилировано, и является ли оно предварительно скомпилированным с помощью обновляемого или пошагового пользовательского интерфейса.

Наконец, создайте один из файлов `.aspx` в целевом расположении с помощью Visual Studio или текстового редактора. При предварительной компиляции для развертывания с обновляемым пользовательским интерфейсом страницы ASP.NET в целевом каталоге расположения содержат точно ту же разметку, что и соответствующие файлы на веб-сайте.

### <a name="precompiling-for-deployment-with-a-non-updatable-user-interface"></a>Предварительная компиляция для развертывания с необновляемым пользовательским интерфейсом

Средство компилятора ASP.NET также можно использовать для предварительной компиляции сайта для развертывания с необновляемым пользовательским интерфейсом. Предварительная компиляция сайта с необновляемым пользовательским интерфейсом работает во многом подобно предварительной компиляции с обновляемым пользовательским интерфейсом, ключевое различие заключается в том, что страницы ASP.NET, пользовательские элементы управления и главные страницы в целевом каталоге удаляются из их разметки. Чтобы выполнить предварительную компиляцию веб-сайта для развертывания с необновляемым пользовательским интерфейсом, выберите параметр Опубликовать веб-сайт в меню Сборка, но снимите флажок "разрешить обновление этого предварительно скомпилированного сайта" (см. **рис. 4**).

[![](precompiling-your-website-vb/_static/image11.png)](precompiling-your-website-vb/_static/image10.png)

**Рис. 4**. Снимите флажок "разрешить обновление этого предкомпилированного сайта" для предварительной компиляции с помощью необновляемого пользовательского интерфейса  
 ([Щелкните, чтобы просмотреть изображение с полным размером](precompiling-your-website-vb/_static/image12.png))

На **рис. 5** показана папка с целевым расположением после предварительной компиляции с помощью необновляемого пользовательского интерфейса.

[![](precompiling-your-website-vb/_static/image14.png)](precompiling-your-website-vb/_static/image13.png)

**Рис. 5**. Целевая папка расположения для развертывания с необновляемым пользовательским интерфейсом  
 ([Щелкните, чтобы просмотреть изображение с полным размером](precompiling-your-website-vb/_static/image15.png))

Сравните **рис. 3** и **рис. 5**. Хотя две папки могут выглядеть одинаково, обратите внимание, что в необновляемой папке пользовательского интерфейса отсутствует эталонная страница `Site.master`. Хотя на **рис. 5** представлены различные страницы ASP.NET, при просмотре содержимого этих файлов вы увидите, что они были удалены из декларативной разметки и заменены на текст заполнителя: "это файл маркера, созданный средством предварительной компиляции, и его не следует удалять!"

[![](precompiling-your-website-vb/_static/image17.png)](precompiling-your-website-vb/_static/image16.png)

**Рис. 5**. декларативная разметка была удалена со страниц ASP.NET

`Bin` папки на **рис. 3** и **5** значительно отличаются. Помимо сборок, папка `Bin` на **рис. 5** включает файл `.compiled` для каждой ASP.NET страницы, пользовательского элемента управления и главной страницы.

Предварительная компиляция сайта с необновляемым пользовательским интерфейсом полезна в ситуациях, когда не требуется, чтобы содержимое страниц ASP.NET было изменено пользователем или компанией, устанавливающими веб-сайт в рабочей среде. Если вы создаете веб-приложение ASP.NET, которое продаете клиентам для установки на своих собственных веб-серверах, вам может потребоваться убедиться, что они не изменяют внешний вид веб-узла, напрямую редактируя `.aspx` страницы, которые вы их отправите. Предоставляя предварительную компиляцию веб-сайта с необновляемым пользовательским интерфейсом, вы подаете заполнитель `.aspx` страницы в процессе установки, тем самым запрещая клиентам изучать или изменять содержимое.

### <a name="precompiling-from-the-command-line"></a>Предварительная компиляция из командной строки

В фоновом режиме в диалоговом окне "Публикация веб-сайта" в Visual Studio вызывается средство компиляции ASP.NET (`aspnet_compiler.exe`) для предварительной компиляции веб-сайта. Кроме того, это средство можно вызвать из командной строки. На самом деле, если вы используете Visual Web Developer, необходимо запустить средство компилятора из командной строки, так как меню сборки Visual Web Developer не включает параметр Опубликовать веб-сайт.

Чтобы использовать средство компилятора из командной строки, начните с удаления в командной строке и перехода к каталогу Framework `%WINDIR%\Microsoft.NET\Framework\v2.0.50727`. Затем введите следующую инструкцию в командную строку:

`aspnet_compiler -p "physical_path_to_app" -v / -f -u "target_location_folder"`

Приведенная выше команда запускает средство компилятора ASP.NET (`aspnet_compiler.exe`) и, используя параметр `-p`, предписывает ему выполнить предварительную компиляцию корневого веб-сайта по *физическому пути\_\_в\_приложение*; Это значение будет представлять собой нечто вроде `C:\MySites\BookReviews`и должно быть заключено в кавычки.

Параметр `-v` указывает виртуальный каталог сайта. Если ваш сайт зарегистрирован в метабазе IIS в качестве веб-сайта по умолчанию, можно опустить параметр `-p` и просто указать виртуальный каталог приложения. Если вы используете параметр `-p`, значение продолжения параметра `-v` указывает на корень веб-сайта и используется для разрешения ссылок корневого приложения. Например, если указать значение `-v /MySite` то ссылки в приложении на `~/path/file` будут разрешаться как `~/MySite/path/file`. Так как веб-сайт рецензий книги находится в корневом каталоге компании, в которой размещен веб-узел, я использовал параметр `-v /`.

Параметр `-f`, если он присутствует, предписывает средству компиляции перезаписывать *расположение целевого\_\_каталог папки* , если он уже существует. Если опустить параметр `-f` и папка с целевым расположением уже существует, средство компиляции завершится с ошибкой: "ошибка АСПРУНТИМЕ: целевой каталог не пуст. Удалите его вручную или выберите другой целевой объект ".

Параметр `-u`, если он имеется, информирует средство о создании обновляемого пользовательского интерфейса. Пропустите этот параметр для предварительной компиляции сайта с необновляемым пользовательским интерфейсом.

Наконец, *целевой\_расположение\_папке* является физическим путем к целевому каталогу расположения. Это значение будет представлять собой нечто вроде `C:\MySites\Output\BookReviews`и должно быть заключено в кавычки.

## <a name="deploying-the-precompiled-website"></a>Развертывание предварительно скомпилированного веб-сайта

На этом этапе мы рассмотрели, как использовать средство компиляции ASP.NET для предварительной компиляции веб-сайта с использованием как обновляемых, так и необновляемых параметров пользовательского интерфейса. Однако в нашем примере мы создали предварительно скомпилированный веб-сайт в локальную папку, а не в рабочую среду. Хорошая новость состоит в том, что развертывание предварительно скомпилированного веб-сайта выполняется очень просто, и его можно выполнить с помощью Visual Studio или другого механизма копирования файлов, например из автономного FTP-клиента.

В диалоговом окне Опубликовать веб-сайт (на **рис. 1**) имеется параметр целевой путь, который указывает, куда копируются файлы предварительно скомпилированных веб-сайтов. Это расположение может быть удаленным веб-сервером или сервером FTP. При вводе удаленного сервера в это текстовое поле выполняется предварительная компиляция и развертывание веб-сайта на указанном сервере за один шаг. Кроме того, можно выполнить предварительную компиляцию веб-сайта в локальную папку, а затем вручную скопировать содержимое этой папки в рабочую среду с помощью FTP или какого-либо другого подхода.

Автоматическое развертывание предварительно скомпилированного веб-сайта с помощью диалогового окна «Публикация веб-сайта» в Visual Studio полезно для простых сайтов, в которых нет различий в конфигурации между средами разработки и рабочей средой. Однако, как отмечалось в [ *общих различиях конфигураций* в учебнике по разработке и производству](common-configuration-differences-between-development-and-production-vb.md) , существует нередкое существование таких различий. Например, веб-приложение "рецензии книги" использует в рабочей среде другую базу данных, чем в среде разработки. Когда Visual Studio публикует веб-сайт на удаленном сервере, он частично копирует сведения о файле конфигурации в среде разработки.

Для сайтов с различиями в конфигурации между средами разработки и рабочей средой лучше выполнить предварительную компиляцию сайта в локальный каталог, скопировать файлы конфигурации, относящиеся к рабочей среде, а затем скопировать содержимое предкомпилированного вывода в Рабочий.

Сведения о копировании файлов из среды разработки в рабочую среду см. в разделе [*Развертывание веб-сайта с помощью FTP-клиента*](deploying-your-site-using-an-ftp-client-vb.md) и [*Развертывание веб-сайта с помощью учебников по Visual Studio*](determining-what-files-need-to-be-deployed-vb.md) .

## <a name="summary"></a>Сводка

ASP.NET поддерживает два режима компиляции: автоматический и явный. Как обсуждалось в предыдущих руководствах, проекты веб-приложений (Вапс) используют явную компиляцию, тогда как проекты веб-сайтов (ВСПС) по умолчанию используют автоматическую компиляцию. Однако можно явно скомпилировать WSP перед развертыванием с помощью средства компиляции ASP.NET.

Это руководство посвящено предварительной компиляции средства компиляции для поддержки развертывания. При предварительной компиляции для развертывания средство компиляции создает папку целевого расположения, компилирует указанный исходный код веб-приложения и копирует эти скомпилированные сборки и файлы содержимого в целевую папку расположения. Средство компиляции можно настроить для создания обновляемого или необновляемого пользовательского интерфейса. При предварительной компиляции с параметром пользовательского интерфейса, не поддерживающим обновление, декларативная разметка в файлах содержимого удаляется. В двух словах, предварительная компиляция позволяет развернуть приложение на основе проекта веб-сайта, не включая файлы исходного кода, а декларативная разметка будет удалена при необходимости.

Поздравляем с программированием!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения о разделах, обсуждаемых в этом руководстве, см. в следующих ресурсах:

- [Предварительная компиляция веб-сайта ASP.NET](https://msdn.microsoft.com/library/ms228015.aspx)
- [CodeBehind и компиляция в ASP.NET 2,0](https://msdn.microsoft.com/magazine/cc163675.aspx)
- [Предварительная компиляция в ASP.NET](http://www.odetocode.com/Articles/417.aspx)
- [Параметры предкомпилированного сайта в ASP.NET](http://www.dotnetperls.com/precompiled)

> [!div class="step-by-step"]
> [Назад](logging-error-details-with-elmah-vb.md)
> [Вперед](users-and-roles-on-the-production-website-vb.md)
