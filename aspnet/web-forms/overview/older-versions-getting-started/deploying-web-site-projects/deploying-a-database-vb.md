---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-vb
title: Развертывание базы данных (VB) | Документация Майкрософт
author: rick-anderson
description: Развертывание веб-приложения ASP.NET влечет за собой получение необходимых файлов и ресурсов из среды разработки в рабочую среду. Для Da...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 96ac3e69-04c7-4917-ad06-5f8968c3fbf1
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 8221025bec06e052016070f74deabb3e6d936045
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78455142"
---
# <a name="deploying-a-database-vb"></a><span data-ttu-id="080f5-104">Развертывание базы данных (VB)</span><span class="sxs-lookup"><span data-stu-id="080f5-104">Deploying a Database (VB)</span></span>

<span data-ttu-id="080f5-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="080f5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="080f5-106">[Скачать код](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_VB.zip) или [скачать PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="080f5-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_vb.pdf)</span></span>

> <span data-ttu-id="080f5-107">Развертывание веб-приложения ASP.NET влечет за собой получение необходимых файлов и ресурсов из среды разработки в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="080f5-108">Для веб-приложений, управляемых данными, включает схему и данные базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="080f5-109">Этот учебник является первым в серии, в которой рассматриваются шаги, необходимые для успешного развертывания базы данных из среды разработки в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>

### <a name="introduction"></a><span data-ttu-id="080f5-110">Введение</span><span class="sxs-lookup"><span data-stu-id="080f5-110">Introduction</span></span>

<span data-ttu-id="080f5-111">Развертывание веб-приложения ASP.NET влечет за собой получение необходимых файлов и ресурсов из среды разработки в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="080f5-112">В течение прошлых шести учебных курсов мы рассматривали развертывание простого веб-приложения для рецензирования книги.</span><span class="sxs-lookup"><span data-stu-id="080f5-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="080f5-113">Этот демонстрационный веб-узел состоит из ряда ресурсов на стороне сервера — ASP.NET страниц, файлов конфигурации, файла `Web.sitemap` и т. д. Вместе с ресурсами на стороне клиента, например с изображениями и CSS-файлами.</span><span class="sxs-lookup"><span data-stu-id="080f5-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="080f5-114">Но как насчет веб-приложений, управляемых данными?</span><span class="sxs-lookup"><span data-stu-id="080f5-114">But what about data-driven web applications?</span></span> <span data-ttu-id="080f5-115">Какие дополнительные действия необходимо предпринять для развертывания веб-приложения, использующего базу данных?</span><span class="sxs-lookup"><span data-stu-id="080f5-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="080f5-116">В следующих нескольких учебных курсах будут рассмотрены действия, необходимые для развертывания управляемого данными веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="080f5-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="080f5-117">Этот учебник начинается с изучения того, как получить схему базы данных и содержимое из среды разработки в рабочую среду, а в следующем руководстве рассматриваются изменения, которые необходимо внести.</span><span class="sxs-lookup"><span data-stu-id="080f5-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="080f5-118">Далее мы рассмотрим проблемы развертывания базы данных, в которой используется Службы приложений (членство, роли, профиль и т. д.).</span><span class="sxs-lookup"><span data-stu-id="080f5-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="080f5-119">Изучение обновленного веб-приложения "Рецензирование книги"</span><span class="sxs-lookup"><span data-stu-id="080f5-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="080f5-120">Чтобы продемонстрировать развертывание управляемого данными веб-приложения, я обновил веб-приложение "Рецензирование книги" с простого статического веб-сайта на основе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="080f5-121">Как и ранее, в этом руководстве есть две версии приложения: одна использует модель проекта веб-приложения, а другая использует модель проекта веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="080f5-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="080f5-122">В обновленном веб-приложении для рецензирования книги используется база данных [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) , которая хранится в папке `App_Data` сайта (`~/App_Data/Reviews.mdf`).</span><span class="sxs-lookup"><span data-stu-id="080f5-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="080f5-123">Если на компьютере установлено SQL Server 2008, демонстрационная версия должна работать без ошибок.</span><span class="sxs-lookup"><span data-stu-id="080f5-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="080f5-124">Если у вас более старая версия SQL Server можно либо установить бесплатную SQL Server 2008 Express Edition, либо воспользоваться скриптами базы данных, доступными в этом руководстве по скачиванию, чтобы создать базу данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="080f5-125">База данных `Reviews.mdf` содержит четыре таблицы:</span><span class="sxs-lookup"><span data-stu-id="080f5-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="080f5-126">`Genres` — включает запись для каждого жанра, например технологии, вымышления и бизнеса.</span><span class="sxs-lookup"><span data-stu-id="080f5-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="080f5-127">`Books` — включает запись для каждой проверки со столбцами, такими как `Title`, `GenreId`, `ReviewDate`и `Review`.</span><span class="sxs-lookup"><span data-stu-id="080f5-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="080f5-128">`Authors` — содержит сведения о каждом авторе, который участвовал в рецензированном бюллетене.</span><span class="sxs-lookup"><span data-stu-id="080f5-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="080f5-129">`BooksAuthors` Таблица соединений типа «многие ко многим», указывающая, какие авторы записали книги.</span><span class="sxs-lookup"><span data-stu-id="080f5-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>

<span data-ttu-id="080f5-130">На рис. 1 показана схема ER этих четырех таблиц.</span><span class="sxs-lookup"><span data-stu-id="080f5-130">Figure 1 shows an ER diagram of these four tables.</span></span>

<span data-ttu-id="080f5-131">[![база данных веб-приложений с проверкой книг состоит из четырех таблиц](deploying-a-database-vb/_static/image2.jpg)](deploying-a-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-vb/_static/image2.jpg)](deploying-a-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="080f5-132">**Рис. 1**. база данных веб-приложений с проверкой книг состоит из четырех таблиц ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="080f5-133">В предыдущей версии веб-сайта рецензирования книги была отдельная страница ASP.NET для каждой книги.</span><span class="sxs-lookup"><span data-stu-id="080f5-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="080f5-134">Например, страница с именем `~/Tech/TYASP35.aspx`, содержащая проверку на *ASP.NET 3,5 за 24 часа*.</span><span class="sxs-lookup"><span data-stu-id="080f5-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="080f5-135">Эта новая версия веб-сайта, управляемая данными, содержит обзоры, сохраненные в базе данных, и одну ASP.NET страницу, проверьте. aspx? ID =*букид*, которая отображает проверку для указанной книги.</span><span class="sxs-lookup"><span data-stu-id="080f5-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="080f5-136">Аналогично, на странице жанр. aspx? ID =*genreId* перечислены проверенные книги в указанном жанре.</span><span class="sxs-lookup"><span data-stu-id="080f5-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="080f5-137">На рисунках 2 и 3 показаны `Genre.aspx` и `Review.aspx` страниц в действии.</span><span class="sxs-lookup"><span data-stu-id="080f5-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="080f5-138">Запишите URL-адрес в адресной строке для каждой страницы.</span><span class="sxs-lookup"><span data-stu-id="080f5-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="080f5-139">На рис. 2 он является жанром. aspx? ID = 85d164ba-1123-4c47-82A0-c8ec75de7e0e.</span><span class="sxs-lookup"><span data-stu-id="080f5-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="080f5-140">Так как 85d164ba-1123-4c47-82A0-c8ec75de7e0e — это `GenreId`ное значение для жанра технологии, заголовок Pages считывает «Отзывы по технологиям», а маркированный список перечисляет эти проверки на сайте, которые попадают под этот жанр.</span><span class="sxs-lookup"><span data-stu-id="080f5-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>

<span data-ttu-id="080f5-141">[![странице с жанром технологии](deploying-a-database-vb/_static/image5.jpg)](deploying-a-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-141">[![The Technology Genre Page](deploying-a-database-vb/_static/image5.jpg)](deploying-a-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="080f5-142">**Рис. 2**. страница «жанр технологии» ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="080f5-143">[![обзор для обучения ASP.NET 3,5 за 24 часа](deploying-a-database-vb/_static/image8.jpg)](deploying-a-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-vb/_static/image8.jpg)](deploying-a-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="080f5-144">**Рис. 3**. проверка на *ASP.NET 3,5 за 24 часа* ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-vb/_static/image9.jpg))</span></span>

<span data-ttu-id="080f5-145">В веб-приложение Books views также входит раздел Администрирование, в котором администраторы могут добавлять, изменять и удалять жанры, обзоры и сведения об авторе.</span><span class="sxs-lookup"><span data-stu-id="080f5-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="080f5-146">Сейчас любой посетитель может получить доступ к разделу Администрирование.</span><span class="sxs-lookup"><span data-stu-id="080f5-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="080f5-147">В следующем учебном курсе мы добавим поддержку учетных записей пользователей и разрешив только разрешенных пользователей на страницах администрирования.</span><span class="sxs-lookup"><span data-stu-id="080f5-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="080f5-148">Если вы загрузили приложение для рецензирования книги, помните, что его целью является демонстрация развертывания приложения, управляемого данными.</span><span class="sxs-lookup"><span data-stu-id="080f5-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="080f5-149">В нем не приведутся рекомендации по проектированию приложений.</span><span class="sxs-lookup"><span data-stu-id="080f5-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="080f5-150">Например, не существует отдельного уровня доступа к данным (DAL); страницы ASP.NET напрямую взаимодействуют с базой данных с помощью элемента управления SqlDataSource или кода ADO.NET в своих классах кода программной части.</span><span class="sxs-lookup"><span data-stu-id="080f5-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="080f5-151">Более подробные сведения о создании приложений, управляемых данными, с использованием многоуровневой архитектуры см. в статье [ *Работа с учебниками по работе с данными* ](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="080f5-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="080f5-152">Базы данных в разработке и рабочей среде</span><span class="sxs-lookup"><span data-stu-id="080f5-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="080f5-153">При запуске разработки на управляемом данными веб-приложении необходимо указать строку подключения к базе данных, которая предоставляет сведения о приложении по подключению к базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="080f5-154">Эта строка подключения указывает, помимо прочего, сервер базы данных, имя базы данных и сведения о безопасности.</span><span class="sxs-lookup"><span data-stu-id="080f5-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="080f5-155">Чаще всего база данных, используемая приложением во время разработки, отличается от базы данных, используемой в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="080f5-156">Существует множество преимуществ использования разных баз данных для разработки и рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="080f5-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="080f5-157">Наличие другой базы данных в разработке означает, что вам не нужно беспокоиться о случайном изменении или удалении динамических данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="080f5-158">Он также позволяет добавлять фиктивные тестовые данные или вносить критические изменения в модель данных, не заботясь о влиянии на приложение в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="080f5-159">Недостаток базы данных в средах разработки и рабочей среде заключается в том, что при развертывании базы данных и внесении соответствующих изменений в схему или данные базы данных также должны быть развернуты.</span><span class="sxs-lookup"><span data-stu-id="080f5-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="080f5-160">До первого развертывания существует только один экземпляр базы данных, и этот экземпляр находится в среде разработки.</span><span class="sxs-lookup"><span data-stu-id="080f5-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="080f5-161">При первом развертывании приложения в рабочей среде необходимо не только копировать необходимые серверные и клиентские файлы на стороне сервера, но и копировать базу данных из среды разработки в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="080f5-162">Именно здесь мы сейчас работаем с веб-приложением для рецензирования книги — база данных находится в папке `App_Data` в нашей среде разработки, но еще не была передана в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="080f5-163">После развертывания приложения существует две копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="080f5-164">По мере разработки приложения могут добавляться новые функции, требующие изменения модели данных (например, добавление новых столбцов в существующие таблицы, внесение изменений в существующие столбцы, добавление новых таблиц и т. д.).</span><span class="sxs-lookup"><span data-stu-id="080f5-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="080f5-165">При следующем развертывании веб-приложения изменения, примененные к базе данных в среде разработки с момента последнего развертывания, должны быть применены к рабочей базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="080f5-166">Некоторые стратегии управления этим процессом обсуждаются в следующем учебном курсе.</span><span class="sxs-lookup"><span data-stu-id="080f5-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="080f5-167">В этом учебнике рассматривается развертывание всей базы данных из среды разработки в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="080f5-168">Развертывание базы данных в рабочей среде</span><span class="sxs-lookup"><span data-stu-id="080f5-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="080f5-169">В оставшейся части этого руководства рассматривается развертывание базы данных из среды разработки в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="080f5-170">При необходимости убедитесь, что учетная запись с поставщиком веб-узла включает Microsoft SQL Server поддержку базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="080f5-171">Кроме того, необходимо иметь некоторую информацию, а именно имя сервера базы данных, имя базы данных и имя пользователя и пароль, используемые для подключения к базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="080f5-172">Как отмечалось ранее в этом учебнике, база данных веб-сайта проверки книги является базой данных SQL Server 2008 Express Edition, хранящейся в папке `App_Data`.</span><span class="sxs-lookup"><span data-stu-id="080f5-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="080f5-173">Это может привести к попричине того, что развертывание такой базы данных будет таким же простым, как копирование папки `App_Data` из среды разработки в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="080f5-174">Однако большинство поставщиков веб-узлов не поддерживают размещение баз данных в папке `App_Data` по соображениям безопасности.</span><span class="sxs-lookup"><span data-stu-id="080f5-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="080f5-175">Вместо этого веб-узлы предоставляют учетную запись на SQL Server сервере базы данных в своей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="080f5-176">Для развертывания базы данных из среды разработки в рабочей среде требуется, чтобы база данных была зарегистрирована на сервере базы данных веб-узлов.</span><span class="sxs-lookup"><span data-stu-id="080f5-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="080f5-177">Итак, как вы получаете базу данных из среды разработки в рабочую среду?</span><span class="sxs-lookup"><span data-stu-id="080f5-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="080f5-178">Это можно сделать несколькими способами в зависимости от того, какие службы предлагает веб-узел.</span><span class="sxs-lookup"><span data-stu-id="080f5-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="080f5-179">С помощью некоторых узлов, таких как DiscountASP.NET, можно выполнить FTP-архивацию базы данных или файла фактического `.mdf` на веб-сайт, а затем в панели управления восстановить файл резервной копии или присоединить `.mdf`ный файл к серверу базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="080f5-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="080f5-180">В таких средствах для развертывания базы данных достаточно просто скопировать папку `App_Data` в рабочую среду, а затем подключить ее через панель управления.</span><span class="sxs-lookup"><span data-stu-id="080f5-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="080f5-181">Это, возможно, самый простой и быстрый способ публикации базы данных в первый раз.</span><span class="sxs-lookup"><span data-stu-id="080f5-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="080f5-182">Другой подход заключается в использовании мастера публикации баз данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="080f5-183">Мастер публикации баз данных — это классическое приложение Windows, которое создает команды SQL для создания схемы базы данных, таблицы, хранимые процедуры, представления, определяемые пользователем функции и т. д. и, при необходимости, данные в таблицах.</span><span class="sxs-lookup"><span data-stu-id="080f5-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="080f5-184">Затем можно подключиться к серверу базы данных поставщика веб-узла с помощью SQL Server Management Studio а затем выполнить этот скрипт для дублирования базы данных в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="080f5-185">Более того, если поставщик веб-узла поддерживает [службы публикации баз данных](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) Microsoft s, то сценарий, создаваемый мастером публикации базы данных, автоматически выполняется на сервере базы данных от вашего имени.</span><span class="sxs-lookup"><span data-stu-id="080f5-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="080f5-186">Поскольку мастер публикации баз данных создает скрипт, который создает схему базы данных и данные, она будет работать независимо от того, предлагает ли поставщик веб-узла такие функции, как присоединение отправленного `.mdf` файла.</span><span class="sxs-lookup"><span data-stu-id="080f5-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="080f5-187">Создание команд SQL для создания схемы и данных базы данных с помощью мастера публикации баз данных</span><span class="sxs-lookup"><span data-stu-id="080f5-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="080f5-188">Давайте рассмотрим использование мастера публикации баз данных для развертывания базы данных рецензий книги в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="080f5-189">Если вы используете Visual Studio 2008 или более поздней, мастер публикации баз данных уже установлен.</span><span class="sxs-lookup"><span data-stu-id="080f5-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="080f5-190">Если вы используете Visual Studio 2005, необходимо сначала [скачать и установить](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) мастер.</span><span class="sxs-lookup"><span data-stu-id="080f5-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="080f5-191">Откройте Visual Studio и перейдите к базе данных `Reviews.mdf`.</span><span class="sxs-lookup"><span data-stu-id="080f5-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="080f5-192">Если вы используете Visual Web Developer, перейдите на обозреватель базы данных; Если вы используете Visual Studio, используйте обозреватель сервера.</span><span class="sxs-lookup"><span data-stu-id="080f5-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="080f5-193">На рис. 4 показана база данных `Reviews.mdf` в обозреватель базы данных в Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="080f5-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="080f5-194">Как показано на рис. 4, база данных `Reviews.mdf` состоит из четырех таблиц, трех хранимых процедур и определяемой пользователем функции.</span><span class="sxs-lookup"><span data-stu-id="080f5-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>

<span data-ttu-id="080f5-195">[![нахождение базы данных в обозреватель базы данных или обозреватель сервера](deploying-a-database-vb/_static/image11.jpg)](deploying-a-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-vb/_static/image11.jpg)](deploying-a-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="080f5-196">**Рис. 4**. размещение базы данных в обозреватель базы данных или обозреватель сервера ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="080f5-197">Щелкните правой кнопкой мыши имя базы данных и выберите пункт "опубликовать в поставщике" в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="080f5-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="080f5-198">Запустится мастер публикации базы данных (см. рис. 5).</span><span class="sxs-lookup"><span data-stu-id="080f5-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="080f5-199">Нажмите кнопку Далее, чтобы перейти за пределы экрана-заставки.</span><span class="sxs-lookup"><span data-stu-id="080f5-199">Click Next to advance past the splash screen.</span></span>

<span data-ttu-id="080f5-200">[![экрана-заставки мастера публикации баз данных](deploying-a-database-vb/_static/image14.jpg)](deploying-a-database-vb/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-vb/_static/image14.jpg)](deploying-a-database-vb/_static/image13.jpg)</span></span> 

<span data-ttu-id="080f5-201">**Рис. 5**. экран-заставка мастера публикации баз данных ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-vb/_static/image15.jpg))</span></span>

<span data-ttu-id="080f5-202">На втором экране мастера перечисляются базы данных, доступные мастеру публикации баз данных, и можно выбрать, следует ли создать скрипты для всех объектов в выбранной базе данных или выбрать объекты для включения в скрипт.</span><span class="sxs-lookup"><span data-stu-id="080f5-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="080f5-203">Выберите соответствующую базу данных и оставьте параметр "создать скрипт для всех объектов в выбранной базе данных" установленным.</span><span class="sxs-lookup"><span data-stu-id="080f5-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="080f5-204">Если появляется сообщение об ошибке "в базе данных *DatabaseName* типов, которые можно создать с помощью этого мастера, нет объектов", то при нажатии кнопки "Далее" на экране, показанном на рис. 6, убедитесь, что путь к файлу базы данных не слишком длинный.</span><span class="sxs-lookup"><span data-stu-id="080f5-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="080f5-205">Как отмечалось в [этом элементе обсуждения](http://www.codeplex.com/sqlhost/Thread/View.aspx?ThreadId=11014) на странице проекта мастера публикации баз данных, эта ошибка может возникать, если путь к файлу базы данных слишком длинный.</span><span class="sxs-lookup"><span data-stu-id="080f5-205">As noted in [this discussion item](http://www.codeplex.com/sqlhost/Thread/View.aspx?ThreadId=11014) on the Database Publishing Wizard project page, this error can arise if the path to the database file is too long.</span></span>

<span data-ttu-id="080f5-206">[![экрана-заставки мастера публикации баз данных](deploying-a-database-vb/_static/image17.jpg)](deploying-a-database-vb/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-vb/_static/image17.jpg)](deploying-a-database-vb/_static/image16.jpg)</span></span> 

<span data-ttu-id="080f5-207">**Рис. 6**. экран-заставка мастера публикации баз данных ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image18.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-vb/_static/image18.jpg))</span></span>

<span data-ttu-id="080f5-208">На следующем экране можно создать файл скрипта или, если ваш веб-узел поддерживает его, опубликовать базу данных непосредственно на сервере базы данных поставщика веб-узла.</span><span class="sxs-lookup"><span data-stu-id="080f5-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="080f5-209">Как показано на рис. 7, сценарий записывается в файл `C:\REVIEWS.MDF.sql`.</span><span class="sxs-lookup"><span data-stu-id="080f5-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>

<span data-ttu-id="080f5-210">[![создать скрипт для базы данных в файле или опубликовать его непосредственно в поставщике веб-узла](deploying-a-database-vb/_static/image20.jpg)](deploying-a-database-vb/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-vb/_static/image20.jpg)](deploying-a-database-vb/_static/image19.jpg)</span></span> 

<span data-ttu-id="080f5-211">**Рис. 7**. Создание скрипта базы данных в файле или публикация ее непосредственно в поставщике веб-узла ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image21.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-vb/_static/image21.jpg))</span></span>

<span data-ttu-id="080f5-212">На следующем экране появится запрос на ввод различных параметров создания скриптов.</span><span class="sxs-lookup"><span data-stu-id="080f5-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="080f5-213">Можно указать, должен ли скрипт включать инструкции DROP для удаления существующих объектов.</span><span class="sxs-lookup"><span data-stu-id="080f5-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="080f5-214">По умолчанию используется значение true, что нормально при развертывании базы данных в первый раз.</span><span class="sxs-lookup"><span data-stu-id="080f5-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="080f5-215">Можно также указать, имеет ли целевая база данных SQL Server 2000, SQL Server 2005 или SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="080f5-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="080f5-216">Наконец, можно указать, следует ли создать скрипты для схемы и данных, только для данных или только для схемы.</span><span class="sxs-lookup"><span data-stu-id="080f5-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="080f5-217">Схема — это коллекция объектов базы данных, таблиц, хранимых процедур, представлений и т. д.</span><span class="sxs-lookup"><span data-stu-id="080f5-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="080f5-218">Данные — это сведения, находящиеся в таблицах.</span><span class="sxs-lookup"><span data-stu-id="080f5-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="080f5-219">Как показано на рис. 8, у меня есть мастер, настроенный на удаление существующих объектов базы данных, создание скрипта для базы данных SQL Server 2008, а также публикацию схемы и данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>

<span data-ttu-id="080f5-220">[![указать параметры публикации](deploying-a-database-vb/_static/image23.jpg)](deploying-a-database-vb/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-220">[![Specify the Publishing Options](deploying-a-database-vb/_static/image23.jpg)](deploying-a-database-vb/_static/image22.jpg)</span></span> 

<span data-ttu-id="080f5-221">**Рис. 8**. Указание параметров публикации ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image24.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-vb/_static/image24.jpg))</span></span>

<span data-ttu-id="080f5-222">На последних двух экранах суммируются действия, которые будут выполнены, а затем отображается состояние сценариев.</span><span class="sxs-lookup"><span data-stu-id="080f5-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="080f5-223">Общий результат работы мастера заключается в том, что у нас есть файл скрипта, содержащий команды SQL, необходимые для создания базы данных в рабочей среде, и заполнять ее теми же данными, что и при разработке.</span><span class="sxs-lookup"><span data-stu-id="080f5-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="080f5-224">Выполняя команды SQL в базе данных рабочей среды</span><span class="sxs-lookup"><span data-stu-id="080f5-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="080f5-225">Теперь, когда у нас есть скрипт, содержащий команды SQL для создания базы данных, и все остальные данные остаются, выполните сценарий в рабочей базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="080f5-226">Некоторые поставщики веб-узлов предлагают текстовое поле на панели управления, где можно вводить команды SQL для выполнения в базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="080f5-227">Если у вас очень большой файл скрипта, этот параметр может не работать (например, файл скрипта `REVIEWS.MDF.sql` имеет размер более 425 КБ).</span><span class="sxs-lookup"><span data-stu-id="080f5-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="080f5-228">Лучшим подходом является прямое подключение к рабочему серверу базы данных с помощью SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="080f5-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="080f5-229">Если на компьютере установлен SQL Server выпуск, отличный от Express, то, вероятно, у вас уже установлена среда SSMS.</span><span class="sxs-lookup"><span data-stu-id="080f5-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="080f5-230">В противном случае можно [скачать и установить](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) бесплатную копию SQL Server Management Studio Express Edition.</span><span class="sxs-lookup"><span data-stu-id="080f5-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="080f5-231">Запустите SSMS и подключитесь к серверу базы данных веб-узлов, используя сведения, предоставленные поставщиком веб-узла.</span><span class="sxs-lookup"><span data-stu-id="080f5-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>

<span data-ttu-id="080f5-232">[![подключиться к серверу базы данных поставщика веб-узла](deploying-a-database-vb/_static/image26.jpg)](deploying-a-database-vb/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-vb/_static/image26.jpg)](deploying-a-database-vb/_static/image25.jpg)</span></span> 

<span data-ttu-id="080f5-233">**Рис. 9**. подключение к серверу базы данных поставщика веб-узла ([щелкните, чтобы просмотреть образ полного размера](deploying-a-database-vb/_static/image27.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-vb/_static/image27.jpg))</span></span>

<span data-ttu-id="080f5-234">Разверните вкладку базы данных и перейдите к базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="080f5-235">Нажмите кнопку Создать запрос в левом верхнем углу панели инструментов, вставьте команды SQL из файла скрипта, созданного мастером публикации баз данных, и нажмите кнопку выполнить, чтобы выполнить эти команды на сервере рабочей базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="080f5-236">Если файл скрипта особенно большой, выполнение команд может занять несколько минут.</span><span class="sxs-lookup"><span data-stu-id="080f5-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>

<span data-ttu-id="080f5-237">[![подключиться к серверу базы данных поставщика веб-узла](deploying-a-database-vb/_static/image29.jpg)](deploying-a-database-vb/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-vb/_static/image29.jpg)](deploying-a-database-vb/_static/image28.jpg)</span></span> 

<span data-ttu-id="080f5-238">**Рис. 10**. подключение к серверу базы данных поставщика веб-узла s ([щелкните, чтобы просмотреть изображение полного размера](deploying-a-database-vb/_static/image30.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-vb/_static/image30.jpg))</span></span>

<span data-ttu-id="080f5-239">Вот и все!</span><span class="sxs-lookup"><span data-stu-id="080f5-239">That s all there is to it!</span></span> <span data-ttu-id="080f5-240">На этом этапе база данных разработки дублируется в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="080f5-241">При обновлении базы данных в среде SSMS должны отобразиться новые объекты базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="080f5-242">На рис. 11 показаны таблицы и хранимые процедуры рабочей базы данных, а также определяемые пользователем функции, которые отражают значения в базе данных разработки.</span><span class="sxs-lookup"><span data-stu-id="080f5-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="080f5-243">Так как мы представили инструкции по публикации данных в мастере публикации баз данных, таблицы рабочих баз данных имеют те же данные, что и таблицы базы данных разработки на момент выполнения мастера.</span><span class="sxs-lookup"><span data-stu-id="080f5-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="080f5-244">На рис. 12 показаны данные в таблице `Books` рабочей базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>

<span data-ttu-id="080f5-245">[![объекты базы данных дублируются в рабочей базе данных](deploying-a-database-vb/_static/image32.jpg)](deploying-a-database-vb/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-vb/_static/image32.jpg)](deploying-a-database-vb/_static/image31.jpg)</span></span> 

<span data-ttu-id="080f5-246">**Рис. 11**. объекты базы данных дублируются в рабочей базе данных ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image33.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-vb/_static/image33.jpg))</span></span>

<span data-ttu-id="080f5-247">[![Рабочая база данных содержит те же данные, что и в базе данных разработки.](deploying-a-database-vb/_static/image35.jpg)](deploying-a-database-vb/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="080f5-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-vb/_static/image35.jpg)](deploying-a-database-vb/_static/image34.jpg)</span></span> 

<span data-ttu-id="080f5-248">**Рис. 12**. Рабочая база данных содержит те же данные, что и в базе данных разработки ([щелкните, чтобы просмотреть изображение с полным размером](deploying-a-database-vb/_static/image36.jpg))</span><span class="sxs-lookup"><span data-stu-id="080f5-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-vb/_static/image36.jpg))</span></span>

<span data-ttu-id="080f5-249">На этом этапе мы развернули базу данных разработки только в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="080f5-250">Мы еще не рассматривали развертывание самого веб-приложения или проверили, какие изменения конфигурации необходимы для того, чтобы приложение в рабочей среде использовало рабочую базу данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="080f5-251">Эти проблемы будут рассмотрены в следующем руководстве.</span><span class="sxs-lookup"><span data-stu-id="080f5-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="080f5-252">Сводка</span><span class="sxs-lookup"><span data-stu-id="080f5-252">Summary</span></span>

<span data-ttu-id="080f5-253">Для развертывания управляемого данными веб-приложения необходимо скопировать базу данных, используемую во время разработки, в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="080f5-254">Многие поставщики веб-узлов предлагают средства для упрощения процесса развертывания базы данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="080f5-255">Например, с помощью DiscountASP.NET можно выполнить FTP `.mdf` файла базы данных (или резервной копии), а затем подключить базу данных к серверу базы данных с помощью панели управления.</span><span class="sxs-lookup"><span data-stu-id="080f5-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="080f5-256">Другой вариант, который работает независимо от того, какие функции предлагает поставщик веб-узлов — это средство мастера публикации баз данных Microsoft s, которое создает скрипт команд SQL для создания схемы и данных базы данных разработки.</span><span class="sxs-lookup"><span data-stu-id="080f5-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="080f5-257">После создания скрипта его можно выполнить в рабочей базе данных.</span><span class="sxs-lookup"><span data-stu-id="080f5-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="080f5-258">Теперь, когда книга просматривает базу данных веб-приложений в рабочей среде, мы можем развернуть приложение.</span><span class="sxs-lookup"><span data-stu-id="080f5-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="080f5-259">Однако сведения о конфигурации веб-приложения указывают строку подключения к базе данных, а эта строка подключения ссылается на базу данных разработки.</span><span class="sxs-lookup"><span data-stu-id="080f5-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="080f5-260">Необходимо обновить эти сведения строки подключения при развертывании сайта в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="080f5-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="080f5-261">В следующем учебнике рассматриваются различия в конфигурации и описываются шаги, необходимые для публикации веб-узла рецензий на основе данных в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="080f5-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="080f5-262">Поздравляем с программированием!</span><span class="sxs-lookup"><span data-stu-id="080f5-262">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="080f5-263">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="080f5-263">Further Reading</span></span>

<span data-ttu-id="080f5-264">Дополнительные сведения о разделах, обсуждаемых в этом руководстве, см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="080f5-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="080f5-265">Загрузка мастера публикации базы данных Microsoft SQL Server 1,1</span><span class="sxs-lookup"><span data-stu-id="080f5-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="080f5-266">Загрузите Microsoft SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="080f5-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

> [!div class="step-by-step"]
> <span data-ttu-id="080f5-267">[Назад](core-differences-between-iis-and-the-asp-net-development-server-vb.md)
> [Вперед](configuring-the-production-web-application-to-use-the-production-database-vb.md)</span><span class="sxs-lookup"><span data-stu-id="080f5-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-vb.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-vb.md)</span></span>
