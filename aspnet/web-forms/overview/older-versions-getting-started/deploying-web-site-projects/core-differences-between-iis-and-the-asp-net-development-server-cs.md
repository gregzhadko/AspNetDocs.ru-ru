---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
title: Основные различия между IIS и ASP.NET Development Server (C#) | Документация Майкрософт
author: rick-anderson
description: При тестировании приложения ASP.NET локально, скорее всего, вы используете веб-сервера разработки ASP.NET. Рабочий веб-сайт то, скорее всего, pow...
ms.author: riande
ms.date: 04/01/2009
ms.assetid: 13a5a423-9235-4dde-b408-2fd10f791d63
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
msc.type: authoredcontent
ms.openlocfilehash: ec59b63050a9d561c4f3da5a8eaaffbefef48454
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59410530"
---
# <a name="core-differences-between-iis-and-the-aspnet-development-server-c"></a>Основные различия между IIS и ASP.NET Development Server (C#)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) или [скачать PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)

> При тестировании приложения ASP.NET локально, скорее всего, вы используете веб-сервера разработки ASP.NET. Рабочий веб-сайт то, скорее всего, на базе IIS. Существуют некоторые различия между как обрабатывать запросы в этих веб-серверов, и эти различия может иметь важные последствия. В этом руководстве рассматриваются некоторые отличия, более связан с темой.


## <a name="introduction"></a>Вступление

Каждый раз, когда пользователь посещает приложения ASP.NET свой браузер отправляет запрос на веб-сайт. Этот запрос передается по веб-сервера, который координирует со средой выполнения ASP.NET для создания и получения содержимого для запрошенного ресурса. [**я** иться **я** nformation **S** служб (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) представляют собой пакет служб, которые предоставляют общие функции Интернет клиентов для Серверы Windows. IIS является наиболее часто используемые веб-сервера для приложений ASP.NET в рабочих средах; Это скорее по веб-сервера, не могут использоваться в поставщике веб-размещения для работы с вашим приложением ASP.NET. IIS также может использоваться как по веб-сервера в среде разработки, несмотря на то, что это приводит к установке служб IIS и настроить его должным образом.


ASP.NET Development Server может использоваться альтернативные web server для среды разработки; Он поставляется с и интегрированные в Visual Studio. Если веб-приложения был настроен на использование IIS, ASP.NET Development Server будет автоматически запущен и использован веб-сервер при первом посещении веб-страницы в Visual Studio. Демонстрация веб-приложений, мы создали в [ *определить, какие файлы должны быть развернуты* ](determining-what-files-need-to-be-deployed-cs.md) руководства были обоих приложений системы веб-файл, которые не были настроены на использование IIS. Таким образом при просмотре любой из этих веб-сайтов в Visual Studio используется сервер разработки ASP.NET.

В идеальном мире разработки и рабочей среде будут одинаковыми. Тем не менее мы уже говорили в предыдущем учебном курсе не нередко среды, чтобы определить различные настройки конфигурации. С помощью по другой веб-сервера в средах добавляет другой переменной, которое необходимо принимать во внимание при развертывании приложения. В этом руководстве рассматриваются основные различия между IIS и ASP.NET Development Server. Из-за этих различий существуют сценарии, где код, который безошибочно выполняется в среде разработки, вызывает исключение или ведет себя по-разному, при выполнении в рабочей среде.

## <a name="security-context-differences"></a>Различия в контексте безопасности

Каждый раз, когда по веб-сервера обрабатывает входящий запрос, он связывает этот запрос с конкретный контекст защиты. Эти сведения о контексте безопасности используется операционной системой, чтобы определить, какие действия допустимы в запросе. Например страница ASP.NET может включать код, который записывает сообщение в файл на диске. Для этой страницы ASP.NET для выполнения без ошибок, контекст безопасности должен иметь соответствующий файл прав системного уровня, а именно запись разрешения для этого файла.

ASP.NET Development Server связывает входящие запросы в контексте безопасности пользователя, выполнившего вход. Если вы вошли рабочем столе с правами администратора, страницах ASP.NET, обслуживаемых ASP.NET Development Server будет иметь те же права доступа с правами администратора. Тем не менее ASP.NET запросов, обрабатываемых IIS связаны с учетной записью конкретной машины. По умолчанию учетной записи сетевой службы компьютера используется службами IIS версии 6 и 7, несмотря на то, что на поставщике веб-размещения может настроили уникальную учетную запись для каждого клиента. Более того в поставщике веб-размещения, скорее всего предоставил ограниченных разрешений для учетной записи компьютера. Конечным результатом является то, возможно, требуется веб-страниц, которые выполняются без ошибки в среде разработки, но создают исключения, относящиеся к авторизации при размещении в рабочей среде.

Для отображения этого типа ошибки в действии, я создал страницу на веб-сайте рецензий на книги, которое создает файл на диске, в которой хранятся самые последние дата и время кто-то просматривать *обучение самостоятельно ASP.NET 3.5 за 24 часа* просмотрите. Для выполнения этой процедуры откройте `~/Tech/TYASP35.aspx` странице и добавьте следующий код, чтобы `Page_Load` обработчик событий:

[!code-csharp[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample1.cs)]

> [!NOTE]
> [ `File.WriteAllText` Метод](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) создает новый файл, если он не существует и записывает указанного содержимого. Если файл уже существует, существующее содержимое перезаписывается.


Затем посетите *обучение самостоятельно ASP.NET 3.5 за 24 часа* страница «Просмотр книги» в среде разработки с использованием сервера разработки ASP.NET. Предположим, что вы вошли в систему с учетной записью, которая имеет достаточные разрешения для создания и изменения в текстовый файл в Интернете корневого каталога приложения рецензии на книгу отображается теми же самыми, но каждый раз, когда страница посещен даты и времени пользователя  IP-адрес хранится в `LastTYASP35Access.txt` файл. Перейдите в браузере к этому файлу; Вы увидите сообщение, подобное показанному на рис. 1.


[![Текстовый файл содержит последнюю дату и время, был посещен рецензии на книгу](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)

**Рис. 1**: Текстовый файл содержит последнюю дату и время, был посещен рецензии на книгу ([Просмотр полноразмерного изображения](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))


Развертывание веб-приложения в рабочую среду и затем посетите размещаемый *обучение самостоятельно ASP.NET 3.5 за 24 часа* страница «Просмотр» для книги. На этом этапе вы должны либо см. в разделе на странице проверки нормального распределения или сообщение об ошибке, которое показано на рис. 2. Некоторые веб-узла поставщиками предоставить разрешения на запись для анонимных ASP.NET учетной записи компьютера, в котором регистр страницы будет работать без ошибок. Если, однако на поставщике веб-размещения запрещен доступ для записи для анонимной учетной записью исключение [ `UnauthorizedAccessException` исключение](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) происходит при попытке `TYASP35.aspx` страницы, пытается выполнить запись текущей даты и времени в `LastTYASP35Access.txt` файл.


[![Учетная запись компьютера по умолчанию, используемый службой IIS не имеет разрешения на запись в файловой системе](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)

**Рис. 2**: По умолчанию машины учетная запись, используемая с IIS Does не имеют разрешения на запись в файловую систему ([Просмотр полноразмерного изображения](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))


Хорошо то, что большинство поставщиков веб-узла имеют какую-либо средство разрешения, которое позволяет задавать разрешения файловой системы веб-сайта. Предоставить анонимный доступ записи для учетной записи ASP.NET в корневой каталог и затем возвращаются к странице "Просмотр" книги. (При необходимости обратитесь к поставщику веб узла для получения помощи по предоставлению разрешения на запись для учетной записи ASP.NET по умолчанию.) Это время, страница должна загружаться без ошибок и `LastTYASP35Access.txt` файл должен быть создан успешно.

Взять сейчас здесь заключается в ASP.NET Development Server работает в контексте безопасности, отличным от IIS, возможно, что страницы ASP.NET, чтение или запись в файловой системе, считываться или записи в журнал событий Windows, или чтения или записи Windows  реестра будет работать ожидаемым образом для разработки, но создают исключения, если в рабочей среде. После создания веб-приложения, которое будет развертываться общих веб-размещения среды, не чтения или записи в журнале событий и реестр Windows. Также запишите любая страница ASP.NET считывать или записывать в файловой системе, как вам может понадобиться предоставляют права чтения и записи в соответствующие папки в рабочей среде.

## <a name="differences-on-serving-static-content"></a>Различия на обслуживание статического содержимого

Другой основное различие между службами IIS и ASP.NET Development Server является, как их обрабатывать запросы для статического содержимого. Каждый запрос, поступающие в ASP.NET Development Server, для страницы ASP.NET, изображения или файла JavaScript, обрабатывается средой выполнения ASP.NET. По умолчанию IIS вызывает только среда выполнения ASP.NET при поступлении запроса для ресурса ASP.NET, например веб-страницу ASP.NET, веб-службы и т. д. Запросы для статического содержимого - образы, файлы CSS, файлы JavaScript, PDF-файлов, ZIP-файлы и т - извлекаются путем служб IIS без участия среды выполнения ASP.NET. (Его можно выполнить настройку IIS для работы со средой выполнения ASP.NET, когда обслуживает статическое содержимое; в этом руководстве, Дополнительные сведения см. в разделе «Проверка подлинности на основе форм выполнение и URL-адрес проверки подлинности на статические файлы с IIS 7»).

Среда выполнения ASP.NET выполняет ряд действий для создания запрошенного содержимого, включая (определяющий запрашивающей стороне) проверки подлинности и авторизации (определения запрашивающей стороне имеет разрешение на просмотр запрошенного содержимого). Популярные форма проверки подлинности — *проверки подлинности на основе форм*, в которой для идентификации пользователя, введя свои учетные данные, — как правило, имя пользователя и пароль — в текстовые поля на веб-странице. После проверки учетных данных, веб-сайт сохраняет *билет проверки подлинности* файл cookie в браузере пользователя, который отправляется с каждый последующий запрос на веб-сайт и используется для проверки подлинности пользователя. Кроме того, можно указать *Авторизация URL-адреса* правилам, какие пользователи могут или не может получить доступ к определенной папке. Многие веб-сайтов ASP.NET использовать форм проверки подлинности и авторизация URL-адреса для поддержки учетных записей пользователей и для определения части сайта, которые доступны только для прошедших проверку подлинности пользователей и пользователей, принадлежащих к определенной ролью.

> [!NOTE]
> Для провести полную ревизию ASP. NET на основе форм проверки подлинности, авторизация URL-адреса и возможностях связанные с учетной записью пользователя, обязательно ознакомьтесь с моей [учебники по безопасности веб-сайт](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).


Рассмотрим веб-сайт, который поддерживает учетные записи пользователей с помощью авторизации на основе форм и есть папка, использование авторизации URL-адрес, настроенный для прошедшего проверку подлинности только пользователи. Предположим, что эта папка содержит страниц ASP.NET, и эти файлы PDF-ФАЙЛ можно просмотреть PDF-файлов и что цель состоит в том, что только прошедшие проверку пользователи.

Что произойдет, если посетитель пытается просмотреть один из этих файлов PDF, введя URL-адрес непосредственно в адресной строке браузера его? Чтобы узнать, давайте создайте новую папку в узле рецензий на книги, некоторые файлы PDF и настроить сайт для использования авторизации URL-адреса, чтобы запретить анонимным пользователям посещения этой папки. Если скачивание демонстрационной версии приложения вы увидите, что я создал папку с именем `PrivateDocs` и добавляется в PDF-ФАЙЛ из моей [учебники по безопасности веб-сайт](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (как подгонки!). `PrivateDocs` Папка также содержит `Web.config` файла, который определяет правила авторизации URL-адрес, чтобы запретить анонимные пользователи:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample2.xml)]

Наконец, я настроил веб-приложение для использования проверки подлинности на основе форм, обновив `Web.config` файл в корневом каталоге, заменив:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample3.xml)]

На:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample4.xml)]

С помощью сервера разработки ASP.NET, посетите сайт и получите шанс прямой URL-адрес одного из файлов PDF в адресной строке браузера. Если вы загрузили веб-сайт, связанный с этим руководством, URL-адрес должен выглядеть примерно так: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`

Введите этот URL-адрес в адресную строку браузер для отправки запроса на сервер разработки ASP.NET для файла. Сервер ASP.NET Development Server передает запрос в среду выполнения ASP.NET для обработки. Так как мы еще не выполнили вход, а `Web.config` в `PrivateDocs` папка настроена для анонимного доступа, среда выполнения ASP.NET автоматически перенаправит нам на страницу входа, `Login.aspx` (см. рис. 3). При перенаправлении пользователя на страницу входа, ASP.NET включает в себя `ReturnUrl` параметр строки запроса, который показывает страницу, пользователь при попытке просмотра. После успешного входа пользователя могут возвращаться на эту страницу.


[![У пользователей, автоматически перенаправляется на страницу входа](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)

**Рис. 3**: У пользователей, автоматически перенаправляется на страницу входа ([Просмотр полноразмерного изображения](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))


Теперь давайте посмотрим, как это ведет себя в рабочей среде. Развернуть приложение и введите прямой URL-адрес к одному из файлов PDF из `PrivateDocs` папку в рабочей среде. Вам предложат указать браузер для отправки запроса IIS для файла. Так как запрашивается статического файла, IIS извлекает и возвращает файл без вызова среды выполнения ASP.NET. В результате было выполнено; проверка авторизации не URL-адрес содержимое мы предполагаем, что закрытый PDF-ФАЙЛ доступны любой пользователь, знающий прямой URL-адрес к файлу.


[![Анонимные пользователи могут загрузить PDF-файлы закрытого, введя прямой URL-адрес к файлу](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)

**Рис. 4**: Анонимные пользователи могут загрузить закрытый PDF файлы, введя прямой URL-адрес к файлу ([Просмотр полноразмерного изображения](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))


### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a>Выполнение проверки подлинности на основе форм и проверки подлинности URL-адрес на статические файлы с IIS 7

Существует несколько методов, которые можно использовать для защиты от несанкционированного доступа из статического содержимого. IIS 7 появился *интегрированного конвейера*, который семейный рабочего процесса в IIS с помощью рабочего процесса среда выполнения ASP.NET. По сути вы можете настроить IIS для вызова среды выполнения ASP.NET проверки подлинности и авторизации модулей все входящие запросы (включая статического содержимого, например PDF-файлов). Обратитесь в службу на поставщике веб-размещения, чтобы узнать, как настроить веб-сайт для использования интегрированного конвейера.

После настройки IIS для использования интегрированного конвейера добавьте следующую разметку для `Web.config` файл в корневом каталоге:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample5.xml)]

Эта разметка указывает, что IIS 7 для использования на базе ASP.NET модулей проверки подлинности и авторизации. Повторное развертывание приложения и повторно откройте PDF-файл. Настоящее время, когда запрос обрабатывается IIS она предоставляет логику проверки подлинности и авторизации среды выполнения ASP.NET возможность проверить запрос. Так как только прошедшие проверку подлинности пользователи имеют право просмотра содержимого `PrivateDocs` папки, анонимный пользователь автоматически перенаправляется на страницу входа (см. рис. 3).

> [!NOTE]
> Если в поставщике веб-размещения по-прежнему используется IIS 6 нельзя использовать функцию интегрированного конвейера. Является размещение частных документов в папке, которая запрещает доступ по протоколу HTTP (например, `App_Data`) и затем создать страницу для обслуживания этих документов. Эта страница может называться `GetPDF.aspx`и передается имя PDF-ФАЙЛ в качестве параметра строки запроса. `GetPDF.aspx` Страницы бы сначала убедитесь, что пользователь имеет разрешение на просмотр файла и, если в этом случае следует использовать [ `Response.WriteFile(filePath)` ](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) метод для отправки содержимого PDF-файла клиента, отправившего запрос. Этот способ также будет работать для IIS 7, если вы не хотите включить интегрированного конвейера.


## <a name="summary"></a>Сводка

Веб-приложений в рабочей среде размещаются с помощью по Microsoft IIS для веб-сервера. В среде разработки Однако приложение может размещаться с помощью IIS или ASP.NET Development Server. В идеальном случае же по веб-сервера следует использовать в обеих средах, так как с помощью различных программных добавляет другой переменной в наборе. Тем не менее простота использования сервера разработки ASP.NET упрощает привлекательным вариантом в среде разработки. Хорошо то, что существует только некоторые основные различия между IIS и ASP.NET Development Server, и при осведомленность об этих различиях вы можно предпринять действия, которые помогут убедиться, что приложение работает и работает так же, как независимо от того, Среда.

Счастливого вам программирования!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, обсуждавшимся в этом руководстве см. в следующих ресурсах:

- [Интеграция ASP.NET с IIS 7.0](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- [С помощью проверки подлинности форумы ASP.NET со всеми типами содержимого в службах IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (видео)
- [Веб-серверов в Visual Web Developer](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> [Назад](common-configuration-differences-between-development-and-production-cs.md)
> [Вперед](deploying-a-database-cs.md)
