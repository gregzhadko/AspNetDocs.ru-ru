---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Основные сведения о триггерах UpdatePanel ASP.NET AJAX | Документация Майкрософт
author: scottcate
description: При работе в редакторе разметки в Visual Studio, можно заметить в (от IntelliSense), что существуют два дочерних элементов элемента управления UpdatePanel. Один из ч...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: e3821eee8c7bf2c2f9b45ea75ade2bd5b3b8ef19
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59406266"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="5ba75-104">Общие сведения о триггерах UpdatePanel ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="5ba75-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="5ba75-105">по [(Scott cate)](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="5ba75-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="5ba75-106">Скачать PDF</span><span class="sxs-lookup"><span data-stu-id="5ba75-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="5ba75-107">При работе в редакторе разметки в Visual Studio, можно заметить в (от IntelliSense), что существуют два дочерних элементов элемента управления UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="5ba75-108">Одно из них — элемент триггеров, который определяет элементы управления на странице (или пользовательского элемента управления, если вы используете) наступлении частичная отрисовка элемента управления UpdatePanel, в которой находится элемент.</span><span class="sxs-lookup"><span data-stu-id="5ba75-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>


## <a name="introduction"></a><span data-ttu-id="5ba75-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="5ba75-109">Introduction</span></span>

<span data-ttu-id="5ba75-110">Технологии ASP.NET корпорации Майкрософт предоставляет модель программирования объектно ориентированные и управляемые событиями и объединяет его преимущества скомпилированного кода.</span><span class="sxs-lookup"><span data-stu-id="5ba75-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="5ba75-111">Тем не менее его модель обработки на сервере имеет несколько недостатков, присущих технологии, многие из которых можно обратиться по новым функциям в расширениях AJAX для Microsoft ASP.NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="5ba75-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="5ba75-112">Эти расширения позволяют множество новых клиентских функций, включая частичную визуализацию страниц без необходимости полного обновления всей страницы, возможность доступа к веб-служб с помощью клиентского скрипта (в том числе ASP.NET, API профилирования) и расширенного клиентского API-интерфейса разработан для отражения, многие из схемы управления, в набор серверных элементов управления ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5ba75-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="5ba75-113">В этом официальном документе проверяет триггеры XML функциональные возможности ASP.NET AJAX `UpdatePanel` компонента.</span><span class="sxs-lookup"><span data-stu-id="5ba75-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="5ba75-114">Триггеры XML обеспечивают четкий контроль над компонентами, которые могут привести к частичной визуализации для определенного элемента управления UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="5ba75-115">Этот технический документ основан на бета-версии 2 .NET Framework 3.5 и Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="5ba75-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="5ba75-116">Расширения AJAX ASP.NET, ранее сборку надстройки, предназначенные для ASP.NET 2.0 теперь встроены в библиотеке базовых классов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5ba75-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="5ba75-117">Этот технический документ также предполагается, что будете работать с Visual Studio 2008, не Visual Web Developer Express и предоставит пошаговые руководства, в соответствии с пользовательского интерфейса Visual Studio (несмотря на то, что Листинги кода будут полностью совместимы, вне зависимости от среда разработки).</span><span class="sxs-lookup"><span data-stu-id="5ba75-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## *<a name="triggers"></a><span data-ttu-id="5ba75-118">Триггеры</span><span class="sxs-lookup"><span data-stu-id="5ba75-118">Triggers</span></span>*

<span data-ttu-id="5ba75-119">Триггеры для заданного UpdatePanel, по умолчанию автоматически включают все дочерние элементы, которые вызывают обратную передачу, включая, например, элементы управления TextBox, имеющие их `AutoPostBack` свойство значение **true**.</span><span class="sxs-lookup"><span data-stu-id="5ba75-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="5ba75-120">Однако триггеры также могут быть включены, декларативно с помощью разметки; Это можно сделать в `<triggers>` разделе объявление элемента управления UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="5ba75-121">Несмотря на то, что триггеры может осуществляться через `Triggers` свойство коллекции, рекомендуется зарегистрировать какие-либо триггеры частичной отрисовки во время выполнения (например, если элемент управления недоступен во время разработки) с помощью `RegisterAsyncPostBackControl(Control)` метод ScriptManager в объект страницы, `Page_Load` событий.</span><span class="sxs-lookup"><span data-stu-id="5ba75-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="5ba75-122">Помните, что не имеют состояния, и поэтому необходимо повторно зарегистрировать эти элементы управления каждый раз, когда они создаются.</span><span class="sxs-lookup"><span data-stu-id="5ba75-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="5ba75-123">Включение триггера автоматического дочерних также может быть отключена (таким образом, дочерние элементы управления, которые создают обратных передач автоматически не запустит частичного подготавливает к просмотру), задав `ChildrenAsTriggers` свойства **false**.</span><span class="sxs-lookup"><span data-stu-id="5ba75-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="5ba75-124">Благодаря этому можно наибольшую гибкость при присвоении какие конкретные элементы управления могут вызывать отрисовка страницы и рекомендуется, так что разработчик будет согласиться реагировать на события, а не обработки событий, которые могут возникнуть.</span><span class="sxs-lookup"><span data-stu-id="5ba75-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="5ba75-125">Обратите внимание, что когда UpdatePanel элементы управления являются вложенными, если UpdateMode присвоено **условного**, если запускается дочерний UpdatePanel, но родительский не, затем только дочерние, будет обновляться UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="5ba75-126">Тем не менее если родительский UpdatePanel обновляется, затем дочерний UpdatePanel также будет обновлен.</span><span class="sxs-lookup"><span data-stu-id="5ba75-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## *<a name="the-lttriggersgt-element"></a><span data-ttu-id="5ba75-127">&lt;Триггеры&gt; элемент</span><span class="sxs-lookup"><span data-stu-id="5ba75-127">The &lt;Triggers&gt; Element</span></span>*

<span data-ttu-id="5ba75-128">При работе в редакторе разметки в Visual Studio, вы можете заметить (от IntelliSense), два дочерних элемента из `UpdatePanel` элемента управления.</span><span class="sxs-lookup"><span data-stu-id="5ba75-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="5ba75-129">Наиболее часто появления элемента является `<ContentTemplate>` элемент, который по сути инкапсулирует содержимое, которое будет нести панели обновления (содержимое, для которого мы поощряем частичная визуализация).</span><span class="sxs-lookup"><span data-stu-id="5ba75-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="5ba75-130">Второй элемент — `<Triggers>` элемент, который определяет элементы управления на странице (или пользовательского элемента управления, если вы используете) наступлении частичная отрисовка элемента управления UpdatePanel в которой &lt;триггеры&gt; находится элемент.</span><span class="sxs-lookup"><span data-stu-id="5ba75-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="5ba75-131">`<Triggers>` Элемент может содержать любое количество каждого два дочерних узла: `<asp:AsyncPostBackTrigger>` и `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="5ba75-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="5ba75-132">Они принимают два атрибута `ControlID` и `EventName`и можно указать любой элемент управления в текущей единице измерения инкапсуляции (к примеру, если элемент управления UpdatePanel, находится в пределах веб-элементе управления пользователя, не следует ссылаться на элемент управления на Страница, на котором будет находиться пользовательский элемент управления).</span><span class="sxs-lookup"><span data-stu-id="5ba75-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="5ba75-133">`<asp:AsyncPostBackTrigger>` Элемент особенно полезна в том, что могут работать любого события из элемента управления, который существует в виде дочернего элемента *любой* элемент управления UpdatePanel в единице инкапсуляции, а не только UpdatePanel, от имени которой этот триггер является дочерним .</span><span class="sxs-lookup"><span data-stu-id="5ba75-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="5ba75-134">Таким образом любой элемент управления можно сделать для активации частичного обновления.</span><span class="sxs-lookup"><span data-stu-id="5ba75-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="5ba75-135">Аналогичным образом `<asp:PostBackTrigger>` элемент может использоваться для триггера, частичной визуализации, но, используется полный круговое обращение к серверу.</span><span class="sxs-lookup"><span data-stu-id="5ba75-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="5ba75-136">Этот элемент триггера могут также использоваться для принудительной отрисовки всю страницу, если элемент управления обычно в противном случае активирует частичной визуализации (например, в том случае, когда `Button` элемент управления присутствует в `<ContentTemplate>` элемент управления UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="5ba75-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="5ba75-137">Опять же PostBackTrigger элемента можно указать любой элемент управления, который является потомком любого элемента управления UpdatePanel в текущей единице измерения инкапсуляции.</span><span class="sxs-lookup"><span data-stu-id="5ba75-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## *<a name="lttriggersgt-element-reference"></a><span data-ttu-id="5ba75-138">&lt;Триггеры&gt; Справочник по элементам</span><span class="sxs-lookup"><span data-stu-id="5ba75-138">&lt;Triggers&gt; Element Reference</span></span>*

*<span data-ttu-id="5ba75-139">Потомки разметки:</span><span class="sxs-lookup"><span data-stu-id="5ba75-139">Markup Descendants:</span></span>*

| **<span data-ttu-id="5ba75-140">Тег</span><span class="sxs-lookup"><span data-stu-id="5ba75-140">Tag</span></span>** | **<span data-ttu-id="5ba75-141">Описание</span><span class="sxs-lookup"><span data-stu-id="5ba75-141">Description</span></span>** |
| --- | --- |
| <span data-ttu-id="5ba75-142">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="5ba75-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="5ba75-143">Указывает элемент управления и события, которое будет вызвать частичное обновление страницы для UpdatePanel, содержащий эту ссылку для триггера.</span><span class="sxs-lookup"><span data-stu-id="5ba75-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="5ba75-144">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="5ba75-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="5ba75-145">Указывает элемент управления и события, которое приведет к ее полного обновления (полного обновления всей страницы).</span><span class="sxs-lookup"><span data-stu-id="5ba75-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="5ba75-146">Этот тег используется для принудительного полного обновления, когда элемент управления, в противном случае приведет к запуску частичной визуализации.</span><span class="sxs-lookup"><span data-stu-id="5ba75-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## *<a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="5ba75-147">Пошаговое руководство. Триггеры кросс UpdatePanel</span><span class="sxs-lookup"><span data-stu-id="5ba75-147">Walkthrough: Cross-UpdatePanel Triggers</span></span>*

1. <span data-ttu-id="5ba75-148">Создайте новую страницу ASP.NET с помощью объекта ScriptManager, задать для включения частичной визуализации.</span><span class="sxs-lookup"><span data-stu-id="5ba75-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="5ba75-149">Добавление двух элементов UpdatePanel на эту страницу — в первом, включают в себя элемент управления Label (Label1) и два элемента управления Button (Button1 и Button2).</span><span class="sxs-lookup"><span data-stu-id="5ba75-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="5ba75-150">Нажмите, чтобы обновить оба должно быть указано button1 и Button2 должно быть указано нажмите, чтобы обновить это или что-то роде.</span><span class="sxs-lookup"><span data-stu-id="5ba75-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="5ba75-151">В втором UpdatePanel включают только элемент управления Label (Label2), но значение свойства ForeColor от значения по умолчанию для его различения.</span><span class="sxs-lookup"><span data-stu-id="5ba75-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="5ba75-152">Задайте для свойства UpdateMode оба тега UpdatePanel для **условного**.</span><span class="sxs-lookup"><span data-stu-id="5ba75-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

**<span data-ttu-id="5ba75-153">В листинге 1: Разметка для default.aspx:</span><span class="sxs-lookup"><span data-stu-id="5ba75-153">Listing 1: Markup for default.aspx:</span></span>** 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="5ba75-154">В обработчик событий Click для Button1 установите Label1.Text и Label2.Text зависящие от времени (например, DateTime.Now.ToLongTimeString()).</span><span class="sxs-lookup"><span data-stu-id="5ba75-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="5ba75-155">В обработчик событий Click для Button2 Label1.Text должен быть только значение зависит от времени.</span><span class="sxs-lookup"><span data-stu-id="5ba75-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

**<span data-ttu-id="5ba75-156">В листинге 2: Фонового кода (фрагмент) в default.aspx.cs:</span><span class="sxs-lookup"><span data-stu-id="5ba75-156">Listing 2: Codebehind (trimmed) in default.aspx.cs:</span></span>** 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="5ba75-157">Нажмите клавишу F5 для сборки и запуска проекта.</span><span class="sxs-lookup"><span data-stu-id="5ba75-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="5ba75-158">Обратите внимание, что при нажатии кнопки обновления как панелей, обе метки изменить текст; Тем не менее если щелкнуть эту панель обновления, обновляет только Label1.</span><span class="sxs-lookup"><span data-stu-id="5ba75-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="5ba75-159">([Просмотр полноразмерного изображения](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5ba75-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>


## *<a name="under-the-hood"></a><span data-ttu-id="5ba75-160">Взгляд изнутри</span><span class="sxs-lookup"><span data-stu-id="5ba75-160">Under the Hood</span></span>*

<span data-ttu-id="5ba75-161">Использование в примере, который мы только что создан, мы может рассмотрим действия AJAX для ASP.NET и принципы работы наших триггеры кросс панель UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="5ba75-162">Чтобы сделать это, мы будем работать с генерируемой страницы исходный код HTML, а также расширение Mozilla Firefox, под названием FireBug - с его помощью можно легко проверить обратных вызовов AJAX.</span><span class="sxs-lookup"><span data-stu-id="5ba75-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="5ba75-163">Мы также будем использовать средства .NET Reflector Лутца Рёдера.</span><span class="sxs-lookup"><span data-stu-id="5ba75-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="5ba75-164">Оба эти средства являются общедоступными через Интернет, а также можно найти с помощью поиска в Интернете.</span><span class="sxs-lookup"><span data-stu-id="5ba75-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="5ba75-165">Изучение исходный код страницы показан почти ничего экстраординарного; элементы управления UpdatePanel, отображаются как `<div>` контейнеры, мы сможем увидеть, ресурс скрипта включает в себя, предоставляемых по `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="5ba75-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="5ba75-166">Кроме того, существуют также некоторые новые относящегося к AJAX вызовов PageRequestManager, которые являются внутренними для библиотеки клиентских сценариев AJAX.</span><span class="sxs-lookup"><span data-stu-id="5ba75-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="5ba75-167">Наконец, мы видим, два контейнера UpdatePanel — один с создаваемые `<input>` кнопки с двумя `<asp:Label>` элементов управления к просмотру в виде `<span>` контейнеры.</span><span class="sxs-lookup"><span data-stu-id="5ba75-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="5ba75-168">(Если проверить дерево DOM, в FireBug можно заметить, метки будут недоступны, чтобы указать, что они не создает видимого содержимого).</span><span class="sxs-lookup"><span data-stu-id="5ba75-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="5ba75-169">Нажмите кнопку обновления этой панели и обратите внимание, что верхний UpdatePanel обновляется с текущее время сервера.</span><span class="sxs-lookup"><span data-stu-id="5ba75-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="5ba75-170">В FireBug перейдите на вкладку консоли, чтобы можно было проверить запрос.</span><span class="sxs-lookup"><span data-stu-id="5ba75-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="5ba75-171">Сначала проверьте параметры запроса POST:</span><span class="sxs-lookup"><span data-stu-id="5ba75-171">Examine the POST request parameters first:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="5ba75-172">([Просмотр полноразмерного изображения](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5ba75-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>


<span data-ttu-id="5ba75-173">Обратите внимание, что UpdatePanel указал, код AJAX на стороне сервера точно, укажите дерево элемента управления было запущено через параметр ScriptManager1: `Button1` из `UpdatePanel1` элемента управления.</span><span class="sxs-lookup"><span data-stu-id="5ba75-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="5ba75-174">Теперь нажмите кнопку обновления как панелей.</span><span class="sxs-lookup"><span data-stu-id="5ba75-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="5ba75-175">Затем анализируя ответ, возникнуть серия разделением вертикальной чертой переменные, заданные в строке; в частности, мы см. в разделе верхнего UpdatePanel, `UpdatePanel1`, имеет весь его HTML, отправляемых в браузер.</span><span class="sxs-lookup"><span data-stu-id="5ba75-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="5ba75-176">Библиотека клиентских сценариев AJAX подставляет UpdatePanel исходный HTML-содержимого с новым содержимым через `.innerHTML` свойство, и поэтому сервер отправляет измененное содержимое с сервера как HTML.</span><span class="sxs-lookup"><span data-stu-id="5ba75-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="5ba75-177">Теперь нажмите кнопку обновления панелей, так и проанализировать результаты с сервера.</span><span class="sxs-lookup"><span data-stu-id="5ba75-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="5ba75-178">Результаты очень похожи — обоих элементов UpdatePanel получение новых HTML с сервера.</span><span class="sxs-lookup"><span data-stu-id="5ba75-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="5ba75-179">Как и в предыдущем обратного вызова, отправляется состояния дополнительные страницы.</span><span class="sxs-lookup"><span data-stu-id="5ba75-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="5ba75-180">Как вы видите, так как нет специального кода используется для выполнения обратной передачи AJAX, библиотеки клиентских сценариев AJAX способен перехватывать обратной передачи формы без дополнительного кода.</span><span class="sxs-lookup"><span data-stu-id="5ba75-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="5ba75-181">Серверные элементы управления автоматически использовать JavaScript, таким образом, чтобы они автоматически не отправить форму — ASP.NET автоматически внедряет код для проверки формы и состояния, главным образом достигается включения автоматического сценария ресурса, класс PostBackOptions и классу ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="5ba75-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="5ba75-182">Например рассмотрим элемент управления CheckBox; Проверьте класс дизассемблированного кода в .NET Reflector.</span><span class="sxs-lookup"><span data-stu-id="5ba75-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="5ba75-183">Чтобы сделать это, убедитесь, что сборку System.Web открыт и перейдите к `System.Web.UI.WebControls.CheckBox` класс, открыв `RenderInputTag` метод.</span><span class="sxs-lookup"><span data-stu-id="5ba75-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="5ba75-184">Найдите условного выражения, которое проверяет `AutoPostBack` свойство:</span><span class="sxs-lookup"><span data-stu-id="5ba75-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="5ba75-185">([Просмотр полноразмерного изображения](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5ba75-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>


<span data-ttu-id="5ba75-186">При включенной автоматической обратной передачи на `CheckBox` управления (с помощью свойства AutoPostBack, true), полученный `<input>` тег таким образом отображается с помощью обработки сценария в ASP.NET событий его `onclick` атрибута.</span><span class="sxs-lookup"><span data-stu-id="5ba75-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="5ba75-187">Перехват отправкой формы, затем позволяет ASP.NET AJAX, которые следует вставить в страницу nonintrusively, помогая избежать возможных критических изменений, которые могут возникнуть за счет использования возможно неточный строку замены.</span><span class="sxs-lookup"><span data-stu-id="5ba75-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="5ba75-188">Кроме того, это позволяет *любой* пользовательский элемент управления ASP.NET, использующие всю мощь ASP.NET AJAX без дополнительного кода для поддержки его использования в контейнере UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="5ba75-189">`<triggers>` Функциональные возможности соответствует значения, инициализируемые при вызове PageRequestManager \_updateControls (Обратите внимание, что библиотека клиентских сценариев ASP.NET AJAX использует соглашение, методы, события и имена полей, которые начинаются с символа подчеркивания помеченных как внутренние и не предназначены для использования за пределами этой библиотеки).</span><span class="sxs-lookup"><span data-stu-id="5ba75-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="5ba75-190">С ее помощью можно наблюдать, какие элементы управления предназначены для обратных вызовов AJAX.</span><span class="sxs-lookup"><span data-stu-id="5ba75-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="5ba75-191">Например давайте добавим два дополнительных элемента управления на страницу, оставляя один элемент управления за пределами панели UpdatePanel, полностью и оставив один раз в пределах элемента управления UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="5ba75-192">Мы добавим элемент управления CheckBox в верхнем UpdatePanel и перетащите DropDownList с количеством цветов, определенных в списке.</span><span class="sxs-lookup"><span data-stu-id="5ba75-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="5ba75-193">Вот Новая разметка:</span><span class="sxs-lookup"><span data-stu-id="5ba75-193">Here is the new markup:</span></span>

**<span data-ttu-id="5ba75-194">Листинг 3: Новая разметка</span><span class="sxs-lookup"><span data-stu-id="5ba75-194">Listing 3: New Markup</span></span>**

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="5ba75-195">А вот новый код программной части:</span><span class="sxs-lookup"><span data-stu-id="5ba75-195">And here is the new code-behind:</span></span>

**<span data-ttu-id="5ba75-196">Листинг 4: CodeBehind</span><span class="sxs-lookup"><span data-stu-id="5ba75-196">Listing 4: Codebehind</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="5ba75-197">Идея этой странице том стрелку раскрывающегося списка выбирается один из трех цветами, у второй метки, что флажок определяет, является ли он полужирным шрифтом, и ли отображать метки даты, а также время.</span><span class="sxs-lookup"><span data-stu-id="5ba75-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="5ba75-198">Флажок не должны вызывать обновление AJAX, но следует стрелку раскрывающегося списка, несмотря на то, что он не размещается внутри UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="5ba75-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="5ba75-199">([Просмотр полноразмерного изображения](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5ba75-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>


<span data-ttu-id="5ba75-200">Как происходит в том, что на приведенном выше снимке экрана, последнюю кнопку, чтобы выбрать был этот панели обновления, которое обновляется независимо top время от времени нижней правой кнопки.</span><span class="sxs-lookup"><span data-stu-id="5ba75-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="5ba75-201">Дата также выключения щелчков, как дата отображается в нижнюю метку.</span><span class="sxs-lookup"><span data-stu-id="5ba75-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="5ba75-202">Наконец интерес представляет цвет нижней метки: он был обновлен позже, чем текст, который показывает, что состояние элемента управления важна, и пользователи ожидают, что он сохраняется с помощью обратной передачи AJAX.</span><span class="sxs-lookup"><span data-stu-id="5ba75-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="5ba75-203">*Тем не менее*, время не был обновлен.</span><span class="sxs-lookup"><span data-stu-id="5ba75-203">*However*, the time was not updated.</span></span> <span data-ttu-id="5ba75-204">Время автоматически повторно заполнен через сохраняемость \_ \_поле состояния ПРЕДСТАВЛЕНИЯ страницы интерпретируются средой выполнения ASP.NET, когда элемент управления повторно подготовленных к просмотру на сервере.</span><span class="sxs-lookup"><span data-stu-id="5ba75-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="5ba75-205">Код сервера ASP.NET AJAX не распознает, в котором элементы управления методы их состояние изменяется; он просто повторно заполняет из состояния представления, а затем выполняется события, которые подходят.</span><span class="sxs-lookup"><span data-stu-id="5ba75-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="5ba75-206">Его следует обратить внимание, однако, что бы я инициализирована времени на странице\_событие Load, время будет увеличения правильно.</span><span class="sxs-lookup"><span data-stu-id="5ba75-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="5ba75-207">Таким образом, разработчикам следует опасаться, что соответствующий код выполняется во время соответствующие обработчики событий и не рекомендуется использовать страницы\_загрузки при подойдут и обработчик событий управления.</span><span class="sxs-lookup"><span data-stu-id="5ba75-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="5ba75-208">Сводка</span><span class="sxs-lookup"><span data-stu-id="5ba75-208">Summary</span></span>

<span data-ttu-id="5ba75-209">Элемент управления UpdatePanel расширений AJAX ASP.NET универсален и может использовать ряд методов для идентификации события элементов управления, которые должны быть причиной может быть обновлена.</span><span class="sxs-lookup"><span data-stu-id="5ba75-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="5ba75-210">Он поддерживает обновляется автоматически его дочерние элементы управления, но также может отвечать на события элементов управления на странице.</span><span class="sxs-lookup"><span data-stu-id="5ba75-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="5ba75-211">Чтобы уменьшить вероятность нагрузку сервера, рекомендуется `ChildrenAsTriggers` быть присвоено свойству элемента управления UpdatePanel `false`, и что события быть исключены в, а не включены по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5ba75-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="5ba75-212">Также благодаря этому все ненужные события из-за потенциально нежелательные эффекты, включая проверки и изменения для полей ввода.</span><span class="sxs-lookup"><span data-stu-id="5ba75-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="5ba75-213">Эти типы ошибок может быть трудно локализовать, потому что на странице обновятся сведения прозрачно для пользователя, и причину таким образом не может сразу очевидно.</span><span class="sxs-lookup"><span data-stu-id="5ba75-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="5ba75-214">С помощью проверки внутренней работы ASP.NET AJAX формы post перехвата модели, мы смогли определить, что она использует framework, уже обеспечиваемые ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5ba75-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="5ba75-215">Таким образом, он сохраняет максимальную совместимость с элементами управления, разработанные с применением та же платформа и как минимум intrudes на любые дополнительные JavaScript, написанный для страницы.</span><span class="sxs-lookup"><span data-stu-id="5ba75-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="5ba75-216">Биография</span><span class="sxs-lookup"><span data-stu-id="5ba75-216">Bio</span></span>

<span data-ttu-id="5ba75-217">Роб Paveza — старший разработчик приложения .NET Terralever ([www.terralever.com](http://www.terralever.com)), ведущая компания интерактивного маркетинга в Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="5ba75-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="5ba75-218">Ним можно связаться по адресу [ robpaveza@gmail.com ](mailto:robpaveza@gmail.com), а его блог находится в каталоге [ http://geekswithblogs.net/robp/ ](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="5ba75-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="5ba75-219">(Scott cate) работает с веб-технологиями Microsoft с 1997 года и является президентом myKB.com ([www.myKB.com](http://www.myKB.com)) приложений, внимание уделяется знаний программных решений, где он специализируется на написание ASP.NET на основе.</span><span class="sxs-lookup"><span data-stu-id="5ba75-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="5ba75-220">Скоттом можно связаться по электронной почте [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) или его блог по адресу [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="5ba75-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5ba75-221">[Назад](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Вперед](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="5ba75-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
