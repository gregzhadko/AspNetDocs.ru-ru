---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-authentication-and-profile-application-services
title: Общие сведения о проверке подлинности ASP.NET AJAX и Службы приложенийе профиля | Документация Майкрософт
author: scottcate
description: Служба проверки подлинности позволяет пользователям предоставлять учетные данные для получения файла cookie проверки подлинности, а служба шлюза — для разрешения настраиваемого пользователя...
ms.author: riande
ms.date: 03/14/2008
ms.assetid: 6ab4efb6-aab6-45ac-ad2c-bdec5848ef9e
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-authentication-and-profile-application-services
msc.type: authoredcontent
ms.openlocfilehash: cab9acb1ffd75cca87f6c575a6abdd000235828e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520314"
---
# <a name="understanding-aspnet-ajax-authentication-and-profile-application-services"></a><span data-ttu-id="5098c-103">Общие сведения о службах проверки подлинности и приложений профилей ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="5098c-103">Understanding ASP.NET AJAX Authentication and Profile Application Services</span></span>

<span data-ttu-id="5098c-104">по [Скотт Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="5098c-104">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="5098c-105">Скачать в формате PDF</span><span class="sxs-lookup"><span data-stu-id="5098c-105">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial03_MSAjax_ASP.NET_Services_cs.pdf)

> <span data-ttu-id="5098c-106">Служба проверки подлинности позволяет пользователям предоставлять учетные данные для получения файла cookie проверки подлинности, а служба шлюза — для разрешения настраиваемых профилей пользователей, предоставляемых ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-106">The Authentication service allows users to provide credentials in order to receive an authentication cookie, and is the gateway service to allow custom user profiles provided by ASP.NET.</span></span> <span data-ttu-id="5098c-107">Использование службы проверки подлинности ASP.NET AJAX совместимо со стандартной проверкой подлинности на основе форм ASP.NET, поэтому приложения, использующие проверку подлинности с помощью форм (например, с элементом управления Login), не будут разорваны путем обновления до службы проверки подлинности AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-107">Use of the ASP.NET AJAX authentication service is compatible with standard ASP.NET Forms authentication, so applications currently using Forms authentication (such as with the Login control) will not be broken by upgrading to the AJAX authentication service.</span></span>

## <a name="introduction"></a><span data-ttu-id="5098c-108">Введение</span><span class="sxs-lookup"><span data-stu-id="5098c-108">Introduction</span></span>

<span data-ttu-id="5098c-109">В рамках .NET Framework 3,5 корпорация Майкрософт предоставляет возможность обновления в среде с возможностью изменения размеров. доступна не только новая среда разработки, но и усовершенствования новых функций LINQ и других языков.</span><span class="sxs-lookup"><span data-stu-id="5098c-109">As part of the .NET Framework 3.5, Microsoft is delivering a sizable environment upgrade; not only is a new development environment available, but the new Language-Integrated Query (LINQ) features and other language enhancements are forthcoming.</span></span> <span data-ttu-id="5098c-110">Кроме того, некоторые знакомые функции других наборов инструментов, особенно ASP.NET расширения AJAX, включаются в качестве членов первого класса библиотеки базовых классов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5098c-110">In addition, some familiar features of other toolsets, notably the ASP.NET AJAX Extensions, are being included as first-class members of the .NET Framework Base Class Library.</span></span> <span data-ttu-id="5098c-111">Эти расширения включают в себя множество новых многофункциональных клиентских функций, включая частичную визуализацию страниц без полного обновления страницы, возможность доступа к веб-службам через клиентский сценарий (включая API профилирования ASP.NET) и обширный API на стороне клиента. предназначен для отражения многих схем управления, наблюдаемых в наборе серверных элементов управления ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-111">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="5098c-112">В этом техническом документе рассматривается реализация и использование служб ASP.NET профилирования и проверки подлинности с помощью форм, так как они доступны в Microsoft ASP.NET AJAX-расширения AJAX делают проверку подлинности форм чрезвычайно простой в поддержке, как она (а также Служба профилирования) предоставляется через скрипт прокси веб-службы.</span><span class="sxs-lookup"><span data-stu-id="5098c-112">This whitepaper looks at the implementation and use of the ASP.NET Profiling and Forms Authentication services as they are exposed by the Microsoft ASP.NET AJAX ExtensionsThe AJAX Extensions make Forms authentication incredibly easy to support, as it (as well as the Profiling Service) is exposed through a Web Service proxy script.</span></span> <span data-ttu-id="5098c-113">Расширения AJAX также поддерживают пользовательскую проверку подлинности с помощью класса Аусентикатионсервицеманажер.</span><span class="sxs-lookup"><span data-stu-id="5098c-113">The AJAX Extensions also support custom authentication through the AuthenticationServiceManager class.</span></span>

<span data-ttu-id="5098c-114">Этот технический документ основан на выпуске бета-версии 2 Visual Studio 2008 и .NET Framework 3,5.</span><span class="sxs-lookup"><span data-stu-id="5098c-114">This whitepaper is based on the Beta 2 release of the Visual Studio 2008 and the .NET Framework 3.5.</span></span> <span data-ttu-id="5098c-115">В этом техническом документе также предполагается, что вы будете работать с бета-версией 2 Visual Studio 2008, а не с Visual Web Developer Express, и предоставит пошаговые руководства в соответствии с пользовательским интерфейсом Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5098c-115">This whitepaper also assumes that you will be working with Visual Studio 2008 Beta 2, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio.</span></span> <span data-ttu-id="5098c-116">Некоторые примеры кода могут использовать шаблоны проектов, недоступные в Visual Web Developer Express.</span><span class="sxs-lookup"><span data-stu-id="5098c-116">Some code samples may utilize project templates unavailable in Visual Web Developer Express.</span></span>

## <a name="profiles-and-authentication"></a><span data-ttu-id="5098c-117">*Профили и проверка подлинности*</span><span class="sxs-lookup"><span data-stu-id="5098c-117">*Profiles and Authentication*</span></span>

<span data-ttu-id="5098c-118">Профили Microsoft ASP.NET и службы проверки подлинности предоставляются системой проверки подлинности форм ASP.NET и являются стандартными компонентами ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-118">The Microsoft ASP.NET Profiles and Authentication services are provided by the ASP.NET Forms Authentication system, and are standard components of ASP.NET.</span></span> <span data-ttu-id="5098c-119">Расширения AJAX ASP.NET предоставляют скрипту доступ к этим службам через прокси-серверы сценариев, используя довольно простую модель в пространстве имен sys. Services клиентской библиотеки AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-119">The ASP.NET AJAX Extensions provide script access to these services via script proxies, through a fairly straightforward model under the Sys.Services namespace of the client AJAX library.</span></span>

<span data-ttu-id="5098c-120">Служба проверки подлинности позволяет пользователям предоставлять учетные данные для получения файла cookie проверки подлинности, а служба шлюза — для разрешения настраиваемых профилей пользователей, предоставляемых ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-120">The Authentication service allows users to provide credentials in order to receive an authentication cookie, and is the gateway service to allow custom user profiles provided by ASP.NET.</span></span> <span data-ttu-id="5098c-121">Использование службы проверки подлинности ASP.NET AJAX совместимо со стандартной проверкой подлинности на основе форм ASP.NET, поэтому приложения, использующие проверку подлинности с помощью форм (например, с элементом управления Login), не будут разорваны путем обновления до службы проверки подлинности AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-121">Use of the ASP.NET AJAX authentication service is compatible with standard ASP.NET Forms authentication, so applications currently using Forms authentication (such as with the Login control) will not be broken by upgrading to the AJAX authentication service.</span></span>

<span data-ttu-id="5098c-122">Служба профиля обеспечивает автоматическую интеграцию и хранение пользовательских данных на основе членства, предоставляемых службой проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-122">The Profile service allows the automatic integration and storage of user data based on membership as provided by the Authentication service.</span></span> <span data-ttu-id="5098c-123">Сохраненные данные указываются в файле Web. config, а различные поставщики служб профилирования обработают управление данными.</span><span class="sxs-lookup"><span data-stu-id="5098c-123">The stored data is specified by the web.config file, and the various profiling service providers handle the data management.</span></span> <span data-ttu-id="5098c-124">Как и в случае со службой проверки подлинности, служба профиля AJAX совместима со стандартной службой профиля ASP.NET, поэтому страницы, в настоящее время включающие функции службы профиля ASP.NET, не следует разбивать, включая поддержку AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-124">As with the Authentication service, the AJAX Profile service is compatible with the standard ASP.NET profile service, so that pages currently incorporating features of the ASP.NET Profile service should not be broken by including AJAX support.</span></span>

<span data-ttu-id="5098c-125">Включение служб проверки подлинности и профилирования ASP.NET в приложение выходит за рамки этого технического документа.</span><span class="sxs-lookup"><span data-stu-id="5098c-125">Incorporating the ASP.NET Authentication and Profiling services themselves into an application is outside of the scope of this whitepaper.</span></span> <span data-ttu-id="5098c-126">Дополнительные сведения о данном разделе см. в справочной статье библиотеки MSDN Управление пользователями с помощью членства на [https://msdn.microsoft.com/library/tw292whz.aspx](https://msdn.microsoft.com/library/tw292whz.aspx).</span><span class="sxs-lookup"><span data-stu-id="5098c-126">For more information on the topic, see the MSDN Library reference article Managing Users by Using Membership at [https://msdn.microsoft.com/library/tw292whz.aspx](https://msdn.microsoft.com/library/tw292whz.aspx).</span></span> <span data-ttu-id="5098c-127">ASP.NET также включает служебную программу для автоматической настройки членства с SQL Server, которая является поставщиком службы проверки подлинности по умолчанию для членства ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-127">ASP.NET also includes a utility to automatically set up Membership with a SQL Server, which is the default authentication service provider for ASP.NET Membership.</span></span> <span data-ttu-id="5098c-128">Дополнительные сведения см. в статье ASP.NET SQL Server Registration Tool (ASPNET\_регскл. exe) по адресу [https://msdn.microsoft.com/library/ms229862(vs.80).aspx](https://msdn.microsoft.com/library/ms229862(vs.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="5098c-128">For more information, see the article ASP.NET SQL Server Registration Tool (Aspnet\_regsql.exe) at [https://msdn.microsoft.com/library/ms229862(vs.80).aspx](https://msdn.microsoft.com/library/ms229862(vs.80).aspx).</span></span>

## <a name="using-the-aspnet-ajax-authentication-service"></a><span data-ttu-id="5098c-129">*Использование службы проверки подлинности ASP.NET AJAX*</span><span class="sxs-lookup"><span data-stu-id="5098c-129">*Using the ASP.NET AJAX Authentication Service*</span></span>

<span data-ttu-id="5098c-130">В файле Web. config должна быть включена служба проверки подлинности ASP.NET AJAX:</span><span class="sxs-lookup"><span data-stu-id="5098c-130">The ASP.NET AJAX Authentication service must be enabled in the web.config file:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample1.xml)]

<span data-ttu-id="5098c-131">Служба проверки подлинности требует включения проверки подлинности ASP.NET Forms и требует включения файлов cookie в клиентском браузере (сценарий не может включить сеанс без файлов cookie, так как сеансы без файлов cookie требуют параметров URL-адреса).</span><span class="sxs-lookup"><span data-stu-id="5098c-131">The Authentication service requires ASP.NET Forms authentication to be enabled and requires cookies to be enabled on the client browser (a script cannot enable a cookieless session since cookieless sessions require URL parameters).</span></span>

<span data-ttu-id="5098c-132">После включения и настройки службы проверки подлинности AJAX клиентский скрипт может сразу же воспользоваться объектом sys. Services. AuthenticationService.</span><span class="sxs-lookup"><span data-stu-id="5098c-132">Once the AJAX authentication service is enabled and configured, client script can immediately take advantage of the Sys.Services.AuthenticationService object.</span></span> <span data-ttu-id="5098c-133">В основном клиентский скрипт будет использовать преимущества метода `login` и свойства `isLoggedIn`.</span><span class="sxs-lookup"><span data-stu-id="5098c-133">Primarily, client script will want to take advantage of the `login` method and `isLoggedIn` property.</span></span> <span data-ttu-id="5098c-134">Существует несколько свойств для предоставления значений по умолчанию для метода входа, что может принимать большое количество параметров.</span><span class="sxs-lookup"><span data-stu-id="5098c-134">Several properties exist to provide defaults for the login method, which can accept a large number of parameters.</span></span>

<span data-ttu-id="5098c-135">*Элементы sys. Services. AuthenticationService*</span><span class="sxs-lookup"><span data-stu-id="5098c-135">*Sys.Services.AuthenticationService members*</span></span>

<span data-ttu-id="5098c-136">*метод входа:*</span><span class="sxs-lookup"><span data-stu-id="5098c-136">*login method:*</span></span>

<span data-ttu-id="5098c-137">Метод Login () начинает запрос на проверку подлинности учетных данных пользователя.</span><span class="sxs-lookup"><span data-stu-id="5098c-137">The login() method begins a request to authenticate the user's credentials.</span></span> <span data-ttu-id="5098c-138">Этот метод является асинхронным и не блокирует выполнение.</span><span class="sxs-lookup"><span data-stu-id="5098c-138">This method is asynchronous and does not block execution.</span></span>

<span data-ttu-id="5098c-139">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-139">*Parameters:*</span></span>

| <span data-ttu-id="5098c-140">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-140">**Parameter Name**</span></span> | <span data-ttu-id="5098c-141">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-141">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-142">userName</span><span class="sxs-lookup"><span data-stu-id="5098c-142">userName</span></span> | <span data-ttu-id="5098c-143">Обязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="5098c-143">Required.</span></span> <span data-ttu-id="5098c-144">Имя пользователя для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-144">The username to authenticate.</span></span> |
| <span data-ttu-id="5098c-145">password</span><span class="sxs-lookup"><span data-stu-id="5098c-145">password</span></span> | <span data-ttu-id="5098c-146">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-146">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-147">Пароль пользователя.</span><span class="sxs-lookup"><span data-stu-id="5098c-147">The user's password.</span></span> |
| <span data-ttu-id="5098c-148">Persistent</span><span class="sxs-lookup"><span data-stu-id="5098c-148">isPersistent</span></span> | <span data-ttu-id="5098c-149">Необязательный (значение по умолчанию — false).</span><span class="sxs-lookup"><span data-stu-id="5098c-149">Optional (defaults to false).</span></span> <span data-ttu-id="5098c-150">Должен ли файл cookie проверки подлинности пользователя сохраняться в сеансах.</span><span class="sxs-lookup"><span data-stu-id="5098c-150">Whether the user's authentication cookie should persist across sessions.</span></span> <span data-ttu-id="5098c-151">Если задано значение false, то пользователь выйдет из сеанса, когда браузер закроется, или истечет срок его действия.</span><span class="sxs-lookup"><span data-stu-id="5098c-151">If false, the user will log out when the browser is closed or the session expires.</span></span> |
| <span data-ttu-id="5098c-152">redirectUrl</span><span class="sxs-lookup"><span data-stu-id="5098c-152">redirectUrl</span></span> | <span data-ttu-id="5098c-153">Необязательный (значение по умолчанию — NULL). URL-адрес для перенаправления браузера после успешной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-153">Optional (defaults to null).The URL to redirect the browser to upon successful authentication.</span></span> <span data-ttu-id="5098c-154">Если этот параметр имеет значение null или является пустой строкой, перенаправление не происходит.</span><span class="sxs-lookup"><span data-stu-id="5098c-154">If this parameter is null or an empty string, no redirection occurs.</span></span> |
| <span data-ttu-id="5098c-155">кустоминфо</span><span class="sxs-lookup"><span data-stu-id="5098c-155">customInfo</span></span> | <span data-ttu-id="5098c-156">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-156">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-157">Этот параметр в настоящее время не используется и зарезервирован для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="5098c-157">This parameter is currently unused and is reserved for future use.</span></span> |
| <span data-ttu-id="5098c-158">логинкомплетедкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-158">loginCompletedCallback</span></span> | <span data-ttu-id="5098c-159">Необязательный (значение по умолчанию — NULL). Функция, вызываемая при успешном завершении имени входа.</span><span class="sxs-lookup"><span data-stu-id="5098c-159">Optional (defaults to null).The function to call when the login has successfully completed.</span></span> <span data-ttu-id="5098c-160">Если этот параметр указан, он переопределяет свойство Дефаултлогинкомплетед.</span><span class="sxs-lookup"><span data-stu-id="5098c-160">If specified, this parameter overrides the defaultLoginCompleted property.</span></span> |
| <span data-ttu-id="5098c-161">фаиледкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-161">failedCallback</span></span> | <span data-ttu-id="5098c-162">Необязательный (значение по умолчанию — NULL). Функция, вызываемая при неудачном входе.</span><span class="sxs-lookup"><span data-stu-id="5098c-162">Optional (defaults to null).The function to call when the login has failed.</span></span> <span data-ttu-id="5098c-163">Если этот параметр указан, он переопределяет свойство Дефаултфаиледкаллбакк.</span><span class="sxs-lookup"><span data-stu-id="5098c-163">If specified, this parameter overrides the defaultFailedCallback property.</span></span> |
| <span data-ttu-id="5098c-164">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-164">userContext</span></span> | <span data-ttu-id="5098c-165">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-165">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-166">Настраиваемые данные контекста пользователя, которые должны быть переданы функциям обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="5098c-166">Custom user context data that should be passed to the callback functions.</span></span> |

<span data-ttu-id="5098c-167">*Return Value* (Возвращаемое значение).</span><span class="sxs-lookup"><span data-stu-id="5098c-167">*Return Value:*</span></span>

<span data-ttu-id="5098c-168">Эта функция не включает возвращаемое значение.</span><span class="sxs-lookup"><span data-stu-id="5098c-168">This function does not include a return value.</span></span> <span data-ttu-id="5098c-169">Однако при завершении вызова этой функции включается ряд поведений:</span><span class="sxs-lookup"><span data-stu-id="5098c-169">However, a number of behaviors are included upon completion of a call to this function:</span></span>

- <span data-ttu-id="5098c-170">Текущая страница будет либо обновлена, либо изменена, если параметр `redirectUrl` не имел ни значения NULL, ни пустой строки.</span><span class="sxs-lookup"><span data-stu-id="5098c-170">The current page will either be refreshed or be changed if the `redirectUrl` parameter was neither null nor an empty string.</span></span>
- <span data-ttu-id="5098c-171">Однако если параметр имел значение null или является пустой строкой, вызывается параметр `loginCompletedCallback` или свойство `defaultLoginCompletedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-171">However, if the parameter was null or an empty string, the `loginCompletedCallback` parameter, or `defaultLoginCompletedCallback` property is called.</span></span>
- <span data-ttu-id="5098c-172">В случае сбоя вызова веб-службы вызывается параметр `failedCallback` свойства `defaultFailedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-172">If the call to the web service fails, the `failedCallback` parameter of `defaultFailedCallback` property is called.</span></span>

<span data-ttu-id="5098c-173">*Метод Logout:*</span><span class="sxs-lookup"><span data-stu-id="5098c-173">*logout method:*</span></span>

<span data-ttu-id="5098c-174">Метод Logout () удаляет файл cookie учетных данных и записывает текущего пользователя из веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="5098c-174">The logout() method removes the credentials cookie and logs out the current user from the web application.</span></span>

<span data-ttu-id="5098c-175">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-175">*Parameters:*</span></span>

| <span data-ttu-id="5098c-176">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-176">**Parameter Name**</span></span> | <span data-ttu-id="5098c-177">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-177">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-178">redirectUrl</span><span class="sxs-lookup"><span data-stu-id="5098c-178">redirectUrl</span></span> | <span data-ttu-id="5098c-179">Необязательный (значение по умолчанию — NULL). URL-адрес для перенаправления браузера после успешной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-179">Optional (defaults to null).The URL to redirect the browser to upon successful authentication.</span></span> <span data-ttu-id="5098c-180">Если этот параметр имеет значение null или является пустой строкой, перенаправление не происходит.</span><span class="sxs-lookup"><span data-stu-id="5098c-180">If this parameter is null or an empty string, no redirection occurs.</span></span> |
| <span data-ttu-id="5098c-181">логауткомплетедкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-181">logoutCompletedCallback</span></span> | <span data-ttu-id="5098c-182">Необязательный (значение по умолчанию — NULL). Функция, вызываемая после успешного завершения выхода.</span><span class="sxs-lookup"><span data-stu-id="5098c-182">Optional (defaults to null).The function to call when the logout has successfully completed.</span></span> <span data-ttu-id="5098c-183">Если этот параметр указан, он переопределяет свойство Дефаултлогауткомплетед.</span><span class="sxs-lookup"><span data-stu-id="5098c-183">If specified, this parameter overrides the defaultLogoutCompleted property.</span></span> |
| <span data-ttu-id="5098c-184">фаиледкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-184">failedCallback</span></span> | <span data-ttu-id="5098c-185">Необязательный (значение по умолчанию — NULL). Функция, вызываемая при неудачном входе.</span><span class="sxs-lookup"><span data-stu-id="5098c-185">Optional (defaults to null).The function to call when the login has failed.</span></span> <span data-ttu-id="5098c-186">Если этот параметр указан, он переопределяет свойство Дефаултфаиледкаллбакк.</span><span class="sxs-lookup"><span data-stu-id="5098c-186">If specified, this parameter overrides the defaultFailedCallback property.</span></span> |
| <span data-ttu-id="5098c-187">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-187">userContext</span></span> | <span data-ttu-id="5098c-188">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-188">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-189">Настраиваемые данные контекста пользователя, которые должны быть переданы функциям обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="5098c-189">Custom user context data that should be passed to the callback functions.</span></span> |

<span data-ttu-id="5098c-190">*Return Value* (Возвращаемое значение).</span><span class="sxs-lookup"><span data-stu-id="5098c-190">*Return Value:*</span></span>

<span data-ttu-id="5098c-191">Эта функция не включает возвращаемое значение.</span><span class="sxs-lookup"><span data-stu-id="5098c-191">This function does not include a return value.</span></span> <span data-ttu-id="5098c-192">Однако при завершении вызова этой функции включается ряд поведений:</span><span class="sxs-lookup"><span data-stu-id="5098c-192">However, a number of behaviors are included upon completion of a call to this function:</span></span>

- <span data-ttu-id="5098c-193">Текущая страница будет либо обновлена, либо изменена, если параметр `redirectUrl` не имел ни значения NULL, ни пустой строки.</span><span class="sxs-lookup"><span data-stu-id="5098c-193">The current page will either be refreshed or be changed if the `redirectUrl` parameter was neither null nor an empty string.</span></span>
- <span data-ttu-id="5098c-194">Однако если параметр имел значение null или является пустой строкой, вызывается параметр `logoutCompletedCallback` или свойство `defaultLogoutCompletedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-194">However, if the parameter was null or an empty string, the `logoutCompletedCallback` parameter, or `defaultLogoutCompletedCallback` property is called.</span></span>
- <span data-ttu-id="5098c-195">В случае сбоя вызова веб-службы вызывается параметр `failedCallback` свойства `defaultFailedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-195">If the call to the web service fails, the `failedCallback` parameter of `defaultFailedCallback` property is called.</span></span>

<span data-ttu-id="5098c-196">*Свойство Дефаултфаиледкаллбакк (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-196">*defaultFailedCallback property (get, set):*</span></span>

<span data-ttu-id="5098c-197">Это свойство указывает функцию, которая должна вызываться, если происходит сбой связи с веб-службой.</span><span class="sxs-lookup"><span data-stu-id="5098c-197">This property specifies a function that should be called if a failure to communicate with the web service occurs.</span></span> <span data-ttu-id="5098c-198">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-198">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-199">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-199">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample2.js)]

<span data-ttu-id="5098c-200">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-200">*Parameters:*</span></span>

| <span data-ttu-id="5098c-201">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-201">**Parameter Name**</span></span> | <span data-ttu-id="5098c-202">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-202">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-203">ошибка</span><span class="sxs-lookup"><span data-stu-id="5098c-203">error</span></span> | <span data-ttu-id="5098c-204">Указывает сведения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="5098c-204">Specifies the error information.</span></span> |
| <span data-ttu-id="5098c-205">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-205">userContext</span></span> | <span data-ttu-id="5098c-206">Указывает сведения о контексте пользователя, предоставляемые при вызове функции входа или выхода.</span><span class="sxs-lookup"><span data-stu-id="5098c-206">Specifies the user context information provided when the login or logout function was called.</span></span> |
| <span data-ttu-id="5098c-207">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-207">methodName</span></span> | <span data-ttu-id="5098c-208">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-208">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-209">*Свойство Дефаултлогинкомплетедкаллбакк (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-209">*defaultLoginCompletedCallback property (get, set):*</span></span>

<span data-ttu-id="5098c-210">Это свойство задает функцию, которая должна вызываться при завершении вызова веб-службы входа.</span><span class="sxs-lookup"><span data-stu-id="5098c-210">This property specifies a function that should be called when the login web service call has completed.</span></span> <span data-ttu-id="5098c-211">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-211">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-212">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-212">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample3.js)]

<span data-ttu-id="5098c-213">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-213">*Parameters:*</span></span>

| <span data-ttu-id="5098c-214">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-214">**Parameter Name**</span></span> | <span data-ttu-id="5098c-215">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-215">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-216">валидкредентиалс</span><span class="sxs-lookup"><span data-stu-id="5098c-216">validCredentials</span></span> | <span data-ttu-id="5098c-217">Указывает, предоставил ли пользователь действительные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="5098c-217">Specifies whether the user provided valid credentials.</span></span> <span data-ttu-id="5098c-218">`true`, если пользователь успешно вошел в систему; в противном случае `false`.</span><span class="sxs-lookup"><span data-stu-id="5098c-218">`true` if the user successfully logged in; otherwise `false`.</span></span> |
| <span data-ttu-id="5098c-219">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-219">userContext</span></span> | <span data-ttu-id="5098c-220">Указывает сведения о контексте пользователя, предоставляемые при вызове функции входа.</span><span class="sxs-lookup"><span data-stu-id="5098c-220">Specifies the user context information provided when the login function was called.</span></span> |
| <span data-ttu-id="5098c-221">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-221">methodName</span></span> | <span data-ttu-id="5098c-222">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-222">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-223">*Свойство Дефаултлогауткомплетедкаллбакк (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-223">*defaultLogoutCompletedCallback property (get, set):*</span></span>

<span data-ttu-id="5098c-224">Это свойство задает функцию, которая должна вызываться после завершения вызова веб-службы Logout.</span><span class="sxs-lookup"><span data-stu-id="5098c-224">This property specifies a function that should be called when the logout web service call has completed.</span></span> <span data-ttu-id="5098c-225">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-225">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-226">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-226">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample4.js)]

<span data-ttu-id="5098c-227">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-227">*Parameters:*</span></span>

| <span data-ttu-id="5098c-228">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-228">**Parameter Name**</span></span> | <span data-ttu-id="5098c-229">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-229">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-230">набор по</span><span class="sxs-lookup"><span data-stu-id="5098c-230">result</span></span> | <span data-ttu-id="5098c-231">Этот параметр всегда будет `null`. он зарезервирован для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="5098c-231">This parameter will always be `null`; it is reserved for future use.</span></span> |
| <span data-ttu-id="5098c-232">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-232">userContext</span></span> | <span data-ttu-id="5098c-233">Указывает сведения о контексте пользователя, предоставляемые при вызове функции входа.</span><span class="sxs-lookup"><span data-stu-id="5098c-233">Specifies the user context information provided when the login function was called.</span></span> |
| <span data-ttu-id="5098c-234">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-234">methodName</span></span> | <span data-ttu-id="5098c-235">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-235">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-236">*свойство с ведением журнала (Get):*</span><span class="sxs-lookup"><span data-stu-id="5098c-236">*isLoggedIn property (get):*</span></span>

<span data-ttu-id="5098c-237">Это свойство возвращает текущее состояние проверки подлинности пользователя. Он задается объектом ScriptManager во время запроса страницы.</span><span class="sxs-lookup"><span data-stu-id="5098c-237">This property gets the current authentication state of the user; it is set by the ScriptManager object during a page request.</span></span>

<span data-ttu-id="5098c-238">Это свойство возвращает значение, `true`, если пользователь в данный момент вошел в систему. в противном случае возвращается `false`.</span><span class="sxs-lookup"><span data-stu-id="5098c-238">This property returns `true` if the user is currently logged in; otherwise, it returns `false`.</span></span>

<span data-ttu-id="5098c-239">*Свойство пути (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-239">*path property (get, set):*</span></span>

<span data-ttu-id="5098c-240">Это свойство программно определяет расположение веб-службы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-240">This property programmatically determines the location of the authentication web service.</span></span> <span data-ttu-id="5098c-241">Его можно использовать для переопределения поставщика проверки подлинности по умолчанию, а также декларативного набора в свойстве Path дочернего узла AuthenticationService элемента управления ScriptManager (Дополнительные сведения см. в разделе Использование пользовательского поставщика службы проверки подлинности. раздел приведен ниже.)</span><span class="sxs-lookup"><span data-stu-id="5098c-241">It can be used to override the default authentication provider, as well as one set declaratively in the Path property of the ScriptManager control's AuthenticationService child node (for more information, see the Using a Custom Authentication Service Provider topic below).</span></span>

<span data-ttu-id="5098c-242">Обратите внимание, что расположение службы проверки подлинности по умолчанию не меняется.</span><span class="sxs-lookup"><span data-stu-id="5098c-242">Note that the location of the default authentication service does not change.</span></span> <span data-ttu-id="5098c-243">Однако ASP.NET AJAX позволяет указать расположение веб-службы, которая предоставляет тот же интерфейс класса, что и прокси-сервер службы проверки подлинности ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-243">However, ASP.NET AJAX allows you to specify the location of a web service that provides the same class interface as the ASP.NET AJAX authentication service proxy.</span></span>

<span data-ttu-id="5098c-244">Обратите внимание, что для этого свойства не должно быть задано значение, направляющее запрос скрипта к текущему сайту.</span><span class="sxs-lookup"><span data-stu-id="5098c-244">Note also that this property should not be set to a value that directs the script request off of the current site.</span></span> <span data-ttu-id="5098c-245">Поскольку текущее приложение не получит учетные данные для проверки подлинности, оно было бы бесполезным. Кроме того, базовая технология AJAX не должна разносить межсайтовые запросы и может вызвать исключение безопасности в клиентском браузере.</span><span class="sxs-lookup"><span data-stu-id="5098c-245">Because the current application would not receive the authentication credentials, it would be useless; also, the technology underlying AJAX should not post cross-site requests, and may generate a security exception in the client browser.</span></span>

<span data-ttu-id="5098c-246">Это свойство является объектом `String`, представляющим путь к веб-службе проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-246">This property is a `String` object representing the path to the authentication web service.</span></span>

<span data-ttu-id="5098c-247">*Свойство времени ожидания (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-247">*timeout property (get, set):*</span></span>

<span data-ttu-id="5098c-248">Это свойство определяет период ожидания для службы проверки подлинности перед тем, как предположить, что запрос на вход не выполнен.</span><span class="sxs-lookup"><span data-stu-id="5098c-248">This property determines the length of time to wait for the authentication service before assuming the login request has failed.</span></span> <span data-ttu-id="5098c-249">Если время ожидания истекает при ожидании завершения вызова, вызывается обратный вызов, не являющийся запросом, и вызов не будет завершен.</span><span class="sxs-lookup"><span data-stu-id="5098c-249">If the timeout expires while waiting for a call to complete, the request-failed callback will be called, and the call will not complete.</span></span>

<span data-ttu-id="5098c-250">Это свойство является объектом `Number`, представляющим количество миллисекунд ожидания результатов от службы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5098c-250">This property is a `Number` object representing the number of milliseconds to wait for results from the authentication service.</span></span>

<span data-ttu-id="5098c-251">*Пример кода: вход в службу проверки подлинности*</span><span class="sxs-lookup"><span data-stu-id="5098c-251">*Code Sample: Logging into the Authentication Service*</span></span>

<span data-ttu-id="5098c-252">Следующая разметка представляет собой пример страницы ASP.NET с простым вызовом скрипта для методов login и Logout класса AuthenticationService.</span><span class="sxs-lookup"><span data-stu-id="5098c-252">The following markup is an example ASP.NET page with a simple script call to the login and logout methods of the AuthenticationService class.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample5.aspx)]

## <a name="accessing-aspnet-profiling-data-via-ajax"></a><span data-ttu-id="5098c-253">Доступ к данным профилирования ASP.NET через AJAX</span><span class="sxs-lookup"><span data-stu-id="5098c-253">Accessing ASP.NET Profiling Data via AJAX</span></span>

<span data-ttu-id="5098c-254">Служба профилирования ASP.NET также предоставляется через расширения AJAX для ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5098c-254">The ASP.NET profiling service is also exposed through the ASP.NET AJAX Extensions.</span></span> <span data-ttu-id="5098c-255">Так как служба профилирования ASP.NET предоставляет обширный детализированный API-интерфейс для хранения и извлечения пользовательских данных, это может быть отличным средством повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="5098c-255">Since the ASP.NET profiling service provides a rich, granular API by which to store and retrieve user data, this can be an excellent productivity tool.</span></span>

<span data-ttu-id="5098c-256">Служба профиля должна быть включена в файле Web. config; по умолчанию он не используется.</span><span class="sxs-lookup"><span data-stu-id="5098c-256">The profile service must be enabled in web.config; it is not by default.</span></span> <span data-ttu-id="5098c-257">Для этого убедитесь, что для дочернего элемента `profileService` включен параметр = true в файле Web. config и что вы указали, какие свойства можно считывать или записывать следующим образом:</span><span class="sxs-lookup"><span data-stu-id="5098c-257">To do so, ensure that the `profileService` child element has enabled= true specified in web.config, and that you have specified which properties can be read or written as follows:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample6.xml)]

<span data-ttu-id="5098c-258">Необходимо также настроить службу профиля.</span><span class="sxs-lookup"><span data-stu-id="5098c-258">The profile service must also be configured.</span></span> <span data-ttu-id="5098c-259">Несмотря на то, что настройка службы профилирования выходит за рамки этого документа, стоит отметить, что группы, как определено в параметрах конфигурации профиля, будут доступны как подсвойства имени группы.</span><span class="sxs-lookup"><span data-stu-id="5098c-259">Although configuration of the profiling service is outside of the scope of this whitepaper, it is worthwhile to note that groups as defined in profile configuration settings will be accessible as sub-properties of the group name.</span></span> <span data-ttu-id="5098c-260">Например, при указании следующего раздела профиля:</span><span class="sxs-lookup"><span data-stu-id="5098c-260">For example, with the following profile section specified:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample7.xml)]

<span data-ttu-id="5098c-261">Клиентский сценарий сможет получить доступ к имени, адресу, строка1, Address. Строка2, Address. город, Address. штат, Address. zip и BackgroundColor в качестве свойств поля свойств класса ProfileService.</span><span class="sxs-lookup"><span data-stu-id="5098c-261">Client script would be able to access Name, Address.Line1, Address.Line2, Address.City, Address.State, Address.Zip, and BackgroundColor as properties of the properties field of the ProfileService class.</span></span>

<span data-ttu-id="5098c-262">После настройки службы профилирования AJAX она будет немедленно доступна на страницах. Однако он должен быть загружен один раз перед использованием.</span><span class="sxs-lookup"><span data-stu-id="5098c-262">Once the AJAX Profiling Service is configured, it will be immediately available in pages; however, it will have to be loaded once before use.</span></span>

<span data-ttu-id="5098c-263">*Элементы sys. Services. ProfileService*</span><span class="sxs-lookup"><span data-stu-id="5098c-263">*Sys.Services.ProfileService members*</span></span>

<span data-ttu-id="5098c-264">*поле свойств:*</span><span class="sxs-lookup"><span data-stu-id="5098c-264">*properties field:*</span></span>

<span data-ttu-id="5098c-265">Поле свойства предоставляет все настроенные данные профиля как дочерние свойства, на которые может ссылаться соглашение "точка-имя".</span><span class="sxs-lookup"><span data-stu-id="5098c-265">The properties field exposes all configured profile data as child properties that can be referenced by the dot-operator-name convention.</span></span> <span data-ttu-id="5098c-266">Свойства, являющиеся дочерними для групп свойств, называются GroupName. PropertyName.</span><span class="sxs-lookup"><span data-stu-id="5098c-266">Properties that are children of property groups are referred to as GroupName.PropertyName.</span></span> <span data-ttu-id="5098c-267">В примере конфигурации профиля, приведенном выше, чтобы получить состояние пользователя, можно использовать следующий идентификатор:</span><span class="sxs-lookup"><span data-stu-id="5098c-267">In the example profile configuration presented above, to get the state of the user, you could use the following identifier:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample8.cs)]

<span data-ttu-id="5098c-268">*метод Load:*</span><span class="sxs-lookup"><span data-stu-id="5098c-268">*load method:*</span></span>

<span data-ttu-id="5098c-269">Загружает выбранный список или все свойства с сервера.</span><span class="sxs-lookup"><span data-stu-id="5098c-269">Loads a selected list or all properties from the server.</span></span>

<span data-ttu-id="5098c-270">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-270">*Parameters:*</span></span>

| <span data-ttu-id="5098c-271">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-271">**Parameter Name**</span></span> | <span data-ttu-id="5098c-272">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-272">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-273">propertyNames</span><span class="sxs-lookup"><span data-stu-id="5098c-273">propertyNames</span></span> | <span data-ttu-id="5098c-274">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-274">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-275">Свойства, загружаемые с сервера.</span><span class="sxs-lookup"><span data-stu-id="5098c-275">The properties to be loaded from the server.</span></span> |
| <span data-ttu-id="5098c-276">лоадкомплетедкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-276">loadCompletedCallback</span></span> | <span data-ttu-id="5098c-277">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-277">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-278">Функция, вызываемая при завершении загрузки.</span><span class="sxs-lookup"><span data-stu-id="5098c-278">The function to call when loading has completed.</span></span> |
| <span data-ttu-id="5098c-279">фаиледкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-279">failedCallback</span></span> | <span data-ttu-id="5098c-280">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-280">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-281">Функция, вызываемая при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="5098c-281">The function to call if an error occurs.</span></span> |
| <span data-ttu-id="5098c-282">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-282">userContext</span></span> | <span data-ttu-id="5098c-283">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-283">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-284">Контекстная информация, передаваемая функции обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="5098c-284">Context information to be passed to the callback function.</span></span> |

<span data-ttu-id="5098c-285">Функция Load не имеет возвращаемого значения.</span><span class="sxs-lookup"><span data-stu-id="5098c-285">The load function does not have a return value.</span></span> <span data-ttu-id="5098c-286">Если вызов завершился успешно, он вызовет либо параметр `loadCompletedCallback`, либо свойство `defaultLoadCompletedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-286">If the call completed successfully, it will call either the `loadCompletedCallback` parameter or `defaultLoadCompletedCallback` property.</span></span> <span data-ttu-id="5098c-287">Если при вызове произошел сбой или истекло время ожидания, будет вызван либо параметр `failedCallback`, либо свойство `defaultFailedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-287">If the call failed, or the timeout expired, either the `failedCallback` parameter or `defaultFailedCallback` property will be called.</span></span>

<span data-ttu-id="5098c-288">Если параметр `propertyNames` не указан, все свойства, настроенные для чтения, извлекаются с сервера.</span><span class="sxs-lookup"><span data-stu-id="5098c-288">If the `propertyNames` parameter is not supplied, all read-configured properties are retrieved from the server.</span></span>

<span data-ttu-id="5098c-289">*метод Save:*</span><span class="sxs-lookup"><span data-stu-id="5098c-289">*save method:*</span></span>

<span data-ttu-id="5098c-290">Метод Save () сохраняет указанный список свойств (или все свойства) в профиле ASP.NET пользователя.</span><span class="sxs-lookup"><span data-stu-id="5098c-290">The save() method saves the specified property list (or all properties) to the user's ASP.NET profile.</span></span>

<span data-ttu-id="5098c-291">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-291">*Parameters:*</span></span>

| <span data-ttu-id="5098c-292">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-292">**Parameter Name**</span></span> | <span data-ttu-id="5098c-293">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-293">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-294">propertyNames</span><span class="sxs-lookup"><span data-stu-id="5098c-294">propertyNames</span></span> | <span data-ttu-id="5098c-295">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-295">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-296">Свойства, которые необходимо сохранить на сервере.</span><span class="sxs-lookup"><span data-stu-id="5098c-296">The properties to be saved to the server.</span></span> |
| <span data-ttu-id="5098c-297">савекомплетедкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-297">saveCompletedCallback</span></span> | <span data-ttu-id="5098c-298">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-298">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-299">Функция, вызываемая при завершении сохранения.</span><span class="sxs-lookup"><span data-stu-id="5098c-299">The function to call when saving has completed.</span></span> |
| <span data-ttu-id="5098c-300">фаиледкаллбакк</span><span class="sxs-lookup"><span data-stu-id="5098c-300">failedCallback</span></span> | <span data-ttu-id="5098c-301">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-301">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-302">Функция, вызываемая при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="5098c-302">The function to call if an error occurs.</span></span> |
| <span data-ttu-id="5098c-303">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-303">userContext</span></span> | <span data-ttu-id="5098c-304">Необязательный (значение по умолчанию — NULL).</span><span class="sxs-lookup"><span data-stu-id="5098c-304">Optional (defaults to null).</span></span> <span data-ttu-id="5098c-305">Контекстная информация, передаваемая функции обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="5098c-305">Context information to be passed to the callback function.</span></span> |

<span data-ttu-id="5098c-306">Функция Save не имеет возвращаемого значения.</span><span class="sxs-lookup"><span data-stu-id="5098c-306">The save function does not have a return value.</span></span> <span data-ttu-id="5098c-307">Если вызов завершается успешно, он вызывает либо параметр `saveCompletedCallback`, либо свойство `defaultSaveCompletedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-307">If the call completes successfully, it will call either the `saveCompletedCallback` parameter or `defaultSaveCompletedCallback` property.</span></span> <span data-ttu-id="5098c-308">Если при вызове произошел сбой или истекло время ожидания, будет вызвано либо свойство `failedCallback`, либо `defaultFailedCallback`.</span><span class="sxs-lookup"><span data-stu-id="5098c-308">If the call failed, or the timeout expired, either the `failedCallback` or `defaultFailedCallback` property will be called.</span></span>

<span data-ttu-id="5098c-309">Если параметр `propertyNames` имеет значение null, все свойства профиля будут отправлены на сервер, и сервер определит, какие свойства можно сохранить, а какие — нет.</span><span class="sxs-lookup"><span data-stu-id="5098c-309">If the `propertyNames` parameter is null, all profile properties will be sent to the server, and the server will decide which properties can be saved and which cannot.</span></span>

<span data-ttu-id="5098c-310">*Свойство Дефаултфаиледкаллбакк (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-310">*defaultFailedCallback property (get, set):*</span></span>

<span data-ttu-id="5098c-311">Это свойство указывает функцию, которая должна вызываться, если происходит сбой связи с веб-службой.</span><span class="sxs-lookup"><span data-stu-id="5098c-311">This property specifies a function that should be called if a failure to communicate with the web service occurs.</span></span> <span data-ttu-id="5098c-312">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-312">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-313">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-313">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample9.js)]

<span data-ttu-id="5098c-314">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-314">*Parameters:*</span></span>

| <span data-ttu-id="5098c-315">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-315">**Parameter Name**</span></span> | <span data-ttu-id="5098c-316">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-316">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-317">Ошибка</span><span class="sxs-lookup"><span data-stu-id="5098c-317">Error</span></span> | <span data-ttu-id="5098c-318">Указывает сведения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="5098c-318">Specifies the error information.</span></span> |
| <span data-ttu-id="5098c-319">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-319">userContext</span></span> | <span data-ttu-id="5098c-320">Указывает сведения о контексте пользователя, предоставляемые при вызове функции Load или Save.</span><span class="sxs-lookup"><span data-stu-id="5098c-320">Specifies the user context information provided when the load or save function was called.</span></span> |
| <span data-ttu-id="5098c-321">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-321">methodName</span></span> | <span data-ttu-id="5098c-322">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-322">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-323">*Свойство Дефаултсавекомплетед (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-323">*defaultSaveCompleted property (get, set):*</span></span>

<span data-ttu-id="5098c-324">Это свойство задает функцию, которая должна вызываться после завершения сохранения данных профиля пользователя.</span><span class="sxs-lookup"><span data-stu-id="5098c-324">This property specifies a function that should be called upon the completion of saving the user's profile data.</span></span> <span data-ttu-id="5098c-325">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-325">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-326">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-326">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample10.js)]

<span data-ttu-id="5098c-327">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-327">*Parameters:*</span></span>

| <span data-ttu-id="5098c-328">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-328">**Parameter Name**</span></span> | <span data-ttu-id="5098c-329">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-329">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-330">нумпропссавед</span><span class="sxs-lookup"><span data-stu-id="5098c-330">numPropsSaved</span></span> | <span data-ttu-id="5098c-331">Указывает количество сохраненных свойств.</span><span class="sxs-lookup"><span data-stu-id="5098c-331">Specifies the number of properties that were saved.</span></span> |
| <span data-ttu-id="5098c-332">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-332">userContext</span></span> | <span data-ttu-id="5098c-333">Указывает сведения о контексте пользователя, предоставляемые при вызове функции Load или Save.</span><span class="sxs-lookup"><span data-stu-id="5098c-333">Specifies the user context information provided when the load or save function was called.</span></span> |
| <span data-ttu-id="5098c-334">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-334">methodName</span></span> | <span data-ttu-id="5098c-335">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-335">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-336">*Свойство Дефаултлоадкомплетед (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-336">*defaultLoadCompleted property (get, set):*</span></span>

<span data-ttu-id="5098c-337">Это свойство задает функцию, которая должна вызываться после завершения загрузки данных профиля пользователя.</span><span class="sxs-lookup"><span data-stu-id="5098c-337">This property specifies a function that should be called upon the completion of loading of the user's profile data.</span></span> <span data-ttu-id="5098c-338">Он должен получить делегат (или ссылку на функцию).</span><span class="sxs-lookup"><span data-stu-id="5098c-338">It should receive a delegate (or function reference).</span></span>

<span data-ttu-id="5098c-339">Ссылка на функцию, заданная этим свойством, должна иметь следующую сигнатуру:</span><span class="sxs-lookup"><span data-stu-id="5098c-339">The function reference specified by this property should have the following signature:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample11.js)]

<span data-ttu-id="5098c-340">*Параметры:*</span><span class="sxs-lookup"><span data-stu-id="5098c-340">*Parameters:*</span></span>

| <span data-ttu-id="5098c-341">**Имя параметра**</span><span class="sxs-lookup"><span data-stu-id="5098c-341">**Parameter Name**</span></span> | <span data-ttu-id="5098c-342">**Значение**</span><span class="sxs-lookup"><span data-stu-id="5098c-342">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="5098c-343">нумпропслоадед</span><span class="sxs-lookup"><span data-stu-id="5098c-343">numPropsLoaded</span></span> | <span data-ttu-id="5098c-344">Указывает число загруженных свойств.</span><span class="sxs-lookup"><span data-stu-id="5098c-344">Specifies the number of properties loaded.</span></span> |
| <span data-ttu-id="5098c-345">userContext</span><span class="sxs-lookup"><span data-stu-id="5098c-345">userContext</span></span> | <span data-ttu-id="5098c-346">Указывает сведения о контексте пользователя, предоставляемые при вызове функции Load или Save.</span><span class="sxs-lookup"><span data-stu-id="5098c-346">Specifies the user context information provided when the load or save function was called.</span></span> |
| <span data-ttu-id="5098c-347">methodName</span><span class="sxs-lookup"><span data-stu-id="5098c-347">methodName</span></span> | <span data-ttu-id="5098c-348">Имя вызывающего метода.</span><span class="sxs-lookup"><span data-stu-id="5098c-348">The name of the calling method.</span></span> |

<span data-ttu-id="5098c-349">*Свойство пути (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-349">*path property (get, set):*</span></span>

<span data-ttu-id="5098c-350">Это свойство программно определяет расположение веб-службы профиля.</span><span class="sxs-lookup"><span data-stu-id="5098c-350">This property programmatically determines the location of the profile web service.</span></span> <span data-ttu-id="5098c-351">Его можно использовать для переопределения поставщика службы профиля по умолчанию, а также для декларативного задания в свойстве Path дочернего узла ProfileService элемента управления ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="5098c-351">It can be used to override the default profile service provider, as well as one set declaratively in the Path property of the ScriptManager control's ProfileService child node.</span></span>

<span data-ttu-id="5098c-352">Обратите внимание, что расположение службы профиля по умолчанию не изменяется.</span><span class="sxs-lookup"><span data-stu-id="5098c-352">Note that the location of the default profile service does not change.</span></span> <span data-ttu-id="5098c-353">Однако ASP.NET AJAX позволяет указать расположение веб-службы, которая предоставляет тот же интерфейс класса, что и прокси-сервер службы проверки подлинности ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="5098c-353">However, ASP.NET AJAX allows you to specify the location of a web service that provides the same class interface as the ASP.NET AJAX authentication service proxy.</span></span>

<span data-ttu-id="5098c-354">Обратите внимание, что для этого свойства не должно быть задано значение, направляющее запрос скрипта к текущему сайту.</span><span class="sxs-lookup"><span data-stu-id="5098c-354">Note also that this property should not be set to a value that directs the script request off of the current site.</span></span> <span data-ttu-id="5098c-355">Базовая технология AJAX не должна разносить межсайтовые запросы и может вызвать исключение безопасности в клиентском браузере.</span><span class="sxs-lookup"><span data-stu-id="5098c-355">The technology underlying AJAX should not post cross-site requests, and may generate a security exception in the client browser.</span></span>

<span data-ttu-id="5098c-356">Это свойство является объектом `String`, представляющим путь к веб-службе профиля.</span><span class="sxs-lookup"><span data-stu-id="5098c-356">This property is a `String` object representing the path to the profile web service.</span></span>

<span data-ttu-id="5098c-357">*Свойство времени ожидания (Get, Set):*</span><span class="sxs-lookup"><span data-stu-id="5098c-357">*timeout property (get, set):*</span></span>

<span data-ttu-id="5098c-358">Это свойство определяет продолжительность времени ожидания службы профиля до предположения, что запрос на загрузку или сохранение завершился неудачей.</span><span class="sxs-lookup"><span data-stu-id="5098c-358">This property determines the length of time to wait for the profile service before assuming the load or save request has failed.</span></span> <span data-ttu-id="5098c-359">Если время ожидания истекает при ожидании завершения вызова, вызывается обратный вызов, не являющийся запросом, и вызов не будет завершен.</span><span class="sxs-lookup"><span data-stu-id="5098c-359">If the timeout expires while waiting for a call to complete, the request-failed callback will be called, and the call will not complete.</span></span>

<span data-ttu-id="5098c-360">Это свойство является объектом `Number`, представляющим количество миллисекунд ожидания результатов из службы профиля.</span><span class="sxs-lookup"><span data-stu-id="5098c-360">This property is a `Number` object representing the number of milliseconds to wait for results from the profile service.</span></span>

<span data-ttu-id="5098c-361">*Пример кода: Загрузка данных профиля при загрузке страницы*</span><span class="sxs-lookup"><span data-stu-id="5098c-361">*Code sample: Loading profile data at page load*</span></span>

<span data-ttu-id="5098c-362">Следующий код проверит, прошел ли пользователь проверку подлинности, и если да, то загрузит предпочтительный цвет фона пользователя в качестве страницы.</span><span class="sxs-lookup"><span data-stu-id="5098c-362">The following code will check to see whether a user is authenticated, and if so, will load the user's preferred background color as the page's.</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample12.js)]

## <a name="using-a-custom-authentication-service-provider"></a><span data-ttu-id="5098c-363">*Использование пользовательского поставщика службы проверки подлинности*</span><span class="sxs-lookup"><span data-stu-id="5098c-363">*Using a Custom Authentication Service Provider*</span></span>

<span data-ttu-id="5098c-364">Расширения AJAX ASP.NET позволяют создать поставщик службы проверки подлинности пользовательского скрипта, предоставив функциональные возможности через пользовательскую веб-службу.</span><span class="sxs-lookup"><span data-stu-id="5098c-364">The ASP.NET AJAX Extensions allow you to create a custom script authentication service provider by exposing your functionality through a custom web service.</span></span> <span data-ttu-id="5098c-365">Для использования веб-служба должна предоставлять два метода: `Login` и `Logout`. и эти методы должны быть указаны с теми же сигнатурами методов, что и веб-служба проверки подлинности ASP.NET AJAX по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5098c-365">In order to be used, your web service must expose two methods, `Login` and `Logout`; and these methods must be specified with the same method signatures as the default ASP.NET AJAX Authentication web service.</span></span>

<span data-ttu-id="5098c-366">После создания пользовательской веб-службы необходимо указать путь к ней либо декларативно на странице, либо программно в коде, либо с помощью клиентского скрипта.</span><span class="sxs-lookup"><span data-stu-id="5098c-366">Once you have created the custom web service, you will need to specify the path to it, either declaratively on your page, programmatically in code, or via the client script.</span></span>

<span data-ttu-id="5098c-367">*Чтобы декларативно задать путь:*</span><span class="sxs-lookup"><span data-stu-id="5098c-367">*To set the path declaratively:*</span></span>

<span data-ttu-id="5098c-368">Чтобы декларативно задать путь, включите дочерний элемент AuthenticationService объекта ScriptManager на странице ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="5098c-368">To set the path declaratively, include the AuthenticationService child of the ScriptManager object on your ASP.NET page:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample13.aspx)]

<span data-ttu-id="5098c-369">*Чтобы задать путь в коде, выполните следующие действия.*</span><span class="sxs-lookup"><span data-stu-id="5098c-369">*To set the path in code:*</span></span>

<span data-ttu-id="5098c-370">Чтобы задать путь программно, укажите путь через экземпляр диспетчера скриптов:</span><span class="sxs-lookup"><span data-stu-id="5098c-370">To set the path programmatically, specify the path via the instance of your script manager:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample14.cs)]

<span data-ttu-id="5098c-371">*Чтобы задать путь в скрипте, выполните следующие действия.*</span><span class="sxs-lookup"><span data-stu-id="5098c-371">*To set the path in script:*</span></span>

<span data-ttu-id="5098c-372">Чтобы задать путь программным способом в скрипте, используйте свойство `path` класса AuthenticationService:</span><span class="sxs-lookup"><span data-stu-id="5098c-372">To set the path programmatically in script, utilize the `path` property of the AuthenticationService class:</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample15.js)]

<span data-ttu-id="5098c-373">*Пример веб-службы для пользовательской проверки подлинности*</span><span class="sxs-lookup"><span data-stu-id="5098c-373">*Sample Web Service for Custom Authentication*</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-authentication-and-profile-application-services/samples/sample16.aspx)]

## <a name="summary"></a><span data-ttu-id="5098c-374">Сводка</span><span class="sxs-lookup"><span data-stu-id="5098c-374">Summary</span></span>

<span data-ttu-id="5098c-375">Службы ASP.NET Services, в частности профилирование, членство и службы проверки подлинности, легко предоставляются JavaScript в клиентском браузере.</span><span class="sxs-lookup"><span data-stu-id="5098c-375">ASP.NET services - specifically the profiling, membership, and authentication services - are easily exposed to JavaScript on the client browser.</span></span> <span data-ttu-id="5098c-376">Это позволяет разработчикам легко интегрировать код на стороне клиента с механизмом проверки подлинности без необходимости в зависимости от таких элементов управления, как UpdatePanel, для выполнения тяжелой работы.</span><span class="sxs-lookup"><span data-stu-id="5098c-376">This allows developers to integrate their client-side code with the authentication mechanism seamlessly, without depending on controls such as UpdatePanels to do the heavy lifting.</span></span> <span data-ttu-id="5098c-377">Данные профиля также можно защитить от клиента, используя параметры веб-конфигурации; по умолчанию данные недоступны, и разработчики должны принять участие в свойствах профиля.</span><span class="sxs-lookup"><span data-stu-id="5098c-377">Profile data can be protected from the client as well, by utilizing web configuration settings; no data is available by default, and developers must opt-in to profile properties.</span></span>

<span data-ttu-id="5098c-378">Кроме того, создав упрощенные реализации веб-служб с эквивалентными сигнатурами методов, разработчики могут создавать пользовательские поставщики скриптов для этих внутренних ASP.NET служб.</span><span class="sxs-lookup"><span data-stu-id="5098c-378">Furthermore, by creating simplified web service implementations with equivalent method signatures, developers can create custom script providers for these intrinsic ASP.NET services.</span></span> <span data-ttu-id="5098c-379">Поддержка этих методов упрощает разработку полнофункциональных клиентских приложений, предоставляя разработчикам широкий спектр возможностей для удовлетворения конкретных потребностей.</span><span class="sxs-lookup"><span data-stu-id="5098c-379">Support for these techniques simplifies the development of rich client applications, while providing developers with a wide range of flexibility to meet specific needs.</span></span>

## <a name="bio"></a><span data-ttu-id="5098c-380">*Биография*</span><span class="sxs-lookup"><span data-stu-id="5098c-380">*Bio*</span></span>

<span data-ttu-id="5098c-381">Скотт Cate работал с веб-технологиями Майкрософт с 1997 и является президентом myKB.com ([www.myKB.com](http://www.myKB.com)), где он специализируется на написании приложений ASP.NET на базе знаний, посвященных программным решениям.</span><span class="sxs-lookup"><span data-stu-id="5098c-381">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="5098c-382">Скотт может связаться по электронной почте по адресу [scott.cate@myKB.com](mailto:scott.cate@myKB.com) или в блоге по адресу [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="5098c-382">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5098c-383">[Назад](understanding-asp-net-ajax-updatepanel-triggers.md)
> [Вперед](understanding-asp-net-ajax-localization.md)</span><span class="sxs-lookup"><span data-stu-id="5098c-383">[Previous](understanding-asp-net-ajax-updatepanel-triggers.md)
[Next](understanding-asp-net-ajax-localization.md)</span></span>
