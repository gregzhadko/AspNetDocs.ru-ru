---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-localization
title: Основные сведения о локализации ASP.NET AJAX | Документация Майкрософт
author: scottcate
description: Локализация — это процесс проектирования и интеграции поддержки определенного языка и региональных параметров в приложение или компонент приложения. Микрофон...
ms.author: riande
ms.date: 03/14/2008
ms.assetid: c1a35f18-bab9-41f7-8497-15530c37a09d
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-localization
msc.type: authoredcontent
ms.openlocfilehash: 003e7939accd7a68dab97441b3d999bca835b85a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78456630"
---
# <a name="understanding-aspnet-ajax-localization"></a>Общие сведения о локализации ASP.NET AJAX

по [Скотт Cate](https://github.com/scottcate)

[Скачать в формате PDF](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial04_Localization_cs.pdf)

> Локализация — это процесс проектирования и интеграции поддержки определенного языка и региональных параметров в приложение или компонент приложения. Платформа Microsoft ASP.NET обеспечивает расширенную поддержку локализации для стандартных приложений ASP.NET, интегрируя стандартную модель локализации .NET. Платформа Microsoft AJAX использует интегрированную модель для поддержки различных сценариев, в которых можно выполнять локализацию.

## <a name="introduction"></a>Введение

Технология ASP.NET Майкрософт предоставляет объектно-ориентированную и основанную на событиях модель программирования и объединяет их с преимуществами скомпилированного кода. Однако модель обработки на стороне сервера имеет несколько недостатков, свойственных технологии, многие из которых могут быть решены новыми функциями, включенными в пространство имен System. Web. Extensions, которое инкапсулирует службы Microsoft AJAX в .NET Framework 3,5. Эти расширения позволяют использовать множество полнофункциональных клиентских функций, которые ранее были доступны как часть расширений AJAX для ASP.NET 2,0, но теперь входят в библиотеку базовых классов платформы. Элементы управления и функции в этом пространстве имен включают частичную визуализацию страниц, не требуя полного обновления страниц, возможность доступа к веб-службам через клиентский сценарий (включая API профилирования ASP.NET) и обширный API на стороне клиента, предназначенный для отражения многих схемы управления, отображаемые в наборе элементов управления ASP.NET на стороне сервера.

В этом техническом документе рассматриваются возможности локализации, имеющиеся в платформе Microsoft AJAX Framework и библиотеке скриптов Microsoft AJAX, в контексте поддержки локализации и обзоре уже интегрированной поддержки локализации в Интернете. приложения, предоставляемые .NET Framework. Библиотека скриптов Microsoft AJAX использует формат RESX-файлов, уже используемый приложениями .NET, который обеспечивает встроенную поддержку интегрированной среды разработки и тип ресурса с общим доступом.

Этот технический документ основан на выпуске бета-версии 2 Microsoft Visual Studio 2008. В этом техническом документе также предполагается, что вы будете работать с Visual Studio 2008, а не с Visual Web Developer Express, и предоставит пошаговые руководства в соответствии с пользовательским интерфейсом Visual Studio. Некоторые примеры кода будут использовать шаблоны проектов, которые могут быть недоступны в Visual Web Developer Express.

## <a name="the-need-for-localization"></a>*Потребность в локализации*

В частности для разработчиков корпоративных приложений и разработчиков компонентов, возможность создавать средства, которые могут быть осведомлены о различиях между языками и региональными параметрами, становится все более необходимой. Проектирование компонентов с возможностью адаптации к языку клиента повышает производительность разработчиков и сокращает объем работы, необходимой для глобального функционирования адаптации компонента.

Локализация — это процесс проектирования и интеграции поддержки определенного языка и региональных параметров в приложение или компонент приложения. Платформа Microsoft ASP.NET обеспечивает расширенную поддержку локализации для стандартных приложений ASP.NET, интегрируя стандартную модель локализации .NET. Платформа Microsoft AJAX использует интегрированную модель для поддержки различных сценариев, в которых можно выполнять локализацию. С помощью платформы Microsoft AJAX скрипты можно локализовать путем развертывания в вспомогательные сборки или с помощью структуры статической файловой системы.

## <a name="embedding-scripts-with-satellite-assemblies"></a>*Внедрение скриптов с вспомогательными сборками*

В соответствии с стратегией локализации "Стандартный .NET Framework" ресурсы можно включать в вспомогательные сборки. Вспомогательные сборки предоставляют несколько преимуществ по сравнению с традиционным включением ресурсов в двоичные файлы. Любая заданная Локализация может быть обновлена без обновления большего образа. Дополнительные локализации можно развернуть, просто установив вспомогательные сборки в папку проекта и вспомогательные сборки можно развернуть, не вызывая перезагрузки основной сборки проекта. В частности, в проектах ASP.NET это полезно, так как оно может значительно снизить объем системных ресурсов, используемых добавочными обновлениями, и минимально нарушает использование рабочего веб-сайта.

Скрипты внедряются в сборки, включая их в файлы управляемых файлов RESX (или Compiled. Resources), которые включаются в сборку во время компиляции. Затем их ресурсы становятся доступными для приложения скрипта через код, созданный средой выполнения AJAX, через атрибуты уровня сборки.

*Соглашения об именовании для внедренных файлов скриптов*

Управление сценариями платформы Microsoft AJAX Framework поддерживает различные варианты использования при развертывании и тестировании скриптов, а также рекомендации для упрощения этих вариантов.

*Для упрощения отладки:*

Скрипты выпуска (рабочие) не должны включать квалификатор `.debug` в имя файла. Скрипты, предназначенные для отладки, должны содержать `.debug` в имени файла.

*Для упрощения локализации:*

Скрипты нейтрального языка и региональных параметров не должны включать идентификаторы языка и региональных параметров в имя файла. Для скриптов, содержащих локализованные ресурсы, код языка ISO должен быть указан в имени файла. Например, `es-CO` означает испанский, Колумбия.

В следующей таблице приведены соглашения об именовании файлов с примерами.

| Имя файла | Значение |
| --- | --- |
| Script. js | Скрипт, не зависящий от языка и региональных параметров в версии. |
| Script. Debug. js | Скрипт, нейтральный к языку и региональным параметрам отладки. |
| Script. en-US. js | Версия выпуска на английском языке, США скрипт. |
| Script.debug.es-CO.js | Скрипт на испанском языке версии Debug, Колумбия. |

## <a name="walkthrough-create-an-localized-embedded-script"></a>Пошаговое руководство. Создание локализованного внедренного скрипта

*Примечание. в этом пошаговом руководстве предполагается использование Visual Studio 2008, так как Visual Web Developer Express не включает шаблон проекта для проектов библиотеки классов.*

1. Создайте новый проект веб-сайта с интегрированными расширениями ASP.NET AJAX. Создайте другой проект — проект библиотеки классов в решении с именем Локализингресаурцес.
2. Добавьте в проект Локализингресаурцес файл JScript с именем Верифиделетион. js, а также файлы ресурсов resx с именами Делетионресаурцес. resx и Делетионресаурцес. ES. resx. Первый будет содержать ресурсы, независимые от языка и региональных параметров; последний будет содержать ресурсы для испанского языка.
3. Добавьте следующий код в Верифиделетион. js:

[!code-javascript[Main](understanding-asp-net-ajax-localization/samples/sample1.js)]

Для тех, кто не знаком с синтаксисом регулярных выражений JavaScript, текст в пределах одной косой черты (в предыдущем примере/ФИЛЕНАМЕ/— пример) обозначает объект RegExp. Библиотека MSDN содержит обширную ссылку на JavaScript, а ресурсы на собственных объектах JavaScript можно найти в Интернете.

1. Добавьте следующие строки ресурсов в Делетионресаурцес. resx: 

    **Верифиделете**: вы действительно хотите удалить имя файла?

    **Удалено**: имя файла удалено.

1. Добавьте следующие строки ресурсов в Делетионресаурцес. ES. resx: 

    **Верифиделете**: EST Сегуро Que Деси куитар filename?

    **Удалено**: filename SE Ha куитадо.
2. Добавьте следующие строки кода в файл AssemblyInfo:

[!code-csharp[Main](understanding-asp-net-ajax-localization/samples/sample2.cs)]

1. Добавьте ссылки на System. Web и System. Web. Extensions в проект Локализингресаурцес.
2. Добавьте ссылку на проект Локализингресаурцес из проекта веб-сайта.
3. В файле Default. aspx в проекте веб-сайта обновите элемент управления ScriptManager, используя следующую дополнительную разметку:

[!code-aspx[Main](understanding-asp-net-ajax-localization/samples/sample3.aspx)]

1. На странице Default. aspx в любом месте страницы добавьте следующую разметку:

[!code-aspx[Main](understanding-asp-net-ajax-localization/samples/sample4.aspx)]

1. Нажмите клавишу F5. При появлении запроса включите отладку. После загрузки страницы нажмите кнопку Удалить. Обратите внимание, что выводится запрос на английском языке (если на компьютере не настроено предпочтение ресурсам на испанском языке по умолчанию) для подтверждения.
2. Закройте окно браузера и вернитесь к Default. aspx. В директиве заголовка @Page замените Auto для Culture и UICulture на ES-ES. Снова нажмите клавишу F5, чтобы снова запустить веб-приложение в браузере. На этот раз обратите внимание, что вам будет предложено удалить файл на испанском языке:

[![](understanding-asp-net-ajax-localization/_static/image2.png)](understanding-asp-net-ajax-localization/_static/image1.png)

([Щелкните, чтобы просмотреть изображение с полным размером](understanding-asp-net-ajax-localization/_static/image3.png))

[![](understanding-asp-net-ajax-localization/_static/image5.png)](understanding-asp-net-ajax-localization/_static/image4.png)

([Щелкните, чтобы просмотреть изображение с полным размером](understanding-asp-net-ajax-localization/_static/image6.png))

Обратите внимание, что для этого пошагового руководства существует несколько вариантов. Например, скрипты можно зарегистрировать в элементе управления ScriptManager программным способом во время загрузки страницы.

## <a name="including-a-static-script-file-structure"></a>*Включение структуры статического файла скрипта*

При использовании статических файлов скриптов для развертывания теряются некоторые преимущества использования собственной схемы локализации .NET. В основном видно, что вы потеряли автоматический тип, созданный из-за включения файлов ресурсов скрипта; Например, в приведенном выше пошаговом руководстве ресурсы были предоставлены автоматически созданным типом, называемым Message из элемента управления ScriptManager.

Однако есть некоторые преимущества использования статической структуры файла скрипта. Обновления могут выполняться без перекомпиляции и повторного развертывания вспомогательных сборок, а использование статической структуры файлов также может быть сделано для переопределения внедренного скрипта, чтобы интегрировать небольшие части функций, которые могут не быть поставлены с компонентом.

Корпорация Майкрософт рекомендует избежать проблем с управлением версиями, автоматически создавая ресурсы скрипта во время компиляции проекта. При поддержке обширного кода скрипта может быть все труднее гарантировать, что изменения кода будут отражены в каждом локализованном сценарии. В качестве альтернативы можно просто сохранить один сценарий логики и несколько сценариев локализации, объединяя файлы во время сборки проекта.

Так как нет ресурсов для декларативного включения, следует ссылаться на статические файлы скриптов либо путем добавления `<asp:ScriptElement>` элементов в качестве дочернего элемента для тега `<Scripts>` элемента управления ScriptManager, либо путем добавления `ScriptReference` объектов к свойству `Scripts` элемента управления `ScriptManager` на странице во время выполнения.

## <a name="the-scriptmanager-and-its-role-in-localization"></a>*ScriptManager и его роль в локализации*

ScriptManager обеспечивает несколько автоматических поведений для локализованных приложений:

- Он автоматически находит файлы скриптов на основе параметров и соглашений об именовании. Например, он загружает скрипты с поддержкой отладки в режиме отладки и загружает Локализованные скрипты на основе выбора пользовательского интерфейса браузера.
- Он включает определение языков и региональных параметров, включая пользовательские.
- Он обеспечивает сжатие файлов скриптов по протоколу HTTP.
- Он кэширует сценарии для эффективного управления множеством запросов.
- Он добавляет к скриптам уровень косвенного обращения, направляя их через зашифрованный URL-адрес.

Ссылки на скрипты можно добавить в элемент управления ScriptManager либо программно, либо декларативной разметкой. Декларативная разметка особенно полезна при работе со скриптами, внедренными в сборки, отличные от самого проекта веб-узла, так как имя скрипта, скорее всего, не будет изменяться при отправке исправлений.

## <a name="summary"></a>Сводка

По мере роста веб-приложений для достижения более крупной аудитории потребность в доступе к более широким культурам и сообществам становится основой для бизнес-модели. веб-приложения электронной коммерции должны иметь возможность работать с внешними валютами, системы управления содержимым должны иметь возможность не только представлять свое содержимое, но также их подсказки и поля формы на других языках, и компаниям необходимо знать, что это необходимо обращать.

.NET Framework внутренне поддерживает многофункциональную платформу локализации, используя вспомогательные сборки и файлы ресурсов XML (RESX) для предоставления единообразного способа поиска строк ресурсов и изображений. Расширения AJAX ASP.NET, включая платформу Microsoft AJAX Framework и библиотеку скриптов Microsoft AJAX, обеспечивают поддержку этой модели программирования в коде на стороне клиента, что позволяет использовать простые поиски в строках ресурсов. Вспомогательные сборки поддерживают автоматическое включение ресурсов скрипта (фактические JS-файлы) через обработчик ScriptResource. axd, если имена файлов соответствуют заданной схеме именования. Благодаря этой поддержке расширения AJAX ASP.NET упрощают локализацию сценариев и глобализации приложений.

## <a name="bio"></a>*Биография*

Скотт Cate работал с веб-технологиями Майкрософт с 1997 и является президентом myKB.com ([www.myKB.com](http://www.myKB.com)), где он специализируется на написании приложений ASP.NET на базе знаний, посвященных программным решениям. Скотт может связаться по электронной почте по адресу [scott.cate@myKB.com](mailto:scott.cate@myKB.com) или в блоге по адресу [ScottCate.com](http://ScottCate.com)

> [!div class="step-by-step"]
> [Назад](understanding-asp-net-ajax-authentication-and-profile-application-services.md)
> [Вперед](understanding-asp-net-ajax-web-services.md)
