---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-debugging-capabilities
title: Основные сведения о возможностях отладки ASP.NET AJAX | Документация Майкрософт
author: scottcate
description: Возможность отладки кода является навыка, каждый разработчик должен иметь в их арсенале независимо от того, технологии, которые они используют. Хотя многие разработчики...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 7f9380c6-19f7-4c82-a019-916ec6dffc9c
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-debugging-capabilities
msc.type: authoredcontent
ms.openlocfilehash: 1203825a1fb6b2034d9180fcf416aba7d0012fb7
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59383223"
---
# <a name="understanding-aspnet-ajax-debugging-capabilities"></a>Общие сведения о возможностях отладки ASP.NET AJAX

по [(Scott cate)](https://github.com/scottcate)

[Загрузить PDF-файл](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial06_Debugging_MS_Ajax_Applications_cs.pdf)

> Возможность отладки кода является навыка, каждый разработчик должен иметь в их арсенале независимо от того, технологии, которые они используют. Хотя многие разработчики привыкли работать с Visual Studio .NET или Web Developer Express для отладки приложений ASP.NET, использующих код VB.NET или C#, некоторые не учитывать, что также чрезвычайно полезна для отладки код на стороне клиента, такие как JavaScript. Тот же тип методы, используемые для отладки приложений .NET могут также применяться для приложений с поддержкой AJAX и точнее приложений AJAX для ASP.NET.


## <a name="debugging-aspnet-ajax-applications"></a>Отладка приложений ASP.NET AJAX

Дэна Вахлина

Возможность отладки кода является навыка, каждый разработчик должен иметь в их арсенале независимо от того, технологии, которые они используют. Нет нужды говорить, что основные сведения о различных параметров отладки, доступные можно огромную экономию времени на проект и возможно даже несколько проблем. Хотя многие разработчики привыкли работать с Visual Studio .NET или Web Developer Express для отладки приложений ASP.NET, использующих код VB.NET или C#, некоторые не учитывать, что также чрезвычайно полезна для отладки код на стороне клиента, такие как JavaScript. Тот же тип методы, используемые для отладки приложений .NET могут также применяться для приложений с поддержкой AJAX и точнее приложений AJAX для ASP.NET.

В этой статье вы увидите, как можно использовать Visual Studio 2008 и несколько дополнительных средств для отладки приложений ASP.NET AJAX для быстрого поиска ошибок и других проблем. Далее мы обсудим сведения о включении Internet Explorer 6 или более поздней версии для отладки, с помощью Visual Studio 2008 и обозреватель скриптов для пошагового выполнения кода, а также с помощью других бесплатных средств, такие как Web Development Helper. Вы также узнаете, как выполнять отладку приложений ASP.NET AJAX в Firefox, используя расширение с именем Firebug, который позволяет при пошаговом выполнении кода JavaScript непосредственно в браузере, не любые другие средства. Наконец вы познакомитесь с классы в библиотеке AJAX ASP.NET, которые могут помочь в различные задачи отладки, например трассировка и операторы утверждений кода.

Прежде чем попытаться выполнить отладку страницы, просматриваемые в Internet Explorer, существует несколько простых действий, которые необходимо выполнить, чтобы включить его для отладки. Давайте рассмотрим некоторые основные требования к установке, которые необходимо выполнить, чтобы приступить к работе.

## <a name="configuring-internet-explorer-for-debugging"></a>Настройка Internet Explorer для отладки

Большинство людей не интересуют JavaScript проблем, возникающих при работе с веб-сайта, просмотреть с помощью Internet Explorer. На самом деле средний пользователь даже не знать, что делать, если они видели сообщение об ошибке. Таким образом параметры отладки отключены по умолчанию в браузере. Тем не менее это очень просто включить отладку и поместить его для использования при разработке новых приложений AJAX.

Для включения функциональных возможностей отладки, перейдите в параметры браузера средства в меню Internet Explorer и выберите вкладку "Дополнительно". В разделе Обзор убедитесь, что следующие элементы являются непроверенными:

- Отключить отладку сценариев (Internet Explorer)
- Отключить отладку сценариев (другие)

Несмотря на то что не обязательно, если вы пытаетесь отладить приложение, вы наверняка предпочтете ошибки JavaScript в страницу, чтобы быть немедленно видимым и очевидным. Вы можете заставить всех ошибок для отображения в окне сообщения, установив флажок «Показывать уведомление обо всех ошибках, скрипта». Это отличный вариант для включения во время разработки приложения, он может быстро стать раздражает, если вы просто изучение содержимого других веб-сайтов, так как вероятность возникновения ошибки JavaScript уже достаточно хорошо.

Рис. 1 показано какие Internet Explorer расширенный диалоговое окно должно выглядеть после его правильно настроен для отладки.


[![Настройка Internet Explorer для отладки.](understanding-asp-net-ajax-debugging-capabilities/_static/image2.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image1.png)

**Рис. 1**: Настройка Internet Explorer для отладки.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image3.png))


После отладки был включен, вы увидите новый элемент меню отображаются в меню "Вид" с именем отладчик сценариев. Он имеет два варианта работы, включая открытым, а также переход на следующий оператор. При выборе открытым вам будет предложено отладку страницы в Visual Studio 2008 (Обратите внимание, что Visual Web Developer Express можно также использовать для отладки). Если Visual Studio .NET выполняется в данный момент вы можете использовать этот экземпляр или создайте новый экземпляр. При выборе разрыв в следующий оператор будет предложено отладка страницы, при выполнении кода JavaScript. Если код JavaScript выполняется в событие onLoad страницы можно обновить страницы для запуска сеанса отладки. Если после нажатия кнопки выполняется код JavaScript отладчик будет выполняться сразу после нажатия кнопки.

> [!NOTE]
> Если вы работаете в Windows Vista с помощью пользователя доступа (UAC) включен, и у вас есть Visual Studio 2008, для запуска с правами администратора, Visual Studio не сможет присоединиться к процессу, когда будет предложено присоединить. Чтобы обойти эту проблему, сначала запустите Visual Studio и отладка с помощью этого экземпляра.

Несмотря на то, что следующий раздел покажу способы отладки непосредственно из страницы ASP.NET AJAX в Visual Studio 2008, с помощью параметра отладчик сценариев Internet Explorer полезно при страница уже открыта, и вы хотите проверить его более подробно.

## <a name="debugging-with-visual-studio-2008"></a>Отладка с помощью Visual Studio 2008

Visual Studio 2008 функциональными возможностями отладки, разработчики по всему миру используют каждый день для отладки приложений .NET. Встроенный отладчик можно осуществлять пошаговое выполнение кода, просмотр данных объектов, Контрольные значения для определенных переменных отслеживания стека вызовов, а также многое другое. В дополнение к отладке кода VB.NET или C# отладчик также полезен для отладки приложений ASP.NET AJAX и позволит вам осуществлять пошаговое выполнение кода JavaScript по одной строке. Подробные сведения, выполните фокус на методы, которые могут использоваться для отладки файлов клиентского скрипта, а не предоставлять discourse об общем процессе отладки приложений с помощью Visual Studio 2008.

Процесс отладки страницы в Visual Studio 2008 можно запустить несколькими способами. Во-первых можно использовать вариант отладчику скриптов Internet Explorer, указанный в предыдущем разделе. Это работает, когда уже загрузке страницы в браузере и вы хотите начать его отладку. Кроме того можно правой кнопкой мыши ASPX-страницы в обозревателе решений и выберите в меню задайте в качестве начальной страницы. Если вы привыкли в отладке страниц ASP.NET затем вы уже, скорее всего, выполнили эту настройку. После нажатия клавиши F5 можно отлаживать страницы. Тем не менее как правило, можно задать точку останова в любом хотелось бы в VB.NET или C# код, который не всегда так, с помощью JavaScript как вы увидите Далее.

*Внедренные и внешних скриптов*

Отладчик Visual Studio 2008 обрабатывает JavaScript, встроенный в страницу, отличается от внешние файлы JavaScript. В файлах внешнего скрипта можно откройте файл и установите точку останова в любой строке, которые вы выбрали. Можно установить точки останова, щелкнув в области серую область в левой части окна редактора кода. Когда JavaScript внедряется непосредственно в страницы с помощью `<script>` тег, установить точку останова, щелкнув серую область области не вариант. Пытается установить точку останова на строке внедренного скрипта приведет к предупреждение с текстом «Не является допустимым расположением точки останова».

Можно обойти эту проблему, переместив код в внешний файл JS и связав его с помощью атрибута src &lt;скрипт&gt; тега:


[!code-html[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample1.html)]

Что делать, если переместив код в файл внешнего вариант или требует больше работы, чем он стоит? Хотя невозможно установить точку останова, с помощью редактора, можно добавить оператор отладчика непосредственно в код, где вы хотите начать отладку. Также можно Sys.Debug класс, доступный в ASP.NET AJAX library для принудительного, чтобы начать отладку. Вы узнаете больше о классе Sys.Debug далее в этой статье.

Пример использования `debugger` ключевое слово, показано в листинге 1. В этом примере заставляет отладчик на прерывание справа, прежде чем сделать вызов функции обновления.

**Листинг 1. С помощью ключевого слова отладчика для принудительного к прерыванию работы отладчика Visual Studio .NET.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample2.js)]

После попадания оператор отладчика вам будет предложено отладку страницы, с помощью Visual Studio .NET и можно начать пошаговое выполнение кода. При выполнении этого могут возникнуть проблемы с доступом к файлы библиотеки скриптов ASP.NET AJAX используется на странице, так что давайте рассмотрим с помощью Visual Studio. Обозреватель скриптов NET.

## <a name="using-visual-studio-net-windows-to-debug"></a>Использование Visual Studio .NET Windows для отладки

После запуска сеанса отладки и началом прохождения кода с помощью клавиши F11 по умолчанию, могут возникнуть ошибки диалог, показанный на см. рис. 2, если все файлы сценариев, используется на странице не открыт и доступен для отладки.


[![Диалоговое окно ошибки, показано, когда исходный код доступен для отладки.](understanding-asp-net-ajax-debugging-capabilities/_static/image5.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image4.png)

**Рис. 2**: Диалоговое окно ошибки, показано, когда исходный код доступен для отладки.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image6.png))


Это диалоговое окно отображается, так как Visual Studio .NET не знает, как получить к исходному коду некоторых сценариев, ссылается на страницу. Хотя это может быть довольно утомительным вначале есть простой способ исправить. После запуска сеанса отладки и в точку останова, перейдите в окно отладки Обозреватель скриптов Windows в меню Visual Studio 2008, или используйте сочетание клавиш Ctrl + Alt + N.

> [!NOTE]
> Если не отображается в меню обозревателя скриптов в списке, перейдите к **средства** > **Настройка** > **команды** в меню Visual Studio .NET. Найдите **Отладка** запись в категориях раздела и щелкните его, чтобы отобразить все доступные меню записи. В списке команд прокрутите вниз, чтобы обозреватель скриптов и перетащите его отладки Windows, в меню упоминалось ранее. Таким образом будет доступна запись меню обозревателя скриптов каждый раз при запуске Visual Studio .NET.

Обозреватель скриптов можно использовать для просмотра всех скриптов, на странице и открывать их в редакторе кода. После открытия обозревателя скриптов, дважды щелкните на странице ASPX, чтобы открыть его в окне редактора кода отлаживаемых в текущий момент. Выполните те же действия для всех других сценариев, показан в окне обозревателя скриптов. Как только все сценарии открыты в окне кода, вы можете нажмите клавишу F11 (и используйте другие сочетания клавиш отладки), для пошаговой проверки кода. Рис. 3 показан пример обозревателя скриптов. В ней перечислены текущий отлаживаемый файл (Demo.aspx), а также две пользовательские сценарии и два скрипта, динамически вставлен на страницу с ASP.NET AJAX ScriptManager.


[![Обозреватель скриптов предоставляет доступ к скрипты, используемые в страницу.](understanding-asp-net-ajax-debugging-capabilities/_static/image8.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image7.png)

**Рис. 3**. Обозреватель скриптов предоставляет доступ к скрипты, используемые в страницу.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image9.png))


Несколько других windows также могут использоваться для получения полезных сведений при пошаговом выполнении кода на странице. Например можно использовать окно "Локальные", чтобы увидеть значения различных переменных, используемых на странице, окно "Интерпретация" для оценки, определенных переменных или условия и просмотреть выходные данные. Также можно в окне вывода для просмотра инструкций трассировки, записанных с помощью функции Sys.Debug.trace (который будет рассматриваться далее в этой статье) или функция Debug.writeln Internet Explorer.

При пошаговом выполнении кода, с помощью отладчика можно навести переменных в коде, чтобы просмотреть значение, которое они назначены. Тем не менее отладчик сценариев иногда не будет ничего Показывать как указатель мыши находится над заданной переменной JavaScript. Чтобы просмотреть значение, выделите инструкции или переменной, которую вы пытаетесь см. в окне редактора кода, а затем наведите указатель мыши его. Несмотря на то, что этот метод не работает в любой ситуации, часто можно видеть значение без необходимости поиска в окне отладки разных например окне "Локальные".

Видеоматериалы, демонстрирующие применение некоторых возможности, обсуждаемые здесь можно просмотреть на [ http://www.xmlforasp.net ](http://www.xmlforasp.net).

## <a name="debugging-with-web-development-helper"></a>Отладка с помощью Web Development Helper

Несмотря на то, что Visual Studio 2008 (и Visual Web Developer Express 2008) способны очень средства отладки, существуют дополнительные параметры, которые могут использоваться также которых представляют собой более простые. Одним из новейших средств снятия является Web Development Helper. Корпорации Майкрософт Нихилом Котари (один из ведущие разработчики ASP.NET AJAX в корпорации Microsoft) написал это прекрасное средство, с помощью которых можно выполнять множество различных задач, от простой отладки для просмотра сообщений запросов и ответов HTTP. Web Development Helper можно загрузить по адресу [ http://projects.nikhilk.net/Projects/WebDevHelper.aspx ](http://projects.nikhilk.net/Projects/WebDevHelper.aspx).

Web Development helper можно использовать непосредственно в обозревателе Internet Explorer, что делает его удобным для использования. Она запускается, выбрав средства Web Development Helper меню Internet Explorer. Откроется средство в нижней части обозревателя, которая замечательно, так как не нужно оставить браузер для выполнения нескольких задач, таких как регистрация сообщений запроса и ответа HTTP. Рис. 4 показано, как выглядит Web Development Helper в действии.


[![Web Development Helper](understanding-asp-net-ajax-debugging-capabilities/_static/image11.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image10.png)

**Рис. 4**: Web Development Helper ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image12.png))


Web Development helper не средство, вы будете использовать для пошагового выполнения кода построчно, как с помощью Visual Studio 2008. Тем не менее, его можно использовать для просмотра выходных данных трассировки, легко оценить переменные в скрипте или исследовать данные — в объекте JSON. Также очень полезно для просмотра данных, передаваемых из страницы ASP.NET AJAX и сервера.

После открытия в браузере Internet Explorer Web Development Helper скрипта необходимо включить отладку, выбрав скрипт Включение отладки скриптов меню вспомогательные веб-разработки, как показано на рис. Благодаря этому средство для перехвата ошибок, возникающих при запуске страницы. Она также позволяет легкий доступ к сообщения трассировки, которые выводятся на странице. Чтобы просмотреть сведения о трассировке или выполнение команды сценария, чтобы проверить различные функции внутри страницы, выберите меню Web Development Helper консоли скрипт Показать скрипт. Это обеспечивает доступ к окно командной строки и простое окно интерпретации.

*Просмотр сообщения трассировки и данные объектов JSON*

Окно "Интерпретация" может использоваться для выполнения команды сценария или даже загрузить или сохранить скрипты, используемые для проверки различных функций на странице. В командном окне отображается сообщения трассировки или отладки, записываются с просматриваемой странице. В листинге 2 показан способ записи сообщения трассировки с помощью функция Debug.writeln Internet Explorer.

**Листинг 2. Записывает сообщения трассировки на стороне клиента с помощью класса Debug.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample3.js)]

Если свойство LastName содержит значение Doe, Web Development Helper отобразит сообщение «имя пользователя: Doe» в окне консоли в сценарий командной строки (при условии, что была включена отладка). Web Development Helper также добавляет объект верхнего уровня debugService на страниц, которые можно использовать для записи сведений трассировки или просмотр содержимого объектов JSON. В листинге 3 показан пример использования функции трассировки класс debugService.

**Листинг 3. Использование класса debugService Web Development Helper для записи сообщения трассировки.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample4.js)]

Удобная функция класса debugService является то, что она будет работать, даже если отладка не включена в Internet Explorer, упрощая всегда получить доступ к данным трассировки при запуске Web Development Helper. Если средство не используется для отладки на страницу, операторы трассировки будет пропущен, так как вызов window.debugService вернет false.

Класс debugService также позволяет просматривать с помощью окна инспектора Web Development Helper данных объекта JSON. Листинг 4 создает простой объект JSON, содержащий данные пользователя. После создания объекта выполняется вызов для debugService класса проверки функция, позволяющая визуально проверить объект JSON.

**Листинг 4. С помощью функции debugService.inspect, чтобы просмотреть данные объекта JSON.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample5.js)]

Вызов функции GetPerson(), на странице или через окно "Интерпретация" приведет к в диалоговом окне инспектора объекта, отображаются так, как показано на рис. 5. Свойства в объекте может динамически изменяться, выделяя их, измените значение, показанное в текстовое поле значения и нажмите кнопку Обновить связь. Использование инспектора объектов упрощает для просмотра данных объекта JSON и поэкспериментировать с применение разные значения для свойства.

*Ошибки отладки*

Кроме данных трассировки и объектов JSON для отображения, Web Development helper также может помочь в отладке ошибок на странице. Если возникает ошибка, вам будет предложено перейти на следующую строку кода или отладить сценарий (см. рис. 6). Показывает окно ошибка сценария диалоговое окно, то полный стек вызовов и номера строк, можно легко определить, где находятся проблемы в скрипт.


[![В окне инспектора объект для просмотра объекта JSON.](understanding-asp-net-ajax-debugging-capabilities/_static/image14.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image13.png)

**Рис. 5**: В окне инспектора объект для просмотра объекта JSON.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image15.png))


При выборе параметра отладки позволяет выполнять внести в скрипт инструкции непосредственно в окно интерпретации Web Development Helper, чтобы просмотреть значения переменных, запись объектов JSON, и многое другое. Visual Studio 2008 доступна на компьютере, то действие, которое привело к ошибке выполняется еще раз, вам будет предложено начать сеанс отладки, чтобы код построчно, как описано в предыдущем разделе можно пошагово.


[![Web Development Helper диалоговое окно ошибки скрипта](understanding-asp-net-ajax-debugging-capabilities/_static/image17.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image16.png)

**Рис. 6**: Веб-диалоговое окно ошибки скрипта Development Helper ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image18.png))


*Проверка запросов и ответных сообщений*

При отладке страниц ASP.NET AJAX часто бывает удобно видеть сообщения запросов и ответов, передаваемых между сервером и страницы. Просмотр содержимого сообщений позволяет см. в разделе, если соответствующие данные передается, а также размер сообщений. Web Development Helper предоставляет великолепной новой функцией ведения журнала сообщения HTTP, позволяет легко просматривать данные в виде текста или в более удобной.

Чтобы просмотреть сообщения запроса и ответа AJAX для ASP.NET, необходимо включить средство ведения журнала HTTP, выбрав в меню Web Development Helper HTTP включить ведение журнала HTTP. После включения всех сообщений, отправленных с текущей страницы можно просмотреть в средстве просмотра журнала HTTP, к которому можно получить, выбрав Показать журналы HTTP для HTTP.

Несмотря на то, что просмотр необработанный текст, отправляемый в каждое сообщение запрос/ответ без сомнения, полезен (и параметр в Web Development Helper), часто бывает удобнее для чтения данных сообщения более графически. Когда включено ведение журнала HTTP, записанных в журнал сообщения, данные сообщения можно просмотреть, дважды щелкнув его в средстве просмотра журнала HTTP. Это позволяет просматривать все заголовки, связанные с сообщением, а также фактическое сообщение содержимого. Рис. 7 показан пример сообщения запроса и ответного сообщения, просматривать в окне средства просмотра журналов HTTP.


[![Используя средство просмотра журнала HTTP, чтобы просмотреть данные сообщения запроса и ответа.](understanding-asp-net-ajax-debugging-capabilities/_static/image20.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image19.png)

**Рис. 7**: Используя средство просмотра журнала HTTP, чтобы просмотреть данные сообщения запроса и ответа.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image21.png))


Средство просмотра журнала HTTP автоматически выполняет синтаксический анализ объектов JSON и отображает их с помощью представления дерева, позволяя быстро и легко просматривать данные свойства объекта. При использовании UpdatePanel на странице ASP.NET AJAX, средство просмотра разрывов каждой части сообщения на отдельные части, как показано на рис. 8. Это отличная возможность, делающую гораздо легче увидеть и понять, что такое в сообщении по сравнению с Просмотр необработанные данные сообщений.


[![Сообщение ответа UpdatePanel, просматривать с помощью средства просмотра журнала HTTP.](understanding-asp-net-ajax-debugging-capabilities/_static/image23.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image22.png)

**Рис. 8**: Сообщение ответа UpdatePanel, просматривать с помощью средства просмотра журнала HTTP.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image24.png))


Существует несколько других средств, которые могут использоваться для просмотра сообщений запросов и ответов в дополнение к Web Development Helper. Еще один хороший способ — Fiddler, который доступен по адресу [ http://www.fiddlertool.com ](http://www.fiddlertool.com). Несмотря на то, что Fiddler не обсуждаются здесь, это также хорошим вариантом при необходимости тщательно проверять заголовки сообщений и данных.

## <a name="debugging-with-firefox-and-firebug"></a>Отладка с помощью Firefox и Firebug

Несмотря на то Internet Explorer, по-прежнему наиболее широко используемых браузера других браузеров, таких как Firefox стала весьма популярной и используется больше и больше. Таким образом вы захотите просматривать и отлаживать страницы ASP.NET AJAX в Firefox, а также в Internet Explorer для обеспечения правильной работы приложения. Несмотря на то, что Firefox нельзя привязать непосредственно в Visual Studio 2008 для отладки, он имеет расширение вызывается Firebug, который может использоваться для отладки страниц. Firebug можно загрузить бесплатно открыв [ http://www.getfirebug.com ](http://www.getfirebug.com).

Firebug предоставляет полнофункциональную среду отладки, можно использовать пошаговое выполнение кода по одной строке, доступ к все скрипты, используемые внутри страницы, просмотр структуры DOM, отображения стилей CSS и даже отслеживать события, возникающие на странице. После установки Firebug может осуществляться с помощью команды Open Firebug Firebug средства меню Firefox. Как Web Development Helper Firebug используется непосредственно в браузере, несмотря на то, что он может также использоваться как изолированное приложение.

После запуска Firebug точки останова можно задать любую строку файла JavaScript ли скрипт, встроенный в страницу или нет. Чтобы задать точку останова, сначала необходимо загрузите соответствующую страницу, которую вы хотите выполнять отладку в Firefox. После загрузки страницы, выберите сценарий для отладки из раскрывающегося списка сценариев в Firebug. Будут показаны все скрипты, используемые страницы. Задается точка останова, щелкнув области Firebug серую область в строке точку останова куда следует должен, как и в Visual Studio 2008.

После установки точки останова в Firebug можно выполнить действия, необходимые для выполнения скрипт, который требуется для отладки, например нажатие кнопки или обновить браузер, чтобы активировать событие onLoad. Выполнение автоматически останавливается в строке, содержащей точку останова. Рис. 9 показан пример точку останова, которой было запущено в Firebug.


[![Обработка точки останова в Firebug.](understanding-asp-net-ajax-debugging-capabilities/_static/image26.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image25.png)

**Рис. 9**: Обработка точки останова в Firebug.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image27.png))


После точки останова можно шаг с заходом, шаг с обходом или шаг с выходом из кода с помощью кнопки со стрелками. При пошаговом выполнении кода, переменные сценария отображаются в правой части отладчика, позволяя просмотреть значения и детализации в объекты. Firebug также включает список раскрывающегося списка стек вызовов для просмотра шагов выполнения сценария, которые привели к текущей строке отлаживаемой.

Firebug также включает в себя окно консоли, который может использоваться для тестирования различных внести в скрипт инструкции, оценки переменных и просмотреть выходные данные трассировки. Он нажав на вкладке «консоль» в верхней части окна Firebug. Страницы, для которого выполняется отладка можно также «проверить» для просмотра его структуры DOM и содержимое, щелкнув на вкладке «инспектировать». Как вы различные элементы DOM, отображаются в окне инспектора соответствующую часть страницы при наведении будут выделены, упрощая см. в разделе, где элемент используется в странице. «Live» экспериментировать с применения различной ширины, стили, и т.д. на элемент можно изменить значения атрибутов, связанных с данного элемента. Это замечательная функция избавляет от необходимости постоянно переключаться между редактора исходного кода и браузер Firefox, чтобы просмотреть как простые изменения влияют на страницу.

Рис. 10 показан пример использования инспектора DOM для поиска в текстовое поле с именем txtCountry на странице. Инспектор Firebug может также использоваться для просмотра стилей CSS, которые используются в страницу, а также события, происходящие, например отслеживание движения мыши, нажатия кнопки и несколько дополнительных.


[![Использование инспектора DOM в Firebug.](understanding-asp-net-ajax-debugging-capabilities/_static/image29.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image28.png)

**Рис. 10**: Использование инспектора DOM в Firebug.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image30.png))


Упрощенная Firebug позволяет быстро отладка страницы непосредственно в Firefox, а также прекрасное средство для проверки различных элементов на странице.

## <a name="debugging-support-in-aspnet-ajax"></a>Поддержка отладки в ASP.NET AJAX

ASP.NET AJAX library включает в себя множество различных классов, которые могут использоваться для упрощения процесса добавления возможностей AJAX в веб-страницы. Эти классы можно использовать для поиска элементов на странице и управлять ими, добавлять новые элементы управления, вызов веб-служб и даже обработки событий. Библиотека ASP.NET AJAX также содержит классы, которые могут использоваться для усовершенствования процесса отладки страниц. В этом разделе вы познакомитесь с класс Sys.Debug и см. в разделе, как он может использоваться в приложениях.

*С помощью класса Sys.Debug*

Класс Sys.Debug (класс JavaScript, расположенных в пространстве имен Sys) можно использовать для выполнения нескольких различных функций, включая записи выходных данных трассировки, выполнение кода утверждения и поэтому сбой, чтобы его отладки кода. Он широко используется в файлах отладки библиотеки ASP.NET AJAX (устанавливается в C:\Program Files\Microsoft ASP.NET\ASP.NET 2.0 AJAX Extensions\v1.0.61025\MicrosoftAjaxLibrary\System.Web.Extensions\1.0.61025.0 по умолчанию) для выполнения проверок условий) вызывается утверждения), убедитесь, что параметры передаются должным образом, функции, что объекты содержат ожидаемые данные и записывать операторов трассировки.

Класс Sys.Debug предоставляет несколько разных функций, которые могут использоваться для обработки трассировки, код утверждения или сбои, как показано в таблице 1.

**Таблица 1. Sys.Debug функций класса.**

| **Имя функции** | **Описание** |
| --- | --- |
| Assert (условие, сообщение, displayCaller) | Утверждает, что параметр условие имеет значение true. Если проверяемое условие ложно, окно сообщения будет использоваться для отображения значения параметра сообщения. Если параметр displayCaller имеет значение true, метод также отображает сведения о вызывающем объекте. |
| clearTrace() | Удаляет выходные данные инструкций трассировки операций. |
| Fail(Message) | Программа для остановки выполнения и переключиться в режим отладчика. Параметр сообщения можно использовать для предоставления причину сбоя. |
| Trace(Message) | Записывает параметр сообщения в выходные данные трассировки. |
| traceDump (объект, имя) | Выводит данные объекта в удобном для чтения формате. Параметр name можно использовать для предоставления метку для дампа трассировки. Любые вложенные объекты в пределах объекта создается дамп записываются по умолчанию. |

Трассировки на стороне клиента можно использовать так же, как функциональные возможности трассировки, доступные в ASP.NET. Он позволяет легко просматривать без прерывания потока в приложении различные сообщения. В листинге 5 показан пример использования функции Sys.Debug.trace для записи в журнал трассировки. Эта функция просто принимает сообщения, который должен быть сохранен как параметр.

**Листинг 5. С помощью функции Sys.Debug.trace.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample6.js)]

Если выполнить код, показанный в листинге 5 вы не увидите никаких выходных данных трассировки на странице. Единственный способ увидеть, как это является использование окна консоли, доступные в Visual Studio .NET, Web Development Helper или Firebug. Если вы хотите увидеть выходные данные трассировки на странице, вам потребуется для добавления тега TextArea и присвойте ему идентификатором TraceConsole, как показано далее:


[!code-html[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample7.html)]

Все Sys.Debug.trace инструкции на странице будут записываться TraceConsole TextArea.

В тех случаях, когда для просмотра данных, содержащихся в объекте JSON можно использовать класс Sys.Debug traceDump функции. Эта функция принимает два параметра, включая объект, который должен записываться на консоль трассировки и имя, которое может использоваться для идентификации объекта в выводе трассировки. В листинге 6 показан пример использования функции traceDump.

**Листинг 6. С помощью функции Sys.Debug.traceDump.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample8.js)]

Рис. 11 показаны выходные данные при вызове функции Sys.Debug.traceDump. Обратите внимание на то, что в дополнение к записи данных объекта Person, он также считывает адрес sub объект данных.

Помимо трассировки, класс Sys.Debug также может использоваться для выполнения кода утверждений. Утверждения используются для проверки выполнения определенных условий во время работы приложения. Отладочная версия библиотеки скриптов ASP.NET AJAX содержать несколько операторов для тестирования различных условий assert.

Листинг 7 показан пример использования функции Sys.Debug.assert для проверки условия. В коде проверяется ли адрес объекта имеет значение null перед обновлением объекта Person.


[![Выходные данные функции Sys.Debug.traceDump.](understanding-asp-net-ajax-debugging-capabilities/_static/image32.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image31.png)

**Рис. 11**: Выходные данные функции Sys.Debug.traceDump.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image33.png))


**Листинг 7. С помощью функции debug.assert.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample9.js)]

Три параметра передаются, включая условия для вычисления, сообщение, отображаемое, если утверждение возвращает значение false, а также ли отображать сведения о вызывающем объекте. В случаях, когда утверждение ложно сообщение будет отображаться а также сведения о вызывающем объекте, если третий параметр имел значение true. Рис. 12 показан пример диалогового окна ошибки, который отображается, если утверждение, показано в листинге 7 не выполняется.

Конечная функция, чтобы охватить — Sys.Debug.fail. Если нужно, чтобы сбой в определенной строке в сценарии кода можно добавить вызов Sys.Debug.fail, а не оператор отладчика, обычно используется в приложениях JavaScript. Функция Sys.Debug.fail принимает один строковый параметр, представляющий причину сбоя, как показано далее:


[!code-css[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample10.css)]


[![Сообщение о сбое Sys.Debug.assert.](understanding-asp-net-ajax-debugging-capabilities/_static/image35.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image34.png)

**Рис. 12**: Сообщение о сбое Sys.Debug.assert.  ([Просмотр полноразмерного изображения](understanding-asp-net-ajax-debugging-capabilities/_static/image36.png))


При обнаружении инструкцию Sys.Debug.fail во время выполнения сценария значение параметра сообщения будет отображаться в консоли отладки приложения, например Visual Studio 2008, и вам предложат для отладки приложения. Один случай, где это может быть весьма полезно — невозможно установить точку останова в Visual Studio 2008 на встроенный сценарий, но хотите код, чтобы остановить на определенной строке, чтобы вы могли проверить значения переменных.

*Основные сведения о свойства ScriptMode элемента управления ScriptManager*

Библиотека ASP.NET AJAX включает отладочные и выпускные версии сценариев, которые установлены в C:\Program Files\Microsoft ASP.NET\ASP.NET 2.0 AJAX Extensions\v1.0.61025\MicrosoftAjaxLibrary\System.Web.Extensions\1.0.61025.0 по умолчанию. Сценарии отладки, отформатированное, удобном для чтения и иметь несколько вызовов Sys.Debug.assert, разбросанных по их в окончательные сценарии установлены пробелов, теряются и использовать класс Sys.Debug только в случае необходимости, чтобы свести к минимуму их общий размер.

Элемент управления ScriptManager, добавлен на страницу ASP.NET AJAX считывает атрибута отладки элемента компиляции в файле web.config, чтобы определить, какие версии библиотеки сценариев для загрузки. Тем не менее, вы можете управлять отладка или выпуск сценарии являются загружена (сценарии библиотек или собственных настраиваемых сценариев), изменив свойства ScriptMode. ScriptMode принимает ScriptMode перечисления, члены которого включают автоматическое, отладки, выпуска и наследование.

ScriptMode по умолчанию используется значение Auto, это означает, что ScriptManager будет проверять атрибут debug в файле web.config. После отладки ложно ScriptManager загрузит финальной версии библиотеки скриптов ASP.NET AJAX. Если выполняется отладка отладочную версию скрипты будут загружены. Изменение выпуска или отладки свойства ScriptMode заставляет ScriptManager для загрузки на соответствующие сценарии, независимо от того, какое значение имеет атрибут debug в файле web.config. Листинг 8 показан пример использования элемента управления ScriptManager загрузить сценарии отладки из библиотеки ASP.NET AJAX.

**Листинг 8. Загрузка сценариев отладки, с помощью ScriptManager**.


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample11.aspx)]

Можно также загружать разные версии (Отладка или выпуск) собственных настраиваемых сценариев с помощью свойства элемента управления ScriptManager сценарии вместе с компонентом ScriptReference, как показано в листинге 9.

**Листинг 9. Загрузка пользовательских сценариев, с помощью ScriptManager.**


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample12.aspx)]

> [!NOTE]
> Если вам нужно загрузить пользовательские сценарии, с помощью компонента ScriptReference ScriptManager необходимо уведомить при окончании загрузки сценария, добавив следующий код в нижней части скрипта:


[!code-csharp[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample13.cs)]

Код, показанный в листинге 9 сообщает ScriptManager для поиска для отладочной версии сценария пользователя, поэтому он будет автоматически искать Person.debug.js вместо Person.js. Если файл Person.debug.js не найден, возникает ошибка.

В случаях, когда требуется отладочной или окончательной версии настраиваемый сценарий для загрузки в зависимости от значения свойства ScriptMode, заданного в элементе управления ScriptManager можно задать свойства ScriptMode элемента управления ScriptReference значение Inherit. Это приведет к нужной версии пользовательский сценарий для загрузки в зависимости от свойства ScriptMode элемента управления ScriptManager, как показано в листинге 10. Поскольку свойства ScriptMode элемента управления ScriptManager задается для отладки, сценарий Person.debug.js будут загружаться и используется на странице.

**Листинг 10. Наследование ScriptMode ScriptManager для пользовательских скриптов.**


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample14.aspx)]

С помощью свойства ScriptMode соответствующим образом можно упростить отладка приложений и упрощает процесс в целом. Окончательные сценарии библиотеки ASP.NET AJAX, довольно сложно шагам и чтения, так как форматирование кода был удален во время отладки скриптов форматируются специально для целей отладки.

## <a name="conclusion"></a>Заключение

Технологии ASP.NET AJAX корпорации Майкрософт предоставляет надежную основу для создания приложений с поддержкой AJAX, которые могут повысить общее удобство работы конечного пользователя. Тем не менее как с любой технологией программирования, ошибки и другие проблемы с приложениями наверняка возникнет. Зная о различных параметрах отладки можно сохранить массу времени и результат в продукте стабильнее.

В этой статье вы познакомились с понятием нескольких различных методик для отладки страниц ASP.NET AJAX, включая Internet Explorer с Visual Studio 2008, Web Development Helper и Firebug. Эти средства можно упростить общий процесс отладки, так как можно получить доступ к переменной данных, инструкции по кода по одной строке и просматривать операторов трассировки. Помимо различных средств отладки обсуждается вы также узнали, как класс Sys.Debug библиотеки ASP.NET AJAX можно использовать в приложении и как классу ScriptManager можно загрузить отладка или выпуск версии сценариев.

## <a name="bio"></a>Биография

Дэна Вахлина (Microsoft Most Valuable Professional для ASP.NET и веб-службы) — .NET разработки instructor и архитектура консультант в интерфейс техническое обучение ([www.interfacett.com)](http://www.interfacett.com). Дэн основал XML для разработчиков веб-узла ASP.NET ([www.XMLforASP.NET](http://www.XMLforASP.NET)), на Бюро является СПИКЕРОМ INETA и выступает с докладами на нескольких конференциях. Дэн соавтором DNA Windows Professional (Wrox), ASP.NET: Советы, учебники и кода (SAM), ASP.NET 1.1 Insider решения, Professional ASP.NET 2.0 AJAX (Wrox), Hacks обладателя звания MVP по ASP.NET 2.0 и созданные XML для разработчиков ASP.NET (SAM). Когда он также не пишет код, статей или книг, Дэн получает записи и записи музыки и играть в Гольф и баскетбольных со своей женой и детьми.

(Scott cate) работает с веб-технологиями Microsoft с 1997 года и является президентом myKB.com ([www.myKB.com](http://www.myKB.com)) приложений, внимание уделяется знаний программных решений, где он специализируется на написание ASP.NET на основе. Скоттом можно связаться по электронной почте [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) или его блог по адресу [ScottCate.com](http://ScottCate.com)

> [!div class="step-by-step"]
> [Назад](understanding-asp-net-ajax-web-services.md)
