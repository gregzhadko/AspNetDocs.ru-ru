---
uid: web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
title: Создание макета сайта с помощью главных страниц (C#) | Документация Майкрософт
author: rick-anderson
description: В этом учебнике показано основы главной страницы. А именно, каковы главные страницы, каким образом один создать главную страницу, каковы содержимого заполнители, каким образом один cr...
ms.author: riande
ms.date: 05/21/2008
ms.assetid: 78f8d194-03b9-44a5-8255-90e7cd1c2ee1
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 866aea01488cee26a7419fe12b7ffa7a0655e9ce
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59385050"
---
# <a name="creating-a-site-wide-layout-using-master-pages-c"></a>Создание макета сайта с помощью эталонных страниц (C#)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip) или [скачать PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)

> В этом учебнике показано основы главной страницы. А именно, каковы главные страницы, как один создать главную страницу, каковы содержимого заполнители, как один создает страницу ASP.NET, которая использует главной страницы, как изменение главной страницы автоматически отражаются в его связанные содержимого страницы и т. д.


## <a name="introduction"></a>Вступление

Одним из атрибутов хорошо спроектированный веб-сайта является согласованный сайта макет страницы. Возьмем для примера на веб-сайте www.asp.net. Во время написания этой статьи каждая страница имеет то же содержимое, в верхней и нижней части страницы. Как показано на рис. 1, самой верхней части каждой страницы отображается серую линию со списком сообщества Майкрософт. Под то есть логотипа веб-узла, список языков, в которых была переведена сайта и в основных разделах: Домашняя, приступить к работе, Дополнительные сведения, загрузки и т. д. Аналогично нижней части страницы включает в себя сведения о рекламе на www.asp.net заявление об авторских правах и ссылку на заявление о конфиденциальности.


[![THE www.asp.net веб-сайт использует согласованную выглядят и чувствовать на всех страницах](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)

<strong>Рис 01</strong>: Www.asp.net веб-сайт использует согласованную выглядят и чувствовать через все страницы ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))


Другой атрибут хорошо спроектированной узла заключается в простоте, с помощью которого можно изменить внешний вид веб-узла. Рис. 1 показан на домашней странице www.asp.net, начиная с марта 2008 г., но между текущей датой и публикации в этом руководстве, могло измениться внешний вид. Возможно пунктов меню в верхней будет расширен для включения новый раздел для MVC. Или может быть совершенно новый дизайн с различные цвета, шрифты и макет будет. Применение таких изменений на весь сайт должен быть быстрой и простой процесс, который не требует изменения тысячи веб-страницы, входящие в состав сайта.

Создание шаблона всех страниц в ASP.NET можно воспользоваться *главные страницы*. По сути, Главная страница — это специальный тип страницы ASP.NET, которая определяет разметки, который является общим для всех *страниц с контентом* а также области, которые можно настраивать на основе содержимого страницы, содержимое страницы. (Страницу содержимого является страницей ASP.NET, который привязывается к главной страницы). Каждый раз, когда изменяется макет главной страницы или форматирования, все выходные данные его содержимого страницы аналогично немедленно обновляется, что делает применение изменений внешнего вида всего веб-узла, так же просто, как обновление и развертывание одного файла (а именно, главной страницы).

Это первый учебник в серии учебников, в которых рассматриваются использование главных страниц. В ходе этой серии руководств мы:

- Изучите создание главных страниц и их связанные содержимого страницы
- Рассматриваются разнообразные советы, приемы и ловушки,
- Определить типичные проблемы главной страницы и изучение обходные пути,
- Как получить доступ к главной странице из страницы содержания и a обратно, см. в разделе
- Узнайте, как указать страницу содержимого главной страницы во время выполнения, и
- Другие дополнительные разделы главной страницы.

Учебных курсах предусмотрена краткая форма изложения и предоставляются поэтапные указания со множеством снимков экранов покажем процесс визуально. Каждое руководство доступно в C# и Visual Basic версии и загрузить полный код, используемый.

Это первая статья руководства начинается со взгляда на главную страницу основы. Мы обсудим, как функционируют главные страницы, рассмотрим создание главной страницы и связанного содержимого страниц, с помощью Visual Web Developer и см. в разделе, как изменения к главной странице немедленно отражаются в его страниц. Давайте начнем!

## <a name="understanding-how-master-pages-work"></a>Основные сведения о том, как функционируют главные страницы

Создание веб-сайта с макетом согласованные страницы сайта требует, что каждой веб-странице создавать общие форматирования разметку в дополнение к его пользовательское содержимое. Например, во время публикации руководства или форум на www.asp.net включать свои собственные уникальные материалы, каждой из этих страниц также визуализировать серии общих `<div>` элементы, отображающие ссылки разделов верхнего уровня: Главная приступить к работе, узнайте и так далее.

Существуют различные методы для создания веб-страниц с помощью согласованного внешнего вида и поведения. Наивный подход — просто скопируйте и вставьте распространенных макета разметки во все веб-страницы, но такой подход имеет ряд недостатков. Во-первых каждый раз при создании новой страницы, не забудьте скопировать и вставить общего содержимого на страницу. Такое копирование и вставка операций богатыми возможностями ошибка как случайно может скопировать только подмножество общих разметки в новую страницу. И ко всему, такой подход делает, заменив существующий внешний вид сайта новый настоящие боль, потому что каждый одной страницы на сайте необходимо отредактировать для использования нового интерфейса.

До ASP.NET версии 2.0, странице разработчики часто размещаются общие разметки в [пользовательские элементы управления](https://msdn.microsoft.com/library/y6wb1a0e.aspx) и затем добавить эти пользовательские элементы управления для каждой отдельной страницы. Этот подход требуется разработчик вручную добавьте пользовательские элементы управления для каждой страницы, что допускается для изменения проще всего сайта, так как при обновлении общих разметку только пользовательские элементы управления необходимо изменить. К сожалению Visual Studio .NET 2002 и 2003 - версиях Visual Studio используется для создания приложений ASP.NET 1.x — к просмотру пользовательских элементов управления в режиме конструктора, как серые поля. Следовательно разработчикам страниц, при таком подходе была недоступна WYSIWYG среды разработки.

Описанные недостатки использования пользовательских элементов управления в ASP.NET версии 2.0 и Visual Studio 2005 с появлением *главные страницы*. Главная страница — это специальный тип страницы ASP.NET, которая определяет разметку сайта и *регионах* там, где связанные *страниц с контентом* определить их пользовательской разметки. Как мы увидим в шаге 1, эти регионы определяются элементы управления ContentPlaceHolder. Элемент управления ContentPlaceHolder просто указывает позицию в иерархии элементов управления на главной странице, где могут внедряться пользовательское содержимое, страницы содержимого.

> [!NOTE]
> Основные понятия и функциональные возможности главных страниц не изменялась после ASP.NET версии 2.0. Тем не менее Visual Studio 2008 предлагает поддержку времени разработки для вложенные главные страницы, это функция, которая не было в Visual Studio 2005. Мы рассмотрим использование вложенные главные страницы в следующем учебном курсе.


Рис. 2 показано, как может выглядеть на главную страницу для www.asp.net. Обратите внимание на то, что главная страница определяет общий макет сайта - разметку в верхней, нижней и правой части каждой страницы — а также ContentPlaceHolder в середине левом углу, где находится уникальным контентом для каждого отдельного веб-страницы.


![Определяет главной страницы макета всего веб-узла, а также области редактирования на основе содержимого страницы, содержимое страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image4.png)

**Рис. 02**: Определяет главной страницы макета всего веб-узла, а также области редактирования на основе содержимого страницы, содержимое страницы


После определения главной страницы его можно привязать к новых страниц ASP.NET через такта флажок. Эти страницы ASP.NET - страницы содержимого с именем - включают элемент управления содержимым для каждого из элементов управления ContentPlaceHolder на главной странице. При посещении страницы содержимого через браузер модуль ASP.NET создает иерархию элементов управления на главной странице и внедряет иерархии элементов управления страницы содержимого в соответствующих местах. Эта иерархия объединенный элемент управления отрисовывается и результирующий HTML возвращается обозревателю конечного пользователя. Следовательно страницы содержимого выдает общие разметки, определенные в его главной страницы за пределами элементов управления ContentPlaceHolder и разметку страницы, определенные в свои собственные элементы управления содержимым. Этот принцип показан на рис. 3.


[![Tв главной страницы является совмещенного HE запрошенный разметку страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)

**Рис 03**: Разметка страницы запрошенный является включенные в главной страницы ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))


Теперь, когда мы рассмотрели, как функционируют главные страницы, давайте рассмотрим создание главной страницы и связанного содержимого страниц, с помощью Visual Web Developer.

> [!NOTE]
> Для достижения максимально широкой аудиторией, веб-узла ASP.NET, мы создаем данной серии учебных курсов будет создан с помощью ASP.NET 3.5 с помощью бесплатной версии Visual Studio 2008, корпорации Майкрософт [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/). Если вы еще не обновлены до ASP.NET 3.5, не беспокойтесь — обсуждавшиеся в этих руководствах работают одинаково хорошо с ASP.NET, 2.0 и Visual Studio 2005. Тем не менее некоторые демонстрация приложения могут использовать новые возможности .NET Framework версии 3.5; При использовании функции 3.5, я включил примечание, которое описывает, как реализовать аналогичные функциональные возможности в версии 2.0. Имейте в виду, что демонстрационных приложений, доступных для загрузки из каждого учебника целевого объекта .NET Framework версии 3.5, что приводит к `Web.config` файл, который содержит элементы конфигурации 3.5 и ссылки на пространства имен 3.5 зависящие в `using` инструкций в классы фонового кода страницы ASP.NET. Короче говоря, если вы еще установка .NET 3.5 на компьютере, затем загружаемые веб-приложение не будет работать без предварительного удаления разметки 3.5 зависящие от `Web.config`. См. в разделе [разбор ASP.NET версии 3.5 `Web.config` файл](http://www.4guysfromrolla.com/articles/121207-1.aspx) Дополнительные сведения по этой теме. Также необходимо будет удалить `using` инструкций, ссылающихся на конкретных 3.5 пространства имен.


## <a name="step-1-creating-a-master-page"></a>Шаг 1. Создание главной страницы

Прежде чем мы можем рассмотреть создание и использование страницах, необходимо сначала на веб-сайте ASP.NET. Начните с создания нового файла на основе системы веб-узла ASP.NET. Для этого запустите Visual Web Developer и затем перейдите к меню "файл" и выберите новый веб-сайт, отображение диалогового окна нового веб-сайта (см. рис. 4). Выберите шаблон веб-сайт ASP.NET, задайте раскрывающемся списке расположение в файловой системе, выберите папку для размещения веб-сайта и задать язык C#. Это создаст новый веб-сайт с `Default.aspx` страницы ASP.NET, `App_Data` папки и `Web.config` файла.

> [!NOTE]
> Visual Studio поддерживает два режима управления проектом. Проекты веб-сайтов и проектов веб-приложений. Проектов веб-сайтов не хватает файл проекта, тогда как Web Application Projects имитируют архитектура проекта в Visual Studio .NET 2002/2003 — они включают файл проекта и компиляции исходного кода проекта в единую сборку, которая помещается в `/bin` папка. Проекты Visual Studio 2005 изначально только поддерживаемые веб-узла, несмотря на то что [модели проекта веб-приложения](https://msdn.microsoft.com/library/aa730880(vs.80).aspx) был снова с пакетом обновления 1; Visual Studio 2008 включает в себя оба проекта модели. Visual Web Developer 2005 и 2008 выпусков, однако поддерживают только проектов веб-сайтов. Я использую модели проекта веб-сайта для приводить свои примеры в этой серии руководств. Если вы используете отличных от Express edition и хотите использовать модели проекта веб-приложения, вместо этого, вы можете сделать это, но имейте в виду, что могут существовать некоторые несоответствия между отображаемые на экране и шаги, которые необходимо предпринять и снимки экрана и инструкций в этих учебниках NS.


[![CСоздание веб-сайта New File System-Based](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)

**Рис. 04**: Создание веб-сайта New File System-Based ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))


Затем добавьте главную страницу на сайт в корневом каталоге, щелкнув правой кнопкой мыши имя проекта и Добавление нового элемента и выбрав шаблон главной страницы. Обратите внимание на то, что главные страницы заканчиваться расширением `.master`. Имя этой новой главной страницы `Site.master` и щелкните "Добавить".


[![Aдд Master страницы с именем Site.master на веб-сайт](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)

**05 рис**: Добавление именованных Master страницы `Site.master` на веб-сайт ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))


Добавление нового файла главной страницы через Visual Web Developer создает эталонную страницу со следующей декларативной разметке:

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample1.aspx)]

В первой строке в декларативной разметке [ `@Master` директива](https://msdn.microsoft.com/library/ms228176.aspx). `@Master` Аналогична директиве [ `@Page` директива](https://msdn.microsoft.com/library/ydy4x04a.aspx) , отображаемый на страницах ASP.NET. Он определяет язык на стороне сервера (C#) и сведения о расположении и наследования класса фонового кода на главной странице.

`DOCTYPE` И декларативной разметке страницы появится под `@Master` директива. На странице имеется статический HTML вместе с четырьмя элементами управления на стороне сервера:

- **Веб-формы ( `<form runat="server">`)** — так как все страницы ASP.NET обычно имеют веб-формы - и так как главной страницы может включать веб-элементы управления, которые должны располагаться в пределах веб-формы - не забудьте добавить веб-формы на главной странице (вместо добавления веб-формы для e ACH страницы содержимого).
- **Элемент управления ContentPlaceHolder `ContentPlaceHolder1`**  -этот элемент управления ContentPlaceHolder отображается в веб-формы и служит в качестве региона для пользовательского интерфейса страницы содержимого.
- **На стороне сервера `<head>` элемент** - `<head>` элемент имеет `runat="server"` атрибута, что делает его доступным через серверный код. `<head>` Элемент реализуется таким образом, чтобы заголовок страницы и другие `<head>`-связанные разметки могут добавляться или изменить программными средствами. Например, установка страницей ASP.NET `Title` изменения свойств `<title>` преобразовываемый для просмотра элемент `<head>` серверного элемента управления.
- **Элемент управления ContentPlaceHolder `head`**  -появляется этот элемент управления ContentPlaceHolder в `<head>` сервера управления и может использоваться декларативно добавить содержимое в `<head>` элемент.

Этого декларативная разметка главной страницы по умолчанию служит в качестве отправной точки для разработки собственных главных страниц. Вы можете изменить код HTML или добавить дополнительные веб-элементов управления или элементов управления ContentPlaceHolder на главную страницу.

> [!NOTE]
> При создании главной страницы убедитесь, что главная страница содержит веб-формы, и, по крайней мере один элемент управления ContentPlaceHolder отображается в этой веб-формы.


### <a name="creating-a-simple-site-layout"></a>Создание простой сайт макета

Расширим `Site.master`элемента по умолчанию декларативная разметка для создания макета сайта, где совместно используют все страницы: распространенные заголовок; в левом столбце навигации, новостей и другое содержимое всего веб-узла; и нижний колонтитул, отображающий значок «На основе по Microsoft ASP.NET». Рис. 6 показан готовый результат главной страницы, если один из его страниц просматривается через браузер. Красный кружке области на рис. 6 относится к просматриваемую страницу (`Default.aspx`); это содержимое является определены в главной страницы и поэтому согласованность на всех страницах содержимого.


[![Tон главной страницы определяет разметку для верхней, левой и нижней частей](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)

**Рис 06**: Определяет страницу Master разметка для верхней, левой и нижней частей ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))


Для достижения узла компоновку, показанную на рис. 6, начните с обновления `Site.master` главную страницу, чтобы он содержал следующей декларативной разметке:

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample2.aspx)]

Макет главной страницы определяется с помощью ряда `<div>` HTML-элементов. `topContent` `<div>` Содержит разметку, которая отображается в верхней части каждой страницы, хотя `mainContent`, `leftContent`, и `footerContent` `<div>` s используются для отображения содержимого страницы, левом столбце и «на платформе Майкрософт Значок ASP.NET», соответственно. Помимо добавления этих `<div>` элементов, я также переименовал `ID` свойство основной элемент управления ContentPlaceHolder из `ContentPlaceHolder1` для `MainContent`.

Правила форматирования и макета для них различные `<div>` элементы выраженная в [каскадной таблицы стилей (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) файл `Styles.css`, которого указываются с помощью &lt;ссылку&gt; элемент в главной страницы &lt;head&gt; элемент. Эти различные правила определяют внешний вид каждого `<div>` элемента указано выше. Например `topContent` `<div>` элемент, который отображает текст «Master Pages Tutorials» и ссылка, имеет правилах форматирования, указанные в `Styles.css` следующим образом:

[!code-css[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample3.css)]

Если вы следуете на компьютере, необходимо будет загрузить сопутствующий кодом из этого руководства и добавить `Styles.css` файл в проект. Аналогичным образом также необходимо будет создать папку с именем изображения и Копировать значок «На основе по Microsoft ASP.NET» Скачанный демонстрационный веб-сайт в проект.

> [!NOTE]
> Обсуждение форматирование веб-страницу и CSS выходит за рамки этой статьи. Дополнительные сведения о CSS, ознакомьтесь с [учебники CSS](http://www.w3schools.com/css/default.asp) в [W3Schools.com](http://www.w3schools.com/). Я также рекомендую скачать сопутствующий кодом из этого руководства, используя параметры CSS в `Styles.css` чтобы увидеть влияние различных правил форматирования.


### <a name="creating-a-master-page-using-an-existing-design-template"></a>Создание главной страницы с помощью существующего шаблона проектирования

С годами я построил ряд веб-приложений ASP.NET для малых средних компаний. Некоторые из моих клиентов было существующий макет сайта, которые они хотели использовать; другим пользователям на работу конструктора компетентной графики. Некоторые уполномоченная мне Разработка структуры веб-сайта. Как вы видите, рис. 6, управление задачами программисту возможность разработать макет веб сайта обычно как с точки зрения как имеющий вашей бухгалтер выполнения open-heart surgery отличие врачом расчета налогов.

К счастью существуют innumerous веб-сайты, предлагают бесплатные шаблоны проектирования HTML - Google вернул более чем шесть миллионов результатов поиска термина бесплатный веб-сайт» шаблоны «. Одним из моих излюбленных сочетаний клавиш является [OpenDesigns.org](http://opendesigns.org/). Найдя нужный шаблон веб-сайта, добавьте файлы CSS и изображения в проект веб-сайта и интегрировать шаблона HTML на главную страницу.

> [!NOTE]
> Корпорация Майкрософт также предлагает ряд [бесплатно начать шаблоны комплектов ASP.NET разработки](https://msdn.microsoft.com/asp.net/aa336613.aspx) , интеграция в диалоговом окне "новый веб-сайт" в Visual Studio.


## <a name="step-2-creating-associated-content-pages"></a>Шаг 2. Создание связанного содержимого страницы

С главной страницей создана мы готовы приступить к созданию страниц ASP.NET, привязанные к главной страницы. Такие страницы называются *страниц с контентом*.

Добавим новую страницу ASP.NET к проекту и привяжите его к `Site.master` главной страницы. Щелкните правой кнопкой мыши имя проекта в обозревателе решений и выберите пункт Add New Item. Выберите шаблон веб-формы, введите имя `About.aspx`, а затем установите флажок «Выбрать главную страницу», как показано на рис. 7. Это будет экран Select главной страницы диалогового окна поле (см. рис. 8), в котором можно выбрать главную страницу для использования.

> [!NOTE]
> Если вы создали веб-сайта ASP.NET с помощью модели проекта веб-приложения, вместо модели проекта веб-сайта не появится флажок «Выбрать главную страницу» в диалоговом окне Добавить новый элемент, показанный на рис. 7. Для создания содержимого страницы при модели с помощью проекта веб-приложения, вам необходимо выбрать шаблон содержимого веб-формы вместо шаблона веб-форму. После выбора шаблона веб-содержимого формы и нажмите кнопку Добавить, же Выбор главной страницы будет отображаться диалоговое окно, показанное на рис. 8.


[![Aдд новую страницу содержимого](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)

**07 рис**: Добавьте новую страницу содержимого ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))


[![Sвыбрать страницу Site.master Master](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)

**Рис 08**: Выберите `Site.master` главной страницы ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))


Как показано в следующей декларативной разметке, содержит новую страницу содержимого `@Page` директива, что указывает на вышестоящем страницы и элемента управления содержимым для каждого из элементов управления ContentPlaceHolder на главной странице.

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample4.aspx)]

> [!NOTE]
> В разделе «Создание простой структурой узла» на шаге 1 я переименовал `ContentPlaceHolder1` для `MainContent`. Если не удалось переименовать этот элемент управления ContentPlaceHolder `ID` таким же образом, декларативная разметка страницы содержимого будет немного отличаться от показанная выше разметка. А именно, второй содержимого элемента управления `ContentPlaceHolderID` будет отражать `ID` из соответствующего элемента ContentPlaceHolder управления на главной странице.


При визуализации содержимого страницы, механизм ASP.NET необходимо объединять страницы содержимого элементов управления с помощью элементов управления ContentPlaceHolder главной страницы. Обработчик ASP.NET определяет, страницы содержимого главной страницы `@Page` директивы `MasterPageFile` атрибута. Как показано выше разметку, эта страница содержимого привязан к `~/Site.master`.

Так как Главная страница имеет два элемента управления ContentPlaceHolder - `head` и `MainContent` -Visual Web Developer созданных двух элементов управления содержимым. Каждый элемент управления содержимым, ссылается на конкретного элемента ContentPlaceHolder через его `ContentPlaceHolderID` свойство.

Где глянца главные страницы через ранее использовавшимися шаблона сайта — с их помощью во время разработки. Рис. 9 показана `About.aspx` страницы содержимого, выполненной в режиме конструктора Visual Web Developer. Обратите внимание, что пока отображается содержимое главной страницы, она недоступна и не может быть изменен. Элементы управления содержимым, соответствующих элементов управления ContentPlaceHolder на главной странице редактируются, однако. И так же, как с других страниц ASP.NET, можно создать интерфейс страницы содержимого, добавив веб-элементов управления через представления источника или конструктора.


[![THE страницы содержимого конструктора представления отображает как особые для страницы и содержимое страницы Master](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)

**Рис 09**: Страницы содержимого конструктора представления отображает как особые для страницы и содержимое страницы Master ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))


### <a name="adding-markup-and-web-controls-to-the-content-page"></a>Добавление разметки и веб-элементов управления на страницу содержимого

Отвлекитесь и создать часть содержимого для `About.aspx` страницы. Как показано на рис. 10, введенный с заголовком «О автор» и несколько абзацев текста, но вы можете также добавить веб-элемент управления. После создания этот интерфейс, посетите `About.aspx` страницы в обозревателе.


[![Visit About.aspx страницу через обозреватель](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)

**Рис. 10**: Посетите `About.aspx` страницу через обозреватель ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))


Важно понимать, что запрашиваемая страница содержимого и его сопоставленной главной странице совмещенного и подготовке к просмотру в целом полностью на веб-сервере. Обозреватель конечного пользователя будет отправлено полученный, склеенную HTML-код. Чтобы проверить это, просмотрите код HTML, полученных в браузере, перейдя в меню "Вид" и Выбор источника. Обратите внимание, что нет кадров или другие специальные методы для отображения двух разных веб-страниц в одном окне.

### <a name="binding-a-master-page-to-an-existing-aspnet-page"></a>Привязка главной страницы на существующую страницу ASP.NET

Как мы видели на этом шаге, добавление новой страницы содержимого для веб-приложения ASP.NET является просто установив флажок «Выбрать главную страницу» и выберете главную страницу. К сожалению преобразование существующую страницу ASP.NET к главной странице не так просто.

Для привязки главной страницы на существующую страницу ASP.NET необходимо выполнить следующие действия:

1. Добавить `MasterPageFile` к странице ASP.NET атрибут `@Page` директивы, он указывает на соответствующей главной страницы.
2. Добавление элементов управления содержимым для каждого из элементов управления ContentPlaceHolder на главной странице.
3. Выборочно Вырезать и вставить существующее содержимое страницы ASP.NET в соответствующие элементы управления содержимым. Я сказал «Выборочная» здесь потому, что скорее всего странице ASP.NET содержит разметку, которая уже выражается с помощью главной страницы, такие как `DOCTYPE`, `<html>` элемент и веб-формы.

Пошаговые инструкции об этом процессе, а также снимков экрана, ознакомьтесь с [Скотт Гатри](https://weblogs.asp.net/scottgu/) [с помощью главных страниц и переходы по узлу](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx) руководства. «Обновление `Default.aspx` и `DataSample.aspx` использование страницы "Master"» разделе описаны следующие действия.

Так как это гораздо проще создавать новые страницы содержимого, а не для преобразования существующих страниц ASP.NET в страницы содержимого, я рекомендую, что каждый раз при создании нового веб-сайта ASP.NET добавьте главную страницу к сайту. Привязать все новые страницы ASP.NET на эту главную страницу. Не беспокойтесь, если начальная Главная страница является очень простой или простой; Вы можете обновить главную страницу позже.

> [!NOTE]
> При создании нового приложения ASP.NET, Visual Web Developer добавляет `Default.aspx` страницы, не привязанный к главной странице. Если вы хотите попрактиковаться, преобразование существующую страницу ASP.NET в страницу содержимого, сделайте это с `Default.aspx`. Кроме того, вы можете удалить `Default.aspx` и снова добавьте его, но на этот раз, установив флажок «Выбрать главную страницу».


## <a name="step-3-updating-the-master-pages-markup"></a>Шаг 3. Обновление главной страницы разметки

Одним из основных преимуществ главных страниц является, что одна главная страница может использоваться для определения общего макета для множества страниц на сайте. Таким образом при обновлении сайта вид требуется обновить один файл - главной страницы.

Чтобы проиллюстрировать это, давайте обновим нас на главной странице включать текущую дату в верхней части левой. Добавьте метку с именем `DateDisplay` для `leftContent` `<div>`.

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample5.aspx)]

Создайте `Page_Load` обработчик событий для главной страницы и добавьте следующий код:

[!code-csharp[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample6.cs)]

Приведенный выше код задает метку `Text` свойства текущей даты и времени в формате день недели, название месяца и день из двух цифр (см. рис. 11). Благодаря этому изменению вернемся к одной из страниц содержимого. Как показано на рис. 11, полученная в итоге разметка немедленно обновляется для включения изменений на главную страницу.


[![TИзменения HE главной страницы будут отражены при просмотре страницы содержимого](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)

**Рис. 11**: Изменения на главную страницу будут отражены при просмотре страницы содержимого ([Просмотр полноразмерного изображения](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))


> [!NOTE]
> Как показано в этом примере, главные страницы может содержать веб-серверных элементов управления, код и обработчики событий.


## <a name="summary"></a>Сводка

Главные страницы позволяют разработчикам ASP.NET для создания согласованного макета-узла, который легко может обновляться. Создание главных страниц и соответствующие страницы содержимого сложнее, чем создание стандартных страниц ASP.NET, что и Visual Web Developer предлагает широкие возможности поддержки времени разработки.

В примере главную страницу, мы создали в этом учебнике было два элемента управления ContentPlaceHolder `head` и `MainContent`. Мы указали только разметку для `MainContent` ContentPlaceHolder управления в страницу содержимого, однако. В следующем учебном курсе мы рассмотрим использование нескольких содержимого элементов управления на странице содержимого. Мы также узнаем, как для определения по умолчанию разметки для содержимого элементов управления на главной странице, также как для переключения между использованием по умолчанию разметки определенные в главной страницы и предоставления пользовательской разметки на странице содержимого.

Счастливого вам программирования!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, обсуждавшимся в этом руководстве см. в следующих ресурсах:

- [ASP.NET для разработчиков: Бесплатные шаблоны проектирования и рекомендации по созданию веб-сайтов ASP.NET с помощью веб-стандартов](https://msdn.microsoft.com/asp.net/aa336602.aspx)
- [Обзор ASP.NET главных страниц](https://msdn.microsoft.com/library/wtxbf3hh.aspx)
- [Учебники каскадных таблиц стилей (CSS)](http://www.w3schools.com/css/default.asp)
- [Динамическое задание заголовка страницы](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [Главные страницы в ASP.NET](http://www.odetocode.com/articles/419.aspx)
- [Главные страницы краткие руководства](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx)

### <a name="about-the-author"></a>Об авторе

[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор из нескольких книг по ASP/ASP.NET и основатель веб-узла 4GuysFromRolla.com, работает с веб-технологиями Microsoft с 1998 года. Скотт — независимый консультант, преподаватель и автор. Его последняя книга — [ *Sams Teach самостоятельно ASP.NET 3.5 за 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco). Скоттом можно связаться по адресу [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) или через его блог по адресу [ http://ScottOnWriting.NET ](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Особая благодарность

Хотите поработать с моих последующих статей для MSDN? Если Да, напишите мне [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).

> [!div class="step-by-step"]
> [Далее](multiple-contentplaceholders-and-default-content-cs.md)
