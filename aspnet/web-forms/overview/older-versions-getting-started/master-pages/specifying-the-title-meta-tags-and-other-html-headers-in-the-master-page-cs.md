---
uid: web-forms/overview/older-versions-getting-started/master-pages/specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs
title: Указание названия, метатегов и других заголовков HTML на главной странице (C#) | Документация Майкрософт
author: rick-anderson
description: Рассматриваются различные методы для определения assorted &lt;head&gt; элементов в главной страницы на странице содержимого.
ms.author: riande
ms.date: 05/21/2008
ms.assetid: 0aa1c84f-c9e2-4699-b009-0e28643ecbc6
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 431d5a124017e2a23bfaa7579f63d61faf0b8ebd
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59379798"
---
# <a name="specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-c"></a>Указание названия, метатегов и других заголовков HTML на эталонной странице (C#)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_03_CS.zip) или [скачать PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_03_CS.pdf)

> Рассматриваются различные методы для определения assorted &lt;head&gt; элементов в главной страницы на странице содержимого.


## <a name="introduction"></a>Вступление

У нового главных страниц, созданных в Visual Studio 2008, по умолчанию двух элементов управления ContentPlaceHolder: один с именем head, а в `<head>` элемент; и один с именем `ContentPlaceHolder1`, помещенных в веб-формы. Цель `ContentPlaceHolder1` является определение области в веб-форму, которую можно настроить на основе страницу по. `head` ContentPlaceHolder включает страницы можно добавить пользовательское содержимое для `<head>` раздел. (Само собой, можно изменить или удалить этих двух элементов управления ContentPlaceHolder и могут быть добавлены дополнительные ContentPlaceHolder на главную страницу. Нас на главной странице, `Site.master`, в настоящее время имеет четыре элемента управления ContentPlaceHolder.)

HTML-код `<head>` элемент используется в качестве репозитория сведения о веб-страницы документа, который не является частью самого документа. Сюда входят сведения, такие как заголовок веб-страницы, метаинформацию используемые поисковые системы или внутренних программ-обходчиков и ссылки на внешние ресурсы, такие как веб-каналы RSS, JavaScript и CSS файлы. Часть этой информации может быть необходимой для всех страниц на веб-сайте. Например может потребоваться глобально импортировать эти же правила CSS и файлы JavaScript для каждой страницы ASP.NET. Однако существуют некоторые части `<head>` элемент, зависят от страницы. Заголовок страницы — отличный пример.

В этом руководстве мы рассмотрим, как для определения глобальных и зависящих от страницы `<head>` разметка раздела на главной странице и в его страниц.

## <a name="examining-the-master-pagesheadsection"></a>Проверка на главной странице`<head>`раздел

По умолчанию файл главной страницы созданные Visual Studio 2008 содержит следующую разметку в его `<head>` раздел:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample1.aspx)]

Обратите внимание, что `<head>` элемент содержит `runat="server"` атрибут, который указывает, что это серверный элемент управления (а не статический HTML). Все страницы ASP.NET являются производными от [ `Page` класс](https://msdn.microsoft.com/library/system.web.ui.page.aspx), который находится в `System.Web.UI` пространства имен. Этот класс содержит `Header` свойства, которое предоставляет доступ к странице `<head>` регион. С помощью [ `Header` свойство](https://msdn.microsoft.com/library/system.web.ui.page.header.aspx) можно задать заголовок страницы ASP.NET или добавьте дополнительные разметку в готовом для просмотра `<head>` раздел. Это возможно, затем, чтобы настроить страницу содержимого `<head>` элемент путем написания кода на странице `Page_Load` обработчик событий. Мы рассмотрим, как программно задать заголовок страницы в шаге 1.

Разметка, показанная на `<head>` выше также содержит элемент управления ContentPlaceHolder, с именем head. Этот элемент управления ContentPlaceHolder нет необходимости, как страницы содержимого можно добавить пользовательское содержимое для `<head>` элемент программным способом. Это полезно, но в ситуациях, где необходимо добавить статическую разметку для страницы содержимого `<head>` элемент как статическую разметку можно добавить декларативно в соответствующий элемент управления содержимым, а не программным способом.

В дополнение к `<title>` элемент и head ContentPlaceHolder, главной страницы `<head>` должны содержать элемент `<head>`-уровне разметки, общие для всех страниц. В нашем веб-сайте, все страницы используют правила CSS, определенные в `Styles.css` файл. Следовательно, мы обновили `<head>` элемент в [ *создание макета сайта с главными страницами* ](creating-a-site-wide-layout-using-master-pages-cs.md) руководству, чтобы включить соответствующий `<link>` элемент. Наши `Site.master` главную страницу текущей `<head>` разметка показана ниже.


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample2.aspx)]

## <a name="step-1-setting-a-content-pages-title"></a>Шаг 1. Задание заголовка страницы содержимого

Заголовок веб-страницы указывается с помощью `<title>` элемент. Очень важно для установки заголовка на каждой странице соответствующее значение. При открытии страницы ее заголовок отображается в заголовке окна браузера. Кроме того когда создание закладок в страницу, браузеры используют заголовок страницы как предлагаемое имя закладки. Кроме того Многие поисковые Показать заголовок страницы при отображении результатов поиска.

> [!NOTE]
> По умолчанию Visual Studio устанавливает `<title>` элемент на главной странице, чтобы «Untitled Page». Аналогичным образом, имеют новые страницы ASP.NET их `<title>` слишком равным «Untitled Page». Так как он может быть легко забыть задать заголовок страницы соответствующее значение, имеется множество страниц в Интернете с заголовком «Untitled Page». Поиск Google для веб-страниц с таким названием возвращает примерно 2,460,000 результатов. Даже Корпорация Майкрософт делает возможной публикации веб-страниц с заголовком «Untitled Page». Во время написания этой статьи поиска Google сообщил 236 таких веб-страниц в домене Microsoft.com.


Страницы ASP.NET можно указать ее название в одном из следующих способов:

- Поместив значение непосредственно в пределах `<title>` элемент
- С помощью `Title` атрибут в `<%@ Page %>` директива
- Программная установка страницы `Title` свойства с помощью следующего кода `Page.Title="title"` или `Page.Header.Title="title"`.

Содержимого нет страниц `<title>` элемент, так как он определен в главной страницы. Таким образом, чтобы задать заголовок содержимого страницы вы можете использовать `<%@ Page %>` директивы `Title` атрибута или его программном задании.

### <a name="setting-the-pages-title-declaratively"></a>Задание заголовка страницы декларативно

Заголовок содержимого страницы можно задать декларативно с помощью `Title` атрибут [ `<%@ Page %>` директива](https://msdn.microsoft.com/library/ydy4x04a.aspx). Это свойство может задаваться путем прямого внесения изменений `<%@ Page %>` директив или в окне «Свойства». Давайте взглянем на оба подхода.

В представлении источника, найдите `<%@ Page %>` директивы, который находится в верхней части декларативная разметка страницы. `<%@ Page %>` Директив для `Default.aspx` ниже:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample3.aspx)]

`<%@ Page %>` Директива задает особые для страницы атрибуты, используемые механизмом ASP.NET при синтаксический анализ и компиляцию страницы. Сюда входит его файл главной страницы, расположение его файл кода и ее название, а также другую информацию.

По умолчанию при создании новой страницы содержимого Visual Studio задает `Title` атрибут Untitled Page. Изменение `Default.aspx`в `Title` атрибут «Untitled Page» на «Master страницы руководства» и просмотрите страницу через обозреватель. Рис. 1 показана заголовке браузера, который отражает новый заголовок страницы.


![Теперь отображается в строке заголовка браузера &quot;учебники страницы Master&quot; вместо &quot;Untitled Page&quot;](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image1.png)

**Рис 01**: Строка заголовка браузера теперь отображается «Tutorials Master страницы» вместо «Untitled Page»


Заголовок страницы также можно задать в окне свойств. В окне «Свойства» выберите документ из раскрывающегося списка для нагрузки на уровне страницы свойств, которые включает в себя `Title` свойство. Рис. 2 показано окно свойств после `Title` установлен на «Master страницы руководства».


![Можно настроить таким образом заголовку из окна свойств слишком](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image2.png)

**Рис. 02**: Можно настроить таким образом заголовку из окна свойств слишком


### <a name="setting-the-pages-title-programmatically"></a>Программная установка заголовок страницы

На главной странице `<head runat="server">` разметку, преобразуется в [ `HtmlHead` класс](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlhead.aspx) экземпляра при отображении страницы обработчиком ASP.NET. `HtmlHead` Класс имеет [ `Title` свойство](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlhead.title.aspx) , значение которого будет отражено в отображаемых `<title>` элемент. Это свойство доступно из вспомогательного класса страницы ASP.NET с помощью `Page.Header.Title`; в этом же свойство также может осуществляться через `Page.Title`.

Чтобы потренироваться в установке заголовок страницы программным путем, перейдите к `About.aspx` страницы кода класса и создайте обработчик событий для страницы `Load` событий. Переключите заголовок страницы на «Master страницы руководства:: Около:: *даты*«, где *даты* — текущая дата. После добавления этого кода вашей `Page_Load` обработчик событий должен выглядеть следующим образом:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample4.cs)]

Рис. 3 показана строка заголовка браузера при просмотре `About.aspx` страницы.


![Заголовок страницы — программное задание, которое включает текущую дату](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image3.png)

**Рис 03**: Заголовок страницы — программное задание, которое включает текущую дату


## <a name="step-2-automatically-assigning-a-page-title"></a>Шаг 2. Автоматическое задание заголовка страницы

Как мы видели в шаге 1, заголовок страницы можно задать декларативно или программно. Если вы забыли явно измените заголовок на более описательное, тем не менее, на странице будет иметь заголовок по умолчанию, «Untitled Page». В идеальном случае заголовок страницы устанавливается автоматически для нас в случае, если его значение явно не указано. Например если во время выполнения заголовок страницы «Untitled Page», мы хотим иметь заголовок, автоматически обновляются до быть так же, как имя файла страницы ASP.NET. Хорошо то, что при использовании мало немало усилий, это может быть название, автоматически.

Все веб-страницы ASP.NET являются производными от `Page` в класс `System.Web.UI` пространства имен. `Page` Класс определяет минимальные возможности, требующиеся страницей ASP.NET и предоставляет основные свойства, такие как `IsPostBack`, `IsValid`, `Request`, и `Response`, среди прочих. Очень часто каждой страницы в веб-приложения требует дополнительные компоненты или функциональные возможности. Распространенным способом предоставления это является создание пользовательского базового класса страницы. Пользовательский базовый класс страниц является создаваемый класс, производный от `Page` класса и включает дополнительные функциональные возможности. После создания этого базового класса, может иметь производные от него страниц ASP.NET (а не `Page` класс), тем самым предлагает расширенные функции для страниц ASP.NET.

На этом шаге мы создадим базовой страницы, который автоматически задает заголовок страницы, к имени файла страницы ASP.NET, если заголовок не в противном случае было задано явно. Шаг 3 рассматривает задание заголовка страницы, на основе карты сайта.

> [!NOTE]
> Провести полную ревизию Создание и использование классов пользовательских базовой страницы выходит за рамки этой серии руководств. Дополнительные сведения в статье [с помощью пользовательского базового класса для классов кода Your страниц ASP.NET](http://aspnet.4guysfromrolla.com/articles/041305-1.aspx).


### <a name="creating-the-base-page-class"></a>Создание базового класса Page

Наша первая задача – создать базового класса страницы, который является классом, который расширяет `Page` класса. Начните с добавления `App_Code` папки в проект, щелкнув правой кнопкой мыши имя проекта в обозревателе решений и добавить папку ASP.NET и затем выбрав `App_Code`. После этого щелкните правой кнопкой мыши `App_Code` папку и добавьте новый класс с именем `BasePage.cs`. Рис. 4 показан обозреватель решений после `App_Code` папки и `BasePage.cs` класса были добавлены.


![Добавьте папку App_Code и класс с именем основная страница](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image4.png)

**Рис. 04**: Добавление `App_Code` папку и класс с именем `BasePage`


> [!NOTE]
> Visual Studio поддерживает два режима управления проектом. Проекты веб-сайтов и проектов веб-приложений. `App_Code` Папка должна использоваться в модели проекта веб-сайта. При использовании модели проекта веб-приложения, поместите `BasePage.cs` класс в папку с именем, отличным `App_Code`, такие как `Classes`. Дополнительные сведения по этой теме см. [миграции проекта веб-сайта в проект веб-приложения](http://webproject.scottgu.com/CSharp/Migration2/Migration2.aspx).


Так как пользовательский основной страницы служит базовым классом для классов фонового кода страницы ASP.NET, необходимо расширить `Page` класса.


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample5.cs)]

При запросе страницы ASP.NET, он переходит через последовательность этапов, улучшалась на запрошенную страницу, отображаемую в формат HTML. Мы делающем этап путем переопределения `Page` класса `OnEvent` метод. Для нашей базы страницы давайте автоматически задание заголовка, если он не задан явно `LoadComplete` рабочей области (который, как вы могли догадаться, происходит после `Load` рабочей области).

Для этого необходимо переопределить `OnLoadComplete` метод и введите следующий код:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample6.cs)]

`OnLoadComplete` Метод начинается с определения Если `Title` свойство не еще было задано явно. Если `Title` свойство `null`, является пустой строкой, или имеет значение «Untitled Page», она назначается имени файла запрошенной страницы ASP.NET. Физический путь к запрошенной странице ASP.NET - `C:\MySites\Tutorial03\Login.aspx`, например - доступна через `Request.PhysicalPath` свойство. `Path.GetFileNameWithoutExtension` Метод используется для отделения части имени файла, а затем присваивается filename `Page.Title` свойство.

> [!NOTE]
> Предлагаю вам улучшить эту логику для улучшения формат заголовка. Например, если имя файла страницы — `Company-Products.aspx`, приведенный выше код создает заголовок «Продукции компании», но в идеале необходимо заменить штриха с пробелом, как «Продукты компании». Кроме того рассмотрите возможность добавления пробелов, каждый раз при обнаружении изменения регистра. То есть, попробуйте добавить код, который преобразует имя файла `OurBusinessHours.aspx` для заголовка элемента «наш рабочего дня».


### <a name="having-the-content-pages-inherit-the-base-page-class"></a>Расположение содержимого страниц унаследовать базовый класс страницы

Теперь нам нужно обновить страницы ASP.NET на нашем сайте для наследования от пользовательских основной страницы (`BasePage`) вместо `Page` класса. Для выполнения перейдите к каждому классу кода и замените объявление класса из:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample7.cs)]

В:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample8.cs)]

После этого на узле через браузер. Если вы посетите страницу, заголовки которых задана явным образом, такие как `Default.aspx` или `About.aspx`, используется явно заданный заголовок. Если, однако посещении страницы, чья должность не изменилось со значения по умолчанию («Untitled Page»), базовый класс страницы задает заголовок, имя файла страницы.

Рис. 5 показан `MultipleContentPlaceHolders.aspx` страницы при просмотре в обозревателе. Обратите внимание, что заголовок точное имя файла страницы (менее расширение), «MultipleContentPlaceHolders».


[![Если заголовок не указан явно, имя файла страницы является автоматически используется](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image6.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image5.png)

**05 рис**: Если заголовок не указан явно, имя файла страницы является автоматически используется ([Просмотр полноразмерного изображения](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image7.png))


## <a name="step-3-basing-the-page-title-on-the-site-map"></a>Шаг 3. Индексация заголовок страницы карты узла

ASP.NET предоставляет инфраструктуру карты полная версия портала, позволяющий разработчикам страниц для определения иерархической карты узла в вместе с веб-элементы управления для отображения сведений о карте веб-узла (например, SiteMapPath, внешний ресурс (например, XML файла или таблицы базы данных) Меню и элементы управления TreeView).

Структуры карты также возможен программно из вспомогательного класса страницы ASP.NET. Таким образом мы автоматически задание заголовка страницы с заголовком ее соответствующий узел карты узла. Теперь мы расширим `BasePage` класс, созданный на шаге 2, таким образом, чтобы он обеспечивает эти функциональные возможности. Но сначала необходимо создать карту узла, мы.

> [!NOTE]
> Учебнике предполагается, что читатель уже хорошо знаком с ASP. Элементы карты сайта NET. Дополнительные сведения об использовании карты узла, обратитесь к моей составной статье серии [ASP, анализ. Навигация по сайту NET](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx).


### <a name="creating-the-site-map"></a>Создание карты сайта

Система карты сайта обычно строится поверх [модель поставщика](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), который отделяет карты узла API-интерфейса от логики, которая выполняет сериализацию данных карты сайта между памятью и постоянного хранилища. .NET Framework поставляется с [ `XmlSiteMapProvider` класс](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx), который является стандартным поставщиком карты узла. Как понятно из названия, `XmlSiteMapProvider` использует XML-файл в качестве хранилища карты сайта. Давайте использовать этого поставщика для определения карта узла.

Начните с создания файла карты узла в корневой папке веб сайта, с именем `Web.sitemap`. Для этого правой кнопкой мыши имя веб-сайта в обозревателе решений и выберите Add New Item выберите шаблон карты сайта. Убедитесь, что этот файл имеет имя `Web.sitemap` и щелкните "Добавить".


[![Добавьте в файл с именем Web.sitemap корневую папку веб сайта](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image9.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image8.png)

**Рис 06**: Добавьте файл с именем `Web.sitemap` корневую папку веб сайта ([Просмотр полноразмерного изображения](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image10.png))


Добавьте следующий код XML для `Web.sitemap` файла:


[!code-xml[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample9.xml)]

Этот XML-документ определяет иерархической структуре карты сайта показано на рис. 7.


![Карта узла — в настоящее время состоит из трех узлов карты](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image11.png)

**07 рис**: Карта узла — в настоящее время состоит из трех узлов карты


Мы будем обновлять структуры карты в последующих учебных курсах, так как мы добавляем новые примеры.

### <a name="updating-the-master-page-to-include-navigation-web-controls"></a>Обновление главной страницы для включения навигации веб-элементов управления

Теперь, когда у нас есть карты узла, определенных, давайте обновим главной страницы для включения навигации веб-элементов управления. В частности давайте добавим элемент управления ListView в левый столбец, в разделе занятий, выполняющий визуализацию в неупорядоченный список элемент списка для каждого узла, определенный в карту узла.

> [!NOTE]
> Элемент управления ListView является новым для ASP.NET версии 3.5. Если вы используете предыдущую версию ASP.NET, следует используйте элемент управления Repeater. Дополнительные сведения об элементе управления ListView, см. в разделе [элементы управления DataPager и ListView с помощью ASP.NET 3.5](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx).


Сначала удалить существующую разметку неупорядоченный список из раздела занятий. Затем перетащите элемент управления ListView с панели инструментов и поместите его под занятия заголовок. ListView находится в разделе данных панели элементов, наряду с другими элементами управления представления: GridView, DetailsView и FormView. Значение свойства идентификатора ListView `LessonsList`.

В мастере настройки источника данных, выберите для доступа к ListView новый элемент управления SiteMapDataSource с именем `LessonsDataSource`. Элемент управления SiteMapDataSource возвращает иерархическую структуру из системы карты сайта.


[![Привязать элемент управления SiteMapDataSource к элементу управления ListView LessonsList](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image13.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image12.png)

**Рис 08**: Привязать элемент управления SiteMapDataSource для `LessonsList` элемента управления ListView ([Просмотр полноразмерного изображения](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image14.png))


Создав элемент управления SiteMapDataSource, нам нужно определить шаблоны ListView, могла обрабатывать неупорядоченный список элемент списка для каждого узла, возвращенный элемент управления SiteMapDataSource. Это можно сделать с помощью следующую разметку шаблона:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample10.aspx)]

`LayoutTemplate` Создает разметку для неупорядоченный список (`<ul>...</ul>`) во время `ItemTemplate` отображает каждого элемента, возвращенного источником данных SiteMapDataSource как элемент списка (`<li>`), содержащий ссылку на определенном занятии.

После настройки шаблонов ListView, посетите веб-сайта. Как показано на рис. 9, разделе занятий, содержит один элемент маркированного, Home. Где находятся о программе и с помощью элементов управления ContentPlaceHolder несколько занятий? SiteMapDataSource он предназначен для возврата иерархический набор данных, но элемент управления ListView может отображаться только один уровень иерархии. Следовательно отображается только первый уровень узлов карты узла, возвращаемые источником данных SiteMapDataSource.


[![В разделе занятий содержит единственный элемент списка](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image16.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image15.png)

**Рис 09**: В разделе занятий, содержит один элемент списка ([Просмотр полноразмерного изображения](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image17.png))


Для отображения нескольких уровней можно вложить несколько ListViews в `ItemTemplate`. Этот метод был проверяются в [ *главные страницы и переходы по узлу* руководстве](../../data-access/introduction/master-pages-and-site-navigation-cs.md) из моей [работа с серии руководств данных](../../data-access/index.md). Тем не менее для этой серии руководств карта узла будет содержать только два уровня: Домашняя (верхний); и каждый урок подчиненного дома. Вместо создания вложенных ListView, мы вместо этого можно указать элемент SiteMapDataSource просто возвращает начальный узел, установив его [ `ShowStartingNode` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) для `false`. В итоге получается, что SiteMapDataSource начинается путем возвращения второго уровня узлов карты веб-узла.

Благодаря этому изменению ListView отображаются элементы, маркера для About и с помощью нескольких элементов управления ContentPlaceHolder уроки, но пропускает элемент маркера для дома. Чтобы исправить это, мы можно явно добавить элемент маркера для дома в `LayoutTemplate`:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample11.aspx)]

Настроив SiteMapDataSource для пропуска начальный узел и явным образом Добавление домашней маркера элемента в разделе занятия теперь отображается желаемые выходные данные.


[![В разделе занятий содержит элемент маркера для дома и каждого дочернего узла](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image19.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image18.png)

**Рис. 10**: В разделе занятий содержит элемент маркера для дома и каждый дочерний узел ([Просмотр полноразмерного изображения](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image20.png))


### <a name="setting-the-title-based-on-the-site-map"></a>Задание заголовка, на основе карты сайта

С помощью карты узла в место, мы можем обновить наш `BasePage` класс для использования в заголовок, указанный в карту узла. Как мы делали на шаге 2, необходимо использовать заголовок узла карты сайта, если заголовок страницы не было явно задано разработчиком страницы. Если запрашиваемого страницы не был явно указан заголовок страницы и не найден в карту узла, а затем мы будем переключиться на использование имени файла запрошенной страницы (менее расширение), как мы делали на шаге 2. Рис. 11 иллюстрирует этот процесс принятия решений.


![В случае отсутствия явно название страницы используется заголовок соответствующий узел карты сайта](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image21.png)

**Рис. 11**: В случае отсутствия явно название страницы используется заголовок соответствующий узел карты сайта


Обновление `BasePage` класса `OnLoadComplete` метод в него следующий код:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample12.cs)]

Как и раньше `OnLoadComplete` метод начинается с определения, ли явно задать заголовок страницы. Если `Page.Title` — `null`, является пустой строкой, или присваивается значение «Untitled Page», а затем код автоматически присваивает значение свойству `Page.Title`.

Чтобы определить заголовок, используемый, начинается код, ссылаясь на [ `SiteMap` класс](https://msdn.microsoft.com/library/system.web.sitemap.aspx) [ `CurrentNode` свойство](https://msdn.microsoft.com/library/system.web.sitemap.currentnode.aspx). `CurrentNode` Возвращает [ `SiteMapNode` ](https://msdn.microsoft.com/library/system.web.sitemapnode.aspx) экземпляра в карте узла, соответствующий текущей запрошенной страницы. При условии, что в настоящее время Запрашиваемая страница найдена в карту узла, `SiteMapNode`в `Title` свойство назначено заголовок страницы. Если в настоящее время Запрашиваемая страница не находится в карту узла, `CurrentNode` возвращает `null` и имени файла запрошенной страницы используется в качестве заголовка (как это было сделано на шаге 2).

Рис. 12 показан `MultipleContentPlaceHolders.aspx` страницы при просмотре в обозревателе. Так как этот заголовок не задан явно, вместо этого используется заголовок его соответствующего узла карты узла.


![Заголовок страницы MultipleContentPlaceHolders.aspx извлекаются из карты узла](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image22.png)

**Рис. 12**: `MultipleContentPlaceHolders.aspx` Заголовок страницы будут извлечены из карты узла


## <a name="step-4-adding-other-page-specific-markup-to-theheadsection"></a>Шаг 4. Добавление других страниц разметку для`<head>`раздел

Шаги 1, 2 и 3 рассмотрели Настройка `<title>` элемент на основе страниц. В дополнение к `<title>`, `<head>` раздел может содержать `<meta>` элементов и `<link>` элементов. Как отмечалось ранее в этом учебнике `Site.master` `<head>` раздел содержит `<link>` элемент `Styles.css`. Так как это `<link>` элемент определен в главной страницы, она включается в `<head>` разделе для всех страниц содержимого. Но как же мы собираемся делать о добавлении `<meta>` и `<link>` элементы на основе страниц?

Самый простой способ добавить содержимое конкретной страницы для `<head>` раздел является создание элемента управления ContentPlaceHolder на главной странице. У нас уже есть такой ContentPlaceHolder (с именем `head`). Таким образом Чтобы добавить пользовательские `<head>` разметки, создает соответствующий содержимого элемента управления на странице и поместили разметку существует.

Чтобы продемонстрировать добавление пользовательских `<head>` разметки на странице, давайте включим `<meta>` элемент "description" для нашего текущего набора страниц содержимого. `<meta>` Элемент "description" предоставляет краткое описание для веб-страницы; в большинстве поисковых интегрировать эти данные в определенной форме, при отображении результатов поиска.

Объект `<meta>` элемент "description" имеет следующий вид:


[!code-html[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample13.html)]

Чтобы добавить эту разметку страницы содержимого, добавьте выше текст в элемент управления содержимым, которая сопоставляется с главной страницы head ContentPlaceHolder. Например, чтобы определить `<meta>` элемент "description" для `Default.aspx`, добавьте следующую разметку:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample14.aspx)]

Так как начало элемента ContentPlaceHolder не в теле HTML-страницы, разметки, добавленный к элементу управления содержимым не отображается в представлении конструирования. Чтобы увидеть `<meta>` описание элемента посещение `Default.aspx` через браузер. После загрузки страницы, просмотрите исходный код и обратите внимание, что `<head>` раздел содержит разметку, указанную в элементе управления содержимым.

Отвлекитесь и добавьте `<meta>` описание элементов `About.aspx`, `MultipleContentPlaceHolders.aspx`, и `Login.aspx`.

### <a name="programmatically-adding-markup-to-theheadregion"></a>Программное добавление разметки для`<head>`регион

Заголовок элемента ContentPlaceHolder позволяет декларативно добавить пользовательской разметки на главную страницу `<head>` регион. Пользовательской разметки также могут быть добавлены программным способом. Помните, что `Page` класса `Header` возвращает `HtmlHead` экземпляр, определенный на главной странице ( `<head runat="server">`).

Возможность программно добавлять содержимое в `<head>` регион полезно, когда содержимое, добавляемое является динамическим. Возможно, он основан на пользователя, посещающего страницу; Возможно он извлекаются из базы данных. Какое-либо можно добавить содержимое к `HtmlHead` путем добавления элементов управления в его коллекцию элементов управления следующим образом:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample15.cs)]

Приведенный выше код добавляет `<meta>` элемент ключевые слова для `<head>` область, которая содержит разделенный запятыми список ключевых слов, описывающих страницы. Обратите внимание, что для добавления `<meta>` тег, создании [ `HtmlMeta` ](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlmeta.aspx) экземпляра, установите его `Name` и `Content` свойства и затем добавить его `Header`в `Controls` коллекции. Аналогичным образом для программного добавления `<link>` элемент, создание [ `HtmlLink` ](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmllink.aspx) , задать его свойства и затем добавить его `Header`в `Controls` коллекции.

> [!NOTE]
> Чтобы добавить произвольные разметки, создайте [ `LiteralControl` ](https://msdn.microsoft.com/library/system.web.ui.literalcontrol.aspx) экземпляра, установите его `Text` свойство и затем добавить его `Header`в `Controls` коллекции.


## <a name="summary"></a>Сводка

В этом учебнике мы рассмотрели ряд способов добавления `<head>` регион разметки на основе страниц. Главная страница должен включать `HtmlHead` экземпляра (`<head runat="server">`) с ContentPlaceHolder. `HtmlHead` Экземпляр разрешает страниц содержимого для программного доступа к `<head>` регион и декларативно и программно задать на странице элемента заголовка; элемент управления ContentPlaceHolder позволяет пользовательской разметки для добавления `<head>` раздел декларативно через элемент управления содержимым.

Счастливого вам программирования!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, обсуждавшимся в этом руководстве см. в следующих ресурсах:

- [Динамическое задание заголовка страницы в ASP.NET](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [Проверка ASP. Переходы по узлу NET](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [Как использовать HTML-теги Meta](http://searchenginewatch.com/showPage.html?page=2167931)
- [Главные страницы в ASP.NET](http://www.odetocode.com/articles/419.aspx)
- [С помощью ASP.NET 3.5 ListView и DataPager элементов управления](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx)
- [С помощью пользовательский базовый класс для классов фонового кода страницы ASP.NET](http://aspnet.4guysfromrolla.com/articles/041305-1.aspx)

### <a name="about-the-author"></a>Об авторе

[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор из нескольких книг по ASP/ASP.NET и основатель веб-узла 4GuysFromRolla.com, работает с веб-технологиями Microsoft с 1998 года. Скотт — независимый консультант, преподаватель и автор. Его последняя книга — [ *Sams Teach самостоятельно ASP.NET 3.5 за 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco). Скоттом можно связаться по адресу [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) или через его блог по адресу [ http://ScottOnWriting.NET ](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Особая благодарность

В этой серии руководств пособий рецензировалась многими компетентными редакторами. Стали Зак Джонс и Suchi Банерджи Лиз Шалок в этом руководстве. Хотите поработать с моих последующих статей для MSDN? Если Да, напишите мне [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).

> [!div class="step-by-step"]
> [Назад](multiple-contentplaceholders-and-default-content-cs.md)
> [Вперед](urls-in-master-pages-cs.md)
