---
uid: web-forms/overview/older-versions-getting-started/master-pages/multiple-contentplaceholders-and-default-content-vb
title: Несколько элементов управления ContentPlaceHolder и содержимое по умолчанию (VB) | Документация Майкрософт
author: rick-anderson
description: Рассматриваются способы добавления нескольких владельцев на главную страницу, а также указания содержимого по умолчанию в заполнители содержимого.
ms.author: riande
ms.date: 05/21/2008
ms.assetid: 866a7177-6884-451e-88f4-c934b1dd1af5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/multiple-contentplaceholders-and-default-content-vb
msc.type: authoredcontent
ms.openlocfilehash: b71cacb143094dcc5cf483c69c2fcc0f10def51c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2019
ms.locfileid: "74628516"
---
# <a name="multiple-contentplaceholders-and-default-content-vb"></a>Несколько элементов управления ContentPlaceHolder и содержимое по умолчанию (VB)

по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Скачать код](https://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_02_VB.zip) или [скачать PDF](https://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_02_VB.pdf)

> Рассматриваются способы добавления нескольких владельцев на главную страницу, а также указания содержимого по умолчанию в заполнители содержимого.

## <a name="introduction"></a>Введение

В предыдущем учебном курсе мы рассмотрели, как главные страницы позволяют разработчикам ASP.NET создавать единообразные макеты для всего сайта. Главные страницы определяют разметку, которая является общей для всех страниц содержимого и регионов, настраиваемых на уровне отдельных страниц. В предыдущем учебном курсе мы создали простую главную страницу (`Site.master`) и две страницы содержимого (`Default.aspx` и `About.aspx`). Наша главная страница состоит из двух элементов управления ContentPlaceHolder с именами `head` и `MainContent`, которые расположены в элементе `<head>` и в веб-форме соответственно. Хотя страницы содержимого имеют два элемента управления содержимым, мы указали только разметку, соответствующую `MainContent`.

Как свидетельствует два элемента управления ContentPlaceHolder в `Site.master`, Главная страница может содержать несколько элементов управления ContentPlaceHolder. Более того, на главной странице может быть задана разметка по умолчанию для элементов управления ContentPlaceHolder. На странице содержимого можно дополнительно указать собственную разметку или использовать разметку по умолчанию. В этом учебнике мы рассмотрим использование нескольких элементов управления содержимым на главной странице и Узнайте, как определить разметку по умолчанию в элементах управления ContentPlaceHolder.

## <a name="step-1-adding-additional-contentplaceholder-controls-to-the-master-page"></a>Шаг 1. Добавление дополнительных элементов управления ContentPlaceHolder на главную страницу

Многие разработки веб-сайтов содержат несколько областей на экране, которые настраиваются отдельно на странице. `Site.master`, Главная страница, созданная в предыдущем руководстве, содержит один элемент ContentPlaceHolder внутри веб-формы с именем `MainContent`. В частности, этот ContentPlaceHolder находится в элементе `mainContent` `<div>`.

На рис. 1 показано, `Default.aspx` при просмотре в браузере. Регион, обозначенный красным цветом, является разметкой, зависящей от страницы, соответствующей `MainContent`.

[![область в кружке отображает область, настраиваемую в настоящее время на уровне отдельных страниц.](multiple-contentplaceholders-and-default-content-vb/_static/image2.png)](multiple-contentplaceholders-and-default-content-vb/_static/image1.png)

**Рис. 01**. область в кружке отображает область, настраиваемую в данный момент на отдельной странице ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image3.png))

Представьте, что в дополнение к региону, показанному на рис. 1, нам также нужно добавить элементы, относящиеся к странице, к левому столбцу, расположенному в разделах «уроки» и «новости». Для этого мы добавим на главную страницу еще один элемент управления ContentPlaceHolder. Чтобы продолжить работу, откройте главную страницу `Site.master` в Visual Web Developer и перетащите элемент управления ContentPlaceHolder с панели элементов в конструктор после раздела новостей. Задайте для `ID` ContentPlaceHolder значение `LeftColumnContent`.

[![добавить элемент управления ContentPlaceHolder в левый столбец главной страницы](multiple-contentplaceholders-and-default-content-vb/_static/image5.png)](multiple-contentplaceholders-and-default-content-vb/_static/image4.png)

**Рис. 02**. Добавление элемента управления ContentPlaceHolder в левый столбец главной страницы ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image6.png))

С добавлением `LeftColumnContent` ContentPlaceHolder на главную страницу можно определить содержимое для этого региона на отдельной странице, включив на странице элемент управления содержимым, для которого `ContentPlaceHolderID` задано значение `LeftColumnContent`. Мы рассмотрим этот процесс на шаге 2.

## <a name="step-2-defining-content-for-the-new-contentplaceholder-in-the-content-pages"></a>Шаг 2. Определение содержимого для нового ContentPlaceHolder на страницах содержимого

При добавлении новой страницы содержимого на веб-сайт Visual Web Developer автоматически создает на странице элемент управления содержимым для каждого элемента ContentPlaceHolder на выбранной главной странице. После добавления `LeftColumnContent` ContentPlaceHolder на главную страницу на шаге 1 новые страницы ASP.NET теперь будут иметь три элемента управления содержимым.

Чтобы проиллюстрировать это, добавьте новую страницу содержимого в корневой каталог с именем `MultipleContentPlaceHolders.aspx`, привязанный к главной странице `Site.master`. Visual Web Developer создает эту страницу со следующей декларативной разметкой:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample1.aspx)]

Введите некоторое содержимое в элемент управления содержимым, ссылающийся на `MainContent` элементов управления ContentPlaceHolder (`Content2`). Затем добавьте следующую разметку в элемент управления содержимым `Content3` (который ссылается на `LeftColumnContent` ContentPlaceHolder):

[!code-html[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample2.html)]

После добавления этой разметки посетите страницу в браузере. Как показано на рис. 3, разметка, помещенная в `Content3` элемент управления содержимым, отображается в левом столбце под разделом новостей (в кружке красным цветом). Разметка, помещенная в `Content2`, отображается в правой части страницы (в кружке синим цветом).

[![левый столбец теперь включает в себя содержимое, относящееся к странице, под областью новостей](multiple-contentplaceholders-and-default-content-vb/_static/image8.png)](multiple-contentplaceholders-and-default-content-vb/_static/image7.png)

**Рис. 03**. Теперь левый столбец включает в себя содержимое, относящееся к странице, под областью новостей ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image9.png)).

### <a name="defining-content-in-existing-content-pages"></a>Определение содержимого в существующих страницах содержимого

При создании новой страницы содержимого автоматически включается элемент управления ContentPlaceHolder, добавленный на шаге 1. Но две имеющиеся страницы содержимого — `About.aspx` и `Default.aspx`-нет элемента управления содержимым для `LeftColumnContent` ContentPlaceHolder. Чтобы указать содержимое для этого ContentPlaceHolder в этих двух существующих страницах, необходимо добавить элемент управления содержимым.

В отличие от большинства веб-элементов управления ASP.NET, панель элементов Visual Web Developer не включает элемент элемента управления содержимым. Можно вручную ввести декларативную разметку элемента управления содержимым в представление исходного кода, но более простой и быстрый подход заключается в использовании представление конструирования. Откройте страницу `About.aspx` и переключитесь на представление конструирования. Как показано на рис. 4, `LeftColumnContent` ContentPlaceHolder отображается в представление конструирования; Если навести на него указатель мыши, отображается заголовок: "Лефтколумнконтент (Master)". Включение "главного" в заголовок означает, что на странице для этого ContentPlaceHolder не определен элемент управления содержимым. Если для ContentPlaceHolder существует элемент управления содержимым, как в случае с `MainContent`, заголовок будет читать: «*ContentPlaceHolderID* (Custom)».

Чтобы добавить элемент управления содержимым для `LeftColumnContent` ContentPlaceHolder для `About.aspx`, разверните смарт-тег ContentPlaceHolder и щелкните ссылку создать настраиваемое содержимое.

[![представление конструктора для About. aspx показывает Лефтколумнконтент ContentPlaceHolder](multiple-contentplaceholders-and-default-content-vb/_static/image11.png)](multiple-contentplaceholders-and-default-content-vb/_static/image10.png)

**Рис. 04**. представление конструктора для `About.aspx` показывает `LeftColumnContent` ContentPlaceHolder ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image12.png))

Если щелкнуть ссылку создать настраиваемое содержимое, на странице будет создан необходимый элемент управления содержимым и задается его свойство `ContentPlaceHolderID` `ID`ContentPlaceHolder. Например, если щелкнуть ссылку создать настраиваемое содержимое для `LeftColumnContent` региона в `About.aspx` добавляет на страницу следующую декларативную разметку:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample3.aspx)]

### <a name="omitting-content-controls"></a>Пропуск элементов управления содержимым

ASP.NET не требует, чтобы все страницы содержимого включали элементы управления содержимым для каждого элемента ContentPlaceHolder, определенного на главной странице. Если элемент управления содержимым не указан, подсистема ASP.NET использует разметку, определенную в ContentPlaceHolder на главной странице. Эта разметка называется *содержимым по умолчанию* ContentPlaceHolder и полезна в сценариях, где содержимое некоторого региона является общим для большинства страниц, но его необходимо настроить для небольшого числа страниц. На шаге 3 рассматривается указание содержимого по умолчанию на главной странице.

В настоящее время `Default.aspx` содержит два элемента управления содержимым для `head` и `MainContent` элементов управления ContentPlaceHolder; у него нет элемента управления содержимым для `LeftColumnContent`. Следовательно, при визуализации `Default.aspx` используется содержимое по умолчанию `LeftColumnContent` ContentPlaceHolder. Так как мы еще не определили содержимое по умолчанию для этого ContentPlaceHolder, в результате в этом регионе разметка не создается. Чтобы проверить это поведение, перейдите в `Default.aspx` через браузер. Как показано на рис. 5, в левом столбце ниже раздела News не создается разметка.

[![для Лефтколумнконтент ContentPlaceHolder не отображается содержимое](multiple-contentplaceholders-and-default-content-vb/_static/image14.png)](multiple-contentplaceholders-and-default-content-vb/_static/image13.png)

**Рис. 05**. для `LeftColumnContent` ContentPlaceHolder не отображается содержимое ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image15.png))

## <a name="step-3-specifying-default-content-in-the-master-page"></a>Шаг 3. Указание содержимого по умолчанию на главной странице

Некоторые разработки веб-сайтов включают регион, содержимое которого одинаково для всех страниц сайта, за исключением одного или двух исключений. Рассмотрим веб-сайт, который поддерживает учетные записи пользователей. Такой сайт требует страницы входа, где посетители могут ввести свои учетные данные для входа на сайт. Для ускорения процесса входа конструкторы веб-сайтов могут содержать текстовые поля "имя пользователя" и "пароль" в левом верхнем углу каждой страницы, чтобы пользователи могли выполнять вход без явного посещения страницы входа. Хотя эти текстовые поля имени пользователя и пароля полезны на большинстве страниц, они избыточны на странице входа, которая уже содержит текстовые поля для учетных данных пользователя.

Для реализации этой схемы можно создать элемент управления ContentPlaceHolder в левом верхнем углу главной страницы. Каждая страница, необходимая для вывода текстовых полей username и Password в левом верхнем углу, создает элемент управления содержимым для этого ContentPlaceHolder и добавляет необходимый интерфейс. На странице входа с другой стороны будет либо опустить Добавление элемента управления содержимым для этого ContentPlaceHolder, либо создать элемент управления содержимым без определенного разметки. Недостаток этого подхода заключается в том, что необходимо добавить текстовые поля username и Password на каждую страницу, добавляемую на сайт (за исключением страницы входа). Это запрашивает проблемы. Мы, вероятно, забыли добавить эти текстовые поля на страницу или две или, что хуже, мы можем неправильно реализовать интерфейс (например, можно добавить только одно текстовое поле, а не два).

Лучшим решением является определение текстовых полей username и Password как содержимого ContentPlaceHolder по умолчанию. Таким образом, нам нужно переопределить это содержимое по умолчанию на нескольких страницах, не отображающих текстовые поля username и Password (например, страница входа). Чтобы продемонстрировать указание содержимого по умолчанию для элемента управления ContentPlaceHolder, давайте рассмотрим описанный сценарий.

> [!NOTE]
> Оставшаяся часть этого руководства обновляет веб-сайт, чтобы включить в левый столбец интерфейс входа для всех страниц, кроме страницы входа. Однако в этом учебнике не рассматривается настройка веб-сайта для поддержки учетных записей пользователей. Дополнительные сведения об этом разделе см. в руководствах по [проверке подлинности, авторизации, учетным записям пользователей и ролям](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) .

### <a name="adding-a-contentplaceholder-and-specifying-its-default-content"></a>Добавление элемента ContentPlaceHolder и указание его содержимого по умолчанию

Откройте `Site.master` главную страницу и добавьте следующую разметку в левый столбец между `DateDisplay` меток и занятиями:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample4.aspx)]

После добавления этой разметки представление конструирования на главной странице должна выглядеть примерно так, как показано на рис. 6.

[![Главная страница содержит элемент управления Login](multiple-contentplaceholders-and-default-content-vb/_static/image17.png)](multiple-contentplaceholders-and-default-content-vb/_static/image16.png)

**Рис. 6**. Главная страница содержит элемент управления Login ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image18.png))

В этом ContentPlaceHolder, `QuickLoginUI`, в качестве содержимого по умолчанию используется веб-элемент управления Login. Элемент управления Login отображает пользовательский интерфейс, предлагающий пользователю ввести имя пользователя и пароль, а также кнопку Вход. При нажатии кнопки Вход элемент управления входа внутренне проверяет учетные данные пользователя на соответствие API членства. Чтобы использовать этот элемент управления входа на практике, необходимо настроить сайт для использования членства. Этот раздел выходит за рамки данного учебника. Дополнительные сведения о создании веб-приложения, поддерживающего учетные записи пользователей, см. в руководствах по [проверке подлинности, авторизации, учетным записям пользователей и ролям](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) .

Вы можете настроить поведение или внешний вид элемента управления входа. Я установил два свойства: `TitleText` и `FailureAction`. Значение свойства `TitleText`, по умолчанию «вход», отображается в верхней части пользовательского интерфейса элемента управления. Я установил это свойство таким образом, чтобы он отображал текст "вход" в качестве элемента `<h3>`. Свойство `FailureAction` указывает, что делать, если учетные данные пользователя недопустимы. По умолчанию используется значение `Refresh`, которое оставляет пользователя на той же странице и отображает сообщение об ошибке в элементе управления Login. Я изменил его на `RedirectToLoginPage`, который отправляет пользователя на страницу входа в случае недопустимых учетных данных. Я предпочитаю отсылать пользователя на страницу входа, когда пользователь пытается войти с какой-либо другой страницы, но завершается ошибкой, так как страница входа может содержать дополнительные инструкции и параметры, которые не могут быть правильно размещены в левом столбце. Например, страница входа может содержать параметры для получения забытого пароля или для создания новой учетной записи.

### <a name="creating-the-login-page-and-overriding-the-default-content"></a>Создание страницы входа и переопределение содержимого по умолчанию

После завершения работы с главной страницей необходимо создать страницу входа. Добавьте страницу ASP.NET в корневой каталог сайта с именем `Login.aspx`, привязывая его к главной странице `Site.master`. Это приведет к созданию страницы с четырьмя элементами управления содержимым, по одному для каждого элементов управления ContentPlaceHolder, определенного в `Site.master`.

Добавьте элемент управления Login в `MainContent` элемент управления содержимым. Аналогичным образом вы можете добавить любое содержимое в `LeftColumnContent` регион. Однако не забудьте оставить элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder Empty. Это обеспечит, что элемент управления Login не будет отображаться в левом столбце страницы входа.

После определения содержимого для регионов `MainContent` и `LeftColumnContent` декларативная разметка страницы входа должна выглядеть следующим образом:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample5.aspx)]

На рис. 7 показана эта страница при просмотре в браузере. Так как на этой странице указан элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder, он переопределяет содержимое по умолчанию, заданное на главной странице. Результатом является то, что элемент управления входа, отображаемый на представление конструирования главной страницы (см. рис. 6), не отображается на этой странице.

[![страница входа снова нажимает содержимое Куикклогинуи ContentPlaceHolder по умолчанию](multiple-contentplaceholders-and-default-content-vb/_static/image20.png)](multiple-contentplaceholders-and-default-content-vb/_static/image19.png)

**Рис. 07**. страница входа повторно нажимает содержимое по умолчанию `QuickLoginUI` ContentPlaceHolder ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image21.png))

### <a name="using-the-default-content-in-new-pages"></a>Использование содержимого по умолчанию на новых страницах

Нам нужно отобразить элемент управления Login в левом столбце для всех страниц, кроме страницы входа. Для этого все страницы содержимого, за исключением страницы входа, должны опускать элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder. Если элемент управления содержимым отсутствует, вместо него будет использоваться содержимое ContentPlaceHolder по умолчанию.

Наши существующие страницы содержимого — `Default.aspx`, `About.aspx`и `MultipleContentPlaceHolders.aspx` — не включают элемент управления содержимым для `QuickLoginUI`, поскольку они были созданы до добавления этого элемента управления ContentPlaceHolder на главную страницу. Поэтому эти существующие страницы не нужно обновлять. Однако новые страницы, добавленные на веб-сайт, включают элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder, по умолчанию. Поэтому следует помнить об удалении этих элементов управления содержимым каждый раз при добавлении новой страницы содержимого (если не требуется переопределять содержимое ContentPlaceHolder по умолчанию, как в случае страницы входа).

Чтобы удалить элемент управления содержимым, можно либо вручную удалить его декларативную разметку из представления исходного кода, либо выбрать ссылку на содержимое по умолчанию из смарт-тега в представление конструирования. Любой из этих подходов удаляет элемент управления содержимым из страницы и создает тот же общий результат.

На рис. 8 показано, `Default.aspx` при просмотре в браузере. Помните, что `Default.aspx` содержит только два элемента управления содержимым, указанных в декларативной разметке — один для `head` и один для `MainContent`. В результате отображается содержимое по умолчанию для `LeftColumnContent` и `QuickLoginUI` элементов управления ContentPlaceHolder.

[![отображаются содержимое по умолчанию для Лефтколумнконтент и Куикклогинуи элементов управления ContentPlaceHolder](multiple-contentplaceholders-and-default-content-vb/_static/image23.png)](multiple-contentplaceholders-and-default-content-vb/_static/image22.png)

**Рис. 08**. Отображение содержимого по умолчанию для `LeftColumnContent` и `QuickLoginUI` элементов управления ContentPlaceHolder ([щелкните, чтобы просмотреть изображение с полным размером](multiple-contentplaceholders-and-default-content-vb/_static/image24.png))

## <a name="summary"></a>Сводка

Модель главной страницы ASP.NET позволяет произвольное число элементов управления ContentPlaceHolder на главной странице. Более того, элементов управления ContentPlaceHolder включает содержимое по умолчанию, которое создается в случае отсутствия соответствующего элемента управления содержимым на странице содержимого. В этом учебнике мы увидели, как включать дополнительные элементы управления ContentPlaceHolder на главную страницу и как определять элементы управления содержимым для этих новых элементов управления ContentPlaceHolder как в новых, так и в существующих страницах ASP.NET. Мы также рассматривали указание содержимого по умолчанию в ContentPlaceHolder, что полезно в сценариях, где только доли страниц должны настраивать стандартизированное содержимое в определенном регионе.

В следующем учебном курсе мы рассмотрим `head` ContentPlaceHolder более подробно, как декларативно и программно определять заголовок, Meta-теги и другие заголовки HTML на странице.

Поздравляем с программированием!

### <a name="about-the-author"></a>Об авторе

[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор нескольких книг по ASP/ASP. NET и основатель 4GuysFromRolla.com, работал с веб-технологиями майкрософт с 1998. Скотт работает как независимый консультант, преподаватель и модуль записи. Его последняя книга — [*Sams обучать себя ASP.NET 3,5 за 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco). Скотт можно получить по адресу [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) или через свой блог по адресу [http://ScottOnWriting.NET](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Специальная благодарность

Эта серия руководств была рассмотрена многими полезными рецензентами. Специалист по интересу для этого руководства был Сучи Банержи. Хотите ознакомиться с моими будущими статьями MSDN? Если это так, расположите строку в [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).

> [!div class="step-by-step"]
> [Назад](creating-a-site-wide-layout-using-master-pages-vb.md)
> [Вперед](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-vb.md)
