---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-across-two-pages-cs
title: Фильтрация "основной/подробности" на двухC#страницах () | Документация Майкрософт
author: rick-anderson
description: В этом учебнике мы реализуем этот шаблон с помощью элемента управления GridView для перечисления поставщиков в базе данных. Каждая строка поставщика в GridView будет содержать представление...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 552d2d50-fe73-4153-9a7f-2b379bec4625
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-across-two-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: ccb3bfa5f215ba6e65b8a10b40041d5c2896c7e3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78424878"
---
# <a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="af06e-104">Фильтрация "Основной/подробности" на двух страницах (C#)</span><span class="sxs-lookup"><span data-stu-id="af06e-104">Master/Detail Filtering Across Two Pages (C#)</span></span>

<span data-ttu-id="af06e-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="af06e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="af06e-106">[Скачивание примера приложения](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_9_CS.exe) или [Загрузка PDF-файла](master-detail-filtering-across-two-pages-cs/_static/datatutorial09cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="af06e-106">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_9_CS.exe) or [Download PDF](master-detail-filtering-across-two-pages-cs/_static/datatutorial09cs1.pdf)</span></span>

> <span data-ttu-id="af06e-107">В этом учебнике мы реализуем этот шаблон с помощью элемента управления GridView для перечисления поставщиков в базе данных.</span><span class="sxs-lookup"><span data-stu-id="af06e-107">In this tutorial we'll implement this pattern by using a GridView to list the suppliers in the database.</span></span> <span data-ttu-id="af06e-108">Каждая строка поставщика в элементе управления GridView будет содержать ссылку View Products (Просмотр продуктов), при нажатии которой пользователь перейдет на отдельную страницу со списком продуктов для выбранного поставщика.</span><span class="sxs-lookup"><span data-stu-id="af06e-108">Each supplier row in the GridView will contain a View Products link that, when clicked, will take the user to a separate page that lists those products for the selected supplier.</span></span>

## <a name="introduction"></a><span data-ttu-id="af06e-109">Введение</span><span class="sxs-lookup"><span data-stu-id="af06e-109">Introduction</span></span>

<span data-ttu-id="af06e-110">В предыдущих двух учебниках мы увидели, как [отображать отчеты «основной/подробности» на одной веб-странице с помощью элементов управления DropDownList](master-detail-filtering-with-a-dropdownlist-cs.md) для [отображения «основных» записей и элемента управления GridView или DetailsView](master-detail-filtering-with-two-dropdownlists-cs.md) для отображения «сведений».</span><span class="sxs-lookup"><span data-stu-id="af06e-110">In the previous two tutorials we saw how to [display master/detail reports in a single web page using DropDownLists](master-detail-filtering-with-a-dropdownlist-cs.md) to [display the "master" records and a GridView or DetailsView control](master-detail-filtering-with-two-dropdownlists-cs.md) to display the "details."</span></span> <span data-ttu-id="af06e-111">Другой распространенный шаблон, используемый для отчетов «основной/подробности», состоит в том, чтобы иметь основные записи на одной веб-странице и сведения, показанные на другом.</span><span class="sxs-lookup"><span data-stu-id="af06e-111">Another common pattern used for master/details reports is to have the master records on one web page and the details shown on another.</span></span> <span data-ttu-id="af06e-112">Веб-сайт форума, как и [форумы ASP.NET](https://forums.asp.net/), является хорошим примером этого шаблона на практике.</span><span class="sxs-lookup"><span data-stu-id="af06e-112">A forum website, like [the ASP.NET Forums](https://forums.asp.net/), is a great example of this pattern in practice.</span></span> <span data-ttu-id="af06e-113">Форумы ASP.NET состоят из различных форумов начало работы, веб-форм, элементов управления для представления данных и т. д.</span><span class="sxs-lookup"><span data-stu-id="af06e-113">The ASP.NET Forums are composed of a variety of forums Getting Started, Web Forms, Data Presentation Controls, and so on.</span></span> <span data-ttu-id="af06e-114">Каждый форум состоит из многих потоков, и каждый поток состоит из нескольких записей.</span><span class="sxs-lookup"><span data-stu-id="af06e-114">Each forum is composed of many threads and each thread is composed of a number of posts.</span></span> <span data-ttu-id="af06e-115">На домашней странице форумов ASP.NET представлены форумы.</span><span class="sxs-lookup"><span data-stu-id="af06e-115">On the ASP.NET Forums homepage, the forums are listed.</span></span> <span data-ttu-id="af06e-116">Щелкнув форум, вы перейти на страницу `ShowForum.aspx`, в которой перечислены потоки для этого форума.</span><span class="sxs-lookup"><span data-stu-id="af06e-116">Clicking on a forum whisks you to a `ShowForum.aspx` page, which lists the threads for that forum.</span></span> <span data-ttu-id="af06e-117">Аналогичным образом, если щелкнуть поток, откроется `ShowPost.aspx`, в котором отображаются записи для потока, который был выбран.</span><span class="sxs-lookup"><span data-stu-id="af06e-117">Likewise, clicking on a thread takes you to `ShowPost.aspx`, which displays the posts for the thread that was clicked.</span></span>

<span data-ttu-id="af06e-118">В этом учебнике мы реализуем этот шаблон с помощью элемента управления GridView для перечисления поставщиков в базе данных.</span><span class="sxs-lookup"><span data-stu-id="af06e-118">In this tutorial we'll implement this pattern by using a GridView to list the suppliers in the database.</span></span> <span data-ttu-id="af06e-119">Каждая строка поставщика в элементе управления GridView будет содержать ссылку View Products (Просмотр продуктов), при нажатии которой пользователь перейдет на отдельную страницу со списком продуктов для выбранного поставщика.</span><span class="sxs-lookup"><span data-stu-id="af06e-119">Each supplier row in the GridView will contain a View Products link that, when clicked, will take the user to a separate page that lists those products for the selected supplier.</span></span>

## <a name="step-1-addingsupplierlistmasteraspxandproductsforsupplierdetailsaspxpages-to-thefilteringfolder"></a><span data-ttu-id="af06e-120">Шаг 1. Добавление`SupplierListMaster.aspx`и`ProductsForSupplierDetails.aspx`страниц в папку`Filtering`</span><span class="sxs-lookup"><span data-stu-id="af06e-120">Step 1: Adding`SupplierListMaster.aspx`and`ProductsForSupplierDetails.aspx`Pages to the`Filtering`Folder</span></span>

<span data-ttu-id="af06e-121">При определении макета страницы в третьем руководстве мы добавили ряд "начальных" страниц в `BasicReporting`, `Filtering`и папках `CustomFormatting`.</span><span class="sxs-lookup"><span data-stu-id="af06e-121">When defining the page layout in the third tutorial we added a number of "starter" pages in the `BasicReporting`, `Filtering`, and `CustomFormatting` folders.</span></span> <span data-ttu-id="af06e-122">Однако в это время мы не добавили начальную страницу для этого руководства, поэтому необходимо добавить две новые страницы в папку `Filtering`: `SupplierListMaster.aspx` и `ProductsForSupplierDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="af06e-122">However, we did not add a starter page for this tutorial at that time, so take a moment to add two new pages to the `Filtering` folder: `SupplierListMaster.aspx` and `ProductsForSupplierDetails.aspx`.</span></span> <span data-ttu-id="af06e-123">в `SupplierListMaster.aspx` будут перечислены «главные» записи (поставщики), тогда как `ProductsForSupplierDetails.aspx` будут отображать продукты для выбранного поставщика.</span><span class="sxs-lookup"><span data-stu-id="af06e-123">`SupplierListMaster.aspx` will list the "master" records (the suppliers) while `ProductsForSupplierDetails.aspx` will display the products for the selected supplier.</span></span>

<span data-ttu-id="af06e-124">При создании этих двух новых страниц необходимо связать их с главной страницей `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="af06e-124">When creating these two new pages be certain to associate them with the `Site.master` master page.</span></span>

![Добавление страниц Супплиерлистмастер. aspx и Продуктсфорсупплиердетаилс. aspx в папку фильтрации](master-detail-filtering-across-two-pages-cs/_static/image1.png)

<span data-ttu-id="af06e-126">**Рис. 1**. Добавление `SupplierListMaster.aspx` и `ProductsForSupplierDetails.aspx` страниц в папку `Filtering`</span><span class="sxs-lookup"><span data-stu-id="af06e-126">**Figure 1**: Add the `SupplierListMaster.aspx` and `ProductsForSupplierDetails.aspx` Pages to the `Filtering` Folder</span></span>

<span data-ttu-id="af06e-127">Кроме того, при добавлении новых страниц в проект обязательно обновите файл схемы узла, `Web.sitemap`соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="af06e-127">Also, when adding new pages to the project, be sure to update the site map file, `Web.sitemap`, accordingly.</span></span> <span data-ttu-id="af06e-128">Для работы с этим руководством просто добавьте страницу `SupplierListMaster.aspx` на карту узла, используя следующее XML-содержимое в качестве дочернего элемента в элементе Filtering Reports `<siteMapNode>`.</span><span class="sxs-lookup"><span data-stu-id="af06e-128">For this tutorial simply add the `SupplierListMaster.aspx` page to the site map using the following XML content as a child of the Filtering Reports `<siteMapNode>` element:</span></span>

[!code-xml[Main](master-detail-filtering-across-two-pages-cs/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="af06e-129">Вы можете автоматизировать процесс обновления файла схемы узла при добавлении новых страниц ASP.NET с помощью [макроса Map](http://odetocode.com/Blogs/scott/archive/2005/11/29/2537.aspx) [. Скотт Аллен](http://odetocode.com/Blogs/scott/)Free Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="af06e-129">You can help automate the process of updating the site map file when adding new ASP.NET pages using [K. Scott Allen](http://odetocode.com/Blogs/scott/)'s free Visual Studio [Site Map Macro](http://odetocode.com/Blogs/scott/archive/2005/11/29/2537.aspx).</span></span>

## <a name="step-2-displaying-the-supplier-list-insupplierlistmasteraspx"></a><span data-ttu-id="af06e-130">Шаг 2. Отображение списка поставщиков в`SupplierListMaster.aspx`</span><span class="sxs-lookup"><span data-stu-id="af06e-130">Step 2: Displaying the Supplier List in`SupplierListMaster.aspx`</span></span>

<span data-ttu-id="af06e-131">После создания страниц `SupplierListMaster.aspx` и `ProductsForSupplierDetails.aspx` наш следующий шаг — создание элемента управления GridView для поставщиков в `SupplierListMaster.aspx`.</span><span class="sxs-lookup"><span data-stu-id="af06e-131">With the `SupplierListMaster.aspx` and `ProductsForSupplierDetails.aspx` pages created, our next step is to create the GridView of suppliers in `SupplierListMaster.aspx`.</span></span> <span data-ttu-id="af06e-132">Добавьте элемент управления GridView на страницу и привяжите его к новому элементу ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="af06e-132">Add a GridView to the page and bind it to a new ObjectDataSource.</span></span> <span data-ttu-id="af06e-133">Для возврата всех поставщиков этот элемент управления ObjectDataSource должен использовать метод `GetSuppliers()` класса `SuppliersBLL`.</span><span class="sxs-lookup"><span data-stu-id="af06e-133">This ObjectDataSource should use the `SuppliersBLL` class's `GetSuppliers()` method to return all suppliers.</span></span>

<span data-ttu-id="af06e-134">[![выберите класс Супплиерсблл](master-detail-filtering-across-two-pages-cs/_static/image3.png)](master-detail-filtering-across-two-pages-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-134">[![Select the SuppliersBLL Class](master-detail-filtering-across-two-pages-cs/_static/image3.png)](master-detail-filtering-across-two-pages-cs/_static/image2.png)</span></span>

<span data-ttu-id="af06e-135">**Рис. 2**. выбор класса `SuppliersBLL` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-135">**Figure 2**: Select the `SuppliersBLL` Class ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image4.png))</span></span>

<span data-ttu-id="af06e-136">[![настроить ObjectDataSource для использования метода-поставщика ()](master-detail-filtering-across-two-pages-cs/_static/image6.png)](master-detail-filtering-across-two-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-136">[![Configure the ObjectDataSource to Use the GetSuppliers() Method](master-detail-filtering-across-two-pages-cs/_static/image6.png)](master-detail-filtering-across-two-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="af06e-137">**Рис. 3**. Настройка ObjectDataSource для использования метода `GetSuppliers()` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-137">**Figure 3**: Configure the ObjectDataSource to Use the `GetSuppliers()` Method ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image7.png))</span></span>

<span data-ttu-id="af06e-138">Необходимо включить ссылку с названием Просмотр продуктов в каждой строке GridView, при нажатии которой пользователь получает `ProductsForSupplierDetails.aspx` передать значение `SupplierID` выбранной строки через строку запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-138">We need to include a link titled View Products in each GridView row that, when clicked, takes the user to `ProductsForSupplierDetails.aspx` passing in the selected row's `SupplierID` value through the querystring.</span></span> <span data-ttu-id="af06e-139">Например, если пользователь щелкнет ссылку View Products (Просмотр продуктов) для поставщика Токио (который имеет значение `SupplierID` 4), то его следует отправить на `ProductsForSupplierDetails.aspx?SupplierID=4`.</span><span class="sxs-lookup"><span data-stu-id="af06e-139">For example, if user clicks on the View Products link for the Tokyo Traders supplier (which has a `SupplierID` value of 4), they should be sent to `ProductsForSupplierDetails.aspx?SupplierID=4`.</span></span>

<span data-ttu-id="af06e-140">Для этого добавьте [HyperLinkField](https://msdn.microsoft.com/library/system.web.ui.webcontrols.hyperlinkfield.aspx) в GridView, который добавляет гиперссылку в каждую строку GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-140">To accomplish this, add a [HyperLinkField](https://msdn.microsoft.com/library/system.web.ui.webcontrols.hyperlinkfield.aspx) to the GridView, which adds a hyperlink to each GridView row.</span></span> <span data-ttu-id="af06e-141">Для начала щелкните ссылку Edit Columns (изменить столбцы) в смарт-теге GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-141">Start by clicking the Edit Columns link from the GridView's smart tag.</span></span> <span data-ttu-id="af06e-142">Затем выберите HyperLinkField из списка в левом верхнем углу и нажмите кнопку Добавить, чтобы включить HyperLinkField в список полей GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-142">Next, select the HyperLinkField from the list in the upper left and click Add to include the HyperLinkField in the GridView's field list.</span></span>

<span data-ttu-id="af06e-143">[![добавить HyperLinkField в GridView](master-detail-filtering-across-two-pages-cs/_static/image9.png)](master-detail-filtering-across-two-pages-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-143">[![Add a HyperLinkField to the GridView](master-detail-filtering-across-two-pages-cs/_static/image9.png)](master-detail-filtering-across-two-pages-cs/_static/image8.png)</span></span>

<span data-ttu-id="af06e-144">**Рис. 4**. Добавление элемента HyperLinkField в элемент управления GridView ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-144">**Figure 4**: Add a HyperLinkField to the GridView ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image10.png))</span></span>

<span data-ttu-id="af06e-145">HyperLinkField может быть настроен на использование одинаковых значений текста или URL-адресов ссылкой в каждой строке GridView или может основывать эти значения на значениях данных, привязанных к каждой конкретной строке.</span><span class="sxs-lookup"><span data-stu-id="af06e-145">The HyperLinkField can be configured to use the same text or URL values the link in each GridView row, or can base these values on the data values bound to each particular row.</span></span> <span data-ttu-id="af06e-146">Чтобы указать статическое значение во всех строках, используйте свойства `Text` или `NavigateUrl` HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="af06e-146">To specify a static value across all rows use the HyperLinkField's `Text` or `NavigateUrl` properties.</span></span> <span data-ttu-id="af06e-147">Поскольку текст ссылки должен быть одинаковым для всех строк, установите свойство `Text` HyperLinkField для просмотра продуктов.</span><span class="sxs-lookup"><span data-stu-id="af06e-147">Since we want the link text to be the same for all rows, set the HyperLinkField's `Text` property to View Products.</span></span>

<span data-ttu-id="af06e-148">[![задать свойство Text HyperLinkField для просмотра продуктов](master-detail-filtering-across-two-pages-cs/_static/image12.png)](master-detail-filtering-across-two-pages-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-148">[![Set the HyperLinkField's Text Property to View Products](master-detail-filtering-across-two-pages-cs/_static/image12.png)](master-detail-filtering-across-two-pages-cs/_static/image11.png)</span></span>

<span data-ttu-id="af06e-149">**Рис. 5**. задание свойства `Text` HyperLinkField для просмотра продуктов ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-149">**Figure 5**: Set the HyperLinkField's `Text` Property to View Products ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image13.png))</span></span>

<span data-ttu-id="af06e-150">Чтобы задать значения текста или URL-адреса, основанные на базовых данных, привязанных к строке GridView, укажите поля данных, из которых должны быть извлечены значения текста или URL-адреса в свойствах `DataTextField` или `DataNavigateUrlFields`.</span><span class="sxs-lookup"><span data-stu-id="af06e-150">To set the text or URL values to be based on the underlying data bound to the GridView row, specify the data fields the text or URL values should be pulled from in the `DataTextField` or `DataNavigateUrlFields` properties.</span></span> <span data-ttu-id="af06e-151">`DataTextField` можно задать только одно поле данных; Однако `DataNavigateUrlFields`может быть задан разделенный запятыми список полей данных.</span><span class="sxs-lookup"><span data-stu-id="af06e-151">`DataTextField` can only be set to a single data field; `DataNavigateUrlFields`, however, can be set to a comma-delimited list of data fields.</span></span> <span data-ttu-id="af06e-152">Часто требуется, чтобы текст или URL-адрес был основан на комбинации значения поля данных текущей строки и некоторой статической разметки.</span><span class="sxs-lookup"><span data-stu-id="af06e-152">We frequently need to base the text or URL on a combination of the current row's data field value and some static markup.</span></span> <span data-ttu-id="af06e-153">Например, в этом руководстве мы хотим, чтобы URL-адрес HyperLinkField ссылок был `ProductsForSupplierDetails.aspx?SupplierID=supplierID`, где *`supplierID`* — это значение `SupplierID` ров'с GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-153">In this tutorial, for example, we want the URL of the HyperLinkField's links to be `ProductsForSupplierDetails.aspx?SupplierID=supplierID`, where *`supplierID`* is each GridView's row's `SupplierID` value.</span></span> <span data-ttu-id="af06e-154">Обратите внимание на то, что нам нужны как статические, так и управляемые данными значения: `ProductsForSupplierDetails.aspx?SupplierID=` часть URL-адреса ссылки является статической, а *`supplierID`* часть — управляемой данными, так как ее значение является значением `SupplierID` каждой строки.</span><span class="sxs-lookup"><span data-stu-id="af06e-154">Notice that we need both static and data-driven values here: the `ProductsForSupplierDetails.aspx?SupplierID=` portion of the link's URL is static, whereas the *`supplierID`* portion is data-driven as its value is each row's own `SupplierID` value.</span></span>

<span data-ttu-id="af06e-155">Чтобы указать сочетание статических и управляемых данными значений, используйте свойства `DataTextFormatString` и `DataNavigateUrlFormatString`.</span><span class="sxs-lookup"><span data-stu-id="af06e-155">To indicate a combination of static and data-driven values, use the `DataTextFormatString` and `DataNavigateUrlFormatString` properties.</span></span> <span data-ttu-id="af06e-156">В этих свойствах при необходимости введите статическую разметку, а затем используйте маркер `{0}` в том месте, где должно отображаться значение поля, указанного в свойствах `DataTextField` или `DataNavigateUrlFields`.</span><span class="sxs-lookup"><span data-stu-id="af06e-156">In these properties enter the static markup as needed and then use the marker `{0}` where you want the value of the field specified in the `DataTextField` or `DataNavigateUrlFields` properties to appear.</span></span> <span data-ttu-id="af06e-157">Если в свойстве `DataNavigateUrlFields` задано несколько полей, используйте `{0}`, где необходимо вставить значение первого поля, `{1}` для второго значения поля и т. д.</span><span class="sxs-lookup"><span data-stu-id="af06e-157">If the `DataNavigateUrlFields` property has multiple fields specified use `{0}` where you want the first field value inserted, `{1}` for the second field value, and so on.</span></span>

<span data-ttu-id="af06e-158">Применяя это к нашему руководству, нам нужно установить свойство `DataNavigateUrlFields` равным `SupplierID`, поскольку это поле данных, значение которого необходимо настроить для каждой строки, а свойство `DataNavigateUrlFormatString` — `ProductsForSupplierDetails.aspx?SupplierID={0}`.</span><span class="sxs-lookup"><span data-stu-id="af06e-158">Applying this to our tutorial, we need to set the `DataNavigateUrlFields` property to `SupplierID`, since that's the data field whose value we need to customize on a per-row basis, and the `DataNavigateUrlFormatString` property to `ProductsForSupplierDetails.aspx?SupplierID={0}`.</span></span>

<span data-ttu-id="af06e-159">[![настроить HyperLinkField для включения правильного URL-адреса ссылки на основе поля «КодПоставщика»](master-detail-filtering-across-two-pages-cs/_static/image15.png)](master-detail-filtering-across-two-pages-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-159">[![Configure the HyperLinkField to Include the Proper Link URL Based Upon the SupplierID](master-detail-filtering-across-two-pages-cs/_static/image15.png)](master-detail-filtering-across-two-pages-cs/_static/image14.png)</span></span>

<span data-ttu-id="af06e-160">**Рис. 6**. Настройка HyperLinkField для включения соответствующего URL-адреса ссылки на `SupplierID` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-160">**Figure 6**: Configure the HyperLinkField to Include the Proper Link URL Based Upon the `SupplierID` ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image16.png))</span></span>

<span data-ttu-id="af06e-161">После добавления HyperLinkField вы можете настроить и изменить порядок полей GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-161">After adding the HyperLinkField, feel free to customize and reorder the GridView's fields.</span></span> <span data-ttu-id="af06e-162">Следующая разметка показывает GridView после внесения некоторых незначительных настроек уровня поля.</span><span class="sxs-lookup"><span data-stu-id="af06e-162">The following markup shows the GridView after I've made some minor field-level customizations.</span></span>

[!code-aspx[Main](master-detail-filtering-across-two-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="af06e-163">Уделите время просмотру страницы `SupplierListMaster.aspx` в браузере.</span><span class="sxs-lookup"><span data-stu-id="af06e-163">Take a moment to view the `SupplierListMaster.aspx` page through a browser.</span></span> <span data-ttu-id="af06e-164">Как показано на рис. 7, в настоящее время на странице перечислены все поставщики, включая ссылку «Просмотр продуктов».</span><span class="sxs-lookup"><span data-stu-id="af06e-164">As Figure 7 shows, the page currently lists all of the suppliers including a View Products link.</span></span> <span data-ttu-id="af06e-165">Щелкнув ссылку View Products (просмотреть продукты), вы перейдете к `ProductsForSupplierDetails.aspx`, передав `SupplierID` поставщика в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-165">Clicking on the View Products link will take you to `ProductsForSupplierDetails.aspx`, passing along the supplier's `SupplierID` in the querystring.</span></span>

<span data-ttu-id="af06e-166">[![каждая строка поставщика содержит ссылку View Products (Просмотр продуктов)](master-detail-filtering-across-two-pages-cs/_static/image18.png)](master-detail-filtering-across-two-pages-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-166">[![Each Supplier Row Contains a View Products Link](master-detail-filtering-across-two-pages-cs/_static/image18.png)](master-detail-filtering-across-two-pages-cs/_static/image17.png)</span></span>

<span data-ttu-id="af06e-167">**Рис. 7**. Каждая строка «поставщик» содержит ссылку «Просмотр продуктов» ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image19.png)).</span><span class="sxs-lookup"><span data-stu-id="af06e-167">**Figure 7**: Each Supplier Row Contains a View Products Link ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image19.png))</span></span>

## <a name="step-3-listing-the-suppliers-products-inproductsforsupplierdetailsaspx"></a><span data-ttu-id="af06e-168">Шаг 3. Перечисление продуктов поставщика в`ProductsForSupplierDetails.aspx`</span><span class="sxs-lookup"><span data-stu-id="af06e-168">Step 3: Listing the Supplier's Products in`ProductsForSupplierDetails.aspx`</span></span>

<span data-ttu-id="af06e-169">На этом этапе `SupplierListMaster.aspx` страница отправляет пользователям `ProductsForSupplierDetails.aspx`, передавая `SupplierID` выбранного поставщика в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-169">At this point the `SupplierListMaster.aspx` page is sending users to `ProductsForSupplierDetails.aspx`, passing the selected supplier's `SupplierID` in the querystring.</span></span> <span data-ttu-id="af06e-170">Заключительный этап учебника состоит в том, чтобы отобразить продукты в элементе управления GridView в `ProductsForSupplierDetails.aspx`, `SupplierID` равно `SupplierID`, переданному через строку запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-170">The tutorial's final step is to display the products in a GridView in `ProductsForSupplierDetails.aspx` whose `SupplierID` equals the `SupplierID` passed in through the querystring.</span></span> <span data-ttu-id="af06e-171">Для этого добавьте GridView на страницу `ProductsForSupplierDetails.aspx`, используя новый элемент управления ObjectDataSource с именем `ProductsBySupplierDataSource`, который вызывает метод `GetProductsBySupplierID(supplierID)` из класса `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="af06e-171">To accomplish this start by adding a GridView to the `ProductsForSupplierDetails.aspx` page, using a new ObjectDataSource control named `ProductsBySupplierDataSource` that invokes the `GetProductsBySupplierID(supplierID)` method from the `ProductsBLL` class.</span></span>

<span data-ttu-id="af06e-172">[![добавить новый элемент управления ObjectDataSource с именем Продуктсбисупплиердатасаурце](master-detail-filtering-across-two-pages-cs/_static/image21.png)](master-detail-filtering-across-two-pages-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-172">[![Add a New ObjectDataSource Named ProductsBySupplierDataSource](master-detail-filtering-across-two-pages-cs/_static/image21.png)](master-detail-filtering-across-two-pages-cs/_static/image20.png)</span></span>

<span data-ttu-id="af06e-173">**Рис. 8**. Добавление нового элемента управления ObjectDataSource с именем `ProductsBySupplierDataSource` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-173">**Figure 8**: Add a New ObjectDataSource Named `ProductsBySupplierDataSource` ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image22.png))</span></span>

<span data-ttu-id="af06e-174">[![выберите класс ProductsBLL](master-detail-filtering-across-two-pages-cs/_static/image24.png)](master-detail-filtering-across-two-pages-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-174">[![Select the ProductsBLL Class](master-detail-filtering-across-two-pages-cs/_static/image24.png)](master-detail-filtering-across-two-pages-cs/_static/image23.png)</span></span>

<span data-ttu-id="af06e-175">**Рис. 9**. выбор класса `ProductsBLL` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-175">**Figure 9**: Select the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image25.png))</span></span>

<span data-ttu-id="af06e-176">[![, что ObjectDataSource вызывает метод Жетпродуктсбисупплиерид (КодПоставщика)](master-detail-filtering-across-two-pages-cs/_static/image27.png)](master-detail-filtering-across-two-pages-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-176">[![Have the ObjectDataSource Invoke the GetProductsBySupplierID(supplierID) Method](master-detail-filtering-across-two-pages-cs/_static/image27.png)](master-detail-filtering-across-two-pages-cs/_static/image26.png)</span></span>

<span data-ttu-id="af06e-177">**Рис. 10**. вызов метода `GetProductsBySupplierID(supplierID)` ObjectDataSource ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-177">**Figure 10**: Have the ObjectDataSource Invoke the `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image28.png))</span></span>

<span data-ttu-id="af06e-178">На последнем шаге мастера настройки источника данных предлагается указать источник параметра *`supplierID`* метода `GetProductsBySupplierID(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="af06e-178">The final step of the Configure Data Source wizard asks us to provide the source of the `GetProductsBySupplierID(supplierID)` method's *`supplierID`* parameter.</span></span> <span data-ttu-id="af06e-179">Чтобы использовать значение строки запроса, задайте для свойства Источник параметра значение QueryString и введите имя значения QueryString, которое будет использоваться в текстовом поле QueryStringField (`SupplierID`).</span><span class="sxs-lookup"><span data-stu-id="af06e-179">To use the querystring value, set the Parameter source to QueryString and enter the name of the querystring value to use in the QueryStringField textbox (`SupplierID`).</span></span>

<span data-ttu-id="af06e-180">[![заполнить значение параметра «КодПоставщика» из значения строки «КодПоставщика»](master-detail-filtering-across-two-pages-cs/_static/image30.png)](master-detail-filtering-across-two-pages-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-180">[![Populate the supplierID Parameter Value from the SupplierID Querystring Value](master-detail-filtering-across-two-pages-cs/_static/image30.png)](master-detail-filtering-across-two-pages-cs/_static/image29.png)</span></span>

<span data-ttu-id="af06e-181">**Рис. 11**. Заполнение значения параметра *`supplierID`* из значения строки запроса `SupplierID` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-181">**Figure 11**: Populate the *`supplierID`* Parameter Value from the `SupplierID` Querystring Value ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image31.png))</span></span>

<span data-ttu-id="af06e-182">Это все.</span><span class="sxs-lookup"><span data-stu-id="af06e-182">That's all there is to it!</span></span> <span data-ttu-id="af06e-183">На рис. 12 показана страница `ProductsForSupplierDetails.aspx` при посещении щелчком по ссылке Токио Traders (`SupplierListMaster.aspx`).</span><span class="sxs-lookup"><span data-stu-id="af06e-183">Figure 12 shows the `ProductsForSupplierDetails.aspx` page when visited by clicking the Tokyo Traders link from `SupplierListMaster.aspx`.</span></span>

<span data-ttu-id="af06e-184">[![отображаются продукты, предоставленные в Токио Traders.](master-detail-filtering-across-two-pages-cs/_static/image33.png)](master-detail-filtering-across-two-pages-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-184">[![The Products Supplied by Tokyo Traders are Shown](master-detail-filtering-across-two-pages-cs/_static/image33.png)](master-detail-filtering-across-two-pages-cs/_static/image32.png)</span></span>

<span data-ttu-id="af06e-185">**Рис. 12**. отображаются продукты, предоставленные в компании Токио ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image34.png)).</span><span class="sxs-lookup"><span data-stu-id="af06e-185">**Figure 12**: The Products Supplied by Tokyo Traders are Shown ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image34.png))</span></span>

## <a name="displaying-supplier-information-inproductsforsupplierdetailsaspx"></a><span data-ttu-id="af06e-186">Отображение сведений о поставщике в`ProductsForSupplierDetails.aspx`</span><span class="sxs-lookup"><span data-stu-id="af06e-186">Displaying Supplier Information in`ProductsForSupplierDetails.aspx`</span></span>

<span data-ttu-id="af06e-187">Как показано на рис. 12, на странице `ProductsForSupplierDetails.aspx` просто перечислены продукты, предоставляемые `SupplierID`, указанным в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-187">As Figure 12 shows, the `ProductsForSupplierDetails.aspx` page simply lists the products that are supplied by the `SupplierID` specified in the querystring.</span></span> <span data-ttu-id="af06e-188">Тем не менее, кто-то посылает на эту страницу напрямую, не знает, что на рис. 12 показаны продукты в Токио.</span><span class="sxs-lookup"><span data-stu-id="af06e-188">Someone sent directly to this page, however, would not know that Figure 12 is showing Tokyo Traders' products.</span></span> <span data-ttu-id="af06e-189">Чтобы устранить эту проблему, можно также отобразить сведения о поставщике на этой странице.</span><span class="sxs-lookup"><span data-stu-id="af06e-189">To remedy this we can display supplier information in this page as well.</span></span>

<span data-ttu-id="af06e-190">Начните с добавления элемента управления FormView над элементом GridView продуктов.</span><span class="sxs-lookup"><span data-stu-id="af06e-190">Start by adding a FormView above the products GridView.</span></span> <span data-ttu-id="af06e-191">Создайте новый элемент управления ObjectDataSource с именем `SuppliersDataSource`, который вызывает метод `GetSupplierBySupplierID(supplierID)` класса `SuppliersBLL`.</span><span class="sxs-lookup"><span data-stu-id="af06e-191">Create a new ObjectDataSource control named `SuppliersDataSource` that invokes the `SuppliersBLL` class's `GetSupplierBySupplierID(supplierID)` method.</span></span>

<span data-ttu-id="af06e-192">[![выберите класс Супплиерсблл](master-detail-filtering-across-two-pages-cs/_static/image36.png)](master-detail-filtering-across-two-pages-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-192">[![Select the SuppliersBLL Class](master-detail-filtering-across-two-pages-cs/_static/image36.png)](master-detail-filtering-across-two-pages-cs/_static/image35.png)</span></span>

<span data-ttu-id="af06e-193">**Рис. 13**. выбор класса `SuppliersBLL` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-193">**Figure 13**: Select the `SuppliersBLL` Class ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image37.png))</span></span>

<span data-ttu-id="af06e-194">[![, что ObjectDataSource вызывает метод Жетсупплиербисупплиерид (КодПоставщика)](master-detail-filtering-across-two-pages-cs/_static/image39.png)](master-detail-filtering-across-two-pages-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-194">[![Have the ObjectDataSource Invoke the GetSupplierBySupplierID(supplierID) Method](master-detail-filtering-across-two-pages-cs/_static/image39.png)](master-detail-filtering-across-two-pages-cs/_static/image38.png)</span></span>

<span data-ttu-id="af06e-195">**Рис. 14**. вызов метода `GetSupplierBySupplierID(supplierID)` ObjectDataSource ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-195">**Figure 14**: Have the ObjectDataSource Invoke the `GetSupplierBySupplierID(supplierID)` Method ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image40.png))</span></span>

<span data-ttu-id="af06e-196">Как и в случае с `ProductsBySupplierDataSource`, параметру *`supplierID`* присваивается значение `SupplierID` строки запроса.</span><span class="sxs-lookup"><span data-stu-id="af06e-196">As with the `ProductsBySupplierDataSource`, have the *`supplierID`* parameter assigned the value of the `SupplierID` querystring value.</span></span>

<span data-ttu-id="af06e-197">[![заполнить значение параметра «КодПоставщика» из значения строки «КодПоставщика»](master-detail-filtering-across-two-pages-cs/_static/image42.png)](master-detail-filtering-across-two-pages-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-197">[![Populate the supplierID Parameter Value from the SupplierID Querystring Value](master-detail-filtering-across-two-pages-cs/_static/image42.png)](master-detail-filtering-across-two-pages-cs/_static/image41.png)</span></span>

<span data-ttu-id="af06e-198">**Рис. 15**. Заполнение значения параметра *`supplierID`* из значения строки запроса `SupplierID` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-198">**Figure 15**: Populate the *`supplierID`* Parameter Value from the `SupplierID` Querystring Value ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image43.png))</span></span>

<span data-ttu-id="af06e-199">При привязке FormView к ObjectDataSource в представление конструирования Visual Studio автоматически создает `ItemTemplate`, `InsertItemTemplate`и `EditItemTemplate` FormView с элементами управления Label и TextBox для каждого поля данных, возвращаемого ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="af06e-199">When binding the FormView to the ObjectDataSource in the Design view, Visual Studio will automatically create the FormView's `ItemTemplate`, `InsertItemTemplate`, and `EditItemTemplate` with Label and TextBox Web controls for each of the data fields returned by the ObjectDataSource.</span></span> <span data-ttu-id="af06e-200">Поскольку мы просто хотим отобразить сведения о поставщиках, вы можете удалить `InsertItemTemplate` и `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="af06e-200">Since we just want to display supplier information feel free to remove the `InsertItemTemplate` and `EditItemTemplate`.</span></span> <span data-ttu-id="af06e-201">Затем измените ItemTemplate так, чтобы он отображал название компании поставщика в элементе `<h3>` и адрес, город, страна и номер телефона под названием компании.</span><span class="sxs-lookup"><span data-stu-id="af06e-201">Next, edit the ItemTemplate so that it displays the supplier's company name in an `<h3>` element and the address, city, country, and phone number beneath the company name.</span></span> <span data-ttu-id="af06e-202">Кроме того, можно вручную задать `DataSourceID` FormView и создать `ItemTemplate` разметку, как это было сделано в учебнике «[Отображение данных с помощью ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md)».</span><span class="sxs-lookup"><span data-stu-id="af06e-202">Alternatively, you can manually set the FormView's `DataSourceID` and create the `ItemTemplate` markup, as we did back in the "[Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md)" tutorial.</span></span>

<span data-ttu-id="af06e-203">После этих изменений декларативная разметка FormView должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="af06e-203">After these edits the FormView's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-across-two-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="af06e-204">На рис. 16 показан снимок экрана `ProductsForSupplierDetails.aspx` странице после включения сведений о поставщике, описанных выше.</span><span class="sxs-lookup"><span data-stu-id="af06e-204">Figure 16 shows a screen shot of the `ProductsForSupplierDetails.aspx` page after the supplier information detailed above has been included.</span></span>

<span data-ttu-id="af06e-205">[![список продуктов содержит сводку о поставщике](master-detail-filtering-across-two-pages-cs/_static/image45.png)](master-detail-filtering-across-two-pages-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-205">[![The List of Products Includes a Summary About the Supplier](master-detail-filtering-across-two-pages-cs/_static/image45.png)](master-detail-filtering-across-two-pages-cs/_static/image44.png)</span></span>

<span data-ttu-id="af06e-206">**Рис. 16**. список продуктов содержит сводку о поставщике ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-206">**Figure 16**: The List of Products Includes a Summary About the Supplier ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image46.png))</span></span>

## <a name="applying-the-final-touches-for-theproductsforsupplierdetailsaspxui"></a><span data-ttu-id="af06e-207">Применение последних касаний для пользовательского интерфейса`ProductsForSupplierDetails.aspx`</span><span class="sxs-lookup"><span data-stu-id="af06e-207">Applying the Final Touches for the`ProductsForSupplierDetails.aspx`UI</span></span>

<span data-ttu-id="af06e-208">Чтобы улучшить взаимодействие с пользователем для этого отчета, необходимо внести несколько дополнений на страницу `ProductsForSupplierDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="af06e-208">To improve the user experience for this report there are a couple of additions we ought to make to the `ProductsForSupplierDetails.aspx` page.</span></span> <span data-ttu-id="af06e-209">В настоящее время пользователь может перейти со страницы `ProductsForSupplierDetails.aspx` назад в список поставщиков, щелкнув кнопку назад в браузере.</span><span class="sxs-lookup"><span data-stu-id="af06e-209">Currently the only way a user can go from the `ProductsForSupplierDetails.aspx` page back to the list of suppliers is to click their browser's back button.</span></span> <span data-ttu-id="af06e-210">Давайте добавим элемент управления HyperLink на страницу `ProductsForSupplierDetails.aspx`, которая связывается с `SupplierListMaster.aspx`, предоставляя другой способ возврата пользователю в главный список.</span><span class="sxs-lookup"><span data-stu-id="af06e-210">Let's add a HyperLink control to the `ProductsForSupplierDetails.aspx` page that links back to `SupplierListMaster.aspx`, providing another way for the user to return to the master list.</span></span>

<span data-ttu-id="af06e-211">[![добавить элемент управления HyperLink, чтобы вернуть пользователя к Супплиерлистмастер. aspx.](master-detail-filtering-across-two-pages-cs/_static/image48.png)](master-detail-filtering-across-two-pages-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-211">[![Add a HyperLink Control to Take the User Back to SupplierListMaster.aspx](master-detail-filtering-across-two-pages-cs/_static/image48.png)](master-detail-filtering-across-two-pages-cs/_static/image47.png)</span></span>

<span data-ttu-id="af06e-212">**Рис. 17**. Добавление элемента управления HyperLink для возврата пользователя к `SupplierListMaster.aspx` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-212">**Figure 17**: Add a HyperLink Control to Take the User Back to `SupplierListMaster.aspx` ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image49.png))</span></span>

<span data-ttu-id="af06e-213">Если пользователь щелкает ссылку View Products (Просмотр продуктов) для поставщика, у которого нет продуктов, `ProductsBySupplierDataSource` ObjectDataSource в `ProductsForSupplierDetails.aspx` не возвращает никаких результатов.</span><span class="sxs-lookup"><span data-stu-id="af06e-213">If the user clicks on the View Products link for a supplier that doesn't have any products, the `ProductsBySupplierDataSource` ObjectDataSource in `ProductsForSupplierDetails.aspx` won't return any results.</span></span> <span data-ttu-id="af06e-214">Элемент управления GridView, привязанный к ObjectDataSource, не будет обрабатывать разметку, что приводит к пустой области на странице в браузере пользователя.</span><span class="sxs-lookup"><span data-stu-id="af06e-214">The GridView bound to the ObjectDataSource won't render any markup resulting in a blank region on the page in the user's browser.</span></span> <span data-ttu-id="af06e-215">Чтобы более ясно взаимодействовать с пользователем, что нет продуктов, связанных с выбранным поставщиком, мы можем задать для свойства `EmptyDataText` GridView сообщение, которое должно отображаться при возникновении такой ситуации.</span><span class="sxs-lookup"><span data-stu-id="af06e-215">To more clearly communicate to the user that there are no products associated with the selected supplier we can set the GridView's `EmptyDataText` property to the message we want displayed when such a situation arises.</span></span> <span data-ttu-id="af06e-216">Я установил для этого свойства значение "отсутствуют продукты, предоставленные этим поставщиком"</span><span class="sxs-lookup"><span data-stu-id="af06e-216">I've set this property to "There are no products provided by this supplier�"</span></span>

<span data-ttu-id="af06e-217">По умолчанию все поставщики в базе данных Northwind содержат по крайней мере один продукт.</span><span class="sxs-lookup"><span data-stu-id="af06e-217">By default, all suppliers in the Northwinds database provide at least one product.</span></span> <span data-ttu-id="af06e-218">Однако в этом руководстве я вручную изменил таблицу `Products`, чтобы поставщик Escargots Nouveaux больше не был связан с какими-либо продуктами.</span><span class="sxs-lookup"><span data-stu-id="af06e-218">However, for this tutorial I've manually modified the `Products` table so that the supplier Escargots Nouveaux is no longer associated with any products.</span></span> <span data-ttu-id="af06e-219">На рис. 18 показана страница сведений для Escargots Nouveaux после внесения этого изменения.</span><span class="sxs-lookup"><span data-stu-id="af06e-219">Figure 18 shows the details page for Escargots Nouveaux after this change has been made.</span></span>

<span data-ttu-id="af06e-220">[![пользователи сообщают, что поставщик не предоставляет продукты](master-detail-filtering-across-two-pages-cs/_static/image51.png)](master-detail-filtering-across-two-pages-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="af06e-220">[![Users are Informed that the Supplier Doesn't Provide Any Products](master-detail-filtering-across-two-pages-cs/_static/image51.png)](master-detail-filtering-across-two-pages-cs/_static/image50.png)</span></span>

<span data-ttu-id="af06e-221">**Рис. 18**. пользователи сообщают о том, что поставщик не предоставляет какие-либо продукты ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-filtering-across-two-pages-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="af06e-221">**Figure 18**: Users are Informed that the Supplier Doesn't Provide Any Products ([Click to view full-size image](master-detail-filtering-across-two-pages-cs/_static/image52.png))</span></span>

## <a name="summary"></a><span data-ttu-id="af06e-222">Сводка</span><span class="sxs-lookup"><span data-stu-id="af06e-222">Summary</span></span>

<span data-ttu-id="af06e-223">В то время как отчеты «основной/подробности» могут отображать как основные, так и подробные записи на одной странице, во многих веб-сайтах они разделяются на две веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="af06e-223">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="af06e-224">В этом учебнике мы рассмотрели, как реализовать такой отчет «основной/подробности», применяя поставщиков, перечисленных в элементе управления GridView на главной веб-странице, и связанных продуктов, перечисленных на странице «сведения».</span><span class="sxs-lookup"><span data-stu-id="af06e-224">In this tutorial we looked at how to implement such a master/detail report by having the suppliers listed in a GridView in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="af06e-225">Каждая строка поставщика на главной веб-странице содержала ссылку на страницу сведений, переданную по значению `SupplierID` строки.</span><span class="sxs-lookup"><span data-stu-id="af06e-225">Each supplier row in the master web page contained a link to the details page that passed along the row's `SupplierID` value.</span></span> <span data-ttu-id="af06e-226">Такие ссылки, относящиеся к строкам, можно легко добавить с помощью HyperLinkField GridView.</span><span class="sxs-lookup"><span data-stu-id="af06e-226">Such row-specific links can be easily added using the GridView's HyperLinkField.</span></span>

<span data-ttu-id="af06e-227">На странице сведений получение этих продуктов для указанного поставщика была выполнена путем вызова метода `GetProductsBySupplierID(supplierID)` класса `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="af06e-227">In the details page retrieving those products for the specified supplier was accomplished by invoking the `ProductsBLL` class's `GetProductsBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="af06e-228">Значение параметра *`supplierID`* было указано декларативно с помощью строки запроса в качестве источника параметра.</span><span class="sxs-lookup"><span data-stu-id="af06e-228">The *`supplierID`* parameter value was specified declaratively using the querystring as the parameter source.</span></span> <span data-ttu-id="af06e-229">Мы также рассмотрели, как отобразить сведения о поставщике на странице сведений с помощью FormView.</span><span class="sxs-lookup"><span data-stu-id="af06e-229">We also looked at how to display the supplier details in the details page using a FormView.</span></span>

<span data-ttu-id="af06e-230">[Следующий учебник](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) является последним в отчетах «основной/подробности».</span><span class="sxs-lookup"><span data-stu-id="af06e-230">Our [next tutorial](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) is the final one on master/detail reports.</span></span> <span data-ttu-id="af06e-231">Мы рассмотрим, как отобразить список продуктов в элементе управления GridView, где у каждой строки есть кнопка выбора.</span><span class="sxs-lookup"><span data-stu-id="af06e-231">We'll look at how to display a list of products in a GridView where each row has a Select button.</span></span> <span data-ttu-id="af06e-232">Если нажать кнопку Выбрать, сведения о продукте будут отображаться в элементе управления DetailsView на той же странице.</span><span class="sxs-lookup"><span data-stu-id="af06e-232">Clicking on the Select button will display that product's details in a DetailsView control on the same page.</span></span>

<span data-ttu-id="af06e-233">Поздравляем с программированием!</span><span class="sxs-lookup"><span data-stu-id="af06e-233">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="af06e-234">Об авторе</span><span class="sxs-lookup"><span data-stu-id="af06e-234">About the Author</span></span>

<span data-ttu-id="af06e-235">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP. NET и основатель [4GuysFromRolla.com](http://www.4guysfromrolla.com), работал с веб-технологиями Майкрософт с 1998.</span><span class="sxs-lookup"><span data-stu-id="af06e-235">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="af06e-236">Скотт работает как независимый консультант, преподаватель и модуль записи.</span><span class="sxs-lookup"><span data-stu-id="af06e-236">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="af06e-237">Его последняя книга — [*Sams обучать себя ASP.NET 2,0 за 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="af06e-237">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="af06e-238">Он доступен по адресу [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="af06e-238">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="af06e-239">или через его блог, который можно найти по адресу [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="af06e-239">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="af06e-240">Специальная благодарность</span><span class="sxs-lookup"><span data-stu-id="af06e-240">Special Thanks To</span></span>

<span data-ttu-id="af06e-241">Эта серия руководств была рассмотрена многими полезными рецензентами.</span><span class="sxs-lookup"><span data-stu-id="af06e-241">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="af06e-242">Специалист по интересу для этого руководства был Хилтон Гизнау.</span><span class="sxs-lookup"><span data-stu-id="af06e-242">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="af06e-243">Хотите ознакомиться с моими будущими статьями MSDN?</span><span class="sxs-lookup"><span data-stu-id="af06e-243">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="af06e-244">Если это так, расположите строку в [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="af06e-244">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="af06e-245">[Назад](master-detail-filtering-with-two-dropdownlists-cs.md)
> [Вперед](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md)</span><span class="sxs-lookup"><span data-stu-id="af06e-245">[Previous](master-detail-filtering-with-two-dropdownlists-cs.md)
[Next](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md)</span></span>
