---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: «Основной/подробности» с помощью выбираемого основного элемента GridView с DetailView (C#) | Документация Майкрософт
author: rick-anderson
description: Этом учебном курсе будет GridView, строки которого включают название и цену каждого продукта, а также кнопки "выбрать". При нажатии кнопки Select для particu...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: a5623c34ad7f8c9b5effed318a04b204ab66ecaa
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2019
ms.locfileid: "58425201"
---
<a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="056ff-104">Отчет "Основной/подробности" с помощью элемента управления GridView с возможностью выбора для основной информации и элемента управления DetailView для подробных сведений (C#)</span><span class="sxs-lookup"><span data-stu-id="056ff-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>
====================
<span data-ttu-id="056ff-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="056ff-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="056ff-106">[Скачайте пример приложения](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) или [скачать PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="056ff-106">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="056ff-107">Этом учебном курсе будет GridView, строки которого включают название и цену каждого продукта, а также кнопки "выбрать".</span><span class="sxs-lookup"><span data-stu-id="056ff-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="056ff-108">При нажатии кнопки Select для конкретного продукта приведет к его полные сведения для отображения в элементе управления DetailsView на этой же странице.</span><span class="sxs-lookup"><span data-stu-id="056ff-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>


## <a name="introduction"></a><span data-ttu-id="056ff-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="056ff-109">Introduction</span></span>

<span data-ttu-id="056ff-110">В [предыдущем учебном курсе](master-detail-filtering-across-two-pages-cs.md) мы рассмотрели создание отчета «основной/подробности» с помощью двух веб-страницах: «основной» веб-страницы, с которой отображался список поставщиков и веб-странице «Подробности», перечислявшей продукты, предоставляемые выбранным Поставщик.</span><span class="sxs-lookup"><span data-stu-id="056ff-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="056ff-111">Этот формат отчета могут быть включены в одну страницу.</span><span class="sxs-lookup"><span data-stu-id="056ff-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="056ff-112">Этом учебном курсе будет GridView, строки которого включают название и цену каждого продукта, а также кнопки "выбрать".</span><span class="sxs-lookup"><span data-stu-id="056ff-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="056ff-113">При нажатии кнопки Select для конкретного продукта приведет к его полные сведения для отображения в элементе управления DetailsView на этой же странице.</span><span class="sxs-lookup"><span data-stu-id="056ff-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>


<span data-ttu-id="056ff-114">[![При нажатии кнопки Select отображаются сведения о продукте](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="056ff-115">**Рис. 1**: При нажатии кнопки Select отображаются сведения о продукте ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>


## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="056ff-116">Шаг 1. Создание доступный для выбора элемента управления GridView</span><span class="sxs-lookup"><span data-stu-id="056ff-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="056ff-117">Вспомним, что две страницы «основной/подробности» сообщить, что каждой основной записи имелась гиперссылка, при щелчке, отправленных пользователя на страницу подробностей, передав имя выбранной строки `SupplierID` значение в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="056ff-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="056ff-118">Такие гиперссылка добавлялась к каждой строке GridView, использующей HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="056ff-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="056ff-119">Для одной страницы основной/подробности отчета, нам понадобится кнопки для каждой строки GridView, при нажатии на ней отображаются сведения.</span><span class="sxs-lookup"><span data-stu-id="056ff-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="056ff-120">Можно настроить элемент управления GridView для включения кнопки Select для каждой строки, которая вызывает обратную передачу и помечает эту строку как GridView [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span><span class="sxs-lookup"><span data-stu-id="056ff-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="056ff-121">Начните с добавления элемента управления GridView для `DetailsBySelecting.aspx` странице в `Filtering` папки, установка его `ID` свойства `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="056ff-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="056ff-122">Добавьте новый ObjectDataSource, именуемый `AllProductsDataSource` , вызывающий `ProductsBLL` класса `GetProducts()` метод.</span><span class="sxs-lookup"><span data-stu-id="056ff-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>


<span data-ttu-id="056ff-123">[![Создание нового ObjectDataSource, именуемого AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="056ff-124">**Рис. 2**: Создайте элемент управления ObjectDataSource с именем `AllProductsDataSource` ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>


<span data-ttu-id="056ff-125">[![Использование класса ProductsBLL](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="056ff-126">**Рис. 3**: Используйте `ProductsBLL` класс ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>


<span data-ttu-id="056ff-127">[![Настройка ObjectDataSource на вызов метода GetProducts()](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="056ff-128">**Рис. 4**: Настройка ObjectDataSource на Invoke `GetProducts()` метод ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>


<span data-ttu-id="056ff-129">Измените поля GridView удаления все, кроме `ProductName` и `UnitPrice` полей BoundField.</span><span class="sxs-lookup"><span data-stu-id="056ff-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="056ff-130">Кроме того, вы можете настроить эти поля BoundField, при необходимости, например при форматировании `UnitPrice` BoundField как денежной единицы и изменив `HeaderText` свойств полей BoundFields.</span><span class="sxs-lookup"><span data-stu-id="056ff-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="056ff-131">Эти действия можно выполнить графически, щелкнув ссылку Правка столбцов смарт-теге элемента GridView, или путем ручной настройки декларативного синтаксиса.</span><span class="sxs-lookup"><span data-stu-id="056ff-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>


<span data-ttu-id="056ff-132">[![Удалите все, кроме ProductName и UnitPrice полей BoundField](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="056ff-133">**Рис. 5**: Удалить все, но `ProductName` и `UnitPrice` полей BoundField ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>


<span data-ttu-id="056ff-134">Окончательная разметка GridView является:</span><span class="sxs-lookup"><span data-stu-id="056ff-134">The final markup for the GridView is:</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="056ff-135">Далее нам нужно пометить GridView как выбираемый, которая будет добавлена кнопка Select для каждой строки.</span><span class="sxs-lookup"><span data-stu-id="056ff-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="056ff-136">Для этого просто установите флажок Разрешить выделение в смарт-теге элемента GridView.</span><span class="sxs-lookup"><span data-stu-id="056ff-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>


<span data-ttu-id="056ff-137">[![Убедитесь в доступный для выбора строки GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="056ff-138">**Рис. 6**: Доступным для выделения строк GridView ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>


<span data-ttu-id="056ff-139">Установить флажок Enabling Selection добавлено поле добавляет CommandField для `ProductsGrid` GridView с его `ShowSelectButton` свойство присвоено значение True.</span><span class="sxs-lookup"><span data-stu-id="056ff-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="056ff-140">В результате кнопка "выбрать" для каждой строки GridView, как показано на рис. 6.</span><span class="sxs-lookup"><span data-stu-id="056ff-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="056ff-141">По умолчанию, кнопки Select визуализируются как LinkButton, но можно использовать кнопки или ImageButtons вместо через CommandField `ButtonType` свойство.</span><span class="sxs-lookup"><span data-stu-id="056ff-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="056ff-142">При нажатии кнопки Select строки GridView обратная и GridView `SelectedRow` обновляется свойство.</span><span class="sxs-lookup"><span data-stu-id="056ff-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="056ff-143">В дополнение к `SelectedRow` элемент GridView предоставляет свойства, [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), и [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) свойства.</span><span class="sxs-lookup"><span data-stu-id="056ff-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="056ff-144">`SelectedIndex` Свойство возвращает индекс выбранной строки, тогда как `SelectedValue` и `SelectedDataKey` свойства возвращают значения, основанные на GridView [свойство DataKeyNames](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="056ff-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="056ff-145">`DataKeyNames` Свойство позволяет связать одно или несколько полей данных значения с каждой строкой и часто применяется для соотнесения уникально идентифицирующей информации из базовых данных с каждой строкой GridView.</span><span class="sxs-lookup"><span data-stu-id="056ff-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="056ff-146">`SelectedValue` Свойство возвращает значение первого `DataKeyNames` поля данных для выбранной строки, тогда как `SelectedDataKey` свойство возвращает выбранной строки `DataKey` объект, содержащий все значения для указанных полей ключа данных для этой строки.</span><span class="sxs-lookup"><span data-stu-id="056ff-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="056ff-147">`DataKeyNames` Свойству автоматически присваивается уникальная идентификация поля данных при привязке источника данных к GridView, DetailsView и FormView через конструктор.</span><span class="sxs-lookup"><span data-stu-id="056ff-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="056ff-148">Хотя это свойство задано для нас автоматически в предшествующих учебных курсах, примеры работали бы без `DataKeyNames` указанное свойство.</span><span class="sxs-lookup"><span data-stu-id="056ff-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="056ff-149">Тем не менее, для элемента gridviewс возможностью выбора в этом руководстве, а также для последующих учебных курсах, в которых мы будет изучать вставку, обновление и удаление `DataKeyNames` свойства должен быть задан правильно.</span><span class="sxs-lookup"><span data-stu-id="056ff-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="056ff-150">Отвлекитесь и убедитесь, что элемента GridView `DataKeyNames` свойству `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="056ff-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="056ff-151">Давайте просмотрим наши достижения в данный момент через браузер.</span><span class="sxs-lookup"><span data-stu-id="056ff-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="056ff-152">Обратите внимание на то, что GridView перечисляет названия и цены всех продуктов вместе с кнопкой Select типа LinkButton.</span><span class="sxs-lookup"><span data-stu-id="056ff-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="056ff-153">При нажатии кнопки Select вызывает обратную передачу.</span><span class="sxs-lookup"><span data-stu-id="056ff-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="056ff-154">На шаге 2 будет показано, как заставить DetailsView отвечать на эту обратную передачу, отображая подробности о выбранном продукте.</span><span class="sxs-lookup"><span data-stu-id="056ff-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>


<span data-ttu-id="056ff-155">[![Каждая строка продукта содержит кнопку LinkButton SELECT](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="056ff-156">**Рис. 7**: Каждая строка продукта содержит кнопкой Select типа LinkButton ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>


### <a name="highlighting-the-selected-row"></a><span data-ttu-id="056ff-157">Выделение выбранной строки</span><span class="sxs-lookup"><span data-stu-id="056ff-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="056ff-158">`ProductsGrid` GridView есть `SelectedRowStyle` свойство, которое может использоваться для указания стиля оформления выбранной строки.</span><span class="sxs-lookup"><span data-stu-id="056ff-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="056ff-159">При должном использовании это может повысить удобство работы пользователя с более четко показывая, какая строка GridView выбрана.</span><span class="sxs-lookup"><span data-stu-id="056ff-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="056ff-160">Для этого руководства пусть выбранная строка будет выделяться желтым фоном.</span><span class="sxs-lookup"><span data-stu-id="056ff-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="056ff-161">Как и в предыдущих учебных курсах, постараемся сохранить относящиеся к эстетическим деталям параметры, определенные в виде классов CSS.</span><span class="sxs-lookup"><span data-stu-id="056ff-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="056ff-162">Таким образом, создайте новый класс CSS в `Styles.css` с именем `SelectedRowStyle`.</span><span class="sxs-lookup"><span data-stu-id="056ff-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>


[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="056ff-163">Чтобы применить этот класс CSS для `SelectedRowStyle` свойство *все* изменение элементов управления GridView в серии учебных `GridView.skin` обложки в `DataWebControls` темы для включения `SelectedRowStyle` параметры, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="056ff-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="056ff-164">С этим добавлением выбранная строка GridView теперь выделяется желтым цветом.</span><span class="sxs-lookup"><span data-stu-id="056ff-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>


<span data-ttu-id="056ff-165">[![Настройка внешнего вида выбранной строки, с помощью свойства SelectedRowStyle элемента GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="056ff-166">**Рис. 8**: Настройка с помощью внешнего вида выбранные строки GridView `SelectedRowStyle` свойство ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>


## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="056ff-167">Шаг 2. Отображение сведений о выбранном продукте в элементе управления DetailsView</span><span class="sxs-lookup"><span data-stu-id="056ff-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="056ff-168">С помощью `ProductsGrid` GridView готов, остается лишь добавить элемент DetailsView, отображающий сведения о конкретном выбранном продукте.</span><span class="sxs-lookup"><span data-stu-id="056ff-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="056ff-169">Добавьте элемент управления DetailsView над GridView и создайте новый ObjectDataSource, именуемый `ProductDetailsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="056ff-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="056ff-170">Поскольку мы хотим, чтобы этот DetailsView отображал информацию о выбранном продукте конкретном, Настройка `ProductDetailsDataSource` использовать `ProductsBLL` класса `GetProductByProductID(productID)` метод.</span><span class="sxs-lookup"><span data-stu-id="056ff-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>


<span data-ttu-id="056ff-171">[![Вызов метода класса ProductsBLL GetProductByProductID(productID)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="056ff-172">**Рис. 9**: Вызвать `ProductsBLL` класса `GetProductByProductID(productID)` метод ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>


<span data-ttu-id="056ff-173">У *`productID`* значение параметра, полученные из элемента управления GridView `SelectedValue` свойство.</span><span class="sxs-lookup"><span data-stu-id="056ff-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="056ff-174">Как уже говорилось ранее, GridView `SelectedValue` свойство возвращает значение первого ключа данных для выбранной строки.</span><span class="sxs-lookup"><span data-stu-id="056ff-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="056ff-175">Таким образом, крайне важно, GridView `DataKeyNames` свойству `ProductID`, так что выбранной строки `ProductID` значение возвращается `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="056ff-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>


<span data-ttu-id="056ff-176">[![Значение параметра productID свойство SelectedValue элемента GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="056ff-177">**Рис. 10**: Задайте *`productID`* параметра к элементу GridView `SelectedValue` свойство ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>


<span data-ttu-id="056ff-178">Один раз `productDetailsDataSource` ObjectDataSource правильно настроен и привязан к элементу DetailsView, это руководство представляет собой полный!</span><span class="sxs-lookup"><span data-stu-id="056ff-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="056ff-179">При первом посещении страницы выбранные строки отсутствуют, поэтому GridView `SelectedValue` возвращает `null`.</span><span class="sxs-lookup"><span data-stu-id="056ff-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="056ff-180">Так как отсутствуют продукты с `NULL` `ProductID` значение, не возвращает записей `GetProductByProductID(productID)` метода, это означает, что DetailsView не отображается (см. рис. 11).</span><span class="sxs-lookup"><span data-stu-id="056ff-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="056ff-181">При нажатии кнопки Select строки GridView, обратная передача и DetailsView обновляется.</span><span class="sxs-lookup"><span data-stu-id="056ff-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="056ff-182">Это раз свойство GridView `SelectedValue` возвращает `ProductID` выбранной строки, `GetProductByProductID(productID)` возвращает метод `ProductsDataTable` с информацией о данном конкретном продукте, а DetailsView показывает эти подробности (см. рис. 12).</span><span class="sxs-lookup"><span data-stu-id="056ff-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>


<span data-ttu-id="056ff-183">[![Отображается при первом посещении страниц по только в GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="056ff-184">**Рис. 11**: При первом посещении отображается только GridView ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>


<span data-ttu-id="056ff-185">[![При выборе строки, отображаются сведения о продукте](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="056ff-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="056ff-186">**Рис. 12**: При выборе строки, отображаются сведения о продукте ([Просмотр полноразмерного изображения](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="056ff-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>


## <a name="summary"></a><span data-ttu-id="056ff-187">Сводка</span><span class="sxs-lookup"><span data-stu-id="056ff-187">Summary</span></span>

<span data-ttu-id="056ff-188">В этом и трех предшествующих учебных курсах мы рассмотрели ряд приемов отображения отчетов «основной/подробности».</span><span class="sxs-lookup"><span data-stu-id="056ff-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="056ff-189">В этом учебном курсе мы рассмотрели использование элемента gridviewс возможностью выбора для размещения основных записей и DetailsView для отображения сведений о выбранных основных записях на этой же странице.</span><span class="sxs-lookup"><span data-stu-id="056ff-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="056ff-190">В предыдущих учебных курсах мы рассмотрели способ отображения обобщенных и подробных отчетов с помощью списков DropDownList и отображение основных записей на одной странице, а также записей на другом.</span><span class="sxs-lookup"><span data-stu-id="056ff-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="056ff-191">Данный учебный курс завершает рассмотрение отчетов «основной/подробности».</span><span class="sxs-lookup"><span data-stu-id="056ff-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="056ff-192">Начиная с следующем учебном курсе мы начнем и исследование настраиваемого форматирования с помощью GridView, DetailsView и FormView.</span><span class="sxs-lookup"><span data-stu-id="056ff-192">Starting with the next tutorial we'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="056ff-193">Мы увидим, как настроить внешний вид этих элементов управления на основе данных, привязанных к ним, как создать сводку данных в нижнем колонтитуле элемента GridView и как использовать шаблоны, чтобы получить большую степень контроля над компоновкой.</span><span class="sxs-lookup"><span data-stu-id="056ff-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="056ff-194">Счастливого вам программирования!</span><span class="sxs-lookup"><span data-stu-id="056ff-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="056ff-195">Об авторе</span><span class="sxs-lookup"><span data-stu-id="056ff-195">About the Author</span></span>

<span data-ttu-id="056ff-196">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP.NET и основатель веб- [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Microsoft с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="056ff-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="056ff-197">Скотт — независимый консультант, преподаватель и автор.</span><span class="sxs-lookup"><span data-stu-id="056ff-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="056ff-198">Его последняя книга — [ *Sams Teach ASP.NET 2.0 in 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="056ff-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="056ff-199">Ним можно связаться по адресу [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="056ff-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="056ff-200">или через его блог, который можно найти в [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="056ff-200">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="056ff-201">Особая благодарность</span><span class="sxs-lookup"><span data-stu-id="056ff-201">Special Thanks To</span></span>

<span data-ttu-id="056ff-202">В этой серии руководств пособий рецензировалась многими компетентными редакторами.</span><span class="sxs-lookup"><span data-stu-id="056ff-202">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="056ff-203">Основной рецензент этого учебного был (Hilton giesenow).</span><span class="sxs-lookup"><span data-stu-id="056ff-203">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="056ff-204">Хотите поработать с моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="056ff-204">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="056ff-205">Если Да, напишите мне [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="056ff-205">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="056ff-206">[Назад](master-detail-filtering-across-two-pages-cs.md)
> [Вперед](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="056ff-206">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
