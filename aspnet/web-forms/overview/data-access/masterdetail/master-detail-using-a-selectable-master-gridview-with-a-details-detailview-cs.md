---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: "\"Основной/подробности\" с помощью выбираемого элемента управления GridView с подробными сведениями DetailView (C#) | Документация Майкрософт"
author: rick-anderson
description: В этом учебнике есть элемент управления GridView, чьи строки содержат имя и цену каждого продукта вместе с кнопкой выбора. Нажмите кнопку выбрать для партику...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: 04c427341f063729bd23b416a96f5acb20702792
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78503628"
---
# <a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="dc86d-104">Отчет "Основной/подробности" с помощью элемента управления GridView с возможностью выбора для основной информации и элемента управления DetailView для подробных сведений (C#)</span><span class="sxs-lookup"><span data-stu-id="dc86d-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>

<span data-ttu-id="dc86d-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="dc86d-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="dc86d-106">[Скачивание примера приложения](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) или [Загрузка PDF-файла](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="dc86d-106">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="dc86d-107">В этом учебнике есть элемент управления GridView, чьи строки содержат имя и цену каждого продукта вместе с кнопкой выбора.</span><span class="sxs-lookup"><span data-stu-id="dc86d-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="dc86d-108">Нажатие кнопки выбрать для конкретного продукта приведет к тому, что все его полные сведения будут отображаться в элементе управления DetailsView на той же странице.</span><span class="sxs-lookup"><span data-stu-id="dc86d-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

## <a name="introduction"></a><span data-ttu-id="dc86d-109">Введение</span><span class="sxs-lookup"><span data-stu-id="dc86d-109">Introduction</span></span>

<span data-ttu-id="dc86d-110">В [предыдущем учебном курсе](master-detail-filtering-across-two-pages-cs.md) было показано, как создать отчет «основной/подробности» с помощью двух веб-страниц: «главной» веб-страницы, из которой был отображен список поставщиков. и веб-страницу "сведения", в которой перечислены продукты, предоставляемые выбранным поставщиком.</span><span class="sxs-lookup"><span data-stu-id="dc86d-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="dc86d-111">Этот формат отчета с двумя страницами можно сжать на одну страницу.</span><span class="sxs-lookup"><span data-stu-id="dc86d-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="dc86d-112">В этом учебнике есть элемент управления GridView, чьи строки содержат имя и цену каждого продукта вместе с кнопкой выбора.</span><span class="sxs-lookup"><span data-stu-id="dc86d-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="dc86d-113">Нажатие кнопки выбрать для конкретного продукта приведет к тому, что все его полные сведения будут отображаться в элементе управления DetailsView на той же странице.</span><span class="sxs-lookup"><span data-stu-id="dc86d-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>

<span data-ttu-id="dc86d-114">[![нажатии кнопки выбрать отображает сведения о продукте.](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="dc86d-115">**Рис. 1**. нажатие кнопки "выбрать" отображает сведения о продукте ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="dc86d-116">Шаг 1. Создание выбираемого элемента управления GridView</span><span class="sxs-lookup"><span data-stu-id="dc86d-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="dc86d-117">Вспомним, что в двух-страничном отчете «основной/подробности» каждая Главная запись включала гиперссылку, которая при щелчке отправляет пользователю на страницу сведений, передавая `SupplierID` значение нажатой строки в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="dc86d-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="dc86d-118">Такая гиперссылка была добавлена в каждую строку GridView с помощью HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="dc86d-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="dc86d-119">Для одностраничного отчета «основной/подробности» требуется кнопка для каждой строки GridView, при нажатии которой отображаются подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="dc86d-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="dc86d-120">Элемент управления GridView можно настроить для включения кнопки выбора для каждой строки, которая вызывает обратную передачу, и помечает эту строку как [Селектедров](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)GridView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="dc86d-121">Для начала добавьте элемент управления GridView на страницу `DetailsBySelecting.aspx` в папке `Filtering`, установив для свойства `ID` значение `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="dc86d-122">Затем добавьте новый элемент управления ObjectDataSource с именем `AllProductsDataSource`, который вызывает метод `GetProducts()` класса `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>

<span data-ttu-id="dc86d-123">[![создать элемент управления ObjectDataSource с именем Аллпродуктсдатасаурце](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="dc86d-124">**Рис. 2**. Создание элемента управления ObjectDataSource с именем `AllProductsDataSource` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>

<span data-ttu-id="dc86d-125">[![использования класса ProductsBLL](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="dc86d-126">**Рис. 3**. использование класса `ProductsBLL` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>

<span data-ttu-id="dc86d-127">[![настроить ObjectDataSource для вызова метода Products ()](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="dc86d-128">**Рис. 4**. Настройка ObjectDataSource для вызова метода `GetProducts()` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>

<span data-ttu-id="dc86d-129">Измените поля GridView, удалив все, кроме `ProductName` и `UnitPrice` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="dc86d-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="dc86d-130">Кроме того, вы можете настроить эти BoundFields по мере необходимости, например форматирование `UnitPrice` BoundField в виде валюты и изменение свойств `HeaderText` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="dc86d-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="dc86d-131">Эти действия можно выполнить графически, щелкнув ссылку Edit Columns (изменить столбцы) в смарт-теге GridView или настроив декларативный синтаксис вручную.</span><span class="sxs-lookup"><span data-stu-id="dc86d-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>

<span data-ttu-id="dc86d-132">[![удалить все BoundFields, кроме ProductName и UnitPrice](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="dc86d-133">**Рис. 5**. удаление всех `ProductName` и `UnitPrice` BoundFields ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>

<span data-ttu-id="dc86d-134">Последняя разметка для GridView:</span><span class="sxs-lookup"><span data-stu-id="dc86d-134">The final markup for the GridView is:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="dc86d-135">Далее необходимо пометить GridView как выбираемое, что приведет к добавлению кнопки выбрать в каждую строку.</span><span class="sxs-lookup"><span data-stu-id="dc86d-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="dc86d-136">Чтобы сделать это, просто установите флажок Включить выбор в смарт-теге GridView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>

<span data-ttu-id="dc86d-137">[![сделать строки GridView выбираемыми](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="dc86d-138">**Рис. 6**. обеспечение выбора строк GridView ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>

<span data-ttu-id="dc86d-139">При проверке параметра "Включение выбора" в `ProductsGrid` GridView добавляется элемент CommandField со свойством `ShowSelectButton`, установленным в значение true.</span><span class="sxs-lookup"><span data-stu-id="dc86d-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="dc86d-140">Это приводит к нажатию кнопки SELECT для каждой строки GridView, как показано на рис. 6.</span><span class="sxs-lookup"><span data-stu-id="dc86d-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="dc86d-141">По умолчанию кнопки выбора отображаются как LinkButton, но вместо этого можно использовать кнопки или Имажебуттонс в свойстве `ButtonType` CommandField.</span><span class="sxs-lookup"><span data-stu-id="dc86d-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="dc86d-142">При нажатии кнопки выбора строки GridView происходит обратная передача, и свойство `SelectedRow` GridView обновляется.</span><span class="sxs-lookup"><span data-stu-id="dc86d-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="dc86d-143">В дополнение к свойству `SelectedRow` GridView предоставляет свойства [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx)и [селектеддатакэй](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="dc86d-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="dc86d-144">Свойство `SelectedIndex` возвращает индекс выбранной строки, тогда как свойства `SelectedValue` и `SelectedDataKey` возвращают значения, основанные на [свойстве DataKeyNames](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx)элемента GridView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="dc86d-145">Свойство `DataKeyNames` используется для связывания одного или нескольких значений полей данных с каждой строкой и обычно используется для уникальной идентификации сведений из базовых данных в каждой строке GridView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="dc86d-146">Свойство `SelectedValue` возвращает значение первого `DataKeyNames` поля данных для выбранной строки, где, как свойство `SelectedDataKey` возвращает объект `DataKey` выбранной строки, который содержит все значения для указанных полей ключа данных для этой строки.</span><span class="sxs-lookup"><span data-stu-id="dc86d-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="dc86d-147">При привязке источника данных к GridView, DetailsView или FormView в конструкторе свойству `DataKeyNames` автоматически присваивается однозначно идентифицирующее поле данных.</span><span class="sxs-lookup"><span data-stu-id="dc86d-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="dc86d-148">Хотя это свойство было задано автоматически в предыдущих учебных курсах, примеры работали бы без указанного свойства `DataKeyNames`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="dc86d-149">Однако для элемента управления GridView в этом учебнике, а также для будущих руководств, в которых мы будем изучать вставку, обновление и удаление, необходимо правильно задать свойство `DataKeyNames`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="dc86d-150">Подождите, что свойство `DataKeyNames` GridView имеет значение `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="dc86d-151">Давайте проверим наш ход работы через браузер.</span><span class="sxs-lookup"><span data-stu-id="dc86d-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="dc86d-152">Обратите внимание, что в элементе управления GridView указаны имя и цена для всех продуктов, а также выбрана LinkButton.</span><span class="sxs-lookup"><span data-stu-id="dc86d-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="dc86d-153">Нажатие кнопки выбрать приводит к выполнению обратной передачи.</span><span class="sxs-lookup"><span data-stu-id="dc86d-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="dc86d-154">На этапе 2 мы посмотрим, как элемент DetailsView будет отвечать на эту обратную передачу, отображая сведения о выбранном продукте.</span><span class="sxs-lookup"><span data-stu-id="dc86d-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>

<span data-ttu-id="dc86d-155">[![каждая строка продукта содержит SELECT LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="dc86d-156">**Рис. 7**. Каждая строка продукта содержит команду LinkButton ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png)).</span><span class="sxs-lookup"><span data-stu-id="dc86d-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>

### <a name="highlighting-the-selected-row"></a><span data-ttu-id="dc86d-157">Выделение выбранной строки</span><span class="sxs-lookup"><span data-stu-id="dc86d-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="dc86d-158">`ProductsGrid` GridView имеет свойство `SelectedRowStyle`, которое можно использовать для диктовки визуального стиля для выбранной строки.</span><span class="sxs-lookup"><span data-stu-id="dc86d-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="dc86d-159">Это может повысить эффективность работы пользователя. Это позволяет более точно показать, какая строка GridView выбрана в данный момент.</span><span class="sxs-lookup"><span data-stu-id="dc86d-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="dc86d-160">В этом руководстве мы добавим выделенную строку желтым фоном.</span><span class="sxs-lookup"><span data-stu-id="dc86d-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="dc86d-161">Как и в предыдущих учебных курсах, мы стремимся к тому, чтобы параметры, связанные с Aesthetic, определялись как классы CSS.</span><span class="sxs-lookup"><span data-stu-id="dc86d-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="dc86d-162">Поэтому создайте новый класс CSS в `Styles.css` с именем `SelectedRowStyle`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>

[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="dc86d-163">Чтобы применить этот класс CSS к свойству `SelectedRowStyle` *всех* элементов управления GridView в серии руководств, измените обложку `GridView.skin` в теме `DataWebControls`, чтобы включить параметры `SelectedRowStyle`, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="dc86d-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>

[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="dc86d-164">С этим добавлением выбранная строка GridView теперь выделяется желтым цветом фона.</span><span class="sxs-lookup"><span data-stu-id="dc86d-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>

<span data-ttu-id="dc86d-165">[![настроить внешний вид выбранной строки с помощью свойства Селектедровстиле GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="dc86d-166">**Рис. 8**. Настройка внешнего вида выбранной строки с помощью свойства `SelectedRowStyle` GridView ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>

## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="dc86d-167">Шаг 2. Отображение сведений о выбранном продукте в элементе DetailsView</span><span class="sxs-lookup"><span data-stu-id="dc86d-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="dc86d-168">По завершении `ProductsGrid` GridView остается только добавить DetailsView, отображающий сведения о конкретном выбранном продукте.</span><span class="sxs-lookup"><span data-stu-id="dc86d-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="dc86d-169">Добавьте элемент управления DetailsView над элементом GridView и создайте новый объект ObjectDataSource с именем `ProductDetailsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="dc86d-170">Так как мы хотим, чтобы эта DetailsView отображала определенную информацию о выбранном продукте, настройте `ProductDetailsDataSource` для использования метода `GetProductByProductID(productID)` класса `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>

<span data-ttu-id="dc86d-171">[![вызвать метод Жетпродуктбипродуктид (productID) класса ProductsBLL](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="dc86d-172">**Рис. 9**. вызов метода `GetProductByProductID(productID)` класса `ProductsBLL` ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>

<span data-ttu-id="dc86d-173">Получите значение *`productID`* параметра, полученное из свойства `SelectedValue` элемента управления GridView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="dc86d-174">Как мы обсуждали ранее, свойство `SelectedValue` GridView возвращает первое значение ключа данных для выбранной строки.</span><span class="sxs-lookup"><span data-stu-id="dc86d-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="dc86d-175">Поэтому крайне важно, чтобы свойство `DataKeyNames` GridView было установлено в значение `ProductID`, чтобы возвращаемое значение `ProductID` строки возвращалось `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>

<span data-ttu-id="dc86d-176">[![задать параметр productID для свойства SelectedValue GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="dc86d-177">**Рис. 10**. установка параметра *`productID`* для свойства `SelectedValue` GridView ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>

<span data-ttu-id="dc86d-178">После того как `productDetailsDataSource` ObjectDataSource правильно настроен и привязан к элементу DetailsView, этот учебник завершен.</span><span class="sxs-lookup"><span data-stu-id="dc86d-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="dc86d-179">При первом посещении страницы не выбрана ни одна строка, поэтому свойство `SelectedValue` GridView возвращает `null`.</span><span class="sxs-lookup"><span data-stu-id="dc86d-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="dc86d-180">Поскольку нет продуктов со значением `NULL` `ProductID`, метод `GetProductByProductID(productID)` не возвращает никаких записей, что означает, что элемент DetailsView не отображается (см. рис. 11).</span><span class="sxs-lookup"><span data-stu-id="dc86d-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="dc86d-181">При нажатии кнопки выбора строки GridView происходит обратная передача и обновляется элемент DetailsView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="dc86d-182">В этот раз `SelectedValue` свойство GridView возвращает `ProductID` выбранной строки, метод `GetProductByProductID(productID)` возвращает `ProductsDataTable` со сведениями об этом конкретном продукте, а DetailsView показывает эти сведения (см. рис. 12).</span><span class="sxs-lookup"><span data-stu-id="dc86d-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>

<span data-ttu-id="dc86d-183">[![при первом посещении отображается только GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="dc86d-184">**Рис. 11**. при первом посещении отображается только GridView ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="dc86d-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>

<span data-ttu-id="dc86d-185">[![после выбора строки отображаются сведения о продукте](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="dc86d-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="dc86d-186">**Рис. 12**. при выборе строки отображаются сведения о продукте ([щелкните, чтобы просмотреть изображение с полным размером](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png)).</span><span class="sxs-lookup"><span data-stu-id="dc86d-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>

## <a name="summary"></a><span data-ttu-id="dc86d-187">Сводка</span><span class="sxs-lookup"><span data-stu-id="dc86d-187">Summary</span></span>

<span data-ttu-id="dc86d-188">В этом и предыдущих трех руководствах мы видели ряд методов отображения отчетов «основной/подробности».</span><span class="sxs-lookup"><span data-stu-id="dc86d-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="dc86d-189">В этом учебнике мы рассмотрели использование выбранного элемента управления GridView для размещения основных записей и DetailsView, чтобы отобразить сведения о выбранной главной записи на той же странице.</span><span class="sxs-lookup"><span data-stu-id="dc86d-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="dc86d-190">В предыдущих руководствах мы рассмотрели, как отображать отчеты "основной/подробности" с помощью элементов управления DropDownList и отображать главные записи на одной веб-странице и в подробных записях на другом.</span><span class="sxs-lookup"><span data-stu-id="dc86d-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="dc86d-191">Этот учебник завершает изучение отчетов «основной/подробности».</span><span class="sxs-lookup"><span data-stu-id="dc86d-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="dc86d-192">Начиная с следующего учебника мы начнем исследование настраиваемого форматирования с помощью GridView, DetailsView и FormView.</span><span class="sxs-lookup"><span data-stu-id="dc86d-192">Starting with the next tutorial we'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="dc86d-193">Мы посмотрим, как настроить внешний вид этих элементов управления на основе привязанных к ним данных, как суммировать данные в нижнем колонтитуле GridView и как использовать шаблоны для получения более высокого уровня контроля над макетом.</span><span class="sxs-lookup"><span data-stu-id="dc86d-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="dc86d-194">Поздравляем с программированием!</span><span class="sxs-lookup"><span data-stu-id="dc86d-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="dc86d-195">Об авторе</span><span class="sxs-lookup"><span data-stu-id="dc86d-195">About the Author</span></span>

<span data-ttu-id="dc86d-196">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP. NET и основатель [4GuysFromRolla.com](http://www.4guysfromrolla.com), работал с веб-технологиями Майкрософт с 1998.</span><span class="sxs-lookup"><span data-stu-id="dc86d-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="dc86d-197">Скотт работает как независимый консультант, преподаватель и модуль записи.</span><span class="sxs-lookup"><span data-stu-id="dc86d-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="dc86d-198">Его последняя книга — [*Sams обучать себя ASP.NET 2,0 за 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="dc86d-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="dc86d-199">Он доступен по адресу [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="dc86d-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="dc86d-200">или через его блог, который можно найти по адресу [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="dc86d-200">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="dc86d-201">Специальная благодарность</span><span class="sxs-lookup"><span data-stu-id="dc86d-201">Special Thanks To</span></span>

<span data-ttu-id="dc86d-202">Эта серия руководств была рассмотрена многими полезными рецензентами.</span><span class="sxs-lookup"><span data-stu-id="dc86d-202">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="dc86d-203">Специалист по интересу для этого руководства был Хилтон Гизнау.</span><span class="sxs-lookup"><span data-stu-id="dc86d-203">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="dc86d-204">Хотите ознакомиться с моими будущими статьями MSDN?</span><span class="sxs-lookup"><span data-stu-id="dc86d-204">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="dc86d-205">Если это так, расположите строку в [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="dc86d-205">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="dc86d-206">[Назад](master-detail-filtering-across-two-pages-cs.md)
> [Вперед](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="dc86d-206">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
