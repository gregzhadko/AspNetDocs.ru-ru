---
uid: web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
title: Создание интерфейса настраиваемого упорядочения (C#) | Документация Майкрософт
author: rick-anderson
description: При отображении длинных списков данных, бывает удобно сгруппировать связанные данные, между группами разделяющие строки. В этом руководстве будет показано, как соз...
ms.author: riande
ms.date: 08/15/2006
ms.assetid: 6f81b633-9d01-4e52-ae4a-2ea6bc109475
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting/creating-a-customized-sorting-user-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: 28926276e183ae7cf7ed4087d8c73044741389e5
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57034511"
---
<a name="creating-a-customized-sorting-user-interface-c"></a><span data-ttu-id="5eed5-104">Создание интерфейса настраиваемого упорядочения (C#)</span><span class="sxs-lookup"><span data-stu-id="5eed5-104">Creating a Customized Sorting User Interface (C#)</span></span>
====================
<span data-ttu-id="5eed5-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5eed5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5eed5-106">[Скачайте пример приложения](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe) или [скачать PDF](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5eed5-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_27_CS.exe) or [Download PDF](creating-a-customized-sorting-user-interface-cs/_static/datatutorial27cs1.pdf)</span></span>

> <span data-ttu-id="5eed5-107">При отображении длинных списков данных, бывает удобно сгруппировать связанные данные, между группами разделяющие строки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-107">When displaying a long list of sorted data, it can be very helpful to group related data by introducing separator rows.</span></span> <span data-ttu-id="5eed5-108">В этом руководстве будет показано, как создать такой интерфейс сортировки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-108">In this tutorial we'll see how to create such a sorting user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="5eed5-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="5eed5-109">Introduction</span></span>

<span data-ttu-id="5eed5-110">При отображении длинного списка отсортированных данных там, где есть лишь небольшое число различных значений в одном из столбцов, конечный пользователь может оказаться трудно, точно, границу между группами возникновения.</span><span class="sxs-lookup"><span data-stu-id="5eed5-110">When displaying a long list of sorted data where there are only a handful of different values in the sorted column, an end user might find it hard to discern where, exactly, the difference boundaries occur.</span></span> <span data-ttu-id="5eed5-111">Например, существуют из 81 наименования продуктов в базе данных, но только девять вариантов разных категорий (восемь именованных категорий, а также `NULL` параметр).</span><span class="sxs-lookup"><span data-stu-id="5eed5-111">For example, there are 81 products in the database, but only nine different category choices (eight unique categories plus the `NULL` option).</span></span> <span data-ttu-id="5eed5-112">Рассмотрим случай, который нужно просмотреть продукты, которые относятся к категории морепродуктов.</span><span class="sxs-lookup"><span data-stu-id="5eed5-112">Consider the case of a user who is interested in examining the products that fall under the Seafood category.</span></span> <span data-ttu-id="5eed5-113">Из страницу со списком *все* продуктов в одном GridView, пользователь может решить, ее лучше всего сортировать результаты по категории, которая будет сгруппировать все Морепродукты.</span><span class="sxs-lookup"><span data-stu-id="5eed5-113">From a page that lists *all* of the products in a single GridView, the user might decide her best bet is to sort the results by category, which will group together all of the Seafood products together.</span></span> <span data-ttu-id="5eed5-114">После сортировки по категориям, пользователь затем необходимо просмотреть весь список, ищете где продукты нужной начала и окончания.</span><span class="sxs-lookup"><span data-stu-id="5eed5-114">After sorting by category, the user then needs to hunt through the list, looking for where the Seafood-grouped products start and end.</span></span> <span data-ttu-id="5eed5-115">Так как результаты сортируются в алфавитном порядке по имени категории, найти нужную не сложнее, но все равно требуется внимательно просматривать список элементов в сетке.</span><span class="sxs-lookup"><span data-stu-id="5eed5-115">Since the results are ordered alphabetically by the category name finding the Seafood products is not difficult, but it still requires closely scanning the list of items in the grid.</span></span>

<span data-ttu-id="5eed5-116">Для выделения границ между группами, многие веб-сайтов использовать пользовательский интерфейс, который служит разделителем между группами.</span><span class="sxs-lookup"><span data-stu-id="5eed5-116">To help highlight the boundaries between sorted groups, many websites employ a user interface that adds a separator between such groups.</span></span> <span data-ttu-id="5eed5-117">Разделители, подобным показанным на рис. 1 позволяет пользователю быстро найти нужную группу и определить его границы, а также выяснить, какие группы вообще входят в данных.</span><span class="sxs-lookup"><span data-stu-id="5eed5-117">Separators like the ones shown in Figure 1 enables a user to more quickly find a particular group and identify its boundaries, as well as ascertain what distinct groups exist in the data.</span></span>


<span data-ttu-id="5eed5-118">[![Каждой группы категорий имеет четко определены](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-118">[![Each Category Group is Clearly Identified](creating-a-customized-sorting-user-interface-cs/_static/image2.png)](creating-a-customized-sorting-user-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="5eed5-119">**Рис. 1**: Каждой группы категорий имеет четко определены ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-119">**Figure 1**: Each Category Group is Clearly Identified ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image3.png))</span></span>


<span data-ttu-id="5eed5-120">В этом руководстве будет показано, как создать такой интерфейс сортировки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-120">In this tutorial we'll see how to create such a sorting user interface.</span></span>

## <a name="step-1-creating-a-standard-sortable-gridview"></a><span data-ttu-id="5eed5-121">Шаг 1. Создание стандартной страницы и сортировки элемента управления GridView</span><span class="sxs-lookup"><span data-stu-id="5eed5-121">Step 1: Creating a Standard, Sortable GridView</span></span>

<span data-ttu-id="5eed5-122">Перед тем как добавить к элементу GridView для предоставления нужный режим сортировки, позвольте s сначала создать стандартный, сортируемой GridView, которая перечисляет продукты.</span><span class="sxs-lookup"><span data-stu-id="5eed5-122">Before we explore how to augment the GridView to provide the enhanced sorting interface, let s first create a standard, sortable GridView that lists the products.</span></span> <span data-ttu-id="5eed5-123">Сначала откройте `CustomSortingUI.aspx` странице в `PagingAndSorting` папку.</span><span class="sxs-lookup"><span data-stu-id="5eed5-123">Start by opening the `CustomSortingUI.aspx` page in the `PagingAndSorting` folder.</span></span> <span data-ttu-id="5eed5-124">Добавьте элемент управления GridView на страницу, задайте его `ID` свойства `ProductList`и привязать его к элементу управления ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="5eed5-124">Add a GridView to the page, set its `ID` property to `ProductList`, and bind it to a new ObjectDataSource.</span></span> <span data-ttu-id="5eed5-125">Настройка ObjectDataSource на использование `ProductsBLL` класс s `GetProducts()` для выбора нужных записей.</span><span class="sxs-lookup"><span data-stu-id="5eed5-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method for selecting records.</span></span>

<span data-ttu-id="5eed5-126">Затем настройте GridView, таким образом, что он содержит только `ProductName`, `CategoryName`, `SupplierName`, и `UnitPrice` поля BoundFields и CheckBoxField более не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="5eed5-126">Next, configure the GridView such that it only contains the `ProductName`, `CategoryName`, `SupplierName`, and `UnitPrice` BoundFields and the Discontinued CheckBoxField.</span></span> <span data-ttu-id="5eed5-127">Наконец, настройте GridView для поддержки сортировки, установив флажок Включить сортировку в смарт-теге GridView s (или установив его `AllowSorting` свойства `true`).</span><span class="sxs-lookup"><span data-stu-id="5eed5-127">Finally, configure the GridView to support sorting by checking the Enable Sorting checkbox in the GridView s smart tag (or by setting its `AllowSorting` property to `true`).</span></span> <span data-ttu-id="5eed5-128">После внесения этих изменений `CustomSortingUI.aspx` страница, декларативная разметка должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="5eed5-128">After making these additions to the `CustomSortingUI.aspx` page, the declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](creating-a-customized-sorting-user-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="5eed5-129">Отвлекитесь и просмотрите полученный промежуточный результат в браузере.</span><span class="sxs-lookup"><span data-stu-id="5eed5-129">Take a moment to view our progress thus far in a browser.</span></span> <span data-ttu-id="5eed5-130">Рис. 2 показан сортируемый GridView при отсортированы по категории в алфавитном порядке.</span><span class="sxs-lookup"><span data-stu-id="5eed5-130">Figure 2 shows the sortable GridView when its data is sorted by category in alphabetical order.</span></span>


<span data-ttu-id="5eed5-131">[![S поддерживает сортировку GridView отсортированы по категории](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-131">[![The Sortable GridView s Data is Ordered by Category](creating-a-customized-sorting-user-interface-cs/_static/image5.png)](creating-a-customized-sorting-user-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="5eed5-132">**Рис. 2**: S поддерживает сортировку GridView, данные упорядочиваются по категориям ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-132">**Figure 2**: The Sortable GridView s Data is Ordered by Category ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image6.png))</span></span>


## <a name="step-2-exploring-techniques-for-adding-the-separator-rows"></a><span data-ttu-id="5eed5-133">Шаг 2. Изучение методов для добавления разделяющих строк</span><span class="sxs-lookup"><span data-stu-id="5eed5-133">Step 2: Exploring Techniques for Adding the Separator Rows</span></span>

<span data-ttu-id="5eed5-134">С помощью универсального, сортируемой GridView полный остается только чтобы иметь возможность добавить разделяющие строки в GridView перед каждой уникальной отсортированный группы.</span><span class="sxs-lookup"><span data-stu-id="5eed5-134">With the generic, sortable GridView complete, all that remains is to be able to add the separator rows in the GridView before each unique sorted group.</span></span> <span data-ttu-id="5eed5-135">Но как можно такие строки внедряться в GridView?</span><span class="sxs-lookup"><span data-stu-id="5eed5-135">But how can such rows be injected into the GridView?</span></span> <span data-ttu-id="5eed5-136">По сути нам нужна для прохода по строкам s GridView, определить отличия между значениями в одном из столбцов и затем добавить соответствующие разделяющие строки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-136">Essentially, we need to iterate through the GridView s rows, determine where the differences occur between the values in the sorted column, and then add the appropriate separator row.</span></span> <span data-ttu-id="5eed5-137">Размышляя об этой проблеме, кажется естественным, что решение лежит где-то в GridView s `RowDataBound` обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="5eed5-137">When thinking about this problem, it seems natural that the solution lies somewhere in the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="5eed5-138">Как уже говорилось в [форматирование на основе по данным](../custom-formatting/custom-formatting-based-upon-data-cs.md) руководства, этот обработчик событий обычно используется при форматировании на уровне строк на основе строк данных.</span><span class="sxs-lookup"><span data-stu-id="5eed5-138">As we discussed in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial, this event handler is commonly used when applying row-level formatting based on the row s data.</span></span> <span data-ttu-id="5eed5-139">Тем не менее `RowDataBound` не сможет помочь нам, как строки нельзя добавить к элементу GridView программным способом из этого обработчика событий.</span><span class="sxs-lookup"><span data-stu-id="5eed5-139">However, the `RowDataBound` event handler is not the solution here, as rows cannot be added to the GridView programmatically from this event handler.</span></span> <span data-ttu-id="5eed5-140">GridView s `Rows` коллекции, на самом деле, только для чтения.</span><span class="sxs-lookup"><span data-stu-id="5eed5-140">The GridView s `Rows` collection, in fact, is read-only.</span></span>

<span data-ttu-id="5eed5-141">Чтобы добавить дополнительные строки GridView у нас есть три варианта:</span><span class="sxs-lookup"><span data-stu-id="5eed5-141">To add additional rows to the GridView we have three choices:</span></span>

- <span data-ttu-id="5eed5-142">Добавить разделяющие метаданные к фактическим данным, привязанный к элементу GridView</span><span class="sxs-lookup"><span data-stu-id="5eed5-142">Add these metadata separator rows to the actual data that is bound to the GridView</span></span>
- <span data-ttu-id="5eed5-143">После привязки GridView к данным, добавьте дополнительные `TableRow` экземпляров GridView s управлять сбором</span><span class="sxs-lookup"><span data-stu-id="5eed5-143">After the GridView has been bound to the data, add additional `TableRow` instances to the GridView s control collection</span></span>
- <span data-ttu-id="5eed5-144">Создание пользовательского серверного элемента управления, который расширяет элемент управления GridView и переопределяющий методы, которые отвечают за создание структуры s GridView</span><span class="sxs-lookup"><span data-stu-id="5eed5-144">Create a custom server control that extends the GridView control and overrides those methods responsible for constructing the GridView s structure</span></span>

<span data-ttu-id="5eed5-145">Создание пользовательского серверного элемента управления бы лучше, если эта функциональность была нужна на многих веб-страницах или в несколько веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="5eed5-145">Creating a custom server control would be the best approach if this functionality was needed on many web pages or across several websites.</span></span> <span data-ttu-id="5eed5-146">Тем не менее он требует написания совсем немного кода и подробного разъяснения глубине о внутренних механизмах s GridView.</span><span class="sxs-lookup"><span data-stu-id="5eed5-146">However, it would entail quite a bit of code and a thorough exploration into the depths of the GridView s internal workings.</span></span> <span data-ttu-id="5eed5-147">Таким образом мы выберем соответствующий параметр в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="5eed5-147">Therefore, we'll not consider that option for this tutorial.</span></span>

<span data-ttu-id="5eed5-148">Две другие параметры добавление разделяющих строк к фактических данных, привязываются к GridView и управления в коллекцию элементов управления GridView s после его был привязан — по-разному подходят к задаче и заслуживают отдельной дискуссии.</span><span class="sxs-lookup"><span data-stu-id="5eed5-148">The other two options adding separator rows to the actual data being bound to the GridView and manipulating the GridView s control collection after its been bound - attack the problem differently and merit a discussion.</span></span>

## <a name="adding-rows-to-the-data-bound-to-the-gridview"></a><span data-ttu-id="5eed5-149">Добавление строк к данным, связанным с элементом GridView</span><span class="sxs-lookup"><span data-stu-id="5eed5-149">Adding Rows to the Data Bound to the GridView</span></span>

<span data-ttu-id="5eed5-150">Если GridView привязан к источнику данных, он создает `GridViewRow` для каждой записи, возвращаемых источником данных.</span><span class="sxs-lookup"><span data-stu-id="5eed5-150">When the GridView is bound to a data source, it creates a `GridViewRow` for each record returned by the data source.</span></span> <span data-ttu-id="5eed5-151">Таким образом можно ввести необходимые разделяющие строки путем добавления разделитель записей в источнике данных до их привязки к GridView.</span><span class="sxs-lookup"><span data-stu-id="5eed5-151">Therefore, we can inject the needed separator rows by adding separator records to the data source before binding it to the GridView.</span></span> <span data-ttu-id="5eed5-152">Этот принцип показан на рис. 3.</span><span class="sxs-lookup"><span data-stu-id="5eed5-152">Figure 3 illustrates this concept.</span></span>


![Первый вариант предполагает добавление разделяющих строк к источнику данных](creating-a-customized-sorting-user-interface-cs/_static/image7.png)

<span data-ttu-id="5eed5-154">**Рис. 3**: Первый вариант предполагает добавление разделяющих строк к источнику данных</span><span class="sxs-lookup"><span data-stu-id="5eed5-154">**Figure 3**: One Technique Involves Adding Separator Rows to the Data Source</span></span>


<span data-ttu-id="5eed5-155">Я использую термин разделитель записей в кавычки, поскольку нет специальной записи; Вместо этого мы должны как-либо пометить конкретной записи в источнике данных служит в качестве разделителя, а не обычной строки данных.</span><span class="sxs-lookup"><span data-stu-id="5eed5-155">I use the term separator records in quotes because there is no special separator record; rather, we must somehow flag that a particular record in the data source serves as a separator rather than a normal data row.</span></span> <span data-ttu-id="5eed5-156">В нашем примере мы повторно привязки `ProductsDataTable` экземпляра к GridView, который представляет собой `ProductRows`.</span><span class="sxs-lookup"><span data-stu-id="5eed5-156">For our examples, we re binding a `ProductsDataTable` instance to the GridView, which is composed of `ProductRows`.</span></span> <span data-ttu-id="5eed5-157">Пометить запись как за строкой-разделителем, задав его `CategoryID` свойства `-1` (поскольку такие t удалось значение обычно существует).</span><span class="sxs-lookup"><span data-stu-id="5eed5-157">We might flag a record as a separator row by setting its `CategoryID` property to `-1` (since such a value couldn t exist normally).</span></span>

<span data-ttu-id="5eed5-158">Чтобы реализовать этот подход d необходимо выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="5eed5-158">To utilize this technique we d need to perform the following steps:</span></span>

1. <span data-ttu-id="5eed5-159">Программно получить данные, привязываемые к элементу GridView ( `ProductsDataTable` экземпляра)</span><span class="sxs-lookup"><span data-stu-id="5eed5-159">Programmatically retrieve the data to bind to the GridView (a `ProductsDataTable` instance)</span></span>
2. <span data-ttu-id="5eed5-160">Сортировать данные с учетом GridView s `SortExpression` и `SortDirection` свойства</span><span class="sxs-lookup"><span data-stu-id="5eed5-160">Sort the data based on the GridView s `SortExpression` and `SortDirection` properties</span></span>
3. <span data-ttu-id="5eed5-161">Итерации по `ProductsRows` в `ProductsDataTable`, которым нужен где лежат различия в одном из столбцов</span><span class="sxs-lookup"><span data-stu-id="5eed5-161">Iterate through the `ProductsRows` in the `ProductsDataTable`, looking for where the differences in the sorted column lie</span></span>
4. <span data-ttu-id="5eed5-162">На границе каждой группы, внедрить разделяющих записей `ProductsRow` экземпляра в объект DataTable, один, где он s `CategoryID` присвоено `-1` (или любым другим способом было решено после пометить запись как запись разделитель)</span><span class="sxs-lookup"><span data-stu-id="5eed5-162">At each group boundary, inject a separator record `ProductsRow` instance into the DataTable, one that has it s `CategoryID` set to `-1` (or whatever designation was decided upon to mark a record as a separator record )</span></span>
5. <span data-ttu-id="5eed5-163">После добавления разделяющих строк, программно привязать данные к GridView</span><span class="sxs-lookup"><span data-stu-id="5eed5-163">After injecting the separator rows, programmatically bind the data to the GridView</span></span>

<span data-ttu-id="5eed5-164">Помимо этих пяти шагов d также необходимо предоставить обработчик событий для GridView s `RowDataBound` событий.</span><span class="sxs-lookup"><span data-stu-id="5eed5-164">In addition to these five steps, we d also need to provide an event handler for the GridView s `RowDataBound` event.</span></span> <span data-ttu-id="5eed5-165">Здесь мы d проверка каждой `DataRow` и определить, было ли разделитель строк, один которого `CategoryID` был `-1`.</span><span class="sxs-lookup"><span data-stu-id="5eed5-165">Here, we d check each `DataRow` and determine if it was a separator row, one whose `CategoryID` setting was `-1`.</span></span> <span data-ttu-id="5eed5-166">Если Да, d, скорее всего, необходимо изменить форматирование или текст, отображаемый в ячейках.</span><span class="sxs-lookup"><span data-stu-id="5eed5-166">If so, we d probably want to adjust its formatting or the text displayed in the cell(s).</span></span>

<span data-ttu-id="5eed5-167">При использовании этого метода для вставки границ групп сортировки нам требуется немного больше усилий, чем описанные выше, так как необходимо также предоставить обработчик событий для GridView s `Sorting` событий и следить за `SortExpression` и `SortDirection` значения.</span><span class="sxs-lookup"><span data-stu-id="5eed5-167">Using this technique for injecting the sorting group boundaries requires a bit more work than outlined above, as you need to also provide an event handler for the GridView s `Sorting` event and keep track of the `SortExpression` and `SortDirection` values.</span></span>

## <a name="manipulating-the-gridview-s-control-collection-after-it-s-been-databound"></a><span data-ttu-id="5eed5-168">Управление GridView s управлять сбором после него s были с привязкой к данным</span><span class="sxs-lookup"><span data-stu-id="5eed5-168">Manipulating the GridView s Control Collection After It s Been Databound</span></span>

<span data-ttu-id="5eed5-169">Вместо обращения к данным до их привязки к элементу GridView, можно добавить разделяющие строки *после* привязки данных к GridView.</span><span class="sxs-lookup"><span data-stu-id="5eed5-169">Rather than messaging the data before binding it to the GridView, we can add the separator rows *after* the data has been bound to the GridView.</span></span> <span data-ttu-id="5eed5-170">В процессе привязки данных создается иерархия s иерархию элементов управления GridView, который на самом деле является просто `Table` экземпляр, состоящие из коллекции строк, каждая из которых представляет собой коллекцию ячеек.</span><span class="sxs-lookup"><span data-stu-id="5eed5-170">The process of data binding builds up the GridView s control hierarchy, which in reality is simply a `Table` instance composed of a collection of rows, each of which is composed of a collection of cells.</span></span> <span data-ttu-id="5eed5-171">В частности, содержит коллекцию элементов управления GridView s `Table` в качестве корня `GridViewRow` (который является производным от `TableRow` класс) для каждой записи в `DataSource` привязываются к GridView и `TableCell` объекта в каждом `GridViewRow` экземпляр для каждого поля данных в `DataSource`.</span><span class="sxs-lookup"><span data-stu-id="5eed5-171">Specifically, the GridView s control collection contains a `Table` object at its root, a `GridViewRow` (which is derived from the `TableRow` class) for each record in the `DataSource` bound to the GridView, and a `TableCell` object in each `GridViewRow` instance for each data field in the `DataSource`.</span></span>

<span data-ttu-id="5eed5-172">Чтобы добавить разделяющие строки между всеми группами сортировки, мы может напрямую манипулировать этой иерархии элементов управления после его создания.</span><span class="sxs-lookup"><span data-stu-id="5eed5-172">To add separator rows between each sorting group, we can directly manipulate this control hierarchy once it has been created.</span></span> <span data-ttu-id="5eed5-173">Мы может быть уверены в том, что иерархии элементов управления GridView s был создан в последний раз, когда страница отображается.</span><span class="sxs-lookup"><span data-stu-id="5eed5-173">We can be confident that the GridView s control hierarchy has been created for the last time by the time the page is being rendered.</span></span> <span data-ttu-id="5eed5-174">Таким образом, переопределить метод `Page` класс s `Render` метода, после чего иерархии конечный элемент управления GridView s обновляется для включения ней необходимые разделяющие строки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-174">Therefore, this approach overrides the `Page` class s `Render` method, at which point the GridView s final control hierarchy is updated to include the needed separator rows.</span></span> <span data-ttu-id="5eed5-175">Этот процесс показан на рис. 4.</span><span class="sxs-lookup"><span data-stu-id="5eed5-175">Figure 4 illustrates this process.</span></span>


<span data-ttu-id="5eed5-176">[![Второй подход предполагает изменение иерархии элементов управления GridView s](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-176">[![An Alternate Technique Manipulates the GridView s Control Hierarchy](creating-a-customized-sorting-user-interface-cs/_static/image9.png)](creating-a-customized-sorting-user-interface-cs/_static/image8.png)</span></span>

<span data-ttu-id="5eed5-177">**Рис. 4**: Второй подход предполагает изменение иерархии элемента GridView s ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-177">**Figure 4**: An Alternate Technique Manipulates the GridView s Control Hierarchy ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image10.png))</span></span>


<span data-ttu-id="5eed5-178">В этом учебнике мы будем использовать этот метод для настройки сортировки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-178">For this tutorial, we'll use this latter approach to customize the sorting user experience.</span></span>

> [!NOTE]
> <span data-ttu-id="5eed5-179">Код я m представления в этом руководстве основан на примере, приведенном на [Keiski Теему](http://aspadvice.com/blogs/joteke/default.aspx) запись в блоге s [настраиваем группирования сортировки GridView](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx).</span><span class="sxs-lookup"><span data-stu-id="5eed5-179">The code I m presenting in this tutorial is based on the example provided in [Teemu Keiski](http://aspadvice.com/blogs/joteke/default.aspx) s blog entry, [Playing a Bit with GridView Sort Grouping](http://aspadvice.com/blogs/joteke/archive/2006/02/11/15130.aspx).</span></span>


## <a name="step-3-adding-the-separator-rows-to-the-gridview-s-control-hierarchy"></a><span data-ttu-id="5eed5-180">Шаг 3. Добавление разделяющих строк к иерархии элементов управления GridView s</span><span class="sxs-lookup"><span data-stu-id="5eed5-180">Step 3: Adding the Separator Rows to the GridView s Control Hierarchy</span></span>

<span data-ttu-id="5eed5-181">Поскольку мы хотим только добавление разделяющих строк к иерархии элементов управления GridView s после создания собственной иерархии элементов управления и создания в последний раз посещении страницы, мы хотим выполнить это дополнение в конце жизненного цикла страницы, но до фактического c GridView Иерархия с записными книжками визуализирован в формат HTML.</span><span class="sxs-lookup"><span data-stu-id="5eed5-181">Since we only want to add the separator rows to the GridView s control hierarchy after its control hierarchy has been created and created for the last time on that page visit, we want to perform this addition at the end of the page lifecycle, but before the actual GridView control hierarchy has been rendered into HTML.</span></span> <span data-ttu-id="5eed5-182">— Последний момент скорость этого можно достичь `Page` класс s `Render` событие, которое мы переопределим наш класс кода, используя следующую сигнатуру метода:</span><span class="sxs-lookup"><span data-stu-id="5eed5-182">The latest possible point at which we can accomplish this is the `Page` class s `Render` event, which we can override in our code-behind class using the following method signature:</span></span>


[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample2.cs)]

<span data-ttu-id="5eed5-183">Когда `Page` класс исходное `Render` вызывается метод `base.Render(writer)` всех элементов управления на странице будут отображаться, создание разметка, соответствующая иерархии элемента.</span><span class="sxs-lookup"><span data-stu-id="5eed5-183">When the `Page` class s original `Render` method is invoked `base.Render(writer)` each of the controls in the page will be rendered, generating the markup based on their control hierarchy.</span></span> <span data-ttu-id="5eed5-184">Поэтому крайне важно что нам нужно вызвать `base.Render(writer)`, так что страница отображается, и что мы управления GridView s управления до вызова метода `base.Render(writer)`, так что иерархию элементов управления GridView s перед ним были добавлены разделяющих строк s был к просмотру.</span><span class="sxs-lookup"><span data-stu-id="5eed5-184">Therefore it is imperative that we both call `base.Render(writer)`, so that the page is rendered, and that we manipulate the GridView s control hierarchy prior to calling `base.Render(writer)`, so that the separator rows have been added to the GridView s control hierarchy before it s been rendered.</span></span>

<span data-ttu-id="5eed5-185">Чтобы внедрить заголовки групп необходимо сначала убедитесь, что пользователь запросил что сортироваться данные.</span><span class="sxs-lookup"><span data-stu-id="5eed5-185">To inject the sort group headers we first need to ensure that the user has requested that the data be sorted.</span></span> <span data-ttu-id="5eed5-186">По умолчанию не выполнена сортировка содержимого s GridView, и таким образом мы кое t требуется ввести любую группу, добавлять заголовки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-186">By default, the GridView s contents are not sorted, and therefore we don t need to enter any group sorting headers.</span></span>

> [!NOTE]
> <span data-ttu-id="5eed5-187">GridView для сортировки по одному из столбцов при первой загрузке страницы, вызвать GridView s `Sort` метод при первом посещении страницы (но не при последующих обратных передачах).</span><span class="sxs-lookup"><span data-stu-id="5eed5-187">If you want the GridView to be sorted by a particular column when the page is first loaded, call the GridView s `Sort` method on the first page visit (but not on subsequent postbacks).</span></span> <span data-ttu-id="5eed5-188">Для этого необходимо добавить этот вызов в `Page_Load` обработчик событий в пределах `if (!Page.IsPostBack)` условного.</span><span class="sxs-lookup"><span data-stu-id="5eed5-188">To accomplish this, add this call in the `Page_Load` event handler within an `if (!Page.IsPostBack)` conditional.</span></span> <span data-ttu-id="5eed5-189">Вернуться к [разбиение по страницам и сортировка данных отчета](paging-and-sorting-report-data-cs.md) сведений дополнительную информацию о `Sort` метод.</span><span class="sxs-lookup"><span data-stu-id="5eed5-189">Refer back to the [Paging and Sorting Report Data](paging-and-sorting-report-data-cs.md) tutorial information for more on the `Sort` method.</span></span>


<span data-ttu-id="5eed5-190">При условии, что данные были отсортированы, теперь нам необходимо определить столбец данные были отсортированы по, и затем перебрать все строки, поиск различий в этом столбце s значения.</span><span class="sxs-lookup"><span data-stu-id="5eed5-190">Assuming that the data has been sorted, our next task is to determine what column the data was sorted by and then to scan the rows looking for differences in that column s values.</span></span> <span data-ttu-id="5eed5-191">Следующий код гарантирует, что данные были отсортированы и обнаружить соответствующий столбец, по которому были отсортированы данные:</span><span class="sxs-lookup"><span data-stu-id="5eed5-191">The following code ensures that the data has been sorted and finds the column by which the data has been sorted:</span></span>


[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample3.cs)]

<span data-ttu-id="5eed5-192">Если у GridView есть еще быть отсортированы, GridView s `SortExpression` свойство будет не задано.</span><span class="sxs-lookup"><span data-stu-id="5eed5-192">If the GridView has yet to be sorted, the GridView s `SortExpression` property will not have been set.</span></span> <span data-ttu-id="5eed5-193">Таким образом необходимо только добавить разделяющие строки, если это свойство имеет какое-либо значение.</span><span class="sxs-lookup"><span data-stu-id="5eed5-193">Therefore, we only want to add the separator rows if this property has some value.</span></span> <span data-ttu-id="5eed5-194">В этом случае мы затем необходимо определить индекс столбца, по которому сортировались данные.</span><span class="sxs-lookup"><span data-stu-id="5eed5-194">If it does, we next need to determine the index of the column by which the data was sorted.</span></span> <span data-ttu-id="5eed5-195">Это достигается путем циклическое GridView s `Columns` и находим столбец, `SortExpression` свойство имеет значение GridView s `SortExpression` свойство.</span><span class="sxs-lookup"><span data-stu-id="5eed5-195">This is accomplished by looping through the GridView s `Columns` collection, searching for the column whose `SortExpression` property equals the GridView s `SortExpression` property.</span></span> <span data-ttu-id="5eed5-196">Помимо индекса столбца s, мы получаем `HeaderText` свойство, которое будет использоваться для отображения разделяющих строк.</span><span class="sxs-lookup"><span data-stu-id="5eed5-196">In addition to the column s index, we also grab the `HeaderText` property, which is used when displaying the separator rows.</span></span>

<span data-ttu-id="5eed5-197">С помощью индекс столбца, по которому сортируется данные последним шагом является перебрать все строки элемента GridView.</span><span class="sxs-lookup"><span data-stu-id="5eed5-197">With the index of the column by which the data is sorted, the final step is to enumerate the rows of the GridView.</span></span> <span data-ttu-id="5eed5-198">Для каждой строки, нам нужно определить, отличается ли значение s отсортированного столбца с предыдущего значения s столбец s отсортированных строк.</span><span class="sxs-lookup"><span data-stu-id="5eed5-198">For each row we need to determine whether the sorted column s value differs from the previous row s sorted column s value.</span></span> <span data-ttu-id="5eed5-199">Если таким образом, нам нужно внедрять новый `GridViewRow` экземпляра в иерархии элементов управления.</span><span class="sxs-lookup"><span data-stu-id="5eed5-199">If so, we need to inject a new `GridViewRow` instance into the control hierarchy.</span></span> <span data-ttu-id="5eed5-200">Это выполняется следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="5eed5-200">This is accomplished with the following code:</span></span>


[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample4.cs)]

<span data-ttu-id="5eed5-201">Этот код начинается с программного обращения `Table` объект найден в корне иерархии элементов управления GridView s и создания строковой переменной с именем `lastValue`.</span><span class="sxs-lookup"><span data-stu-id="5eed5-201">This code starts by programmatically referencing the `Table` object found at the root of the GridView s control hierarchy and creating a string variable named `lastValue`.</span></span> <span data-ttu-id="5eed5-202">`lastValue` используется для сравнения текущее значение столбца строки s отсортированы с предыдущим значением строк.</span><span class="sxs-lookup"><span data-stu-id="5eed5-202">`lastValue` is used to compare the current row s sorted column value with the previous row s value.</span></span> <span data-ttu-id="5eed5-203">Далее, GridView s `Rows` коллекция перечисляется и для каждой строки значение в отсортированном столбце сохраняется в `currentValue` переменной.</span><span class="sxs-lookup"><span data-stu-id="5eed5-203">Next, the GridView s `Rows` collection is enumerated and for each row the value of the sorted column is stored in the `currentValue` variable.</span></span>

> [!NOTE]
> <span data-ttu-id="5eed5-204">Для определения значения столбца сортируются s конкретной строки, мы используем свойство ячейки s `Text` свойство.</span><span class="sxs-lookup"><span data-stu-id="5eed5-204">To determine the value of the particular row s sorted column I use the cell s `Text` property.</span></span> <span data-ttu-id="5eed5-205">Это хорошо работает для полей BoundField, но будут не работает надлежащим образом, для поля TemplateField, CheckBoxFields и так далее.</span><span class="sxs-lookup"><span data-stu-id="5eed5-205">This works well for BoundFields, but will not work as desired for TemplateFields, CheckBoxFields, and so on.</span></span> <span data-ttu-id="5eed5-206">Мы рассмотрим к решению для альтернативного полей GridView чуть ниже.</span><span class="sxs-lookup"><span data-stu-id="5eed5-206">We'll look at how to account for alternate GridView fields shortly.</span></span>


<span data-ttu-id="5eed5-207">`currentValue` И `lastValue` сравниваются.</span><span class="sxs-lookup"><span data-stu-id="5eed5-207">The `currentValue` and `lastValue` variables are then compared.</span></span> <span data-ttu-id="5eed5-208">Если они не совпадают, нам нужно добавить строку разделителя для иерархию элементов управления.</span><span class="sxs-lookup"><span data-stu-id="5eed5-208">If they differ we need to add a new separator row to the control hierarchy.</span></span> <span data-ttu-id="5eed5-209">Это достигается путем определения индекс `GridViewRow` в `Table` объект s `Rows` , создаем новые `GridViewRow` и `TableCell` экземпляров, а затем добавив `TableCell` и `GridViewRow` для иерархии элементов управления.</span><span class="sxs-lookup"><span data-stu-id="5eed5-209">This is accomplished by determining the index of the `GridViewRow` in the `Table` object s `Rows` collection, creating new `GridViewRow` and `TableCell` instances, and then adding the `TableCell` and `GridViewRow` to the control hierarchy.</span></span>

<span data-ttu-id="5eed5-210">Обратите внимание, что разделителя в строке s одиночному `TableCell` форматируется таким образом, что занимает всю ширину элемента GridView, форматируется с использованием `SortHeaderRowStyle` класс CSS и имеет его `Text` , которое содержит группы имя свойства (такие как категории) и Значение s группы (например, «Напитки»).</span><span class="sxs-lookup"><span data-stu-id="5eed5-210">Note that the separator row s lone `TableCell` is formatted such that it spans the entire width of the GridView, is formatted using the `SortHeaderRowStyle` CSS class, and has its `Text` property such that it shows both the sort group name (such as Category ) and the group s value (such as Beverages ).</span></span> <span data-ttu-id="5eed5-211">Наконец `lastValue` присваивается значение `currentValue`.</span><span class="sxs-lookup"><span data-stu-id="5eed5-211">Finally, `lastValue` is updated to the value of `currentValue`.</span></span>

<span data-ttu-id="5eed5-212">Класс CSS, используемый для форматирования заголовка группы `SortHeaderRowStyle` должен быть указан в `Styles.css` файл.</span><span class="sxs-lookup"><span data-stu-id="5eed5-212">The CSS class used to format the sorting group header row `SortHeaderRowStyle` needs to be specified in the `Styles.css` file.</span></span> <span data-ttu-id="5eed5-213">Вы можете использовать любые параметры стиля подходят для вас; Я использовал следующий:</span><span class="sxs-lookup"><span data-stu-id="5eed5-213">Feel free to use whatever style settings appeal to you; I used the following:</span></span>


[!code-css[Main](creating-a-customized-sorting-user-interface-cs/samples/sample5.css)]

<span data-ttu-id="5eed5-214">С помощью кодовой страницы, интерфейс сортировки добавляет заголовки групп при сортировке по любой BoundField (см. рис. 5 показан снимок экрана при сортировке по поставщикам).</span><span class="sxs-lookup"><span data-stu-id="5eed5-214">With the current code, the sorting interface adds sort group headers when sorting by any BoundField (see Figure 5, which shows a screenshot when sorting by supplier).</span></span> <span data-ttu-id="5eed5-215">Тем не менее при сортировке по полям других типов (например, CheckBoxField или TemplateField), заголовки групп брать будет неоткуда (см. рис. 6) являются.</span><span class="sxs-lookup"><span data-stu-id="5eed5-215">However, when sorting by any other field type (such as a CheckBoxField or TemplateField), the sort group headers are nowhere to be found (see Figure 6).</span></span>


<span data-ttu-id="5eed5-216">[![Интерфейс сортировки включает заголовки сортировки групп при сортировке по полю BoundFields](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-216">[![The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields](creating-a-customized-sorting-user-interface-cs/_static/image12.png)](creating-a-customized-sorting-user-interface-cs/_static/image11.png)</span></span>

<span data-ttu-id="5eed5-217">**Рис. 5**: Сортировка интерфейс включает сортировки группы заголовки при сортировке по полю BoundFields ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-217">**Figure 5**: The Sorting Interface Includes Sort Group Headers When Sorting by BoundFields ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image13.png))</span></span>


<span data-ttu-id="5eed5-218">[![Отсутствует при сортировке по полю CheckBoxField заголовки групп не отображаются](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-218">[![The Sort Group Headers are Missing When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image15.png)](creating-a-customized-sorting-user-interface-cs/_static/image14.png)</span></span>

<span data-ttu-id="5eed5-219">**Рис. 6**: Отсутствует при сортировке по полю CheckBoxField заголовки групп не отображаются ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-219">**Figure 6**: The Sort Group Headers are Missing When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image16.png))</span></span>


<span data-ttu-id="5eed5-220">При сортировке по полю CheckBoxField заголовки групп отсутствуют, так как код в настоящее время использует только `TableCell` s `Text` свойство для определения значения в отсортированном столбце для каждой строки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-220">The reason the sort group headers are missing when sorting by a CheckBoxField is because the code currently uses just the `TableCell` s `Text` property to determine the value of the sorted column for each row.</span></span> <span data-ttu-id="5eed5-221">Для CheckBoxFields `TableCell` s `Text` свойство является пустой строкой; вместо этого значение можно получить через флажок веб-элемент, который находится в пределах `TableCell` s `Controls` коллекции.</span><span class="sxs-lookup"><span data-stu-id="5eed5-221">For CheckBoxFields, the `TableCell` s `Text` property is an empty string; instead, the value is available through a CheckBox Web control that resides within the `TableCell` s `Controls` collection.</span></span>

<span data-ttu-id="5eed5-222">Чтобы обрабатывать поля, кроме полей BoundField, нам нужно дополнить код где `currentValue` переменной присваивается проверить существование флажка в `TableCell` s `Controls` коллекции.</span><span class="sxs-lookup"><span data-stu-id="5eed5-222">To handle field types other than BoundFields, we need to augment the code where the `currentValue` variable is assigned to check for the existence of a CheckBox in the `TableCell` s `Controls` collection.</span></span> <span data-ttu-id="5eed5-223">Вместо использования `currentValue = gvr.Cells[sortColumnIndex].Text`, замените этот код на следующий:</span><span class="sxs-lookup"><span data-stu-id="5eed5-223">Instead of using `currentValue = gvr.Cells[sortColumnIndex].Text`, replace this code with the following:</span></span>


[!code-csharp[Main](creating-a-customized-sorting-user-interface-cs/samples/sample6.cs)]

<span data-ttu-id="5eed5-224">Этот код выполняет проверку ячейку `TableCell` для текущей строки определить наличие любых элементов управления в `Controls` коллекции.</span><span class="sxs-lookup"><span data-stu-id="5eed5-224">This code examines the sorted column `TableCell` for the current row to determine if there are any controls in the `Controls` collection.</span></span> <span data-ttu-id="5eed5-225">Если есть, и первый элемент управления CheckBox, `currentValue` переменной устанавливается значение Да или нет, в зависимости от s флажок `Checked` свойство.</span><span class="sxs-lookup"><span data-stu-id="5eed5-225">If there are, and the first control is a CheckBox, the `currentValue` variable is set to Yes or No, depending on the CheckBox s `Checked` property.</span></span> <span data-ttu-id="5eed5-226">В противном случае — значение берется из `TableCell` s `Text` свойство.</span><span class="sxs-lookup"><span data-stu-id="5eed5-226">Otherwise, the value is taken from the `TableCell` s `Text` property.</span></span> <span data-ttu-id="5eed5-227">Эту логику можно реплицировать в сортировке любого поля TemplateField, которые могут существовать в GridView.</span><span class="sxs-lookup"><span data-stu-id="5eed5-227">This logic can be replicated to handle sorting for any TemplateFields that may exist in the GridView.</span></span>

<span data-ttu-id="5eed5-228">Выше код, заголовки групп, включая теперь при сортировке по CheckBoxField более не поддерживается (см. рис. 7).</span><span class="sxs-lookup"><span data-stu-id="5eed5-228">With the above code addition, the sort group headers are now present when sorting by the Discontinued CheckBoxField (see Figure 7).</span></span>


<span data-ttu-id="5eed5-229">[![Теперь есть при сортировке по полю CheckBoxField заголовки групп не отображаются](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5eed5-229">[![The Sort Group Headers are Now Present When Sorting a CheckBoxField](creating-a-customized-sorting-user-interface-cs/_static/image18.png)](creating-a-customized-sorting-user-interface-cs/_static/image17.png)</span></span>

<span data-ttu-id="5eed5-230">**Рис. 7**: Теперь есть при сортировке по полю CheckBoxField заголовки групп не отображаются ([Просмотр полноразмерного изображения](creating-a-customized-sorting-user-interface-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="5eed5-230">**Figure 7**: The Sort Group Headers are Now Present When Sorting a CheckBoxField ([Click to view full-size image](creating-a-customized-sorting-user-interface-cs/_static/image19.png))</span></span>


> [!NOTE]
> <span data-ttu-id="5eed5-231">Если у вас есть продукты с `NULL` базы данных значения для `CategoryID`, `SupplierID`, или `UnitPrice` поля, эти значения будут отображаться как пустые строки в GridView по умолчанию, то есть текст разделителя строк для этих продуктов с `NULL`будет выглядеть как категория: (то есть существует s нет имя после категории: с категорией, такие как: «Напитки»).</span><span class="sxs-lookup"><span data-stu-id="5eed5-231">If you have products with `NULL` database values for the `CategoryID`, `SupplierID`, or `UnitPrice` fields, those values will appear as empty strings in the GridView by default, meaning the separator row s text for those products with `NULL` values will read like Category: (that is, there s no name after Category: like with Category: Beverages ).</span></span> <span data-ttu-id="5eed5-232">Если вы не хотите отображаемые здесь вы можете задать полей BoundFields [ `NullDisplayText` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx) текст должен отображаться, или можно добавить условный оператор в метод Render, при назначении `currentValue` для разделителя Строка s `Text` свойство.</span><span class="sxs-lookup"><span data-stu-id="5eed5-232">If you want a value displayed here you can either set the BoundFields [`NullDisplayText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx) to the text you want displayed or you can add a conditional statement in the Render method when assigning the `currentValue` to the separator row s `Text` property.</span></span>


## <a name="summary"></a><span data-ttu-id="5eed5-233">Сводка</span><span class="sxs-lookup"><span data-stu-id="5eed5-233">Summary</span></span>

<span data-ttu-id="5eed5-234">GridView включает множество встроенных возможностей для настройки интерфейса сортировки.</span><span class="sxs-lookup"><span data-stu-id="5eed5-234">The GridView does not include many built-in options for customizing the sorting interface.</span></span> <span data-ttu-id="5eed5-235">Тем не менее, применив немного кода нижнего уровня его можно настроить иерархию элементов управления GridView s для создания более функциональный интерфейс s.</span><span class="sxs-lookup"><span data-stu-id="5eed5-235">However, with a bit of low-level code, it s possible to tweak the GridView s control hierarchy to create a more customized interface.</span></span> <span data-ttu-id="5eed5-236">В этом руководстве мы увидели, как добавить строку разделителя группы сортировки для сортируемого GridView, который позволяет быстрее находить отдельные группы и этих групп границ.</span><span class="sxs-lookup"><span data-stu-id="5eed5-236">In this tutorial we saw how to add a sort group separator row for a sortable GridView, which more easily identifies the distinct groups and those groups boundaries.</span></span> <span data-ttu-id="5eed5-237">Дополнительные примеры доработки интерфейсов, ознакомьтесь с [Скотт Гатри](https://weblogs.asp.net/scottgu/) s [несколько ASP.NET 2.0 GridView сортировки советы и рекомендации](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx) запись в блоге.</span><span class="sxs-lookup"><span data-stu-id="5eed5-237">For additional examples of customized sorting interfaces, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/) s [A Few ASP.NET 2.0 GridView Sorting Tips and Tricks](https://weblogs.asp.net/scottgu/archive/2006/02/11/437995.aspx) blog entry.</span></span>

<span data-ttu-id="5eed5-238">Счастливого вам программирования!</span><span class="sxs-lookup"><span data-stu-id="5eed5-238">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5eed5-239">Об авторе</span><span class="sxs-lookup"><span data-stu-id="5eed5-239">About the Author</span></span>

<span data-ttu-id="5eed5-240">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP.NET и основатель веб- [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Microsoft с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="5eed5-240">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5eed5-241">Скотт — независимый консультант, преподаватель и автор.</span><span class="sxs-lookup"><span data-stu-id="5eed5-241">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5eed5-242">Его последняя книга — [ *Sams Teach ASP.NET 2.0 in 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5eed5-242">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5eed5-243">Ним можно связаться по адресу [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5eed5-243">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5eed5-244">или через его блог, который можно найти в [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5eed5-244">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5eed5-245">[Назад](sorting-custom-paged-data-cs.md)
> [Вперед](paging-and-sorting-report-data-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5eed5-245">[Previous](sorting-custom-paged-data-cs.md)
[Next](paging-and-sorting-report-data-vb.md)</span></span>
