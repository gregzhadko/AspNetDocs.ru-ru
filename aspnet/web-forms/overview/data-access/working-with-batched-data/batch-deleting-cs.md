---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Пакетное удаление (C#) | Документация Майкрософт
author: rick-anderson
description: Узнайте, как удалить несколько записей базы данных в рамках одной операции. В слой пользовательского интерфейса мы созданы на основе расширенного GridView, созданные в предыдущем шаге tut...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 9ee8834cdcf9f8ec5bbdd5188113ea28aa2a9ec7
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65134466"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="0d3f8-104">Пакетное удаление (C#)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="0d3f8-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0d3f8-106">[Скачать код](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) или [скачать PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="0d3f8-107">Узнайте, как удалить несколько записей базы данных в рамках одной операции.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="0d3f8-108">В слой пользовательского интерфейса мы созданы на основе расширенного GridView, созданные в предыдущем руководстве.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="0d3f8-109">В уровень доступа к данным мы Подведем краткие нескольких операций удаления в рамках транзакции, чтобы убедиться, что все операции удаления успешно или откатываются все операции удаления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="0d3f8-110">Вступление</span><span class="sxs-lookup"><span data-stu-id="0d3f8-110">Introduction</span></span>

<span data-ttu-id="0d3f8-111">[Предыдущем учебном курсе](batch-updating-cs.md) показано, как создать пакет редактирования интерфейса с помощью полностью изменяемого элемента управления GridView.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="0d3f8-112">В ситуациях, где пользователи часто изменяете большое количество записей одновременно, интерфейс редактирования пакета потребуется гораздо меньшее число обратных передач и клавиатуры для мыши контекст коммутаторов, тем самым повышая эффективность s конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="0d3f8-113">Аналогичным образом, этот метод полезен для страниц, где довольно часто пользователям удалять многие записи за одно действие.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="0d3f8-114">Всем, кто использовал online почтовый клиент уже знакомы с одной из наиболее распространенных пакетной службы, удаление интерфейсов: кнопку флажок в каждой строке в сетке с соответствующей удалить все флажки (см. рис. 1).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="0d3f8-115">Это руководство представляет собой довольно короткий так как мы сделали это все часть тяжелой работы в предыдущих учебных курсах, при создании веб-интерфейса и метод, чтобы удалить ряд записей в рамках одной атомарной операции продуктом.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="0d3f8-116">В [Добавление столбца GridView флажков](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) руководстве мы создали GridView с помощью столбца флажков, так и в [перенос изменений базы данных в транзакции](wrapping-database-modifications-within-a-transaction-cs.md) руководстве мы создали метод в BLL, который будет использовать транзакцию, чтобы удалить `List<T>` из `ProductID` значения.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="0d3f8-117">В этом руководстве мы созданы на основе и слияния наш предыдущий опыт для создания раздела рабочий пример удаления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>

<span data-ttu-id="0d3f8-118">[![Каждая строка включает флажок](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="0d3f8-119">**Рис. 1**: Каждая строка включает флажок ([Просмотр полноразмерного изображения](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="0d3f8-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>

## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="0d3f8-120">Шаг 1. Создание пакета, удаление интерфейса</span><span class="sxs-lookup"><span data-stu-id="0d3f8-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="0d3f8-121">Так как мы уже создали удаление интерфейса в пакете [Добавление столбца GridView флажков](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) руководстве мы просто скопировать его, чтобы `BatchDelete.aspx` вместо его создания с нуля.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="0d3f8-122">Сначала откройте `BatchDelete.aspx` странице в `BatchData` папки и `CheckBoxField.aspx` странице в `EnhancedGridView` папку.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="0d3f8-123">Из `CheckBoxField.aspx` страницы, перейдите в представление источника и скопировать разметку между `<asp:Content>` тегов, как показано на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>

<span data-ttu-id="0d3f8-124">[![Скопируйте декларативную разметку CheckBoxField.aspx в буфер обмена](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="0d3f8-125">**Рис. 2**: Скопируйте декларативную разметку `CheckBoxField.aspx` в буфер обмена ([Просмотр полноразмерного изображения](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="0d3f8-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>

<span data-ttu-id="0d3f8-126">Теперь перейдите к представлению источника в `BatchDelete.aspx` и вставьте содержимое буфера обмена в `<asp:Content>` теги.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="0d3f8-127">Также скопируйте и вставьте код из класса кода в `CheckBoxField.aspx.cs` для класса кода в `BatchDelete.aspx.cs` ( `DeleteSelectedProducts` кнопку s `Click` обработчик событий, `ToggleCheckState` метод и `Click` обработчики событий для `CheckAll` и `UncheckAll` кнопки).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="0d3f8-128">После копирования через это содержимое, `BatchDelete.aspx` вспомогательном классе страницы s должен содержать следующий код:</span><span class="sxs-lookup"><span data-stu-id="0d3f8-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="0d3f8-129">После копирования декларативную разметку и исходный код, Отвлекитесь и протестировать `BatchDelete.aspx` , просмотрев его через браузер.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="0d3f8-130">Вы должны увидеть список первых десяти продуктов в элементе управления GridView, где каждая строка содержит название продукта s, категория и цена, а также флажок элемента управления GridView.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="0d3f8-131">Должно быть три кнопки: Отметьте все, снимите все флажки и удаления выбранных продуктов.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="0d3f8-132">Кнопки проверьте все выбирает все флажки, хотя снять все очищает все флажки.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="0d3f8-133">Нажав кнопку удаления выбранных продуктов отображает сообщение со списком `ProductID` значения выбранных продуктов, но фактически не удаляются продукты.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>

<span data-ttu-id="0d3f8-134">[![Интерфейс из CheckBoxField.aspx был перемещен в BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="0d3f8-135">**Рис. 3**: Интерфейс из `CheckBoxField.aspx` был перемещен в `BatchDeleting.aspx` ([Просмотр полноразмерного изображения](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="0d3f8-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>

## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="0d3f8-136">Шаг 2. Удаление Checked продуктов, с использованием транзакций</span><span class="sxs-lookup"><span data-stu-id="0d3f8-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="0d3f8-137">С помощью пакетной службы, удаление интерфейса успешно скопировать `BatchDeleting.aspx`, что все, что остается только обновить код таким образом, чтобы удалить выбранные продукты кнопки удаляет checked продуктов, с использованием `DeleteProductsWithTransaction` метод в `ProductsBLL` класса.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="0d3f8-138">Этот метод, добавленные в [перенос изменений базы данных в транзакции](wrapping-database-modifications-within-a-transaction-cs.md) руководстве принимает в качестве входных данных `List<T>` из `ProductID` значений и удаляет каждое из которых соответствует `ProductID` в области действия транзакция.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="0d3f8-139">`DeleteSelectedProducts` Кнопку s `Click` обработчик событий в настоящее время использует следующие `foreach` цикла для перебора всех строк GridView:</span><span class="sxs-lookup"><span data-stu-id="0d3f8-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="0d3f8-140">Для каждой строки `ProductSelector` программным образом указывается флажок веб-элемента управления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="0d3f8-141">Если он установлен, строка s `ProductID` извлекается из `DataKeys` коллекции и `DeleteResults` метка s `Text` свойство обновляется для включения сообщение о том, что строка была выбрана для удаления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="0d3f8-142">Приведенный выше код фактически не удаляются все записи как вызов `ProductsBLL` класс s `Delete` метод закомментирован. Были эту логику удаления для применения, код будет удалять продукты, но не в атомарной операции.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="0d3f8-143">То есть если первый несколько удалений в последовательности выполнено успешно, но поздней не удалось (возможно, из-за нарушения ограничения внешнего ключа), будет выдано исключение, но эти продукты уже удален сохранится удаленные.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="0d3f8-144">Чтобы обеспечить атомарность, нам нужно вместо этого использовать `ProductsBLL` класс s `DeleteProductsWithTransaction` метод.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="0d3f8-145">Так как этот метод принимает список `ProductID` значения, необходимо сначала скомпилировать этот список из сетки и передайте его в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="0d3f8-146">Сначала создается экземпляр `List<T>` типа `int`.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="0d3f8-147">В рамках `foreach` цикл, нам нужно добавить выбранные продукты `ProductID` значения к этому `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="0d3f8-148">После цикла это `List<T>` должны быть переданы `ProductsBLL` класс s `DeleteProductsWithTransaction` метод.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="0d3f8-149">Обновление `DeleteSelectedProducts` кнопку s `Click` обработчик событий следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="0d3f8-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="0d3f8-150">Обновленный код создает `List<T>` типа `int` (`productIDsToDelete`) и заполняет его значением `ProductID` значения для удаления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="0d3f8-151">После `foreach` цикла, если флажок установлен, хотя бы один продукт `ProductsBLL` класс s `DeleteProductsWithTransaction` вызывается метод и передать этот список.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="0d3f8-152">`DeleteResults` Также отображается метка и данные повторно привязываются к GridView (благодаря чему недавно удаленных записей больше не отображаются как строки в сетке).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="0d3f8-153">Рис. 4 показан элемент управления GridView после несколько строк были выбраны для удаления.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="0d3f8-154">Рис. 5 показан экран, сразу после нажатия кнопки удаления выбранных продуктов.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="0d3f8-155">Обратите внимание, что на рис. 5 `ProductID` в надписи под GridView отображаются значения удаленные записи, и эти строки больше не будут в GridView.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>

<span data-ttu-id="0d3f8-156">[![Будут удалены выбранные продукты](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="0d3f8-157">**Рис. 4**: Выбранные продукты будут удалены ([Просмотр полноразмерного изображения](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="0d3f8-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>

<span data-ttu-id="0d3f8-158">[![Удалить продукты ProductID значения в списке под GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="0d3f8-159">**Рис. 5**: Продукты удалены `ProductID` значения: в списке под GridView ([Просмотр полноразмерного изображения](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="0d3f8-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>

> [!NOTE]
> <span data-ttu-id="0d3f8-160">Для тестирования `DeleteProductsWithTransaction` атомарность метод s, вручную добавьте запись для продукта в `Order Details` таблицы, а затем попытается удалить этот продукт (вместе с другими пользователями).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="0d3f8-161">При попытке удалить продукт с связанный заказ, но Обратите внимание на то, как другие удаления выбранных продуктов откатываются, вы получите нарушение ограничения внешнего ключа.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>

## <a name="summary"></a><span data-ttu-id="0d3f8-162">Сводка</span><span class="sxs-lookup"><span data-stu-id="0d3f8-162">Summary</span></span>

<span data-ttu-id="0d3f8-163">Создание пакета, удаление интерфейса включает в себя добавление элемента GridView со столбцом флажки и кнопки веб-элемента управления, если он выбран, будут удалены все выбранные строки как одной атомарной операции.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="0d3f8-164">В этом руководстве мы создали такой интерфейс путем комбинирования работы, выполненной в двух предыдущих учебных курсах, [Добавление столбца GridView флажков](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) и [перенос изменений базы данных в транзакции](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="0d3f8-165">В первом учебном курсе мы создали GridView со столбцом флажки и во втором была реализована в BLL метод, при передаче `List<T>` из `ProductID` значения, удалить их все в пределах транзакции.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="0d3f8-166">В следующем учебном курсе мы создадим интерфейс для выполнения пакетной вставки.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="0d3f8-167">Счастливого вам программирования!</span><span class="sxs-lookup"><span data-stu-id="0d3f8-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="0d3f8-168">Об авторе</span><span class="sxs-lookup"><span data-stu-id="0d3f8-168">About the Author</span></span>

<span data-ttu-id="0d3f8-169">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP.NET и основатель веб- [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Microsoft с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0d3f8-170">Скотт — независимый консультант, преподаватель и автор.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0d3f8-171">Его последняя книга — [ *Sams Teach ASP.NET 2.0 in 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="0d3f8-172">Ним можно связаться по адресу [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="0d3f8-173">или через его блог, который можно найти в [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="0d3f8-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="0d3f8-174">Особая благодарность</span><span class="sxs-lookup"><span data-stu-id="0d3f8-174">Special Thanks To</span></span>

<span data-ttu-id="0d3f8-175">В этой серии руководств пособий рецензировалась многими компетентными редакторами.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="0d3f8-176">(Hilton giesenow) и Терезой Мерфи, стали Лиз Шалок в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="0d3f8-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="0d3f8-177">Хотите поработать с моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="0d3f8-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="0d3f8-178">Если Да, напишите мне [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0d3f8-179">[Назад](batch-updating-cs.md)
> [Вперед](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="0d3f8-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
