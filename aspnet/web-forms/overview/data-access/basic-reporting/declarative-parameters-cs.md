---
uid: web-forms/overview/data-access/basic-reporting/declarative-parameters-cs
title: Декларативные параметры (C#) | Документация Майкрософт
author: rick-anderson
description: В этом руководстве демонстрируют способы использования параметров с жестко запрограммированных значений, чтобы выбрать данные, отображаемые в элементе управления DetailsView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 603c9bd3-b895-4ec6-853b-0c81ff36d580
msc.legacyurl: /web-forms/overview/data-access/basic-reporting/declarative-parameters-cs
msc.type: authoredcontent
ms.openlocfilehash: ac97b459536356a0ffa2a35b0c38942318f875f0
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65128092"
---
# <a name="declarative-parameters-c"></a><span data-ttu-id="a6707-103">Декларативные параметры (C#)</span><span class="sxs-lookup"><span data-stu-id="a6707-103">Declarative Parameters (C#)</span></span>

<span data-ttu-id="a6707-104">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a6707-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a6707-105">[Скачайте пример приложения](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_5_CS.exe) или [скачать PDF](declarative-parameters-cs/_static/datatutorial05cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a6707-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_5_CS.exe) or [Download PDF](declarative-parameters-cs/_static/datatutorial05cs1.pdf)</span></span>

> <span data-ttu-id="a6707-106">В этом руководстве демонстрируют способы использования параметров с жестко запрограммированных значений, чтобы выбрать данные, отображаемые в элементе управления DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a6707-106">In this tutorial we'll illustrate how to use a parameter set to a hard-coded value to select the data to display in a DetailsView control.</span></span>

## <a name="introduction"></a><span data-ttu-id="a6707-107">Вступление</span><span class="sxs-lookup"><span data-stu-id="a6707-107">Introduction</span></span>

<span data-ttu-id="a6707-108">В [последнего курса](displaying-data-with-the-objectdatasource-cs.md) было рассмаотрено отображение данных с помощью элементов управления GridView, DetailsView и FormView, привязанных к элементу управления ObjectDataSource, вызвавшей `GetProducts()` метода из `ProductsBLL` класса.</span><span class="sxs-lookup"><span data-stu-id="a6707-108">In the [last tutorial](displaying-data-with-the-objectdatasource-cs.md) we looked at displaying data with the GridView, DetailsView, and FormView controls bound to an ObjectDataSource control that invoked the `GetProducts()` method from the `ProductsBLL` class.</span></span> <span data-ttu-id="a6707-109">`GetProducts()` Метод возвращает строго типизированный объект DataTable, заполненный всеми записи из базы данных Northwind `Products` таблицы.</span><span class="sxs-lookup"><span data-stu-id="a6707-109">The `GetProducts()` method returns a strongly-typed DataTable populated with all of the records from the Northwind database's `Products` table.</span></span> <span data-ttu-id="a6707-110">`ProductsBLL` Содержит дополнительные методы для возврата отдельных наборов продуктов - `GetProductByProductID(productID)`, `GetProductsByCategoryID(categoryID)`, и `GetProductsBySupplierID(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="a6707-110">The `ProductsBLL` class contains additional methods for returning just subsets of the products - `GetProductByProductID(productID)`, `GetProductsByCategoryID(categoryID)`, and `GetProductsBySupplierID(supplierID)`.</span></span> <span data-ttu-id="a6707-111">Этих трех методов необходим входной параметр, указывающий на способ фильтрации возвращенной информации о продукте.</span><span class="sxs-lookup"><span data-stu-id="a6707-111">These three methods expect an input parameter indicating how to filter the returned product information.</span></span>

<span data-ttu-id="a6707-112">ObjectDataSource может использоваться для вызова методов, которые необходимы входные параметры, но для этого, мы должны указать, откуда берутся значения для этих параметров.</span><span class="sxs-lookup"><span data-stu-id="a6707-112">The ObjectDataSource can be used to invoke methods that expect input parameters, but in order to do so we must specify where the values for these parameters come from.</span></span> <span data-ttu-id="a6707-113">Значения параметров могут быть жестко запрограммированы или могут поступать из различных динамических источников, включая: значения строки запроса, переменные сеансов, значение свойства веб-элемента управления на странице или другим пользователям.</span><span class="sxs-lookup"><span data-stu-id="a6707-113">The parameter values can be hard-coded or can come from a variety of dynamic sources, including: querystring values, Session variables, the property value of a Web control on the page, or others.</span></span>

<span data-ttu-id="a6707-114">В этом руководстве давайте начнем с демонстрации использования параметров с жестко запрограммированных значений.</span><span class="sxs-lookup"><span data-stu-id="a6707-114">For this tutorial let's start by illustrating how to use a parameter set to a hard-coded value.</span></span> <span data-ttu-id="a6707-115">В частности, мы рассмотрим добавление DetailsView на страницу, на которой отображаются сведения об определенном продукте, а именно Chef Anton's Gumbo Mix, для `ProductID` 5.</span><span class="sxs-lookup"><span data-stu-id="a6707-115">Specifically, we'll look at adding a DetailsView to the page that displays information about a specific product, namely Chef Anton's Gumbo Mix, which has a `ProductID` of 5.</span></span> <span data-ttu-id="a6707-116">Далее будет показано, как задать значение параметра, основанное на веб-элемент управления.</span><span class="sxs-lookup"><span data-stu-id="a6707-116">Next, we'll see how to set the parameter value based on a Web control.</span></span> <span data-ttu-id="a6707-117">В частности мы будем использовать текстовое поле, чтобы пользователь мог ввести название страны, после чего щелкнуть кнопку и просмотреть список поставщиков, которые находятся в этой стране.</span><span class="sxs-lookup"><span data-stu-id="a6707-117">In particular, we'll use a TextBox to let the user type in a country, after which they can click a Button to see the list of suppliers that reside in that country.</span></span>

## <a name="using-a-hard-coded-parameter-value"></a><span data-ttu-id="a6707-118">С помощью значения параметра жестко</span><span class="sxs-lookup"><span data-stu-id="a6707-118">Using a Hard-Coded Parameter Value</span></span>

<span data-ttu-id="a6707-119">Для первого примера начнем с добавления элемента управления DetailsView на `DeclarativeParams.aspx` странице в `BasicReporting` папку.</span><span class="sxs-lookup"><span data-stu-id="a6707-119">For the first example, start by adding a DetailsView control to the `DeclarativeParams.aspx` page in the `BasicReporting` folder.</span></span> <span data-ttu-id="a6707-120">Смарт-теге DetailsView выберите &lt;новый источник данных&gt; из раскрывающегося списка и выберите Добавление нового ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a6707-120">From the DetailsView's smart tag, select &lt;New data source&gt; from the drop-down list and choose to add an ObjectDataSource.</span></span>

<span data-ttu-id="a6707-121">[![Добавление ObjectDataSource на страницу](declarative-parameters-cs/_static/image2.png)](declarative-parameters-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-121">[![Add an ObjectDataSource to the Page](declarative-parameters-cs/_static/image2.png)](declarative-parameters-cs/_static/image1.png)</span></span>

<span data-ttu-id="a6707-122">**Рис. 1**: Добавление ObjectDataSource на страницу ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-122">**Figure 1**: Add an ObjectDataSource to the Page ([Click to view full-size image](declarative-parameters-cs/_static/image3.png))</span></span>

<span data-ttu-id="a6707-123">Автоматически запустится мастер Выбор источника данных элемента управления ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a6707-123">This will automatically start the ObjectDataSource control's Choose Data Source wizard.</span></span> <span data-ttu-id="a6707-124">Выберите `ProductsBLL` класс на первом экране мастера.</span><span class="sxs-lookup"><span data-stu-id="a6707-124">Select the `ProductsBLL` class from the first screen of the wizard.</span></span>

<span data-ttu-id="a6707-125">[![Выбор класса](declarative-parameters-cs/_static/image5.png)](declarative-parameters-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-125">[![Select the ProductsBLL Class](declarative-parameters-cs/_static/image5.png)](declarative-parameters-cs/_static/image4.png)</span></span>

<span data-ttu-id="a6707-126">**Рис. 2**: Выберите `ProductsBLL` класс ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-126">**Figure 2**: Select the `ProductsBLL` Class ([Click to view full-size image](declarative-parameters-cs/_static/image6.png))</span></span>

<span data-ttu-id="a6707-127">Поскольку мы хотим отобразить сведения об определенном продукте, мы хотим использовать `GetProductByProductID(productID)` метод.</span><span class="sxs-lookup"><span data-stu-id="a6707-127">Since we want to display information about a particular product we want to use the `GetProductByProductID(productID)` method.</span></span>

<span data-ttu-id="a6707-128">[![Выберите метод GetProductByProductID(productID)](declarative-parameters-cs/_static/image8.png)](declarative-parameters-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-128">[![Choose the GetProductByProductID(productID) method](declarative-parameters-cs/_static/image8.png)](declarative-parameters-cs/_static/image7.png)</span></span>

<span data-ttu-id="a6707-129">**Рис. 3**: Выберите `GetProductByProductID(productID)` метод ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-129">**Figure 3**: Choose the `GetProductByProductID(productID)` method ([Click to view full-size image](declarative-parameters-cs/_static/image9.png))</span></span>

<span data-ttu-id="a6707-130">Поскольку выбранный метод включает параметр, имеется один экран мастера, где вам будет предложено определить значение, используемое для параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-130">Since the method we selected includes a parameter, there's one more screen for the wizard, where we're asked to define the value to be used for the parameter.</span></span> <span data-ttu-id="a6707-131">В списке слева отображаются все параметры для выбранного метода.</span><span class="sxs-lookup"><span data-stu-id="a6707-131">The list on the left shows all of the parameters for the selected method.</span></span> <span data-ttu-id="a6707-132">Для `GetProductByProductID(productID)` имеется только один `productID`.</span><span class="sxs-lookup"><span data-stu-id="a6707-132">For `GetProductByProductID(productID)` there's only one `productID`.</span></span> <span data-ttu-id="a6707-133">В правой части можно указать значение для выбранного параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-133">On the right we can specify the value for the selected parameter.</span></span> <span data-ttu-id="a6707-134">Список раскрывающегося списка параметров источника перечисляет различные возможные источники для значения параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-134">The parameter source drop-down list enumerates the various possible sources for the parameter value.</span></span> <span data-ttu-id="a6707-135">Поскольку нам требуется указать значение 5 для жестко `productID` параметр, оставьте источника параметра выберите None и введите 5 в текстовое поле DefaultValue.</span><span class="sxs-lookup"><span data-stu-id="a6707-135">Since we want to specify a hard-coded value of 5 for the `productID` parameter, leave the Parameter source as None and enter 5 into the DefaultValue textbox.</span></span>

<span data-ttu-id="a6707-136">[![Hard-Coded параметр из 5 будет использоваться значение для параметра productID](declarative-parameters-cs/_static/image11.png)](declarative-parameters-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-136">[![A Hard-Coded Parameter Value of 5 Will Be Used for the productID Parameter](declarative-parameters-cs/_static/image11.png)](declarative-parameters-cs/_static/image10.png)</span></span>

<span data-ttu-id="a6707-137">**Рис. 4**: Hard-Coded параметра значение 5 будет использоваться для `productID` параметра ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-137">**Figure 4**: A Hard-Coded Parameter Value of 5 Will Be Used for the `productID` Parameter ([Click to view full-size image](declarative-parameters-cs/_static/image12.png))</span></span>

<span data-ttu-id="a6707-138">После завершения работы мастера настройки источника данных включает декларативная разметка элемента управления ObjectDataSource `Parameter` объекта в `SelectParameters` для каждого входного параметра с помощью метода, определенного в `SelectMethod` свойство.</span><span class="sxs-lookup"><span data-stu-id="a6707-138">After completing the Configure Data Source wizard, the ObjectDataSource control's declarative markup includes a `Parameter` object in the `SelectParameters` collection for each of the input parameters expected by the method defined in the `SelectMethod` property.</span></span> <span data-ttu-id="a6707-139">Так как он используется в этом примере может принимать только один входной параметр, `parameterID`, имеется только одна запись здесь.</span><span class="sxs-lookup"><span data-stu-id="a6707-139">Since the method we're using in this example expects just a single input parameter, `parameterID`, there's only one entry here.</span></span> <span data-ttu-id="a6707-140">`SelectParameters` Коллекция может содержать любой класс, производный от `Parameter` в класс `System.Web.UI.WebControls` пространства имен.</span><span class="sxs-lookup"><span data-stu-id="a6707-140">The `SelectParameters` collection can contain any class that derives from the `Parameter` class in the `System.Web.UI.WebControls` namespace.</span></span> <span data-ttu-id="a6707-141">Для базового значения параметров, жестко `Parameter` класс используется, но для другого источника параметры производный `Parameter` класс используется; можно также создать свои собственные [пользовательские типы параметров](http://www.leftslipper.com/ShowFaq.aspx?FaqId=11), при необходимости.</span><span class="sxs-lookup"><span data-stu-id="a6707-141">For hard-coded parameter values the base `Parameter` class is used, but for the other parameter source options a derived `Parameter` class is used; you can also create your own [custom parameter types](http://www.leftslipper.com/ShowFaq.aspx?FaqId=11), if needed.</span></span>

[!code-aspx[Main](declarative-parameters-cs/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="a6707-142">Если вы разрабатываете головоломку на своем компьютере декларативной разметке появится на этом этапе может включать значения для `InsertMethod`, `UpdateMethod`, и `DeleteMethod` свойства, а также `DeleteParameters`.</span><span class="sxs-lookup"><span data-stu-id="a6707-142">If you're following along on your own computer the declarative markup you see at this point may include values for the `InsertMethod`, `UpdateMethod`, and `DeleteMethod` properties, as well as `DeleteParameters`.</span></span> <span data-ttu-id="a6707-143">Выбор источника данных мастер ObjectDataSource автоматически указывает методы `ProductBLL` для использования вставки, обновления и удаления, поэтому если вы явно не удалить, они будут включены в указанную выше разметку.</span><span class="sxs-lookup"><span data-stu-id="a6707-143">The ObjectDataSource's Choose Data Source wizard automatically specifies the methods from the `ProductBLL` to use for inserting, updating, and deleting, so unless you explicitly cleared those out, they'll be included in the markup above.</span></span>

<span data-ttu-id="a6707-144">При посещении этой страницы данных веб-элемента управления вызовет ObjectDataSource `Select` метод, который будет вызывать `ProductsBLL` класса `GetProductByProductID(productID)` метод, используя жестко запрограммированное значение 5 для `productID` входного параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-144">When visiting this page, the data Web control will invoke the ObjectDataSource's `Select` method, which will call the `ProductsBLL` class's `GetProductByProductID(productID)` method using the hard-coded value of 5 for the `productID` input parameter.</span></span> <span data-ttu-id="a6707-145">Метод возвратит строго типизированный `ProductDataTable` объект, который содержит единственную строку с информацией о Chef Anton's Gumbo Mix (продукт с `ProductID` 5).</span><span class="sxs-lookup"><span data-stu-id="a6707-145">The method will return a strongly-typed `ProductDataTable` object that contains a single row with information about Chef Anton's Gumbo Mix (the product with `ProductID` 5).</span></span>

<span data-ttu-id="a6707-146">[![Отображаются сведения о Chef Anton's Gumbo Mix](declarative-parameters-cs/_static/image14.png)](declarative-parameters-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-146">[![Information About Chef Anton's Gumbo Mix are Displayed](declarative-parameters-cs/_static/image14.png)](declarative-parameters-cs/_static/image13.png)</span></span>

<span data-ttu-id="a6707-147">**Рис. 5**: Отображаются сведения о Chef Anton's Gumbo Mix ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-147">**Figure 5**: Information About Chef Anton's Gumbo Mix are Displayed ([Click to view full-size image](declarative-parameters-cs/_static/image15.png))</span></span>

## <a name="setting-the-parameter-value-to-the-property-value-of-a-web-control"></a><span data-ttu-id="a6707-148">Значение параметра на значение свойства веб-элемента управления</span><span class="sxs-lookup"><span data-stu-id="a6707-148">Setting the Parameter Value to the Property Value of a Web Control</span></span>

<span data-ttu-id="a6707-149">Также можно задать значения параметра ObjectDataSource на основе значения веб-элемента управления на странице.</span><span class="sxs-lookup"><span data-stu-id="a6707-149">The ObjectDataSource's parameter values can also be set based on the value of a Web control on the page.</span></span> <span data-ttu-id="a6707-150">Чтобы проиллюстрировать это, рассмотрим элемент GridView, со списком всех поставщиков, расположенных в стране, указанные пользователем.</span><span class="sxs-lookup"><span data-stu-id="a6707-150">To illustrate this, let's have a GridView that lists all of the suppliers that are located in a country specified by the user.</span></span> <span data-ttu-id="a6707-151">Для этого, добавив элемент управления TextBox на страницу, в который пользователь может ввести название страны.</span><span class="sxs-lookup"><span data-stu-id="a6707-151">To accomplish this start by adding a TextBox to the page into which the user can enter a country name.</span></span> <span data-ttu-id="a6707-152">Установить этот элемент управления TextBox `ID` свойства `CountryName`.</span><span class="sxs-lookup"><span data-stu-id="a6707-152">Set this TextBox control's `ID` property to `CountryName`.</span></span> <span data-ttu-id="a6707-153">Также можно добавьте кнопку веб-элемент управления.</span><span class="sxs-lookup"><span data-stu-id="a6707-153">Also add a Button Web control.</span></span>

<span data-ttu-id="a6707-154">[![Добавление текстового поля на страницу с Идентификатором CountryName](declarative-parameters-cs/_static/image17.png)](declarative-parameters-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-154">[![Add a TextBox to the Page with ID CountryName](declarative-parameters-cs/_static/image17.png)](declarative-parameters-cs/_static/image16.png)</span></span>

<span data-ttu-id="a6707-155">**Рис. 6**: Добавление текстового поля на страницу с `ID` `CountryName` ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-155">**Figure 6**: Add a TextBox to the Page with `ID` `CountryName` ([Click to view full-size image](declarative-parameters-cs/_static/image18.png))</span></span>

<span data-ttu-id="a6707-156">Затем добавьте элемент управления GridView на страницу и в смарт-теге, выберите для добавления нового источника ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a6707-156">Next, add a GridView to the page and, from the smart tag, choose to add a new ObjectDataSource.</span></span> <span data-ttu-id="a6707-157">Поскольку нам требуется отобразить сведения выберите поставщика `SuppliersBLL` класс из первый экран мастера.</span><span class="sxs-lookup"><span data-stu-id="a6707-157">Since we want to display supplier information select the `SuppliersBLL` class from the wizard's first screen.</span></span> <span data-ttu-id="a6707-158">На втором экране выберите `GetSuppliersByCountry(country)` метод.</span><span class="sxs-lookup"><span data-stu-id="a6707-158">From the second screen, pick the `GetSuppliersByCountry(country)` method.</span></span>

<span data-ttu-id="a6707-159">[![Выберите метод GetSuppliersByCountry(country)](declarative-parameters-cs/_static/image20.png)](declarative-parameters-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-159">[![Choose the GetSuppliersByCountry(country) Method](declarative-parameters-cs/_static/image20.png)](declarative-parameters-cs/_static/image19.png)</span></span>

<span data-ttu-id="a6707-160">**Рис. 7**: Выберите `GetSuppliersByCountry(country)` метод ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-160">**Figure 7**: Choose the `GetSuppliersByCountry(country)` Method ([Click to view full-size image](declarative-parameters-cs/_static/image21.png))</span></span>

<span data-ttu-id="a6707-161">Так как `GetSuppliersByCountry(country)` метод имеет входной параметр, мастер снова включает последний экран для выбора значения параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-161">Since the `GetSuppliersByCountry(country)` method has an input parameter, the wizard once again includes a final screen for choosing the parameter value.</span></span> <span data-ttu-id="a6707-162">На этот раз источника параметра установите для элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a6707-162">This time, set the Parameter source to Control.</span></span> <span data-ttu-id="a6707-163">Это будут заполнять список ControlID раскрывающегося списка с именами элементов управления на странице; Выберите `CountryName` управления из списка.</span><span class="sxs-lookup"><span data-stu-id="a6707-163">This will populate the ControlID drop-down list with the names of the controls on the page; select the `CountryName` control from the list.</span></span> <span data-ttu-id="a6707-164">При первом посещении страницы `CountryName` элемент управления TextBox будет пустым, поэтому результаты не возвращаются и ничего не отображается.</span><span class="sxs-lookup"><span data-stu-id="a6707-164">When the page is first visited the `CountryName` TextBox will be blank, so no results are returned and nothing is displayed.</span></span> <span data-ttu-id="a6707-165">Если вы хотите отобразить некоторые результаты по умолчанию, задайте соответствующим образом текстовое поле DefaultValue.</span><span class="sxs-lookup"><span data-stu-id="a6707-165">If you want to display some results by default, set the DefaultValue textbox accordingly.</span></span>

<span data-ttu-id="a6707-166">[![Значение параметра равно значение элемента управления CountryName](declarative-parameters-cs/_static/image23.png)](declarative-parameters-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-166">[![Set the Parameter Value to the CountryName Control Value](declarative-parameters-cs/_static/image23.png)](declarative-parameters-cs/_static/image22.png)</span></span>

<span data-ttu-id="a6707-167">**Рис. 8**: Задайте значение параметра `CountryName` значение элемента управления ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-167">**Figure 8**: Set the Parameter Value to the `CountryName` Control Value ([Click to view full-size image](declarative-parameters-cs/_static/image24.png))</span></span>

<span data-ttu-id="a6707-168">Декларативная разметка ObjectDataSource немного отличается от первого примера с помощью [ControlParameter](https://msdn.microsoft.com/library/system.web.ui.webcontrols.controlparameter.aspx) вместо стандартного `Parameter` объекта.</span><span class="sxs-lookup"><span data-stu-id="a6707-168">The ObjectDataSource's declarative markup differs slightly from our first example, using a [ControlParameter](https://msdn.microsoft.com/library/system.web.ui.webcontrols.controlparameter.aspx) instead of the standard `Parameter` object.</span></span> <span data-ttu-id="a6707-169">Объект `ControlParameter` имеет дополнительные свойства для указания `ID` веб-элемента управления и значение свойства, используемое для параметра (`PropertyName`).</span><span class="sxs-lookup"><span data-stu-id="a6707-169">A `ControlParameter` has additional properties to specify the `ID` of the Web control and the property value to use for the parameter (`PropertyName`).</span></span> <span data-ttu-id="a6707-170">Мастер настройки источника данных понимал определить, что, для текстового поля, будет скорее всего будет использоваться `Text` свойство для значения параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-170">The Configure Data Source wizard was smart enough to determine that, for a TextBox, we'll likely want to use the `Text` property for the parameter value.</span></span> <span data-ttu-id="a6707-171">Если, однако вы хотите использовать другое значение свойства из веб-элемента управления можно изменить `PropertyName` здесь или щелкнув ссылку «Показать дополнительные свойства» в мастере.</span><span class="sxs-lookup"><span data-stu-id="a6707-171">If, however, you want to use a different property value from the Web control you can change the `PropertyName` value here or by clicking the "Show advanced properties" link in the wizard.</span></span>

[!code-aspx[Main](declarative-parameters-cs/samples/sample2.aspx)]

<span data-ttu-id="a6707-172">При просмотре страницы в первый раз `CountryName` пуст.</span><span class="sxs-lookup"><span data-stu-id="a6707-172">When visiting the page for the first time the `CountryName` TextBox is empty.</span></span> <span data-ttu-id="a6707-173">ObjectDataSource `Select` метод по-прежнему вызывается GridView, но значение `null` передается в `GetSuppliersByCountry(country)` метод.</span><span class="sxs-lookup"><span data-stu-id="a6707-173">The ObjectDataSource's `Select` method is still invoked by the GridView, but a value of `null` is passed into the `GetSuppliersByCountry(country)` method.</span></span> <span data-ttu-id="a6707-174">TableAdapter преобразует `null` в базу данных `NULL` значение (`DBNull.Value`), но запрос, используемый методом `GetSuppliersByCountry(country)` написан таким образом, чтобы он не возвращает какие-либо значения, когда `NULL` значение, заданное для `@CategoryID`параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-174">The TableAdapter converts the `null` into a database `NULL` value (`DBNull.Value`), but the query used by the `GetSuppliersByCountry(country)` method is written such that it doesn't return any values when a `NULL` value is specified for the `@CategoryID` parameter.</span></span> <span data-ttu-id="a6707-175">Короче говоря поставщики не возвращаются.</span><span class="sxs-lookup"><span data-stu-id="a6707-175">In short, no suppliers are returned.</span></span>

<span data-ttu-id="a6707-176">Как только посетитель вводит название страны, тем не менее и нажимает кнопку Показать поставщиков для инициирования обратной передачи, элемент управления ObjectDataSource `Select` ObjectDataSource, передавая в элементе управления TextBox `Text` значение как `country` параметр.</span><span class="sxs-lookup"><span data-stu-id="a6707-176">Once the visitor enters in a country, however, and clicks the Show Suppliers button to cause a postback, the ObjectDataSource's `Select` method is requeried, passing in the TextBox control's `Text` value as the `country` parameter.</span></span>

<span data-ttu-id="a6707-177">[![Показаны поставщики из Канады](declarative-parameters-cs/_static/image26.png)](declarative-parameters-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-177">[![Those Suppliers from Canada are Shown](declarative-parameters-cs/_static/image26.png)](declarative-parameters-cs/_static/image25.png)</span></span>

<span data-ttu-id="a6707-178">**Рис. 9**: Показаны поставщики из Канады ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-178">**Figure 9**: Those Suppliers from Canada are Shown ([Click to view full-size image](declarative-parameters-cs/_static/image27.png))</span></span>

## <a name="showing-all-suppliers-by-default"></a><span data-ttu-id="a6707-179">Отображение всех поставщиков по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a6707-179">Showing All Suppliers By Default</span></span>

<span data-ttu-id="a6707-180">А чем отобразить ни один из поставщиков, при первом посещении страницы нужно показать *все* поставщиков, позволяя пользователю сократить список, введя название страны в текстовом поле.</span><span class="sxs-lookup"><span data-stu-id="a6707-180">Rather than show none of the suppliers when first viewing the page we may want to show *all* suppliers at first, allowing the user to pare down the list by entering a country name in the TextBox.</span></span> <span data-ttu-id="a6707-181">Если поле TextBox пустое, `SuppliersBLL` класса `GetSuppliersByCountry(country)` методу передается в `null` значение для его *`country`* входного параметра.</span><span class="sxs-lookup"><span data-stu-id="a6707-181">When the TextBox is empty, the `SuppliersBLL` class's `GetSuppliersByCountry(country)` method is passed in a `null` value for its *`country`* input parameter.</span></span> <span data-ttu-id="a6707-182">Это `null` значение затем передается методу `GetSupplierByCountry(country)` метод, где оно преобразуется в базу данных `NULL` значение `@Country` параметр в следующем запросе:</span><span class="sxs-lookup"><span data-stu-id="a6707-182">This `null` value is then passed down into the DAL's `GetSupplierByCountry(country)` method, where it's translated to a database `NULL` value for the `@Country` parameter in the following query:</span></span>

[!code-sql[Main](declarative-parameters-cs/samples/sample3.sql)]

<span data-ttu-id="a6707-183">Выражение `Country = NULL` всегда возвращает значение False, даже для записей, `Country` столбец имеет `NULL` значением; поэтому записи не возвращаются.</span><span class="sxs-lookup"><span data-stu-id="a6707-183">The expression `Country = NULL` always returns False, even for records whose `Country` column has a `NULL` value; therefore, no records are returned.</span></span>

<span data-ttu-id="a6707-184">Для возврата *все* поставщиков при пустом поле TextBox пустое, мы можем расширить `GetSuppliersByCountry(country)` в BLL для вызова `GetSuppliers()` метод при значении параметра страны `null` и для вызова МЕТОДА `GetSuppliersByCountry(country)` в противном случае метод.</span><span class="sxs-lookup"><span data-stu-id="a6707-184">To return *all* suppliers when the country TextBox is empty, we can augment the `GetSuppliersByCountry(country)` method in the BLL to invoke the `GetSuppliers()` method when its country parameter is `null` and to call the DAL's `GetSuppliersByCountry(country)` method otherwise.</span></span> <span data-ttu-id="a6707-185">Это окажет влияние возвращение всех поставщиков, если страна не указана и соответствующий набор поставщиков, если включен параметр страны.</span><span class="sxs-lookup"><span data-stu-id="a6707-185">This will have the effect of returning all suppliers when no country is specified and the appropriate subset of suppliers when the country parameter is included.</span></span>

<span data-ttu-id="a6707-186">Изменение `GetSuppliersByCountry(country)` метод в `SuppliersBLL` следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a6707-186">Change the `GetSuppliersByCountry(country)` method in the `SuppliersBLL` class to the following:</span></span>

[!code-csharp[Main](declarative-parameters-cs/samples/sample4.cs)]

<span data-ttu-id="a6707-187">Благодаря этому изменению `DeclarativeParams.aspx` странице будут показаны все поставщики при первом посещении (или каждый раз, когда `CountryName` пуст).</span><span class="sxs-lookup"><span data-stu-id="a6707-187">With this change the `DeclarativeParams.aspx` page shows all of the suppliers when first visited (or whenever the `CountryName` TextBox is empty).</span></span>

<span data-ttu-id="a6707-188">[![Все поставщики, теперь отображается по умолчанию](declarative-parameters-cs/_static/image29.png)](declarative-parameters-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="a6707-188">[![All Suppliers are Now Shown by Default](declarative-parameters-cs/_static/image29.png)](declarative-parameters-cs/_static/image28.png)</span></span>

<span data-ttu-id="a6707-189">**Рис. 10**: Все поставщики, теперь отображается по умолчанию ([Просмотр полноразмерного изображения](declarative-parameters-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="a6707-189">**Figure 10**: All Suppliers are Now Shown by Default ([Click to view full-size image](declarative-parameters-cs/_static/image30.png))</span></span>

## <a name="summary"></a><span data-ttu-id="a6707-190">Сводка</span><span class="sxs-lookup"><span data-stu-id="a6707-190">Summary</span></span>

<span data-ttu-id="a6707-191">Для использования методов со входными параметрами, нам нужно указать значения для параметров в коллекции `SelectParameters` коллекции.</span><span class="sxs-lookup"><span data-stu-id="a6707-191">In order to use methods with input parameters, we need to specify the values for the parameters in the ObjectDataSource's `SelectParameters` collection.</span></span> <span data-ttu-id="a6707-192">Различные типы параметров позволяют значение параметра должны быть получены из различных источников.</span><span class="sxs-lookup"><span data-stu-id="a6707-192">Different types of parameters allow for the parameter value to be obtained from different sources.</span></span> <span data-ttu-id="a6707-193">Тип параметра по умолчанию использует жестко запрограммированных значений, но так же, как легко (и без написания кода) значений параметров можно получить из строки запроса, переменные сеанса, файлы cookie и даже введенный пользователем значения из веб-элементов управления на странице.</span><span class="sxs-lookup"><span data-stu-id="a6707-193">The default parameter type uses a hard-coded value, but just as easily (and without a line of code) parameter values can be obtained from the querystring, Session variables, cookies, and even user-entered values from Web controls on the page.</span></span>

<span data-ttu-id="a6707-194">На примерах, которые мы рассматривали в этом руководстве показано, как использование значений декларативных параметров.</span><span class="sxs-lookup"><span data-stu-id="a6707-194">The examples we looked at in this tutorial illustrated how to use declarative parameter values.</span></span> <span data-ttu-id="a6707-195">Однако иногда, иногда бывает необходимо использовать источник параметра недоступно, например текущую дату и время, или, если веб-узле используется членство, идентификатор пользователя посетителя.</span><span class="sxs-lookup"><span data-stu-id="a6707-195">However, there may be times when we need to use a parameter source that's not available, such as the current date and time, or, if our site was using Membership, the User ID of the visitor.</span></span> <span data-ttu-id="a6707-196">Для таких сценариев можно задать значения параметров программно до ObjectDataSource вызова метода базового объекта.</span><span class="sxs-lookup"><span data-stu-id="a6707-196">For such scenarios we can set the parameter values programmatically prior to the ObjectDataSource invoking its underlying object's method.</span></span> <span data-ttu-id="a6707-197">Узнаете, как для этого в [следующему руководству](programmatically-setting-the-objectdatasource-s-parameter-values-cs.md).</span><span class="sxs-lookup"><span data-stu-id="a6707-197">We'll see how to accomplish this in the [next tutorial](programmatically-setting-the-objectdatasource-s-parameter-values-cs.md).</span></span>

<span data-ttu-id="a6707-198">Счастливого вам программирования!</span><span class="sxs-lookup"><span data-stu-id="a6707-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a6707-199">Об авторе</span><span class="sxs-lookup"><span data-stu-id="a6707-199">About the Author</span></span>

<span data-ttu-id="a6707-200">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи книг по ASP/ASP.NET и основатель веб- [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Microsoft с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="a6707-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a6707-201">Скотт — независимый консультант, преподаватель и автор.</span><span class="sxs-lookup"><span data-stu-id="a6707-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a6707-202">Его последняя книга — [ *Sams Teach ASP.NET 2.0 in 24 часа*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a6707-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a6707-203">Ним можно связаться по адресу [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a6707-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a6707-204">или через его блог, который можно найти в [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a6707-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a6707-205">Особая благодарность</span><span class="sxs-lookup"><span data-stu-id="a6707-205">Special Thanks To</span></span>

<span data-ttu-id="a6707-206">В этой серии руководств пособий рецензировалась многими компетентными редакторами.</span><span class="sxs-lookup"><span data-stu-id="a6707-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a6707-207">Основной рецензент этого учебного был (Hilton giesenow).</span><span class="sxs-lookup"><span data-stu-id="a6707-207">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="a6707-208">Хотите поработать с моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="a6707-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a6707-209">Если Да, напишите мне [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a6707-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a6707-210">[Назад](displaying-data-with-the-objectdatasource-cs.md)
> [Вперед](programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a6707-210">[Previous](displaying-data-with-the-objectdatasource-cs.md)
[Next](programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)</span></span>
