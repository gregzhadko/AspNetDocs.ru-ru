---
uid: web-pages/overview/testing-and-debugging/introduction-to-debugging
title: Общие сведения об отладке ASP.NET Web Pages сайтов (Razor) | Документация Майкрософт
author: Rick-Anderson
description: Отладка — это процесс поиска и устранения ошибок в коде страницы. В этой главе показано определенные инструменты и методы, которые можно использовать для отладки и анализ...
ms.author: riande
ms.date: 02/20/2014
ms.assetid: 68de4326-7611-4b9b-b5f6-79b7adc3069f
msc.legacyurl: /web-pages/overview/testing-and-debugging/introduction-to-debugging
msc.type: authoredcontent
ms.openlocfilehash: e5302492f01cbd507e0b0fd995f21621bf6f04c8
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57034471"
---
<a name="introduction-to-debugging-aspnet-web-pages-razor-sites"></a>Общие сведения об отладке ASP.NET Web Pages сайтов (Razor)
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> В этой статье поясняются различные способы для отладки страниц в на веб-сайте ASP.NET Web Pages (Razor). Отладка — это процесс поиска и устранения ошибок в коде страницы.
>
> **Вы узнаете, как:**
>
> - Как отобразить сведения, которые помогут анализе и отладке страниц.
> - Как использовать отладку средств в Visual Studio.
>
>
> Ниже приведены функции ASP.NET, представленные в этой статье.
>
> - `ServerInfo` Вспомогательный.
> - `ObjectInfo` Вспомогательный метод.
>
>
> ## <a name="software-versions"></a>Версии программного обеспечения
>
>
> - Веб-страниц ASP.NET (Razor) 3
> - Visual Studio 2013
>
>
> Этот учебник также работает с ASP.NET Web Pages 2. Можно использовать WebMatrix 3, но интегрированный отладчик не поддерживается.


Следует избегать в первую очередь является важным аспектом Устранение ошибок и проблем в коде. Это можно сделать, поместив фрагменты кода, которые могут привести к ошибкам в `try/catch` блоков. Дополнительные сведения см. в разделе об обработке ошибок в [введение в ASP.NET веб-программирование с помощью синтаксиса Razor](https://go.microsoft.com/fwlink/?LinkId=202890).

`ServerInfo` Вспомогательный — это средство диагностики, которое позволяет получить общие сведения о среде веб-сервера, на котором размещается на странице. Он также показывает сведения о запросе HTTP, который отправляется, когда браузер запрашивает страницу. `ServerInfo` Вспомогательный объект отображает идентификатор текущего пользователя, тип браузера, который выполняет запрос и т. д. Подобные сведения помогут вам устранить распространенные проблемы.

1. Создание нового веб-страницы с именем *ServerInfo.cshtml*.
2. В конце страницы, просто перед закрывающей скобкой `</body>` , добавьте `@ServerInfo.GetHtml()`:

    [!code-cshtml[Main](introduction-to-debugging/samples/sample1.cshtml)]

    Вы можете добавить `ServerInfo` код в любом месте страницы. Но его добавления в конце сохранит его выходные данные отдельно от других содержимое страницы, что делает его более удобным для чтения.

    > [!NOTE]
    >
    > **Важные** любой код диагностики следует удалить из веб-страниц, перед перемещением веб-страниц на рабочем сервере. Это относится к `ServerInfo` вспомогательный, а также других методах диагностики в этой статье, включающих добавление кода на страницу. Вы не хотите посетителей веб-сайта, чтобы просмотреть сведения об имени сервера, имена пользователей, пути на сервере, а подобной подробной информации, так как такого рода сведения могут пригодиться для людей с злоумышленниками.
3. Сохраните страницу и запустите его в браузере.

    ![Отладка-1](introduction-to-debugging/_static/image1.jpg)

    `ServerInfo` Вспомогательный объект отображает четыре таблицы данных на странице:

   - Конфигурация сервера. Этот раздел содержит сведения о веб-сервере, включая имя компьютера, версию ASP.NET, у вас, имя домена и время сервера.
   - Переменные сервера ASP.NET. В этом разделе подробно описаны многие детали протокола HTTP (вызываемой переменных HTTP) и значения, которые являются частью каждого запроса веб-страницы.
   - Сведения о времени выполнения HTTP. В этом разделе содержатся сведения об этом версию Microsoft .NET Framework, под которой работает веб-страницы, путь, сведения о кэше и т. д. (Как вы узнали из [введение в ASP.NET веб-программирование с помощью синтаксиса Razor](https://go.microsoft.com/fwlink/?LinkId=202890), веб-страниц ASP.NET с помощью Razor, синтаксис основаны на технологии ASP.NET корпорации Майкрософт web server, который сам создан на обширные программного обеспечения Библиотека разработки называется .NET Framework.)
   - Переменные среды. Этот раздел содержит список всех локальных переменных среды и их значения на веб-сервере.

     Полное описание всех данные сервера и запроса выходит за рамки данной статьи, но можно заметить, что `ServerInfo` вспомогательный возвращает большой объем диагностической информации. Дополнительные сведения о значениях, `ServerInfo` возвращает, см. в разделе [распознан переменные среды](https://technet.microsoft.com/library/dd560744(WS.10).aspx) на веб-сайте Microsoft TechNet и [переменные сервера IIS](https://msdn.microsoft.com/library/ms524602(VS.90).aspx) на веб-сайте MSDN.

## <a name="embedding-output-expressions-to-display-page-values"></a>Внедрение выражений выходных данных для отображения значения страницы

Еще один способ увидеть, что происходит в коде является внедрение выражений выходные данные на странице. Как известно, можно непосредственно вывести значение переменной, добавив примерно `@myVariable` или `@(subTotal * 12)` на страницу. Для отладки, можно поместить эти выражения выходные данные в стратегических точках в коде. Это дает возможность просмотра значения ключевых переменных или результат вычислений, при запуске страницы. После завершения отладки, вы можете удалить выражения или их в комментарий. Эта процедура иллюстрирует типичный способ использования внедренных выражений для отладки на страницу.

1. Создание новой страницы WebMatrix, которая называется *OutputExpression.cshtml*.
2. Замените содержимое следующим страницы:

    [!code-html[Main](introduction-to-debugging/samples/sample2.html)]

    В примере используется `switch` инструкцию, чтобы проверить значение `weekday` переменной, а затем отобразите, это разные выходные сообщения в зависимости от того, какой день недели. В примере `if` блок в первый блок кода произвольно изменения день недели, добавив один день к значению текущего дня недели. Это ошибка для наглядности.
3. Сохраните страницу и запустите его в браузере.

    На странице отображается сообщение для Неверный день недели. Какой бы день недели, фактически это, вы увидите сообщение об ошибке за один день в более поздней версии. Несмотря на то, что в этом случае вы знаете, почему сообщение отключена (потому, что код намеренно устанавливает значение неверные дня), на самом деле часто бывает сложно знать, где ход выполнения процесса не так с кодом. Чтобы выполнить отладку, необходимо узнать, что происходит с значение ключевые объекты и переменные, такие как `weekday`.
4. Добавьте выходные данные выражения, вставив `@weekday` как показано в двух местах, обозначаются комментарии в коде. Эти выражения вывода отображаются значения переменной в этот момент выполнение кода.

    [!code-csharp[Main](introduction-to-debugging/samples/sample3.cs?highlight=2-3,15-16)]
5. Сохраните и откройте страницу в браузере.

    На странице отображается реальных день недели, во-первых, а затем обновленный день недели, полученный в результате добавления одного дня и затем Получившееся сообщение `switch` инструкции. Выходные данные из двух переменных выражений (`@weekday`) не содержит пробелов между днями, так как вы не добавляли любой код HTML `<p>` теги в выходные данные; содержатся выражения, только для тестирования.

    ![Отладка 2](introduction-to-debugging/_static/image2.jpg)

    Теперь вы видите, где возникает ошибка. При первом отображении `weekday` переменной в коде, он показывает правильный день. При отображении его второй раз, после `if` заблокировать в коде, отключен на один день. Итак, вы знаете, что что-то произошло между первой и второй внешний вид переменной дня недели. Если бы это было реальной ошибки, такой подход помогает сузить расположение код, который вызывает проблему.
6. Исправьте код на странице, удалив выражения два выходных данных, которые вы добавили и удалив код, который изменению значения дня недели. Оставшиеся, полный блок кода выглядит как в следующем примере:

    [!code-cshtml[Main](introduction-to-debugging/samples/sample4.cshtml)]
7. Откройте страницу в браузере. Это время вы видите правильные сообщение, отображаемое для конкретного дня недели.

## <a name="using-the-objectinfo-helper-to-display-object-values"></a>Использование вспомогательного метода ObjectInfo для отображения значения объекта

`ObjectInfo` Вспомогательный отображаются тип и значение каждого объекта, передайте в него. Его можно использовать для просмотра значения переменных и объектов в коде (как это было сделано с выражениями выходные данные в предыдущем примере), а также можно увидеть тип информации об объекте данных.

1. Откройте файл с именем *OutputExpression.cshtml* , созданную ранее.
2. Замените весь код в страницы следующий блок кода:

    [!code-html[Main](introduction-to-debugging/samples/sample5.html)]
3. Сохраните и откройте страницу в браузере.

    ![Отладка 4](introduction-to-debugging/_static/image3.jpg)

    В этом примере `ObjectInfo` вспомогательный объект отображает два элемента:

   - Тип. Для первой переменной, тип — `DayOfWeek`. Для второй переменной, тип — `String`.
   - Значение. В этом случае, так как вы уже отображается значение переменной приветствие страницы, значение отображается снова при передаче переменной для `ObjectInfo`.

     Для более сложных объектов `ObjectInfo` вспомогательный может вмещать больше информации &#8212; по сути, он может отображать типы и значения всех свойств объекта.

## <a name="using-debugging-tools-in-visual-studio"></a>С помощью средства отладки в Visual Studio

Более широкие возможности отладки, используйте [Visual Studio](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017). С помощью Visual Studio можно установить точку останова в коде строки, который требуется проверить.

![Задание точки останова](introduction-to-debugging/_static/image1.png)

При тестировании веб-сайта, выполнение кода останавливается в точке останова.

![достижения точки останова](introduction-to-debugging/_static/image2.png)

Можно просмотреть текущие значения переменных и пошаговое прохождение кода строке.

![значения см. в разделе](introduction-to-debugging/_static/image3.png)

Сведения об использовании интегрированный отладчик в Visual Studio для отладки ASP.NET Razor pages см. в разделе [программирование веб-страниц ASP.NET (Razor) с помощью Visual Studio](https://go.microsoft.com/fwlink/?LinkId=205854).

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Программирование веб-страниц ASP.NET (Razor) с помощью Visual Studio](https://go.microsoft.com/fwlink/?LinkId=205854)
- [Переменные сервера IIS](https://msdn.microsoft.com/library/ms524602(VS.90).aspx) (MSDN)
- [Переменные среды распознан](https://technet.microsoft.com/library/dd560744(WS.10).aspx) (TechNet)
