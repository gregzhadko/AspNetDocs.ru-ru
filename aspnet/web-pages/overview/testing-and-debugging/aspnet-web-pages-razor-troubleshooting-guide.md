---
uid: web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
title: Руководство по устранению неполадок веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: В этой статье описываются проблемы, которые могут возникнуть при работе с веб-страницы ASP.NET (Razor) и предлагаемыми решениями. Версии программного обеспечения ASP.NET Web pag...
ms.author: riande
ms.date: 02/10/2014
ms.assetid: 2a2c1833-0bfe-4e2e-9cc0-341b52c7b121
msc.legacyurl: /web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
msc.type: authoredcontent
ms.openlocfilehash: fc03767c16f46c1e282d24ee3a7df2409a7c38bb
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78473382"
---
# <a name="aspnet-web-pages-razor-troubleshooting-guide"></a>Руководство по устранению неполадок веб-страниц ASP.NET (Razor)

от [Tom фитзмаккен](https://github.com/tfitzmac)

> В этой статье описываются проблемы, которые могут возникнуть при работе с веб-страницы ASP.NET (Razor) и предлагаемыми решениями.
> 
> ## <a name="software-versions"></a>Версии программного обеспечения
> 
> 
> - Веб-страницы ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с веб-страницы ASP.NET 2 и веб-страницы ASP.NET 1,0.

Этот раздел состоит из следующих подразделов.

- [Проблемы с выполняющимися страницами](#Issues_Running_.cshtml_Pages)
- [Проблемы с кодом Razor](#IssuesWithRazorCode)
- [Проблемы с безопасностью и членством](#membership)
- [Проблемы с отправкой электронной почты](#email)
- [Дополнительные ресурсы](#AdditionalResources)

Общие вопросы см. в разделе [часто ЗАдаваемые вопросы о веб-страницы ASP.NET (Razor)](https://go.microsoft.com/fwlink/?LinkId=253000).

<a id="Issues_Running_.cshtml_Pages"></a>
## <a name="issues-with-running-pages"></a>Проблемы с выполняющимися страницами

Различные проблемы могут препятствовать правильной работе *. cshtml* и *. vbhtml* страниц. В этом разделе перечислены распространенные сообщения об ошибках и возможные причины.

### <a name="http-error-403---forbidden-access-is-denied"></a>Ошибка HTTP 403-запрещено: доступ запрещен

*У вас нет разрешения на просмотр этого каталога или страницы с использованием предоставленных учетных данных.*

Эта ошибка может возникать, если на сервере не запущена правильная версия .NET Framework. Убедитесь, что на компьютере, на котором работает сервер (локально или удаленно) установлено по крайней мере .NET Framework 4. Также убедитесь, что приложение настроено для запуска правильной версии.

Если эта проблема возникает локально во время работы в WebMatrix, щелкните рабочую область **сайт** , а затем в разделе **Параметры**щелкните элемент TreeView. В списке **выберите версию .NET Framework** выберите **.NET 4 (интегрированная)** . Если эта версия уже задана, попробуйте запустить WebMatrix от имени администратора.

Убедитесь, что в корневом каталоге веб-сайта есть по крайней мере один файл *. cshtml* .

Если вы видите эту ошибку, если веб-сервер находится на удаленном сервере, обратитесь к администратору сервера. Убедитесь, что на сервере установлен .NET Framework 4 или более поздней версии. Также убедитесь, что приложение выполняется в пуле приложений, настроенном для использования этой версии the.NET Framework.

Если вы управляете сервером, убедитесь, что на нем выполняется правильная версия .NET Framework. Вы также можете попробовать восстановить установку, выполнив команду `aspnet_regiis -iru`. (Например, если службы IIS устанавливаются после установки .NET Framework, службы IIS не будут правильно настроены для запуска страниц ASP.NET.) Дополнительные сведения см. в разделе [ASP.NET IIS Registration Tool (Aspnet\_regiis. exe)](https://msdn.microsoft.com/library/k6h9cz8h(v=vs.100).aspx).

### <a name="http-error-40314---forbidden"></a>Ошибка HTTP 403,14-запрещено

*Веб-сервер настроен для отсутствия списка содержимого этого каталога.*

Эта ошибка может возникать, если вы запрашиваете защищенный ресурс (например, файл *Web. config* ) или находится в защищенной папке (например, *приложение\_данные* или *приложение\_код*).

### <a name="http-error-40417---not-found"></a>Ошибка HTTP 404,17-не найдено

*Запрошенное содержимое выглядит как скрипт и не будет обрабатываться обработчиком статических файлов.*

Эта ошибка может возникать, если сервер неправильно настроен для использования .NET Framework 4 или более поздней версии, и поэтому не распознает код в блоках `@{ }`. См. описание ранее для *ошибки HTTP 403-запрещено: доступ запрещен*.

### <a name="http-error-4047---not-found"></a>Ошибка HTTP 404,7-не найдено

*Модуль фильтрации запросов настроен для запрета расширения файла*

Эта ошибка может возникать, если расширения *. cshtml* или *. vbhtml* были явно заблокированы на сервере. Симптомом этой проблемы является то, что URL-адреса работают, если они не включают расширение, но URL-адреса, которые содержат *. cshtml* или *. vbhtml* , не работают. Возможным решением является повторное включение расширений в файле *Web. config* сайта. В следующем примере показано, как включить расширение *CSHTML* .

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample1.xml?highlight=5-6)]

### <a name="http-error-4048---not-found"></a>Ошибка HTTP 404,8-не найдено

*Модуль фильтрации запросов настроен для запрета пути в URL-адресе, содержащем раздел Хидденсегмент.*

Эта ошибка может возникать, если вы запрашиваете защищенный ресурс (например, файл *Web. config* ) или находится в защищенной папке (например, *приложение\_данные* или *приложение\_код*).

### <a name="this-type-of-page-is-not-served-server-error-in--application"></a>Этот тип страницы не обслуживается (ошибка сервера в приложении "/")

См. описание ранее ошибки HTTP 404,17.

<a id="IssuesWithRazorCode"></a>
## <a name="issues-with-razor-code"></a>Проблемы с кодом Razor

### <a name="the-name-class-does-not-exist-in-the-current-context"></a>Имя "*класс*" не существует в текущем контексте

Часто причиной возникновения этой ошибки является то, что `class` ссылается на вспомогательную функцию, но вспомогательный модуль не установлен. Например, если вы попытаетесь использовать вспомогательный метод, но если вы не установили пакет из NuGet, вы увидите эту ошибку. Используйте коллекцию в WebMatrix, чтобы найти и установить вспомогательную функцию.

Если вспомогательный модуль установлен, но страница по-прежнему не распознает ее, попробуйте добавить в код инструкцию добавления `using`. В операторе `using` сослаться на пространство имен, включающее вспомогательное приложение. Например, основные вспомогательные методы в пакете вспомогательных веб-функций ASP.NET находятся в пространстве имен `System.Web.Helpers`. В верхней части страницы, где вы хотите использовать вспомогательную функцию, добавьте следующую строку:

`@using Microsoft.Web.Helpers;`

<a id="membership"></a>
## <a name="issues-with-security-and-membership"></a>Проблемы с безопасностью и членством

При использовании встроенной системы безопасности (членства) в веб-страницы ASP.NET (Razor) могут возникнуть следующие проблемы.

### <a name="to-call-this-method-the-membershipprovider-property-must-be-an-instance-of-extendedmembershipprovider"></a>Для вызова этого метода свойство членства. Provider должно быть экземпляром "Екстендедмембершиппровидер"

Эта ошибка может означать, что `AspNetSqlMembershipProvider` класс не настроен. (Симптомом является то, что сайт работает нормально локально, но вызывает эту ошибку при публикации на сервере поставщика услуг размещения.) Одним из исправлений для этой проблемы является явное включение простого членства путем добавления следующего элемента в файл *Web. config* сайта:

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample2.xml?highlight=6)]

<a id="email"></a>
## <a name="issues-with-sending-email"></a>Проблемы с отправкой электронной почты

Проблемы с отправкой электронной почты могут быть непростыми в отладке. Первоначальная проблема может быть связана с тем, что не удается подключиться к SMTP-серверу. Если подключение установлено успешно, ASP.NET передает сообщение на SMTP-сервер. Однако могут возникнуть проблемы с самим сообщением, которое не позволяет SMTP-серверу отправлять его.

Если приложение не отправляет сообщение электронной почты, попробуйте выполнить следующие действия.

- Имя SMTP-сервера часто имеет примерно `smtp.provider.com` или `smtp.provider.net`. Однако при публикации сайта у поставщика услуг размещения на этом этапе имя SMTP-сервера может быть `localhost`. Эта ситуация возникает из-за того, что после публикации, когда сайт работает на сервере поставщика, сервер SMTP может быть локальным с точки зрения приложения. Это изменение в именах серверов может означать, что необходимо изменить имя SMTP-сервера как часть процесса публикации.
- Номер порта обычно равен 25. Однако для некоторых поставщиков требуется использовать порт 587 или другой порт. Уточните у владельца SMTP-сервера, какой номер порта предполагается использовать.
- Убедитесь, что используются правильные учетные данные. Если сайт опубликован на поставщике услуг размещения, используйте учетные данные, указанные поставщиком, для электронной почты. Эти учетные данные могут отличаться от учетных данных, используемых для публикации.
- Иногда вам не нужны учетные данные. Если вы отправляете сообщение электронной почты с помощью личного поставщика услуг Интернета, ваш поставщик электронной почты может уже узнавать ваши учетные данные. После публикации может потребоваться использовать другие учетные данные, чем при тестировании на локальном компьютере.
- Если поставщик электронной почты использует шифрование, задайте для параметра `WebMail.EnableSsl` значение `true`.

Если при отправке сообщения электронной почты возникает ошибка, может появиться стандартное сообщение об ошибке ASP.NET, которое выглядит следующим образом:

![ASP.NET сообщение об ошибке при возникновении проблемы с электронной почтой](aspnet-web-pages-razor-troubleshooting-guide/_static/image1.png)

Можно также отлаживать проблемы с отправкой электронной почты с помощью блока `try-catch`, как показано в следующем примере. При использовании блока `try-catch` ASP.NET не отображает стандартные сообщения об ошибках. Вместо этого можно записать ошибку в `catch` части блока.

[!code-cshtml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample3.cshtml)]

Замените соответствующие значения для `your-SMTP-server-name`и т. д. Ниже приведены некоторые сообщения об ошибках, которые могут появиться в следующих случаях.

- *Сбой при отправке почты.*

    -или-

    *Попытка подключения не удалась, так как подключенная сторона не ответила должным образом по истечении определенного периода времени или не удалось установить соединение, так как не удалось ответить подключенному узлу*

    Эта ошибка обычно означает, что приложению не удалось подключиться к SMTP-серверу. Проверьте имя сервера и номер порта.
- *Почтовый ящик недоступен. Ответ сервера: 5.1.0 &lt;someuser@invaliddomain&gt; отклонил Отправитель: недопустимый домен отправителя*

    Это сообщение может означать, что адрес `From` неверен или отсутствует.
- *Указанная строка не является формой, необходимой для адреса электронной почты.*

    Эта ошибка может означать, что значения свойств `To` или `From` не распознаны как адреса электронной почты. (ASP.NET не может проверить допустимость адреса электронной почты, только если он имеет правильный формат, например *name@domain.com* .)

> [!NOTE]
> Перед публикацией страницы на активном сайте Удалите разметку, отображающую ошибку (`@errorMessage`). Не рекомендуется, чтобы пользователи могли видеть сообщения об ошибках, получаемые с сервера.

<a id="AdditionalResources"></a>
## <a name="additional-resources"></a>Дополнительные ресурсы

[Вопросы и ответы по веб-страницам ASP.NET (Razor)](https://go.microsoft.com/fwlink/?LinkId=253000)

Форум [WebMatrix и веб-страницы ASP.NET](https://forums.asp.net/1224.aspx/1?WebMatrix) на веб-сайте ASP.NET
