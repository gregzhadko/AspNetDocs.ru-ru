---
uid: web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
title: Руководство по устранению неполадок веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: В этой статье описываются проблемы, которые могут возникнуть при работе с веб-страницы ASP.NET (Razor) и предлагаемыми решениями. Версии программного обеспечения ASP.NET Web pag...
ms.author: riande
ms.date: 02/10/2014
ms.assetid: 2a2c1833-0bfe-4e2e-9cc0-341b52c7b121
msc.legacyurl: /web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
msc.type: authoredcontent
ms.openlocfilehash: fc03767c16f46c1e282d24ee3a7df2409a7c38bb
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78473382"
---
# <a name="aspnet-web-pages-razor-troubleshooting-guide"></a><span data-ttu-id="49dd5-104">Руководство по устранению неполадок веб-страниц ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="49dd5-104">ASP.NET Web Pages (Razor) Troubleshooting Guide</span></span>

<span data-ttu-id="49dd5-105">от [Tom фитзмаккен](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="49dd5-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="49dd5-106">В этой статье описываются проблемы, которые могут возникнуть при работе с веб-страницы ASP.NET (Razor) и предлагаемыми решениями.</span><span class="sxs-lookup"><span data-stu-id="49dd5-106">This article describes issues that you might have when working with ASP.NET Web Pages (Razor) and some suggested solutions.</span></span>
> 
> ## <a name="software-versions"></a><span data-ttu-id="49dd5-107">Версии программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="49dd5-107">Software versions</span></span>
> 
> 
> - <span data-ttu-id="49dd5-108">Веб-страницы ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="49dd5-108">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="49dd5-109">Этот учебник также работает с веб-страницы ASP.NET 2 и веб-страницы ASP.NET 1,0.</span><span class="sxs-lookup"><span data-stu-id="49dd5-109">This tutorial also works with ASP.NET Web Pages 2 and ASP.NET Web Pages 1.0.</span></span>

<span data-ttu-id="49dd5-110">Этот раздел состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="49dd5-110">This topic contains the following sections:</span></span>

- [<span data-ttu-id="49dd5-111">Проблемы с выполняющимися страницами</span><span class="sxs-lookup"><span data-stu-id="49dd5-111">Issues with Running Pages</span></span>](#Issues_Running_.cshtml_Pages)
- [<span data-ttu-id="49dd5-112">Проблемы с кодом Razor</span><span class="sxs-lookup"><span data-stu-id="49dd5-112">Issues with Razor Code</span></span>](#IssuesWithRazorCode)
- [<span data-ttu-id="49dd5-113">Проблемы с безопасностью и членством</span><span class="sxs-lookup"><span data-stu-id="49dd5-113">Issues with Security and Membership</span></span>](#membership)
- [<span data-ttu-id="49dd5-114">Проблемы с отправкой электронной почты</span><span class="sxs-lookup"><span data-stu-id="49dd5-114">Issues with Sending Email</span></span>](#email)
- [<span data-ttu-id="49dd5-115">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="49dd5-115">Additional Resources</span></span>](#AdditionalResources)

<span data-ttu-id="49dd5-116">Общие вопросы см. в разделе [часто ЗАдаваемые вопросы о веб-страницы ASP.NET (Razor)](https://go.microsoft.com/fwlink/?LinkId=253000).</span><span class="sxs-lookup"><span data-stu-id="49dd5-116">For general questions, see [ASP.NET Web Pages (Razor) FAQ](https://go.microsoft.com/fwlink/?LinkId=253000).</span></span>

<a id="Issues_Running_.cshtml_Pages"></a>
## <a name="issues-with-running-pages"></a><span data-ttu-id="49dd5-117">Проблемы с выполняющимися страницами</span><span class="sxs-lookup"><span data-stu-id="49dd5-117">Issues with Running Pages</span></span>

<span data-ttu-id="49dd5-118">Различные проблемы могут препятствовать правильной работе *. cshtml* и *. vbhtml* страниц.</span><span class="sxs-lookup"><span data-stu-id="49dd5-118">A variety of issues can prevent *.cshtml* and *.vbhtml* pages from running properly.</span></span> <span data-ttu-id="49dd5-119">В этом разделе перечислены распространенные сообщения об ошибках и возможные причины.</span><span class="sxs-lookup"><span data-stu-id="49dd5-119">This section lists common error messages and likely causes.</span></span>

### <a name="http-error-403---forbidden-access-is-denied"></a><span data-ttu-id="49dd5-120">Ошибка HTTP 403-запрещено: доступ запрещен</span><span class="sxs-lookup"><span data-stu-id="49dd5-120">HTTP Error 403 - Forbidden: Access is denied</span></span>

<span data-ttu-id="49dd5-121">*У вас нет разрешения на просмотр этого каталога или страницы с использованием предоставленных учетных данных.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-121">*You do not have permission to view this directory or page using the credentials that you supplied.*</span></span>

<span data-ttu-id="49dd5-122">Эта ошибка может возникать, если на сервере не запущена правильная версия .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="49dd5-122">This error can occur if the server is not running the correct version of the .NET Framework.</span></span> <span data-ttu-id="49dd5-123">Убедитесь, что на компьютере, на котором работает сервер (локально или удаленно) установлено по крайней мере .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="49dd5-123">Make sure that the computer that's running the server (locally or remotely) has at least the .NET Framework 4 installed.</span></span> <span data-ttu-id="49dd5-124">Также убедитесь, что приложение настроено для запуска правильной версии.</span><span class="sxs-lookup"><span data-stu-id="49dd5-124">Also make sure that the application itself is configured to run the right version.</span></span>

<span data-ttu-id="49dd5-125">Если эта проблема возникает локально во время работы в WebMatrix, щелкните рабочую область **сайт** , а затем в разделе **Параметры**щелкните элемент TreeView.</span><span class="sxs-lookup"><span data-stu-id="49dd5-125">If you see this problem locally while working in WebMatrix, click the **Site** workspace, and then in the treeview click **Settings**.</span></span> <span data-ttu-id="49dd5-126">В списке **выберите версию .NET Framework** выберите **.NET 4 (интегрированная)** .</span><span class="sxs-lookup"><span data-stu-id="49dd5-126">In the **Select .NET Framework Version** list, select **.NET 4 (Integrated)**.</span></span> <span data-ttu-id="49dd5-127">Если эта версия уже задана, попробуйте запустить WebMatrix от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="49dd5-127">If this version is already set, try running WebMatrix as an administrator.</span></span>

<span data-ttu-id="49dd5-128">Убедитесь, что в корневом каталоге веб-сайта есть по крайней мере один файл *. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="49dd5-128">Make sure that the root of your website has at least one *.cshtml* file in it.</span></span>

<span data-ttu-id="49dd5-129">Если вы видите эту ошибку, если веб-сервер находится на удаленном сервере, обратитесь к администратору сервера.</span><span class="sxs-lookup"><span data-stu-id="49dd5-129">If you see this error when the web server is on a remote server, contact the server administrator.</span></span> <span data-ttu-id="49dd5-130">Убедитесь, что на сервере установлен .NET Framework 4 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="49dd5-130">Make sure that the server has the .NET Framework 4 or later installed.</span></span> <span data-ttu-id="49dd5-131">Также убедитесь, что приложение выполняется в пуле приложений, настроенном для использования этой версии the.NET Framework.</span><span class="sxs-lookup"><span data-stu-id="49dd5-131">Also make sure that the application is running in an application pool that's configured to use that version of the.NET Framework.</span></span>

<span data-ttu-id="49dd5-132">Если вы управляете сервером, убедитесь, что на нем выполняется правильная версия .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="49dd5-132">If you have control over the server, make sure it's running the correct version of the .NET Framework.</span></span> <span data-ttu-id="49dd5-133">Вы также можете попробовать восстановить установку, выполнив команду `aspnet_regiis -iru`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-133">You might also try repairing the installation by running the `aspnet_regiis -iru` command.</span></span> <span data-ttu-id="49dd5-134">(Например, если службы IIS устанавливаются после установки .NET Framework, службы IIS не будут правильно настроены для запуска страниц ASP.NET.) Дополнительные сведения см. в разделе [ASP.NET IIS Registration Tool (Aspnet\_regiis. exe)](https://msdn.microsoft.com/library/k6h9cz8h(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="49dd5-134">(For example, if you install IIS after you install the .NET Framework, IIS will not be correctly configured to run ASP.NET pages.) For more information, see [ASP.NET IIS Registration Tool (Aspnet\_regiis.exe)](https://msdn.microsoft.com/library/k6h9cz8h(v=vs.100).aspx).</span></span>

### <a name="http-error-40314---forbidden"></a><span data-ttu-id="49dd5-135">Ошибка HTTP 403,14-запрещено</span><span class="sxs-lookup"><span data-stu-id="49dd5-135">HTTP Error 403.14 - Forbidden</span></span>

<span data-ttu-id="49dd5-136">*Веб-сервер настроен для отсутствия списка содержимого этого каталога.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-136">*The Web server is configured to not list the contents of this directory.*</span></span>

<span data-ttu-id="49dd5-137">Эта ошибка может возникать, если вы запрашиваете защищенный ресурс (например, файл *Web. config* ) или находится в защищенной папке (например, *приложение\_данные* или *приложение\_код*).</span><span class="sxs-lookup"><span data-stu-id="49dd5-137">This error can occur if you request a resource that's protected (like the *Web.config* file) or that's in a folder that's protected (like *App\_Data* or *App\_Code*).</span></span>

### <a name="http-error-40417---not-found"></a><span data-ttu-id="49dd5-138">Ошибка HTTP 404,17-не найдено</span><span class="sxs-lookup"><span data-stu-id="49dd5-138">HTTP Error 404.17 - Not Found</span></span>

<span data-ttu-id="49dd5-139">*Запрошенное содержимое выглядит как скрипт и не будет обрабатываться обработчиком статических файлов.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-139">*The requested content appears to be script and will not be served by the static file handler.*</span></span>

<span data-ttu-id="49dd5-140">Эта ошибка может возникать, если сервер неправильно настроен для использования .NET Framework 4 или более поздней версии, и поэтому не распознает код в блоках `@{ }`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-140">This error can occur if the server is not configured correctly to use the .NET Framework 4 or later, and therefore does not recognize the code in `@{ }` blocks.</span></span> <span data-ttu-id="49dd5-141">См. описание ранее для *ошибки HTTP 403-запрещено: доступ запрещен*.</span><span class="sxs-lookup"><span data-stu-id="49dd5-141">See the description earlier for *HTTP Error 403 - Forbidden: Access is denied*.</span></span>

### <a name="http-error-4047---not-found"></a><span data-ttu-id="49dd5-142">Ошибка HTTP 404,7-не найдено</span><span class="sxs-lookup"><span data-stu-id="49dd5-142">HTTP Error 404.7 - Not Found</span></span>

<span data-ttu-id="49dd5-143">*Модуль фильтрации запросов настроен для запрета расширения файла*</span><span class="sxs-lookup"><span data-stu-id="49dd5-143">*The request filtering module is configured to deny the file extension*</span></span>

<span data-ttu-id="49dd5-144">Эта ошибка может возникать, если расширения *. cshtml* или *. vbhtml* были явно заблокированы на сервере.</span><span class="sxs-lookup"><span data-stu-id="49dd5-144">This error can occur if *.cshtml* or *.vbhtml* extensions have been explicitly blocked on the server.</span></span> <span data-ttu-id="49dd5-145">Симптомом этой проблемы является то, что URL-адреса работают, если они не включают расширение, но URL-адреса, которые содержат *. cshtml* или *. vbhtml* , не работают.</span><span class="sxs-lookup"><span data-stu-id="49dd5-145">A symptom of this problem is that URLs work when they do not include the extension, but URLs that include *.cshtml* or *.vbhtml* do not work.</span></span> <span data-ttu-id="49dd5-146">Возможным решением является повторное включение расширений в файле *Web. config* сайта.</span><span class="sxs-lookup"><span data-stu-id="49dd5-146">A possible solution is to re-enable the extensions in the site's *Web.config* file.</span></span> <span data-ttu-id="49dd5-147">В следующем примере показано, как включить расширение *CSHTML* .</span><span class="sxs-lookup"><span data-stu-id="49dd5-147">The following example shows how to enable the *.cshtml* extension.</span></span>

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample1.xml?highlight=5-6)]

### <a name="http-error-4048---not-found"></a><span data-ttu-id="49dd5-148">Ошибка HTTP 404,8-не найдено</span><span class="sxs-lookup"><span data-stu-id="49dd5-148">HTTP Error 404.8 - Not Found</span></span>

<span data-ttu-id="49dd5-149">*Модуль фильтрации запросов настроен для запрета пути в URL-адресе, содержащем раздел Хидденсегмент.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-149">*The request filtering module is configured to deny a path in the URL that contains a hiddenSegment section.*</span></span>

<span data-ttu-id="49dd5-150">Эта ошибка может возникать, если вы запрашиваете защищенный ресурс (например, файл *Web. config* ) или находится в защищенной папке (например, *приложение\_данные* или *приложение\_код*).</span><span class="sxs-lookup"><span data-stu-id="49dd5-150">This error can occur if you request a resource that's protected (like the *Web.config* file) or that's in a folder that's protected (like *App\_Data* or *App\_Code*).</span></span>

### <a name="this-type-of-page-is-not-served-server-error-in--application"></a><span data-ttu-id="49dd5-151">Этот тип страницы не обслуживается (ошибка сервера в приложении "/")</span><span class="sxs-lookup"><span data-stu-id="49dd5-151">This type of page is not served (Server Error in '/' Application)</span></span>

<span data-ttu-id="49dd5-152">См. описание ранее ошибки HTTP 404,17.</span><span class="sxs-lookup"><span data-stu-id="49dd5-152">See the description earlier for HTTP Error 404.17.</span></span>

<a id="IssuesWithRazorCode"></a>
## <a name="issues-with-razor-code"></a><span data-ttu-id="49dd5-153">Проблемы с кодом Razor</span><span class="sxs-lookup"><span data-stu-id="49dd5-153">Issues with Razor code</span></span>

### <a name="the-name-class-does-not-exist-in-the-current-context"></a><span data-ttu-id="49dd5-154">Имя "*класс*" не существует в текущем контексте</span><span class="sxs-lookup"><span data-stu-id="49dd5-154">The name '*class*' does not exist in the current context</span></span>

<span data-ttu-id="49dd5-155">Часто причиной возникновения этой ошибки является то, что `class` ссылается на вспомогательную функцию, но вспомогательный модуль не установлен.</span><span class="sxs-lookup"><span data-stu-id="49dd5-155">Often, a reason you see this error is that `class` references a helper, but the helper is not installed.</span></span> <span data-ttu-id="49dd5-156">Например, если вы попытаетесь использовать вспомогательный метод, но если вы не установили пакет из NuGet, вы увидите эту ошибку.</span><span class="sxs-lookup"><span data-stu-id="49dd5-156">For example, if you try to use a helper, but if you haven't installed the package from NuGet, you'll see this error.</span></span> <span data-ttu-id="49dd5-157">Используйте коллекцию в WebMatrix, чтобы найти и установить вспомогательную функцию.</span><span class="sxs-lookup"><span data-stu-id="49dd5-157">Use the Gallery in WebMatrix to find and install the helper.</span></span>

<span data-ttu-id="49dd5-158">Если вспомогательный модуль установлен, но страница по-прежнему не распознает ее, попробуйте добавить в код инструкцию добавления `using`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-158">If the helper is installed, but the page still doesn't recognize it, try adding add a `using` statement to the code.</span></span> <span data-ttu-id="49dd5-159">В операторе `using` сослаться на пространство имен, включающее вспомогательное приложение.</span><span class="sxs-lookup"><span data-stu-id="49dd5-159">In the `using` statement, reference the namespace that includes the helper.</span></span> <span data-ttu-id="49dd5-160">Например, основные вспомогательные методы в пакете вспомогательных веб-функций ASP.NET находятся в пространстве имен `System.Web.Helpers`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-160">For example, the basic helpers that are in the ASP.NET Web Helpers package are in the `System.Web.Helpers` namespace.</span></span> <span data-ttu-id="49dd5-161">В верхней части страницы, где вы хотите использовать вспомогательную функцию, добавьте следующую строку:</span><span class="sxs-lookup"><span data-stu-id="49dd5-161">At the top of the page where you want to use the helper, add this line:</span></span>

`@using Microsoft.Web.Helpers;`

<a id="membership"></a>
## <a name="issues-with-security-and-membership"></a><span data-ttu-id="49dd5-162">Проблемы с безопасностью и членством</span><span class="sxs-lookup"><span data-stu-id="49dd5-162">Issues with Security and Membership</span></span>

<span data-ttu-id="49dd5-163">При использовании встроенной системы безопасности (членства) в веб-страницы ASP.NET (Razor) могут возникнуть следующие проблемы.</span><span class="sxs-lookup"><span data-stu-id="49dd5-163">If you are using the built-in security (membership) system in ASP.NET Web Pages (Razor), you might encounter the following issues.</span></span>

### <a name="to-call-this-method-the-membershipprovider-property-must-be-an-instance-of-extendedmembershipprovider"></a><span data-ttu-id="49dd5-164">Для вызова этого метода свойство членства. Provider должно быть экземпляром "Екстендедмембершиппровидер"</span><span class="sxs-lookup"><span data-stu-id="49dd5-164">To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider"</span></span>

<span data-ttu-id="49dd5-165">Эта ошибка может означать, что `AspNetSqlMembershipProvider` класс не настроен.</span><span class="sxs-lookup"><span data-stu-id="49dd5-165">This error can indicate that no `AspNetSqlMembershipProvider` class is configured.</span></span> <span data-ttu-id="49dd5-166">(Симптомом является то, что сайт работает нормально локально, но вызывает эту ошибку при публикации на сервере поставщика услуг размещения.) Одним из исправлений для этой проблемы является явное включение простого членства путем добавления следующего элемента в файл *Web. config* сайта:</span><span class="sxs-lookup"><span data-stu-id="49dd5-166">(A symptom is that the site works fine locally but throws this error when you publish it to a hosting provider's server.) One fix for this problem is to explicitly enable simple membership by adding the following to the site's *Web.config* file:</span></span>

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample2.xml?highlight=6)]

<a id="email"></a>
## <a name="issues-with-sending-email"></a><span data-ttu-id="49dd5-167">Проблемы с отправкой электронной почты</span><span class="sxs-lookup"><span data-stu-id="49dd5-167">Issues with Sending Email</span></span>

<span data-ttu-id="49dd5-168">Проблемы с отправкой электронной почты могут быть непростыми в отладке.</span><span class="sxs-lookup"><span data-stu-id="49dd5-168">Problems with sending email can be challenging to debug.</span></span> <span data-ttu-id="49dd5-169">Первоначальная проблема может быть связана с тем, что не удается подключиться к SMTP-серверу.</span><span class="sxs-lookup"><span data-stu-id="49dd5-169">An initial problem can be that you can't connect to the SMTP server.</span></span> <span data-ttu-id="49dd5-170">Если подключение установлено успешно, ASP.NET передает сообщение на SMTP-сервер.</span><span class="sxs-lookup"><span data-stu-id="49dd5-170">If the connection is successful, ASP.NET hands the message off to the SMTP server.</span></span> <span data-ttu-id="49dd5-171">Однако могут возникнуть проблемы с самим сообщением, которое не позволяет SMTP-серверу отправлять его.</span><span class="sxs-lookup"><span data-stu-id="49dd5-171">However, there can be problems with the message itself that prevents the SMTP server from sending it.</span></span>

<span data-ttu-id="49dd5-172">Если приложение не отправляет сообщение электронной почты, попробуйте выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="49dd5-172">If your application does not successfully send email, try the following:</span></span>

- <span data-ttu-id="49dd5-173">Имя SMTP-сервера часто имеет примерно `smtp.provider.com` или `smtp.provider.net`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-173">The SMTP server name is often something like `smtp.provider.com` or `smtp.provider.net`.</span></span> <span data-ttu-id="49dd5-174">Однако при публикации сайта у поставщика услуг размещения на этом этапе имя SMTP-сервера может быть `localhost`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-174">However, if you publish your site to a hosting provider, the SMTP server name at that point might be `localhost`.</span></span> <span data-ttu-id="49dd5-175">Эта ситуация возникает из-за того, что после публикации, когда сайт работает на сервере поставщика, сервер SMTP может быть локальным с точки зрения приложения.</span><span class="sxs-lookup"><span data-stu-id="49dd5-175">This situation occurs because after you've published and your site is running on the provider's server, the SMTP server might be local from the perspective of your application.</span></span> <span data-ttu-id="49dd5-176">Это изменение в именах серверов может означать, что необходимо изменить имя SMTP-сервера как часть процесса публикации.</span><span class="sxs-lookup"><span data-stu-id="49dd5-176">This change in server names might mean that you have to change the SMTP server name as part of your publishing process.</span></span>
- <span data-ttu-id="49dd5-177">Номер порта обычно равен 25.</span><span class="sxs-lookup"><span data-stu-id="49dd5-177">The port number is usually 25.</span></span> <span data-ttu-id="49dd5-178">Однако для некоторых поставщиков требуется использовать порт 587 или другой порт.</span><span class="sxs-lookup"><span data-stu-id="49dd5-178">However, some providers require you to use port 587 or some other port.</span></span> <span data-ttu-id="49dd5-179">Уточните у владельца SMTP-сервера, какой номер порта предполагается использовать.</span><span class="sxs-lookup"><span data-stu-id="49dd5-179">Check with the owner of the SMTP server what port number they expect you to use.</span></span>
- <span data-ttu-id="49dd5-180">Убедитесь, что используются правильные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="49dd5-180">Make sure that you use the right credentials.</span></span> <span data-ttu-id="49dd5-181">Если сайт опубликован на поставщике услуг размещения, используйте учетные данные, указанные поставщиком, для электронной почты.</span><span class="sxs-lookup"><span data-stu-id="49dd5-181">If you've published your site to a hosting provider, use the credentials that the provider has specifically indicated are for email.</span></span> <span data-ttu-id="49dd5-182">Эти учетные данные могут отличаться от учетных данных, используемых для публикации.</span><span class="sxs-lookup"><span data-stu-id="49dd5-182">These credentials might be different from the credentials you use to publish.</span></span>
- <span data-ttu-id="49dd5-183">Иногда вам не нужны учетные данные.</span><span class="sxs-lookup"><span data-stu-id="49dd5-183">Sometimes you don't need credentials at all.</span></span> <span data-ttu-id="49dd5-184">Если вы отправляете сообщение электронной почты с помощью личного поставщика услуг Интернета, ваш поставщик электронной почты может уже узнавать ваши учетные данные.</span><span class="sxs-lookup"><span data-stu-id="49dd5-184">If you're sending email by using your personal ISP, your email provider might already know your credentials.</span></span> <span data-ttu-id="49dd5-185">После публикации может потребоваться использовать другие учетные данные, чем при тестировании на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="49dd5-185">After you publish, you might need to use different credentials than when you test on your local computer.</span></span>
- <span data-ttu-id="49dd5-186">Если поставщик электронной почты использует шифрование, задайте для параметра `WebMail.EnableSsl` значение `true`.</span><span class="sxs-lookup"><span data-stu-id="49dd5-186">If your email provider uses encryption, set `WebMail.EnableSsl` to `true`.</span></span>

<span data-ttu-id="49dd5-187">Если при отправке сообщения электронной почты возникает ошибка, может появиться стандартное сообщение об ошибке ASP.NET, которое выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="49dd5-187">If there is an error sending email, you might see a standard ASP.NET error message, which looks like this:</span></span>

![ASP.NET сообщение об ошибке при возникновении проблемы с электронной почтой](aspnet-web-pages-razor-troubleshooting-guide/_static/image1.png)

<span data-ttu-id="49dd5-189">Можно также отлаживать проблемы с отправкой электронной почты с помощью блока `try-catch`, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="49dd5-189">You can also debug problems with sending email by using a `try-catch` block, as in the following example.</span></span> <span data-ttu-id="49dd5-190">При использовании блока `try-catch` ASP.NET не отображает стандартные сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="49dd5-190">When you use a `try-catch` block, ASP.NET does not display its standard error messages.</span></span> <span data-ttu-id="49dd5-191">Вместо этого можно записать ошибку в `catch` части блока.</span><span class="sxs-lookup"><span data-stu-id="49dd5-191">Instead, you can capture the error in the `catch` portion of the block.</span></span>

[!code-cshtml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample3.cshtml)]

<span data-ttu-id="49dd5-192">Замените соответствующие значения для `your-SMTP-server-name`и т. д.</span><span class="sxs-lookup"><span data-stu-id="49dd5-192">Substitute the appropriate values for `your-SMTP-server-name`, and so on.</span></span> <span data-ttu-id="49dd5-193">Ниже приведены некоторые сообщения об ошибках, которые могут появиться в следующих случаях.</span><span class="sxs-lookup"><span data-stu-id="49dd5-193">Some of the error messages you might see this way include the following:</span></span>

- <span data-ttu-id="49dd5-194">*Сбой при отправке почты.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-194">*Failure sending mail.*</span></span>

    <span data-ttu-id="49dd5-195">-или-</span><span class="sxs-lookup"><span data-stu-id="49dd5-195">-or-</span></span>

    <span data-ttu-id="49dd5-196">*Попытка подключения не удалась, так как подключенная сторона не ответила должным образом по истечении определенного периода времени или не удалось установить соединение, так как не удалось ответить подключенному узлу*</span><span class="sxs-lookup"><span data-stu-id="49dd5-196">*A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond*</span></span>

    <span data-ttu-id="49dd5-197">Эта ошибка обычно означает, что приложению не удалось подключиться к SMTP-серверу.</span><span class="sxs-lookup"><span data-stu-id="49dd5-197">This error usually means that the application could not connect to the SMTP server.</span></span> <span data-ttu-id="49dd5-198">Проверьте имя сервера и номер порта.</span><span class="sxs-lookup"><span data-stu-id="49dd5-198">Check the server name and port number.</span></span>
- <span data-ttu-id="49dd5-199">*Почтовый ящик недоступен. Ответ сервера: 5.1.0 &lt;someuser@invaliddomain&gt; отклонил Отправитель: недопустимый домен отправителя*</span><span class="sxs-lookup"><span data-stu-id="49dd5-199">*Mailbox unavailable. The server response was: 5.1.0 &lt;someuser@invaliddomain&gt; sender rejected : invalid sender domain*</span></span>

    <span data-ttu-id="49dd5-200">Это сообщение может означать, что адрес `From` неверен или отсутствует.</span><span class="sxs-lookup"><span data-stu-id="49dd5-200">This message can indicate that the `From` address is not correct or is missing.</span></span>
- <span data-ttu-id="49dd5-201">*Указанная строка не является формой, необходимой для адреса электронной почты.*</span><span class="sxs-lookup"><span data-stu-id="49dd5-201">*The specified string is not in the form required for an email address.*</span></span>

    <span data-ttu-id="49dd5-202">Эта ошибка может означать, что значения свойств `To` или `From` не распознаны как адреса электронной почты.</span><span class="sxs-lookup"><span data-stu-id="49dd5-202">This error might indicate that the value of the `To` or `From` properties are not recognized as email addresses.</span></span> <span data-ttu-id="49dd5-203">(ASP.NET не может проверить допустимость адреса электронной почты, только если он имеет правильный формат, например *name@domain.com* .)</span><span class="sxs-lookup"><span data-stu-id="49dd5-203">(ASP.NET cannot check that the email address is valid, only that it's in the correct format, like *name@domain.com*.)</span></span>

> [!NOTE]
> <span data-ttu-id="49dd5-204">Перед публикацией страницы на активном сайте Удалите разметку, отображающую ошибку (`@errorMessage`).</span><span class="sxs-lookup"><span data-stu-id="49dd5-204">Remove the markup that displays the error (`@errorMessage`) before you publish the page to a live site.</span></span> <span data-ttu-id="49dd5-205">Не рекомендуется, чтобы пользователи могли видеть сообщения об ошибках, получаемые с сервера.</span><span class="sxs-lookup"><span data-stu-id="49dd5-205">It's not a good idea to let users see error messages that you get from a server.</span></span>

<a id="AdditionalResources"></a>
## <a name="additional-resources"></a><span data-ttu-id="49dd5-206">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="49dd5-206">Additional Resources</span></span>

[<span data-ttu-id="49dd5-207">Вопросы и ответы по веб-страницам ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="49dd5-207">ASP.NET Web Pages (Razor) FAQ</span></span>](https://go.microsoft.com/fwlink/?LinkId=253000)

<span data-ttu-id="49dd5-208">Форум [WebMatrix и веб-страницы ASP.NET](https://forums.asp.net/1224.aspx/1?WebMatrix) на веб-сайте ASP.NET</span><span class="sxs-lookup"><span data-stu-id="49dd5-208">[WebMatrix and ASP.NET Web Pages](https://forums.asp.net/1224.aspx/1?WebMatrix) forum on the ASP.NET website</span></span>
