---
uid: web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
title: Веб-страницы ASP.NET (Razor) устранение неполадок | Документация Майкрософт
author: Rick-Anderson
description: В этой статье описываются проблемы, вы можете столкнуться при работе с веб-страниц ASP.NET (Razor) и некоторые предлагаемые решения. Версии программного обеспечения — страница ASP.NET Web...
ms.author: riande
ms.date: 02/10/2014
ms.assetid: 2a2c1833-0bfe-4e2e-9cc0-341b52c7b121
msc.legacyurl: /web-pages/overview/testing-and-debugging/aspnet-web-pages-razor-troubleshooting-guide
msc.type: authoredcontent
ms.openlocfilehash: adbaa5cbda4a60a8b222ba49bb148b28b2e214cc
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59389210"
---
# <a name="aspnet-web-pages-razor-troubleshooting-guide"></a>Руководство по устранению неполадок веб-страниц ASP.NET (Razor)

по [Tom FitzMacken](https://github.com/tfitzmac)

> В этой статье описываются проблемы, вы можете столкнуться при работе с веб-страниц ASP.NET (Razor) и некоторые предлагаемые решения.
> 
> ## <a name="software-versions"></a>Версии программного обеспечения
> 
> 
> - Веб-страниц ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с 2 веб-страниц ASP.NET и веб-страниц ASP.NET 1.0.


В этом разделе содержатся следующие подразделы.

- [Проблемы с запуском страниц](#Issues_Running_.cshtml_Pages)
- [Проблемы с кодом Razor](#IssuesWithRazorCode)
- [Проблемы безопасности и членство](#membership)
- [Проблемы с отправкой электронной почты](#email)
- [Дополнительные ресурсы](#AdditionalResources)

Общие вопросы см. в разделе [веб-страниц ASP.NET (Razor) часто задаваемые вопросы о](https://go.microsoft.com/fwlink/?LinkId=253000).

<a id="Issues_Running_.cshtml_Pages"></a>
## <a name="issues-with-running-pages"></a>Проблемы с запуском страниц

Разнообразные проблемы можно избежать *.cshtml* и *.vbhtml* страницы из выполняется надлежащим образом. В этом разделе перечислены распространенные сообщения об ошибках и возможные причины.

### <a name="http-error-403---forbidden-access-is-denied"></a>Ошибка HTTP 403 — запрещено. Отказано в доступе

*У вас нет разрешения на просмотр этого каталога или страницы, используя учетные данные, которые были указаны.*

Эта ошибка может возникать, если сервер не работает под управлением правильную версию платформы .NET Framework. Убедитесь, что компьютер, на котором выполняется сервер (локально или удаленно) имеет по крайней мере .NET Framework 4 установлена. Кроме того, убедитесь, что само приложение настраивается для запуска правильную версию.

Если вы видите эту проблему локально при работе в WebMatrix, щелкните **сайта** рабочей области, а затем в представлении в виде дерева щелкните **параметры**. В **выберите версию .NET Framework** выберите **.NET 4 (интегрированная)**. Если эта версия уже установлено, попробуйте запустить WebMatrix с правами администратора.

Убедитесь, что корневой веб-сайт имеет по крайней мере *.cshtml* файл в ней.

Если вы видите эту ошибку при веб-сервера на удаленном сервере, обратитесь к администратору сервера. Убедитесь, что на сервере установлены платформы .NET Framework 4 или более поздней версии. Кроме того, убедитесь, что приложение выполняется в пуле приложений, который настроен для использования этой версии платформы.NET Framework.

Если у вас есть контроль над сервером, убедитесь, что он работает правильную версию платформы .NET Framework. Можно также попытаться исправить установку, запустив `aspnet_regiis -iru` команды. (Например, если устанавливаются службы IIS после установки .NET Framework, IIS будет не настроен правильно для запуска страницы ASP.NET.) Дополнительные сведения см. в разделе [средство регистрации IIS ASP.NET (Aspnet\_regiis.exe)](https://msdn.microsoft.com/library/k6h9cz8h(v=vs.100).aspx).

### <a name="http-error-40314---forbidden"></a>Ошибка HTTP 403.14 - запрещено

*Веб-сервер настроен не список содержимого каталога.*

Эта ошибка может возникать, если вы запрашиваете ресурс, который защищен (как *Web.config* файл) или расположенного в папке, которая защищена (как *приложения\_данных* или *приложения\_Код*).

### <a name="http-error-40417---not-found"></a>Ошибка HTTP 404.17 файл - не найдено

*Запрошенное содержимое отображается скрипт и не будет обслуживаться обработчик статических файлов.*

Эта ошибка может возникать, если сервер не настроен для использования в .NET Framework 4 или более поздней версии и поэтому не распознает код в `@{ }` блоков. См. в описании ранее для *Ошибка HTTP 403 — Запрещено: Отказано в доступе*.

### <a name="http-error-4047---not-found"></a>Ошибка HTTP 404.7 - не найдено

*Модуль фильтрации запросов настроены на отклонение расширение файла*

Эта ошибка может возникать, если *.cshtml* или *.vbhtml* расширения заблокированы явным образом на сервере. Признаком этой проблемы является этой работы URL-адреса, когда они не включают расширение, но URL-адреса, которые включают *.cshtml* или *.vbhtml* не работают. Возможное решение заключается в повторном активировании расширения на сайте *Web.config* файл. В следующем примере показано, как включить *.cshtml* расширения.

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample1.xml?highlight=5-6)]

### <a name="http-error-4048---not-found"></a>Ошибка HTTP 404.8 - не найдено

*Модуль фильтрации запросов настроены на отклонение пути в URL-адрес, содержащий раздел hiddenSegment.*

Эта ошибка может возникать, если вы запрашиваете ресурс, который защищен (как *Web.config* файл) или расположенного в папке, которая защищена (как *приложения\_данных* или *приложения\_Код*).

### <a name="this-type-of-page-is-not-served-server-error-in--application"></a>Этот тип страницы не обслуживается (ошибка сервера в приложении «/»)

См. в описании ранее для 404.17 файл ошибки HTTP.

<a id="IssuesWithRazorCode"></a>
## <a name="issues-with-razor-code"></a>Проблемы с кодом Razor

### <a name="the-name-class-does-not-exist-in-the-current-context"></a>Имя "*класс*" не существует в текущем контексте

Часто причина, при появлении этой ошибки является `class` ссылки, вспомогательный объект, но вспомогательное приложение не устанавливается. Например если вы попытаетесь использовать вспомогательный объект, но если вы еще не установили пакет из NuGet, вы увидите эту ошибку. Используйте коллекцию в WebMatrix, чтобы найти и установить вспомогательное приложение.

Если вспомогательное приложение устанавливается, но страницы по-прежнему не распознает его, попробуйте добавить добавить `using` инструкции к коду. В `using` оператор, справочник по языку пространство имен, которое включает в себя вспомогательное приложение. Например, базовые вспомогательные средства, которые находятся в пакете вспомогательные веб-модули ASP.NET находятся в `System.Web.Helpers` пространства имен. В верхней части страницы, где вы хотите использовать вспомогательный метод добавьте следующую строку:

`@using Microsoft.Web.Helpers;`

<a id="membership"></a>
## <a name="issues-with-security-and-membership"></a>Проблемы безопасности и членство

При использовании системы встроенных средств безопасности (членства) в веб-страниц ASP.NET (Razor), могут возникнуть следующие проблемы.

### <a name="to-call-this-method-the-membershipprovider-property-must-be-an-instance-of-extendedmembershipprovider"></a>Чтобы вызвать этот метод, свойство «Membership.Provider» должен быть экземпляр «ExtendedMembershipProvider»

Эта ошибка может указывать, что не `AspNetSqlMembershipProvider` настроен класс. (Признаком является, что сайт работает локально, но вызывает эту ошибку, при его публикации на сервере поставщика услуг размещения). Одно исправление этой проблемы является явным образом включить простое членство, добавив следующий узел *Web.config* файла:

[!code-xml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample2.xml?highlight=6)]

<a id="email"></a>
## <a name="issues-with-sending-email"></a>Проблемы с отправкой электронной почты

Проблемы с отправкой электронной почты может оказаться сложной задачей для отладки. Первоначальная проблема может быть, что не удается подключиться к SMTP-сервера. Если подключение установлено успешно, ASP.NET передает сообщение на SMTP-сервер. Тем не менее могут возникнуть проблемы с само сообщение, которое препятствует отправкой SMTP-сервера.

Если приложение не отправлять по электронной почте, сделайте следующее:

- Имя SMTP-сервера часто выглядит примерно так `smtp.provider.com` или `smtp.provider.net`. Однако если вы публикуете веб-узла поставщика услуг размещения, имя SMTP-сервера на этом этапе может быть `localhost`. Такая ситуация возникает, так как после того как вы опубликовали и ваш сайт работает на сервере поставщика, SMTP-сервер может быть локальным с точки зрения приложения. Это изменение в имена серверов может означать, что необходимо изменить имя SMTP-сервера как часть процесс публикации.
- Номер порта, обычно — 25. Тем не менее некоторые поставщики требуют использовать порт 587 или некоторых других портов. Узнайте у владельца SMTP-сервера, номер порта они ожидают, что позволяет использовать.
- Убедитесь, что используется правильные учетные данные. Если вы опубликовали свой сайт у поставщика услуг размещения, используйте учетные данные, которые поставщик указал специально предназначены для электронной почты. Эти учетные данные, может отличаться от учетных данных, используемых для публикации.
- Иногда вообще не требуются учетные данные. При отправке электронной почты с помощью ваш поставщик услуг Интернета, поставщика электронной почты могут уже знать свои учетные данные. После публикации, может потребоваться использовать другие учетные данные, чем при тестировании на локальном компьютере.
- Если поставщика электронной почты использует шифрование, `WebMail.EnableSsl` для `true`.

Если ошибка при отправке электронной почты, может появиться стандартное сообщение Ошибка ASP.NET, который выглядит следующим образом:

![ASP.NET сообщение об ошибке при возникновении проблемы с электронной почты](aspnet-web-pages-razor-troubleshooting-guide/_static/image1.png)

Также можно отлаживать проблемах отправки электронной почты с помощью `try-catch` блока, как показано в следующем примере. При использовании `try-catch` блока, ASP.NET не отображает его стандартные сообщения об ошибках. Вместо этого можно записать ошибку в `catch` части блока.

[!code-cshtml[Main](aspnet-web-pages-razor-troubleshooting-guide/samples/sample3.cshtml)]

Подставьте соответствующие значения для `your-SMTP-server-name`, и т. д. Ниже приведены некоторые сообщения об ошибках, которые можно увидеть таким образом:

- *Сбой при отправке почты.*

    -или-

    *Попытка подключения не удалось, так как подключенная сторона не ответила правильно после определенного периода времени, или установленное соединение, так как подключенный узел не отвечает*

    Эта ошибка обычно означает, что приложение не удалось подключиться к SMTP-сервера. Проверьте имя сервера и номер порта.
- *Почтовый ящик недоступен. Получен ответ сервера: 5.1.0 &lt; someuser@invaliddomain &gt; отправителя отклонен: недопустимый отправитель домена*

    Это сообщение может указывать, что `From` адрес указано неправильно или отсутствует.
- *Указанная строка не в форму, необходимую для адреса электронной почты.*

    Эта ошибка может означать, что значение `To` или `From` свойства не распознаются как адреса электронной почты. (ASP.NET не может проверить, что адрес электронной почты допустим, только что он, в правильном формате, например *name@domain.com*.)

> [!NOTE]
> Удалите разметку, с ошибкой (`@errorMessage`) перед публикацией страницы на действующем сайте. Не рекомендуется разрешать пользователям просматривать сообщения об ошибках, получаемых с сервера.


<a id="AdditionalResources"></a>
## <a name="additional-resources"></a>Дополнительные ресурсы

[Вопросы и ответы по веб-страницам ASP.NET (Razor)](https://go.microsoft.com/fwlink/?LinkId=253000)

[WebMatrix и ASP.NET Web Pages](https://forums.asp.net/1224.aspx/1?WebMatrix) форум на веб-сайта ASP.NET
