---
uid: web-pages/overview/performance-and-traffic/14-analyzing-traffic
title: Отслеживание информации посетителей (аналитика) для сайта веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: После того как веб-сайт будет загружен, может потребоваться проанализировать трафик веб-сайта.
ms.author: riande
ms.date: 02/17/2014
ms.assetid: 360bc6e1-84c5-4b8e-a84c-ea48ab807aa4
msc.legacyurl: /web-pages/overview/performance-and-traffic/14-analyzing-traffic
msc.type: authoredcontent
ms.openlocfilehash: 095a5572c755446e0661c052ca9de82d636429fd
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78421458"
---
# <a name="tracking-visitor-information-analytics-for-an-aspnet-web-pages-razor-site"></a>Отслеживание информации посетителей (аналитика) для сайта веб-страницы ASP.NET (Razor)

от [Tom фитзмаккен](https://github.com/tfitzmac)

> В этой статье описывается, как с помощью вспомогательной службы добавить аналитику веб-сайта на страницы на веб-сайте веб-страницы ASP.NET (Razor).
> 
> Из этого руководства вы узнаете, как выполнять такие задачи:
> 
> - Отправка сведений о трафике веб-сайта поставщику аналитики.
> 
> Это функции программирования ASP.NET, представленные в статье:
> 
> - Вспомогательный метод `Analytics`.
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a>Версии программного обеспечения, используемые в этом руководстве
> 
> 
> - Веб-страницы ASP.NET (Razor) 2
> - Библиотека вспомогательных веб-функций ASP.NET (пакет NuGet)

Аналитика — это общий термин для технологий, которые измеряют трафик на веб-сайте, чтобы вы могли понять, как люди используют этот сайт. Доступны многие службы аналитики, включая службы из Google, Yahoo, Статкаунтер и других.

Способ работы с аналитикой заключается в том, что вы регистрируетесь в учетной записи с поставщиком аналитики, в которой выполняется регистрация сайта, который необходимо отвестиь. Поставщик отправляет вам фрагмент кода JavaScript, который включает идентификатор или код отслеживания для вашей учетной записи. Фрагмент кода JavaScript добавляется на веб-страницы сайта, которые необходимо отслеживанию. (Обычно фрагмент анализа добавляется в нижний колонтитул или страницу макета или в другую разметку HTML, которая отображается на каждой странице сайта.) Когда пользователь запрашивает страницу, содержащую один из этих фрагментов кода JavaScript, фрагмент отправляет сведения о текущей странице поставщику аналитики, который записывает различные сведения о странице.

Если вы хотите просмотреть статистику вашего сайта, войдите на веб-сайт поставщика аналитики. Затем можно просмотреть все виды отчетов о вашем сайте, например:

- Число просмотров страниц для отдельных страниц. Это говорит вам (примерно), сколько людей посещает сайт, а какие страницы на вашем сайте являются наиболее популярными.
- Как долго люди тратят на определенные страницы. Это может сообщать вам о том, что домашняя страница сохраняет интерес людей.
- Какие сайты находились до посещения вашего сайта. Это поможет понять, поступает ли трафик из ссылок, от поиска и т. д.
- Когда пользователи посещают ваш сайт и как долго они остаются.
- В каких странах находятся ваши посетители.
- Какие браузеры и операционные системы используют посетители.

    ![Ch14traffic-1](14-analyzing-traffic/_static/image1.jpg)

## <a name="using-a-helper-to-add-analytics-to-a-page"></a>Использование вспомогательного метода для добавления аналитики на страницу

Веб-страницы ASP.NET включает несколько вспомогательных функций аналитики (`Analytics.GetGoogleHtml`, `Analytics.GetYahooHtml`и `Analytics.GetStatCounterHtml`), которые упрощают управление фрагментами кода JavaScript, используемыми для аналитики. Вместо того чтобы понять, как и где поместить код JavaScript, достаточно добавить вспомогательную функцию на страницу. Единственными сведениями, которые необходимо предоставить, являются имя учетной записи, идентификатор или код отслеживания. (Для Статкаунтер также необходимо указать несколько дополнительных значений.)

В этой процедуре вы создадите страницу макета, использующую вспомогательную функцию `GetGoogleHtml`. Если у вас уже есть учетная запись с одним из других поставщиков аналитики, можно использовать эту учетную запись и при необходимости внести незначительные изменения.

> [!NOTE]
> При создании учетной записи аналитики необходимо зарегистрировать URL-адрес сайта, который требуется отслеживать. Если вы тестируете все на локальном компьютере, вы не отслеживаете фактический трафик (единственный трафик), поэтому вы не сможете записывать и просматривать статистику сайта. Но эта процедура показывает, как добавить вспомогательную функцию аналитики на страницу. При публикации сайта активный сайт будет передавать сведения поставщику аналитики.

1. Добавьте библиотеку вспомогательных веб-функций ASP.NET на веб-сайт, как описано в разделе [Установка вспомогательных функций на веб-страницы ASP.net сайте](https://go.microsoft.com/fwlink/?LinkId=252372), если вы еще не добавили его.
2. Создайте учетную запись с помощью Google Analytics и запишите имя учетной записи.
3. Создайте страницу макета с именем *Analytics. cshtml* и добавьте следующую разметку:

    [!code-cshtml[Main](14-analyzing-traffic/samples/sample1.cshtml)]

    > [!NOTE]
    > Необходимо поместить вызов вспомогательного метода `Analytics` в тексте веб-страницы (перед тегом `</body>`). В противном случае браузер не будет выполнять скрипт.

    Если вы используете другой поставщик аналитики, воспользуйтесь одним из следующих вспомогательных функций:

    - (Yahoo) `@Analytics.GetYahooHtml("myaccount")`
    - (Статкаунтер) `@Analytics.GetStatCounterHtml("project", "security")`
4. Замените `myaccount` именем учетной записи, идентификатора или кода отслеживания, созданного на шаге 1.
5. Запустите страницу в браузере. (Перед выполнением страницы убедитесь, что она выбрана в рабочей области **файлы** .)
6. В браузере просмотрите источник страницы. Вы сможете увидеть готовый аналитический код:

    [!code-html[Main](14-analyzing-traffic/samples/sample2.html)]
7. Войдите на сайт Google Analytics и просмотрите статистику для своего сайта. Если вы используете страницу на активном сайте, вы увидите запись, которая записывает посетить страницу.

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a>Дополнительные ресурсы

- [Сайт Google Analytics](https://www.google.com/analytics/)
- [Сайт веб-аналитики Yahoo!](http://help.yahoo.com/l/us/yahoo/ywa/)
- [Сайт Статкаунтер](http://statcounter.com/)
