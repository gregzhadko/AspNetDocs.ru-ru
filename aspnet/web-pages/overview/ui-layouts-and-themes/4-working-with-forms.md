---
uid: web-pages/overview/ui-layouts-and-themes/4-working-with-forms
title: Работа с формами HTML на сайтах веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: Форма — это раздел HTML-документа, в котором можно размещать пользовательские элементы управления, например текстовые поля, флажки, переключатели и раскрывающиеся списки. Вы используете формы, что...
ms.author: riande
ms.date: 02/10/2014
ms.assetid: f3f4b8c8-e8f6-4474-ad94-69228a6c01ee
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/4-working-with-forms
msc.type: authoredcontent
ms.openlocfilehash: c7d4802063c8610a246afe67bd15eea429f7304a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78519606"
---
# <a name="working-with-html-forms-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="e2bfc-104">Работа с формами HTML на сайтах веб-страницы ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-104">Working with HTML Forms in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="e2bfc-105">от [Tom фитзмаккен](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="e2bfc-106">В этой статье описывается обработка формы HTML (с помощью текстовых полей и кнопок) при работе на веб-сайте веб-страницы ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="e2bfc-106">This article describes how to process an HTML form (with text boxes and buttons) when you are working in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="e2bfc-107">**Что вы узнаете:**</span><span class="sxs-lookup"><span data-stu-id="e2bfc-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="e2bfc-108">Создание HTML-формы.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-108">How to create an HTML form.</span></span>
> - <span data-ttu-id="e2bfc-109">Чтение вводимых пользователем данных из формы.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-109">How to read user input from the form.</span></span>
> - <span data-ttu-id="e2bfc-110">Проверка ввода данных пользователем.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-110">How to validate user input.</span></span>
> - <span data-ttu-id="e2bfc-111">Восстановление значений формы после отправки страницы.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-111">How to restore form values after the page is submitted.</span></span>
> 
> <span data-ttu-id="e2bfc-112">Ниже приведены основные понятия программирования ASP.NET, представленные в статье:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-112">These are the ASP.NET programming concepts introduced in the article:</span></span>
> 
> - <span data-ttu-id="e2bfc-113">Объект `Request`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-113">The `Request` object.</span></span>
> - <span data-ttu-id="e2bfc-114">Проверка входных данных.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-114">Input validation.</span></span>
> - <span data-ttu-id="e2bfc-115">Кодировка HTML.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-115">HTML encoding.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="e2bfc-116">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="e2bfc-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="e2bfc-117">Веб-страницы ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="e2bfc-117">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="e2bfc-118">Этот учебник также работает с веб-страницы ASP.NET 2.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-118">This tutorial also works with ASP.NET Web Pages 2.</span></span>

## <a name="creating-a-simple-html-form"></a><span data-ttu-id="e2bfc-119">Создание простой HTML-формы</span><span class="sxs-lookup"><span data-stu-id="e2bfc-119">Creating a Simple HTML Form</span></span>

1. <span data-ttu-id="e2bfc-120">Создайте новый веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-120">Create a new website.</span></span>
2. <span data-ttu-id="e2bfc-121">В корневой папке создайте веб-страницу с именем *Form. cshtml* и введите следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-121">In the root folder, create a web page named *Form.cshtml* and enter the following markup:</span></span>

    [!code-html[Main](4-working-with-forms/samples/sample1.html)]
3. <span data-ttu-id="e2bfc-122">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-122">Launch the page in your browser.</span></span> <span data-ttu-id="e2bfc-123">(В WebMatrix в рабочей области **файлы** щелкните правой кнопкой мыши файл и выберите **запустить в браузере**.) Отображается простая форма с тремя полями ввода и кнопками **отправки** .</span><span class="sxs-lookup"><span data-stu-id="e2bfc-123">(In WebMatrix, in the **Files** workspace, right-click the file and then select **Launch in browser**.) A simple form with three input fields and a **Submit** button is displayed.</span></span>

    ![Снимок экрана формы с тремя текстовыми полями.](4-working-with-forms/_static/image1.png)

    <span data-ttu-id="e2bfc-125">На этом этапе при нажатии кнопки **Submit** ничего не происходит.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-125">At this point, if you click the **Submit** button, nothing happens.</span></span> <span data-ttu-id="e2bfc-126">Чтобы сделать форму полезной, необходимо добавить код, который будет выполняться на сервере.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-126">To make the form useful, you have to add some code that will run on the server.</span></span>

## <a name="reading-user-input-from-the-form"></a><span data-ttu-id="e2bfc-127">Чтение вводимых пользователем данных из формы</span><span class="sxs-lookup"><span data-stu-id="e2bfc-127">Reading User Input from the Form</span></span>

<span data-ttu-id="e2bfc-128">Для обработки формы необходимо добавить код, считывающий отправленные значения полей и выполняющий с ними какие-либо действия.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-128">To process the form, you add code that reads the submitted field values and does something with them.</span></span> <span data-ttu-id="e2bfc-129">В этой процедуре показано, как считывать поля и отображать вводимые пользователем данные на странице.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-129">This procedure shows you how to read the fields and display the user input on the page.</span></span> <span data-ttu-id="e2bfc-130">(В рабочем приложении, как правило, вы выполняете более интересные действия с вводом данных пользователем.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-130">(In a production application, you generally do more interesting things with user input.</span></span> <span data-ttu-id="e2bfc-131">Это можно сделать в статье о работе с базами данных.)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-131">You'll do that in the article about working with databases.)</span></span>

1. <span data-ttu-id="e2bfc-132">В верхней части файла *Form. cshtml* введите следующий код:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-132">At the top of the *Form.cshtml* file, enter the following code:</span></span>

    [!code-cshtml[Main](4-working-with-forms/samples/sample2.cshtml)]

    <span data-ttu-id="e2bfc-133">Когда пользователь впервые запрашивает страницу, отображается только пустая форма.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-133">When the user first requests the page, only the empty form is displayed.</span></span> <span data-ttu-id="e2bfc-134">Пользователь (который будет вам) заполняет форму, а затем нажимает кнопку **Отправить**.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-134">The user (which will be you) fills in the form and then clicks **Submit**.</span></span> <span data-ttu-id="e2bfc-135">Он отправляет (отправляет) входные данные пользователя на сервер.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-135">This submits (posts) the user input to the server.</span></span> <span data-ttu-id="e2bfc-136">По умолчанию запрос переходит на ту же страницу (а именно, *Form. cshtml*).</span><span class="sxs-lookup"><span data-stu-id="e2bfc-136">By default, the request goes to the same page (namely, *Form.cshtml*).</span></span>

    <span data-ttu-id="e2bfc-137">При отправке страницы на этот раз введенные значения отображаются непосредственно над формой:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-137">When you submit the page this time, the values you entered are displayed just above the form:</span></span>

    ![Снимок экрана, на котором отображаются значения, введенные на странице.](4-working-with-forms/_static/image2.png)

    <span data-ttu-id="e2bfc-139">Взгляните на код страницы.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-139">Look at the code for the page.</span></span> <span data-ttu-id="e2bfc-140">Сначала используется метод `IsPost`, чтобы определить, выполняется ли отправка страницы &#8212; , то есть ли пользователь щелкнул кнопку Submit ( **Отправить** ).</span><span class="sxs-lookup"><span data-stu-id="e2bfc-140">You first use the `IsPost` method to determine whether the page is being posted &#8212; that is, whether a user clicked the **Submit** button.</span></span> <span data-ttu-id="e2bfc-141">Если это POST, `IsPost` возвращает значение true.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-141">If this is a post, `IsPost` returns true.</span></span> <span data-ttu-id="e2bfc-142">Это стандартный способ веб-страницы ASP.NET определить, работаете ли вы с первоначальным запросом (запрос GET) или обратная передача (запрос POST).</span><span class="sxs-lookup"><span data-stu-id="e2bfc-142">This is the standard way in ASP.NET Web Pages to determine whether you're working with an initial request (a GET request) or a postback (a POST request).</span></span> <span data-ttu-id="e2bfc-143">(Дополнительные сведения о GET и POST см. в боковой панели "HTTP GET and POST и свойство" Post "статьи [Введение в веб-страницы ASP.NET программирование с использованием синтаксиса Razor](https://go.microsoft.com/fwlink/?LinkId=202890#SB_HttpGetPost)).</span><span class="sxs-lookup"><span data-stu-id="e2bfc-143">(For more information about GET and POST, see the sidebar "HTTP GET and POST and the IsPost Property" in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#SB_HttpGetPost).)</span></span>

    <span data-ttu-id="e2bfc-144">Далее вы получаете значения, введенные пользователем из объекта `Request.Form`, и помещаете их в переменные для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-144">Next, you get the values that the user filled in from the `Request.Form` object, and you put them in variables for later.</span></span> <span data-ttu-id="e2bfc-145">Объект `Request.Form` содержит все значения, отправленные со страницей, каждый из которых определяется ключом.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-145">The `Request.Form` object contains all the values that were submitted with the page, each identified by a key.</span></span> <span data-ttu-id="e2bfc-146">Ключ эквивалентен атрибуту `name` поля формы, которое необходимо считать.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-146">The key is the equivalent to the `name` attribute of the form field that you want to read.</span></span> <span data-ttu-id="e2bfc-147">Например, чтобы прочитать поле `companyname` (текстовое поле), используйте `Request.Form["companyname"]`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-147">For example, to read the `companyname` field (text box), you use `Request.Form["companyname"]`.</span></span>

    <span data-ttu-id="e2bfc-148">Значения формы хранятся в объекте `Request.Form` в виде строк.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-148">Form values are stored in the `Request.Form` object as strings.</span></span> <span data-ttu-id="e2bfc-149">Поэтому, если необходимо работать со значением как с числом или с датой, так и с другим типом, необходимо преобразовать его из строки в этот тип.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-149">Therefore, when you have to work with a value as a number or a date or some other type, you have to convert it from a string to that type.</span></span> <span data-ttu-id="e2bfc-150">В этом примере метод `AsInt` `Request.Form` используется для преобразования значения поля Employees (который содержит число сотрудников) в целое число.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-150">In the example, the `AsInt` method of the `Request.Form` is used to convert the value of the employees field (which contains an employee count) to an integer.</span></span>
2. <span data-ttu-id="e2bfc-151">Откройте страницу в браузере, заполните поля формы и нажмите кнопку **Отправить**.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-151">Launch the page in your browser, fill in the form fields, and click **Submit**.</span></span> <span data-ttu-id="e2bfc-152">На странице отображаются введенные значения.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-152">The page displays the values you entered.</span></span>

> [!TIP] 
> 
> <a id="SB_HTMLEncoding"></a>
> ### <a name="html-encoding-for-appearance-and-security"></a><span data-ttu-id="e2bfc-153">Кодировка HTML для внешнего вида и безопасности</span><span class="sxs-lookup"><span data-stu-id="e2bfc-153">HTML Encoding for Appearance and Security</span></span>
> 
> <span data-ttu-id="e2bfc-154">HTML имеет специальное использование для таких символов, как `<`, `>`и `&`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-154">HTML has special uses for characters like `<`, `>`, and `&`.</span></span> <span data-ttu-id="e2bfc-155">Если эти специальные символы отображаются там, где они не ожидались, они могут насмарку внешний вид и функциональность веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-155">If these special characters appear where they're not expected, they can ruin the appearance and functionality of your web page.</span></span> <span data-ttu-id="e2bfc-156">Например, браузер интерпретирует `<`ный символ (если за ним не следует пробел) в начале HTML-элемента, например `<b>` или `<input ...>`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-156">For example, the browser interprets the `<` character (unless it's followed by a space) as the beginning of an HTML element, like `<b>` or `<input ...>`.</span></span> <span data-ttu-id="e2bfc-157">Если браузер не распознает элемент, он просто отбрасывает строку, которая начинается с `<`, пока не достигнет того, что оно снова распознает.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-157">If the browser doesn't recognize the element, it simply discards the string that begins with `<` until it reaches something that it again recognizes.</span></span> <span data-ttu-id="e2bfc-158">Очевидно, что это может привести к некоторому отображению на странице.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-158">Obviously, this can result in some weird rendering in the page.</span></span>
> 
> <span data-ttu-id="e2bfc-159">В кодировке HTML эти зарезервированные символы заменяются кодом, который браузер интерпретирует как правильный символ.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-159">HTML encoding replaces these reserved characters with a code that browsers interpret as the correct symbol.</span></span> <span data-ttu-id="e2bfc-160">Например, `<` символ заменяется `&lt;`, а `>` символ заменяется на `&gt;`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-160">For example, the `<` character is replaced with `&lt;` and the `>` character is replaced with `&gt;`.</span></span> <span data-ttu-id="e2bfc-161">Браузер отображает эти строки замены в виде символов, которые необходимо просмотреть.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-161">The browser renders these replacement strings as the characters that you want to see.</span></span>
> 
> <span data-ttu-id="e2bfc-162">Рекомендуется использовать кодировку HTML при каждом отображении строк (входных данных), полученных от пользователя.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-162">It's a good idea to use HTML encoding any time you display strings (input) that you got from a user.</span></span> <span data-ttu-id="e2bfc-163">В противном случае пользователь может попытаться получить веб-страницу для запуска вредоносного сценария или выполнить какие-либо другие действия, которые принарушат безопасность веб-сайта или не только то, что вам нужно.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-163">If you don't, a user can try to get your web page to run a malicious script or do something else that compromises your site security or that's just not what you intend.</span></span> <span data-ttu-id="e2bfc-164">(Это особенно важно, если вы принимаете ввод пользователя, сохраняете его в любом расположении, &#8212; а затем отображаете его позже, например, в виде комментария к блогу, проверки пользователя или что-то вроде этого.)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-164">(This is particularly important if you take user input, store it someplace, and then display it later &#8212; for example, as a blog comment, user review, or something like that.)</span></span>
> 
> <span data-ttu-id="e2bfc-165">Чтобы предотвратить возникновение этих проблем, веб-страницы ASP.NET автоматически кодирует любое текстовое содержимое, полученное из кода, в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-165">To help prevent these problems, ASP.NET Web Pages automatically HTML-encodes any text content that you output from your code.</span></span> <span data-ttu-id="e2bfc-166">Например, при отображении содержимого переменной или выражения с помощью кода, такого как `@MyVar`, веб-страницы ASP.NET автоматически кодирует выходные данные.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-166">For example, when you display the content of a variable or an expression using code such as `@MyVar`, ASP.NET Web Pages automatically encodes the output.</span></span>

## <a name="validating-user-input"></a><span data-ttu-id="e2bfc-167">Проверка введенного пользователем</span><span class="sxs-lookup"><span data-stu-id="e2bfc-167">Validating User Input</span></span>

<span data-ttu-id="e2bfc-168">Пользователи делают ошибки.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-168">Users make mistakes.</span></span> <span data-ttu-id="e2bfc-169">Вы попросите их заполнить поле, и они забывают, или попросите их ввести число сотрудников, а вместо этого ввести имя.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-169">You ask them to fill in a field, and they forget to, or you ask them to enter the number of employees and they type a name instead.</span></span> <span data-ttu-id="e2bfc-170">Чтобы убедиться в правильности заполнения формы перед ее обработкой, проверьте входные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-170">To make sure that a form has been filled in correctly before you process it, you validate the user's input.</span></span>

<span data-ttu-id="e2bfc-171">В этой процедуре показано, как проверить все три поля формы, чтобы убедиться, что пользователь не оставляет их пустыми.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-171">This procedure shows how to validate all three form fields to make sure the user didn't leave them blank.</span></span> <span data-ttu-id="e2bfc-172">Кроме того, проверяется, является ли значение количество сотрудников числом.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-172">You also check that the employee count value is a number.</span></span> <span data-ttu-id="e2bfc-173">При наличии ошибок отобразится сообщение об ошибке, сообщающее пользователю, какие значения не прошли проверку.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-173">If there are errors, you'll display an error message that tells the user what values didn't pass validation.</span></span>

1. <span data-ttu-id="e2bfc-174">В файле *Form. cshtml* Замените первый блок кода следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-174">In the *Form.cshtml* file, replace the first block of code with the following code:</span></span> 

    [!code-cshtml[Main](4-working-with-forms/samples/sample3.cshtml)]

    <span data-ttu-id="e2bfc-175">Для проверки вводимых пользователем данных используется вспомогательная функция `Validation`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-175">To validate user input, you use the `Validation` helper.</span></span> <span data-ttu-id="e2bfc-176">Обязательные поля регистрируются путем вызова `Validation.RequireField`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-176">You register required fields by calling `Validation.RequireField`.</span></span> <span data-ttu-id="e2bfc-177">Вы регистрируете другие типы проверки, вызывая `Validation.Add` и указывая поле для проверки и тип выполняемой проверки.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-177">You register other types of validation by calling `Validation.Add` and specifying the field to validate and the type of validation to perform.</span></span>

    <span data-ttu-id="e2bfc-178">При запуске страницы ASP.NET выполняет всю проверку.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-178">When the page runs, ASP.NET does all the validation for you.</span></span> <span data-ttu-id="e2bfc-179">Результаты можно проверить, вызвав `Validation.IsValid`, который возвращает значение true, если все передано, и false, если какое бы то ни было поле не прошло проверку.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-179">You can check the results by calling `Validation.IsValid`, which returns true if everything passed and false if any field failed validation.</span></span> <span data-ttu-id="e2bfc-180">Как правило, вызывается `Validation.IsValid` перед выполнением обработки на входе пользователя.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-180">Typically, you call `Validation.IsValid` before you perform any processing on the user input.</span></span>
2. <span data-ttu-id="e2bfc-181">Обновите элемент `<body>`, добавив три вызова метода `Html.ValidationMessage` следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-181">Update the `<body>` element by adding three calls to the `Html.ValidationMessage` method, like this:</span></span>

    [!code-cshtml[Main](4-working-with-forms/samples/sample4.cshtml?highlight=8,13,18)]

    <span data-ttu-id="e2bfc-182">Чтобы отобразить сообщения об ошибках проверки, можно вызвать HTML.`ValidationMessage`</span><span class="sxs-lookup"><span data-stu-id="e2bfc-182">To display validation error messages, you can call Html.`ValidationMessage`</span></span> <span data-ttu-id="e2bfc-183">и передайте ему имя поля, для которого должно быть получено сообщение.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-183">and pass it the name of the field that you want the message for.</span></span>
3. <span data-ttu-id="e2bfc-184">Запустите страницу.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-184">Run the page.</span></span> <span data-ttu-id="e2bfc-185">Оставьте поля пустыми и нажмите кнопку **Отправить**.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-185">Leave the fields blank and click **Submit**.</span></span> <span data-ttu-id="e2bfc-186">Отображаются сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-186">You see error messages.</span></span>

    ![Снимок экрана, на котором отображаются сообщения об ошибках, если ввод пользователя не прошел проверку.](4-working-with-forms/_static/image3.jpg)
4. <span data-ttu-id="e2bfc-188">Добавьте строку (например, "ABC") в поле " **число сотрудников** " и нажмите кнопку **Отправить** еще раз.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-188">Add a string (for example, "ABC") to the **Employee Count** field and click **Submit** again.</span></span> <span data-ttu-id="e2bfc-189">На этот раз отображается ошибка, указывающая, что строка не имеет правильный формат, а именно целое число.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-189">This time you see an error that indicates that the string isn't in the right format, namely, an integer.</span></span>

    ![Снимок экрана, на котором показаны сообщения об ошибках, отображаемые при вводе пользователем строки для поля Employees.](4-working-with-forms/_static/image4.jpg)

<span data-ttu-id="e2bfc-191">Веб-страницы ASP.NET предоставляет дополнительные возможности для проверки вводимых пользователем данных, включая возможность автоматического выполнения проверки с помощью клиентского скрипта, чтобы пользователи могли немедленно получить отзыв в браузере.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-191">ASP.NET Web Pages provides more options for validating user input, including the ability to automatically perform validation using client script, so that users get immediate feedback in the browser.</span></span> <span data-ttu-id="e2bfc-192">Дополнительные сведения см. в разделе [Дополнительные ресурсы](#Additional_Resources) .</span><span class="sxs-lookup"><span data-stu-id="e2bfc-192">See the [Additional Resources](#Additional_Resources) section later for more information.</span></span>

## <a name="restoring-form-values-after-postbacks"></a><span data-ttu-id="e2bfc-193">Восстановление значений форм после обратных передач</span><span class="sxs-lookup"><span data-stu-id="e2bfc-193">Restoring Form Values After Postbacks</span></span>

<span data-ttu-id="e2bfc-194">Проверив страницу в предыдущем разделе, вы могли заметить, что при возникновении ошибки проверки все введенные вами данные (не только недопустимые) были потеряны, и пришлось повторно вводить значения для всех полей.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-194">When you tested the page in the previous section, you might have noticed that if you had a validation error, everything you entered (not just the invalid data) was gone, and you had to re-enter values for all the fields.</span></span> <span data-ttu-id="e2bfc-195">Это иллюстрирует важный момент: когда вы отправляете страницу, обрабатываете ее, а затем снова отображаете страницу, страница повторно создается с нуля.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-195">This illustrates an important point: when you submit a page, process it, and then render the page again, the page is re-created from scratch.</span></span> <span data-ttu-id="e2bfc-196">Как вы видели, это означает, что все значения, которые были на странице при отправке, теряются.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-196">As you saw, this means that any values that were in the page when it was submitted are lost.</span></span>

<span data-ttu-id="e2bfc-197">Однако это легко исправить.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-197">You can fix this easily, however.</span></span> <span data-ttu-id="e2bfc-198">У вас есть доступ к значениям, которые были отправлены (в объекте `Request.Form`, поэтому эти значения можно заполнить в полях формы при подготовке страницы к просмотру.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-198">You have access to the values that were submitted (in the `Request.Form` object, so you can fill those values back into the form fields when the page is rendered.</span></span>

1. <span data-ttu-id="e2bfc-199">В файле *Form. cshtml* замените атрибуты `value` элементов `<input>` с помощью атрибута `value`.:</span><span class="sxs-lookup"><span data-stu-id="e2bfc-199">In the *Form.cshtml* file, replace the `value` attributes of the `<input>` elements using the `value` attribute.:</span></span> 

    [!code-cshtml[Main](4-working-with-forms/samples/sample5.cshtml?highlight=13,19,25)]

    <span data-ttu-id="e2bfc-200">Атрибут `value` элементов `<input>` был задан для динамического считывания значения поля из объекта `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-200">The `value` attribute of the `<input>` elements has been set to dynamically read the field value out of the `Request.Form` object.</span></span> <span data-ttu-id="e2bfc-201">При первом запросе страницы значения в объекте `Request.Form` будут пустыми.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-201">The first time that the page is requested, the values in the `Request.Form` object are all empty.</span></span> <span data-ttu-id="e2bfc-202">Это нормально, так как форма пуста.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-202">This is fine, because that way the form is blank.</span></span>
2. <span data-ttu-id="e2bfc-203">Откройте страницу в браузере, заполните поля формы или оставьте их пустыми и нажмите кнопку **Отправить**.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-203">Launch the page in your browser, fill in the form fields or leave them blank, and click **Submit**.</span></span> <span data-ttu-id="e2bfc-204">Отобразится страница, на которой отображаются отправленные значения.</span><span class="sxs-lookup"><span data-stu-id="e2bfc-204">A page that shows the submitted values is displayed.</span></span>

    ![Forms-5](4-working-with-forms/_static/image5.jpg)

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="e2bfc-206">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="e2bfc-206">Additional Resources</span></span>

- [<span data-ttu-id="e2bfc-207">1 001. способы получения входных данных от веб-пользователей</span><span class="sxs-lookup"><span data-stu-id="e2bfc-207">1,001 Ways to Get Input from Web Users</span></span>](https://msdn.microsoft.com/library/ms971057.aspx)
- <span data-ttu-id="e2bfc-208">[Использование форм и обработка пользовательского ввода](https://msdn.microsoft.com/library/ms525182(VS.90).aspx)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-208">[Using Forms and Processing User Input](https://msdn.microsoft.com/library/ms525182(VS.90).aspx)</span></span>
- [<span data-ttu-id="e2bfc-209">Проверка пользовательского ввода на сайтах веб-страниц ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e2bfc-209">Validating User Input in ASP.NET Web Pages Sites</span></span>](https://go.microsoft.com/fwlink/?LinkId=253002)
- <span data-ttu-id="e2bfc-210">[Использование автозаполнения в формах HTML](https://msdn.microsoft.com/library/ms533032(VS.85).aspx)</span><span class="sxs-lookup"><span data-stu-id="e2bfc-210">[Using AutoComplete in HTML Forms](https://msdn.microsoft.com/library/ms533032(VS.85).aspx)</span></span>
