---
uid: web-pages/overview/ui-layouts-and-themes/9-working-with-images
title: Работа с изображениями на сайте ASP.NET Web Pages (Razor) | Документация Майкрософт
author: Rick-Anderson
description: В этой главе показано, как добавить, отображения и управления ими (изменение размера, отражение и добавление водяных знаков) в веб-сайта.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: 778c4e58-4372-4d25-bab9-aec4a8d8e38d
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/9-working-with-images
msc.type: authoredcontent
ms.openlocfilehash: fedd1013c036ebdb85877a868aaaa172733e5b8a
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59394709"
---
# <a name="working-with-images-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="32a3e-103">Работа с изображениями на сайте ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="32a3e-103">Working with Images in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="32a3e-104">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="32a3e-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="32a3e-105">В этой статье показано, как добавить, отображения и управления ими (изменение размера, отражение и добавление водяных знаков) в на веб-сайте ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="32a3e-105">This article shows you how to add, display, and manipulate images (resize, flip, and add watermarks) in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="32a3e-106">Вы узнаете, как:</span><span class="sxs-lookup"><span data-stu-id="32a3e-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="32a3e-107">Как добавить изображение к странице динамически.</span><span class="sxs-lookup"><span data-stu-id="32a3e-107">How to add an image to a page dynamically.</span></span>
> - <span data-ttu-id="32a3e-108">Как разрешить пользователям отправлять изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-108">How to let users upload an image.</span></span>
> - <span data-ttu-id="32a3e-109">Как изменить размер изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-109">How to resize an image.</span></span>
> - <span data-ttu-id="32a3e-110">Как отражение и поворот изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-110">How to flip or rotate an image.</span></span>
> - <span data-ttu-id="32a3e-111">Инструкции по добавлению к изображению водяного знака.</span><span class="sxs-lookup"><span data-stu-id="32a3e-111">How to add a watermark to an image.</span></span>
> - <span data-ttu-id="32a3e-112">Сведения об использовании изображения в качестве водяного знака.</span><span class="sxs-lookup"><span data-stu-id="32a3e-112">How to use an image as a watermark.</span></span>
> 
> <span data-ttu-id="32a3e-113">Ниже перечислены возможности, представленные в этой статье программирования ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="32a3e-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="32a3e-114">`WebImage` Вспомогательный.</span><span class="sxs-lookup"><span data-stu-id="32a3e-114">The `WebImage` helper.</span></span>
> - <span data-ttu-id="32a3e-115">`Path` Объект, который предоставляет методы, позволяющие управлять путь и имена файлов.</span><span class="sxs-lookup"><span data-stu-id="32a3e-115">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="32a3e-116">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="32a3e-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="32a3e-117">Веб-страниц ASP.NET (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="32a3e-117">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="32a3e-118">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="32a3e-118">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="32a3e-119">Этот учебник также работает с WebMatrix 3.</span><span class="sxs-lookup"><span data-stu-id="32a3e-119">This tutorial also works with WebMatrix 3.</span></span>


<a id="Adding_an_Image"></a>
## <a name="adding-an-image-to-a-web-page-dynamically"></a><span data-ttu-id="32a3e-120">Динамическое добавление изображения на веб-страницу</span><span class="sxs-lookup"><span data-stu-id="32a3e-120">Adding an Image to a Web Page Dynamically</span></span>

<span data-ttu-id="32a3e-121">Образы можно добавить на веб-сайт и на отдельные страницы во время разработки веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="32a3e-121">You can add images to your website and to individual pages while you're developing the website.</span></span> <span data-ttu-id="32a3e-122">Можно также разрешить пользователям отправлять изображения, которые могут пригодиться для задач, например сюда и добавить фотографию профиля.</span><span class="sxs-lookup"><span data-stu-id="32a3e-122">You can also let users upload images, which might be useful for tasks like letting them add a profile photo.</span></span>

<span data-ttu-id="32a3e-123">Если образ уже доступен на веб-узла и вы хотите отобразить ее на странице, можно использовать HTML `<img>` следующего вида:</span><span class="sxs-lookup"><span data-stu-id="32a3e-123">If an image is already available on your site and you just want to display it on a page, you use an HTML `<img>` element like this:</span></span>

[!code-html[Main](9-working-with-images/samples/sample1.html)]

<span data-ttu-id="32a3e-124">Иногда, однако необходимо иметь возможность динамически отображать изображения &#8212; то есть вы не знаете, что изображение для отображения, пока страница выполняется.</span><span class="sxs-lookup"><span data-stu-id="32a3e-124">Sometimes, though, you need to be able to display images dynamically &#8212; that is, you don't know what image to display until the page is running.</span></span>

<span data-ttu-id="32a3e-125">Процедуру, описанную в этом разделе показано, как отобразить изображение в режиме реального времени, где пользователям указать имя файла изображения из списка имен образов.</span><span class="sxs-lookup"><span data-stu-id="32a3e-125">The procedure in this section shows how to display an image on the fly where users specify the image file name from a list of image names.</span></span> <span data-ttu-id="32a3e-126">Они выбирают имя образа из раскрывающегося списка, и при отправке страницы отображается изображение, которое они выбраны.</span><span class="sxs-lookup"><span data-stu-id="32a3e-126">They select the name of the image from a drop-down list, and when they submit the page, the image they selected is displayed.</span></span>

<span data-ttu-id="32a3e-127">![[image]](9-working-with-images/_static/image1.jpg "ch9images 1.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-127">![[image]](9-working-with-images/_static/image1.jpg "ch9images-1.jpg")</span></span>

1. <span data-ttu-id="32a3e-128">В WebMatrix создайте новый веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="32a3e-128">In WebMatrix, create a new website.</span></span>
2. <span data-ttu-id="32a3e-129">Добавьте новую страницу с именем *DynamicImage.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-129">Add a new page named *DynamicImage.cshtml*.</span></span>
3. <span data-ttu-id="32a3e-130">В корневой папке веб-сайта, добавьте новую папку и назовите его *образы*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-130">In the root folder of the website, add a new folder and name it *images*.</span></span>
4. <span data-ttu-id="32a3e-131">Добавьте четыре образа для *образы* созданную папку.</span><span class="sxs-lookup"><span data-stu-id="32a3e-131">Add four images to the *images* folder you just created.</span></span> <span data-ttu-id="32a3e-132">(Все образы у вас под рукой будет сделать, но они должна помещаться на страницу). Переименуйте изображения *Photo1.jpg*, *Photo2.jpg*, *Photo3.jpg*, и *Photo4.jpg*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-132">(Any images you have handy will do, but they should fit onto a page.) Rename the images *Photo1.jpg*, *Photo2.jpg*, *Photo3.jpg*, and *Photo4.jpg*.</span></span> <span data-ttu-id="32a3e-133">(Вы не планируете использовать *Photo4.jpg* в этой процедуре, но оно будет использоваться далее в этой статье.)</span><span class="sxs-lookup"><span data-stu-id="32a3e-133">(You won't use *Photo4.jpg* in this procedure, but you'll use it later in the article.)</span></span>
5. <span data-ttu-id="32a3e-134">Убедитесь, что четыре образа не помечены как доступные только для чтения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-134">Verify that the four images are not marked as read-only.</span></span>
6. <span data-ttu-id="32a3e-135">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-135">Replace the existing content in the page with the following:</span></span>

    [!code-cshtml[Main](9-working-with-images/samples/sample2.cshtml)]

    <span data-ttu-id="32a3e-136">Тело страницы имеет стрелку раскрывающегося списка ( `<select>` элемент) с именем `photoChoice`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-136">The body of the page has a drop-down list (a `<select>` element) that's named `photoChoice`.</span></span> <span data-ttu-id="32a3e-137">Список не содержит три варианта и `value` атрибут каждого варианта в списке имеет имя одного из образов, помещенные в *образы* папки.</span><span class="sxs-lookup"><span data-stu-id="32a3e-137">The list has three options, and the `value` attribute of each list option has the name of one of the images that you put in the *images* folder.</span></span> <span data-ttu-id="32a3e-138">По сути, позволяет пользователю выбрать понятное имя, например в списке &quot;Photo 1&quot;, а затем передает *.jpg* имя файла при отправке страницы.</span><span class="sxs-lookup"><span data-stu-id="32a3e-138">Essentially, the list lets the user select a friendly name like &quot;Photo 1&quot;, and it then passes the *.jpg* file name when the page is submitted.</span></span>

    <span data-ttu-id="32a3e-139">В коде, можно получить выбора пользователя (другими словами, имя файла образа) в списке, считывая `Request["photoChoice"]`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-139">In the code, you can get the user's selection (in other words, the image file name) from the list by reading `Request["photoChoice"]`.</span></span> <span data-ttu-id="32a3e-140">Сначала отобразится, если имеется выделение вообще.</span><span class="sxs-lookup"><span data-stu-id="32a3e-140">You first see if there's a selection at all.</span></span> <span data-ttu-id="32a3e-141">Если есть, можно составить путь для изображения, которое состоит из имени папки для образов и имя файла изображения пользователя.</span><span class="sxs-lookup"><span data-stu-id="32a3e-141">If there is, you construct a path for the image that consists of the name of the folder for the images and the user's image file name.</span></span> <span data-ttu-id="32a3e-142">(Если вы попытались составить путь, но ничего не в `Request["photoChoice"]`, отобразится сообщение об ошибке.) Это приводит к относительный путь следующим образом:</span><span class="sxs-lookup"><span data-stu-id="32a3e-142">(If you tried to construct a path but there was nothing in `Request["photoChoice"]`, you'd get an error.) This results in a relative path like this:</span></span>

    *<span data-ttu-id="32a3e-143">images/Photo1.jpg</span><span class="sxs-lookup"><span data-stu-id="32a3e-143">images/Photo1.jpg</span></span>*

    <span data-ttu-id="32a3e-144">Путь хранится в переменной с именем `imagePath` , которые потребуются позднее на странице.</span><span class="sxs-lookup"><span data-stu-id="32a3e-144">The path is stored in variable named `imagePath` that you'll need later in the page.</span></span>

    <span data-ttu-id="32a3e-145">В тексте, имеется также `<img>` элемент, используемый для отображения изображения, выбранного пользователем.</span><span class="sxs-lookup"><span data-stu-id="32a3e-145">In the body, there's also an `<img>` element that's used to display the image that the user picked.</span></span> <span data-ttu-id="32a3e-146">`src` Атрибута не задано имя файла или URL-адрес, как для отображения статического элемента.</span><span class="sxs-lookup"><span data-stu-id="32a3e-146">The `src` attribute isn't set to a file name or URL, like you'd do to display a static element.</span></span> <span data-ttu-id="32a3e-147">Вместо этого он становится равным `@imagePath`, это означает, что он получает свое значение из пути, заданных в коде.</span><span class="sxs-lookup"><span data-stu-id="32a3e-147">Instead, it's set to `@imagePath`, meaning that it gets its value from the path you set in code.</span></span>

    <span data-ttu-id="32a3e-148">При первом запуске страницы, но нет нет изображения, отображаемого, так как пользователь еще не выбрано ничего.</span><span class="sxs-lookup"><span data-stu-id="32a3e-148">The first time that the page runs, though, there's no image to display, because the user hasn't selected anything.</span></span> <span data-ttu-id="32a3e-149">Это обычно означает, что `src` атрибута будут пустыми, и изображение будет отображаться красный &quot;x&quot; (или все, что браузер отображает, когда не удается найти образ).</span><span class="sxs-lookup"><span data-stu-id="32a3e-149">This would normally mean that the `src` attribute would be empty and the image would show up as a red &quot;x&quot; (or whatever the browser renders when it can't find an image).</span></span> <span data-ttu-id="32a3e-150">Чтобы избежать этого, поместите `<img>` элемент в `if` блок, который проверяет ли `imagePath` переменной не имеет ничего общего в нем.</span><span class="sxs-lookup"><span data-stu-id="32a3e-150">To prevent this, you put the `<img>` element in an `if` block that tests to see whether the `imagePath` variable has anything in it.</span></span> <span data-ttu-id="32a3e-151">Если пользователь сделал выбор, `imagePath` содержит путь.</span><span class="sxs-lookup"><span data-stu-id="32a3e-151">If the user made a selection, `imagePath` contains the path.</span></span> <span data-ttu-id="32a3e-152">Если пользователь не выбирает изображение или страница отображается, если это первый случай, `<img>` даже при отображении элемента.</span><span class="sxs-lookup"><span data-stu-id="32a3e-152">If the user didn't pick an image or if this is the first time the page is displayed, the `<img>` element isn't even rendered.</span></span>
7. <span data-ttu-id="32a3e-153">Сохраните файл и откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-153">Save the file and run the page in a browser.</span></span> <span data-ttu-id="32a3e-154">(Убедитесь, что выбран страницы **файлы** рабочей области, прежде чем запускать его.)</span><span class="sxs-lookup"><span data-stu-id="32a3e-154">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
8. <span data-ttu-id="32a3e-155">Выберите изображение в раскрывающемся списке и нажмите кнопку **пример изображения**.</span><span class="sxs-lookup"><span data-stu-id="32a3e-155">Select an image from the drop-down list and then click **Sample Image**.</span></span> <span data-ttu-id="32a3e-156">Убедитесь, что вы видите различных изображений для различных вариантах.</span><span class="sxs-lookup"><span data-stu-id="32a3e-156">Make sure that you see different images for different choices.</span></span>

<a id="Uploading_an_Image"></a>
## <a name="uploading-an-image"></a><span data-ttu-id="32a3e-157">Отправка образа</span><span class="sxs-lookup"><span data-stu-id="32a3e-157">Uploading an Image</span></span>

<span data-ttu-id="32a3e-158">В предыдущем примере показан способ отображения изображения динамически, но он работал только с образами, которые уже были на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="32a3e-158">The previous example showed you how to display an image dynamically, but it worked only with images that were already on your website.</span></span> <span data-ttu-id="32a3e-159">Эта процедура показано, как разрешить пользователям загружать изображение, которое отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="32a3e-159">This procedure shows how to let users upload an image, which is then displayed on the page.</span></span> <span data-ttu-id="32a3e-160">В ASP.NET, можно управлять образы на основе `WebImage` вспомогательного приложения, который содержит методы, позволяющие создавать, управлять и сохранение изображений.</span><span class="sxs-lookup"><span data-stu-id="32a3e-160">In ASP.NET, you can manipulate images on the fly using the `WebImage` helper, which has methods that let you create, manipulate, and save images.</span></span> <span data-ttu-id="32a3e-161">`WebImage` Вспомогательный поддерживает все распространенные web типы файлов изображений, включая *.jpg*, *.png*, и *.bmp*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-161">The `WebImage` helper supports all the common web image file types, including *.jpg*, *.png*, and *.bmp*.</span></span> <span data-ttu-id="32a3e-162">В этой статье вы будете использовать *.jpg* изображения, но можно использовать любой из типов изображений.</span><span class="sxs-lookup"><span data-stu-id="32a3e-162">Throughout this article, you'll use *.jpg* images, but you can use any of the image types.</span></span>

<span data-ttu-id="32a3e-163">![[image]](9-working-with-images/_static/image2.jpg "ch9images 2.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-163">![[image]](9-working-with-images/_static/image2.jpg "ch9images-2.jpg")</span></span>

1. <span data-ttu-id="32a3e-164">Добавьте новую страницу и назовите его *UploadImage.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-164">Add a new page and name it *UploadImage.cshtml*.</span></span>
2. <span data-ttu-id="32a3e-165">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-165">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample3.cshtml)]

    <span data-ttu-id="32a3e-166">В теле текста `<input type="file">` элемент, который позволяет пользователям выбрать файл для передачи.</span><span class="sxs-lookup"><span data-stu-id="32a3e-166">The body of the text has an `<input type="file">` element, which lets users select a file to upload.</span></span> <span data-ttu-id="32a3e-167">Когда пользователи выбирают **отправить**, их файл отправляется вместе с формы.</span><span class="sxs-lookup"><span data-stu-id="32a3e-167">When they click **Submit**, the file they picked is submitted along with the form.</span></span>

    <span data-ttu-id="32a3e-168">Чтобы получить отправленный образ, используйте `WebImage` вспомогательного приложения, которая имеет все виды полезных методов для работы с изображениями.</span><span class="sxs-lookup"><span data-stu-id="32a3e-168">To get the uploaded image, you use the `WebImage` helper, which has all sorts of useful methods for working with images.</span></span> <span data-ttu-id="32a3e-169">В частности, использовать `WebImage.GetImageFromRequest` получить отправленный образ (при наличии) и сохраните его в переменной с именем `photo`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-169">Specifically, you use `WebImage.GetImageFromRequest` to get the uploaded image (if any) and store it in a variable named `photo`.</span></span>

    <span data-ttu-id="32a3e-170">Массу работы в этом примере включает в себя получение и установка файлов и путей.</span><span class="sxs-lookup"><span data-stu-id="32a3e-170">A lot of the work in this example involves getting and setting file and path names.</span></span> <span data-ttu-id="32a3e-171">Проблема заключается в необходимость получения имени (и имени), изображения, которое пользователь отправил, а затем создайте новый путь, для которой вы собираетесь сохранить образ.</span><span class="sxs-lookup"><span data-stu-id="32a3e-171">The issue is that you want to get the name (and just the name) of the image that the user uploaded, and then create a new path for where you're going to store the image.</span></span> <span data-ttu-id="32a3e-172">Поскольку пользователи потенциально может передать несколько образов, тем же именем, используется немного дополнительного кода для создания уникальных имен и убедитесь, что пользователи не перезаписывайте существующие фото.</span><span class="sxs-lookup"><span data-stu-id="32a3e-172">Because users could potentially upload multiple images that have the same name, you use a bit of extra code to create unique names and make sure that users don't overwrite existing pictures.</span></span>

    <span data-ttu-id="32a3e-173">Если изображение фактически будут переданы (тест `if (photo != null)`), вы получите имя образа из образа `FileName` свойство.</span><span class="sxs-lookup"><span data-stu-id="32a3e-173">If an image actually has been uploaded (the test `if (photo != null)`), you get the image name from the image's `FileName` property.</span></span> <span data-ttu-id="32a3e-174">Когда пользователь отправляет изображение, `FileName` содержит исходное имя пользователя, которое включает в себя путь с компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="32a3e-174">When the user uploads the image, `FileName` contains the user's original name, which includes the path from the user's computer.</span></span> <span data-ttu-id="32a3e-175">Он может выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="32a3e-175">It might look like this:</span></span>

    *<span data-ttu-id="32a3e-176">C:\Users\Joe\Pictures\SamplePhoto1.jpg</span><span class="sxs-lookup"><span data-stu-id="32a3e-176">C:\Users\Joe\Pictures\SamplePhoto1.jpg</span></span>*

    <span data-ttu-id="32a3e-177">Вы не хотите пути данных, однако &#8212; необходимо просто фактическим именем файла (*SamplePhoto1.jpg*).</span><span class="sxs-lookup"><span data-stu-id="32a3e-177">You don't want all that path information, though &#8212; you just want the actual file name (*SamplePhoto1.jpg*).</span></span> <span data-ttu-id="32a3e-178">Только файл из пути можно убрать с помощью `Path.GetFileName` метод следующим образом:</span><span class="sxs-lookup"><span data-stu-id="32a3e-178">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](9-working-with-images/samples/sample4.cs)]

    <span data-ttu-id="32a3e-179">Создайте новый уникальное имя файла, добавив GUID исходного имени.</span><span class="sxs-lookup"><span data-stu-id="32a3e-179">You then create a new unique file name by adding a GUID to the original name.</span></span> <span data-ttu-id="32a3e-180">(Дополнительные сведения об идентификаторах GUID см. в разделе [о GUID](#SB_AboutGUIDs) далее в этой статье.) Затем можно создать полный путь, который можно использовать для сохранения изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-180">(For more about GUIDs, see [About GUIDs](#SB_AboutGUIDs) later in this article.) Then you construct a complete path that you can use to save the image.</span></span> <span data-ttu-id="32a3e-181">Сохранить путь состоит из имени файла, папке (образов) и текущее расположение веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="32a3e-181">The save path is made up of the new file name, the folder (images), and the current website location.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32a3e-182">Чтобы код, чтобы сохранять файлы в *образы* папки, приложение должно чтения и записи разрешения для этой папки.</span><span class="sxs-lookup"><span data-stu-id="32a3e-182">In order for your code to save files in the *images* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="32a3e-183">На компьютере разработчика не обычно это проблема.</span><span class="sxs-lookup"><span data-stu-id="32a3e-183">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="32a3e-184">Тем не менее при публикации сайта поставщика услуг размещения веб-сервер, может потребоваться явно задать эти разрешения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-184">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="32a3e-185">Если вы запустите этот код на сервере поставщика услуг размещения и ошибки, проверьте с помощью поставщика услуг размещения, чтобы узнать, как задать эти разрешения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-185">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

    <span data-ttu-id="32a3e-186">Наконец, передайте сохранения путь к `Save` метод `WebImage` вспомогательный.</span><span class="sxs-lookup"><span data-stu-id="32a3e-186">Finally, you pass the save path to the `Save` method of the `WebImage` helper.</span></span> <span data-ttu-id="32a3e-187">Это сохраняет отправленный образ с новым именем.</span><span class="sxs-lookup"><span data-stu-id="32a3e-187">This stores the uploaded image under its new name.</span></span> <span data-ttu-id="32a3e-188">Сохранить метод выглядит следующим образом: `photo.Save(@"~\" + imagePath)`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-188">The save method looks like this: `photo.Save(@"~\" + imagePath)`.</span></span> <span data-ttu-id="32a3e-189">Полный путь добавляется к `@"~\"`, — текущее расположение веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="32a3e-189">The complete path is appended to `@"~\"`, which is the current website location.</span></span> <span data-ttu-id="32a3e-190">(Сведения о `~` оператора, см. в разделе [введение в ASP.NET веб-программирование с помощью синтаксиса Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="32a3e-190">(For information about the `~` operator, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="32a3e-191">Как показано в предыдущем примере содержит основной области страницы `<img>` элемент для отображения изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-191">As in the previous example, the body of the page contains an `<img>` element to display the image.</span></span> <span data-ttu-id="32a3e-192">Если `imagePath` задана `<img>` элемент подготавливается к просмотру и его `src` атрибуту присваивается `imagePath` значение.</span><span class="sxs-lookup"><span data-stu-id="32a3e-192">If `imagePath` has been set, the `<img>` element is rendered and its `src` attribute is set to the `imagePath` value.</span></span>
3. <span data-ttu-id="32a3e-193">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-193">Run the page in a browser.</span></span>
4. <span data-ttu-id="32a3e-194">Передача образа и убедитесь, что он отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="32a3e-194">Upload an image and make sure it's displayed in the page.</span></span>
5. <span data-ttu-id="32a3e-195">Откройте в веб-узла, *образы* папки.</span><span class="sxs-lookup"><span data-stu-id="32a3e-195">In your site, open the *images* folder.</span></span> <span data-ttu-id="32a3e-196">Вы увидите, что был добавлен новый файл, имя которого выглядит примерно следующим образом:</span><span class="sxs-lookup"><span data-stu-id="32a3e-196">You see that a new file has been added whose file name looks something like this::</span></span> 

    *<span data-ttu-id="32a3e-197">45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png</span><span class="sxs-lookup"><span data-stu-id="32a3e-197">45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png</span></span>*

    <span data-ttu-id="32a3e-198">Это образ, загруженный с идентификатором GUID, в качестве префикса имени.</span><span class="sxs-lookup"><span data-stu-id="32a3e-198">This is the image that you uploaded with a GUID prefixed to the name.</span></span> <span data-ttu-id="32a3e-199">(Свой собственный файл будет иметь другой GUID и, возможно, имеет имя, отличные от *MyPhoto.png*.)</span><span class="sxs-lookup"><span data-stu-id="32a3e-199">(Your own file will have a different GUID and probably is named something different than *MyPhoto.png*.)</span></span>

> [!TIP] 
> 
> <a id="SB_AboutGUIDs"></a>
> ### <a name="about-guids"></a><span data-ttu-id="32a3e-200">Об идентификаторах GUID</span><span class="sxs-lookup"><span data-stu-id="32a3e-200">About GUIDs</span></span>
> 
> <span data-ttu-id="32a3e-201">Идентификатор GUID (глобальный уникальный идентификатор) является идентификатором, который обычно отображается в виде следующим образом: `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-201">A GUID (globally-unique ID) is an identifier that's usually rendered in a format like this: `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span></span> <span data-ttu-id="32a3e-202">Цифры и буквы (от A до F) отличаются для каждого идентификатора GUID, но все они соответствуют шаблону с помощью групп 8-4-4-4-12 символов.</span><span class="sxs-lookup"><span data-stu-id="32a3e-202">The numbers and letters (from A-F) differ for each GUID, but they all follow the pattern of using groups of 8-4-4-4-12 characters.</span></span> <span data-ttu-id="32a3e-203">(С технической точки зрения GUID представляет 16-байтовый/128-разрядное число). Если вам требуется идентификатор GUID, можно вызвать специализированный код, который создает идентификатор GUID для вас.</span><span class="sxs-lookup"><span data-stu-id="32a3e-203">(Technically, a GUID is a 16-byte/128-bit number.) When you need a GUID, you can call specialized code that generates a GUID for you.</span></span> <span data-ttu-id="32a3e-204">Идея идентификаторы GUID в том, что между огромного размера, числа (3,4 x 10<sup>38</sup>) и алгоритм создания его, полученного числа гарантированно быть одного типа.</span><span class="sxs-lookup"><span data-stu-id="32a3e-204">The idea behind GUIDs is that between the enormous size of the number (3.4 x 10<sup>38</sup>) and the algorithm for generating it, the resulting number is virtually guaranteed to be one of a kind.</span></span> <span data-ttu-id="32a3e-205">Идентификаторы GUID, таким образом, являются хорошим способом для создания имен для таких вещей, в том случае, когда необходимо гарантировать, что вы не использовали дважды тем же именем.</span><span class="sxs-lookup"><span data-stu-id="32a3e-205">GUIDs therefore are a good way to generate names for things when you must guarantee that you won't use the same name twice.</span></span> <span data-ttu-id="32a3e-206">Недостаток, само собой, заключается в том, что идентификаторы GUID не особенно понятное для пользователя, поэтому они обычно используются, когда имя используется только в коде.</span><span class="sxs-lookup"><span data-stu-id="32a3e-206">The downside, of course, is that GUIDs aren't particularly user friendly, so they tend to be used when the name is used only in code.</span></span>


<a id="Resizing_an_Image"></a>
## <a name="resizing-an-image"></a><span data-ttu-id="32a3e-207">Изменение размера изображения</span><span class="sxs-lookup"><span data-stu-id="32a3e-207">Resizing an Image</span></span>

<span data-ttu-id="32a3e-208">Если веб-сайт принимает образов от пользователя, может потребоваться изменить размер изображения, прежде чем отображать или сохранить их.</span><span class="sxs-lookup"><span data-stu-id="32a3e-208">If your website accepts images from a user, you might want to resize the images before you display or save them.</span></span> <span data-ttu-id="32a3e-209">Можно повторно использовать `WebImage` вспомогательного метода для этого.</span><span class="sxs-lookup"><span data-stu-id="32a3e-209">You can again use the `WebImage` helper for this.</span></span>

<span data-ttu-id="32a3e-210">Эта процедура описывается изменение размера отправленного изображения, создание эскизов, а затем сохраните эскиз и исходное изображение на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="32a3e-210">This procedure shows how to resize an uploaded image to create a thumbnail and then save the thumbnail and original image in the website.</span></span> <span data-ttu-id="32a3e-211">На странице отображаются эскиз и использовать гиперссылки для перенаправления пользователей полноразмерное изображение.</span><span class="sxs-lookup"><span data-stu-id="32a3e-211">You display the thumbnail on the page and use a hyperlink to redirect users to the full-sized image.</span></span>

<span data-ttu-id="32a3e-212">![[image]](9-working-with-images/_static/image3.jpg "ch9images 3.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-212">![[image]](9-working-with-images/_static/image3.jpg "ch9images-3.jpg")</span></span>

1. <span data-ttu-id="32a3e-213">Добавьте новую страницу с именем *Thumbnail.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-213">Add a new page named *Thumbnail.cshtml*.</span></span>
2. <span data-ttu-id="32a3e-214">В *образы* папке создайте вложенную папку с именем *thumbs*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-214">In the *images* folder, create a subfolder named *thumbs*.</span></span>
3. <span data-ttu-id="32a3e-215">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-215">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample5.cshtml)]

    <span data-ttu-id="32a3e-216">Этот код аналогичен коду из предыдущего примера.</span><span class="sxs-lookup"><span data-stu-id="32a3e-216">This code is similar to the code from the previous example.</span></span> <span data-ttu-id="32a3e-217">Разница заключается в том, что этот код сохраняет изображение дважды, один раз в обычном режиме и один раз после создания эскиза копию образа.</span><span class="sxs-lookup"><span data-stu-id="32a3e-217">The difference is that this code saves the image twice, once normally and once after you create a thumbnail copy of the image.</span></span> <span data-ttu-id="32a3e-218">Сначала получить отправленный образ и сохраните его в *образы* папки.</span><span class="sxs-lookup"><span data-stu-id="32a3e-218">First you get the uploaded image and save it in the *images* folder.</span></span> <span data-ttu-id="32a3e-219">Вы затем создать новый путь для эскиза.</span><span class="sxs-lookup"><span data-stu-id="32a3e-219">You then construct a new path for the thumbnail image.</span></span> <span data-ttu-id="32a3e-220">Для создания эскиза, вызовите `WebImage` вспомогательного приложения `Resize` метод, чтобы создать образ 60 пикселей на 60 пикселей.</span><span class="sxs-lookup"><span data-stu-id="32a3e-220">To actually create the thumbnail, you call the `WebImage` helper's `Resize` method to create a 60-pixel by 60-pixel image.</span></span> <span data-ttu-id="32a3e-221">В примере показано, как сохранение пропорций и как можно предотвратить изображение увеличена (если новый размер фактически сделает образ большего размера).</span><span class="sxs-lookup"><span data-stu-id="32a3e-221">The example shows how you preserve the aspect ratio and how you can prevent the image from being enlarged (in case the new size would actually make the image larger).</span></span> <span data-ttu-id="32a3e-222">Изображение с измененным размером затем сохраняется в *thumbs* во вложенную папку.</span><span class="sxs-lookup"><span data-stu-id="32a3e-222">The resized image is then saved in the *thumbs* subfolder.</span></span>

    <span data-ttu-id="32a3e-223">В конце разметку, используется тот же `<img>` элемент с динамической `src` атрибут, который вы видели в предыдущих примерах поле для отображения изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-223">At the end of the markup, you use the same `<img>` element with the dynamic `src` attribute that you've seen in the previous examples to conditionally show the image.</span></span> <span data-ttu-id="32a3e-224">В этом случае можно отобразить эскиз.</span><span class="sxs-lookup"><span data-stu-id="32a3e-224">In this case, you display the thumbnail.</span></span> <span data-ttu-id="32a3e-225">Можно также использовать `<a>` элемент, чтобы создать гиперссылку на больших версию образа.</span><span class="sxs-lookup"><span data-stu-id="32a3e-225">You also use an `<a>` element to create a hyperlink to the big version of the image.</span></span> <span data-ttu-id="32a3e-226">Как и в `src` атрибут `<img>` задать элемент, `href` атрибут `<a>` элемент динамически, чтобы содержимое `imagePath`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-226">As with the `src` attribute of the `<img>` element, you set the `href` attribute of the `<a>` element dynamically to whatever is in `imagePath`.</span></span> <span data-ttu-id="32a3e-227">Чтобы убедиться в том, что путь может работать как URL-адрес, следует передать `imagePath` для `Html.AttributeEncode` метод, который преобразует зарезервированные символы в пути символы, которые допустимы в URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="32a3e-227">To make sure that the path can work as a URL, you pass `imagePath` to the `Html.AttributeEncode` method, which converts reserved characters in the path to characters that are ok in a URL.</span></span>
4. <span data-ttu-id="32a3e-228">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-228">Run the page in a browser.</span></span>
5. <span data-ttu-id="32a3e-229">Отправить фотографию и убедитесь, что отображается эскиз.</span><span class="sxs-lookup"><span data-stu-id="32a3e-229">Upload a photo and verify that the thumbnail is shown.</span></span>
6. <span data-ttu-id="32a3e-230">Щелкните эскиз, чтобы увеличить изображение.</span><span class="sxs-lookup"><span data-stu-id="32a3e-230">Click the thumbnail to see the full-size image.</span></span>
7. <span data-ttu-id="32a3e-231">В *образы* и *изображений и эскизов*, обратите внимание на то, что были добавлены новые файлы.</span><span class="sxs-lookup"><span data-stu-id="32a3e-231">In the *images* and *images/thumbs*, note that new files have been added.</span></span>

<a id="Rotating_and_Flipping"></a>
## <a name="rotating-and-flipping-an-image"></a><span data-ttu-id="32a3e-232">Вращение и отражение изображения</span><span class="sxs-lookup"><span data-stu-id="32a3e-232">Rotating and Flipping an Image</span></span>

<span data-ttu-id="32a3e-233">`WebImage` Вспомогательный также позволяет отразить и поворота изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-233">The `WebImage` helper also lets you flip and rotate images.</span></span> <span data-ttu-id="32a3e-234">Эта процедура показано, как получить изображение с сервера, отражение изображения сверху вниз (по вертикали), сохраните его и затем отобразить отраженное изображение на странице.</span><span class="sxs-lookup"><span data-stu-id="32a3e-234">This procedure shows how to get an image from the server, flip the image upside down (vertically), save it, and then display the flipped image on the page.</span></span> <span data-ttu-id="32a3e-235">В этом примере вы используете файл, у вас уже есть на сервере (*Photo2.jpg*).</span><span class="sxs-lookup"><span data-stu-id="32a3e-235">In this example, you're just using a file you already have on the server (*Photo2.jpg*).</span></span> <span data-ttu-id="32a3e-236">В реальном приложении вероятно, будет перевернуть изображение, имя которого вы получаете динамически, как это было сделано в предыдущих примерах.</span><span class="sxs-lookup"><span data-stu-id="32a3e-236">In a real application, you'd probably flip an image whose name you get dynamically, like you did in previous examples.</span></span>

<span data-ttu-id="32a3e-237">![[image]](9-working-with-images/_static/image4.jpg "ch9images 4.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-237">![[image]](9-working-with-images/_static/image4.jpg "ch9images-4.jpg")</span></span>

1. <span data-ttu-id="32a3e-238">Добавьте новую страницу с именем *FlipImage.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-238">Add a new page named *FlipImage.cshtml*.</span></span>
2. <span data-ttu-id="32a3e-239">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-239">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample6.cshtml)]

    <span data-ttu-id="32a3e-240">Код использует `WebImage` вспомогательный метод для получения изображения с сервера.</span><span class="sxs-lookup"><span data-stu-id="32a3e-240">The code uses the `WebImage` helper to get an image from the server.</span></span> <span data-ttu-id="32a3e-241">Создать путь к образу, используя ту же методику, используемый в предыдущих примерах для сохранения изображений, и передать этот путь при создании образа с помощью `WebImage`:</span><span class="sxs-lookup"><span data-stu-id="32a3e-241">You create the path to the image using the same technique you used in earlier examples for saving images, and you pass that path when you create an image using `WebImage`:</span></span>

    [!code-javascript[Main](9-working-with-images/samples/sample7.js)]

    <span data-ttu-id="32a3e-242">При обнаружении изображения, можно создать новый путь и имя файла, как это было сделано в предыдущих примерах.</span><span class="sxs-lookup"><span data-stu-id="32a3e-242">If an image is found, you construct a new path and file name, like you did in earlier examples.</span></span> <span data-ttu-id="32a3e-243">Перевернуть изображение, вызовите `FlipVertical` метод, а затем сохраните файл еще раз.</span><span class="sxs-lookup"><span data-stu-id="32a3e-243">To flip the image, you call the `FlipVertical` method, and then you save the image again.</span></span>

    <span data-ttu-id="32a3e-244">Изображение снова отображается на странице с помощью `<img>` элемент с `src` атрибут `imagePath`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-244">The image is again displayed on the page by using the `<img>` element with the `src` attribute set to `imagePath`.</span></span>
3. <span data-ttu-id="32a3e-245">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-245">Run the page in a browser.</span></span> <span data-ttu-id="32a3e-246">Изображение для его *Photo2.jpg* отображается сверху вниз.</span><span class="sxs-lookup"><span data-stu-id="32a3e-246">The image for *Photo2.jpg* is shown upside down.</span></span>
4. <span data-ttu-id="32a3e-247">Обновите страницу или запросите страницу еще раз, чтобы увидеть, что изображение должно быть перевернуто справа от оператора копирования еще раз.</span><span class="sxs-lookup"><span data-stu-id="32a3e-247">Refresh the page or request the page again to see the image is flipped right side up again.</span></span>

<span data-ttu-id="32a3e-248">Для поворота изображения, используйте один и тот же код, но вместо вызова метода `FlipVertical` или `FlipHorizontal`, вы вызываете `RotateLeft` или `RotateRight`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-248">To rotate an image, you use the same code, except that instead of calling the `FlipVertical` or `FlipHorizontal`, you call `RotateLeft` or `RotateRight`.</span></span>

<a id="Adding_a_Watermark"></a>
## <a name="adding-a-watermark-to-an-image"></a><span data-ttu-id="32a3e-249">Добавление на изображение водяного знака</span><span class="sxs-lookup"><span data-stu-id="32a3e-249">Adding a Watermark to an Image</span></span>

<span data-ttu-id="32a3e-250">При добавлении изображения на веб-сайт, может потребоваться добавление предела в образе, прежде чем сохранить его или отобразить ее на странице.</span><span class="sxs-lookup"><span data-stu-id="32a3e-250">When you add images to your website, you might want to add a watermark to the image before you save it or display it on a page.</span></span> <span data-ttu-id="32a3e-251">Люди часто используют водяные знаки, добавить сведения об авторских правах для изображения или для объявления имени бизнеса.</span><span class="sxs-lookup"><span data-stu-id="32a3e-251">People often use watermarks to add copyright information to an image or to advertise their business name.</span></span>

<span data-ttu-id="32a3e-252">![[image]](9-working-with-images/_static/image5.jpg "ch9images 5.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-252">![[image]](9-working-with-images/_static/image5.jpg "ch9images-5.jpg")</span></span>

1. <span data-ttu-id="32a3e-253">Добавьте новую страницу с именем *Watermark.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-253">Add a new page named *Watermark.cshtml*.</span></span>
2. <span data-ttu-id="32a3e-254">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-254">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample8.cshtml)]

    <span data-ttu-id="32a3e-255">Этот код похож код в *FlipImage.cshtml* страницы из ранее (несмотря на то, что этот раз *Photo3.jpg* файла).</span><span class="sxs-lookup"><span data-stu-id="32a3e-255">This code is like the code in the *FlipImage.cshtml* page from earlier (although this time it uses the *Photo3.jpg* file).</span></span> <span data-ttu-id="32a3e-256">Чтобы добавить водяной знак, необходимо вызвать `WebImage` вспомогательного приложения `AddTextWatermark` метод перед сохранением образа.</span><span class="sxs-lookup"><span data-stu-id="32a3e-256">To add the watermark, you call the `WebImage` helper's `AddTextWatermark` method before you save the image.</span></span> <span data-ttu-id="32a3e-257">В вызове `AddTextWatermark`, передать текст &quot;Мои водяного знака&quot;, задать цвет шрифта на желтый и значением Arial семейство шрифтов.</span><span class="sxs-lookup"><span data-stu-id="32a3e-257">In the call to `AddTextWatermark`, you pass the text &quot;My Watermark&quot;, set the font color to yellow, and set the font family to Arial.</span></span> <span data-ttu-id="32a3e-258">(Несмотря на то, что это не показано, `WebImage` вспомогательный также позволяет указать непрозрачности, семейство шрифтов и размер и положение текста водяного знака.) При сохранении изображения оно не должно быть только для чтения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-258">(Although it's not shown here, the `WebImage` helper also lets you specify opacity, font family and font size, and the position of the watermark text.) When you save the image it must not be read-only.</span></span>

    <span data-ttu-id="32a3e-259">Как вы уже видели, изображение отображается на странице с помощью `<img>` элемент с атрибутом src значение `@imagePath`.</span><span class="sxs-lookup"><span data-stu-id="32a3e-259">As you've seen before, the image is displayed on the page by using the `<img>` element with the src attribute set to `@imagePath`.</span></span>
3. <span data-ttu-id="32a3e-260">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-260">Run the page in a browser.</span></span> <span data-ttu-id="32a3e-261">Обратите внимание на текст «My водяной знак» в правом верхнем углу изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-261">Notice the text "My Watermark" at the bottom-right corner of the image.</span></span>

<a id="Using_an_Image_as_a_Watermark"></a>
## <a name="using-an-image-as-a-watermark"></a><span data-ttu-id="32a3e-262">Использование изображения в качестве водяного знака</span><span class="sxs-lookup"><span data-stu-id="32a3e-262">Using an Image As a Watermark</span></span>

<span data-ttu-id="32a3e-263">Вместо использования текст для водяного знака, можно использовать другое изображение.</span><span class="sxs-lookup"><span data-stu-id="32a3e-263">Instead of using text for a watermark, you can use another image.</span></span> <span data-ttu-id="32a3e-264">Люди иногда использовать образы, такие как эмблема компании как водяной знак или они водяной знак вместо текста для сведения об авторских правах.</span><span class="sxs-lookup"><span data-stu-id="32a3e-264">People sometimes use images like a company logo as a watermark, or they use a watermark image instead of text for copyright information.</span></span>

<span data-ttu-id="32a3e-265">![[image]](9-working-with-images/_static/image6.jpg "ch9images 6.jpg")</span><span class="sxs-lookup"><span data-stu-id="32a3e-265">![[image]](9-working-with-images/_static/image6.jpg "ch9images-6.jpg")</span></span>

1. <span data-ttu-id="32a3e-266">Добавьте новую страницу с именем *ImageWatermark.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-266">Add a new page named *ImageWatermark.cshtml*.</span></span>
2. <span data-ttu-id="32a3e-267">Добавить изображение в *образы* папке можно использовать в качестве эмблемы, а также переименовать изображение *MyCompanyLogo.jpg*.</span><span class="sxs-lookup"><span data-stu-id="32a3e-267">Add an image to the *images* folder that you can use as a logo, and rename the image *MyCompanyLogo.jpg*.</span></span> <span data-ttu-id="32a3e-268">Этот образ должен быть изображения, как можно четко видеть, когда он имеет значение 80 пикселей в ширину и 20 пикселов в высоту.</span><span class="sxs-lookup"><span data-stu-id="32a3e-268">This image should be an image that you can see clearly when it's set to 80 pixels wide and 20 pixels high.</span></span>
3. <span data-ttu-id="32a3e-269">Замените существующее содержимое на странице следующее:</span><span class="sxs-lookup"><span data-stu-id="32a3e-269">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample9.cshtml)]

    <span data-ttu-id="32a3e-270">Это другой вариант на коде из предыдущих примерах.</span><span class="sxs-lookup"><span data-stu-id="32a3e-270">This is another variation on the code from earlier examples.</span></span> <span data-ttu-id="32a3e-271">В этом случае Вы вызовите `AddImageWatermark` добавить изображение водяного знака в целевой образ (*Photo3.jpg*) перед сохранением образа.</span><span class="sxs-lookup"><span data-stu-id="32a3e-271">In this case, you call `AddImageWatermark` to add the watermark image to the target image (*Photo3.jpg*) before you save the image.</span></span> <span data-ttu-id="32a3e-272">При вызове `AddImageWatermark`, задайте его ширину 80 пикселей и высоту, до 20 пикселей.</span><span class="sxs-lookup"><span data-stu-id="32a3e-272">When you call `AddImageWatermark`, you set its width to 80 pixels and the height to 20 pixels.</span></span> <span data-ttu-id="32a3e-273">*MyCompanyLogo.jpg* изображение горизонтально по центру и выравнивается вертикально в нижней части целевой образ.</span><span class="sxs-lookup"><span data-stu-id="32a3e-273">The *MyCompanyLogo.jpg* image is horizontally aligned in the center and vertically aligned at the bottom of the target image.</span></span> <span data-ttu-id="32a3e-274">Прозрачность имеет значение 100% и заполнение, равными 10 пикселям.</span><span class="sxs-lookup"><span data-stu-id="32a3e-274">The opacity is set to 100% and the padding is set to 10 pixels.</span></span> <span data-ttu-id="32a3e-275">Если изображение водяного знака больше, чем конечный образ, ничего не происходит.</span><span class="sxs-lookup"><span data-stu-id="32a3e-275">If the watermark image is bigger than the target image, nothing will happen.</span></span> <span data-ttu-id="32a3e-276">Если изображение водяного знака больше, чем конечный образ и установить заполнение для изображений водяного знака до нуля, водяной знак учитывается.</span><span class="sxs-lookup"><span data-stu-id="32a3e-276">If the watermark image is bigger than the target image and you set the padding for the image watermark to zero, the watermark is ignored.</span></span>

    <span data-ttu-id="32a3e-277">Как и раньше, отображения изображения с помощью `<img>` элемент и динамического `src` атрибута.</span><span class="sxs-lookup"><span data-stu-id="32a3e-277">As before, you display the image using the `<img>` element and a dynamic `src` attribute.</span></span>
4. <span data-ttu-id="32a3e-278">Откройте страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="32a3e-278">Run the page in a browser.</span></span> <span data-ttu-id="32a3e-279">Обратите внимание, что изображение водяного знака в нижней части основного изображения.</span><span class="sxs-lookup"><span data-stu-id="32a3e-279">Notice that the watermark image appears at the bottom of the main image.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="32a3e-280">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="32a3e-280">Additional Resources</span></span>


[<span data-ttu-id="32a3e-281">Работа с файлами на сайте страниц ASP.NET Web</span><span class="sxs-lookup"><span data-stu-id="32a3e-281">Working with Files in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202896)

[<span data-ttu-id="32a3e-282">Введение в программирование с использованием синтаксиса Razor веб-страниц ASP.NET</span><span class="sxs-lookup"><span data-stu-id="32a3e-282">Introduction to ASP.NET Web Pages Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=251587)
