---
uid: web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
title: Создание согласованного макета в ASP.NET Web Pages (Razor) сайтов | Документация Майкрософт
author: Rick-Anderson
description: Чтобы сделать его более эффективно создавать веб-страницы для веб-узла, можно создать многократно используемые блоки содержимого (например, верхние и нижние колонтитулы) для веб-сайт или вы c...
ms.author: riande
ms.date: 03/10/2014
ms.assetid: d7bd001b-6db2-4422-9b78-f3d08b743b00
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
msc.type: authoredcontent
ms.openlocfilehash: 83aef41c0baaeca6a25e09b4ea797ce9ee963a85
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57051241"
---
<a name="creating-a-consistent-layout-in-aspnet-web-pages-razor-sites"></a>Создание согласованного макета на сайтах ASP.NET Web Pages (Razor)
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> В этой статье объясняется, как можно использовать страницы макета в на веб-сайте ASP.NET Web Pages (Razor) для создания многократно используемых блоков содержимого (например, верхние и нижние колонтитулы) и создание согласованного вида для всех страниц на узле.
> 
> **Вы узнаете, как:** 
> 
> - Как создать многократно используемые блоки содержимого, например, верхние и нижние колонтитулы.
> - Как создать согласованного вида для всех страниц узла с помощью макета.
> - Способ передачи данных во время выполнения страницы макета.
> 
> Ниже приведены функции ASP.NET, представленные в этой статье.
> 
> - Блоки содержимого, которые представляют собой файлы, содержащие содержимое в формате HTML для вставки в несколько страниц.
> - Макет страницы, которые находятся на страницах, содержащих содержимое в формате HTML, который может совместно использоваться страниц веб-сайта.
> - `RenderPage`, `RenderBody`, И `RenderSection` методы, которые настраивают место вставки элементов страницы ASP.NET.
> - `PageData` Словарь, который позволяет совместно использовать данные в блоки содержимого и макета страницы.
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a>Версии программного обеспечения, используемые в этом руководстве
> 
> 
> - Веб-страниц ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с ASP.NET Web Pages 2.


## <a name="about-layout-pages"></a>О страниц макета

Содержимое, которое отображается на каждой странице, такие как заголовок и нижний колонтитул или поле, в котором сообщает пользователям о том, что они вошли у многих веб-сайтов. ASP.NET позволяет создавать отдельный файл с помощью содержимого блока, который может содержать текст, разметку и код, так же, как и обычная веб-страница. Затем можно вставить блок содержимого на других страницах на сайте место вставки. В этом случае не нужно скопировать и вставить одинаковое содержимое в каждую страницу. Создание типичного содержимого, как это также упрощает для обновления сайта. Если вам нужно изменить содержимое, достаточно просто обновить один файл, а также изменения, затем отражаются везде вставки содержимого.

На следующей схеме показано, как содержимое блокирует работы. Когда браузер запрашивает страницу с веб-сервера, ASP.NET вставляет блоки содержимого в точке, где `RenderPage` на главной странице вызывается метод. Страница завершения (объединенный) затем отправляется в браузер.

![Концептуальная схема, показывающая, как метод RenderPage вставляет страницу, на которые имеются ссылки в текущей страницы.](3-creating-a-consistent-look/_static/image1.jpg)

В этой процедуре вы создадите страницы, на который ссылается на два блоки содержимого (заголовок и нижний колонтитул), которые находятся в отдельных файлах. Эти же блоки содержимого можно использовать на любой странице узла. Когда все будет готово, вы получите страницу следующим образом:

![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderPage.](3-creating-a-consistent-look/_static/image2.jpg)

1. В корневой папке веб-сайта, создайте файл с именем *Index.cshtml*.
2. Замените существующую разметку следующей:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample1.html)]
3. В корневой папке создайте папку с именем *Shared*.

    > [!NOTE]
    > Обычно для хранения файлов, которые являются общими для веб-страниц в папку с именем *Shared*.
4. В *Shared* папке создайте файл с именем  *\_Header.cshtml*.
5. Замените все существующее содержимое следующим кодом:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample2.html)]

    Обратите внимание, что имя файла —  *\_Header.cshtml*, с символа подчеркивания (\_) как префикс. ASP.NET не будет отправлять страницу в браузер, если его имя начинается с символа подчеркивания. Это не позволит запросов (случайно или иным способом) этих страниц напрямую. Рекомендуется использовать символом подчеркивания для страницы имя, которые имеют блоки содержимого в них, так как нет нужды пользователей, чтобы иметь возможность запросить эти страницы &#8212; они существуют исключительно для вставки в другие страницы.
6. В *Shared* папке создайте файл с именем  *\_Footer.cshtml* и замените содержимое следующим:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample3.html)]
7. В *Index.cshtml* странице, добавьте два вызова `RenderPage` метод, как показано ниже:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample4.html)]

    Это показано, как вставить блок содержимого в веб-страницы. Вы вызываете `RenderPage` метод и передать его имя файла, содержимое которой нужно вставить в этот момент. Здесь осуществляется вставка содержимого  *\_Header.cshtml* и  *\_Footer.cshtml* файлы в *Index.cshtml* файла.
8. Запустите *Index.cshtml* страницу в браузере. (В WebMatrix в **файлы** рабочей области, щелкните правой кнопкой мыши файл, а затем выберите **запустить в браузере**.)
9. В браузере просмотрите исходный код страницы. (Например, в Internet Explorer, щелкните страницу правой кнопкой мыши и нажмите кнопку **Просмотр исходного кода**.)

    Это позволяет увидеть разметки веб-страницы, который отправляется в браузер, который объединяет разметку страницы индекса с блоки содержимого. В следующем примере показан исходный код страницы, отображаемой для *Index.cshtml*. Вызовы `RenderPage` , вставленных в *Index.cshtml* были заменены фактическое содержимое файлов верхнего и нижнего колонтитулов.

    [!code-html[Main](3-creating-a-consistent-look/samples/sample5.html)]

## <a name="creating-a-consistent-look-using-layout-pages"></a>Создание согласованного вида с помощью страницы макета

Пока вы видели, что это легко включать то же содержимое на нескольких страницах. Более структурированный подход к созданию согласованного вида для сайта является использование макета страницы. Страница макета определяет структуру веб-страницы, но не содержит действительного содержимого. После создания страницы макета, можно создать веб-страницы с содержимым и связать их с макетом страницы. При отображении этих страниц, они будут форматироваться в соответствии с макетом страницы. (В этом смысле страницы макета действует в качестве шаблона для содержимого, которое определяется на других страницах.)

Страница макета — так же, как и любой HTML-страницы, за исключением того, что она содержит вызов `RenderBody` метод. Положение `RenderBody` метод на странице макета определяет, где будут включены сведения на странице содержимого.

На следующей схеме показано, как страниц и страниц макета объединяются во время выполнения для создания готовой веб-страницы. Браузер запрашивает страницу содержимого. Страница содержимого содержит код, указывающее макет страницы, которая используется для структуры страницы. На странице макета содержимое вставляется в точке, где `RenderBody` вызывается метод. Содержимого, блоки можно также вставлять в макет страницы путем вызова `RenderPage` метода, так, как и в предыдущем разделе. По завершении веб-страницы он отправляется в браузер.

![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderBody.](3-creating-a-consistent-look/_static/image3.jpg)

Ниже показано, как создать макет страницы содержимого страницы и ссылки на него.

1. В *Shared* папку веб-сайта, создайте файл с именем  *\_Layout1.cshtml*.
2. Замените все существующее содержимое следующим кодом:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample6.html)]

    Использовании `RenderPage` метода на странице макета для вставки содержимого блоков. Страница макета может содержать только один вызов `RenderBody` метод.
3. В *Shared* папке создайте файл с именем  *\_Header2.cshtml* и замените все существующее содержимое на следующее:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample7.html)]
4. В корневой папке создайте папку с именем *стили*.
5. В *стили* папке создайте файл с именем *Site.css* и добавьте следующие определения стиля:

    [!code-css[Main](3-creating-a-consistent-look/samples/sample8.css)]

    Эти определения стиля предназначены только для того, чтобы показать, как можно использовать таблицы стилей со страницы макета. Если требуется, можно определить собственные стили для этих элементов.
6. В корневой папке создайте файл с именем *Content1.cshtml* и замените все существующее содержимое на следующее:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample9.cshtml)]

    Это страница, которую будет использовать страницы макета. Блок кода в верхней части страницы указывает, какую страницу макета для форматирования этого содержимого.
7. Запустите *Content1.cshtml* в браузере. Отображенная страница использует формат и стилей, определенные в  *\_Layout1.cshtml* и текст (содержимое), определенные в *Content1.cshtml*.

    ![[изображение]](3-creating-a-consistent-look/_static/image4.jpg)

    Повторите шаг 6, чтобы создать дополнительные страницы содержимого, которые могут совместно использовать одну и ту же страницу макета.

    > [!NOTE]
    > Веб-узла можно настроить таким образом, можно автоматически использовать ту же страницу макета для всех страниц содержимого в папке. Дополнительные сведения см. в разделе [поведение Настройка сайта для веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906).

## <a name="designing-layout-pages-that-have-multiple-content-sections"></a>Разработка макета страниц, имеющих несколько разделов содержимого

Страницы содержимого может иметь несколько разделов, что удобно, если вы хотите использовать макеты, которые имеют несколько областей с заменяемое содержимое. На странице содержимого вы предоставляете в каждом разделе уникальное имя. (Раздел по умолчанию остается без имени.) На странице макета, добавления `RenderBody` метод, чтобы указать, где должен отображаться в разделе неименованные (по умолчанию). Затем можно добавить отдельный `RenderSection` методы для отображения именованные разделы по отдельности.

На следующей схеме показано, как ASP.NET обрабатывает содержимое, которое состоит из нескольких разделов. Каждый именованный раздел находится в блоке раздел на странице содержимого. (Их названия `Header` и `List` в примере.) Платформа вставляет раздел содержимого в страницу макета в точке, где `RenderSection` вызывается метод. В разделе (по умолчанию безымянный) вставляется в точке, где `RenderBody` вызывается метод, как показано выше.

![Концептуальная схема, показывающая, каким образом метод RenderSection вставляет ссылки на разделы в текущей страницы.](3-creating-a-consistent-look/_static/image5.jpg)

Эта процедура показывает, как создать страницу содержимого, который имеет несколько разделов содержимого и Подготовка к просмотру с помощью страницы макета, которая поддерживает несколько разделов содержимого.

1. В *Shared* папке создайте файл с именем  *\_Layout2.cshtml*.
2. Замените все существующее содержимое следующим кодом:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample10.html)]

    Использовании `RenderSection` метод для отображения разделов «заголовок» и «список.
3. В корневой папке создайте файл с именем *Content2.cshtml* и замените все существующее содержимое на следующее:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample11.cshtml)]

    Эта страница содержимого содержит блок кода в верхней части страницы. Каждый именованный раздел содержится в разделе блок. Остальная часть страницы содержит раздел содержимого по умолчанию (неименованный).
4. Запустите *Content2.cshtml* в браузере.

    ![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderSection.](3-creating-a-consistent-look/_static/image6.jpg)

## <a name="making-content-sections-optional"></a>Что делает необязательные разделы содержимого

Как правило разделы, создайте на странице содержимого должны совпадать разделы, которые определены на странице макета. Возможно возникновение ошибок при возникновении любого из следующих:

- Страница содержимого содержит секцию, не соответствующий раздел на странице макета.
- Страница макета содержит раздел, для которого отсутствует содержимое.
- Страница макета включает вызовы методов, выполняющих для подготовки к просмотру в том же разделе, более одного раза.

Тем не менее можно переопределить это поведение для именованного раздела, объявив разделе необязательным на странице макета. Это позволяет определить несколько страниц, могут совместно использовать страницы макета, но которые могут или не могут иметь содержимое конкретного раздела.

1. Откройте *Content2.cshtml* и удалите следующий раздел:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample12.cshtml)]
2. Сохраните страницу и затем запустите его в браузере. Отображается сообщение об ошибке, так как страницы содержимого не предоставляет содержимое для раздела, определенные на странице макета, а именно раздел заголовка.

    ![Снимок экрана, показывающий ошибку, которая происходит при запуске страницы, которая вызывает метод RenderSection, но не задан соответствующий раздел.](3-creating-a-consistent-look/_static/image7.jpg)
3. В *Shared* откройте  *\_Layout2.cshtml* странице и замените эту строку:

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample13.js)]

    следующим кодом:

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample14.js)]

    Кроме того удалось замените следующий блок кода, который возвращает те же результаты предыдущей строке кода:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample15.cshtml)]
4. Запустите *Content2.cshtml* страницу в браузере еще раз. (Если у вас по-прежнему есть этой странице откройте в браузере, можно просто обновить его.) Это время откроется страница без ошибок, даже при наличии без заголовка.

## <a name="passing-data-to-layout-pages"></a>Передача данных на макет страницы

Возможно, данные, определенные на странице содержимого, вам потребуется обратиться к странице макета. Если Да, необходимо передать данные на странице содержимого на страницу макета. Например может потребоваться отображение состояния входа пользователя, или может потребоваться Показать или скрыть области содержимого, на основе ввода пользователя.

Чтобы передать данные из страницы содержания страницы макета, можно разместить значения в `PageData` свойства содержимого страницы. `PageData` Свойство является коллекцией пар "имя значение", которые содержат данные, передаваемые между страницами. На странице макета, вы сможете прочесть значений из `PageData` свойство.

Вот другой схеме. Здесь показано, как можно использовать ASP.NET `PageData` свойство для передачи значений из страницы содержания к странице макета. Когда ASP.NET начинает создавать веб-страницы, он создает `PageData` коллекции. На странице содержимого написать код, чтобы поместить данные в `PageData` коллекции. Значения в `PageData` коллекции возможен также другие разделы страницы содержимого или дополнительные блоки содержимого.

![Концептуальная схема, показывающая, как заполнить словарь PageData и передать эту информацию на странице макета страницы содержимого.](3-creating-a-consistent-look/_static/image8.jpg)

Ниже показано, как для передачи данных из страницы содержания страницы макета. При запуске страницы отображается кнопка, которая позволяет пользователю скрывать или отображать список, который определен на странице макета. При нажатии пользователем кнопки, устанавливает значение true или false (Boolean) `PageData` свойство. Страница макета это значение считывается и если это значение равно false, скрывает списка. Значение также используется для определения, следует ли отображать на странице содержимого **скрыть список** кнопку или **Показать список** кнопки.

![[изображение]](3-creating-a-consistent-look/_static/image9.jpg)

1. В корневой папке создайте файл с именем *Content3.cshtml* и замените все существующее содержимое на следующее:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample16.cshtml)]

    Код сохраняет две части данных в `PageData` свойство &#8212; заголовок веб-страницы и значение true или false, чтобы указать необходимость отображения списка.

    Обратите внимание на то, что ASP.NET позволяет разместить HTML-разметка, на странице, по условию с использованием блока кода. Например `if/else` блок в теле страницы определяет, какую форму для отображения в зависимости от того, следует ли `PageData["ShowList"]` задано значение true.
2. В *Shared* папке создайте файл с именем  *\_Layout3.cshtml* и замените все существующее содержимое на следующее:

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample17.cshtml)]

    Страница макета включает выражение в `<title>` элемент, который получает значение заголовка из `PageData` свойство. Он также использует `ShowList` значение `PageData` свойства, чтобы определить, следует ли отображать блок содержимого списка.
3. В *Shared* папке создайте файл с именем  *\_List.cshtml* и замените все существующее содержимое на следующее:

    [!code-html[Main](3-creating-a-consistent-look/samples/sample18.html)]
4. Запустите *Content3.cshtml* страницу в браузере. Откроется страница со списком, отображается в левой части страницы и **скрыть список** кнопку внизу.

    ![Снимок экрана страницы, которая включает в себя список и кнопку, которая говорит: «Скрыть список».](3-creating-a-consistent-look/_static/image10.jpg)
5. Нажмите кнопку **скрыть список**. Не отображается в списке, а кнопка изменится на **Показать список**.

    ![Снимок экрана страницы, которая не включает список и кнопку, которая говорит: «Показать список».](3-creating-a-consistent-look/_static/image11.jpg)
6. Нажмите кнопку **Показать список** кнопки и списка отображается снова.

## <a name="additional-resources"></a>Дополнительные ресурсы


[Настройка поведения сайта веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906)
