---
uid: web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
title: Создание согласованного макета в ASP.NET Web Pages (Razor) сайтов | Документация Майкрософт
author: Rick-Anderson
description: Чтобы сделать его более эффективно создавать веб-страницы для веб-узла, можно создать многократно используемые блоки содержимого (например, верхние и нижние колонтитулы) для веб-сайт или вы c...
ms.author: riande
ms.date: 03/10/2014
ms.assetid: d7bd001b-6db2-4422-9b78-f3d08b743b00
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
msc.type: authoredcontent
ms.openlocfilehash: 7ed2f5da62f4521b42db737100230fac5ea71d67
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59385984"
---
# <a name="creating-a-consistent-layout-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="4aaa4-103">Создание согласованного макета на сайтах ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="4aaa4-103">Creating a Consistent Layout in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="4aaa4-104">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="4aaa4-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="4aaa4-105">В этой статье объясняется, как можно использовать страницы макета в на веб-сайте ASP.NET Web Pages (Razor) для создания многократно используемых блоков содержимого (например, верхние и нижние колонтитулы) и создание согласованного вида для всех страниц на узле.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-105">This article explains how you can use layout pages in an ASP.NET Web Pages (Razor) website to create reusable blocks of content (like headers and footers) and to create a consistent look for all the pages in the site.</span></span>
> 
> <span data-ttu-id="4aaa4-106">**Вы узнаете, как:**</span><span class="sxs-lookup"><span data-stu-id="4aaa4-106">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="4aaa4-107">Как создать многократно используемые блоки содержимого, например, верхние и нижние колонтитулы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-107">How to create reusable blocks of content like headers and footers.</span></span>
> - <span data-ttu-id="4aaa4-108">Как создать согласованного вида для всех страниц узла с помощью макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-108">How to create a consistent look for all the pages in your site using a layout.</span></span>
> - <span data-ttu-id="4aaa4-109">Способ передачи данных во время выполнения страницы макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-109">How to pass data at run time to a layout page.</span></span>
> 
> <span data-ttu-id="4aaa4-110">Ниже приведены функции ASP.NET, представленные в этой статье.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-110">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="4aaa4-111">Блоки содержимого, которые представляют собой файлы, содержащие содержимое в формате HTML для вставки в несколько страниц.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-111">Content blocks, which are files that contain HTML-formatted content to be inserted in multiple pages.</span></span>
> - <span data-ttu-id="4aaa4-112">Макет страницы, которые находятся на страницах, содержащих содержимое в формате HTML, который может совместно использоваться страниц веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-112">Layout pages, which are pages that contain HTML-formatted content that can be shared by pages on the website.</span></span>
> - <span data-ttu-id="4aaa4-113">`RenderPage`, `RenderBody`, И `RenderSection` методы, которые настраивают место вставки элементов страницы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-113">The `RenderPage`, `RenderBody`, and `RenderSection` methods, which tell ASP.NET where to insert page elements.</span></span>
> - <span data-ttu-id="4aaa4-114">`PageData` Словарь, который позволяет совместно использовать данные в блоки содержимого и макета страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-114">The `PageData` dictionary that lets you share data between content blocks and layout pages.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="4aaa4-115">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="4aaa4-115">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="4aaa4-116">Веб-страниц ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="4aaa4-116">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="4aaa4-117">Этот учебник также работает с ASP.NET Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-117">This tutorial also works with ASP.NET Web Pages 2.</span></span>


## <a name="about-layout-pages"></a><span data-ttu-id="4aaa4-118">О страниц макета</span><span class="sxs-lookup"><span data-stu-id="4aaa4-118">About Layout Pages</span></span>

<span data-ttu-id="4aaa4-119">Содержимое, которое отображается на каждой странице, такие как заголовок и нижний колонтитул или поле, в котором сообщает пользователям о том, что они вошли у многих веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-119">Many websites have content that's displayed on every page, like a header and footer, or a box that tells users that they're logged in.</span></span> <span data-ttu-id="4aaa4-120">ASP.NET позволяет создавать отдельный файл с помощью содержимого блока, который может содержать текст, разметку и код, так же, как и обычная веб-страница.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-120">ASP.NET lets you create a separate file with a content block that can contain text, markup, and code, just like a regular web page.</span></span> <span data-ttu-id="4aaa4-121">Затем можно вставить блок содержимого на других страницах на сайте место вставки.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-121">You can then insert the content block in other pages on the site where you want the information to appear.</span></span> <span data-ttu-id="4aaa4-122">В этом случае не нужно скопировать и вставить одинаковое содержимое в каждую страницу.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-122">That way you don't have to copy and paste the same content into every page.</span></span> <span data-ttu-id="4aaa4-123">Создание типичного содержимого, как это также упрощает для обновления сайта.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-123">Creating common content like this also makes it easier to update your site.</span></span> <span data-ttu-id="4aaa4-124">Если вам нужно изменить содержимое, достаточно просто обновить один файл, а также изменения, затем отражаются везде вставки содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-124">If you need to change the content, you can just update a single file, and the changes are then reflected everywhere the content has been inserted.</span></span>

<span data-ttu-id="4aaa4-125">На следующей схеме показано, как содержимое блокирует работы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-125">The following diagram shows how content blocks work.</span></span> <span data-ttu-id="4aaa4-126">Когда браузер запрашивает страницу с веб-сервера, ASP.NET вставляет блоки содержимого в точке, где `RenderPage` на главной странице вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-126">When a browser requests a page from the web server, ASP.NET inserts the content blocks at the point where the `RenderPage` method is called in the main page.</span></span> <span data-ttu-id="4aaa4-127">Страница завершения (объединенный) затем отправляется в браузер.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-127">The finished (merged) page is then sent to the browser.</span></span>

![Концептуальная схема, показывающая, как метод RenderPage вставляет страницу, на которые имеются ссылки в текущей страницы.](3-creating-a-consistent-look/_static/image1.jpg)

<span data-ttu-id="4aaa4-129">В этой процедуре вы создадите страницы, на который ссылается на два блоки содержимого (заголовок и нижний колонтитул), которые находятся в отдельных файлах.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-129">In this procedure, you'll create a page that references two content blocks (a header and a footer) that are located in separate files.</span></span> <span data-ttu-id="4aaa4-130">Эти же блоки содержимого можно использовать на любой странице узла.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-130">You can use these same content blocks in any page in your site.</span></span> <span data-ttu-id="4aaa4-131">Когда все будет готово, вы получите страницу следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-131">When you're done, you'll get a page like this:</span></span>

![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderPage.](3-creating-a-consistent-look/_static/image2.jpg)

1. <span data-ttu-id="4aaa4-133">В корневой папке веб-сайта, создайте файл с именем *Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-133">In the root folder of your website, create a file named *Index.cshtml*.</span></span>
2. <span data-ttu-id="4aaa4-134">Замените существующую разметку следующей:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-134">Replace the existing markup with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample1.html)]
3. <span data-ttu-id="4aaa4-135">В корневой папке создайте папку с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-135">In the root folder, create a folder named *Shared*.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4aaa4-136">Обычно для хранения файлов, которые являются общими для веб-страниц в папку с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-136">It's common practice to store files that are shared among web pages in a folder named *Shared*.</span></span>
4. <span data-ttu-id="4aaa4-137">В *Shared* папке создайте файл с именем  *\_Header.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-137">In the *Shared* folder, create a file named *\_Header.cshtml*.</span></span>
5. <span data-ttu-id="4aaa4-138">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-138">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample2.html)]

    <span data-ttu-id="4aaa4-139">Обратите внимание, что имя файла —  *\_Header.cshtml*, с символа подчеркивания (\_) как префикс.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-139">Notice that the file name is *\_Header.cshtml*, with an underscore (\_) as a prefix.</span></span> <span data-ttu-id="4aaa4-140">ASP.NET не будет отправлять страницу в браузер, если его имя начинается с символа подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-140">ASP.NET won't send a page to the browser if its name starts with an underscore.</span></span> <span data-ttu-id="4aaa4-141">Это не позволит запросов (случайно или иным способом) этих страниц напрямую.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-141">This prevents people from requesting (inadvertently or otherwise) these pages directly.</span></span> <span data-ttu-id="4aaa4-142">Рекомендуется использовать символом подчеркивания для страницы имя, которые имеют блоки содержимого в них, так как нет нужды пользователей, чтобы иметь возможность запросить эти страницы &#8212; они существуют исключительно для вставки в другие страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-142">It's a good idea to use an underscore to name pages that have content blocks in them, because you don't really want users to be able to request these pages &#8212; they exist strictly to be inserted into other pages.</span></span>
6. <span data-ttu-id="4aaa4-143">В *Shared* папке создайте файл с именем  *\_Footer.cshtml* и замените содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-143">In the *Shared* folder, create a file named *\_Footer.cshtml* and replace the content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample3.html)]
7. <span data-ttu-id="4aaa4-144">В *Index.cshtml* странице, добавьте два вызова `RenderPage` метод, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-144">In the *Index.cshtml* page, add two calls to the `RenderPage` method, as shown here:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample4.html)]

    <span data-ttu-id="4aaa4-145">Это показано, как вставить блок содержимого в веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-145">This shows how to insert a content block into a web page.</span></span> <span data-ttu-id="4aaa4-146">Вы вызываете `RenderPage` метод и передать его имя файла, содержимое которой нужно вставить в этот момент.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-146">You call the `RenderPage` method and pass it the name of the file whose contents you want to insert at that point.</span></span> <span data-ttu-id="4aaa4-147">Здесь осуществляется вставка содержимого  *\_Header.cshtml* и  *\_Footer.cshtml* файлы в *Index.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-147">Here, you're inserting the contents of the *\_Header.cshtml* and *\_Footer.cshtml* files into the *Index.cshtml* file.</span></span>
8. <span data-ttu-id="4aaa4-148">Запустите *Index.cshtml* страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-148">Run the *Index.cshtml* page in a browser.</span></span> <span data-ttu-id="4aaa4-149">(В WebMatrix в **файлы** рабочей области, щелкните правой кнопкой мыши файл, а затем выберите **запустить в браузере**.)</span><span class="sxs-lookup"><span data-stu-id="4aaa4-149">(In WebMatrix, in the **Files** workspace, right-click the file and then select **Launch in browser**.)</span></span>
9. <span data-ttu-id="4aaa4-150">В браузере просмотрите исходный код страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-150">In the browser, view the page source.</span></span> <span data-ttu-id="4aaa4-151">(Например, в Internet Explorer, щелкните страницу правой кнопкой мыши и нажмите кнопку **Просмотр исходного кода**.)</span><span class="sxs-lookup"><span data-stu-id="4aaa4-151">(For example, in Internet Explorer, right-click the page and then click **View Source**.)</span></span>

    <span data-ttu-id="4aaa4-152">Это позволяет увидеть разметки веб-страницы, который отправляется в браузер, который объединяет разметку страницы индекса с блоки содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-152">This lets you see the web page markup that's sent to the browser, which combines the index page markup with the content blocks.</span></span> <span data-ttu-id="4aaa4-153">В следующем примере показан исходный код страницы, отображаемой для *Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-153">The following example shows the page source that's rendered for *Index.cshtml*.</span></span> <span data-ttu-id="4aaa4-154">Вызовы `RenderPage` , вставленных в *Index.cshtml* были заменены фактическое содержимое файлов верхнего и нижнего колонтитулов.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-154">The calls to `RenderPage` that you inserted into *Index.cshtml* have been replaced with the actual contents of the header and footer files.</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample5.html)]

## <a name="creating-a-consistent-look-using-layout-pages"></a><span data-ttu-id="4aaa4-155">Создание согласованного вида с помощью страницы макета</span><span class="sxs-lookup"><span data-stu-id="4aaa4-155">Creating a Consistent Look Using Layout Pages</span></span>

<span data-ttu-id="4aaa4-156">Пока вы видели, что это легко включать то же содержимое на нескольких страницах.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-156">So far you've seen that it's easy to include the same content on multiple pages.</span></span> <span data-ttu-id="4aaa4-157">Более структурированный подход к созданию согласованного вида для сайта является использование макета страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-157">A more structured approach to creating a consistent look for a site is to use layout pages.</span></span> <span data-ttu-id="4aaa4-158">Страница макета определяет структуру веб-страницы, но не содержит действительного содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-158">A layout page defines the structure of a web page, but doesn't contain any actual content.</span></span> <span data-ttu-id="4aaa4-159">После создания страницы макета, можно создать веб-страницы с содержимым и связать их с макетом страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-159">After you've created a layout page, you can create web pages that contain the content and then link them to the layout page.</span></span> <span data-ttu-id="4aaa4-160">При отображении этих страниц, они будут форматироваться в соответствии с макетом страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-160">When these pages are displayed, they'll be formatted according to the layout page.</span></span> <span data-ttu-id="4aaa4-161">(В этом смысле страницы макета действует в качестве шаблона для содержимого, которое определяется на других страницах.)</span><span class="sxs-lookup"><span data-stu-id="4aaa4-161">(In this sense, a layout page acts as a kind of template for content that's defined in other pages.)</span></span>

<span data-ttu-id="4aaa4-162">Страница макета — так же, как и любой HTML-страницы, за исключением того, что она содержит вызов `RenderBody` метод.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-162">The layout page is just like any HTML page, except that it contains a call to the `RenderBody` method.</span></span> <span data-ttu-id="4aaa4-163">Положение `RenderBody` метод на странице макета определяет, где будут включены сведения на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-163">The position of the `RenderBody` method in the layout page determines where the information from the content page will be included.</span></span>

<span data-ttu-id="4aaa4-164">На следующей схеме показано, как страниц и страниц макета объединяются во время выполнения для создания готовой веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-164">The following diagram shows how content pages and layout pages are combined at run time to produce the finished web page.</span></span> <span data-ttu-id="4aaa4-165">Браузер запрашивает страницу содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-165">The browser requests a content page.</span></span> <span data-ttu-id="4aaa4-166">Страница содержимого содержит код, указывающее макет страницы, которая используется для структуры страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-166">The content page has code in it that specifies the layout page to use for the page's structure.</span></span> <span data-ttu-id="4aaa4-167">На странице макета содержимое вставляется в точке, где `RenderBody` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-167">In the layout page, the content is inserted at the point where the `RenderBody` method is called.</span></span> <span data-ttu-id="4aaa4-168">Содержимого, блоки можно также вставлять в макет страницы путем вызова `RenderPage` метода, так, как и в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-168">Content blocks can also be inserted into the layout page by calling the `RenderPage` method, the way you did in the previous section.</span></span> <span data-ttu-id="4aaa4-169">По завершении веб-страницы он отправляется в браузер.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-169">When the web page is complete, it's sent to the browser.</span></span>

![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderBody.](3-creating-a-consistent-look/_static/image3.jpg)

<span data-ttu-id="4aaa4-171">Ниже показано, как создать макет страницы содержимого страницы и ссылки на него.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-171">The following procedure shows how to create a layout page and link content pages to it.</span></span>

1. <span data-ttu-id="4aaa4-172">В *Shared* папку веб-сайта, создайте файл с именем  *\_Layout1.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-172">In the *Shared* folder of your website, create a file named *\_Layout1.cshtml*.</span></span>
2. <span data-ttu-id="4aaa4-173">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-173">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample6.html)]

    <span data-ttu-id="4aaa4-174">Использовании `RenderPage` метода на странице макета для вставки содержимого блоков.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-174">You use the `RenderPage` method in a layout page to insert content blocks.</span></span> <span data-ttu-id="4aaa4-175">Страница макета может содержать только один вызов `RenderBody` метод.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-175">A layout page can contain only one call to the `RenderBody` method.</span></span>
3. <span data-ttu-id="4aaa4-176">В *Shared* папке создайте файл с именем  *\_Header2.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-176">In the *Shared* folder, create a file named *\_Header2.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample7.html)]
4. <span data-ttu-id="4aaa4-177">В корневой папке создайте папку с именем *стили*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-177">In the root folder, create a new folder and name it *Styles*.</span></span>
5. <span data-ttu-id="4aaa4-178">В *стили* папке создайте файл с именем *Site.css* и добавьте следующие определения стиля:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-178">In the *Styles* folder, create a file named *Site.css* and add the following style definitions:</span></span>

    [!code-css[Main](3-creating-a-consistent-look/samples/sample8.css)]

    <span data-ttu-id="4aaa4-179">Эти определения стиля предназначены только для того, чтобы показать, как можно использовать таблицы стилей со страницы макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-179">These style definitions are here only to show how style sheets can be used with layout pages.</span></span> <span data-ttu-id="4aaa4-180">Если требуется, можно определить собственные стили для этих элементов.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-180">If you want, you can define your own styles for these elements.</span></span>
6. <span data-ttu-id="4aaa4-181">В корневой папке создайте файл с именем *Content1.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-181">In the root folder, create a file named *Content1.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample9.cshtml)]

    <span data-ttu-id="4aaa4-182">Это страница, которую будет использовать страницы макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-182">This is a page that will use a layout page.</span></span> <span data-ttu-id="4aaa4-183">Блок кода в верхней части страницы указывает, какую страницу макета для форматирования этого содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-183">The code block at the top of the page indicates which layout page to use to format this content.</span></span>
7. <span data-ttu-id="4aaa4-184">Запустите *Content1.cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-184">Run *Content1.cshtml* in a browser.</span></span> <span data-ttu-id="4aaa4-185">Отображенная страница использует формат и стилей, определенные в  *\_Layout1.cshtml* и текст (содержимое), определенные в *Content1.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-185">The rendered page uses the format and style sheet defined in *\_Layout1.cshtml* and the text (content) defined in *Content1.cshtml*.</span></span>

    ![[изображение]](3-creating-a-consistent-look/_static/image4.jpg)

    <span data-ttu-id="4aaa4-187">Повторите шаг 6, чтобы создать дополнительные страницы содержимого, которые могут совместно использовать одну и ту же страницу макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-187">You can repeat step 6 to create additional content pages that can then share the same layout page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4aaa4-188">Веб-узла можно настроить таким образом, можно автоматически использовать ту же страницу макета для всех страниц содержимого в папке.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-188">You can set up your site so that you can automatically use the same layout page for all the content pages in a folder.</span></span> <span data-ttu-id="4aaa4-189">Дополнительные сведения см. в разделе [поведение Настройка сайта для веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906).</span><span class="sxs-lookup"><span data-stu-id="4aaa4-189">For details, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906).</span></span>

## <a name="designing-layout-pages-that-have-multiple-content-sections"></a><span data-ttu-id="4aaa4-190">Разработка макета страниц, имеющих несколько разделов содержимого</span><span class="sxs-lookup"><span data-stu-id="4aaa4-190">Designing Layout Pages That Have Multiple Content Sections</span></span>

<span data-ttu-id="4aaa4-191">Страницы содержимого может иметь несколько разделов, что удобно, если вы хотите использовать макеты, которые имеют несколько областей с заменяемое содержимое.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-191">A content page can have multiple sections, which is useful if you want to use layouts that have multiple areas with replaceable content.</span></span> <span data-ttu-id="4aaa4-192">На странице содержимого вы предоставляете в каждом разделе уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-192">In the content page, you give each section a unique name.</span></span> <span data-ttu-id="4aaa4-193">(Раздел по умолчанию остается без имени.) На странице макета, добавления `RenderBody` метод, чтобы указать, где должен отображаться в разделе неименованные (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="4aaa4-193">(The default section is left unnamed.) In the layout page, you add a `RenderBody` method to specify where the unnamed (default) section should appear.</span></span> <span data-ttu-id="4aaa4-194">Затем можно добавить отдельный `RenderSection` методы для отображения именованные разделы по отдельности.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-194">You then add separate `RenderSection` methods in order to render named sections individually.</span></span>

<span data-ttu-id="4aaa4-195">На следующей схеме показано, как ASP.NET обрабатывает содержимое, которое состоит из нескольких разделов.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-195">The following diagram shows how ASP.NET handles content that's divided into multiple sections.</span></span> <span data-ttu-id="4aaa4-196">Каждый именованный раздел находится в блоке раздел на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-196">Each named section is contained in a section block in the content page.</span></span> <span data-ttu-id="4aaa4-197">(Их названия `Header` и `List` в примере.) Платформа вставляет раздел содержимого в страницу макета в точке, где `RenderSection` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-197">(They're named `Header` and `List` in the example.) The framework inserts content section into the layout page at the point where the `RenderSection` method is called.</span></span> <span data-ttu-id="4aaa4-198">В разделе (по умолчанию безымянный) вставляется в точке, где `RenderBody` вызывается метод, как показано выше.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-198">The unnamed (default) section is inserted at the point where the `RenderBody` method is called, as you saw earlier.</span></span>

![Концептуальная схема, показывающая, каким образом метод RenderSection вставляет ссылки на разделы в текущей страницы.](3-creating-a-consistent-look/_static/image5.jpg)

<span data-ttu-id="4aaa4-200">Эта процедура показывает, как создать страницу содержимого, который имеет несколько разделов содержимого и Подготовка к просмотру с помощью страницы макета, которая поддерживает несколько разделов содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-200">This procedure shows how to create a content page that has multiple content sections and how to render it using a layout page that supports multiple content sections.</span></span>

1. <span data-ttu-id="4aaa4-201">В *Shared* папке создайте файл с именем  *\_Layout2.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-201">In the *Shared* folder, create a file named *\_Layout2.cshtml*.</span></span>
2. <span data-ttu-id="4aaa4-202">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-202">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample10.html)]

    <span data-ttu-id="4aaa4-203">Использовании `RenderSection` метод для отображения разделов «заголовок» и «список.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-203">You use the `RenderSection` method to render both the header and list sections.</span></span>
3. <span data-ttu-id="4aaa4-204">В корневой папке создайте файл с именем *Content2.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-204">In the root folder, create a file named *Content2.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample11.cshtml)]

    <span data-ttu-id="4aaa4-205">Эта страница содержимого содержит блок кода в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-205">This content page contains a code block at the top of the page.</span></span> <span data-ttu-id="4aaa4-206">Каждый именованный раздел содержится в разделе блок.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-206">Each named section is contained in a section block.</span></span> <span data-ttu-id="4aaa4-207">Остальная часть страницы содержит раздел содержимого по умолчанию (неименованный).</span><span class="sxs-lookup"><span data-stu-id="4aaa4-207">The rest of the page contains the default (unnamed) content section.</span></span>
4. <span data-ttu-id="4aaa4-208">Запустите *Content2.cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-208">Run *Content2.cshtml* in a browser.</span></span>

    ![Снимок экрана, показывающий страницу в браузере, полученный в результате выполнения содержит вызовы метода RenderSection.](3-creating-a-consistent-look/_static/image6.jpg)

## <a name="making-content-sections-optional"></a><span data-ttu-id="4aaa4-210">Что делает необязательные разделы содержимого</span><span class="sxs-lookup"><span data-stu-id="4aaa4-210">Making Content Sections Optional</span></span>

<span data-ttu-id="4aaa4-211">Как правило разделы, создайте на странице содержимого должны совпадать разделы, которые определены на странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-211">Normally, the sections that you create in a content page have to match sections that are defined in the layout page.</span></span> <span data-ttu-id="4aaa4-212">Возможно возникновение ошибок при возникновении любого из следующих:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-212">You can get errors if any of the following occur:</span></span>

- <span data-ttu-id="4aaa4-213">Страница содержимого содержит секцию, не соответствующий раздел на странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-213">The content page contains a section that has no corresponding section in the layout page.</span></span>
- <span data-ttu-id="4aaa4-214">Страница макета содержит раздел, для которого отсутствует содержимое.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-214">The layout page contains a section for which there's no content.</span></span>
- <span data-ttu-id="4aaa4-215">Страница макета включает вызовы методов, выполняющих для подготовки к просмотру в том же разделе, более одного раза.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-215">The layout page includes method calls that try to render the same section more than once.</span></span>

<span data-ttu-id="4aaa4-216">Тем не менее можно переопределить это поведение для именованного раздела, объявив разделе необязательным на странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-216">However, you can override this behavior for a named section by declaring the section to be optional in the layout page.</span></span> <span data-ttu-id="4aaa4-217">Это позволяет определить несколько страниц, могут совместно использовать страницы макета, но которые могут или не могут иметь содержимое конкретного раздела.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-217">This lets you define multiple content pages that can share a layout page but that might or might not have content for a specific section.</span></span>

1. <span data-ttu-id="4aaa4-218">Откройте *Content2.cshtml* и удалите следующий раздел:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-218">Open *Content2.cshtml* and remove the following section:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample12.cshtml)]
2. <span data-ttu-id="4aaa4-219">Сохраните страницу и затем запустите его в браузере.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-219">Save the page and then run it in a browser.</span></span> <span data-ttu-id="4aaa4-220">Отображается сообщение об ошибке, так как страницы содержимого не предоставляет содержимое для раздела, определенные на странице макета, а именно раздел заголовка.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-220">An error message is displayed, because the content page doesn't provide content for a section defined in the layout page, namely the header section.</span></span>

    ![Снимок экрана, показывающий ошибку, которая происходит при запуске страницы, которая вызывает метод RenderSection, но не задан соответствующий раздел.](3-creating-a-consistent-look/_static/image7.jpg)
3. <span data-ttu-id="4aaa4-222">В *Shared* откройте  *\_Layout2.cshtml* странице и замените эту строку:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-222">In the *Shared* folder, open the *\_Layout2.cshtml* page and replace this line:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample13.js)]

    <span data-ttu-id="4aaa4-223">следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-223">with the following code:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample14.js)]

    <span data-ttu-id="4aaa4-224">Кроме того удалось замените следующий блок кода, который возвращает те же результаты предыдущей строке кода:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-224">As an alternative, you could replace the previous line of code with the following code block, which produces the same results:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample15.cshtml)]
4. <span data-ttu-id="4aaa4-225">Запустите *Content2.cshtml* страницу в браузере еще раз.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-225">Run the *Content2.cshtml* page in a browser again.</span></span> <span data-ttu-id="4aaa4-226">(Если у вас по-прежнему есть этой странице откройте в браузере, можно просто обновить его.) Это время откроется страница без ошибок, даже при наличии без заголовка.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-226">(If you still have this page open in the browser, you can just refresh it.) This time the page is displayed with no error, even though it has no header.</span></span>

## <a name="passing-data-to-layout-pages"></a><span data-ttu-id="4aaa4-227">Передача данных на макет страницы</span><span class="sxs-lookup"><span data-stu-id="4aaa4-227">Passing Data to Layout Pages</span></span>

<span data-ttu-id="4aaa4-228">Возможно, данные, определенные на странице содержимого, вам потребуется обратиться к странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-228">You might have data defined in the content page that you need to refer to in a layout page.</span></span> <span data-ttu-id="4aaa4-229">Если Да, необходимо передать данные на странице содержимого на страницу макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-229">If so, you need to pass the data from the content page to the layout page.</span></span> <span data-ttu-id="4aaa4-230">Например может потребоваться отображение состояния входа пользователя, или может потребоваться Показать или скрыть области содержимого, на основе ввода пользователя.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-230">For example, you might want to display the login status of a user, or you might want to show or hide content areas based on user input.</span></span>

<span data-ttu-id="4aaa4-231">Чтобы передать данные из страницы содержания страницы макета, можно разместить значения в `PageData` свойства содержимого страницы.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-231">To pass data from a content page to a layout page, you can put values into the `PageData` property of the content page.</span></span> <span data-ttu-id="4aaa4-232">`PageData` Свойство является коллекцией пар "имя значение", которые содержат данные, передаваемые между страницами.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-232">The `PageData` property is a collection of name/value pairs that hold the data that you want to pass between pages.</span></span> <span data-ttu-id="4aaa4-233">На странице макета, вы сможете прочесть значений из `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-233">In the layout page, you can then read values out of the `PageData` property.</span></span>

<span data-ttu-id="4aaa4-234">Вот другой схеме.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-234">Here's another diagram.</span></span> <span data-ttu-id="4aaa4-235">Здесь показано, как можно использовать ASP.NET `PageData` свойство для передачи значений из страницы содержания к странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-235">This one shows how ASP.NET can use the `PageData` property to pass values from a content page to the layout page.</span></span> <span data-ttu-id="4aaa4-236">Когда ASP.NET начинает создавать веб-страницы, он создает `PageData` коллекции.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-236">When ASP.NET begins building the web page, it creates the `PageData` collection.</span></span> <span data-ttu-id="4aaa4-237">На странице содержимого написать код, чтобы поместить данные в `PageData` коллекции.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-237">In the content page, you write code to put data in the `PageData` collection.</span></span> <span data-ttu-id="4aaa4-238">Значения в `PageData` коллекции возможен также другие разделы страницы содержимого или дополнительные блоки содержимого.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-238">Values in the `PageData` collection can also be accessed by other sections in the content page or by additional content blocks.</span></span>

![Концептуальная схема, показывающая, как заполнить словарь PageData и передать эту информацию на странице макета страницы содержимого.](3-creating-a-consistent-look/_static/image8.jpg)

<span data-ttu-id="4aaa4-240">Ниже показано, как для передачи данных из страницы содержания страницы макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-240">The following procedure shows how to pass data from a content page to a layout page.</span></span> <span data-ttu-id="4aaa4-241">При запуске страницы отображается кнопка, которая позволяет пользователю скрывать или отображать список, который определен на странице макета.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-241">When the page runs, it displays a button that lets the user hide or show a list that's defined in the layout page.</span></span> <span data-ttu-id="4aaa4-242">При нажатии пользователем кнопки, устанавливает значение true или false (Boolean) `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-242">When users click the button, it sets a true/false (Boolean) value in the `PageData` property.</span></span> <span data-ttu-id="4aaa4-243">Страница макета это значение считывается и если это значение равно false, скрывает списка.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-243">The layout page reads that value, and if it's false, hides the list.</span></span> <span data-ttu-id="4aaa4-244">Значение также используется для определения, следует ли отображать на странице содержимого **скрыть список** кнопку или **Показать список** кнопки.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-244">The value is also used in the content page to determine whether to display the **Hide List** button or the **Show List** button.</span></span>

![[изображение]](3-creating-a-consistent-look/_static/image9.jpg)

1. <span data-ttu-id="4aaa4-246">В корневой папке создайте файл с именем *Content3.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-246">In the root folder, create a file named *Content3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample16.cshtml)]

    <span data-ttu-id="4aaa4-247">Код сохраняет две части данных в `PageData` свойство &#8212; заголовок веб-страницы и значение true или false, чтобы указать необходимость отображения списка.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-247">The code stores two pieces of data in the `PageData` property &#8212; the title of the web page and true or false to specify whether to display a list.</span></span>

    <span data-ttu-id="4aaa4-248">Обратите внимание на то, что ASP.NET позволяет разместить HTML-разметка, на странице, по условию с использованием блока кода.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-248">Notice that ASP.NET lets you put HTML markup into the page conditionally using a code block.</span></span> <span data-ttu-id="4aaa4-249">Например `if/else` блок в теле страницы определяет, какую форму для отображения в зависимости от того, следует ли `PageData["ShowList"]` задано значение true.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-249">For example, the `if/else` block in the body of the page determines which form to display depending on whether `PageData["ShowList"]` is set to true.</span></span>
2. <span data-ttu-id="4aaa4-250">В *Shared* папке создайте файл с именем  *\_Layout3.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-250">In the *Shared* folder, create a file named *\_Layout3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample17.cshtml)]

    <span data-ttu-id="4aaa4-251">Страница макета включает выражение в `<title>` элемент, который получает значение заголовка из `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-251">The layout page includes an expression in the `<title>` element that gets the title value from the `PageData` property.</span></span> <span data-ttu-id="4aaa4-252">Он также использует `ShowList` значение `PageData` свойства, чтобы определить, следует ли отображать блок содержимого списка.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-252">It also uses the `ShowList` value of the `PageData` property to determine whether to display the list content block.</span></span>
3. <span data-ttu-id="4aaa4-253">В *Shared* папке создайте файл с именем  *\_List.cshtml* и замените все существующее содержимое на следующее:</span><span class="sxs-lookup"><span data-stu-id="4aaa4-253">In the *Shared* folder, create a file named *\_List.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample18.html)]
4. <span data-ttu-id="4aaa4-254">Запустите *Content3.cshtml* страницу в браузере.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-254">Run the *Content3.cshtml* page in a browser.</span></span> <span data-ttu-id="4aaa4-255">Откроется страница со списком, отображается в левой части страницы и **скрыть список** кнопку внизу.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-255">The page is displayed with the list visible on the left side of the page and a **Hide List** button at the bottom.</span></span>

    ![Снимок экрана страницы, которая включает в себя список и кнопку, которая говорит: «Скрыть список».](3-creating-a-consistent-look/_static/image10.jpg)
5. <span data-ttu-id="4aaa4-257">Нажмите кнопку **скрыть список**.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-257">Click **Hide List**.</span></span> <span data-ttu-id="4aaa4-258">Не отображается в списке, а кнопка изменится на **Показать список**.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-258">The list disappears and the button changes to **Show List**.</span></span>

    ![Снимок экрана страницы, которая не включает список и кнопку, которая говорит: «Показать список».](3-creating-a-consistent-look/_static/image11.jpg)
6. <span data-ttu-id="4aaa4-260">Нажмите кнопку **Показать список** кнопки и списка отображается снова.</span><span class="sxs-lookup"><span data-stu-id="4aaa4-260">Click the **Show List** button, and the list is displayed again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="4aaa4-261">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="4aaa4-261">Additional Resources</span></span>


[<span data-ttu-id="4aaa4-262">Настройка поведения сайта веб-страниц ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4aaa4-262">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
