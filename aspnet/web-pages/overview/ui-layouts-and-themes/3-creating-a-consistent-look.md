---
uid: web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
title: Создание единообразного макета на сайтах веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: Чтобы повысить эффективность создания веб-страниц для сайта, можно создавать многократно используемые блоки содержимого (например, верхние и нижние колонтитулы) для веб-сайта, а также с...
ms.author: riande
ms.date: 03/10/2014
ms.assetid: d7bd001b-6db2-4422-9b78-f3d08b743b00
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
msc.type: authoredcontent
ms.openlocfilehash: 3f63ce68ae4c13970ac0df196167ace0b22b592c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78509100"
---
# <a name="creating-a-consistent-layout-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="a69e9-103">Создание единообразного макета на сайтах веб-страницы ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="a69e9-103">Creating a Consistent Layout in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="a69e9-104">от [Tom фитзмаккен](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="a69e9-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="a69e9-105">В этой статье объясняется, как использовать страницы макета на веб-сайте веб-страницы ASP.NET (Razor) для создания многократно используемых блоков содержимого (таких как верхние и нижние колонтитулы) и для создания единообразного вида для всех страниц сайта.</span><span class="sxs-lookup"><span data-stu-id="a69e9-105">This article explains how you can use layout pages in an ASP.NET Web Pages (Razor) website to create reusable blocks of content (like headers and footers) and to create a consistent look for all the pages in the site.</span></span>
> 
> <span data-ttu-id="a69e9-106">**Что вы узнаете:**</span><span class="sxs-lookup"><span data-stu-id="a69e9-106">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="a69e9-107">Создание многократно используемых блоков содержимого, таких как верхние и нижние колонтитулы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-107">How to create reusable blocks of content like headers and footers.</span></span>
> - <span data-ttu-id="a69e9-108">Как создать единообразный вид для всех страниц сайта с помощью макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-108">How to create a consistent look for all the pages in your site using a layout.</span></span>
> - <span data-ttu-id="a69e9-109">Передача данных во время выполнения на страницу макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-109">How to pass data at run time to a layout page.</span></span>
> 
> <span data-ttu-id="a69e9-110">Это функции ASP.NET, представленные в статье:</span><span class="sxs-lookup"><span data-stu-id="a69e9-110">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="a69e9-111">Блоки содержимого, которые представляют собой файлы, содержащие содержимое в формате HTML, вставляемое на несколько страниц.</span><span class="sxs-lookup"><span data-stu-id="a69e9-111">Content blocks, which are files that contain HTML-formatted content to be inserted in multiple pages.</span></span>
> - <span data-ttu-id="a69e9-112">Страницы макета — страницы, которые содержат содержимое в формате HTML, которое может совместно использоваться страницами на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="a69e9-112">Layout pages, which are pages that contain HTML-formatted content that can be shared by pages on the website.</span></span>
> - <span data-ttu-id="a69e9-113">Методы `RenderPage`, `RenderBody`и `RenderSection`, которые указывают ASP.NET, куда вставляются элементы страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-113">The `RenderPage`, `RenderBody`, and `RenderSection` methods, which tell ASP.NET where to insert page elements.</span></span>
> - <span data-ttu-id="a69e9-114">Словарь `PageData`, который позволяет обмениваться данными между блоками содержимого и страницами макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-114">The `PageData` dictionary that lets you share data between content blocks and layout pages.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="a69e9-115">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="a69e9-115">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="a69e9-116">Веб-страницы ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="a69e9-116">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="a69e9-117">Этот учебник также работает с веб-страницы ASP.NET 2.</span><span class="sxs-lookup"><span data-stu-id="a69e9-117">This tutorial also works with ASP.NET Web Pages 2.</span></span>

## <a name="about-layout-pages"></a><span data-ttu-id="a69e9-118">О страницах макета</span><span class="sxs-lookup"><span data-stu-id="a69e9-118">About Layout Pages</span></span>

<span data-ttu-id="a69e9-119">Многие веб-сайты имеют содержимое, отображаемое на каждой странице, например верхний и нижний колонтитулы, или поле, которое сообщает пользователям о том, что они вошли в систему.</span><span class="sxs-lookup"><span data-stu-id="a69e9-119">Many websites have content that's displayed on every page, like a header and footer, or a box that tells users that they're logged in.</span></span> <span data-ttu-id="a69e9-120">ASP.NET позволяет создать отдельный файл с блоком содержимого, который может содержать текст, разметку и код, как и обычную веб-страницу.</span><span class="sxs-lookup"><span data-stu-id="a69e9-120">ASP.NET lets you create a separate file with a content block that can contain text, markup, and code, just like a regular web page.</span></span> <span data-ttu-id="a69e9-121">Затем можно вставить блок содержимого на другие страницы сайта, где должны отображаться сведения.</span><span class="sxs-lookup"><span data-stu-id="a69e9-121">You can then insert the content block in other pages on the site where you want the information to appear.</span></span> <span data-ttu-id="a69e9-122">Таким образом, не нужно копировать и вставлять одно и то же содержимое на каждую страницу.</span><span class="sxs-lookup"><span data-stu-id="a69e9-122">That way you don't have to copy and paste the same content into every page.</span></span> <span data-ttu-id="a69e9-123">Создание общего содержимого, подобного, также упрощает обновление сайта.</span><span class="sxs-lookup"><span data-stu-id="a69e9-123">Creating common content like this also makes it easier to update your site.</span></span> <span data-ttu-id="a69e9-124">Если необходимо изменить содержимое, можно просто обновить один файл, после чего изменения будут отражены везде, где было вставлено содержимое.</span><span class="sxs-lookup"><span data-stu-id="a69e9-124">If you need to change the content, you can just update a single file, and the changes are then reflected everywhere the content has been inserted.</span></span>

<span data-ttu-id="a69e9-125">На следующей схеме показано, как работают блоки содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-125">The following diagram shows how content blocks work.</span></span> <span data-ttu-id="a69e9-126">Когда браузер запрашивает страницу с веб-сервера, ASP.NET вставляет блоки содержимого в точку, где вызывается метод `RenderPage` на главной странице.</span><span class="sxs-lookup"><span data-stu-id="a69e9-126">When a browser requests a page from the web server, ASP.NET inserts the content blocks at the point where the `RenderPage` method is called in the main page.</span></span> <span data-ttu-id="a69e9-127">Затем готовая (Объединенная) страница отправляется в браузер.</span><span class="sxs-lookup"><span data-stu-id="a69e9-127">The finished (merged) page is then sent to the browser.</span></span>

![Концептуальная схема, показывающая, как метод RenderPage вставляет страницу, на которую указывает ссылка, в текущую страницу.](3-creating-a-consistent-look/_static/image1.jpg)

<span data-ttu-id="a69e9-129">В этой процедуре вы создадите страницу, которая ссылается на два блока содержимого (верхний и нижний колонтитулы), которые находятся в отдельных файлах.</span><span class="sxs-lookup"><span data-stu-id="a69e9-129">In this procedure, you'll create a page that references two content blocks (a header and a footer) that are located in separate files.</span></span> <span data-ttu-id="a69e9-130">Эти блоки содержимого можно использовать на любой странице сайта.</span><span class="sxs-lookup"><span data-stu-id="a69e9-130">You can use these same content blocks in any page in your site.</span></span> <span data-ttu-id="a69e9-131">Когда все будет готово, вы получите страницу следующего вида:</span><span class="sxs-lookup"><span data-stu-id="a69e9-131">When you're done, you'll get a page like this:</span></span>

![Снимок экрана, показывающий страницу в браузере, которая является результатом выполнения страницы, которая содержит вызовы метода RenderPage.](3-creating-a-consistent-look/_static/image2.png)

1. <span data-ttu-id="a69e9-133">В корневой папке веб-сайта создайте файл с именем *index. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-133">In the root folder of your website, create a file named *Index.cshtml*.</span></span>
2. <span data-ttu-id="a69e9-134">Замените существующую разметку следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-134">Replace the existing markup with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample1.html)]
3. <span data-ttu-id="a69e9-135">В корневой папке создайте папку с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-135">In the root folder, create a folder named *Shared*.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a69e9-136">Распространенной практикой является хранение файлов, совместно используемых веб-страницами, в папке с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-136">It's common practice to store files that are shared among web pages in a folder named *Shared*.</span></span>
4. <span data-ttu-id="a69e9-137">В *общей* папке создайте файл с именем *\_Header. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-137">In the *Shared* folder, create a file named *\_Header.cshtml*.</span></span>
5. <span data-ttu-id="a69e9-138">Замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-138">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample2.html)]

    <span data-ttu-id="a69e9-139">Обратите внимание, что имя файла *\_Header. cshtml*с символом подчеркивания (\_) в качестве префикса.</span><span class="sxs-lookup"><span data-stu-id="a69e9-139">Notice that the file name is *\_Header.cshtml*, with an underscore (\_) as a prefix.</span></span> <span data-ttu-id="a69e9-140">ASP.NET не отправляет страницу в браузер, если ее имя начинается с символа подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="a69e9-140">ASP.NET won't send a page to the browser if its name starts with an underscore.</span></span> <span data-ttu-id="a69e9-141">Это не даст пользователям напрямую запрашивать (случайно или иным образом) эти страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-141">This prevents people from requesting (inadvertently or otherwise) these pages directly.</span></span> <span data-ttu-id="a69e9-142">Рекомендуется использовать символ подчеркивания для наименования страниц, на которых находятся блоки содержимого, так как вы не хотите, чтобы пользователи могли запрашивать эти страницы &#8212; , они строго вставляются на другие страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-142">It's a good idea to use an underscore to name pages that have content blocks in them, because you don't really want users to be able to request these pages &#8212; they exist strictly to be inserted into other pages.</span></span>
6. <span data-ttu-id="a69e9-143">В *общей* папке создайте файл с именем *\_Footer. cshtml* и замените содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-143">In the *Shared* folder, create a file named *\_Footer.cshtml* and replace the content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample3.html)]
7. <span data-ttu-id="a69e9-144">На странице *index. cshtml* добавьте два вызова метода `RenderPage`, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="a69e9-144">In the *Index.cshtml* page, add two calls to the `RenderPage` method, as shown here:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample4.html)]

    <span data-ttu-id="a69e9-145">В этом примере показано, как вставить блок содержимого на веб-страницу.</span><span class="sxs-lookup"><span data-stu-id="a69e9-145">This shows how to insert a content block into a web page.</span></span> <span data-ttu-id="a69e9-146">Вызовите метод `RenderPage` и передайте ему имя файла, содержимое которого необходимо вставить в этот момент.</span><span class="sxs-lookup"><span data-stu-id="a69e9-146">You call the `RenderPage` method and pass it the name of the file whose contents you want to insert at that point.</span></span> <span data-ttu-id="a69e9-147">Здесь вы вставляете содержимое файлов *\_Headers. cshtml* и *\_Footer. cshtml* в файл *index. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="a69e9-147">Here, you're inserting the contents of the *\_Header.cshtml* and *\_Footer.cshtml* files into the *Index.cshtml* file.</span></span>
8. <span data-ttu-id="a69e9-148">Запустите страницу *index. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-148">Run the *Index.cshtml* page in a browser.</span></span> <span data-ttu-id="a69e9-149">(В WebMatrix в рабочей области **файлы** щелкните правой кнопкой мыши файл и выберите **запустить в браузере**.)</span><span class="sxs-lookup"><span data-stu-id="a69e9-149">(In WebMatrix, in the **Files** workspace, right-click the file and then select **Launch in browser**.)</span></span>
9. <span data-ttu-id="a69e9-150">В браузере просмотрите источник страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-150">In the browser, view the page source.</span></span> <span data-ttu-id="a69e9-151">(Например, в Internet Explorer щелкните страницу правой кнопкой мыши и выберите пункт **Просмотр источника**.)</span><span class="sxs-lookup"><span data-stu-id="a69e9-151">(For example, in Internet Explorer, right-click the page and then click **View Source**.)</span></span>

    <span data-ttu-id="a69e9-152">Это позволяет увидеть разметку веб-страницы, отправляемую в браузер, которая сочетает разметку страницы индекса с блоками содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-152">This lets you see the web page markup that's sent to the browser, which combines the index page markup with the content blocks.</span></span> <span data-ttu-id="a69e9-153">В следующем примере показан источник страницы, отображаемый для *index. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-153">The following example shows the page source that's rendered for *Index.cshtml*.</span></span> <span data-ttu-id="a69e9-154">Вызовы `RenderPage`, вставленные в *index. cshtml* , были заменены фактическим содержимым файлов верхнего и нижнего колонтитулов.</span><span class="sxs-lookup"><span data-stu-id="a69e9-154">The calls to `RenderPage` that you inserted into *Index.cshtml* have been replaced with the actual contents of the header and footer files.</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample5.html)]

## <a name="creating-a-consistent-look-using-layout-pages"></a><span data-ttu-id="a69e9-155">Создание единообразного вида с помощью страниц макета</span><span class="sxs-lookup"><span data-stu-id="a69e9-155">Creating a Consistent Look Using Layout Pages</span></span>

<span data-ttu-id="a69e9-156">До сих пор вы видели, что на нескольких страницах можно легко включить одно и то же содержимое.</span><span class="sxs-lookup"><span data-stu-id="a69e9-156">So far you've seen that it's easy to include the same content on multiple pages.</span></span> <span data-ttu-id="a69e9-157">Более структурированный подход к созданию единообразного вида для сайта заключается в использовании страниц макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-157">A more structured approach to creating a consistent look for a site is to use layout pages.</span></span> <span data-ttu-id="a69e9-158">Страница макета определяет структуру веб-страницы, но не содержит никакого фактического содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-158">A layout page defines the structure of a web page, but doesn't contain any actual content.</span></span> <span data-ttu-id="a69e9-159">После создания страницы макета можно создать веб-страницы, содержащие содержимое, а затем связать их со страницей макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-159">After you've created a layout page, you can create web pages that contain the content and then link them to the layout page.</span></span> <span data-ttu-id="a69e9-160">При отображении эти страницы будут отформатированы в соответствии со страницей макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-160">When these pages are displayed, they'll be formatted according to the layout page.</span></span> <span data-ttu-id="a69e9-161">(В этом смысле страница макета выступает в качестве вида шаблона для содержимого, определенного на других страницах.)</span><span class="sxs-lookup"><span data-stu-id="a69e9-161">(In this sense, a layout page acts as a kind of template for content that's defined in other pages.)</span></span>

<span data-ttu-id="a69e9-162">Макет страницы выглядит так же, как и любая HTML-страница, за исключением того, что она содержит вызов метода `RenderBody`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-162">The layout page is just like any HTML page, except that it contains a call to the `RenderBody` method.</span></span> <span data-ttu-id="a69e9-163">Положение метода `RenderBody` на странице макета определяет, куда будут включаться сведения со страницы содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-163">The position of the `RenderBody` method in the layout page determines where the information from the content page will be included.</span></span>

<span data-ttu-id="a69e9-164">На следующей схеме показано, как страницы содержимого и страницы макета объединяются во время выполнения для создания готовой веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-164">The following diagram shows how content pages and layout pages are combined at run time to produce the finished web page.</span></span> <span data-ttu-id="a69e9-165">Браузер запрашивает страницу содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-165">The browser requests a content page.</span></span> <span data-ttu-id="a69e9-166">Страница содержимого содержит в ней код, указывающий страницу макета, используемую для структуры страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-166">The content page has code in it that specifies the layout page to use for the page's structure.</span></span> <span data-ttu-id="a69e9-167">На странице макета содержимое вставляется в точку, где вызывается метод `RenderBody`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-167">In the layout page, the content is inserted at the point where the `RenderBody` method is called.</span></span> <span data-ttu-id="a69e9-168">Блоки содержимого также можно вставить на страницу макета, вызвав метод `RenderPage`, как в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="a69e9-168">Content blocks can also be inserted into the layout page by calling the `RenderPage` method, the way you did in the previous section.</span></span> <span data-ttu-id="a69e9-169">После завершения веб-страницы она отправляется в браузер.</span><span class="sxs-lookup"><span data-stu-id="a69e9-169">When the web page is complete, it's sent to the browser.</span></span>

![Снимок экрана, показывающий страницу в браузере, которая является результатом выполнения страницы, которая содержит вызовы метода RenderBody.](3-creating-a-consistent-look/_static/image3.jpg)

<span data-ttu-id="a69e9-171">В следующей процедуре показано, как создать страницу макета и связать с ней страницы содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-171">The following procedure shows how to create a layout page and link content pages to it.</span></span>

1. <span data-ttu-id="a69e9-172">В *общей* папке веб-сайта создайте файл с именем *\_layout1. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-172">In the *Shared* folder of your website, create a file named *\_Layout1.cshtml*.</span></span>
2. <span data-ttu-id="a69e9-173">Замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-173">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample6.html)]

    <span data-ttu-id="a69e9-174">Для вставки блоков содержимого используется метод `RenderPage` на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-174">You use the `RenderPage` method in a layout page to insert content blocks.</span></span> <span data-ttu-id="a69e9-175">Страница макета может содержать только один вызов метода `RenderBody`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-175">A layout page can contain only one call to the `RenderBody` method.</span></span>
3. <span data-ttu-id="a69e9-176">В *общей* папке создайте файл с именем *\_Header2. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-176">In the *Shared* folder, create a file named *\_Header2.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample7.html)]
4. <span data-ttu-id="a69e9-177">В корневой папке создайте новую папку и назовите ее *стили*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-177">In the root folder, create a new folder and name it *Styles*.</span></span>
5. <span data-ttu-id="a69e9-178">В папке *styles* создайте файл с именем *site. CSS* и добавьте следующие определения стилей:</span><span class="sxs-lookup"><span data-stu-id="a69e9-178">In the *Styles* folder, create a file named *Site.css* and add the following style definitions:</span></span>

    [!code-css[Main](3-creating-a-consistent-look/samples/sample8.css)]

    <span data-ttu-id="a69e9-179">Эти определения стилей здесь предназначены только для того, чтобы продемонстрировать, как таблицы стилей можно использовать со страницами макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-179">These style definitions are here only to show how style sheets can be used with layout pages.</span></span> <span data-ttu-id="a69e9-180">При необходимости можно определить собственные стили для этих элементов.</span><span class="sxs-lookup"><span data-stu-id="a69e9-180">If you want, you can define your own styles for these elements.</span></span>
6. <span data-ttu-id="a69e9-181">В корневой папке создайте файл с именем *Content1. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-181">In the root folder, create a file named *Content1.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample9.cshtml)]

    <span data-ttu-id="a69e9-182">Это страница, на которой будет использоваться макет страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-182">This is a page that will use a layout page.</span></span> <span data-ttu-id="a69e9-183">Блок кода в верхней части страницы указывает, какую страницу макета использовать для форматирования этого содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-183">The code block at the top of the page indicates which layout page to use to format this content.</span></span>
7. <span data-ttu-id="a69e9-184">Запустите *Content1. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-184">Run *Content1.cshtml* in a browser.</span></span> <span data-ttu-id="a69e9-185">На подготовленной странице используется формат и таблица стилей, определенные в *\_layout1. cshtml* , и текст (содержимое), определенный в *Content1. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-185">The rendered page uses the format and style sheet defined in *\_Layout1.cshtml* and the text (content) defined in *Content1.cshtml*.</span></span>

    ![[образ]](3-creating-a-consistent-look/_static/image4.png)

    <span data-ttu-id="a69e9-187">Можно повторить шаг 6, чтобы создать дополнительные страницы содержимого, которые затем могут использовать одну и ту же страницу макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-187">You can repeat step 6 to create additional content pages that can then share the same layout page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a69e9-188">Вы можете настроить сайт, чтобы можно было автоматически использовать одну и ту же страницу макета для всех страниц содержимого в папке.</span><span class="sxs-lookup"><span data-stu-id="a69e9-188">You can set up your site so that you can automatically use the same layout page for all the content pages in a folder.</span></span> <span data-ttu-id="a69e9-189">Дополнительные сведения см. в разделе [Настройка поведения на уровне сайта для веб-страницы ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906).</span><span class="sxs-lookup"><span data-stu-id="a69e9-189">For details, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906).</span></span>

## <a name="designing-layout-pages-that-have-multiple-content-sections"></a><span data-ttu-id="a69e9-190">Разработка страниц макета с несколькими разделами содержимого</span><span class="sxs-lookup"><span data-stu-id="a69e9-190">Designing Layout Pages That Have Multiple Content Sections</span></span>

<span data-ttu-id="a69e9-191">Страница содержимого может иметь несколько разделов, что полезно, если вы хотите использовать макеты с несколькими областями с заменяемым содержимым.</span><span class="sxs-lookup"><span data-stu-id="a69e9-191">A content page can have multiple sections, which is useful if you want to use layouts that have multiple areas with replaceable content.</span></span> <span data-ttu-id="a69e9-192">На странице содержимое каждому разделу присваивается уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="a69e9-192">In the content page, you give each section a unique name.</span></span> <span data-ttu-id="a69e9-193">(Раздел по умолчанию остается неименованным.) На странице макета добавьте метод `RenderBody`, чтобы указать, где должен отображаться раздел Безымянный (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="a69e9-193">(The default section is left unnamed.) In the layout page, you add a `RenderBody` method to specify where the unnamed (default) section should appear.</span></span> <span data-ttu-id="a69e9-194">Затем добавьте отдельные методы `RenderSection` для отображения именованных разделов по отдельности.</span><span class="sxs-lookup"><span data-stu-id="a69e9-194">You then add separate `RenderSection` methods in order to render named sections individually.</span></span>

<span data-ttu-id="a69e9-195">На следующей схеме показано, как ASP.NET обрабатывает содержимое, разделенное на несколько разделов.</span><span class="sxs-lookup"><span data-stu-id="a69e9-195">The following diagram shows how ASP.NET handles content that's divided into multiple sections.</span></span> <span data-ttu-id="a69e9-196">Каждый именованный раздел содержится в блоке раздела на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-196">Each named section is contained in a section block in the content page.</span></span> <span data-ttu-id="a69e9-197">(Они называются `Header` и `List` в примере). Платформа вставляет раздел содержимого на страницу макета в точке, где вызывается метод `RenderSection`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-197">(They're named `Header` and `List` in the example.) The framework inserts content section into the layout page at the point where the `RenderSection` method is called.</span></span> <span data-ttu-id="a69e9-198">Раздел Безымянный (по умолчанию) вставляется в точку, где вызывается метод `RenderBody`, как было показано ранее.</span><span class="sxs-lookup"><span data-stu-id="a69e9-198">The unnamed (default) section is inserted at the point where the `RenderBody` method is called, as you saw earlier.</span></span>

![Концептуальная схема, показывающая, как метод RenderSection вставляет ссылки на разделы в текущую страницу.](3-creating-a-consistent-look/_static/image5.jpg)

<span data-ttu-id="a69e9-200">В этой процедуре показано, как создать страницу содержимого с несколькими разделами содержимого и как визуализировать ее с помощью страницы макета, поддерживающей несколько разделов содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-200">This procedure shows how to create a content page that has multiple content sections and how to render it using a layout page that supports multiple content sections.</span></span>

1. <span data-ttu-id="a69e9-201">В *общей* папке создайте файл с именем *\_Layout2. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69e9-201">In the *Shared* folder, create a file named *\_Layout2.cshtml*.</span></span>
2. <span data-ttu-id="a69e9-202">Замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-202">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample10.html)]

    <span data-ttu-id="a69e9-203">Для отображения разделов Header и List используется метод `RenderSection`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-203">You use the `RenderSection` method to render both the header and list sections.</span></span>
3. <span data-ttu-id="a69e9-204">В корневой папке создайте файл с именем *Content2. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-204">In the root folder, create a file named *Content2.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample11.cshtml)]

    <span data-ttu-id="a69e9-205">Эта страница содержимого содержит блок кода в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="a69e9-205">This content page contains a code block at the top of the page.</span></span> <span data-ttu-id="a69e9-206">Каждый именованный раздел содержится в блоке раздела.</span><span class="sxs-lookup"><span data-stu-id="a69e9-206">Each named section is contained in a section block.</span></span> <span data-ttu-id="a69e9-207">Оставшаяся часть страницы содержит раздел содержимого по умолчанию (безымянный).</span><span class="sxs-lookup"><span data-stu-id="a69e9-207">The rest of the page contains the default (unnamed) content section.</span></span>
4. <span data-ttu-id="a69e9-208">Запустите *Content2. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-208">Run *Content2.cshtml* in a browser.</span></span>

    ![Снимок экрана, показывающий страницу в браузере, которая является результатом выполнения страницы, которая содержит вызовы метода RenderSection.](3-creating-a-consistent-look/_static/image6.png)

## <a name="making-content-sections-optional"></a><span data-ttu-id="a69e9-210">Создание разделов содержимого необязательно</span><span class="sxs-lookup"><span data-stu-id="a69e9-210">Making Content Sections Optional</span></span>

<span data-ttu-id="a69e9-211">Как правило, разделы, создаваемые на странице содержимого, должны соответствовать разделам, определенным на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-211">Normally, the sections that you create in a content page have to match sections that are defined in the layout page.</span></span> <span data-ttu-id="a69e9-212">Ошибки могут возникнуть в следующих случаях.</span><span class="sxs-lookup"><span data-stu-id="a69e9-212">You can get errors if any of the following occur:</span></span>

- <span data-ttu-id="a69e9-213">Страница содержимое содержит раздел, не имеющий соответствующего раздела на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-213">The content page contains a section that has no corresponding section in the layout page.</span></span>
- <span data-ttu-id="a69e9-214">Страница макета содержит раздел, для которого нет содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-214">The layout page contains a section for which there's no content.</span></span>
- <span data-ttu-id="a69e9-215">Страница макета включает вызовы методов, которые пытаются визуализировать одну и ту же секцию более одного раза.</span><span class="sxs-lookup"><span data-stu-id="a69e9-215">The layout page includes method calls that try to render the same section more than once.</span></span>

<span data-ttu-id="a69e9-216">Однако это поведение можно переопределить для именованного раздела, объявив раздел как необязательный на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-216">However, you can override this behavior for a named section by declaring the section to be optional in the layout page.</span></span> <span data-ttu-id="a69e9-217">Это позволяет определить несколько страниц содержимого, которые могут совместно использовать страницу макета, но могут или не иметь содержимого для определенного раздела.</span><span class="sxs-lookup"><span data-stu-id="a69e9-217">This lets you define multiple content pages that can share a layout page but that might or might not have content for a specific section.</span></span>

1. <span data-ttu-id="a69e9-218">Откройте *Content2. cshtml* и удалите следующий раздел:</span><span class="sxs-lookup"><span data-stu-id="a69e9-218">Open *Content2.cshtml* and remove the following section:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample12.cshtml)]
2. <span data-ttu-id="a69e9-219">Сохраните страницу и запустите ее в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-219">Save the page and then run it in a browser.</span></span> <span data-ttu-id="a69e9-220">Отображается сообщение об ошибке, так как страница содержимого не предоставляет содержимое для раздела, определенного на странице макета, а именно в разделе заголовка.</span><span class="sxs-lookup"><span data-stu-id="a69e9-220">An error message is displayed, because the content page doesn't provide content for a section defined in the layout page, namely the header section.</span></span>

    ![Снимок экрана, показывающий ошибку, которая возникает при запуске страницы, вызывающей метод RenderSection, но соответствующий раздел не предоставляется.](3-creating-a-consistent-look/_static/image7.png)
3. <span data-ttu-id="a69e9-222">В *общей* папке откройте страницу *\_Layout2. cshtml* и замените эту строку:</span><span class="sxs-lookup"><span data-stu-id="a69e9-222">In the *Shared* folder, open the *\_Layout2.cshtml* page and replace this line:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample13.js)]

    <span data-ttu-id="a69e9-223">на новый код:</span><span class="sxs-lookup"><span data-stu-id="a69e9-223">with the following code:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample14.js)]

    <span data-ttu-id="a69e9-224">В качестве альтернативы можно заменить предыдущую строку кода следующим блоком кода, что дает те же результаты:</span><span class="sxs-lookup"><span data-stu-id="a69e9-224">As an alternative, you could replace the previous line of code with the following code block, which produces the same results:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample15.cshtml)]
4. <span data-ttu-id="a69e9-225">Снова запустите страницу *Content2. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-225">Run the *Content2.cshtml* page in a browser again.</span></span> <span data-ttu-id="a69e9-226">(Если эта страница по-прежнему открыта в браузере, можно просто обновить ее.) На этот раз страница отображается без ошибок, несмотря на то, что в ней нет заголовка.</span><span class="sxs-lookup"><span data-stu-id="a69e9-226">(If you still have this page open in the browser, you can just refresh it.) This time the page is displayed with no error, even though it has no header.</span></span>

## <a name="passing-data-to-layout-pages"></a><span data-ttu-id="a69e9-227">Передача данных на страницы макета</span><span class="sxs-lookup"><span data-stu-id="a69e9-227">Passing Data to Layout Pages</span></span>

<span data-ttu-id="a69e9-228">У вас могут быть данные, определенные на странице содержимого, на которых необходимо ссылаться на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-228">You might have data defined in the content page that you need to refer to in a layout page.</span></span> <span data-ttu-id="a69e9-229">В этом случае необходимо передать данные со страницы содержимое на страницу макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-229">If so, you need to pass the data from the content page to the layout page.</span></span> <span data-ttu-id="a69e9-230">Например, может потребоваться отобразить состояние входа пользователя или показать или скрыть области содержимого на основе введенных пользователем данных.</span><span class="sxs-lookup"><span data-stu-id="a69e9-230">For example, you might want to display the login status of a user, or you might want to show or hide content areas based on user input.</span></span>

<span data-ttu-id="a69e9-231">Чтобы передать данные со страницы содержимого на страницу макета, можно вставить значения в свойство `PageData` страницы содержимое.</span><span class="sxs-lookup"><span data-stu-id="a69e9-231">To pass data from a content page to a layout page, you can put values into the `PageData` property of the content page.</span></span> <span data-ttu-id="a69e9-232">Свойство `PageData` — это коллекция пар "имя-значение", содержащих данные, которые необходимо передать между страницами.</span><span class="sxs-lookup"><span data-stu-id="a69e9-232">The `PageData` property is a collection of name/value pairs that hold the data that you want to pass between pages.</span></span> <span data-ttu-id="a69e9-233">На странице макета можно считывать значения из свойства `PageData`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-233">In the layout page, you can then read values out of the `PageData` property.</span></span>

<span data-ttu-id="a69e9-234">Вот другая схема.</span><span class="sxs-lookup"><span data-stu-id="a69e9-234">Here's another diagram.</span></span> <span data-ttu-id="a69e9-235">В этом примере показано, как ASP.NET может использовать свойство `PageData` для передачи значений со страницы содержимого на страницу макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-235">This one shows how ASP.NET can use the `PageData` property to pass values from a content page to the layout page.</span></span> <span data-ttu-id="a69e9-236">Когда ASP.NET начинает создавать веб-страницу, она создает коллекцию `PageData`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-236">When ASP.NET begins building the web page, it creates the `PageData` collection.</span></span> <span data-ttu-id="a69e9-237">На странице содержимого вы пишете код для размещения данных в коллекции `PageData`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-237">In the content page, you write code to put data in the `PageData` collection.</span></span> <span data-ttu-id="a69e9-238">К значениям в коллекции `PageData` также могут обращаться другие разделы на странице содержимого или дополнительные блоки содержимого.</span><span class="sxs-lookup"><span data-stu-id="a69e9-238">Values in the `PageData` collection can also be accessed by other sections in the content page or by additional content blocks.</span></span>

![Концептуальная схема, показывающая, как страница содержимого может заполнить словарь Пажедата и передать эту информацию на страницу макета.](3-creating-a-consistent-look/_static/image8.jpg)

<span data-ttu-id="a69e9-240">В следующей процедуре показано, как передавать данные со страницы содержимого на страницу макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-240">The following procedure shows how to pass data from a content page to a layout page.</span></span> <span data-ttu-id="a69e9-241">При запуске страницы отображается кнопка, позволяющая пользователю скрывать или отображать список, определенный на странице макета.</span><span class="sxs-lookup"><span data-stu-id="a69e9-241">When the page runs, it displays a button that lets the user hide or show a list that's defined in the layout page.</span></span> <span data-ttu-id="a69e9-242">Когда пользователь нажимайте кнопку, он устанавливает значение true/false (логическое) в свойстве `PageData`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-242">When users click the button, it sets a true/false (Boolean) value in the `PageData` property.</span></span> <span data-ttu-id="a69e9-243">Страница макета считывает это значение и, если оно имеет значение false, скрывает список.</span><span class="sxs-lookup"><span data-stu-id="a69e9-243">The layout page reads that value, and if it's false, hides the list.</span></span> <span data-ttu-id="a69e9-244">Значение также используется на странице содержимое, чтобы определить, следует ли отображать кнопку **Скрыть список** или **Показать список** .</span><span class="sxs-lookup"><span data-stu-id="a69e9-244">The value is also used in the content page to determine whether to display the **Hide List** button or the **Show List** button.</span></span>

![[образ]](3-creating-a-consistent-look/_static/image9.jpg)

1. <span data-ttu-id="a69e9-246">В корневой папке создайте файл с именем *Content3. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-246">In the root folder, create a file named *Content3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample16.cshtml)]

    <span data-ttu-id="a69e9-247">В коде хранятся два фрагмента данных в свойстве &#8212; `PageData` заголовок веб-страницы, значение true или false, чтобы указать, следует ли отображать список.</span><span class="sxs-lookup"><span data-stu-id="a69e9-247">The code stores two pieces of data in the `PageData` property &#8212; the title of the web page and true or false to specify whether to display a list.</span></span>

    <span data-ttu-id="a69e9-248">Обратите внимание, что ASP.NET позволяет поочередно размещать HTML-разметку на странице с помощью блока кода.</span><span class="sxs-lookup"><span data-stu-id="a69e9-248">Notice that ASP.NET lets you put HTML markup into the page conditionally using a code block.</span></span> <span data-ttu-id="a69e9-249">Например, блок `if/else` в тексте страницы определяет, какая форма должна отображаться в зависимости от того, имеет ли `PageData["ShowList"]` значение true.</span><span class="sxs-lookup"><span data-stu-id="a69e9-249">For example, the `if/else` block in the body of the page determines which form to display depending on whether `PageData["ShowList"]` is set to true.</span></span>
2. <span data-ttu-id="a69e9-250">В *общей* папке создайте файл с именем *\_Layout3. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-250">In the *Shared* folder, create a file named *\_Layout3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample17.cshtml)]

    <span data-ttu-id="a69e9-251">Страница макета содержит выражение в элементе `<title>`, который получает значение заголовка из свойства `PageData`.</span><span class="sxs-lookup"><span data-stu-id="a69e9-251">The layout page includes an expression in the `<title>` element that gets the title value from the `PageData` property.</span></span> <span data-ttu-id="a69e9-252">Он также использует значение `ShowList` свойства `PageData`, чтобы определить, следует ли отображать блок содержимого списка.</span><span class="sxs-lookup"><span data-stu-id="a69e9-252">It also uses the `ShowList` value of the `PageData` property to determine whether to display the list content block.</span></span>
3. <span data-ttu-id="a69e9-253">В *общей* папке создайте файл с именем *\_List. cshtml* и замените имеющееся содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="a69e9-253">In the *Shared* folder, create a file named *\_List.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample18.html)]
4. <span data-ttu-id="a69e9-254">Запустите страницу *Content3. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="a69e9-254">Run the *Content3.cshtml* page in a browser.</span></span> <span data-ttu-id="a69e9-255">Отобразится страница со списком, видимым в левой части страницы, и кнопку **Скрыть список** внизу.</span><span class="sxs-lookup"><span data-stu-id="a69e9-255">The page is displayed with the list visible on the left side of the page and a **Hide List** button at the bottom.</span></span>

    ![Снимок экрана, показывающий страницу, содержащую список, и кнопку с текстом "скрыть список".](3-creating-a-consistent-look/_static/image10.png)
5. <span data-ttu-id="a69e9-257">Щелкните **Скрыть список**.</span><span class="sxs-lookup"><span data-stu-id="a69e9-257">Click **Hide List**.</span></span> <span data-ttu-id="a69e9-258">Список исчезнет, а кнопка изменится на **отобразить список**.</span><span class="sxs-lookup"><span data-stu-id="a69e9-258">The list disappears and the button changes to **Show List**.</span></span>

    ![Снимок экрана, на котором показана страница, не содержащая список, и кнопка с текстом "Показать список".](3-creating-a-consistent-look/_static/image11.png)
6. <span data-ttu-id="a69e9-260">Нажмите кнопку **Показать список** и снова отобразится список.</span><span class="sxs-lookup"><span data-stu-id="a69e9-260">Click the **Show List** button, and the list is displayed again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a69e9-261">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="a69e9-261">Additional Resources</span></span>

[<span data-ttu-id="a69e9-262">Настройка поведения на уровне сайта для веб-страницы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="a69e9-262">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
