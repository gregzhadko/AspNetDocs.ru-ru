---
uid: web-pages/overview/getting-started/introducing-razor-syntax-c
title: Введение в программирование веб-ASP.NET с использованием синтаксиса Razor (C#) | Документация Майкрософт
author: Rick-Anderson
description: В этой главе дает Общие сведения о программировании с помощью веб-страниц ASP.NET с использованием синтаксиса Razor. ASP.NET — технология Майкрософт для выполнения динамических веб-pa...
ms.author: riande
ms.date: 02/07/2014
ms.assetid: aa67d304-583b-4bf8-a231-195656cfb587
msc.legacyurl: /web-pages/overview/getting-started/introducing-razor-syntax-c
msc.type: authoredcontent
ms.openlocfilehash: 8237dc6b925ccefc5b411aebc8e7c399dcdc6746
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59407358"
---
# <a name="introduction-to-aspnet-web-programming-using-the-razor-syntax-c"></a>Введение в программирование веб-ASP.NET с использованием синтаксиса Razor (C#)

по [Tom FitzMacken](https://github.com/tfitzmac)

> В этой статье дает Общие сведения о программировании с помощью веб-страниц ASP.NET с использованием синтаксиса Razor. ASP.NET — технология Майкрософт для выполнения динамических веб-страниц на веб-серверах. Этой статьи, рассматриваются с использованием языка программирования C#.
> 
> **Вы узнаете, как**:
> 
> - Top 8, программирование советов по началу работы с программирования веб-страниц ASP.NET с использованием синтаксиса Razor.
> - Основные концепции программирования вам.
> - Какой код сервера ASP.NET и синтаксиса Razor посвящен.
>   
> 
> ## <a name="software-versions"></a>Версии программного обеспечения
> 
> 
> - Веб-страниц ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с ASP.NET Web Pages 2.


## <a name="the-top-8-programming-tips"></a>Top 8 советов по программированию

В этом разделе перечислены несколько советов, которые абсолютно необходимо знать, как приступить к созданию кода сервера ASP.NET с использованием синтаксиса Razor.

> [!NOTE]
> Синтаксис Razor основан на языке C#, и это язык, который используется чаще всего с помощью веб-страниц ASP.NET. Однако синтаксис Razor поддерживает язык Visual Basic и все, что вы увидите, что также можно сделать в Visual Basic. Дополнительные сведения см. в приложении [языка Visual Basic и синтаксиса](https://go.microsoft.com/fwlink/?LinkId=202908).


Дополнительные сведения о большей части эти приемы программирования можно найти далее в этой статье.

### <a name="1-you-add-code-to-a-page-using-the--character"></a>1. Добавьте код для страницы с помощью символа @

`@` Символ запускает встроенные выражения, одной инструкции блоков и блоков с несколькими инструкциями:

[!code-html[Main](introducing-razor-syntax-c/samples/sample1.html)]

Это как выглядеть эти инструкции, при запуске страницы в браузере:

![Razor Img1](introducing-razor-syntax-c/_static/image1.jpg)

> [!TIP] 
> 
> **Кодировка HTML**
> 
> При выводе содержимого на страницы с помощью `@` символов, как и в предыдущих примерах ASP.NET HTML кодирует выходные данные. Этот параметр заменяет зарезервированные символы HTML (например, `<` и `>` и `&`) с кодами, которые позволяют символов для отображения в качестве символов на веб-странице, а как HTML-теги или сущности. Без HTML-кодирования, выходные данные из кода сервера могут отображаться неправильно и может предоставить доступ к странице угрозам безопасности.
> 
> Если ваша цель — вывод HTML-разметка, отображает теги как разметка (например `<p></p>` для абзаца или `<em></em>` для выделения текста), см. в разделе [Объединение текста, разметка и код в блоках кода](#BM_CombiningTextMarkupAndCode) далее в этой статье.
> 
> Дополнительные сведения о HTML-кодирования в [работа с формами](https://go.microsoft.com/fwlink/?LinkId=202892).


### <a name="2-you-enclose-code-blocks-in-braces"></a>2. Блоки кода, заключите в скобки

Объект *блок кода* включает один или несколько операторов кода и заключается в фигурные скобки.

[!code-html[Main](introducing-razor-syntax-c/samples/sample2.html)]

Результат отображается в браузере:

![Razor Img2](introducing-razor-syntax-c/_static/image2.jpg)

### <a name="3-inside-a-block-you-end-each-code-statement-with-a-semicolon"></a>3. Внутри блока завершении каждого оператора точкой с запятой

Внутри блока кода каждая инструкция полный код должен заканчиваться точкой с запятой. Встроенные выражения не заканчивается точкой с запятой.

[!code-html[Main](introducing-razor-syntax-c/samples/sample3.html)]

### <a name="4-you-use-variables-to-store-values"></a>4. Использовать переменные для хранения значений

Можно хранить значения в *переменной*, включая строки, числа и даты, и т.д. Создание новой переменной с помощью `var` ключевое слово. Значения переменных можно вставить непосредственно в страницы с помощью `@`.

[!code-html[Main](introducing-razor-syntax-c/samples/sample4.html)]

Результат отображается в браузере:

![Razor Img3](introducing-razor-syntax-c/_static/image3.jpg)

<a id="ID_StringLiterals"></a>
### <a name="5-you-enclose-literal-string-values-in-double-quotation-marks"></a>5. Вы литеральные значения строк следует заключить в двойные кавычки

Объект *строка* — это последовательность символов, которые обрабатываются как текст. Чтобы указать строку, заключите его в двойные кавычки:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample5.cshtml)]

Если строка, которая будет отображаться содержит символ обратной косой черты ( `\` ) или двойные кавычки ( `"` ), используйте *буквального строкового литерала* , начинающийся с `@` оператор. (В C# \ символ имеет особое значение, если вы не используете буквального строкового литерала.)

[!code-html[Main](introducing-razor-syntax-c/samples/sample6.html)]

Чтобы внедрить двойные кавычки, используйте буквального строкового литерала и повторите кавычки:

[!code-html[Main](introducing-razor-syntax-c/samples/sample7.html)]

Ниже приведен результат использования обоих этих примерах на странице.

![Razor Img4](introducing-razor-syntax-c/_static/image4.jpg)

> [!NOTE]
> Обратите внимание, что `@` символ используется для пометки буквальные строковые литералы в C# и для пометки кода на страницах ASP.NET.


### <a name="6-code-is-case-sensitive"></a>6. Код чувствительно к регистру

В C#, ключевые слова (такие как `var`, `true`, и `if`) и в именах переменных учитывается регистр. Следующие строки кода создают две различные переменные `lastName` и `LastName.`

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample8.cshtml)]

Если объявить переменную как `var lastName = "Smith";` и при попытке сослаться на эту переменную, на странице как `@LastName`, ошибка результаты, так как `LastName` не распознается.

> [!NOTE]
> В Visual Basic, ключевые слова и переменные были *не* с учетом регистра.


### <a name="7-much-of-your-coding-involves-objects"></a>7. Большая часть программирования включает в себя объекты

*Объект* представляет нечто, что можно программировать &#8212; страницы текстовое поле, файл, изображения, веб-запроса, сообщение электронной почты, запись о заказчике (строки базы данных), и т.д. Объекты имеют свойства, описывающие их характеристик и чтение или изменение &#8212; имеет объект с текстовыми полями `Text` (среди прочего), объект запроса имеет `Url` , сообщение электронной почты имеет `From` свойство, и объект клиента имеет `FirstName` свойства. Объекты также имеют методы, которые являются &quot;команд&quot; они могут выполнять. Примеры включают объект файла `Save` метод, объект изображения `Rotate` метод и объект по электронной почте `Send` метод.

Вы будете часто иметь дело с `Request` объекта, который предоставляет сведения, такие как значения текстовых полей (поля формы) на странице, тип браузера, выдавший запрос, URL-адрес страницы, удостоверение пользователя и т. д. В следующем примере показано, как доступ к свойствам `Request` объекта и как вызывать `MapPath` метод `Request` объекта, который дает абсолютный путь к странице на сервере:

[!code-html[Main](introducing-razor-syntax-c/samples/sample9.html)]

Результат отображается в браузере:

![Razor Img5](introducing-razor-syntax-c/_static/image5.jpg)

### <a name="8-you-can-write-code-that-makes-decisions"></a>8. Можно написать код, который принимает решения

Ключевой особенностью динамических веб-страниц — это, вы можете определять порядок действий в зависимости от условия. Наиболее распространенный способ сделать это — с `if` инструкции (и необязательно `else` инструкции).

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample10.cshtml)]

Инструкция `if(IsPost)` является быстрым способом написания `if(IsPost == true)`. Вместе с `if` инструкции, существует множество способов для проверки условий, повторите блоки кода, и т. д., которые являются описано далее в этой статье.

Результат отображается в браузере (после нажатия кнопки **отправить**):

![Razor Img6](introducing-razor-syntax-c/_static/image6.jpg)

> [!TIP] 
> 
> <a id="SB_HttpGetPost"></a>
> ### <a name="http-get-and-post-methods-and-the-ispost-property"></a>HTTP GET и POST методы и свойства IsPost
> 
> Протокол, используемый для веб-страниц (HTTP) поддерживает очень ограниченное число методы (команды), которые используются для выполнения запросов к серверу. Два самых распространенных рисков: GET, который используется для чтения страницы, и POST, который используется для отправки страницы. Как правило первый раз пользователь запрашивает страницу, страница запрашивается с помощью запроса GET. Если пользователь вводит в форму и нажимает кнопку отправки, браузер отправляет запрос POST на сервер.
> 
> В веб-программирования часто бывает полезно знать ли страница запрашивается как GET или POST, чтобы вы знаете, как для обработки страницы. Веб-страницах ASP.NET, можно использовать `IsPost` свойство, чтобы увидеть, является ли запрос GET или POST. Если запрос POST, `IsPost` свойство возвратит значение true, и вы можете выполнять действия, такие как чтение значения текстовых полей в форме. Вы увидите множество примеров продемонстрируем способ обработки страницы по-разному в зависимости от значения `IsPost`.


## <a name="a-simple-code-example"></a>Простой пример кода

Эта процедура показано, как создать страницу, которая иллюстрирует основные приемы программирования. В примере создайте страницу, которая позволяет пользователям вводить двух чисел, а затем он добавляет их и отображает результат.

1. В редакторе создайте файл и назовите его *AddNumbers.cshtml*.
2. Скопируйте следующий код и разметку в странице, заменив все уже на странице.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample11.cshtml)]

    Ниже приведены некоторые аспекты отметить:

    - `@` Символ запускается первым блоком кода в странице, и перед `totalMessage` переменной, которое внедрено в нижней части страницы.
    - В верхней части страницы будет заключен в фигурные скобки.
    - В блок на вершине всех строк заканчиваются точкой с запятой.
    - Переменные `total`, `num1`, `num2`, и `totalMessage` хранить несколько чисел и строка.
    - Строковый литерал значение, присваиваемое `totalMessage` переменная находится в двойные кавычки.
    - Так как код, с учетом регистра, когда `totalMessage` переменная используется в нижней части страницы, его имя должно точно соответствовать переменной в верхней.
    - Выражение `num1.AsInt() + num2.AsInt()` показано, как работать с объектами и методами. `AsInt` Метод для каждой переменной преобразует строку, введенные пользователем, в число (целое число), чтобы на нем можно выполнять арифметические операции.
    - `<form>` Тег включает `method="post"` атрибута. Указывает, что когда пользователь щелкает **добавить**, страницы будут отправляться на сервер с помощью метода HTTP POST. При отправке страницы `if(IsPost)` результатом проверки является значение true, а также условного кода, результат сложения чисел.
3. Сохраните страницу и запустите его в браузере. (Убедитесь, что выбран страницы **файлы** рабочей области, прежде чем запускать его.) Введите двумя целыми числами и нажмите кнопку **добавить** кнопки. 

    ![Razor Img7](introducing-razor-syntax-c/_static/image7.jpg)

## <a name="basic-programming-concepts"></a>Основные понятия программирования

В этой статье предоставляются общие сведения о веб-программирование ASP.NET. Это не исчерпывающий анализ, просто вкратце описал принципы программирования, которые будут использоваться чаще всего. Тем не менее он охватывает почти все, что необходимо приступить к работе с веб-страниц ASP.NET.

Но сначала необходимо немного техническими знаниями.

### <a name="the-razor-syntax-server-code-and-aspnet"></a>Синтаксис Razor, серверный код и ASP.NET

Синтаксис Razor — это простой синтаксис программирования для внедрения серверного кода на веб-странице. В веб-страницы с синтаксисом Razor, существует два типа содержимого: клиент содержимое и серверного кода. Содержимое клиента является то, что вы привыкли в веб-страницах: HTML-разметка (элементы), сведения о стиле, такие как CSS, некоторые клиентского скрипта, возможно, такие как JavaScript и обычного текста.

Синтаксис Razor позволяет добавлять код сервера к содержимому этого клиента. Если на странице кода сервера, сервер запускает этот код во-первых, перед отправкой страницы в браузер. Запустив на сервере, код можно выполнять задачи, может быть гораздо более сложные решения с использованием содержимого клиента отдельно, как и доступ к базам данных на основе сервера. Самое главное, серверный код может динамически генерировать клиентский контент &#8212; он может создавать разметку HTML или другое содержимое в режиме реального времени и отправьте его в браузер вместе со статическим HTML-страница может содержать. С точки зрения браузера клиента содержимое, которое генерируется код сервера ничем не отличается от любого другого содержимого клиента. Как вы уже видели, серверный код, который требуется довольно прост.

Веб-страниц ASP.NET с синтаксисом Razor имеют специальное расширение (*.cshtml* или *.vbhtml*). Сервер распознает эти расширения, запускает код, помеченный синтаксисом Razor, а затем отправляет страницу в браузер.

### <a name="where-does-aspnet-fit-in"></a>ASP.NET помещается?

Синтаксис Razor основан на технологии корпорации Майкрософт, называемой ASP.NET, которая в свою очередь основана на Microsoft .NET Framework. .NET Framework является большой и полную платформу программирования от корпорации Майкрософт по разработке компьютерных приложений практически любого типа. ASP.NET является частью .NET Framework, предназначенный специально для создания веб-приложений. Разработчики использовали ASP.NET для создания многих крупнейших и самый высокий трафик веб-сайтов в мире. (Любое время вы видите расширение имени файла *.aspx* как часть URL-адрес узла, вы будете знать, что сайт, написанный с использованием ASP.NET.)

Синтаксис Razor предоставляет все возможности ASP.NET, но с помощью упрощенного синтаксиса, которая проще для получения, если вы только начинаете знакомиться и который станет продуктивнее ли вы специалистом. Несмотря на то, что этот синтаксис прост в использовании, ее семейства связи с ASP.NET и .NET Framework означает, что как веб-сайты становятся все более сложными, мощь больше платформ, доступные пользователю.

![Razor Img8](introducing-razor-syntax-c/_static/image8.jpg)

> [!TIP] 
> 
> **Классы и экземпляры**
> 
> Код сервера ASP.NET использует объекты, которые в свою очередь лежит идея классов. Класс является определение или шаблон для объекта. Например, приложение может содержать `Customer` класс, который определяет свойства и методы, необходимые для любого объекта клиента.
> 
> Если приложению необходима для работы с данными клиента, он создает экземпляр (или *создает*) объект customer. Каждого клиента — это отдельный экземпляр `Customer` класса. Каждый экземпляр поддерживает те же свойства и методы, но значения свойств для каждого экземпляра обычно отличаются, так как каждый объект клиента является уникальным. В объекте одного клиента `LastName` свойство может быть «Smith»; в другом объекте клиента, `LastName` свойство может быть «Jones.»
> 
> Аналогичным образом, любой отдельных веб-страницы в веб-узла будет `Page` объект, который является экземпляром класса `Page` класса. Кнопка на странице `Button` объект, который является экземпляром класса `Button` класс и т. д. Каждый экземпляр имеет свои собственные характеристики, но все они основаны на параметрах, указанных в определении класса объекта.


## <a name="basic-syntax"></a>Базовый синтаксис

Вы уже видели простой пример, как создать страницу ASP.NET Web Pages и как можно добавить код сервера для HTML-разметка. Здесь вы узнаете основы написания кода сервера ASP.NET, с помощью синтаксиса Razor &#8212; то есть правила языка программирования.

Если вы являетесь опытным при программировании (особенно если вы использовали, C, C++, C#, Visual Basic или JavaScript), большая часть сведений здесь будут знакомы. Возможно, необходимо ознакомиться только с добавляется как серверный код разметки в *.cshtml* файлов.

<a id="BM_CombiningTextMarkupAndCode"></a>
### <a name="combining-text-markup-and-code-in-code-blocks"></a>Объединение текста, разметки и кода в блоках кода

В блоках кода сервера часто требуется вывод текста или разметки (или оба) на страницу. Если блок кода сервера содержит текст, не кода и, вместо этого должны отображаться как есть, ASP.NET необходимо иметь возможность различать этот текст из кода. Для этого можно использовать следующие способы.

- Заключите текст в HTML-элемента как `<p></p>` или `<em></em>`:   

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample12.cshtml)]

    HTML-элемента может включать текст, дополнительных элементов HTML и код сервера выражения. Когда ASP.NET обнаруживает открывающий тег HTML (например, `<p>`), она отображает всего в том числе элемент и его содержимое, как является в браузер, в разрешении выражения кода сервера, он.
- Используйте `@:` оператор или `<text>` элемент. `@:` Выводит одну строку содержимого, содержащего обычный текст или непарные теги HTML; `<text>` элемент заключает в себе несколько строк для вывода. Эти параметры полезны в тех случаях, если не требуется для отрисовки HTML-элемента как часть выходных данных.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample13.cshtml)]

    Если нужно вывести несколько строк текста или непарные теги HTML, может предшествовать каждая строка начинается с `@:`, или можно заключить строку в `<text>` элемент. Как и `@:` оператор,`<text>` теги используются платформой ASP.NET для определения содержимого текста и никогда не отображаются в выходных данных страницы.

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample14.cshtml)]

    В первом примере повторяется предыдущий пример, но использует одну пару `<text>` тегов, чтобы заключить текст для отображения. Во втором примере `<text>` и `</text>` теги заключите три строки, каждая из которых имеет неавтономные текста и несовпадающие HTML-теги (`<br />`), а также серверный код и соответствующие теги HTML. Опять же, может предшествовать каждой строки по отдельности с помощью `@:` оператор; либо works способом.

    > [!NOTE]
    > При выводе текста как показано в этом разделе &#8212; с помощью HTML-элемент, `@:` оператора, или `<text>` элемент &#8212; ASP.NET не HTML-кодирование выходных данных. (Как уже отмечалось, ASP.NET кодировать выходные данные выражения кода сервера и блоков кода сервера, которым предшествует `@`, за исключением особых случаев, указанных в этом разделе.)

### <a name="whitespace"></a>Whitespace

Лишние пробелы в операторе (и за ее пределами строковым литералом) не влияют на инструкцию:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample15.cshtml)]

Разрыв строки в инструкции не оказывает влияния на инструкции, и можно включать инструкции для удобства чтения. Следующие инструкции равнозначны:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample16.cshtml)]

Тем не менее нельзя создать оболочку строки середине строкового литерала. Следующий пример не будет работать:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample17.cshtml)]

Чтобы объединить длинную строку, которая переносится на несколько строк, такие как приведенный выше код, можно двумя способами. Можно использовать оператор объединения (`+`), который вы увидите далее в этой статье. Можно также использовать `@` символ для создания буквального строкового литерала, как было показано ранее в этой статье. Буквальные строковые литералы могут располагаться в нескольких строках:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample18.cshtml)]

### <a name="code-and-markup-comments"></a>Код (и разметки) комментарии

Комментарии можно оставлять заметки как для себя или другим пользователям. Они также позволяют отключать (*закомментируйте*) часть кода или разметку, вы не хотите запускать, но хотите сохранить на странице, на данный момент.

Существует отличается, комментирование синтаксиса Razor кода и разметки HTML. Как и в случае с любым кодом Razor, комментарии Razor обрабатываются (и затем удалить) на сервере перед отправкой страницы в браузер. Таким образом комментирования синтаксиса Razor позволяет поместить комментарии в код (или даже в разметку), которые можно использовать при редактировании файла, но пользователи не видят, даже в исходный код страницы.

Для комментариев ASP.NET Razor начать комментарий с `@*` и завершается оператором `*@`. Комментарий можно на одной или нескольких строках:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample19.cshtml)]

Вот комментария в блок кода:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample20.cshtml)]

Здесь же блок кода, с помощью строки кода закомментирован, чтобы он не будет работать:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample21.cshtml)]

Внутри блока кода в качестве альтернативы с помощью синтаксиса комментариев Razor, можно использовать комментирования синтаксис языка программирования, которую вы используете, например C#:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample22.cshtml)]

В C#, которым предшествует однострочные комментарии `//` символов, а многострочные комментарии начинаются с `/*` и заканчиваться `*/`. (Как и в комментарии Razor, C# комментарии не подготавливаются к просмотру в браузере.)

Для разметки как вы, вероятно, знаете, можно создать комментарий HTML:

[!code-xml[Main](introducing-razor-syntax-c/samples/sample23.xml)]

Комментарии HTML, начинаются с `<!--` символов и заканчиваются `-->`. Можно использовать комментарии HTML для окружения не только текст, но также разметку HTML, который вы хотите оставить на странице, но не хотите для подготовки к просмотру. Этот комментарий HTML будет скрыть все содержимое теги и текст, который они содержат:

[!code-html[Main](introducing-razor-syntax-c/samples/sample24.html)]

В отличие от комментариев Razor, комментарии HTML *являются* отображен на странице и пользователь может видеть их путем просмотра исходного кода страницы.

Razor имеет ограничения на вложенные блоки C#. Дополнительные сведения см. в разделе [переменных C# с именем и вложенные блоки создать неработающие код](http://aspnetwebstack.codeplex.com/workitem/1914)

## <a name="variables"></a>Переменные

Переменная является именованный объект, который используется для хранения данных. Вы можно назвать переменные, но имя должно начинаться с буквы и не может содержать пробелы или зарезервированные символы.

### <a name="variables-and-data-types"></a>Переменные и типы данных

Переменная может иметь определенный тип данных, который указывает, какие данные хранятся в переменной. У вас есть строковых переменных, в которых хранятся строковые значения (например &quot;Здравствуй, мир&quot;), целочисленные переменные, которые сохраняют значения целого числа (например, 3 или 79) и переменные date, в которых хранятся значения даты в различных форматах (например, 4/12/2012 или марта 2009 г. ). И многие другие типы данных, которые можно использовать.

Тем не менее обычно не нужно указывать тип переменной. В большинстве случаев, ASP.NET может определить тип, в зависимости от того, как используются данные в переменной. (Иногда необходимо указать тип, вы увидите примеры, когда это значение равно true.)

Объявите переменную с помощью `var` ключевое слово (Если вы не хотите указывать тип) или с помощью имени типа:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample25.cshtml)]

В следующем примере показано некоторые типичные способы применения переменных на веб-странице:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample26.cshtml)]

Если объединить предыдущих примерах на странице, вы увидите, это отображается в браузере:

![Razor Img9](introducing-razor-syntax-c/_static/image9.jpg)

### <a name="converting-and-testing-data-types"></a>Преобразование и тестирование типы данных

Несмотря на то, что ASP.NET обычно можно автоматически определить тип данных, иногда это невозможно. Таким образом может потребоваться помощь ASP.NET, выполнив явное преобразование. Даже если у вас нет для преобразования типов, иногда бывает полезно проверить, какие типы данных вы можете работать с.

Наиболее распространенным случаем является необходимость преобразования строки в другой тип, такой как целое число или дату. В примере показан типичный случай, где необходимо преобразовать строку в число.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample27.cshtml)]

Как правило входные данные пользователя будут доставляться вам как строки. Даже если предлагается пользователю ввести число, и даже если они вводят цифры, при отправке ввод данных пользователем и прочитать его в код, данные в строковом формате. Таким образом необходимо преобразовать строку в число. В примере при попытке выполнить арифметические операции над значениями без преобразования их, возникает следующая ошибка, так как ASP.NET не удается добавить две строки:

*Не удается неявно преобразовать тип «string» для «int».*

Для преобразования значений в целые числа, следует вызвать `AsInt` метод. Если преобразование прошло успешно, затем можно добавить номера.

Ниже перечислены некоторые распространенные методы преобразования и тестирования для переменных.

:::row:::
    :::column:::
    <strong>Метод</strong>
    :::column-end:::
    :::column:::
    <strong>Описание</strong>
    :::column-end:::
    :::column:::
    <strong>Пример</strong>
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsInt(), IsInt()`
    :::column-end:::
    :::column:::
    Преобразует строку, которая представляет целое число (например, «593)» в целое число.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample28.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsBool(), IsBool()`
    :::column-end:::
    :::column:::
    Преобразует строку как &quot;true&quot; или &quot;false&quot; к логическому типу.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample29.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsFloat(), IsFloat()`
    :::column-end:::
    :::column:::
    Преобразует строку, которая имеет значение десятичного числа, например &quot;1.3&quot; или &quot;7.439&quot; число с плавающей запятой.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample30.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsDecimal(), IsDecimal()`
    :::column-end:::
    :::column:::
    Преобразует строку, которая имеет значение десятичного числа, например &quot;1.3&quot; или &quot;7.439&quot; в десятичное число. (В ASP.NET, десятичное число является более точным, чем число с плавающей запятой.)
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample31.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsDateTime(), IsDateTime()`
    :::column-end:::
    :::column:::
    Преобразует строку, представляющую значение даты и времени для ASP.NET `DateTime` типа.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample32.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `ToString()`
    :::column-end:::
    :::column:::
    Любой другой тип данных преобразуется в строку.
    :::column-end:::
    :::column:::
        [!code-javascript[Main](introducing-razor-syntax-c/samples/sample33.js)]
    :::column-end:::
:::row-end:::

## <a name="operators"></a>Операторы

Оператор — это ключевое слово или символ, который сообщает ASP.NET, какого рода команду, выполняемую в выражении. В языке C# (и синтаксиса Razor на его основе) поддерживает многие операторы, но требуется только для распознавания немного, чтобы приступить к работе. В следующей таблице перечислены наиболее распространенные операторы.


:::row:::
    :::column:::
    <strong>Оператор</strong>
    :::column-end:::
    :::column:::
    <strong>Описание</strong>
    :::column-end:::
    :::column:::
    <strong>Примеры</strong>
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+` `-` `*` `/`
    :::column-end:::
    :::column:::
    Математические операторы, используемые в числовых выражений.
    :::column-end:::
    :::column:::
        [!code-css[Main](introducing-razor-syntax-c/samples/sample34.css)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `=`
    :::column-end:::
    :::column:::
    Присваивание. Присваивает значение правой стороны оператора объекту с левой стороны.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample35.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `==`
    :::column-end:::
    :::column:::
    Равенство. Возвращает `true` Если значения равны. (Обратите внимание, что разница между `=` оператор и `==` оператор.)
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample36.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `!=`
    :::column-end:::
    :::column:::
    Неравенство. Возвращает `true` Если значения не равны.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample37.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `< > <= >=`
    :::column-end:::
    :::column:::
    Меньше-чем», «больше — чем меньше или равно и больше или равно.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample38.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+`
    :::column-end:::
    :::column:::
    Объединение, который используется для объединения строк. ASP.NET знает разницу между этот оператор и оператор сложения, исходя из типа данных выражения.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample39.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+=` `-=`
    :::column-end:::
    :::column:::
    Операторы инкремента и декремента, которые сложения и вычитания 1 (соответственно) из переменной.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample40.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `.`
    :::column-end:::
    :::column:::
    Точка. Используются для различения объектов и их свойства и методы.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample41.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `()`
    :::column-end:::
    :::column:::
    Круглые скобки. Используется для группирования выражений и для передачи параметров в методы.
    :::column-end:::
    :::column:::
        [!code-javascript[Main](introducing-razor-syntax-c/samples/sample42.js)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `[]`
    :::column-end:::
    :::column:::
    Квадратные скобки. Используется для доступа к значениям в массивы или коллекции.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample43.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `!`
    :::column-end:::
    :::column:::
    Нет. Обращает `true` значение `false` и наоборот. Обычно используется в качестве быстрым способом для проверки `false` (то есть для не `true`).
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample44.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `&&` `||`
    :::column-end:::
    :::column:::
    Логическое и и или, которые используются для связывания условий.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample45.cs)]
    :::column-end:::
:::row-end:::

<a id="ID_WorkingWithFileAndFolderPaths"></a>
## <a name="working-with-file-and-folder-paths-in-code"></a>Работа с файлом и пути к папкам в коде

Вы будете часто работать пути файлов и папок в коде. Ниже приведен пример структуры физическую папку для веб-сайта, которое может отображаться на компьютере разработчика:

`C:\WebSites\MyWebSite default.cshtml datafile.txt \images Logo.jpg \styles Styles.css`

Ниже приведены некоторые важные сведения о URL-адреса и пути.

- URL-адрес начинается с любым именем домена (`http://www.example.com`) или имя сервера (`http://localhost`, `http://mycomputer`).
- URL-адрес соответствует физический путь на главном компьютере. Например `http://myserver` может соответствовать папке *C:\websites\mywebsite* на сервере.
- Виртуальный путь является сокращением для представления путей в коде без указания полного пути. Он включает в себя часть URL-адрес, который следует за именем домена или сервера. При использовании виртуальных путей, можно перенести код в другой домен или сервер без необходимости обновите пути.

Ниже приведен пример, чтобы помочь вам понять различия:

| Полный URL-адрес | `http://mycompanyserver/humanresources/CompanyPolicy.htm` |
| --- | --- |
| Имя сервера | *mycompanyserver* |
| Виртуальный путь | */HumanResources/CompanyPolicy.htm* |
| Физический путь | *C:\mywebsites\humanresources\CompanyPolicy.htm* |

Виртуальный корневой каталог — /, так же, как корень диска c диск — \. (Виртуальная папка пути всегда использовать символы косой черты). Виртуальный путь к папке не нужно иметь то же имя как физический каталог; Это может быть псевдонимом. (На рабочих серверах, виртуальный путь редко соответствует как полный физический путь.)

При работе с файлами и папками в коде, иногда требуется для ссылки на физический путь и иногда виртуального пути, в зависимости от того, какие объекты, которыми вы работаете. ASP.NET предоставляет эти средства для работы с пути файлов и папок в коде: `Server.MapPath` метод и `~` оператор и `Href` метод.

### <a name="converting-virtual-to-physical-paths-the-servermappath-method"></a>Преобразование виртуальных и физических путей: метод Server.MapPath

`Server.MapPath` Метод преобразует виртуальный путь (например */default.cshtml*) в абсолютный физический путь (например *C:\WebSites\MyWebSiteFolder\default.cshtml*). Этот метод использовать когда требуется полный физический путь. Типичный пример — при чтении или записи в текстовый файл или файл изображения на веб-сервере.

Абсолютный физический путь веб-сайта на сервере размещения сайта обычно не известен, поэтому этот метод можно преобразовать путь вы знаете, виртуальный путь, соответствующий путь на сервере для вас. Передайте виртуальный путь к файлу или папке в метод и возвращает физический путь:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample46.cshtml)]

### <a name="referencing-the-virtual-root-the--operator-and-href-method"></a>Ссылка на виртуальный корневой каталог: ~ оператор и метод Href

В *.cshtml* или *.vbhtml* файл, вы можете ссылаться на пути виртуального корневого каталога, используя `~` оператор. Это очень удобно, так как для перемещения страниц на узле и все ссылки, содержащиеся в них на другие страницы не будет нарушена. Это также удобно в случае, если когда-либо переместить веб-сайта в другое расположение. Далее приводятся некоторые примеры.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample47.cshtml)]

Если веб-сайт `http://myserver/myapp`, вот как ASP.NET будет интерпретировать эти пути, при запуске страницы:

- `myImagesFolder`: `http://myserver/myapp/images`
- `myStyleSheet` : `http://myserver/myapp/styles/Stylesheet.css`

(Вы не увидите эти пути в качестве значения переменной, но ASP.NET будет рассматривать пути, как в случае, они были).

Можно использовать `~` оператор, как в серверном коде (как описано выше), так и в разметке, следующим образом:

[!code-html[Main](introducing-razor-syntax-c/samples/sample48.html)]

В разметке, использовании `~` оператор для создания путей к ресурсам, например файлы изображений, другие веб-страниц и файлов CSS. При запуске страницы ASP.NET, просматривает страницы (код и разметку) и разрешает все `~` ссылки на соответствующий путь.

## <a name="conditional-logic-and-loops"></a>Условной логики и циклов

Код сервера ASP.NET, которая позволяет выполнять задачи на основе условий и написать код, который повторяется инструкций определенное число раз (то есть код, который запускает цикл).

### <a name="testing-conditions"></a>Проверка условий

Для тестирования на выполнение простого условия можно использовать `if` инструкцию, которая возвращает true или false, основываясь на тест, можно указать:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample49.cshtml)]

`if` Ключевое слово начинается блок. Тест этот сам (условие) указан в скобках и возвращает значение true или false. Операторы под управлением, если тест имеет значение true, заключенных в фигурные скобки. `if` Инструкция может содержать `else` блок, который задает операторы, которые выполняются, если условие имеет значение false:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample50.cshtml)]

Можно добавить несколько условий с помощью `else if` блок:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample51.cshtml)]

В этом примере, если первое условие в Если блок не имеет значение true, `else if` проверяется условие. Если это условие выполнено, операторы в `else if` блоке. Если ни одно из условий не соблюдается, операторы в `else` блоке. Можно добавить любое количество иначе Если блокируется, а затем закройте с `else` заблокировать, в виде &quot;все остальное&quot; условие.

Чтобы протестировать большое количество условий, используйте `switch` блок:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample52.cshtml)]

Значение для проверки указан в скобках (в примере `weekday` переменной). Каждого отдельного теста использует `case` инструкцию, которая заканчивается двоеточием (:). Если значение `case` инструкции совпадает со значением теста, выполнении кода в соответствующем блоке case. Закройте каждая инструкция case с `break` инструкции. (Если вы забудете включить разрыв в каждом `case` block, код из следующего `case` инструкция выполнится также.) Объект `switch` блок часто имеет `default` инструкцию как в случае с последнего &quot;все остальное&quot; вариант, который выполняется, если ни одно из остальных случаях.

Результат выполнения двух последних блоки условий, отображаемый в браузере:

![Razor Img10](introducing-razor-syntax-c/_static/image10.jpg)

### <a name="looping-code"></a>Циклическое кода

Часто требуется многократно выполнять те же операторы. Для этого цикла. Например вы часто выполняются те же операторы для каждого элемента в коллекции данных. Если вы знаете, точно того, как часто необходимо применить цикл, можно использовать `for` цикла. Этот тип цикла удобен для подсчета или отсчет:

[!code-html[Main](introducing-razor-syntax-c/samples/sample53.html)]

Цикл начинается с `for` ключевое слово, и три оператора в круглые скобки, каждый заканчиваться точкой с запятой.

- В скобках, первый оператор (`var i=10;`) создает счетчик и инициализирует его до 10. Вы не обязаны именовать счетчика `i` &#8212; можно использовать любую переменную. Когда `for` выполнении цикла, этот счетчик увеличивается автоматически.
- Второй оператор (`i < 21;`) задает условие для насколько вам требуется подсчитать. В этом случае необходимо его, чтобы перейти к более 20 (то есть, продолжайте работу при счетчика меньше 21).
- Третья инструкция (`i++` ) использует оператор приращения, который просто указывает, что счетчик должен иметь 1 добавляется при каждом выполнении цикла.

В скобках приведен код, который будет выполняться для каждой итерации цикла. Разметка создает новый абзац (`<p>` элемент) каждый раз и добавляет строку в выходные данные, отображают значение `i` (счетчик). Когда вы запускаете эту страницу, в примере создается 11 строк, отображение выходных данных, с текстом в каждой строке, указывающее номер элемента.

![Razor Img11](introducing-razor-syntax-c/_static/image11.jpg)

Если вы работаете в коллекции или массива, часто используют `foreach` цикла. Коллекция — это группа схожих объектов и `foreach` цикле позволяет выполнить задачу для каждого элемента в коллекции. Этот тип цикла удобен для коллекций, так как в отличие от `for` цикл, у вас нет для увеличения значения счетчика или ограничить. Вместо этого `foreach` код цикла просто продолжается через коллекцию до его завершения.

Например, следующий код возвращает элементы в `Request.ServerVariables` коллекции, которая представляет собой объект, содержащий сведения о веб-сервере. Она использует `foreac` h цикл для отображения имени каждого элемента путем создания нового `<li>` элемента в HTML-маркированного списка.

[!code-html[Main](introducing-razor-syntax-c/samples/sample54.html)]

`foreach` Ключевого слова следуют скобки где объявления переменной, которая представляет один элемент в коллекции (в примере `var item`), за которым следует `in` ключевое слово, и вы хотите организовать цикл по коллекции. В теле `foreach` цикла, можно получить доступ к текущего элемента, с помощью переменной, объявленный ранее.

![Razor Img12](introducing-razor-syntax-c/_static/image12.jpg)

Чтобы создать цикл программирования более общего назначения, используйте `while` инструкции:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample55.cshtml)]

Объект `while` цикл начинается с `while` ключевое слово, и круглые скобки вы зададите, как долго цикл продолжается (здесь, пока `countNum` меньше 50), затем блок для повторения. Циклы обычно увеличивается (Добавление) или уменьшения (вычитаемое) переменной или объекта, используемые для подсчета. В примере `+=` оператор добавляет 1 к `countNum` при каждом выполнении цикла. (Чтобы уменьшают значение переменной в цикле, который отсчитывает, используйте оператор декремента `-=`).

## <a name="objects-and-collections"></a>Объекты и коллекции

Почти все в на веб-сайте ASP.NET — это объект, включая саму веб-страницу. В этом разделе рассматриваются некоторые важные объекты, которые вы будете работать с часто в коде.

### <a name="page-objects"></a>Объекты страниц

Самый простой объект в ASP.NET является страница. Можно получить доступ к свойствам объекта страницу напрямую без любой подходящий объект. Следующий код получает путь к файлу страницы, с помощью `Request` объект страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample56.cshtml)]

Чтобы сделать его очистки, которые вы ссылаетесь, свойства и методы для текущего объекта страницы, при необходимости можно использовать ключевое слово `this` для представления объекта страницы в коде. Ниже приведен в предыдущем примере кода с `this` добавляется для представления страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample57.cshtml)]

Можно использовать свойства `Page` объекта, чтобы получить массу информации, такие как:

- `Request`. Как вы уже видели, это коллекция сведений о текущем запросе, включая тип браузера, выдавший запрос, URL-адрес страницы, удостоверение пользователя и т. д.
- `Response`. Это коллекция сведений об ответе (страницы), отправляемого в браузер при серверный код завершения работы. Например это свойство можно использовать для записи сведений в ответ. 

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample58.cshtml)]

<a id="ID_CollectionsAndObjects"></a>
### <a name="collection-objects-arrays-and-dictionaries"></a>Коллекция объектов (массивов и словарей)

Объект *коллекции* — это группа объектов одного типа, например, коллекцию `Customer` объекты из базы данных. ASP.NET содержит множество встроенных коллекций, включая `Request.Files` коллекции.

Вы будете часто работать с данными в коллекции. Два распространенных типов коллекций являются *массива* и *словарь*. Массив полезно в том случае, если вы хотите хранить коллекции схожих элементов, но не нужно создавать отдельную переменную для хранения каждого элемента:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample59.cshtml)]

В массивах можно объявить определенный тип данных, например `string`, `int`, или `DateTime`. Чтобы указать, что переменная может содержать массив, добавьте скобки к объявлению (такие как `string[]` или `int[]`). Можно получить доступ к элементам в массиве с помощью их положение (индекс) или с помощью `foreach` инструкции. Массив индексы отсчитываются от нуля &#8212; то есть первый элемент находится в позиции 0, второй элемент находится в позиции 1 и т. д.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample60.cshtml)]

Можно определить количество элементов в массиве, получив его `Length` свойство. Чтобы получить позицию конкретного элемента в массиве (для поиска массив), используйте `Array.IndexOf` метод. Вы можете также выполнять действия как обратное содержимое массива ( `Array.Reverse` метод) или Сортировка содержимого ( `Array.Sort` метод).

В результате выполнения код массив строки, отображаемый в браузере.

![Razor Img13](introducing-razor-syntax-c/_static/image13.jpg)

Словарь является коллекцией пар "ключ значение", где можно ввести ключ (или имя), чтобы задать или получить соответствующее значение:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample61.cshtml)]

Чтобы создать словарь, используйте `new` ключевое слово, чтобы указать, что вы создаете новый объект словаря. Словарь можно назначить переменной с помощью `var` ключевое слово. Можно указать типы данных элементов в словарь, используя угловые скобки ( `< >` ). В конце объявления необходимо добавить пару скобок, так как это фактически является методом, который создает новый словарь.

Для добавления элементов в словарь, можно вызвать `Add` метод переменной словарь (`myScores` в данном случае), а затем укажите ключ и значение. Кроме того можно использовать квадратные скобки для указания ключа и выполнить простое присваивание, как показано в следующем примере:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample62.cs)]

Чтобы получить значение из словаря, необходимо указать ключ в квадратные скобки:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample63.cs)]

## <a name="calling-methods-with-parameters"></a>Вызов методов с параметрами

Во время прочтения этой статьи, объекты, которые программируется с могут иметь методы. Например `Database` объект может иметь `Database.Connect` метод. Многие методы также имеют один или несколько параметров. Объект *параметр* является значение, которое можно передать в метод, чтобы включить этот метод для выполнения необходимых задач. Например, взгляните на объявление для `Request.MapPath` метод, который принимает три параметра:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample64.cs)]

(Строка была разбита на сделать код более удобочитаемым. Помните, что можно поместить разрывы строк практически любом месте, за исключением того, внутри строк, заключенных в кавычки.)

Этот метод возвращает физический путь на сервере, который соответствует для заданного виртуального пути. Три параметра для метода являются `virtualPath`, `baseVirtualDir`, и `allowCrossAppMapping`. (Обратите внимание на то, что в объявлении с типами данных, данных, которые они оставлю перечисляются параметры). При вызове этого метода необходимо указать значения для всех трех параметров.

Синтаксис Razor предоставляет два варианта для передачи параметров в метод: *позиционные параметры* и *именованные параметры*. Чтобы вызвать метод, с помощью позиционные параметры, параметры передаются в строгом порядке, который указан в объявлении метода. (Вы обычно будет этот порядок по чтению документации для метода.) Необходимо соблюдать порядок и какого-либо параметра невозможно пропустить &#8212; при необходимости можно передать пустую строку (`""`) или `null` для позиционного параметра, которое не имеет значения для.

В следующем примере предполагается, что у вас есть папка с именем *сценариев* на веб-сайте. Этот код вызывает `Request.MapPath` метод и передает эти значения для трех параметров в правильном порядке. Затем отображается сопоставленные результирующий контур.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample65.cshtml)]

При метод имеет множество параметров, можно сохранить код более удобочитаемым, используя именованные параметры. Для вызова метода с использованием именованных параметров, укажите имя параметра следует двоеточие (:), а затем значение. Именованных параметров удобен тем, что их можно передать в любом порядке, который вы хотите. (Недостаток заключается в вызове метода не является компактным).

В следующем примере вызывается тот же метод, как описано выше, но использует именованные параметры для предоставления значений:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample66.cshtml)]

Как видите, эти параметры передаются в другом порядке. Тем не менее при выполнении предыдущего примера и в этом примере, они будут возвращать то же значение.

<a id="ID_HandlingErrors"></a>
## <a name="handling-errors"></a>Обработка ошибок

### <a name="try-catch-statements"></a>Операторы Try-Catch

У вас будет часто инструкций в коде, может завершиться ошибкой по соображениям за пределами элемента управления. Пример:

- Если код пытается создать или получить доступ к файлу, может возникнуть все виды ошибок. Файл может отсутствовать, может быть заблокирован, код может не иметь разрешения и т. д.
- Аналогичным образом Если код пытается выполнить обновления записей в базе данных, могут быть проблемы с разрешениями, подключение к базе данных могут быть удалены, сохраняемые данные может быть недопустимым и т. д.

С точки зрения программирования, называются таких ситуациях *исключения*. Если код обнаруживает исключение, он создает (вызывает) сообщение об ошибке каталог, в лучшем случае раздражающих пользователям:

![Razor Img14](introducing-razor-syntax-c/_static/image14.jpg)

В ситуациях, где ваш код может обнаружить исключения, а также чтобы избежать сообщения об ошибках этого типа, можно использовать `try/catch` инструкций. В `try` инструкции, запустите код, который вы проверяете. В одной или нескольких `catch` инструкций, можно произвести поиск конкретных ошибок (определенные типы исключений), которые могли возникнуть. Можно включить столько `catch` инструкциях, как вам нужно искать ошибки, которые вы ожидаете.

> [!NOTE]
> Рекомендуется избегать использования `Response.Redirect` метод в `try/catch` инструкции, так как он может вызвать исключение в страницу.


Пример страницы, которая создает текстовый файл, при первом запросе и затем отображает кнопку, которая позволяет пользователю открыть файл. В примере намеренно используется недопустимое имя файла, чтобы он вызовет исключение. Код включает `catch` инструкций для двух возможных исключений: `FileNotFoundException`, это происходит, если имя файла недопустимо, и `DirectoryNotFoundException`, это происходит, если ASP.NET даже не удается найти папку. (Чтобы увидеть, как оно работает, если все работает надлежащим образом можно Раскомментировать инструкция в примере.)

Если ваш код не обрабатывает исключение, вы увидите страницу ошибки, как и на предыдущем снимке экрана. Тем не менее `try/catch` раздел помогает предотвратить просмотр таких ошибок пользователя.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample67.cshtml)]

## <a name="additional-resources"></a>Дополнительные ресурсы

**Программирование с использованием Visual Basic**


[Приложение. Язык Visual Basic и синтаксис](https://go.microsoft.com/fwlink/?LinkId=202908)


**Справочная документация**


[ASP.NET](https://msdn.microsoft.com/library/ee532866.aspx)

[C# - язык](https://msdn.microsoft.com/library/kx37x362.aspx)
