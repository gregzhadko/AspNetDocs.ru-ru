---
uid: web-pages/overview/getting-started/introducing-razor-syntax-c
title: Общие сведения о веб-программировании ASP.NET с использованиемC#синтаксиса Razor () | Документация Майкрософт
author: Rick-Anderson
description: Эта глава содержит общие сведения о программировании с помощью веб-страницы ASP.NET синтаксис Razor. ASP.NET — Технология Майкрософт для запуска динамического веб-приложения PA...
ms.author: riande
ms.date: 02/07/2014
ms.assetid: aa67d304-583b-4bf8-a231-195656cfb587
msc.legacyurl: /web-pages/overview/getting-started/introducing-razor-syntax-c
msc.type: authoredcontent
ms.openlocfilehash: c2f420bb7c2f7d2e31654c20fb9ec7497a30a9f7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78521208"
---
# <a name="introduction-to-aspnet-web-programming-using-the-razor-syntax-c"></a>Общие сведения о веб-программировании ASP.NET с использованиемC#синтаксиса Razor ()

от [Tom фитзмаккен](https://github.com/tfitzmac)

> В этой статье приводятся общие сведения о программировании с помощью веб-страницы ASP.NET синтаксис Razor. ASP.NET — это технология корпорации Майкрософт для запуска динамических веб-страниц на веб-серверах. В этой статье рассматривается использование языка C# программирования.
> 
> **Что вы**узнаете:
> 
> - 8 лучших советов по программированию для начинающих веб-страницы ASP.NET с помощью синтаксис Razor.
> - Основные понятия программирования, которые вам понадобятся.
> - Что ASP.NET серверный код и синтаксис Razor.
>   
> 
> ## <a name="software-versions"></a>Версии программного обеспечения
> 
> 
> - Веб-страницы ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с веб-страницы ASP.NET 2.

## <a name="the-top-8-programming-tips"></a>8 лучших советов по программированию

В этом разделе приведено несколько советов, которые необходимо знать при написании кода сервера ASP.NET с помощью синтаксис Razor.

> [!NOTE]
> Синтаксис Razor основан на языке C# программирования, и это тот язык, который чаще всего используется с веб-страницы ASP.NET. Однако синтаксис Razor также поддерживает язык Visual Basic и все, что вы видите, можно также сделать в Visual Basic. Дополнительные сведения см. в приложении [Visual Basic языке и синтаксисе](https://go.microsoft.com/fwlink/?LinkId=202908).

Дополнительные сведения о большинстве этих методов программирования см. Далее в этой статье.

### <a name="1-you-add-code-to-a-page-using-the--character"></a>1. Вы добавляете код на страницу с помощью символа @.

`@` символ начинается со встроенных выражений, блоков одиночных инструкций и многооператорных блоков:

[!code-html[Main](introducing-razor-syntax-c/samples/sample1.html)]

Эти инструкции выглядят так, как если бы страница выполнялась в браузере:

![Razor — Img1](introducing-razor-syntax-c/_static/image1.jpg)

> [!TIP] 
> 
> **Кодировка HTML**
> 
> При отображении содержимого на странице с помощью `@` символа, как в предыдущих примерах, ASP.NET HTML кодирует выходные данные. Это заменяет зарезервированные символы HTML (например, `<` и `>` и `&`) кодами, которые позволяют отображать символы в виде символов на веб-странице, а не интерпретировать их как теги HTML или сущности. Без кодирования HTML выходные данные из кода сервера могут отображаться неправильно, и может представлять угрозу безопасности страницы.
> 
> Если ваша цель — вывод HTML-разметки, которая отображает теги как разметку (например `<p></p>` для абзаца или `<em></em>`, чтобы подчеркнуть текст), см. раздел [Объединение текста, разметки и кода в блоках кода](#BM_CombiningTextMarkupAndCode) ниже в этой статье.
> 
> Дополнительные сведения о кодировке HTML см. в статье [Работа с формами](https://go.microsoft.com/fwlink/?LinkId=202892).

### <a name="2-you-enclose-code-blocks-in-braces"></a>2. блоки кода заключены в фигурные скобки

*Блок кода* включает один или несколько операторов кода и заключен в фигурные скобки.

[!code-html[Main](introducing-razor-syntax-c/samples/sample2.html)]

Результат отображается в браузере:

![Razor — Img2](introducing-razor-syntax-c/_static/image2.jpg)

### <a name="3-inside-a-block-you-end-each-code-statement-with-a-semicolon"></a>3. внутри блока все операторы кода завершаются точкой с запятой

Внутри блока кода Каждая полная инструкция Code должна заканчиваться точкой с запятой. Встроенные выражения не заканчиваются точкой с запятой.

[!code-html[Main](introducing-razor-syntax-c/samples/sample3.html)]

### <a name="4-you-use-variables-to-store-values"></a>4. переменные используются для хранения значений

Значения можно хранить в *переменной*, включая строки, числа и даты и т. д. Новую переменную можно создать с помощью ключевого слова `var`. Значения переменных можно вставлять непосредственно на странице с помощью `@`.

[!code-html[Main](introducing-razor-syntax-c/samples/sample4.html)]

Результат отображается в браузере:

![Razor — Img3](introducing-razor-syntax-c/_static/image3.jpg)

<a id="ID_StringLiterals"></a>
### <a name="5-you-enclose-literal-string-values-in-double-quotation-marks"></a>5. строковые литеральные значения заключаются в двойные кавычки.

*Строка* представляет собой последовательность символов, обрабатываемых как текст. Чтобы указать строку, заключите ее в двойные кавычки:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample5.cshtml)]

Если строка, которую требуется отобразить, содержит символ обратной косой черты (`\`) или двойные кавычки (`"`), используйте *Буквальный строковый литерал* с префиксом оператора `@`. (В C#символ \ имеет специальное значение, если не используется Буквальный строковый литерал.)

[!code-html[Main](introducing-razor-syntax-c/samples/sample6.html)]

Чтобы внедрить двойные кавычки, используйте Буквальный строковый литерал и повторите кавычки:

[!code-html[Main](introducing-razor-syntax-c/samples/sample7.html)]

Вот результат использования обоих примеров на странице:

![Razor — Img4](introducing-razor-syntax-c/_static/image4.jpg)

> [!NOTE]
> Обратите внимание, что символ `@` используется как для пометки буквальных строковых C# литералов в, так и для пометки кода на страницах ASP.NET.

### <a name="6-code-is-case-sensitive"></a>6. код учитывает регистр

В C#ключевые слова (такие как `var`, `true`и `if`) и имена переменных чувствительны к регистру. Следующие строки кода создают две различные переменные: `lastName` и `LastName.`

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample8.cshtml)]

Если вы объявили переменную как `var lastName = "Smith";` и пытаетесь сослаться на эту переменную на странице как `@LastName`, вы получите значение `"Jones"` вместо `"Smith"`.

> [!NOTE]
> В Visual Basic ключевые слова и переменные *не* учитывают регистр.

### <a name="7-much-of-your-coding-involves-objects"></a>7. большая часть кода включает объекты

*Объект* представляет вещь, которую можно программировать с &#8212; помощью страницы, текстового поля, файла, изображения, веб-запроса, сообщения электронной почты, записи клиента (строки базы данных) и т. д. Объекты имеют свойства, описывающие их характеристики, а также возможность чтения или &#8212; изменения объекта текстового поля имеет свойство `Text` (в других случаях), объект запроса имеет свойство `Url`, сообщение электронной почты имеет свойство `From`, а объект Customer имеет свойство `FirstName`. Объекты также имеют методы, которые являются &quot;командами&quot; они могут выполняться. К примерам относятся метод `Save` файлового объекта, метод `Rotate` объекта изображения и метод `Send` объекта сообщения электронной почты.

Часто приходится работать с объектом `Request`, который предоставляет сведения, такие как значения текстовых полей (полей формы) на странице, тип браузера, который сделал запрос, URL-адрес страницы, удостоверение пользователя и т. д. В следующем примере показано, как получить доступ к свойствам объекта `Request` и вызвать метод `MapPath` объекта `Request`, который предоставляет абсолютный путь к странице на сервере:

[!code-html[Main](introducing-razor-syntax-c/samples/sample9.html)]

Результат отображается в браузере:

![Razor — Img5](introducing-razor-syntax-c/_static/image5.jpg)

### <a name="8-you-can-write-code-that-makes-decisions"></a>8. можно написать код, который принимает решения

Ключевой функцией динамических веб-страниц является то, что вы можете определить, что делать на основе условий. Самый распространенный способ сделать это — с помощью оператора `if` (и необязательной инструкции `else`).

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample10.cshtml)]

`if(IsPost)` инструкции — это сокращенный способ написания `if(IsPost == true)`. Наряду с инструкциями `if` существует множество способов проверки условий, повторных блоков кода и т. д., которые описаны далее в этой статье.

Результат, отображаемый в браузере (после нажатия кнопки **Отправить**):

![Razor — Img6](introducing-razor-syntax-c/_static/image6.jpg)

> [!TIP] 
> 
> <a id="SB_HttpGetPost"></a>
> ### <a name="http-get-and-post-methods-and-the-ispost-property"></a>Методы HTTP GET и POST и свойство POST
> 
> Протокол, используемый для веб-страниц (HTTP), поддерживает очень ограниченное количество методов (глаголов), которые используются для выполнения запросов к серверу. Двумя наиболее распространенными являются GET, который используется для чтения страницы, и POST, который используется для отправки страницы. В общем случае при первом запросе страницы пользователем страница запрашивается с помощью GET. Если пользователь заполняет форму, а затем нажимает кнопку Отправить, браузер отправляет запрос POST на сервер.
> 
> В веб-программировании часто бывает полезно определить, запрашивается ли страница как GET или AS POST, чтобы вы узнали, как обрабатывать страницу. В веб-страницы ASP.NET можно использовать свойство `IsPost`, чтобы определить, является ли запрос сообщением GET или POST. Если запрос является POST, свойство `IsPost` возвратит значение true, и вы можете выполнять такие действия, как чтение значений текстовых полей в форме. Во многих примерах вы увидите, как обрабатывать страницу по-разному в зависимости от значения `IsPost`.

## <a name="a-simple-code-example"></a>Простой пример кода

В этой процедуре показано, как создать страницу, на которой показаны основные методики программирования. В этом примере создается страница, позволяющая пользователям вводить два числа, затем добавляет их и отображает результат.

1. В редакторе создайте новый файл и назовите его *подставлял. cshtml*.
2. Скопируйте приведенный ниже код и разметку на страницу, заменив все, что уже есть на странице.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample11.cshtml)]

    Обратите внимание на некоторые моменты.

    - Символ `@` запускает первый блок кода на странице и перед переменной `totalMessage`, внедренной в нижнюю часть страницы.
    - Блок в верхней части страницы заключен в фигурные скобки.
    - В блоке в начале все строки заканчиваются точкой с запятой.
    - Переменные `total`, `num1`, `num2`и `totalMessage` хранят несколько чисел и строку.
    - Литеральное строковое значение, присваиваемое переменной `totalMessage`, заключено в двойные кавычки.
    - Так как в коде учитывается регистр, то, когда в нижней части страницы используется `totalMessage` переменная, ее имя должно соответствовать переменной в верхней части.
    - Выражение `num1.AsInt() + num2.AsInt()` показывает, как работать с объектами и методами. Метод `AsInt` для каждой переменной преобразует строку, введенную пользователем, в число (целое число), чтобы можно было выполнять арифметические действия.
    - Тег `<form>` содержит атрибут `method="post"`. Это указывает, что при нажатии пользователем кнопки **Добавить**страница будет отправлена на сервер с помощью метода HTTP POST. При отправке страницы `if(IsPost)` тест оценивается как true и выполняется условный код, отображая результат сложения чисел.
3. Сохраните страницу и запустите ее в браузере. (Перед выполнением страницы убедитесь, что она выбрана в рабочей области **файлы** .) Введите два целых числа и нажмите кнопку " **Добавить** ". 

    ![Razor — Img7](introducing-razor-syntax-c/_static/image7.jpg)

## <a name="basic-programming-concepts"></a>Основные понятия программирования

В этой статье представлен обзор веб-программирования ASP.NET. Это не исчерпывающее исследование, а краткий обзор наиболее часто используемых концепций программирования. Несмотря на это, он охватывает почти все, что потребуется для начала работы с веб-страницы ASP.NET.

Но сначала немного технический фон.

### <a name="the-razor-syntax-server-code-and-aspnet"></a>Синтаксис Razor, серверный код и ASP.NET

Синтаксис Razor — это простой синтаксис программирования для внедрения кода на основе сервера на веб-странице. На веб-странице, использующей синтаксис Razor, существует два типа содержимого: содержимое клиента и серверный код. Содержимое клиента — это то, что вы используете на веб-страницах: разметка HTML (элементы), сведения о стиле, такие как CSS, возможно, некоторые клиентские сценарии, такие как JavaScript, и обычный текст.

Синтаксис Razor позволяет добавлять серверный код в содержимое этого клиента. Если на странице имеется серверный код, то перед отправкой страницы в браузер сервер сначала выполняет этот код. При запуске на сервере код может выполнять задачи, которые могут быть гораздо более сложными для использования только содержимого клиента, например для доступа к серверным базам данных. Что более важно, серверный код может динамически создавать &#8212; клиентское содержимое, которое может создать разметку HTML или другое содержимое на лету, а затем отправить его в браузер вместе со статическим HTML-кодом, который может содержать страница. С точки зрения браузера содержимое клиента, созданное кодом сервера, отличается от содержимого любого другого клиентского содержимого. Как вы уже видели, необходимый серверный код довольно прост.

Веб-страницы ASP.NET, содержащие синтаксис Razor, имеют специальное расширение файла ( *. cshtml* или *. vbhtml*). Сервер распознает эти расширения, выполняет код, помеченный синтаксис Razor, а затем отправляет страницу в браузер.

### <a name="where-does-aspnet-fit-in"></a>Где ASP.NET помещается в?

Синтаксис Razor основан на технологии корпорации Майкрософт, именуемой ASP.NET, которая, в свою очередь, основана на Microsoft .NET Framework. The.NET Framework — это обширная комплексная платформа программирования от корпорации Майкрософт для разработки практически любого типа компьютерных приложений. ASP.NET является частью .NET Framework, специально предназначенной для создания веб-приложений. Разработчики использовали ASP.NET для создания множества веб-сайтов самого большого и наибольшего трафика в мире. (Каждый раз, когда вы видите имя файла Extension *. aspx* как часть URL-адреса сайта, вы узнаете, что сайт был написан с помощью ASP.NET.)

Синтаксис Razor предоставляет все возможности ASP.NET, но использование упрощенного синтаксиса упрощает изучение, если вы являетесь новичком и что повышает продуктивность работы, если вы эксперт. Несмотря на то, что этот синтаксис прост в использовании, его семейство отношений с ASP.NET и .NET Framework означает, что веб-сайты становятся более сложными, вы можете воспользоваться преимуществами более крупных платформ.

![Razor — Img8](introducing-razor-syntax-c/_static/image8.jpg)

> [!TIP] 
> 
> **Классы и экземпляры**
> 
> ASP.NET Server Code использует объекты, которые, в свою очередь, основаны на идее классов. Класс является определением или шаблоном для объекта. Например, приложение может содержать класс `Customer`, определяющий свойства и методы, необходимые для любого объекта клиента.
> 
> Когда приложение должно работать с фактическими сведениями о клиентах, оно создает экземпляр (или *экземпляр*) объекта Customer. Каждый отдельный клиент является отдельным экземпляром класса `Customer`. Каждый экземпляр поддерживает одни и те же свойства и методы, но значения свойств для каждого экземпляра обычно отличаются, так как каждый объект Customer является уникальным. В одном объекте Customer свойство `LastName` может иметь значение Smith; в другом объекте Customer свойство `LastName` может иметь значение "Jones".
> 
> Точно так же любая отдельная веб-страница на сайте является объектом `Page`, который является экземпляром класса `Page`. Кнопка на странице — это `Button` объект, являющийся экземпляром класса `Button` и т. д. Каждый экземпляр имеет свои собственные характеристики, но все они основаны на том, что указано в определении класса объекта.

## <a name="basic-syntax"></a>Базовый синтаксис

Ранее вы увидели простой пример создания веб-страницы ASP.NET страницы, а также способ добавления серверного кода в разметку HTML. Здесь вы узнаете об основах написания ASP.NET Server Code с помощью синтаксис Razor &#8212; , то есть правил языка программирования.

При работе с программированием (особенно если вы использовали C, C++, C#, Visual Basic или JavaScript), многие из которых вы прочитаете здесь, будут знакомы. Возможно, вам потребуется ознакомиться только с тем, как серверный код добавляется к разметке в *CSHTML* -файлах.

<a id="BM_CombiningTextMarkupAndCode"></a>
### <a name="combining-text-markup-and-code-in-code-blocks"></a>Объединение текста, разметки и кода в блоках кода

В блоках кода сервера часто требуется выводить текст или разметку (или и то, и другое) на страницу. Если блок кода сервера содержит текст, который не является кодом и, вместо этого, он должен быть отображен как есть, ASP.NET должен иметь возможность отличать этот текст от кода. Это можно сделать несколькими способами.

- Заключите текст в HTML-элемент, например `<p></p>` или `<em></em>`:   

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample12.cshtml)]

    Элемент HTML может включать текст, дополнительные HTML-элементы и выражения серверного кода. Когда ASP.NET видит открывающий HTML-тег (например, `<p>`), он отображает все, включая элемент и его содержимое, как в браузере, устраняя при этом выражения серверного кода.
- Используйте оператор `@:` или элемент `<text>`. `@:` выводит одну строку содержимого, содержащую обычный текст или несовпадающие теги HTML; элемент `<text>` включает несколько строк для вывода. Эти параметры полезны, если не нужно отображать HTML-элемент как часть выходных данных.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample13.cshtml)]

    Если требуется выводить несколько строк текста или несовпадающих HTML-тегов, можно указать в каждой строке `@:`или заключить строку в элемент `<text>`. Как и оператор `@:`, Теги`<text>` используются ASP.NET для распознавания текстового содержимого и никогда не подготавливаются к просмотру в выходных данных страницы.

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample14.cshtml)]

    Первый пример повторяет предыдущий пример, но использует одну пару тегов `<text>`, чтобы заключить текст в отрисовку. Во втором примере Теги `<text>` и `</text>` заключаются в три строки, все из которых содержат неавтономный текст и непарные теги HTML (`<br />`) вместе с серверным кодом и соответствующими тегами HTML. Опять же, можно также предшествовать каждой строке отдельно с помощью оператора `@:`. в любом случае это работает.

    > [!NOTE]
    > При выводе текста, как показано в этом &#8212; разделе, с помощью элемента html, `@:` оператор или `<text>` элемент &#8212; ASP.NET не кодирует выходные данные в формате HTML. (Как отмечалось ранее, ASP.NET кодирует выходные данные выражений серверного кода и серверных блоков кода, которым предшествуют `@`, за исключением особых случаев, указанных в этом разделе.)

### <a name="whitespace"></a>Пробел

Лишние пробелы в операторе (и вне строкового литерала) не влияют на инструкцию:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample15.cshtml)]

Разрыв строки в операторе не влияет на инструкцию, и можно заключить инструкции для удобочитаемости. Следующие инструкции равнозначны:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample16.cshtml)]

Однако нельзя заключить строку в середину строкового литерала. Следующий пример не работает:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample17.cshtml)]

Чтобы объединить длинную строку, которая является оболочкой для нескольких строк, например приведенного выше кода, существует два варианта. Можно использовать оператор объединения (`+`), который будет приведен далее в этой статье. Можно также использовать `@` символ для создания буквального строкового литерала, как было показано ранее в этой статье. Можно разбивать буквальные строковые литералы между строками:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample18.cshtml)]

### <a name="code-and-markup-comments"></a>Комментарии кода (и разметки)

Комментарии позволяют оставлять заметки для себя или для других пользователей. Они также позволяют отключить (*закомментировать*) раздел кода или разметки, которые не нужно запускать, но которые нужно оставить на странице в течение определенного времени.

Существует разный синтаксис комментариев для кода Razor и HTML-разметки. Как и в случае с любым кодом Razor, комментарии Razor обрабатываются (а затем удаляются) на сервере перед отправкой страницы в браузер. Поэтому синтаксис комментариев Razor позволяет добавлять комментарии в код (или даже в разметку), который можно увидеть при редактировании файла, но пользователи не видят даже в источнике страницы.

Для ASP.NET комментариев Razor необходимо начать комментарий с `@*` и завершить его `*@`. Комментарий может находиться в одной строке или нескольких строках:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample19.cshtml)]

Вот комментарий в блоке кода:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample20.cshtml)]

Вот тот же блок кода, в котором строка кода была закомментироваться так, чтобы не выполнялась:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample21.cshtml)]

В блоке кода в качестве альтернативы синтаксису комментариев Razor можно использовать синтаксис комментариев языка программирования, который вы используете, например C#:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample22.cshtml)]

В C#однострочных комментариях предшествуют `//`ные символы, а многострочные комментарии начинаются с `/*` и заканчиваются `*/`. (Как и в случае с C# комментариями Razor, комментарии не подготавливаются к просмотру в браузере.)

Для разметки, как вы, вероятно, знакомы, можно создать комментарий HTML:

[!code-xml[Main](introducing-razor-syntax-c/samples/sample23.xml)]

Комментарии HTML начинаются с символов `<!--` и заканчиваются `-->`. Можно использовать комментарии HTML, чтобы заключить не только текст, но и любую разметку HTML, которую можно оставить на странице, но не отображать. Этот комментарий HTML скрывает все содержимое тегов и текст, который они содержат:

[!code-html[Main](introducing-razor-syntax-c/samples/sample24.html)]

В отличие от комментариев *Razor комментарии HTML отображаются на* странице, а пользователь видит их, просматривая источник страницы.

Razor имеет ограничения на вложенные блоки C#. Дополнительные сведения см. в разделе [ C# именованные переменные и вложенные блоки создание неработающего кода](http://aspnetwebstack.codeplex.com/workitem/1914)

## <a name="variables"></a>Переменные

Переменная — это именованный объект, который используется для хранения данных. Можно назвать любые переменные, но имя должно начинаться с буквы и не может содержать пробелы или зарезервированные символы.

### <a name="variables-and-data-types"></a>Переменные и типы данных

Переменная может иметь конкретный тип данных, который указывает, какой тип данных хранится в переменной. Можно использовать строковые переменные, которые хранят строковые значения (например, &quot;Hello World&quot;), целочисленные переменные, в которых хранятся целые значения (например, 3 или 79), и переменные даты, которые хранят значения дат в различных форматах (например, 4/12/2012 или Март 2009). И существует много других типов данных, которые можно использовать.

Однако обычно для переменной не нужно указывать тип. В большинстве случаев ASP.NET может определить тип в зависимости от того, как используются данные в переменной. (Иногда необходимо указать тип; вы увидите примеры, в которых это верно.)

Переменная объявляется с помощью ключевого слова `var` (если вы не хотите указывать тип) или с помощью имени типа:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample25.cshtml)]

В следующем примере показаны некоторые типичные способы использования переменных на веб-странице:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample26.cshtml)]

Если вы объединяете предыдущие примеры на странице, вы увидите, что они отображаются в браузере:

![Razor — Img9](introducing-razor-syntax-c/_static/image9.jpg)

### <a name="converting-and-testing-data-types"></a>Преобразование и тестирование типов данных

Хотя ASP.NET обычно может определять тип данных автоматически, иногда он не может. Таким образом, может потребоваться помочь ASP.NET, выполнив явное преобразование. Даже если нет необходимости в преобразовании типов, иногда полезно проверить, какие типы данных могут быть вам доступны.

Наиболее распространенным случаем является преобразование строки в другой тип, например в Integer или Date. В следующем примере показан типичный случай, когда необходимо преобразовать строку в число.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample27.cshtml)]

Как правило, вводимые пользователем данные поступают в виде строк. Даже если вы предоставили пользователю запрос на ввод числа, и даже если они вводили цифру, при отправке введенных пользователем данных и считывании их в коде данные представлены в строковом формате. Поэтому необходимо преобразовать строку в число. В этом примере, если вы попытаетесь выполнить арифметические действия со значениями без их преобразования, выдается следующее сообщение об ошибке, так как ASP.NET не может добавить две строки:

*Невозможно неявно преобразовать тип "String" в "int".*

Чтобы преобразовать значения в целые числа, вызовите метод `AsInt`. Если преобразование выполнено успешно, можно добавить числа.

В следующей таблице перечислены некоторые распространенные методы преобразования и тестирования для переменных.

:::row:::
    :::column:::
    <strong>Метод</strong>
    :::column-end:::
    :::column:::
    <strong>Описание</strong>
    :::column-end:::
    :::column:::
    <strong>Пример</strong>
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsInt(), IsInt()`
    :::column-end:::
    :::column:::
    Преобразует строку, представляющую целое число (например, "593"), в целочисленное значение.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample28.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsBool(), IsBool()`
    :::column-end:::
    :::column:::
    Преобразует строку, такую как &quot;true&quot; или &quot;false&quot;, в логический тип.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample29.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsFloat(), IsFloat()`
    :::column-end:::
    :::column:::
    Преобразует строку, имеющую десятичное значение, например &quot;1,3&quot; или &quot;7,439&quot;, в число с плавающей запятой.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample30.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsDecimal(), IsDecimal()`
    :::column-end:::
    :::column:::
    Преобразует строку, имеющую десятичное значение, например &quot;1,3&quot; или &quot;7,439&quot;, в десятичное число. (В ASP.NET десятичное число является более точным, чем число с плавающей запятой.)
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample31.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `AsDateTime(), IsDateTime()`
    :::column-end:::
    :::column:::
    Преобразует строку, представляющую значение даты и времени, в тип `DateTime` ASP.NET.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample32.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `ToString()`
    :::column-end:::
    :::column:::
    Преобразует любой другой тип данных в строку.
    :::column-end:::
    :::column:::
        [!code-javascript[Main](introducing-razor-syntax-c/samples/sample33.js)]
    :::column-end:::
:::row-end:::

## <a name="operators"></a>Операторы

Оператор — это ключевое слово или символ, который сообщает ASP.NET, какой тип команды выполнять в выражении. C# Язык (и синтаксис Razor, основанный на нем) поддерживает множество операторов, но для начала работы нужно только определить несколько. В следующей таблице перечислены наиболее распространенные операторы.

:::row:::
    :::column:::
    <strong>Оператор</strong>
    :::column-end:::
    :::column:::
    <strong>Описание</strong>
    :::column-end:::
    :::column:::
    <strong>Примеры</strong>
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+` `-` `*` `/`
    :::column-end:::
    :::column:::
    Математические операторы, используемые в числовых выражениях.
    :::column-end:::
    :::column:::
        [!code-css[Main](introducing-razor-syntax-c/samples/sample34.css)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `=`
    :::column-end:::
    :::column:::
    Присваивание. Присваивает значение в правой части оператора объекту с левой стороны.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample35.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `==`
    :::column-end:::
    :::column:::
    Равенство. Возвращает `true`, если значения равны. (Обратите внимание на различие между оператором `=` и оператором `==`.)
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample36.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `!=`
    :::column-end:::
    :::column:::
    Неравенство. Возвращает `true`, если значения не равны.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample37.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `< > <= >=`
    :::column-end:::
    :::column:::
    "Меньше", "больше чем", "меньше или равно" и "больше или равно".
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample38.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+`
    :::column-end:::
    :::column:::
    Объединение, которое используется для соединения строк. ASP.NET знает разницу между этим оператором и оператором сложения в зависимости от типа данных выражения.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample39.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `+=` `-=`
    :::column-end:::
    :::column:::
    Операторы инкремента и декремента, которые добавляют и вычитают 1 (соответственно) из переменной.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample40.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `.`
    :::column-end:::
    :::column:::
    Оператор. Используется для различения объектов и их свойств и методов.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample41.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `()`
    :::column-end:::
    :::column:::
    Скобки. Используется для группирования выражений и передачи параметров методам.
    :::column-end:::
    :::column:::
        [!code-javascript[Main](introducing-razor-syntax-c/samples/sample42.js)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `[]`
    :::column-end:::
    :::column:::
    Квадратных. Используется для доступа к значениям в массивах или коллекциях.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample43.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `!`
    :::column-end:::
    :::column:::
    Недостаточно. Изменяет значение `true` на `false` и наоборот. Обычно используется в качестве краткого способа проверки `false` (то есть не `true`).
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample44.cs)]
    :::column-end:::
:::row-end:::

---

:::row:::
    :::column:::
        `&&` `||`
    :::column-end:::
    :::column:::
    Логические и и OR, которые используются для связи условий.
    :::column-end:::
    :::column:::
        [!code-csharp[Main](introducing-razor-syntax-c/samples/sample45.cs)]
    :::column-end:::
:::row-end:::

<a id="ID_WorkingWithFileAndFolderPaths"></a>
## <a name="working-with-file-and-folder-paths-in-code"></a>Работа с путями к файлам и папкам в коде

Вы часто работаете с путями к файлам и папкам в коде. Ниже приведен пример структуры физической папки для веб-сайта, который может отображаться на компьютере разработчика.

`C:\WebSites\MyWebSite default.cshtml datafile.txt \images Logo.jpg \styles Styles.css`

Ниже приведены некоторые основные сведения о URL-адресах и путях.

- URL-адрес начинается с доменного имени (`http://www.example.com`) или имени сервера (`http://localhost`, `http://mycomputer`).
- URL-адрес соответствует физическому пути на главном компьютере. Например, `http://myserver` может соответствовать папке *к:\вебситес\мивебсите* на сервере.
- Виртуальный путь является краткой для представления путей в коде без указания полного пути. Он включает часть URL-адреса, следующую за именем домена или сервера. При использовании виртуальных путей можно переместить код в другой домен или сервер без необходимости обновлять пути.

Ниже приведен пример, который поможет понять различия:

| Полный URL-адрес | `http://mycompanyserver/humanresources/CompanyPolicy.htm` |
| --- | --- |
| Имя сервера | *микомпанисервер* |
| Виртуальный путь | */humanresources/CompanyPolicy.htm* |
| Физический путь | *к:\мивебситес\хуманресаурцес\компаниполици.хтм* |

Виртуальный корень имеет значение/, как и корневой каталог диска C: \. (Пути к виртуальным папкам всегда используют косую черту.) Виртуальный путь к папке не должен совпадать с именем физической папки. Это может быть псевдоним. (На рабочих серверах виртуальный путь редко соответствует точному физическому пути.)

При работе с файлами и папками в коде иногда требуется ссылка на физический путь и иногда виртуальный путь в зависимости от объектов, с которыми вы работаете. ASP.NET предоставляет следующие средства для работы с путями к файлам и папкам в коде: метод `Server.MapPath`, оператор `~` и метод `Href`.

### <a name="converting-virtual-to-physical-paths-the-servermappath-method"></a>Преобразование виртуальных в физические пути: метод Server. MapPath

Метод `Server.MapPath` Преобразует виртуальный путь (например, */дефаулт.кштмл*) в абсолютный физический путь (например, *к:\вебситес\мивебситефолдер\дефаулт.кштмл*). Этот метод используется в любой момент, когда требуется полный физический путь. Типичный пример — при чтении или записи текстового файла или файла изображения на веб-сервере.

Как правило, абсолютный физический путь к сайту на сервере узла размещения не известен, поэтому этот метод может преобразовать известный путь (виртуальный путь) в соответствующий путь на сервере. Виртуальный путь передается в файл или папку в метод и возвращает физический путь:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample46.cshtml)]

### <a name="referencing-the-virtual-root-the--operator-and-href-method"></a>Ссылка на виртуальный корень: оператор ~ и метод href

В файле *. cshtml* или *. vbhtml* можно ссылаться на виртуальный корневой путь с помощью оператора `~`. Это очень удобно, так как можно перемещать страницы на сайте и любые ссылки, содержащиеся на других страницах, не будут разорваны. Это также удобно, если вы перемещаете веб-сайт в другое место. Ниже приведены некоторые примеры:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample47.cshtml)]

Если веб-сайт `http://myserver/myapp`, то, как ASP.NET будет обрабатывать эти пути при выполнении страницы:

- `myImagesFolder`: `http://myserver/myapp/images`
- `myStyleSheet` : `http://myserver/myapp/styles/Stylesheet.css`

(В действительности эти пути не отображаются как значения переменной, но ASP.NET будет рассматривать пути так, как будто они были.)

Оператор `~` можно использовать как в коде сервера (как описано выше), так и в разметке следующим образом:

[!code-html[Main](introducing-razor-syntax-c/samples/sample48.html)]

В разметке оператор `~` используется для создания путей к ресурсам, таким как файлы изображений, другие веб-страницы и файлы CSS. При запуске страницы ASP.NET просматривает страницу (как код, так и разметку) и разрешает все `~` ссылки на соответствующий путь.

## <a name="conditional-logic-and-loops"></a>Условная логика и циклы

ASP.NET Server Code позволяет выполнять задачи на основе условий и писать код, который повторяет инструкции определенное число раз (то есть код, выполняющий цикл).

### <a name="testing-conditions"></a>Условия тестирования

Чтобы проверить простое условие, используйте инструкцию `if`, которая возвращает значение true или false в зависимости от указанного теста:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample49.cshtml)]

Ключевое слово `if` запускает блок. Фактический тест (условие) задается в круглых скобках и возвращает значение true или false. Инструкции, выполняемые, если тест имеет значение true, заключены в фигурные скобки. Инструкция `if` может включать блок `else`, указывающий, какие операторы выполняются, если условие ложно:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample50.cshtml)]

Можно добавить несколько условий с помощью блока `else if`.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample51.cshtml)]

В этом примере, если первое условие в блоке if не равно true, проверяется условие `else if`. Если это условие выполнено, выполняются инструкции в блоке `else if`. Если ни одно из условий не соблюдается, выполняются инструкции в блоке `else`. Можно добавить любое количество else if, а затем закрыть блок `else` как &quot;все остальное&quot; условие.

Чтобы проверить большое количество условий, используйте блок `switch`:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample52.cshtml)]

Проверяемое значение находится в круглых скобках (в примере это переменная `weekday`). Каждый отдельный тест использует инструкцию `case`, которая заканчивается двоеточием (:). Если значение инструкции `case` соответствует тестовому значению, выполняется код в этом блоке Case. Каждый оператор Case закрывается с помощью оператора `break`. (Если вы забыли включить break в каждом блоке `case`, будет также выполняться код из следующей `case`.) Блок `switch` часто содержит оператор `default`, как в последнем случае &quot;все остальное&quot;, которое выполняется, если ни одно из других случаев не выполняется.

Результат двух последних условных блоков, отображаемых в браузере:

![Razor — Img10](introducing-razor-syntax-c/_static/image10.jpg)

### <a name="looping-code"></a>Циклическое выполнение кода

Часто приходится многократно выполнять одни и те же инструкции. Для этого нужно выполнить цикл. Например, часто выполняются одни и те же инструкции для каждого элемента в коллекции данных. Если точно известно, сколько раз вы хотите пройти цикл, можно использовать цикл `for`. Этот тип цикла особенно полезен для подсчета или пересчета:

[!code-html[Main](introducing-razor-syntax-c/samples/sample53.html)]

Цикл начинается с ключевого слова `for`, за которым следуют три оператора в круглых скобках, каждый из которых завершается точкой с запятой.

- В круглых скобках первый оператор (`var i=10;`) создает счетчик и инициализирует его до 10. Вам не нужно присвоить значение счетчику, `i` &#8212; можно использовать любую переменную. При выполнении цикла `for` автоматически увеличивается значение счетчика.
- Вторая инструкция (`i < 21;`) задает условие того, насколько вы хотите подсчитать. В этом случае вы хотите, чтобы он не превышал значение 20 (то есть, пока значение счетчика меньше 21).
- Третья инструкция (`i++`) использует оператор инкремента, который просто указывает, что счетчик должен иметь 1 к нему каждый раз при выполнении цикла.

Внутри фигурных скобок находится код, который будет выполняться для каждой итерации цикла. Разметка создает новый абзац (`<p>` элемент) каждый раз и добавляет строку к выходу, отображая значение `i` (счетчик). При запуске этой страницы в примере создаются 11 строк, в которых отображаются выходные данные, и текст в каждой строке, указывающей на номер товара.

![Razor — Img11](introducing-razor-syntax-c/_static/image11.jpg)

При работе с коллекцией или массивом часто используется цикл `foreach`. Коллекция — это группа схожих объектов, а цикл `foreach` позволяет выполнять задачу для каждого элемента в коллекции. Этот тип цикла удобен для коллекций, так как в отличие от цикла `for` не нужно увеличивать счетчик или устанавливать ограничение. Вместо этого код цикла `foreach` просто проходит по коллекции, пока не завершится.

Например, следующий код возвращает элементы коллекции `Request.ServerVariables`, которая представляет собой объект, содержащий сведения о веб-сервере. В нем используется цикл `foreac` h для вывода имени каждого элемента путем создания нового элемента `<li>` в маркированном списке HTML.

[!code-html[Main](introducing-razor-syntax-c/samples/sample54.html)]

За ключевым словом `foreach` следуют круглые скобки, в которых объявляется переменная, представляющая один элемент в коллекции (в примере — `var item`), за которой следует ключевое слово `in`, а затем Коллекция, которую необходимо прокручивать. В теле цикла `foreach` можно получить доступ к текущему элементу с помощью объявленной ранее переменной.

![Razor — Img12](introducing-razor-syntax-c/_static/image12.jpg)

Чтобы создать более общий цикл общего назначения, используйте оператор `while`:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample55.cshtml)]

Цикл `while` начинается с ключевого слова `while`, за которым следуют круглые скобки, в которых указывается, как долго будет продолжаться цикл (в случае, если `countNum` меньше 50), а затем для повторения блока. Циклы обычно увеличивают (добавляются в) или уменьшают (вычитаются из) переменную или объект, используемый для подсчета. В этом примере оператор `+=` добавляет 1 к `countNum` при каждом запуске цикла. (Чтобы уменьшить переменную в цикле, который подсчитывается вниз, используйте оператор декремента `-=`).

## <a name="objects-and-collections"></a>Объекты и коллекции

Практически все на веб-сайте ASP.NET — это объект, включая саму веб-страницу. В этом разделе обсуждаются некоторые важные объекты, с которыми часто приходится работать в коде.

### <a name="page-objects"></a>Объекты Page

Самым основным объектом в ASP.NET является страница. Вы можете обращаться к свойствам объекта Page напрямую, не используя соответствующий объект. Следующий код получает путь к файлу страницы, используя объект `Request` страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample56.cshtml)]

Чтобы ясно, что вы ссылаетесь на свойства и методы объекта текущей страницы, при необходимости можно использовать ключевое слово `this` для представления объекта страницы в коде. Ниже приведен предыдущий пример кода с `this` добавленным для представления страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample57.cshtml)]

Вы можете использовать свойства объекта `Page` для получения большого объема информации, например:

- `Request`. Как уже было показано, это коллекция сведений о текущем запросе, включая тип браузера, который сделал запрос, URL-адрес страницы, удостоверение пользователя и т. д.
- `Response`. Это коллекция сведений о ответе (странице), которая будет отправлена в браузер после завершения выполнения кода сервера. Например, это свойство можно использовать для записи сведений в ответ. 

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample58.cshtml)]

<a id="ID_CollectionsAndObjects"></a>
### <a name="collection-objects-arrays-and-dictionaries"></a>Объекты коллекции (массивы и словари)

*Коллекция* — это группа объектов одного типа, например коллекция объектов `Customer` из базы данных. ASP.NET содержит множество встроенных коллекций, таких как коллекция `Request.Files`.

Вы часто работаете с данными в коллекциях. Два общих типа коллекций — это *массив* и *словарь*. Массив полезен, если нужно сохранить коллекцию схожих элементов, но не нужно создавать отдельную переменную для хранения каждого элемента:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample59.cshtml)]

При использовании массивов вы объявляете конкретный тип данных, например `string`, `int`или `DateTime`. Чтобы указать, что переменная может содержать массив, добавьте в объявление скобки (например, `string[]` или `int[]`). Доступ к элементам массива можно получить с помощью их позиции (индекса) или с помощью инструкции `foreach`. Индексы массива отсчитываются от &#8212; нуля, т. е. первый элемент находится в позиции 0, второй элемент — в позиции 1 и т. д.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample60.cshtml)]

Чтобы определить количество элементов в массиве, можно получить свойство `Length`. Чтобы получить позицию определенного элемента в массиве (для поиска в массиве), используйте метод `Array.IndexOf`. Можно также выполнять такие действия, как обратный порядок содержимого массива (метод `Array.Reverse`) или сортировать содержимое (метод `Array.Sort`).

Выходные данные кода массива строк, отображаемого в браузере:

![Razor — Img13](introducing-razor-syntax-c/_static/image13.jpg)

Словарь — это коллекция пар "ключ-значение", где вы предоставляете ключ (или имя) для установки или получения соответствующего значения:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample61.cshtml)]

Чтобы создать словарь, используйте ключевое слово `new`, чтобы указать, что вы создаете новый объект Dictionary. Можно назначить словарь переменной с помощью ключевого слова `var`. Типы данных элементов в словаре указываются с помощью угловых скобок (`< >`). В конце объявления необходимо добавить пару круглых скобок, поскольку это фактически метод, создающий новый словарь.

Чтобы добавить элементы в словарь, можно вызвать метод `Add` переменной Dictionary (`myScores` в этом случае), а затем указать ключ и значение. Кроме того, можно использовать квадратные скобки для обозначения ключа и выполнить простое назначение, как показано в следующем примере:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample62.cs)]

Чтобы получить значение из словаря, необходимо указать ключ в квадратных скобках:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample63.cs)]

## <a name="calling-methods-with-parameters"></a>Вызов методов с параметрами

По мере прочтения в этой статье объекты, с которыми Вы запрограммированы, могут иметь методы. Например, объект `Database` может иметь метод `Database.Connect`. Многие методы также имеют один или несколько параметров. *Параметр* — это значение, передаваемое в метод, чтобы позволить методу завершить свою задачу. Например, рассмотрим объявление метода `Request.MapPath`, который принимает три параметра:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample64.cs)]

(Строка была заключена в оболочку, чтобы сделать ее более удобочитаемой. Помните, что разрывы строк можно поместить почти в любое место, за исключением строк, заключенных в кавычки.)

Этот метод возвращает физический путь на сервере, соответствующий указанному виртуальному пути. Три параметра для метода: `virtualPath`, `baseVirtualDir`и `allowCrossAppMapping`. (Обратите внимание, что в объявлении указаны параметры с типами данных, которые они будут принимать.) При вызове этого метода необходимо указать значения для всех трех параметров.

Синтаксис Razor предоставляет два варианта передачи параметров в метод: *позиционированные параметры* и *именованные параметры*. Чтобы вызвать метод с помощью методов с параметрами, необходимо передать параметры в определенном порядке, указанном в объявлении метода. (Обычно этот порядок вы узнаете, читая документацию по методу.) Необходимо соблюдать порядок следования, и при необходимости нельзя пропустить какие-либо &#8212; параметры, передавая пустую строку (`""`) или `null` для параметра, для которого у вас нет значения.

В следующем примере предполагается, что на веб-сайте есть папка с именем *Scripts* . Код вызывает метод `Request.MapPath` и передает значения для трех параметров в правильном порядке. Затем отображается полученный сопоставленный путь.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample65.cshtml)]

Если у метода много параметров, можно сделать код более читаемым, используя именованные параметры. Чтобы вызвать метод с использованием именованных параметров, укажите имя параметра, за которым следует двоеточие (:), а затем значение. Преимущество именованных параметров заключается в том, что их можно передавать в любом порядке. (Недостаток заключается в том, что вызов метода не является компактным.)

В следующем примере вызывается тот же метод, что и выше, но для предоставления значений используются именованные параметры:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample66.cshtml)]

Как видите, параметры передаются в другом порядке. Однако если запустить предыдущий пример и этот пример, они будут возвращать одно и то же значение.

<a id="ID_HandlingErrors"></a>
## <a name="handling-errors"></a>Обработка ошибок

### <a name="try-catch-statements"></a>Операторы Try-Catch

Часто в коде есть операторы, которые могут завершиться ошибкой по причинам, находящимся за пределами элемента управления. Пример:

- Если код пытается создать файл или получить к нему доступ, могут возникать все виды ошибок. Возможно, нужный файл не существует, он может быть заблокирован, код может не иметь разрешений и т. д.
- Аналогично, если код пытается обновить записи в базе данных, могут возникнуть проблемы с разрешениями, подключение к базе данных может быть удалено, данные для сохранения могут быть недействительными и т. д.

В терминах программирования эти ситуации называются *исключениями*. Если код сталкивается с исключением, он создает (выдает) сообщение об ошибке, которое лучше подойдет для пользователей:

![Razor — Img14](introducing-razor-syntax-c/_static/image14.jpg)

В ситуациях, когда код может столкнуться с исключениями и во избежание сообщений об ошибках этого типа, можно использовать инструкции `try/catch`. В инструкции `try` выполняется проверка кода. В одной или нескольких инструкциях `catch` можно найти определенные ошибки (определенные типы исключений), которые могли произойти. Можно включить столько `catch` инструкций, сколько необходимо для поиска ожидаемых ошибок.

> [!NOTE]
> Рекомендуется избегать использования метода `Response.Redirect` в инструкциях `try/catch`, так как это может вызвать исключение на странице.

В следующем примере показана страница, которая создает текстовый файл при первом запросе, а затем отображает кнопку, которая позволяет пользователю открыть файл. В этом примере преднамеренно используется неправильное имя файла, что вызовет исключение. Код включает `catch` операторы для двух возможных исключений: `FileNotFoundException`, которое происходит, если имя файла является недопустимым, и `DirectoryNotFoundException`, что происходит, если ASP.NET даже не может найти папку. (Чтобы увидеть, как она работает, когда все работает правильно, можно убрать комментарий к оператору в этом примере.)

Если код не обработал исключение, появится страница ошибки, как на предыдущем снимке экрана. Однако раздел `try/catch` помогает предотвратить возникновение ошибок такого типа.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample67.cshtml)]

## <a name="additional-resources"></a>Дополнительные ресурсы

**Программирование с помощью Visual Basic**

[Приложение. Visual Basic язык и синтаксис](https://go.microsoft.com/fwlink/?LinkId=202908)

**Справочная документация**

[ASP.NET](https://msdn.microsoft.com/library/ee532866.aspx)

[C#Языке](https://msdn.microsoft.com/library/kx37x362.aspx)
