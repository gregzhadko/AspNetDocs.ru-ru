---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Знакомство с веб-страниц ASP.NET — ввод данных базы данных с помощью форм | Документация Майкрософт
author: Rick-Anderson
description: Этом руководстве показано, как создать форму ввода, а затем введите данные, которые вы получаете из формы в таблицу базы данных при использовании веб-страниц ASP.NET (...)
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: d76f607f1d5e779d43ee15d8f2d697e7b0f147ae
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59380123"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="b1874-103">Знакомство с веб-страниц ASP.NET — ввод данных базы данных с помощью форм</span><span class="sxs-lookup"><span data-stu-id="b1874-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="b1874-104">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="b1874-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="b1874-105">Этом руководстве показано, как создать форму ввода, а затем введите данные, которые вы получаете из формы в таблицу базы данных при использовании веб-страниц ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="b1874-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="b1874-106">Предполагается, вы выполнили рядов через [основы из HTML-формы ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="b1874-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="b1874-107">Вы узнаете, как:</span><span class="sxs-lookup"><span data-stu-id="b1874-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="b1874-108">Дополнительные сведения о способах обработки форм ввода.</span><span class="sxs-lookup"><span data-stu-id="b1874-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="b1874-109">Инструкции по добавлению данных (insert) в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="b1874-110">Как убедиться, что пользователи ввели обязательное значение в форме (как для проверки ввода пользователя).</span><span class="sxs-lookup"><span data-stu-id="b1874-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="b1874-111">Способ отображения ошибок проверки.</span><span class="sxs-lookup"><span data-stu-id="b1874-111">How to display validation errors.</span></span>
> - <span data-ttu-id="b1874-112">Как перейти на другую страницу с текущей страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="b1874-113">Функции и технологии:</span><span class="sxs-lookup"><span data-stu-id="b1874-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="b1874-114">метод `Database.Execute` ;</span><span class="sxs-lookup"><span data-stu-id="b1874-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="b1874-115">SQL `Insert Into` инструкции</span><span class="sxs-lookup"><span data-stu-id="b1874-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="b1874-116">`Validation` Вспомогательный.</span><span class="sxs-lookup"><span data-stu-id="b1874-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="b1874-117">метод `Response.Redirect` ;</span><span class="sxs-lookup"><span data-stu-id="b1874-117">The `Response.Redirect` method.</span></span>


## <a name="what-youll-build"></a><span data-ttu-id="b1874-118">Что вы создадите</span><span class="sxs-lookup"><span data-stu-id="b1874-118">What You'll Build</span></span>

<span data-ttu-id="b1874-119">В этом руководстве ранее, показано, как создать базу данных, введенные данные базы данных путем изменения базы данных непосредственно в WebMatrix, работа **базы данных** рабочей области.</span><span class="sxs-lookup"><span data-stu-id="b1874-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="b1874-120">В большинстве приложений, не является удобным способом поместить данные в базу данных, однако.</span><span class="sxs-lookup"><span data-stu-id="b1874-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="b1874-121">Поэтому в этом руководстве вы создадите веб-интерфейс, который позволяет вам или всем пользователям вводить данные и сохраните его в базу данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="b1874-122">Вы создадите страницу, где можно ввести новых фильмов.</span><span class="sxs-lookup"><span data-stu-id="b1874-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="b1874-123">Эта страница будет содержать форму ввода с полями (текстовые поля), где можно ввести название фильма, Жанр и год.</span><span class="sxs-lookup"><span data-stu-id="b1874-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="b1874-124">Эта страница будет выглядеть страница:</span><span class="sxs-lookup"><span data-stu-id="b1874-124">The page will look like this page:</span></span>

![Страница «Добавление фильма» в браузере](entering-data/_static/image1.png)

<span data-ttu-id="b1874-126">Текстовые поля будут HTML `<input>` эту разметку, такие как элементы, которые будут выглядеть:</span><span class="sxs-lookup"><span data-stu-id="b1874-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="b1874-127">Создание формы основные операции</span><span class="sxs-lookup"><span data-stu-id="b1874-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="b1874-128">Создание страницы с именем *AddMovie.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="b1874-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="b1874-129">Замените в файле, используя следующую разметку.</span><span class="sxs-lookup"><span data-stu-id="b1874-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="b1874-130">Перезаписать все; Вы добавите блок кода в верхней чуть ниже.</span><span class="sxs-lookup"><span data-stu-id="b1874-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="b1874-131">Этот пример показывает типичный HTML для создания формы.</span><span class="sxs-lookup"><span data-stu-id="b1874-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="b1874-132">Она использует `<input>` элементов для текстовых полей и кнопки отправки.</span><span class="sxs-lookup"><span data-stu-id="b1874-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="b1874-133">Заголовки для текстовых полей создаются с помощью стандарта `<label>` элементов.</span><span class="sxs-lookup"><span data-stu-id="b1874-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="b1874-134">`<fieldset>` И `<legend>` элементы обнести неплохо формы.</span><span class="sxs-lookup"><span data-stu-id="b1874-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="b1874-135">Обратите внимание, что на этой странице `<form>` элемент использует `post` как значение для `method` атрибута.</span><span class="sxs-lookup"><span data-stu-id="b1874-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="b1874-136">В предыдущем руководстве вы создали форму, которая используется `get` метод.</span><span class="sxs-lookup"><span data-stu-id="b1874-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="b1874-137">Это было правильным, так как несмотря на то, что значения на сервер отправить форму, запрос, не вносить изменения.</span><span class="sxs-lookup"><span data-stu-id="b1874-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="b1874-138">Все, что и было извлекать данные по-разному.</span><span class="sxs-lookup"><span data-stu-id="b1874-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="b1874-139">Однако в этой странице вы *будет* внести изменения, вы собираетесь добавить новые записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="b1874-140">Таким образом, следует использовать эту форму `post` метод.</span><span class="sxs-lookup"><span data-stu-id="b1874-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="b1874-141">(Дополнительные сведения о различиях между `GET` и `POST` операций, см. в разделе[GET, POST и HTTP Verb безопасности](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) боковой панели в предыдущем руководстве.)</span><span class="sxs-lookup"><span data-stu-id="b1874-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="b1874-142">Обратите внимание, что каждое текстовое поле имеет `name` элемент (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="b1874-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="b1874-143">Как было показано в предыдущем учебном курсе, эти имена важны, так как необходимо иметь эти имена, чтобы позже получить входные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="b1874-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="b1874-144">Можно использовать любые имена.</span><span class="sxs-lookup"><span data-stu-id="b1874-144">You can use any names.</span></span> <span data-ttu-id="b1874-145">Рекомендуется использовать осмысленные имена, которые помогут вам помните, какие данные, которыми вы работаете.</span><span class="sxs-lookup"><span data-stu-id="b1874-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="b1874-146">`value` Каждого элемента `<input>` элемент содержит немного кода Razor (например, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="b1874-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="b1874-147">Вы узнали версию этот прием в предыдущем руководстве, чтобы сохранить значение, введенное в текстовое поле (если таковые имеются), после отправки формы.</span><span class="sxs-lookup"><span data-stu-id="b1874-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="b1874-148">Получение значения формы</span><span class="sxs-lookup"><span data-stu-id="b1874-148">Getting the Form Values</span></span>

<span data-ttu-id="b1874-149">Добавьте код, обрабатывающий форму.</span><span class="sxs-lookup"><span data-stu-id="b1874-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="b1874-150">В структуре потребуется следующее:</span><span class="sxs-lookup"><span data-stu-id="b1874-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="b1874-151">Проверьте, является ли страница передается (отправки).</span><span class="sxs-lookup"><span data-stu-id="b1874-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="b1874-152">Требуется код для запуска только в том случае, когда пользователи щелкнут кнопки, не в том случае, при первом запуске страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="b1874-153">Получение значения, введенные пользователем в текстовых полях.</span><span class="sxs-lookup"><span data-stu-id="b1874-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="b1874-154">В этом случае потому, что использование формы `POST` команды, вы получаете значения формы из `Request.Form` коллекции.</span><span class="sxs-lookup"><span data-stu-id="b1874-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="b1874-155">Вставить значения в виде новой записи в *фильмы* таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="b1874-156">В верхней части файла добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="b1874-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="b1874-157">Первые несколько строк создайте переменные (`title`, `genre`, и `year`) для хранения значений из текстовых полей.</span><span class="sxs-lookup"><span data-stu-id="b1874-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="b1874-158">Строки `if(IsPost)` гарантирует, что переменные заданы *только* когда пользователь нажимает кнопку **добавьте фильма** кнопка — то есть, когда после отправки формы.</span><span class="sxs-lookup"><span data-stu-id="b1874-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="b1874-159">Как было показано в предыдущем руководстве, вы получаете значение текстового поля с помощью выражения, подобного `Request.Form["name"]`, где *имя* имя `<input>` элемент.</span><span class="sxs-lookup"><span data-stu-id="b1874-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="b1874-160">Имена переменных (`title`, `genre`, и `year`) являются произвольными.</span><span class="sxs-lookup"><span data-stu-id="b1874-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="b1874-161">Нравятся имена, которые назначены `<input>` элементов, их можно вызывать любое название.</span><span class="sxs-lookup"><span data-stu-id="b1874-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="b1874-162">(Имена переменных не должны совпадать атрибуты name `<input>` элементов в форме.) Но, как с помощью `<input>` элементов не следует использовать имена переменных, отражающие данные, которые они содержат.</span><span class="sxs-lookup"><span data-stu-id="b1874-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="b1874-163">При написании кода, согласованные имена упрощают помнить какие данные, которыми вы работаете.</span><span class="sxs-lookup"><span data-stu-id="b1874-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="b1874-164">Добавление данных в базу данных</span><span class="sxs-lookup"><span data-stu-id="b1874-164">Adding Data to the Database</span></span>

<span data-ttu-id="b1874-165">В коде блока вы только что добавленную, просто *внутри* закрывающей фигурной скобкой ( `}` ) из `if` блокировать (не только внутри блока кода), добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="b1874-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="b1874-166">Этот пример похож на код, который использовался в предыдущем руководстве, для получения и отображения данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="b1874-167">Строку, начинающуюся с `db =` откроется, базе данных, как и раньше и следующая строка определяет инструкцию SQL, еще раз как мы делали раньше.</span><span class="sxs-lookup"><span data-stu-id="b1874-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="b1874-168">Тем не менее, это время он определяет SQL `Insert Into` инструкции.</span><span class="sxs-lookup"><span data-stu-id="b1874-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="b1874-169">В следующем примере показано общий синтаксис `Insert Into` инструкции:</span><span class="sxs-lookup"><span data-stu-id="b1874-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="b1874-170">Другими словами укажите таблицы для вставки в, затем список столбцов для вставки в, а затем список значений для вставки.</span><span class="sxs-lookup"><span data-stu-id="b1874-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="b1874-171">(Как было отмечено ранее, SQL выполняется без учета регистра, но некоторые люди реализуйте весь потенциал ключевые слова, чтобы сделать более удобным для чтения, команде).</span><span class="sxs-lookup"><span data-stu-id="b1874-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="b1874-172">Столбцы, на которые осуществляется вставка в уже перечисляются в команде — `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="b1874-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="b1874-173">Особый интерес представляет как получить значения из текстовых полей в `VALUES` частью команды.</span><span class="sxs-lookup"><span data-stu-id="b1874-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="b1874-174">Вместо фактических значений, пользователь видит `@0`, `@1`, и `@2`, само собой, которые являются заполнителями.</span><span class="sxs-lookup"><span data-stu-id="b1874-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="b1874-175">При запуске команды (на `db.Execute` строки), вы передадите эти значения, которые вы получили текстовые поля.</span><span class="sxs-lookup"><span data-stu-id="b1874-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

**<span data-ttu-id="b1874-176">Важно!</span><span class="sxs-lookup"><span data-stu-id="b1874-176">Important!</span></span>** <span data-ttu-id="b1874-177">Помните, что единственным способом, никогда не следует включать данные, введенные в интерактивном режиме пользователем в инструкцию SQL использовать заполнители, как показано ниже (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="b1874-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="b1874-178">Если вы объединяйте введенные пользователем данные в одну инструкцию SQL, открытии самостоятельно к атакам путем внедрения кода SQL, как описано в [основы форм в ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (предыдущем учебном курсе).</span><span class="sxs-lookup"><span data-stu-id="b1874-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="b1874-179">По-прежнему внутри `if` block, добавьте следующую строку после `db.Execute` строки:</span><span class="sxs-lookup"><span data-stu-id="b1874-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="b1874-180">После вставки в базу данных новый фильм, эта строка к блоку вы (перенаправление) *фильмы* странице, чтобы можно было видеть фильма, только что ввели.</span><span class="sxs-lookup"><span data-stu-id="b1874-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="b1874-181">`~` Оператор означает «root веб-сайта».</span><span class="sxs-lookup"><span data-stu-id="b1874-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="b1874-182">( `~` Оператор обычно работает только на страницах ASP.NET, не в формате HTML.)</span><span class="sxs-lookup"><span data-stu-id="b1874-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="b1874-183">Законченный блок кода выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b1874-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="b1874-184">Тестирование команды вставки (пока)</span><span class="sxs-lookup"><span data-stu-id="b1874-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="b1874-185">Вы еще не завершили работу, но сейчас самое время для тестирования.</span><span class="sxs-lookup"><span data-stu-id="b1874-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="b1874-186">В представлении в виде дерева файлов в WebMatrix, щелкните правой кнопкой мыши *AddMovie.cshtml* странице и нажмите кнопку **запустить в браузере**.</span><span class="sxs-lookup"><span data-stu-id="b1874-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Страница «Добавление фильма» в браузере](entering-data/_static/image2.png)

<span data-ttu-id="b1874-188">(Если вы получите на другую страницу в браузере, убедитесь, что URL-адрес является `http://localhost:nnnnn/AddMovie`), где *nnnnn* — номер порта, который вы используете.)</span><span class="sxs-lookup"><span data-stu-id="b1874-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="b1874-189">Вы получили страницу ошибки?</span><span class="sxs-lookup"><span data-stu-id="b1874-189">Did you get an error page?</span></span> <span data-ttu-id="b1874-190">Если Да, следует внимательно прочитать и убедитесь, что код выглядит точно так что было указано ранее.</span><span class="sxs-lookup"><span data-stu-id="b1874-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="b1874-191">Введите фильм в форме &mdash; к примеру, используйте «Гражданин Кейн», «Драма» и «1941».</span><span class="sxs-lookup"><span data-stu-id="b1874-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="b1874-192">(И т. д.) Нажмите кнопку **добавьте фильма**.</span><span class="sxs-lookup"><span data-stu-id="b1874-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="b1874-193">Если все работает правильно, вы будете перенаправлены *фильмы* страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="b1874-194">Убедитесь, что указан новый фильм.</span><span class="sxs-lookup"><span data-stu-id="b1874-194">Make sure that your new movie is listed.</span></span>

![Страница фильмы, показывающий вновь добавлена фильма](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="b1874-196">Проверка вводимых пользователем данных</span><span class="sxs-lookup"><span data-stu-id="b1874-196">Validating User Input</span></span>

<span data-ttu-id="b1874-197">Вернитесь к *AddMovie* странице, или запустите ее повторно.</span><span class="sxs-lookup"><span data-stu-id="b1874-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="b1874-198">Введите другой фильма, но на этот раз, введите только заголовок &mdash; к примеру, введите «"Войти в дождь».</span><span class="sxs-lookup"><span data-stu-id="b1874-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="b1874-199">Нажмите кнопку **добавьте фильма**.</span><span class="sxs-lookup"><span data-stu-id="b1874-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="b1874-200">Вы будете перенаправлены *фильмы* странице еще раз.</span><span class="sxs-lookup"><span data-stu-id="b1874-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="b1874-201">Можно найти этот новый фильм, но он не полон.</span><span class="sxs-lookup"><span data-stu-id="b1874-201">You can find the new movie, but it's incomplete.</span></span>

![Фильмы страницы отображение новый фильм, отсутствуют некоторые значения](entering-data/_static/image4.png)

<span data-ttu-id="b1874-203">При создании *фильмы* таблицы, вы явным образом сказали, что ни одно из полей может иметь значение null.</span><span class="sxs-lookup"><span data-stu-id="b1874-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="b1874-204">Здесь имеется форма ввода новых фильмов, и вы тратите поля пустым.</span><span class="sxs-lookup"><span data-stu-id="b1874-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="b1874-205">Это является ошибкой.</span><span class="sxs-lookup"><span data-stu-id="b1874-205">That's an error.</span></span>

<span data-ttu-id="b1874-206">В этом случае не вызывать базы данных фактически (или *throw*) произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="b1874-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="b1874-207">Вы не указали жанр или года, поэтому код в *AddMovie* страницы считать эти значения так называемые *пустые строки*.</span><span class="sxs-lookup"><span data-stu-id="b1874-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="b1874-208">Когда SQL `Insert Into` выполнялась команда, Жанр и год поля не содержат полезные данные в них, но они не были null.</span><span class="sxs-lookup"><span data-stu-id="b1874-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="b1874-209">Очевидно, что вы не хотите разрешить пользователям вводить сведения о фильме половину пустым в базу данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="b1874-210">Решение заключается в том, чтобы проверить введенные пользователем данные.</span><span class="sxs-lookup"><span data-stu-id="b1874-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="b1874-211">Изначально проверка будет просто убедитесь, что пользователь ввел значение для всех полей (таким образом, что ни один из них содержит пустую строку).</span><span class="sxs-lookup"><span data-stu-id="b1874-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> **<span data-ttu-id="b1874-212">NULL и пустые строки</span><span class="sxs-lookup"><span data-stu-id="b1874-212">Null and Empty Strings</span></span>**
> 
> <span data-ttu-id="b1874-213">В программировании, нет разницы между разных понятия «нет значения».</span><span class="sxs-lookup"><span data-stu-id="b1874-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="b1874-214">В общем случае имеет значение *null* если он никогда не были заданы или инициализироваться.</span><span class="sxs-lookup"><span data-stu-id="b1874-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="b1874-215">Напротив, может быть присвоено переменной, которая ожидает символьных данных (строк) *пустая строка*.</span><span class="sxs-lookup"><span data-stu-id="b1874-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="b1874-216">В этом случае значение не равно null; она просто была задана явным образом в строку символов, длина которого равна нулю.</span><span class="sxs-lookup"><span data-stu-id="b1874-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="b1874-217">Следующие два оператора показаны различия:</span><span class="sxs-lookup"><span data-stu-id="b1874-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="b1874-218">Это немного сложнее, чем, но важным моментом является то, что `null` представляет собой неопределенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="b1874-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="b1874-219">И это важно понимать точно когда значение равно null, и когда это просто пустая строка.</span><span class="sxs-lookup"><span data-stu-id="b1874-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="b1874-220">В коде для *AddMovie* будет включать значения из текстовых полей с помощью `Request.Form["title"]` и т. д.</span><span class="sxs-lookup"><span data-stu-id="b1874-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="b1874-221">При первом запуске страницы (до нажатия кнопки), значение `Request.Form["title"]` имеет значение null.</span><span class="sxs-lookup"><span data-stu-id="b1874-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="b1874-222">Но при отправке формы, `Request.Form["title"]` получает значение `title` текстовое поле.</span><span class="sxs-lookup"><span data-stu-id="b1874-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="b1874-223">Это не очевидно, но в пустом текстовом поле не имеет значение null; он просто содержит пустую строку.</span><span class="sxs-lookup"><span data-stu-id="b1874-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="b1874-224">Поэтому при выполнении кода в ответ на кнопки щелкните, `Request.Form["title"]` содержит пустую строку в нем.</span><span class="sxs-lookup"><span data-stu-id="b1874-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="b1874-225">Почему важно это различие?</span><span class="sxs-lookup"><span data-stu-id="b1874-225">Why is this distinction important?</span></span> <span data-ttu-id="b1874-226">При создании *фильмы* таблицы, вы явным образом сказали, что ни одно из полей может иметь значение null.</span><span class="sxs-lookup"><span data-stu-id="b1874-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="b1874-227">Но здесь имеется форма ввода новых фильмов, и вы уходите поля пустым.</span><span class="sxs-lookup"><span data-stu-id="b1874-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="b1874-228">Можно ожидать достаточно базе возникнут претензии при попытке сохранить новых фильмов, которые не имеют значения для жанра или год.</span><span class="sxs-lookup"><span data-stu-id="b1874-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="b1874-229">Но, являющийся точкой &mdash; даже если эти текстовые поля оставить пустым, значения не null; они пустые строки.</span><span class="sxs-lookup"><span data-stu-id="b1874-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="b1874-230">Таким образом, вы сможете сохранить новых фильмов в базе данных с этими столбцами пустой &mdash; , но не null!</span><span class="sxs-lookup"><span data-stu-id="b1874-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="b1874-231">значения типа &mdash;.</span><span class="sxs-lookup"><span data-stu-id="b1874-231">&mdash; values.</span></span> <span data-ttu-id="b1874-232">Таким образом необходимо убедиться, что пользователи не отправляйте является пустой строкой, что можно сделать путем проверки входных данных пользователя.</span><span class="sxs-lookup"><span data-stu-id="b1874-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>


### <a name="the-validation-helper"></a><span data-ttu-id="b1874-233">Вспомогательная функция проверке</span><span class="sxs-lookup"><span data-stu-id="b1874-233">The Validation Helper</span></span>

<span data-ttu-id="b1874-234">Веб-страниц ASP.NET включает в себя вспомогательный объект &mdash; `Validation` вспомогательный &mdash; , можно использовать для убедитесь, что пользователи вводят данные, который соответствует вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="b1874-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="b1874-235">`Validation` Вспомогательный является одним из вспомогательных методов, который встроен в для веб-страниц в ASP.NET, поэтому не нужно установить его в виде пакета с помощью NuGet, способ установки вспомогательных Gravatar в предыдущем руководстве.</span><span class="sxs-lookup"><span data-stu-id="b1874-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="b1874-236">Чтобы проверить введенные пользователем данные, потребуется следующее:</span><span class="sxs-lookup"><span data-stu-id="b1874-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="b1874-237">Используйте код, чтобы указать, что требуются значения в текстовых полях на странице.</span><span class="sxs-lookup"><span data-stu-id="b1874-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="b1874-238">Поместите в код теста, чтобы сведения о фильме добавляется в базу данных только в том случае, если все, что проверяет, правильно.</span><span class="sxs-lookup"><span data-stu-id="b1874-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="b1874-239">Добавьте код в разметку для отображения сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="b1874-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="b1874-240">В блоке кода в *AddMovie* странице, прямо в верхней до объявления переменных, добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="b1874-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="b1874-241">Вы вызываете `Validation.RequireField` один раз для каждого поля (`<input>` элемент) где требуется запись.</span><span class="sxs-lookup"><span data-stu-id="b1874-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="b1874-242">Можно также добавить пользовательское сообщение об ошибке для каждого вызова, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="b1874-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="b1874-243">(Мы различные сообщения, чтобы показать, что можно поместить любое существует).</span><span class="sxs-lookup"><span data-stu-id="b1874-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="b1874-244">Если имеется проблема, вы хотите предотвратить новые сведения о фильме будет вставлена в базу данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="b1874-245">В `if(IsPost)` block, используйте `&&` (логическое и), чтобы добавить другое условие, которое проверяет `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="b1874-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="b1874-246">Когда все будет готово, весь `if(IsPost)` блока выглядит как следующий код:</span><span class="sxs-lookup"><span data-stu-id="b1874-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="b1874-247">Если имеется ошибка проверки в любом из полей, которые зарегистрированы с помощью `Validation` helper, `Validation.IsValid` метод возвращает значение false.</span><span class="sxs-lookup"><span data-stu-id="b1874-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="b1874-248">И в этом случае ни один из кода в соответствующем блоке будет запущен, поэтому нет записей недопустимый фильм будет вставлен в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="b1874-249">И конечно вы не перейдете *фильмы* страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="b1874-250">Законченный блок кода, включая код проверки, теперь выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b1874-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="b1874-251">Отображение ошибок проверки</span><span class="sxs-lookup"><span data-stu-id="b1874-251">Displaying Validation Errors</span></span>

<span data-ttu-id="b1874-252">Последним шагом является отображение сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="b1874-252">The last step is to display any error messages.</span></span> <span data-ttu-id="b1874-253">Можно отобразить отдельных сообщений для каждой ошибки проверки, или можно отобразить сводные данные, или оба.</span><span class="sxs-lookup"><span data-stu-id="b1874-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="b1874-254">В этом руководстве вы выполните оба таким образом, чтобы можно было увидеть, как это работает.</span><span class="sxs-lookup"><span data-stu-id="b1874-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="b1874-255">Рядом с каждым `<input>` элемент, который проверка, вызов `Html.ValidationMessage` метод и передать его имя `<input>` элемент, проверка.</span><span class="sxs-lookup"><span data-stu-id="b1874-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="b1874-256">Поместить `Html.ValidationMessage` метод точное сообщение об ошибке для отображения.</span><span class="sxs-lookup"><span data-stu-id="b1874-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="b1874-257">При запуске страницы, `Html.ValidationMessage` метод отрисовывает `<span>` элемент, которому будет переходить к ошибке проверки.</span><span class="sxs-lookup"><span data-stu-id="b1874-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="b1874-258">(Если ошибки отсутствуют, `<span>` элемент отображается, но в нем отсутствует текст.)</span><span class="sxs-lookup"><span data-stu-id="b1874-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="b1874-259">Измените разметку в странице, таким образом, чтобы он включал `Html.ValidationMessage` метод для каждого из трех `<input>` элементов на странице, как показано в примере:</span><span class="sxs-lookup"><span data-stu-id="b1874-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="b1874-260">Чтобы увидеть, как работает сводки, также добавьте следующую разметку и код сразу после `<h1>Add a Movie</h1>` элемента на странице:</span><span class="sxs-lookup"><span data-stu-id="b1874-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="b1874-261">По умолчанию `Html.ValidationSummary` метод отображает все сообщения проверки в списке ( `<ul>` элемент, который находится внутри `<div>` элемент).</span><span class="sxs-lookup"><span data-stu-id="b1874-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="b1874-262">Как и в `Html.ValidationMessage` метод, разметку для сводки проверки отображается всегда; при возникновении ошибки, не элементы списка отображаются.</span><span class="sxs-lookup"><span data-stu-id="b1874-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="b1874-263">Сводные данные могут быть альтернативный способ отображения сообщений проверки, а не с помощью `Html.ValidationMessage` метод для отображения каждой ошибки конкретных полей.</span><span class="sxs-lookup"><span data-stu-id="b1874-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="b1874-264">Или можно использовать сводные данные и сведения.</span><span class="sxs-lookup"><span data-stu-id="b1874-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="b1874-265">Или можно использовать `Html.ValidationSummary` метод для отображения общей ошибки и затем с помощью отдельных `Html.ValidationMessage` вызовы, чтобы отобразить подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="b1874-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="b1874-266">Страницы теперь выглядит как в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="b1874-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="b1874-267">Вот и все.</span><span class="sxs-lookup"><span data-stu-id="b1874-267">That's it.</span></span> <span data-ttu-id="b1874-268">Теперь можно проверить страницы путем добавления фильм, но оставив один или несколько полей.</span><span class="sxs-lookup"><span data-stu-id="b1874-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="b1874-269">При этом может появиться следующая ошибка отображения:</span><span class="sxs-lookup"><span data-stu-id="b1874-269">When you do, you see the following error display:</span></span>

![Добавить страницу фильма, отображение сообщения об ошибках проверки](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="b1874-271">Задание стиля сообщений об ошибках проверки</span><span class="sxs-lookup"><span data-stu-id="b1874-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="b1874-272">Вы увидите, что существуют сообщения об ошибках, но не выделяются действительно очень хорошо.</span><span class="sxs-lookup"><span data-stu-id="b1874-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="b1874-273">Есть простой способ применения стиля сообщения об ошибках, но.</span><span class="sxs-lookup"><span data-stu-id="b1874-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="b1874-274">Для стиля сообщения об отдельных ошибках, которые отображаются по `Html.ValidationMessage`, создайте класс стиля CSS, с именем `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="b1874-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="b1874-275">Чтобы определить внешний вид для сводки проверки, необходимо создать класс стиля CSS с именем `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="b1874-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="b1874-276">Чтобы увидеть, как работает этот метод, добавьте `<style>` элемент внутри `<head>` раздел страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="b1874-277">Затем определите классов с именем `field-validation-error` и `validation-summary-errors` , содержащие следующие правила:</span><span class="sxs-lookup"><span data-stu-id="b1874-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="b1874-278">Обычно скорее разместить сведения о стиле в отдельную *.css* файл, но для простоты вы можете поместить их в страницу сейчас.</span><span class="sxs-lookup"><span data-stu-id="b1874-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="b1874-279">(Позже в рамках этого учебного курса, вы сделаете правила CSS в отдельный *.css* файл.)</span><span class="sxs-lookup"><span data-stu-id="b1874-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="b1874-280">При возникновении ошибки проверки, `Html.ValidationMessage` метод отрисовывает `<span>` элемент, который включает в себя `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="b1874-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="b1874-281">Добавление определения стиля для этого класса, можно настроить, как выглядит сообщение.</span><span class="sxs-lookup"><span data-stu-id="b1874-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="b1874-282">При возникновении ошибок, `ValidationSummary` метод аналогично динамически отображает атрибут `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="b1874-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="b1874-283">Снова запустить страницу и специально оставить несколько полей.</span><span class="sxs-lookup"><span data-stu-id="b1874-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="b1874-284">Ошибки теперь более заметны.</span><span class="sxs-lookup"><span data-stu-id="b1874-284">The errors are now more noticeable.</span></span> <span data-ttu-id="b1874-285">(На самом деле, они все overdone, но это просто для того, чтобы показать, что можно делать.)</span><span class="sxs-lookup"><span data-stu-id="b1874-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Добавить страницу фильма, отображение ошибок проверки, которые были стиль](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="b1874-287">Добавление ссылки на страницу Movies</span><span class="sxs-lookup"><span data-stu-id="b1874-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="b1874-288">Последний шаг — сделать ее удобнее получать для *AddMovie* страницы из исходного списка фильмов.</span><span class="sxs-lookup"><span data-stu-id="b1874-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="b1874-289">Откройте *фильмы* странице еще раз.</span><span class="sxs-lookup"><span data-stu-id="b1874-289">Open the *Movies* page again.</span></span> <span data-ttu-id="b1874-290">После закрывающего `</div>` тег, который следует за `WebGrid` вспомогательного приложения, добавьте следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="b1874-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="b1874-291">Как мы делали раньше, ASP.NET интерпретирует `~` оператор в корневом веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="b1874-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="b1874-292">Нет необходимости использовать `~` оператора; можно использовать разметку `<a href="./AddMovie">Add a movie</a>` или другим способом для определения пути, который понимает HTML.</span><span class="sxs-lookup"><span data-stu-id="b1874-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="b1874-293">Но `~` оператор — хороший общие подход при создании ссылки для Razor pages, так как его узел становится более гибким, при перемещении текущей страницы во вложенную папку, ссылка будет по-прежнему указывать на *AddMovie* страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="b1874-294">(Помните, что `~` оператор работает только *.cshtml* страниц.</span><span class="sxs-lookup"><span data-stu-id="b1874-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="b1874-295">ASP.NET понимает его, но это не стандартный HTML.)</span><span class="sxs-lookup"><span data-stu-id="b1874-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="b1874-296">Когда все будет готово, запустите *фильмы* страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="b1874-297">Он имеет вид этой страницы:</span><span class="sxs-lookup"><span data-stu-id="b1874-297">It will look like this page:</span></span>

![Страницу Movies со ссылкой на страницу «Добавление фильмы»](entering-data/_static/image7.png)

<span data-ttu-id="b1874-299">Нажмите кнопку **добавления фильма** ссылку, чтобы убедиться в том, что она ведет к *AddMovie* страницы.</span><span class="sxs-lookup"><span data-stu-id="b1874-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="b1874-300">В ближайшее время</span><span class="sxs-lookup"><span data-stu-id="b1874-300">Coming Up Next</span></span>

<span data-ttu-id="b1874-301">В следующем руководстве вы узнаете, как разрешить пользователям редактировать данные, которые уже находится в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b1874-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="b1874-302">Полный пример для AddMovie страницы</span><span class="sxs-lookup"><span data-stu-id="b1874-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="b1874-303">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="b1874-303">Additional Resources</span></span>

- [<span data-ttu-id="b1874-304">Введение в веб-программирование для ASP.NET с использованием синтаксиса Razor</span><span class="sxs-lookup"><span data-stu-id="b1874-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="b1874-305">[SQL в инструкции INSERT](http://www.w3schools.com/sql/sql_insert.asp) на сайте W3Schools</span><span class="sxs-lookup"><span data-stu-id="b1874-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="b1874-306">[Проверка вводимых пользователем данных в ASP.NET Web Pages сайты](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="b1874-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="b1874-307">Дополнительные сведения о работе с `Validation` вспомогательный.</span><span class="sxs-lookup"><span data-stu-id="b1874-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b1874-308">[Назад](form-basics.md)
> [Вперед](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="b1874-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
