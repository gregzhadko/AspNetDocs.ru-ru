---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
title: Знакомство с веб-страниц ASP.NET — Создание согласованного макета | Документация Майкрософт
author: Rick-Anderson
description: Этом руководстве показано, как использовать макеты для создания согласованного вида для страниц на сайте, который использует веб-страниц ASP.NET. Предполагается, что вы выполнили...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: c85ec591-f8d7-4882-b763-de6ab9f3df7a
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
msc.type: authoredcontent
ms.openlocfilehash: 678eb7089e95e3d221d6b2d82034a62aefa75757
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131839"
---
# <a name="introducing-aspnet-web-pages---creating-a-consistent-layout"></a>Знакомство с веб-страниц ASP.NET — Создание согласованного макета

по [Tom FitzMacken](https://github.com/tfitzmac)

> Этом руководстве показано, как использовать *макеты* для создания согласованного вида для страниц на сайте, который использует веб-страниц ASP.NET. Предполагается, вы выполнили рядов через [удаление базы данных в ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251584).
> 
> Вы узнаете, как:
> 
> - — Какие страницы макета.
> - Как объединить макета страниц с динамическим содержимым.
> - Как передавать значения для страницы макета.

## <a name="about-layouts"></a>О макетах

Страницы, вы создали ранее все были завершения автономные страницы. Все они принадлежат тому же сайту, но у них нет общих элементов или стандартный вид.

У большинства сайтов, согласованный внешний вид и макет. Например, если вы собираетесь [Microsoft.com/web](https://www.microsoft.com/web/) сайта и оглядитесь, вы увидите соблюдать все страницы для общей структуры и визуальной темы:

![Страница сайта Microsoft.com/Web структуры заголовка, области навигации и область содержимого, а также нижний колонтитул](layouts/_static/image1.png)

*Неэффективным* способом для создания этого макета будет определить заголовок, панель навигации и нижний колонтитул отдельно для каждой из страниц. При этом произойдет дублирование та же разметка каждый раз. Если вы хотите изменить что-то (например, обновление нижнего колонтитула), необходимо изменить каждую страницу отдельно.

Именно здесь *страницы макета* бывают. Веб-страницах ASP.NET, вы можете определить страницу макета, который предоставляет общий контейнер для страниц на сайте. Например на странице макета может содержать заголовок, область навигации и нижний колонтитул. Страница макета с заполнителем, от основного содержимого назначения.

Затем можно определить отдельных страниц содержимого, которые содержат разметку и код только для этой страницы. Страницы содержимого не нужно быть полный HTML-страницы; даже не нужно иметь `<body>` элемент. Они также имеют строку кода, о том, какие страницы макета для отображения содержимого в ASP.NET. Ниже приведен рисунок, приблизительно показано, как работает эта связь.

![Концептуальная схема, показывающая две страницы содержимого и макета страницы, в котором они работают](layouts/_static/image2.png)

Это взаимодействие можно легко понять, когда увидите его в действии. В этом учебнике вам предстоит изменить Чтобы использовать макет страницы фильмов.

## <a name="adding-a-layout-page"></a>Добавление страницы макета

Начнем с создания макета страницы, которая определяет типичная страница макета с верхний колонтитул, нижний колонтитул и область основного содержимого. В узле WebPagesMovies добавьте CSHTML-странице с именем  *\_Layout.cshtml*.

Символа подчеркивания ( `_` ) символ важен. Если имя страницы начинается с символа подчеркивания, ASP.NET не будет отправлять непосредственно эту страницу в браузер. Это соглашение позволяет определить страниц, которые необходимы для вашего сайта, но, что пользователи не должны иметь возможность напрямую запрашивать.

Замените содержимое на странице следующее:

[!code-html[Main](layouts/samples/sample1.html)]

Как вы видите, эта разметка является просто HTML, который использует `<div>` элементы для определения трех разделов в странице, а также один более `<div>` элемента для хранения трех разделов. Нижний колонтитул содержит немного кода Razor: `@DateTime.Now.Year`, отображающего текущий год в этом месте страницы.

Обратите внимание, что ссылка на таблицу стилей с именем *Movies.css*. Таблица стилей —, где определены аспекты физическим размещением элементов. Вы создадите, чуть позже.

Единственными необычными функции в этом  *\_Layout.cshtml* страница `@Render.Body()` строки. Это заполнитель, куда содержимое при слиянии этот макет с другой страницы.

## <a name="adding-a-css-file"></a>Добавление CSS-файл

Предпочтительный способ определить, фактическому расположению (то есть внешний) элементы на странице — использовать правила стиля таблицы каскадных стилей (CSS). Так вы создадите *.css* файл, содержащий правила для нового макета.

В WebMatrix выберите корень сайта. Затем в **файлы** вкладку на ленте, щелкните стрелку под кнопкой **New** а затем нажмите кнопку **новую папку**.

![Параметр «Новая папка» в разделе New на ленте.](layouts/_static/image3.png)

Назовите новую папку *стили*.

![Именование в новую папку «Стили»](layouts/_static/image4.png)

Внутри новой *стили* папке создайте файл с именем *Movies.css*.

![Создание нового файла Movies.css](layouts/_static/image5.png)

Замените содержимое нового *.css* файл со следующими:

[!code-css[Main](layouts/samples/sample2.css)]

Мы не очень много говорит о эти правила CSS, за исключением Примечание две вещи. Один том, что в дополнение к установке шрифтах и размерах, правила использовать абсолютное позиционирование для определения местоположения заголовка, нижнего колонтитула и основную область содержимого. Если вы не знакомы с размещением в CSS, можно прочитать [позиционирования CSS](http://www.w3schools.com/css/css_positioning.asp) руководства на веб-сайте W3Schools.

Необходимо отметить, что в нижней части мы скопировали правила стилей, которые были изначально определяется по отдельности в *Movies.cshtml* файла. Эти правила были использованы в [Общие сведения о отображение данных с помощью ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251580) руководству, чтобы сделать `WebGrid` вспомогательный объект отображать разметку, которая добавляется в таблицу полосы. (Если вы собираетесь использовать *.css* файл для определения стилей, также могут представлять правила стилей для всего узла в его.)

## <a name="updating-the-movies-file-to-use-the-layout"></a>Обновление файла фильмы используется режим

Теперь можно обновить существующие файлы в свой сайт для использования нового макета. Откройте *Movies.cshtml* файла. В верхней части в первой строке кода, добавьте следующие строки:

[!code-csharp[Main](layouts/samples/sample3.cs)]

Теперь страницы начинается таким образом:

[!code-cshtml[Main](layouts/samples/sample4.cshtml?highlight=2)]

Это одной строкой кода сообщает ASP.NET, что при *фильмы* страница выполняется, она должна быть объединена с  *\_Layout.cshtml* файла.

Так как *Movies.cshtml* использует страницы макета, можно удалить разметку из *Movies.cshtml* страницы, Разобравшись с  *\_Layout.cshtml*файл. Убрать `<!DOCTYPE>`, `<html>`, и `<body>` открывающих и закрывающих тегов. Удалить весь `<head>` элемент и его содержимое, включая правила стилей для сетки, так как у вас теперь есть этих правил *.css* файл. Хотя вы взялись за это, измените существующий `<h1>` элемент `<h2>` элемент; у вас есть `<h1>` элемент уже на странице макета. Изменение `<h2>` текст «Список фильмов».

Обычно вам не нужно вносить такого рода изменений на странице содержимого. При начинают веб-узла с помощью страницы макета, страницы содержимого, не все эти элементы создаются с самого начала. Таким образом Однако вы преобразуете отдельной странице, который использует макет, поэтому очистки.

Когда закончите, *Movies.cshtml* страница будет выглядеть следующим образом:

[!code-cshtml[Main](layouts/samples/sample5.cshtml)]

### <a name="testing-the-layout"></a>Тестирование макета

Теперь вы увидите, как выглядит макет. В WebMatrix, щелкните правой кнопкой мыши *Movies.cshtml* и укажите **запустить в браузере**. Когда браузер отображает страницу, он выглядит эту страницу:

![Фильмы страницы к просмотру с помощью макета](layouts/_static/image6.png)

ASP.NET объединен содержимое страницы Movies.cshtml в  *\_Layout.cshtml* странице правой where `RenderBody` является метод. И, конечно же  *\_Layout.cshtml* странице ссылки *.css* файл, который определяет внешний вид страницы.

## <a name="updating-the-addmovie-page-to-use-the-layout"></a>Обновление страницы AddMovie используется режим

Настоящее преимущество макетов является, то их можно использовать для всех страниц узла. Откройте *AddMovie.cshtml* страницы.

Вы помните, что *AddMovie.cshtml* страницы курировал некоторые правила CSS в его, чтобы определить внешний вид сообщений об ошибках проверки. Так как у вас есть *.css* файл для свой сайт прямо сейчас, вы можете переместить правила, чтобы они *.css* файл. Удалить их из *AddMovie.cshtml* и добавьте их в нижнюю часть *Movies.css* файла. При перемещении следующие правила:

[!code-css[Main](layouts/samples/sample6.css)]

Теперь внесите изменения в со схожими *AddMovie.cshtml* , это было сделано для *Movies.cshtml* — добавить `Layout="~/_Layout.cshtml;` и удаление разметки HTML, который теперь является лишним. Изменение `<h1>` элемент `<h2>`. Когда все будет готово, страница будет выглядеть как в следующем примере:

[!code-cshtml[Main](layouts/samples/sample7.cshtml)]

Откройте страницу. Теперь она выглядит как на этом рисунке:

![Страница «Добавить фильмы», отображаются с помощью макета](layouts/_static/image7.png)

Вы хотите внести аналогичные изменения к страницам на сайте — *EditMovie.cshtml* и *DeleteMovie.cshtml*. Тем не менее прежде чем выполнять, выполненные еще одно изменение макет, который обеспечивает дополнительную гибкость.

## <a name="passing-title-information-to-the-layout-page"></a>Передача сведений об заголовок на страницу макета

 *\_Layout.cshtml* имеет созданную страницу `<title>` элемент, который имеет значение «Мой узел фильма». Большинство браузеров для отображения содержимого этого элемента как текст на вкладке:

![Страницы &lt;title&gt; элементу, отображаемому на вкладке браузера](layouts/_static/image8.png)

Эта информация заголовка является универсальным. Предположим, что требуется текст заголовка, точнее в текущую страницу. (Текст заголовка также используется поисковые системы для определения того, что страница не о.) Можно передать сведения из страницы содержания как *Movies.cshtml* или *AddMovie.cshtml* для макета страницы, а затем с помощью визуализирует эту информацию для настройки макета страницы.

Откройте *Movies.cshtml* странице еще раз. В коде, в верхней добавьте следующую строку:

[!code-csharp[Main](layouts/samples/sample8.cs)]

`Page` Объект будет доступен на всех *.cshtml* страницы, а также предназначен для этой цели, а именно: для совместного использования информации между страницей и его макет.

Откройте  *\_Layout.cshtml* страницы. Изменение `<title>` элемент, чтобы он выглядел Эта разметка:

[!code-html[Main](layouts/samples/sample9.html)]

Этот код отображает содержимое `Page.Title` свойство прямо в этом месте страницы.

Запустите *Movies.cshtml* страницы. На этот раз на вкладке браузера показывает было передано в качестве значения `Page.Title`:

![На вкладке браузера, отображается название динамически создан](layouts/_static/image9.png)

Если требуется, просмотрите исходный код страницы в браузере. Можно заметить, что `<title>` элемент отображается как `<title>List Movies</title>`.

> [!TIP] 
> 
> **Объект страницы**
> 
> Полезной возможностью `Page` — это динамический объект — `Title` свойство не является именем фиксированный или зарезервированный. Можно использовать *любой* имя для значения `Page` объекта. Например, то может так же легко передать заголовок, используя свойство с именем `Page.CurrentName` или `Page.MyPage`. Единственным ограничением является то, что имя должно следовать нормальным правилам для какие свойства можно присвоить имя. (Например, имя не может содержать пробел).
> 
> Можно передать любое количество значений с помощью `Page` объекта. Если вы хотите передать сведения о фильме на страницу макета, можно передать значения с помощью примерно `Page.MovieTitle` и `Page.Genre` и `Page.MovieYear`. (Или другие имена, которые разработаны для хранения информации). Единственное требование — это, вероятно, очевидно, этого необходимо использовать одинаковые имена в странице содержимого и макета страницы.
> 
> Сведения, указываемые с помощью `Page` объекта не ограничивается только текст, отображаемый на странице макета. Можно передать значение на страницу макета, а затем код на странице макета можно использовать значение, чтобы решить, следует ли отображать раздел страницы, что *.css* нужно использовать и т. д. Значения, указываемые в `Page` объекта как и любые другие значения, используется в коде. Это только что значения получаются на странице содержимого и передаются на страницу макета.

Откройте *AddMovie.cshtml* странице и добавьте строку в начало кода с заголовком для *AddMovie.cshtml* страницы:

[!code-csharp[Main](layouts/samples/sample10.cs)]

Запустите *AddMovie.cshtml* страницы. Вы увидите новый заголовок существует:

![На вкладке браузера, отображается название «Добавить фильмы» создана динамически](layouts/_static/image10.png)

## <a name="updating-the-remaining-pages-to-use-the-layout"></a>Обновление оставшихся страниц используется режим

Теперь вы можете завершить оставшихся страницах на сайте, чтобы они использовали новый макет. Откройте *EditMovie.cshtml* и *DeleteMovie.cshtml* в свою очередь и внесите те же изменения в каждом.

Добавьте строку кода, который содержит ссылки на страницу макета:

[!code-csharp[Main](layouts/samples/sample11.cs)]

Добавьте строку для установки заголовка страницы:

[!code-csharp[Main](layouts/samples/sample12.cs)]

или

[!code-csharp[Main](layouts/samples/sample13.cs)]

Удалите все лишние разметку HTML, по сути, оставьте только биты, которые находятся внутри `<body>` элемент (а также блок кода в верхней).

Изменение `<h1>` элемента, который будет `<h2>` элемент.

После внесения этих изменений, проверить каждую и убедитесь, что он правильно отображает и правильность заголовок.

## <a name="parting-thoughts-about-layout-pages"></a>Parting мысли о страниц макета

В этом руководстве вы создали  *\_Layout.cshtml* странице и использовать `RenderBody` метод для слияния содержимого с другой страницы. Это типичное использование макетов веб-страниц.

Макет страницы обладают дополнительными функциями, мы не рассмотрели здесь. Например, можно создавать вложенные страницы макета — одну страницу макета в свою очередь может ссылаться на друга. Вложенным макетам, можно использовать в том случае, если вы работаете с подразделах сайта, требующие различных макетах. Можно также использовать дополнительные методы (например, `RenderSection`) для настройки с именем разделах на странице макета.

Сочетание страницы макета и *.css* файлы обладает широкими возможностями. Как можно будет увидеть в следующей серии руководств, в WebMatrix можно создать сайт на основе *шаблона*, которое позволяет веб-узла с стандартные функциональные возможности, в нем. Шаблоны пригодились макета страниц и CSS для создания сайтов, который отлично выглядеть при просмотре и имеют функции, такие как меню. Ниже приведен снимок экрана домашней страницы с сайта на основе шаблона, показывающий функции, использующие макета страниц и CSS.

![Макет, создаваемого шаблоном сайта WebMatrix, отображение заголовка, области навигации, области содержимого, дополнительный раздел, а также ссылки для входа](layouts/_static/image11.png)

## <a name="complete-listing-for-movie-page-updated-to-use-a-layout-page"></a>Полный пример для фильма странице (использование страницы "Макет")

[!code-cshtml[Main](layouts/samples/sample14.cshtml)]

## <a name="complete-page-listing-for-add-movie-page-updated-for-layout"></a>Целая страница для добавления страницы фильма (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample15.cshtml)]

## <a name="complete-page-listing-for-delete-movie-page-updated-for-layout"></a>Полный пример страницы для страницы "Delete фильма" (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample16.cshtml)]

## <a name="complete-page-listing-for-edit-movie-page-updated-for-layout"></a>Полный пример страницы для страницы "Edit фильма" (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample17.cshtml)]

## <a name="coming-up-next"></a>В ближайшее время

В следующем руководстве вы узнаете, как для публикации своего сайта к Интернету, поэтому всегда можно увидеть.

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Создание согласованного выглядеть](https://go.microsoft.com/fwlink/?LinkID=202891) — статьи, содержатся более подробные сведения о работе с макетами. Он также описывает значение передается на страницу макета, которая показывает или скрывает некоторое содержимое.
- [Вложенные страницы макета в Razor](http://www.mikesdotnetting.com/Article/164/Nested-Layout-Pages-with-Razor) — блоги Майк Бринд пример демонстрирует Вкладывание страницы макета. (Включает в себя загрузки страниц).

> [!div class="step-by-step"]
> [Назад](deleting-data.md)
> [Вперед](publishing.md)
