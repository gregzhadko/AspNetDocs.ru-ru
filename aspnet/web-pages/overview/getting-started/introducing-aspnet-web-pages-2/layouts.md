---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
title: Введение в веб-страницы ASP.NET создания единообразного макета | Документация Майкрософт
author: Rick-Anderson
description: В этом учебнике показано, как использовать макеты для создания единообразного вида страниц на сайте, который использует веб-страницы ASP.NET. Предполагается, что вы завершили...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: c85ec591-f8d7-4882-b763-de6ab9f3df7a
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
msc.type: authoredcontent
ms.openlocfilehash: 678eb7089e95e3d221d6b2d82034a62aefa75757
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78422748"
---
# <a name="introducing-aspnet-web-pages---creating-a-consistent-layout"></a>Введение в веб-страницы ASP.NET — создание единообразного макета

от [Tom фитзмаккен](https://github.com/tfitzmac)

> В этом учебнике показано, как использовать *макеты* для создания единообразного вида страниц на сайте, который использует веб-страницы ASP.NET. Предполагается, что вы выполнили серию, [удалив данные базы данных в веб-страницы ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251584).
> 
> Из этого руководства вы узнаете, как выполнять такие задачи:
> 
> - Что такое страница макета.
> - Объединение страниц макета с динамическим содержимым.
> - Передача значений на страницу макета.

## <a name="about-layouts"></a>О макетах

Страницы, созданные до сих пор, полностью готовы, являются автономными страницами. Все они принадлежат одному сайту, но у них нет общих элементов или стандартного вида.

У большинства веб-сайтов есть единообразный внешний вид и макет. Например, если вы перейдете на сайт [Microsoft.com/Web](https://www.microsoft.com/web/) и пройдете, вы увидите, что все страницы соответствуют общему макету и визуальной теме:

![Страница сайта Microsoft.com/web, отображающая макет заголовка, области навигации, области содержимого и нижнего колонтитула](layouts/_static/image1.png)

*Неэффективным* способом создания такого макета является определение заголовка, панели навигации и нижнего колонтитула отдельно для каждой страницы. Вы бы могли дублировать одну и ту же разметку каждый раз. Если вы хотите изменить что-нибудь (например, обновить нижний колонтитул), придется отдельно изменить каждую страницу.

Именно здесь поступают *страницы макета* . В веб-страницы ASP.NET можно определить страницу макета, которая предоставляет общий контейнер для страниц сайта. Например, страница макета может содержать заголовок, область навигации и нижний колонтитул. Страница макета содержит заполнитель, в котором происходит основное содержимое.

Затем можно определить отдельные страницы содержимого, содержащие разметку и код только для этой страницы. Страницы содержимого не обязательно должны быть полными HTML-страницами; они даже не обязательно должны иметь элемент `<body>`. Они также содержат строку кода, сообщающую ASP.NET, в какой странице макета нужно отображать содержимое. Вот рисунок, на котором показано, как работает эта связь:

![Концептуальная схема, на которой показаны две страницы содержимого и страница макета, в которой они размещены](layouts/_static/image2.png)

Это взаимодействие легко понять, когда вы видите его в действии. В этом руководстве вы измените страницы фильмов, чтобы они использовали макет.

## <a name="adding-a-layout-page"></a>Добавление страницы макета

Начнем с создания страницы макета, которая определяет типичный макет страницы с заголовком, нижним колонтитулом и областью для основного содержимого. На сайте Вебпажесмовиес добавьте страницу CSHTML с именем *\_Layout. cshtml*.

Знак подчеркивания в начале (`_`) важен. Если имя страницы начинается с символа подчеркивания, ASP.NET не будет напрямую передавать эту страницу в браузер. Это соглашение позволяет определить страницы, необходимые для сайта, но пользователи не должны иметь возможность запрашивать их напрямую.

Замените содержимое на странице следующим:

[!code-html[Main](layouts/samples/sample1.html)]

Как видите, эта разметка — это просто HTML, который использует элементы `<div>` для определения трех разделов на странице плюс еще один элемент `<div>` для хранения трех разделов. Нижний колонтитул содержит несколько фрагментов кода Razor: `@DateTime.Now.Year`, который выводит текущий год в этом месте страницы.

Обратите внимание, что имеется ссылка на таблицу стилей с именем *movies. CSS*. Таблица стилей — это место, где будут определены подробные сведения о физическом макете элементов. Вы создадите это чуть позже.

Единственная необычная функция на этой странице *\_Layout. cshtml* — это `@Render.Body()`ая строка. Это заполнитель, в котором содержимое будет передвигаться при слиянии макета с другой страницей.

## <a name="adding-a-css-file"></a>Добавление CSS-файла

Предпочтительным способом определения фактического расположения (внешнего вида) элементов на странице является использование правил каскадной таблицы стилей (CSS). Поэтому вы создадите *CSS* -файл с правилами для нового макета.

В WebMatrix выберите корень сайта. Затем на вкладке " **файлы** " ленты щелкните стрелку под кнопкой **создать** и выберите пункт **создать папку**.

![Параметр "создать папку" в разделе "создать" на ленте.](layouts/_static/image3.png)

Назовите новые *стили*папок.

![Присвоение имени новой папке Styles](layouts/_static/image4.png)

В папке New *styles* (новые стили) создайте файл с именем *movies. CSS*.

![Создание файла movies. CSS](layouts/_static/image5.png)

Замените содержимое нового *CSS* файл следующим:

[!code-css[Main](layouts/samples/sample2.css)]

Мы не будем говорить о таких правилах CSS, за исключением того, что обратите внимание на две вещи. Один из них заключается в том, что в дополнение к установке шрифтов и размеров правила используют абсолютное позиционирование для определения расположения верхнего, нижнего колонтитула и области основного содержимого. Если вы не знакомы с размещением в CSS, то можете ознакомиться с руководством по [размещению CSS](http://www.w3schools.com/css/css_positioning.asp) на сайте W3Schools.

Обратите внимание, что в нижней части мы скопировали правила стилей, которые изначально были определены по отдельности, в файле *movies. cshtml* . Эти правила использовались во [введении для отображения данных с помощью веб-страницы ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251580) учебнике, чтобы сделать `WebGrid` вспомогательным модулем визуализации разметки, которая добавила в таблицу полосы. (Если вы собираетесь использовать *CSS* -файл для определения стиля, можно также разместить правила стилей для всего сайта в нем.)

## <a name="updating-the-movies-file-to-use-the-layout"></a>Обновление файла фильмов для использования макета

Теперь можно обновить существующие файлы на сайте, чтобы использовать новый макет. Откройте файл *movies. cshtml* . В верхней части, как первая строка кода, добавьте следующее:

[!code-csharp[Main](layouts/samples/sample3.cs)]

Теперь страница запускается следующим образом:

[!code-cshtml[Main](layouts/samples/sample4.cshtml?highlight=2)]

Эта одна строка кода сообщает ASP.NET, что при запуске страницы *фильмов* ее следует объединить с файлом *\_Layout. cshtml* .

Так как файл *movies. cshtml* теперь использует страницу макета, вы можете удалить разметку из страницы *movies. cshtml* , которую позаботится файл *\_Layout. cshtml* . Выйдите `<!DOCTYPE>`, `<html>`и `<body>` открывающие и закрывающие теги. Извлекайте весь элемент `<head>` и его содержимое, в том числе правила стилей для сетки, так как теперь эти правила имеются в *CSS* -файле. Когда Вы находитесь на нем, измените существующий элемент `<h1>` на элемент `<h2>`. на странице макета уже имеется элемент `<h1>`. Измените `<h2>` текст на "список фильмов".

Обычно вам не придется вносить такие изменения на странице содержимого. При запуске сайта с помощью страницы макета создаются страницы содержимого без всех этих элементов. Однако в данном случае вы преобразуете автономную страницу в ту, которая использует макет, поэтому существует немного очистки.

По завершении страница *movies. cshtml* будет выглядеть следующим образом:

[!code-cshtml[Main](layouts/samples/sample5.cshtml)]

### <a name="testing-the-layout"></a>Тестирование макета

Теперь можно увидеть, как выглядит макет. В WebMatrix щелкните правой кнопкой мыши страницу *movies. cshtml* и выберите **запустить в браузере**. При отображении страницы браузер выглядит следующим образом:

![Страница фильмов, подготовленная к просмотру с помощью макета](layouts/_static/image6.png)

ASP.NET объединила содержимое страницы movies. cshtml на странице *\_Layout. cshtml* справа, где метод `RenderBody` имеет значение. И, конечно, страница *\_Layout. cshtml* ссылается на *CSS* -файл, определяющий внешний вид страницы.

## <a name="updating-the-addmovie-page-to-use-the-layout"></a>Обновление страницы Аддмовие для использования макета

Реальное преимущество макетов заключается в том, что их можно использовать для всех страниц сайта. Откройте страницу *аддмовие. cshtml* .

Возможно, вы помните, что на странице *аддмовие. cshtml* изначально существовали некоторые правила CSS для определения вида сообщений об ошибках проверки. Так как у вас уже есть *CSS* -файл для сайта, можно переместить эти правила в файл *CSS* . Удалите их из файла *аддмовие. cshtml* и добавьте их в конец файла *movies. CSS* . Вы перемещаете следующие правила:

[!code-css[Main](layouts/samples/sample6.css)]

Теперь внесите те же изменения в *аддмовие. cshtml* , что и для *фильмов. cshtml* — добавьте `Layout="~/_Layout.cshtml;` и удалите разметку HTML, которая теперь является лишней. Измените элемент `<h1>` на `<h2>`. По завершении страница будет выглядеть, как в следующем примере:

[!code-cshtml[Main](layouts/samples/sample7.cshtml)]

Запустите страницу. Теперь он выглядит так:

![Страница "Добавление фильмов", отображаемая с помощью макета](layouts/_static/image7.png)

Необходимо внести аналогичные изменения в страницы сайта — *едитмовие. cshtml* и *делетемовие. cshtml*. Однако перед этим можно внести еще одно изменение в макет, что сделает его более гибким.

## <a name="passing-title-information-to-the-layout-page"></a>Передача сведений о названии на страницу макета

Созданная страница *\_Layout. cshtml* содержит элемент `<title>`, для которого задано значение "мой сайт фильма". В большинстве браузеров содержимое этого элемента отображается в виде текста на вкладке:

![Элемент&gt; заголовка &lt;страницы, отображаемый на вкладке браузера](layouts/_static/image8.png)

Эти сведения о заголовке являются универсальными. Предположим, что текст заголовка должен быть более специфичным для текущей страницы. (Текст заголовка также используется поисковыми механизмами для определения того, что собирается ваша страница.) Вы можете передать сведения со страницы содержимого, например *movies. cshtml* или *аддмовие. cshtml* , на страницу макета, а затем использовать эту информацию для настройки отрисовки страницы макета.

Снова откройте страницу *movies. cshtml* . В верхней части кода добавьте следующую строку:

[!code-csharp[Main](layouts/samples/sample8.cs)]

Объект `Page` доступен на всех страницах *. cshtml* и предназначен для этой цели, а именно для обмена информацией между страницей и ее макетом.

Откройте страницу *\_Layout. cshtml* . Измените элемент `<title>` так, чтобы он выглядел как в этой разметке:

[!code-html[Main](layouts/samples/sample9.html)]

Этот код визуализирует все, что находится в свойстве `Page.Title`, прямо в этом месте страницы.

Запустите страницу *movies. cshtml* . На этот раз вкладка Браузер показывает, что передано в качестве значения `Page.Title`:

![Вкладка браузера, в которой отображается заголовок, созданный динамически](layouts/_static/image9.png)

При необходимости просмотрите исходный код страницы в браузере. Видно, что элемент `<title>` подготавливается к просмотру как `<title>List Movies</title>`.

> [!TIP] 
> 
> **Объект Page**
> 
> Полезной функцией `Page` является то, что это динамический объект, а свойство `Title` не является фиксированным или зарезервированным именем. Для значения объекта `Page` можно использовать *любое* имя. Например, можно легко передать заголовок, используя свойство с именем `Page.CurrentName` или `Page.MyPage`. Единственное ограничение заключается в том, что имя должно соответствовать обычным правилам, для которых можно назвать свойства. (Например, имя не может содержать пробелы.)
> 
> Можно передать любое количество значений с помощью объекта `Page`. Если вы хотите передать сведения о фильме на страницу макета, можно передать значения, используя `Page.MovieTitle` и `Page.Genre` и `Page.MovieYear`. (Или любые другие имена, которые вы вымышлены для хранения информации.) Единственное требование, которое, вероятно, очевидно, заключается в том, что необходимо использовать те же имена на странице содержимого и на странице макета.
> 
> Данные, передаваемые с помощью объекта `Page`, не ограничиваются только текстом, отображаемым на странице макета. Можно передать значение на страницу макета, а затем код на странице макета может использовать значение для принятия решения о том, следует ли отображать раздел страницы, какой *CSS* -файл использовать и т. д. Значения, передаваемые в объект `Page`, аналогичны любым другим значениям, используемым в коде. Это просто то, что значения происходят на странице содержимого и передаются на страницу макета.

Откройте страницу *аддмовие. cshtml* и добавьте в начало кода строку, которая содержит название страницы *аддмовие. cshtml* :

[!code-csharp[Main](layouts/samples/sample10.cs)]

Запустите страницу *аддмовие. cshtml* . Вы увидите новый заголовок:

![Вкладка браузера с динамическим созданием заголовка "Добавление фильмов"](layouts/_static/image10.png)

## <a name="updating-the-remaining-pages-to-use-the-layout"></a>Обновление оставшихся страниц для использования макета

Теперь можно завершить оставшиеся страницы сайта, чтобы они использовали новый макет. В свою очередь откройте *едитмовие. cshtml* и *делетемовие. cshtml* и внесите в них одинаковые изменения.

Добавьте строку кода, которая ссылается на страницу макета:

[!code-csharp[Main](layouts/samples/sample11.cs)]

Добавьте строку, чтобы задать заголовок страницы:

[!code-csharp[Main](layouts/samples/sample12.cs)]

или:

[!code-csharp[Main](layouts/samples/sample13.cs)]

Удалите всю избыточную HTML-разметку — по сути, оставьте только биты внутри элемента `<body>` (плюс блок кода вверху).

Измените элемент `<h1>`, чтобы он был элементом `<h2>`.

После внесения этих изменений проверьте каждый из них и убедитесь, что они отображаются правильно, а заголовок задан правильно.

## <a name="parting-thoughts-about-layout-pages"></a>Описание идей по страницам макета

В этом учебнике вы создали страницу *\_Layout. cshtml* и использовали метод `RenderBody` для слияния содержимого из другой страницы. Это базовый шаблон для использования макетов на веб-страницах.

Страницы макета имеют дополнительные функции, которые мы не можем обнаружить. Например, можно вложить страницы макета — одна страница макета может в свою очередь ссылаться на другую. Вложенные макеты могут быть полезны при работе с подразделами сайта, для которых требуются разные макеты. Кроме того, можно использовать дополнительные методы (например, `RenderSection`) для настройки именованных разделов на странице макета.

Сочетание страниц макета и *CSS* -файлов является мощным. Как вы увидите в следующем ряде руководств, в WebMatrix можно создать сайт на основе *шаблона*, который предоставляет сайт с предварительно созданными функциями. Шаблоны хорошо используют страницы макета и CSS для создания веб-сайтов, которые выглядят великолепно и имеют такие функции, как меню. Ниже приведен снимок экрана домашней страницы с сайта на основе шаблона, в котором отображаются функции, использующие страницы макета и CSS:

![Макет, созданный шаблоном сайта WebMatrix с отображением заголовка, области навигации, области содержимого, необязательного раздела и ссылок для входа](layouts/_static/image11.png)

## <a name="complete-listing-for-movie-page-updated-to-use-a-layout-page"></a>Полный список для страницы фильмов (обновлен для использования страницы макета)

[!code-cshtml[Main](layouts/samples/sample14.cshtml)]

## <a name="complete-page-listing-for-add-movie-page-updated-for-layout"></a>Полный список страниц для страницы "Добавление фильма" (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample15.cshtml)]

## <a name="complete-page-listing-for-delete-movie-page-updated-for-layout"></a>Полный список страниц для страницы удаления фильмов (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample16.cshtml)]

## <a name="complete-page-listing-for-edit-movie-page-updated-for-layout"></a>Полный список страниц для страницы "изменение фильма" (обновлен для макета)

[!code-cshtml[Main](layouts/samples/sample17.cshtml)]

## <a name="coming-up-next"></a>Далее

В следующем руководстве вы узнаете, как опубликовать свой сайт в Интернете, чтобы все пользователи могли его видеть.

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Создание единообразного внешнего вида](https://go.microsoft.com/fwlink/?LinkID=202891) — статья, которая предоставляет более подробные сведения о работе с макетами. Здесь также описано, как передать значение на страницу макета, которая показывает или скрывает часть содержимого.
- [Вложенные страницы макета с Razor](http://www.mikesdotnetting.com/Article/164/Nested-Layout-Pages-with-Razor) — Майк бринд в блогах пример того, как вкладывать страницы макета. (Содержит загрузку страниц.)

> [!div class="step-by-step"]
> [Назад](deleting-data.md)
> [Вперед](publishing.md)
