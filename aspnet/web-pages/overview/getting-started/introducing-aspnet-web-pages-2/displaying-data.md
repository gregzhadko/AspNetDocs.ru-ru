---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/displaying-data
title: Представляем веб-страницы ASP.NET-отображение данных | Документация Майкрософт
author: Rick-Anderson
description: В этом руководстве показано, как создать базу данных в WebMatrix и как отображать данные базы данных на странице при использовании веб-страницы ASP.NET (Razor). Предполагается, что да...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: b3a006a0-3ea2-4d45-b833-e20e3a3c0a1a
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/displaying-data
msc.type: authoredcontent
ms.openlocfilehash: 9e665ca8dd064c23a8b8bd3593014969d0c3da48
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78421488"
---
# <a name="introducing-aspnet-web-pages---displaying-data"></a><span data-ttu-id="2bac8-104">Представляем веб-страницы ASP.NET-отображение данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-104">Introducing ASP.NET Web Pages - Displaying Data</span></span>

<span data-ttu-id="2bac8-105">от [Tom фитзмаккен](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="2bac8-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="2bac8-106">В этом руководстве показано, как создать базу данных в WebMatrix и как отображать данные базы данных на странице при использовании веб-страницы ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="2bac8-106">This tutorial shows you how to create a database in WebMatrix and how to display database data in a page when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="2bac8-107">Предполагается, что вы выполнили цикл по [ознакомлению с веб-страницы ASP.NET программированием](../introducing-razor-syntax-c.md).</span><span class="sxs-lookup"><span data-stu-id="2bac8-107">It assumes you have completed the series through [Introduction to ASP.NET Web Pages Programming](../introducing-razor-syntax-c.md).</span></span>
> 
> <span data-ttu-id="2bac8-108">Из этого руководства вы узнаете, как выполнять такие задачи:</span><span class="sxs-lookup"><span data-stu-id="2bac8-108">What you'll learn:</span></span>
> 
> - <span data-ttu-id="2bac8-109">Использование средств WebMatrix для создания таблиц базы данных и базы данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-109">How to use WebMatrix tools to create a database and database tables.</span></span>
> - <span data-ttu-id="2bac8-110">Использование средств WebMatrix для добавления данных в базу данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-110">How to use WebMatrix tools to add data to a database.</span></span>
> - <span data-ttu-id="2bac8-111">Отображение данных из базы данных на странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-111">How to display data from the database on a page.</span></span>
> - <span data-ttu-id="2bac8-112">Инструкции по выполнению команд SQL в веб-страницы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2bac8-112">How to run SQL commands in ASP.NET Web Pages.</span></span>
> - <span data-ttu-id="2bac8-113">Настройка вспомогательного метода `WebGrid` для изменения отображения данных и добавления разбиения на страницы и сортировки.</span><span class="sxs-lookup"><span data-stu-id="2bac8-113">How to customize the `WebGrid` helper to change the data display and to add paging and sorting.</span></span>
>   
> 
> <span data-ttu-id="2bac8-114">Обсуждаемые функции и технологии:</span><span class="sxs-lookup"><span data-stu-id="2bac8-114">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="2bac8-115">Инструменты базы данных WebMatrix.</span><span class="sxs-lookup"><span data-stu-id="2bac8-115">WebMatrix database tools.</span></span>
> - <span data-ttu-id="2bac8-116">вспомогательный метод `WebGrid`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-116">`WebGrid` helper.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="2bac8-117">Что вы создадите</span><span class="sxs-lookup"><span data-stu-id="2bac8-117">What You'll Build</span></span>

<span data-ttu-id="2bac8-118">В предыдущем учебном курсе были представлены веб-страницы ASP.NET (файлы *. cshtml* ), основы синтаксис Razor и вспомогательные методы.</span><span class="sxs-lookup"><span data-stu-id="2bac8-118">In the previous tutorial, you were introduced to ASP.NET Web Pages (*.cshtml* files), to the basics of Razor syntax, and to helpers.</span></span> <span data-ttu-id="2bac8-119">В этом руководстве вы начнете создавать фактическое веб-приложение, которое будет использоваться для остальной части ряда.</span><span class="sxs-lookup"><span data-stu-id="2bac8-119">In this tutorial, you'll begin creating the actual web application that you'll use for the rest of the series.</span></span> <span data-ttu-id="2bac8-120">Приложение — это простое приложение для фильмов, которое позволяет просматривать, добавлять, изменять и удалять сведения о фильмах.</span><span class="sxs-lookup"><span data-stu-id="2bac8-120">The app is a simple movie application that lets you view, add, change, and delete information about movies.</span></span>

<span data-ttu-id="2bac8-121">После завершения работы с этим руководством вы сможете просмотреть список фильмов, который выглядит как на этой странице:</span><span class="sxs-lookup"><span data-stu-id="2bac8-121">When you're done with this tutorial, you'll be able to view a movie listing that looks like this page:</span></span>

![Отображение сетки, включающее параметры, для которых заданы имена классов CSS](displaying-data/_static/image1.png)

<span data-ttu-id="2bac8-123">Но для начала необходимо создать базу данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-123">But to begin, you have to create a database.</span></span>

## <a name="a-very-brief-introduction-to-databases"></a><span data-ttu-id="2bac8-124">Очень короткое введение в базы данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-124">A Very Brief Introduction to Databases</span></span>

<span data-ttu-id="2bac8-125">В этом учебнике будут предоставлены только самые короткие сведения о базах данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-125">This tutorial will provide only the briefest introduction to databases.</span></span> <span data-ttu-id="2bac8-126">Если у вас есть опыт работы с базами данных, этот короткий раздел можно пропустить.</span><span class="sxs-lookup"><span data-stu-id="2bac8-126">If you have database experience, you can skip this short section.</span></span>

<span data-ttu-id="2bac8-127">База данных содержит одну или несколько таблиц, содержащих сведения &mdash; например, таблицы для клиентов, заказов и поставщиков, а также для учащихся, преподавателей, занятий и оценки.</span><span class="sxs-lookup"><span data-stu-id="2bac8-127">A database contains one or more tables that contain information &mdash; for example, tables for customers, orders, and vendors, or for students, teachers, classes, and grades.</span></span> <span data-ttu-id="2bac8-128">Структурно таблица базы данных похожа на электронную таблицу.</span><span class="sxs-lookup"><span data-stu-id="2bac8-128">Structurally, a database table is like a spreadsheet.</span></span> <span data-ttu-id="2bac8-129">Представьте типичную адресную книгу.</span><span class="sxs-lookup"><span data-stu-id="2bac8-129">Imagine a typical address book.</span></span> <span data-ttu-id="2bac8-130">Для каждой записи в адресной книге (т. е. для каждого пользователя) имеется несколько элементов информации, таких как имя, фамилия, адрес, адрес электронной почты и номер телефона.</span><span class="sxs-lookup"><span data-stu-id="2bac8-130">For each entry in the address book (that is, for each person) you have several pieces of information such as first name, last name, address, email address, and phone number.</span></span>

![Образец таблицы базы данных как простая сетка](displaying-data/_static/image2.png)

<span data-ttu-id="2bac8-132">(Строки иногда называют *записями*, а столбцы иногда называют *полями*.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-132">(Rows are sometimes referred to as *records*, and columns are sometimes referred to as *fields*.)</span></span>

<span data-ttu-id="2bac8-133">Для большинства таблиц базы данных таблица должна иметь столбец, содержащий уникальное значение, например номер клиента, номер счета и т. д.</span><span class="sxs-lookup"><span data-stu-id="2bac8-133">For most database tables, the table has to have a column that contains a unique value, like a customer number, account number, and so on.</span></span> <span data-ttu-id="2bac8-134">Это значение называется *первичным ключом*таблицы и используется для обнаружения каждой строки в таблице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-134">This value is known as the table's *primary key*, and you use it to identify each row in the table.</span></span> <span data-ttu-id="2bac8-135">В этом примере столбец ID является первичным ключом для адресной книги, показанной в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="2bac8-135">In the example, the ID column is the primary key for the address book shown in the previous example.</span></span>

<span data-ttu-id="2bac8-136">Большая часть работы, выполняемой в веб-приложениях, состоит из чтения информации из базы данных и ее отображения на странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-136">Much of the work you do in web applications consists of reading information out of the database and displaying it on a page.</span></span> <span data-ttu-id="2bac8-137">Вы также часто собираете сведения от пользователей и добавляете их в базу данных или изменяете записи, уже имеющиеся в базе данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-137">You'll also often gather information from users and add it to a database, or you'll modify records that are already in the database.</span></span> <span data-ttu-id="2bac8-138">(Мы обсудим все эти операции в ходе этого набора руководств.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-138">(We'll cover all of these operations in the course of this tutorial set.)</span></span>

<span data-ttu-id="2bac8-139">Работа базы данных может быть огромно сложной и может потребовать специального набора знаний.</span><span class="sxs-lookup"><span data-stu-id="2bac8-139">Database work can be enormously complex and can require specialized knowledge.</span></span> <span data-ttu-id="2bac8-140">Однако для этого руководства необходимо понимать только основные понятия, которые будут объяснены по мере того, как вы уходите.</span><span class="sxs-lookup"><span data-stu-id="2bac8-140">For this tutorial set, though, you have to understand only basic concepts, which will all be explained as you go.</span></span>

## <a name="creating-a-database"></a><span data-ttu-id="2bac8-141">Создание базы данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-141">Creating a Database</span></span>

<span data-ttu-id="2bac8-142">WebMatrix включает инструменты, упрощающие создание базы данных и создание таблиц в базе данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-142">WebMatrix includes tools that make it easy to create a database and to create tables in the database.</span></span> <span data-ttu-id="2bac8-143">(Структура базы данных называется *схемой*базы данных.) В этом руководстве вы создадите базу данных, которая содержит только одну таблицу &mdash; фильмов.</span><span class="sxs-lookup"><span data-stu-id="2bac8-143">(The structure of a database is referred to as the database's *schema*.) For this tutorial set, you'll create a database that has only one table in it &mdash; Movies.</span></span>

<span data-ttu-id="2bac8-144">Откройте WebMatrix, если вы еще этого не сделали, и откройте сайт Вебпажесмовиес, созданный в предыдущем руководстве.</span><span class="sxs-lookup"><span data-stu-id="2bac8-144">Open WebMatrix if you haven't already done so, and open the WebPagesMovies site that you created in the previous tutorial.</span></span>

<span data-ttu-id="2bac8-145">В левой области щелкните рабочую область **база данных** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-145">In the left pane, click the **Database** workspace.</span></span>

![Вкладка рабочей области базы данных WebMatrix](displaying-data/_static/image3.png)

<span data-ttu-id="2bac8-147">Лента изменится для отображения задач, связанных с базой данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-147">The ribbon changes to show database-related tasks.</span></span> <span data-ttu-id="2bac8-148">На ленте щелкните **Новая база данных**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-148">In the ribbon, click **New Database**.</span></span>

![Кнопка "создать базу данных" на ленте WebMatrix](displaying-data/_static/image4.png)

<span data-ttu-id="2bac8-150">WebMatrix создает базу данных SQL Server CE ( *SDF* -файл), имя которой совпадает с именем сайта &mdash; *вебпажесмовиес. sdf*.</span><span class="sxs-lookup"><span data-stu-id="2bac8-150">WebMatrix creates a SQL Server CE database (an *.sdf* file) that has the same name as your site &mdash; *WebPagesMovies.sdf*.</span></span> <span data-ttu-id="2bac8-151">(Это не будет сделано, но вы можете переименовать файл, если у него есть расширение *SDF* .)</span><span class="sxs-lookup"><span data-stu-id="2bac8-151">(You won't do this here, but you can rename the file to anything you like, as long as it has an *.sdf* extension.)</span></span>

## <a name="creating-a-table"></a><span data-ttu-id="2bac8-152">Создание таблицы</span><span class="sxs-lookup"><span data-stu-id="2bac8-152">Creating a Table</span></span>

<span data-ttu-id="2bac8-153">На ленте нажмите кнопку **создать таблицу**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-153">In the ribbon, click **New Table**.</span></span> <span data-ttu-id="2bac8-154">WebMatrix открывает Конструктор таблиц на новой вкладке. (если параметр новая таблица недоступен, убедитесь, что новая база данных выбрана в древовидном представлении слева.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-154">WebMatrix opens the table designer in a new tab. (If the New Table option isn't available, make sure that the new database is selected in the tree view on the left.)</span></span>

![Кнопка "создать таблицу" на ленте WebMatrix](displaying-data/_static/image5.png)

<span data-ttu-id="2bac8-156">В текстовом поле вверху (где водяной знак говорит "введите имя таблицы") введите "фильмы".</span><span class="sxs-lookup"><span data-stu-id="2bac8-156">In the text box at the top (where the watermark says "Enter table name"), enter "Movies".</span></span>

![Ввод имени таблицы в конструкторе баз данных WebMatrix](displaying-data/_static/image6.png)

<span data-ttu-id="2bac8-158">Область под именем таблицы определяет отдельные столбцы.</span><span class="sxs-lookup"><span data-stu-id="2bac8-158">The pane underneath the table name is where you define individual columns.</span></span> <span data-ttu-id="2bac8-159">Для таблицы *фильмов* в этом руководстве вы создадите всего несколько столбцов: *ID*, *Title*, *Жанр*и *year*.</span><span class="sxs-lookup"><span data-stu-id="2bac8-159">For the *Movies* table in this tutorial, you'll create only a few columns: *ID*, *Title*, *Genre*, and *Year*.</span></span>

<span data-ttu-id="2bac8-160">В поле **имя** введите "ID".</span><span class="sxs-lookup"><span data-stu-id="2bac8-160">In the **Name** box, enter "ID".</span></span> <span data-ttu-id="2bac8-161">Ввод значения здесь активирует все элементы управления для нового столбца.</span><span class="sxs-lookup"><span data-stu-id="2bac8-161">Entering a value here activates all the controls for the new column.</span></span>

<span data-ttu-id="2bac8-162">Перейдите к списку **тип данных** и выберите **int**. Это значение указывает, что столбец ИДЕНТИФИКАТОРов будет содержать целочисленные (числовые) данные.</span><span class="sxs-lookup"><span data-stu-id="2bac8-162">Tab to the **Data Type** list and choose **int**. This value specifies that the ID column will contain integer (number) data.</span></span>

> [!NOTE]
> <span data-ttu-id="2bac8-163">Мы не будем называть его здесь (много), но для навигации по этой сетке можно использовать стандартные жесты клавиатуры Windows.</span><span class="sxs-lookup"><span data-stu-id="2bac8-163">We won't call it out any more here (much), but you can use standard Windows keyboard gestures to navigate in this grid.</span></span> <span data-ttu-id="2bac8-164">Например, можно выполнить переход между полями, просто начать ввод, чтобы выбрать элемент в списке и т. д.</span><span class="sxs-lookup"><span data-stu-id="2bac8-164">For example, you can tab between fields, you can just start typing in order to select an item in a list, and so on.</span></span>

<span data-ttu-id="2bac8-165">После поля **значение по умолчанию** (то есть оставьте его пустым).</span><span class="sxs-lookup"><span data-stu-id="2bac8-165">Tab past the **Default Value** box (that is, leave it blank).</span></span> <span data-ttu-id="2bac8-166">Установите флажок **является первичным ключом** и выберите его.</span><span class="sxs-lookup"><span data-stu-id="2bac8-166">Tab to the **Is Primary Key** check box and select it.</span></span> <span data-ttu-id="2bac8-167">Этот параметр указывает базе данных, что столбец *идентификаторов* будет содержать данные, идентифицирующие отдельные строки.</span><span class="sxs-lookup"><span data-stu-id="2bac8-167">This option tells the database that the *ID* column will contain the data that identifies individual rows.</span></span> <span data-ttu-id="2bac8-168">(Т. е. Каждая строка будет иметь уникальное значение в столбце ID, которое можно использовать для поиска этой строки.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-168">(That is, each row will have a unique value in the ID column that you can use to find that row.)</span></span>

<span data-ttu-id="2bac8-169">Выберите параметр **является идентификатором** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-169">Choose the **Is Identity** option.</span></span> <span data-ttu-id="2bac8-170">Этот параметр указывает базе данных, что она должна автоматически формировать следующий последовательный номер для каждой новой строки.</span><span class="sxs-lookup"><span data-stu-id="2bac8-170">This option tells the database that it should automatically generate the next sequential number for each new row.</span></span> <span data-ttu-id="2bac8-171">(Параметр **является удостоверением** работает только в том случае, если выбран параметр **является первичным ключом** .)</span><span class="sxs-lookup"><span data-stu-id="2bac8-171">(The **Is Identity** option works only if you've also selected the **Is Primary Key** option.)</span></span>

<span data-ttu-id="2bac8-172">Щелкните в следующей строке сетки или дважды нажмите клавишу TAB, чтобы завершить текущую строку.</span><span class="sxs-lookup"><span data-stu-id="2bac8-172">Click in the next grid row, or press Tab twice to finish the current row.</span></span> <span data-ttu-id="2bac8-173">Любой жест сохраняет текущую строку и запускает следующую.</span><span class="sxs-lookup"><span data-stu-id="2bac8-173">Either gesture saves the current row and starts the next one.</span></span> <span data-ttu-id="2bac8-174">Обратите внимание, что в столбце **значение по умолчанию** теперь указано **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-174">Notice that the **Default Value** column now says **Null**.</span></span> <span data-ttu-id="2bac8-175">(Null является значением по умолчанию для значения по умолчанию, поэтому говорите.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-175">(Null is the default value for the default value, so to speak.)</span></span>

<span data-ttu-id="2bac8-176">Завершив определение нового столбца **идентификаторов** , конструктор будет выглядеть, как показано на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="2bac8-176">When you've finished defining the new **ID** column, the designer will look like this illustration:</span></span>

![Конструктор баз данных WebMatrix после определения столбца ИДЕНТИФИКАТОРов для таблицы фильмов](displaying-data/_static/image7.png)

<span data-ttu-id="2bac8-178">Чтобы создать следующий столбец, щелкните поле в столбце **имя** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-178">To create the next column, click in the box in the **Name** column.</span></span> <span data-ttu-id="2bac8-179">Введите "Title" для столбца, а затем выберите **nvarchar** в качестве значения **типа данных** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-179">Enter "Title" for the column and then select **nvarchar** for the **Data Type** value.</span></span> <span data-ttu-id="2bac8-180">Часть "var" в **nvarchar** сообщает базе данных, что данные для этого столбца будут строкой, размер которой может отличаться от записи к записи.</span><span class="sxs-lookup"><span data-stu-id="2bac8-180">The "var" part of **nvarchar** tells the database that the data for this column will be a string whose size might vary from record to record.</span></span> <span data-ttu-id="2bac8-181">(Префикс "n" представляет "Национальный", что означает, что поле может содержать символьные данные для любого алфавита или системы письма, то есть поле содержит данные в Юникоде.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-181">(The "n" prefix represents "national," which indicates that the field can hold character data for any alphabet or writing system — that is, the field holds Unicode data.)</span></span>

<span data-ttu-id="2bac8-182">При выборе **nvarchar**появляется другое поле, в котором можно ввести максимальную длину поля.</span><span class="sxs-lookup"><span data-stu-id="2bac8-182">When you choose **nvarchar**, another box appears where you can enter the maximum length for the field.</span></span> <span data-ttu-id="2bac8-183">Введите 50, предполагая, что ни одна из заголовков фильма, с которой вы будете работать в этом учебнике, будет длиннее 50 символов.</span><span class="sxs-lookup"><span data-stu-id="2bac8-183">Enter 50, on the assumption that no movie title that you'll work with in this tutorial will be longer than 50 characters.</span></span>

<span data-ttu-id="2bac8-184">Пропустить **значение по умолчанию** и снять флажок **Разрешить значения NULL** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-184">Skip **Default Value** and clear the **Allow Nulls** option.</span></span> <span data-ttu-id="2bac8-185">Вы не хотите, чтобы база данных разпускала фильмы в базе данных, у которой нет заголовка.</span><span class="sxs-lookup"><span data-stu-id="2bac8-185">You don't want the database to allow any movies to be entered into the database that don't have a title.</span></span>

<span data-ttu-id="2bac8-186">Когда все будет готово и переходим к следующей строке, конструктор будет выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2bac8-186">When you're done and move to the next row, the designer looks like this illustration:</span></span>

![Конструктор баз данных WebMatrix после определения столбца Title для таблицы Movies](displaying-data/_static/image8.png)

<span data-ttu-id="2bac8-188">Повторите эти действия, чтобы создать столбец с именем "Жанр", за исключением длины, для которого необходимо установить значение всего 30.</span><span class="sxs-lookup"><span data-stu-id="2bac8-188">Repeat these steps to create a column named "Genre", except for the length, set it to just 30.</span></span>

<span data-ttu-id="2bac8-189">Создайте другой столбец с именем «year».</span><span class="sxs-lookup"><span data-stu-id="2bac8-189">Create another column named "Year."</span></span> <span data-ttu-id="2bac8-190">Для параметра Тип данных выберите **nchar** (не **nvarchar**) и задайте для параметра Длина значение 4.</span><span class="sxs-lookup"><span data-stu-id="2bac8-190">For the data type, choose **nchar** (not **nvarchar**) and set the length to 4.</span></span> <span data-ttu-id="2bac8-191">В год вы будете использовать 4-значное число, например "1995" или "2010", поэтому не требуется столбец с переменным размером.</span><span class="sxs-lookup"><span data-stu-id="2bac8-191">For the year, you're going to use a 4-digit number like "1995" or "2010", so you don't require a variable-sized column.</span></span>

<span data-ttu-id="2bac8-192">Вот как выглядит завершенный проект:</span><span class="sxs-lookup"><span data-stu-id="2bac8-192">Here's what the finished design looks like:</span></span>

![Конструктор баз данных WebMatrix после определения всех полей для таблицы фильмов](displaying-data/_static/image9.png)

<span data-ttu-id="2bac8-194">Нажмите клавиши CTRL + S или кнопку **сохранить** на панели быстрого доступа.</span><span class="sxs-lookup"><span data-stu-id="2bac8-194">Press Ctrl+S or click the **Save** button in the Quick Access toolbar.</span></span> <span data-ttu-id="2bac8-195">Закройте конструктор баз данных, закрыв вкладку.</span><span class="sxs-lookup"><span data-stu-id="2bac8-195">Close the database designer by closing the tab.</span></span>

## <a name="adding-some-example-data"></a><span data-ttu-id="2bac8-196">Добавление примеров данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-196">Adding Some Example Data</span></span>

<span data-ttu-id="2bac8-197">Далее в этой серии руководств вы создадите страницу, на которой можно ввести новые фильмы в форме.</span><span class="sxs-lookup"><span data-stu-id="2bac8-197">Later in this tutorial series you'll create a page where you can enter new movies in a form.</span></span> <span data-ttu-id="2bac8-198">Однако теперь можно добавить некоторые примеры данных, которые затем можно отобразить на странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-198">For now, however, you can add some example data that you can then display on a page.</span></span>

<span data-ttu-id="2bac8-199">Обратите внимание, что в рабочей области **базы данных** в WebMatrix есть дерево, в котором отображается *SDF* -файл, созданный ранее.</span><span class="sxs-lookup"><span data-stu-id="2bac8-199">In the **Database** workspace in WebMatrix, notice that there's a tree that shows you the *.sdf* file you created earlier.</span></span> <span data-ttu-id="2bac8-200">Откройте узел для нового *SDF* файла, а затем откройте узел **таблицы** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-200">Open the node for your new *.sdf* file, and then open the **Tables** node.</span></span>

![Рабочая область базы данных WebMatrix с деревом, открываемом в таблицу фильмов](displaying-data/_static/image10.png)

<span data-ttu-id="2bac8-202">Щелкните правой кнопкой мыши узел **фильмы** и выберите пункт **данные**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-202">Right-click the **Movies** node and then choose **Data**.</span></span> <span data-ttu-id="2bac8-203">WebMatrix открывает сетку, в которой можно ввести данные для таблицы *фильмов* :</span><span class="sxs-lookup"><span data-stu-id="2bac8-203">WebMatrix opens a grid where you can enter data for the *Movies* table:</span></span>

![Сетка "запись базы данных" в WebMatrix (пусто)](displaying-data/_static/image11.png)

<span data-ttu-id="2bac8-205">Щелкните столбец **заголовок** и введите «когда Гарри соответствует Светлана».</span><span class="sxs-lookup"><span data-stu-id="2bac8-205">Click the **Title** column and enter "When Harry Met Sally".</span></span> <span data-ttu-id="2bac8-206">Перейдите к столбцу **Жанр** (можно использовать клавишу TAB) и введите "Романтик комедия".</span><span class="sxs-lookup"><span data-stu-id="2bac8-206">Move to the **Genre** column (you can use the Tab key) and enter "Romantic Comedy".</span></span> <span data-ttu-id="2bac8-207">Перейдите к столбцу **year** и введите "1989":</span><span class="sxs-lookup"><span data-stu-id="2bac8-207">Move to the **Year** column and enter "1989":</span></span>

![Сетка записей базы данных в WebMatrix с одной записью](displaying-data/_static/image12.png)

<span data-ttu-id="2bac8-209">Нажмите клавишу ВВОД, и WebMatrix сохранит новый фильм.</span><span class="sxs-lookup"><span data-stu-id="2bac8-209">Press Enter, and WebMatrix saves the new movie.</span></span> <span data-ttu-id="2bac8-210">Обратите внимание, что столбец **идентификатор** заполнен.</span><span class="sxs-lookup"><span data-stu-id="2bac8-210">Notice that the **ID** column has been filled in.</span></span>

![Сетка записей базы данных в WebMatrix с одной записью и автоматически созданным ИДЕНТИФИКАТОРом](displaying-data/_static/image13.png)

<span data-ttu-id="2bac8-212">Введите другой фильм (например, "пропало" Ветер "," драма "," 1939 ").</span><span class="sxs-lookup"><span data-stu-id="2bac8-212">Enter another movie (for example, "Gone with the Wind", "Drama", "1939").</span></span> <span data-ttu-id="2bac8-213">Столбец Идентификатор заполняется снова:</span><span class="sxs-lookup"><span data-stu-id="2bac8-213">The ID column is filled in again:</span></span>

![Сетка записей базы данных в WebMatrix с двумя записями и автоматически создаваемыми идентификаторами](displaying-data/_static/image14.png)

<span data-ttu-id="2bac8-215">Введите третий фильм (например, "Ghostbusters", "комедия").</span><span class="sxs-lookup"><span data-stu-id="2bac8-215">Enter a third movie (for example, "Ghostbusters", "Comedy").</span></span> <span data-ttu-id="2bac8-216">В качестве эксперимента оставьте столбец **year** пустым и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="2bac8-216">As an experiment, leave the **Year** column blank and then press Enter.</span></span> <span data-ttu-id="2bac8-217">Поскольку параметр **Разрешить значения NULL** не выбран, в базе данных отображается сообщение об ошибке:</span><span class="sxs-lookup"><span data-stu-id="2bac8-217">Because you unselected the **Allow Nulls** option, the database shows an error:</span></span>

![Если требуемое значение столбца оставлено пустым, отображается ошибка "недопустимые данные"](displaying-data/_static/image15.png)

<span data-ttu-id="2bac8-219">Нажмите кнопку " **ОК** ", чтобы вернуться и исправить запись (год для "Ghostbusters" — 1984), а затем нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="2bac8-219">Click **OK** to go back and fix the entry (the year for "Ghostbusters" is 1984), and then press Enter.</span></span>

<span data-ttu-id="2bac8-220">Заполните несколько фильмов, пока не появится 8 или нет.</span><span class="sxs-lookup"><span data-stu-id="2bac8-220">Fill in several movies until you have 8 or so.</span></span> <span data-ttu-id="2bac8-221">(Ввод 8 упрощает работу с подкачкой.</span><span class="sxs-lookup"><span data-stu-id="2bac8-221">(Entering 8 makes it easier to work with paging later.</span></span> <span data-ttu-id="2bac8-222">Но если это слишком много, введите всего несколько.) Фактические данные не важны.</span><span class="sxs-lookup"><span data-stu-id="2bac8-222">But if that's too many, enter just a few for now.) The actual data doesn't matter.</span></span>

![Сетка "запись базы данных" в WebMatrix с любыми записями](displaying-data/_static/image16.png)

<span data-ttu-id="2bac8-224">Если вы указали все фильмы без ошибок, значения ИДЕНТИФИКАТОРов будут последовательными.</span><span class="sxs-lookup"><span data-stu-id="2bac8-224">If you entered all the movies without any errors, the ID values are sequential.</span></span> <span data-ttu-id="2bac8-225">При попытке сохранить неполную запись фильма номера ИДЕНТИФИКАТОРов могут не быть последовательными.</span><span class="sxs-lookup"><span data-stu-id="2bac8-225">If you tried to save an incomplete movie record, the ID numbers might not be sequential.</span></span> <span data-ttu-id="2bac8-226">Если да, то это нормально.</span><span class="sxs-lookup"><span data-stu-id="2bac8-226">If so, that's okay.</span></span> <span data-ttu-id="2bac8-227">Эти числа не имеют смысла, и единственное, что важно, — это уникальные в таблице *фильмов* .</span><span class="sxs-lookup"><span data-stu-id="2bac8-227">The numbers don't have any inherent meaning, and the only thing that's important is that they're unique in the *Movies* table.</span></span>

<span data-ttu-id="2bac8-228">Закройте вкладку, содержащую конструктор баз данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-228">Close the tab that contains the database designer.</span></span>

<span data-ttu-id="2bac8-229">Теперь можно включить отображение этих данных на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-229">Now you can turn to displaying this data on a web page.</span></span>

## <a name="displaying-data-in-a-page-by-using-the-webgrid-helper"></a><span data-ttu-id="2bac8-230">Отображение данных на странице с помощью вспомогательной функции веб-сетки</span><span class="sxs-lookup"><span data-stu-id="2bac8-230">Displaying Data in a Page by Using the WebGrid Helper</span></span>

<span data-ttu-id="2bac8-231">Чтобы отобразить данные на странице, вы будете использовать вспомогательный метод `WebGrid`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-231">To display data in a page, you're going to use the `WebGrid` helper.</span></span> <span data-ttu-id="2bac8-232">Этот вспомогательный метод создает отображение в сетке или таблице (строки и столбцы).</span><span class="sxs-lookup"><span data-stu-id="2bac8-232">This helper produces a display in a grid or table (rows and columns).</span></span> <span data-ttu-id="2bac8-233">Как вы увидите, вы сможете уточнить сетку с помощью форматирования и других функций.</span><span class="sxs-lookup"><span data-stu-id="2bac8-233">As you'll see, you'll be able refine the grid with formatting and other features.</span></span>

<span data-ttu-id="2bac8-234">Чтобы запустить сетку, необходимо написать несколько строк кода.</span><span class="sxs-lookup"><span data-stu-id="2bac8-234">To run the grid, you'll have to write a few lines of code.</span></span> <span data-ttu-id="2bac8-235">Эти несколько строк будут служить шаблоном практически для всего доступа к данным, выполняемых в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="2bac8-235">These few lines will serve as a kind of pattern for almost all of the data access that you do in this tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="2bac8-236">У вас есть множество вариантов отображения данных на странице. `WebGrid` вспомогательное приложение — всего один.</span><span class="sxs-lookup"><span data-stu-id="2bac8-236">You actually have many options for displaying data on a page; the `WebGrid` helper is just one.</span></span> <span data-ttu-id="2bac8-237">Мы выбрали его для этого руководства, так как это самый простой способ отобразить данные и потому, что он достаточно гибок.</span><span class="sxs-lookup"><span data-stu-id="2bac8-237">We chose it for this tutorial because it's the easiest way to display data and because it's reasonably flexible.</span></span> <span data-ttu-id="2bac8-238">В следующем учебном курсе вы узнаете, как использовать более «ручную» способ работы с данными на странице, что обеспечивает более прямое управление отображением данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-238">In the next tutorial set, you'll see how to use a more "manual" way to work with data in the page, which gives you more direct control over how to display the data.</span></span>

<span data-ttu-id="2bac8-239">В левой области в WebMatrix щелкните рабочую область **файлы** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-239">In the left pane in WebMatrix, click the **Files** workspace.</span></span>

<span data-ttu-id="2bac8-240">Новая созданная база данных находится в папке *приложения\_данных* .</span><span class="sxs-lookup"><span data-stu-id="2bac8-240">The new database you created is in the *App\_Data* folder.</span></span> <span data-ttu-id="2bac8-241">Если папка еще не существует, WebMatrix создал ее для новой базы данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-241">If the folder didn't already exist, WebMatrix created it for your new database.</span></span> <span data-ttu-id="2bac8-242">(Возможно, папка существовала, если ранее были установлены вспомогательные методы.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-242">(The folder might have existed if you'd previously installed helpers.)</span></span>

<span data-ttu-id="2bac8-243">В древовидном представлении выберите корень веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="2bac8-243">In the tree view, select the root of the website.</span></span> <span data-ttu-id="2bac8-244">Необходимо выбрать корень веб-сайта; в противном случае новый файл может быть добавлен в папку приложения\_данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-244">You must select the root of the website; otherwise, the new file might be added to the App\_Data folder.</span></span>

<span data-ttu-id="2bac8-245">На ленте нажмите кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-245">In the ribbon, click **New**.</span></span> <span data-ttu-id="2bac8-246">В поле **выберите тип файла** выберите **CSHTML**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-246">In the **Choose a File Type** box, choose **CSHTML**.</span></span>

<span data-ttu-id="2bac8-247">В поле **имя** введите имя новой страницы "Movies. cshtml":</span><span class="sxs-lookup"><span data-stu-id="2bac8-247">In the **Name** box, name the new page "Movies.cshtml":</span></span>

![Диалоговое окно "Выбор типа файла", показывающее страницу "фильмы"](displaying-data/_static/image17.png)

<span data-ttu-id="2bac8-249">Нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="2bac8-249">Click the **OK** button.</span></span> <span data-ttu-id="2bac8-250">WebMatrix открывает новый файл с определенными скелетами элементов.</span><span class="sxs-lookup"><span data-stu-id="2bac8-250">WebMatrix opens a new file with some skeleton elements in it.</span></span> <span data-ttu-id="2bac8-251">Сначала вы напишете некоторый код для получения данных из базы данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-251">First you'll write some code to go get the data from the database.</span></span> <span data-ttu-id="2bac8-252">Затем вы добавите на страницу разметку для фактического вывода данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-252">Then you'll add markup to the page to actually display the data.</span></span>

### <a name="writing-the-data-query-code"></a><span data-ttu-id="2bac8-253">Написание кода запроса данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-253">Writing the Data Query Code</span></span>

<span data-ttu-id="2bac8-254">В верхней части страницы между `@{` и `}` символами введите следующий код.</span><span class="sxs-lookup"><span data-stu-id="2bac8-254">At the top of the page, between the `@{` and `}` characters, enter the following code.</span></span> <span data-ttu-id="2bac8-255">(Убедитесь, что этот код введен между открывающей и закрывающей фигурными скобками.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-255">(Make sure that you enter this code between the opening and closing braces.)</span></span>

[!code-csharp[Main](displaying-data/samples/sample1.cs)]

<span data-ttu-id="2bac8-256">Первая строка открывает созданную ранее базу данных, которая всегда является первым шагом перед выполнением чего-либо с базой данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-256">The first line opens the database that you created earlier, which is always the first step before doing something with the database.</span></span> <span data-ttu-id="2bac8-257">Вы указываете `Database.Open` имя метода для открытия базы данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-257">You tell the `Database.Open` method name of the database to open.</span></span> <span data-ttu-id="2bac8-258">Обратите внимание, что в имени не включен *SDF.*</span><span class="sxs-lookup"><span data-stu-id="2bac8-258">Notice that you don't include *.sdf* in the name.</span></span> <span data-ttu-id="2bac8-259">Метод `Open` предполагает, что ищется *SDF* -файл (то есть *вебпажесмовиес. sdf*), а *SDF* -файл находится в папке *app\_Data* .</span><span class="sxs-lookup"><span data-stu-id="2bac8-259">The `Open` method assumes that it's looking for an *.sdf* file (that is, *WebPagesMovies.sdf*) and that the *.sdf* file is in the *App\_Data* folder.</span></span> <span data-ttu-id="2bac8-260">(Ранее мы отмечали, что *приложение\_папки данных* является зарезервированным. Этот сценарий является одним из мест, где ASP.NET делает предположения об этом имени.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-260">(Earlier we noted that the *App\_Data* folder is reserved; this scenario is one of the places where ASP.NET makes assumptions about that name.)</span></span>

<span data-ttu-id="2bac8-261">При открытии базы данных ссылка на нее помещается в переменную с именем `db`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-261">When the database is opened, a reference to it is put into the variable named `db`.</span></span> <span data-ttu-id="2bac8-262">(Который может называться любым.) Переменная `db` — это то, как вы будете взаимодействовать с базой данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-262">(Which could be named anything.) The `db` variable is how you'll end up interacting with the database.</span></span>

<span data-ttu-id="2bac8-263">Вторая строка фактически извлекает данные базы данных с помощью метода `Query`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-263">The second line actually fetches the database data by using the `Query` method.</span></span> <span data-ttu-id="2bac8-264">Обратите внимание, как работает этот код: `db`ая переменная содержит ссылку на открытую базу данных, и метод `Query` вызывается с помощью `db` переменной (`db.Query`).</span><span class="sxs-lookup"><span data-stu-id="2bac8-264">Notice how this code works: the `db` variable has a reference to the opened database, and you invoke the `Query` method by using the `db` variable (`db.Query`).</span></span>

<span data-ttu-id="2bac8-265">Сам запрос является инструкцией SQL `Select`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-265">The query itself is a SQL `Select` statement.</span></span> <span data-ttu-id="2bac8-266">(Дополнительные сведения о SQL см. в описании ниже.) В инструкции `Movies` определяет таблицу для запроса.</span><span class="sxs-lookup"><span data-stu-id="2bac8-266">(For a little background about SQL, see the explanation later.) In the statement, `Movies` identifies the table to query.</span></span> <span data-ttu-id="2bac8-267">Символ `*` указывает, что запрос должен возвращать все столбцы из таблицы.</span><span class="sxs-lookup"><span data-stu-id="2bac8-267">The `*` character specifies that the query should return all the columns from the table.</span></span> <span data-ttu-id="2bac8-268">(Можно также вывести список столбцов по отдельности, разделяя их запятыми.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-268">(You could also list columns individually, separated by commas.)</span></span>

<span data-ttu-id="2bac8-269">Результаты запроса, если таковые имеются, возвращаются и становятся доступными в переменной `selectedData`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-269">The results of the query, if any, are returned and made available in the `selectedData` variable.</span></span> <span data-ttu-id="2bac8-270">Опять же, переменной можно присвоить любое имя.</span><span class="sxs-lookup"><span data-stu-id="2bac8-270">Again, the variable could be named anything.</span></span>

<span data-ttu-id="2bac8-271">Наконец, третья строка указывает ASP.NET, что вы хотите использовать экземпляр вспомогательного метода `WebGrid`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-271">Finally, the third line tells ASP.NET that you want to use an instance of the `WebGrid` helper.</span></span> <span data-ttu-id="2bac8-272">Объект вспомогательной*функции создается с*помощью ключевого слова `new` и передайте ему результаты запроса через переменную `selectedData`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-272">You create (*instantiate*) the helper object by using the `new` keyword and pass it the query results via the `selectedData` variable.</span></span> <span data-ttu-id="2bac8-273">Новый объект `WebGrid`, а также результаты запроса к базе данных становятся доступными в переменной `grid`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-273">The new `WebGrid` object, along with the results of the database query, are made available in the `grid` variable.</span></span> <span data-ttu-id="2bac8-274">Это потребует, чтобы в момент реального времени отображались данные на странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-274">You'll need that result in a moment to actually display the data in the page.</span></span>

<span data-ttu-id="2bac8-275">На этом этапе база данных была открыта, вы получили нужные данные и подготовили вспомогательную функцию `WebGrid` к этим данным.</span><span class="sxs-lookup"><span data-stu-id="2bac8-275">At this stage, the database has been opened, you've gotten the data you want, and you've prepared the `WebGrid` helper with that data.</span></span> <span data-ttu-id="2bac8-276">Далее необходимо создать разметку на странице.</span><span class="sxs-lookup"><span data-stu-id="2bac8-276">Next is to create the markup in the page.</span></span>

> [!TIP] 
> 
> <span data-ttu-id="2bac8-277">**Язык структурированных запросов (SQL)**</span><span class="sxs-lookup"><span data-stu-id="2bac8-277">**Structured Query Language (SQL)**</span></span>
> 
> <span data-ttu-id="2bac8-278">SQL — это язык, который используется в большинстве реляционных баз данных для управления данными в базе данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-278">SQL is a language that's used in most relational databases for managing data in a database.</span></span> <span data-ttu-id="2bac8-279">Она включает команды, позволяющие извлекать данные и обновлять их, а также позволять создавать, изменять и администрировать данные в таблицах базы данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-279">It includes commands that let you retrieve data and update it, and that let you create, modify, and manage data in database tables.</span></span> <span data-ttu-id="2bac8-280">SQL отличается от языка программирования (например C#,).</span><span class="sxs-lookup"><span data-stu-id="2bac8-280">SQL is different than a programming language (like C#).</span></span> <span data-ttu-id="2bac8-281">С помощью SQL вы указываете базе данных, что вам нужно, и это задача базы данных, чтобы выяснить, как получить данные или выполнить задачу.</span><span class="sxs-lookup"><span data-stu-id="2bac8-281">With SQL, you tell the database what you want, and it's the database's job to figure out how to get the data or perform the task.</span></span> <span data-ttu-id="2bac8-282">Ниже приведены примеры некоторых команд SQL и их действия.</span><span class="sxs-lookup"><span data-stu-id="2bac8-282">Here are examples of some SQL commands and what they do:</span></span>
> 
> `Select * From Movies`
> 
> `SELECT ID, Name, Price FROM Product WHERE Price > 10.00 ORDER BY Name`
> 
> <span data-ttu-id="2bac8-283">Первая инструкция `Select` получает все столбцы (заданные `*`) из таблицы *Movies* .</span><span class="sxs-lookup"><span data-stu-id="2bac8-283">The first `Select` statement gets all the columns (specified by `*`) from the *Movies* table.</span></span>
> 
> <span data-ttu-id="2bac8-284">Вторая инструкция `Select` извлекает столбцы ID, Name и Price из записей в таблице *Product* , значение столбца price которых больше 10.</span><span class="sxs-lookup"><span data-stu-id="2bac8-284">The second `Select` statement fetches the ID, Name, and Price columns from records in the *Product* table whose Price column value is more than 10.</span></span> <span data-ttu-id="2bac8-285">Команда возвращает результаты в алфавитном порядке на основе значений столбца Name.</span><span class="sxs-lookup"><span data-stu-id="2bac8-285">The command returns the results in alphabetical order based on the values of the Name column.</span></span> <span data-ttu-id="2bac8-286">Если ни одна из записей не соответствует критериям цены, команда возвращает пустой набор.</span><span class="sxs-lookup"><span data-stu-id="2bac8-286">If no records match the price criteria, the command returns an empty set.</span></span>
> 
> `INSERT INTO Product (Name, Description, Price) VALUES ('Croissant', 'A flaky delight', 1.99)`
> 
> <span data-ttu-id="2bac8-287">Эта команда вставляет новую запись в таблицу *Product* , присвоив столбцу Name значение «круассан», столбец Description — «a ненадежных удовлетворения запросов» и цену 1,99.</span><span class="sxs-lookup"><span data-stu-id="2bac8-287">This command inserts a new record into the *Product* table, setting the Name column to "Croissant", the Description column to "A flaky delight", and the price to 1.99.</span></span>
> 
> <span data-ttu-id="2bac8-288">Обратите внимание, что при указании нечислового значения значение заключается в одинарные кавычки (не в двойные кавычки C#, как в).</span><span class="sxs-lookup"><span data-stu-id="2bac8-288">Notice that when you're specifying a non-numeric value, the value is enclosed in single quotation marks (not double quotation marks, as in C#).</span></span> <span data-ttu-id="2bac8-289">Эти кавычки следует использовать вокруг текста или значений дат, но не вокруг чисел.</span><span class="sxs-lookup"><span data-stu-id="2bac8-289">You use these quotation marks around text or date values, but not around numbers.</span></span>
> 
> `DELETE FROM Product WHERE ExpirationDate < '01/01/2008'`
> 
> <span data-ttu-id="2bac8-290">Эта команда удаляет записи в таблице *Product* , столбец даты окончания срока действия которых предшествует 1 января 2008.</span><span class="sxs-lookup"><span data-stu-id="2bac8-290">This command deletes records in the *Product* table whose expiration date column is earlier than January 1, 2008.</span></span> <span data-ttu-id="2bac8-291">(В команде предполагается, что таблица *Product* содержит такой столбец, конечно,.) Дата вводится в формате мм/дд/гггг, но она должна быть введена в формате, используемом для вашего языкового стандарта.</span><span class="sxs-lookup"><span data-stu-id="2bac8-291">(The command assumes that the *Product* table has such a column, of course.) The date is entered here in MM/DD/YYYY format, but it should be entered in the format that's used for your locale.</span></span>
> 
> <span data-ttu-id="2bac8-292">Команды `Insert` и `Delete` не возвращают результирующие наборы.</span><span class="sxs-lookup"><span data-stu-id="2bac8-292">The `Insert` and `Delete` commands don't return result sets.</span></span> <span data-ttu-id="2bac8-293">Вместо этого они возвращают число, которое показывает, сколько записей было затронуто командой.</span><span class="sxs-lookup"><span data-stu-id="2bac8-293">Instead, they return a number that tells you how many records were affected by the command.</span></span>
> 
> <span data-ttu-id="2bac8-294">Для некоторых из этих операций (например, для вставки и удаления записей) процесс, запрашивающий операцию, должен иметь соответствующие разрешения в базе данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-294">For some of these operations (like inserting and deleting records), the process that's requesting the operation has to have appropriate permissions in the database.</span></span> <span data-ttu-id="2bac8-295">Именно поэтому для рабочих баз данных часто приходится вводить имя пользователя и пароль при подключении к базе данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-295">That's why for production databases you often have to supply a user name and password when you connect to the database.</span></span>
> 
> <span data-ttu-id="2bac8-296">Существует десятка команд SQL, но все они следуют шаблону, как показано здесь.</span><span class="sxs-lookup"><span data-stu-id="2bac8-296">There are dozens of SQL commands, but they all follow a pattern like the commands you see here.</span></span> <span data-ttu-id="2bac8-297">Команды SQL можно использовать для создания таблиц базы данных, подсчета количества записей в таблице, вычисления цен и выполнения многих других операций.</span><span class="sxs-lookup"><span data-stu-id="2bac8-297">You can use SQL commands to create database tables, count the number of records in a table, calculate prices, and perform many more operations.</span></span>

### <a name="adding-markup-to-display-the-data"></a><span data-ttu-id="2bac8-298">Добавление разметки для вывода данных</span><span class="sxs-lookup"><span data-stu-id="2bac8-298">Adding Markup to Display the Data</span></span>

<span data-ttu-id="2bac8-299">В элементе `<head>` установите содержимое элемента `<title>` в значение "фильмы":</span><span class="sxs-lookup"><span data-stu-id="2bac8-299">Inside the `<head>` element, set contents of the `<title>` element to "Movies":</span></span>

[!code-html[Main](displaying-data/samples/sample2.html?highlight=3)]

<span data-ttu-id="2bac8-300">В элементе `<body>` страницы добавьте следующее:</span><span class="sxs-lookup"><span data-stu-id="2bac8-300">Inside the `<body>` element of the page, add the following:</span></span>

[!code-html[Main](displaying-data/samples/sample3.html)]

<span data-ttu-id="2bac8-301">Вот и все.</span><span class="sxs-lookup"><span data-stu-id="2bac8-301">That's it.</span></span> <span data-ttu-id="2bac8-302">Переменная `grid` — это значение, которое вы создали при создании объекта `WebGrid` в коде ранее.</span><span class="sxs-lookup"><span data-stu-id="2bac8-302">The `grid` variable is the value you created when you created the `WebGrid` object in code earlier.</span></span>

<span data-ttu-id="2bac8-303">В представлении дерева WebMatrix щелкните страницу правой кнопкой мыши и выберите **запустить в браузере**.</span><span class="sxs-lookup"><span data-stu-id="2bac8-303">In the WebMatrix tree view, right-click the page and select **Launch in browser**.</span></span> <span data-ttu-id="2bac8-304">Вы увидите нечто вроде этой страницы:</span><span class="sxs-lookup"><span data-stu-id="2bac8-304">You'll see something like this page:</span></span>

![Выходные данные вспомогательного метода сетки по умолчанию из таблицы фильмов](displaying-data/_static/image18.png)

<span data-ttu-id="2bac8-306">Щелкните ссылку на заголовок столбца, чтобы выполнить сортировку по этому столбцу.</span><span class="sxs-lookup"><span data-stu-id="2bac8-306">Click a column heading link to sort by that column.</span></span> <span data-ttu-id="2bac8-307">Возможность сортировки по щелчку заголовка — это функция, встроенная в вспомогательную функцию " **Сетка** ".</span><span class="sxs-lookup"><span data-stu-id="2bac8-307">Being able to sort by clicking a heading is a feature that's built into the **WebGrid** helper.</span></span>

<span data-ttu-id="2bac8-308">Метод `GetHtml`, как предполагает его название, создает разметку, отображающую данные.</span><span class="sxs-lookup"><span data-stu-id="2bac8-308">The `GetHtml` method, as its name suggests, generates markup that displays the data.</span></span> <span data-ttu-id="2bac8-309">По умолчанию метод `GetHtml` создает HTML-элемент `<table>`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-309">By default, the `GetHtml` method generates an HTML `<table>` element.</span></span> <span data-ttu-id="2bac8-310">(При необходимости можно проверить отрисовку, просмотрев источник страницы в браузере.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-310">(If you want, you can verify the rendering by looking at the source of the page in the browser.)</span></span>

## <a name="modifying-the-look-of-the-grid"></a><span data-ttu-id="2bac8-311">Изменение вида сетки</span><span class="sxs-lookup"><span data-stu-id="2bac8-311">Modifying the Look of the Grid</span></span>

<span data-ttu-id="2bac8-312">Использование вспомогательного метода `WebGrid`, как вы только что сделали, очень просто, но полученный результат является простым.</span><span class="sxs-lookup"><span data-stu-id="2bac8-312">Using the `WebGrid` helper like you just did is easy, but the resulting display is plain.</span></span> <span data-ttu-id="2bac8-313">У вспомогательного модуля `WebGrid` есть все виды параметров, позволяющие управлять отображением данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-313">The `WebGrid` helper has all sorts of options that let you control how the data is displayed.</span></span> <span data-ttu-id="2bac8-314">В этом учебнике слишком много для изучения, но в этом разделе вы получите представление о некоторых из этих вариантов.</span><span class="sxs-lookup"><span data-stu-id="2bac8-314">There are far too many to explore in this tutorial, but this section will give you an idea of some of those options.</span></span> <span data-ttu-id="2bac8-315">В последующих руководствах этой серии будут рассмотрены некоторые дополнительные параметры.</span><span class="sxs-lookup"><span data-stu-id="2bac8-315">A few additional options will be covered in later tutorials in this series.</span></span>

### <a name="specifying-individual-columns-to-display"></a><span data-ttu-id="2bac8-316">Указание отдельных отображаемых столбцов</span><span class="sxs-lookup"><span data-stu-id="2bac8-316">Specifying Individual Columns to Display</span></span>

<span data-ttu-id="2bac8-317">Для начала можно указать, что необходимо отображать только определенные столбцы.</span><span class="sxs-lookup"><span data-stu-id="2bac8-317">To start, you can specify that you want to display only certain columns.</span></span> <span data-ttu-id="2bac8-318">По умолчанию, как вы видели, в сетке показаны все четыре столбца из таблицы *фильмов* .</span><span class="sxs-lookup"><span data-stu-id="2bac8-318">By default, as you've seen, the grid shows all four of the columns from the *Movies* table.</span></span>

<span data-ttu-id="2bac8-319">В файле *movies. cshtml* замените только что добавленную разметку `@grid.GetHtml()` следующим:</span><span class="sxs-lookup"><span data-stu-id="2bac8-319">In the *Movies.cshtml* file, replace the `@grid.GetHtml()` markup that you just added with the following:</span></span>

[!code-css[Main](displaying-data/samples/sample4.css)]

<span data-ttu-id="2bac8-320">Чтобы сообщить вспомогательной функции о отображаемых столбцах, включите параметр `columns` для метода `GetHtml` и передайте коллекцию столбцов.</span><span class="sxs-lookup"><span data-stu-id="2bac8-320">To tell the helper which columns to display, you include a `columns` parameter for the `GetHtml` method and pass in a collection of columns.</span></span> <span data-ttu-id="2bac8-321">В коллекции укажите каждый столбец для включения.</span><span class="sxs-lookup"><span data-stu-id="2bac8-321">In the collection, you specify each column to include.</span></span> <span data-ttu-id="2bac8-322">Можно указать отдельный столбец для вывода, включив объект `grid.Column` и передав имя нужного столбца данных.</span><span class="sxs-lookup"><span data-stu-id="2bac8-322">You specify an individual column to display by including a `grid.Column` object, and pass in the name of the data column you want.</span></span> <span data-ttu-id="2bac8-323">(Эти столбцы должны включаться в результаты запроса SQL — `WebGrid` вспомогательный объект не может отображать столбцы, которые не были возвращены запросом.)</span><span class="sxs-lookup"><span data-stu-id="2bac8-323">(These columns must be included in the SQL query results — the `WebGrid` helper cannot display columns that were not returned by the query.)</span></span>

<span data-ttu-id="2bac8-324">Снова запустите страницу *movies. cshtml* в браузере, и на этот раз отобразится сообщение следующего вида (Обратите внимание, что столбец ID не отображается):</span><span class="sxs-lookup"><span data-stu-id="2bac8-324">Launch the *Movies.cshtml* page in the browser again, and this time you get a display like the following one (notice that no ID column is displayed):</span></span>

![Отображение только выбранных столбцов в сетке](displaying-data/_static/image19.png)

### <a name="changing-the-look-of-the-grid"></a><span data-ttu-id="2bac8-326">Изменение вида сетки</span><span class="sxs-lookup"><span data-stu-id="2bac8-326">Changing the Look of the Grid</span></span>

<span data-ttu-id="2bac8-327">Существует несколько дополнительных параметров для отображения столбцов, некоторые из которых будут рассмотрены в последующих руководствах в этом наборе.</span><span class="sxs-lookup"><span data-stu-id="2bac8-327">There are quite a few more options for displaying columns, some of which will be explored in later tutorials in this set.</span></span> <span data-ttu-id="2bac8-328">Сейчас в этом разделе будут представлены способы применения стиля сетки в целом.</span><span class="sxs-lookup"><span data-stu-id="2bac8-328">For now, this section will introduce you to ways in which you can style the grid as a whole.</span></span>

<span data-ttu-id="2bac8-329">В разделе `<head>` страницы непосредственно перед закрывающим тегом `</head>` добавьте следующий элемент `<style>`:</span><span class="sxs-lookup"><span data-stu-id="2bac8-329">Inside the `<head>` section of the page, just before the closing `</head>` tag, add the following `<style>` element:</span></span>

[!code-css[Main](displaying-data/samples/sample5.css)]

<span data-ttu-id="2bac8-330">Эта разметка CSS определяет классы с именами `grid`, `head`и т. д.</span><span class="sxs-lookup"><span data-stu-id="2bac8-330">This CSS markup defines classes named `grid`, `head`, and so on.</span></span> <span data-ttu-id="2bac8-331">Эти определения стилей также можно разместить в отдельном *CSS* -файле и связать его со страницей.</span><span class="sxs-lookup"><span data-stu-id="2bac8-331">You could also put these style definitions in a separate *.css* file and link that to the page.</span></span> <span data-ttu-id="2bac8-332">(На самом деле это будет сделано далее в этом руководстве.) Но для упрощения работы с этим руководством они находятся на той же странице, где отображаются данные.</span><span class="sxs-lookup"><span data-stu-id="2bac8-332">(In fact, you'll do that later in this tutorial set.) But to make things easy for this tutorial, they're inside the same page that displays the data.</span></span>

<span data-ttu-id="2bac8-333">Теперь можно получить вспомогательный модуль `WebGrid` для использования этих классов стилей.</span><span class="sxs-lookup"><span data-stu-id="2bac8-333">Now you can get the `WebGrid` helper to use these style classes.</span></span> <span data-ttu-id="2bac8-334">У вспомогательного приложения есть ряд свойств (например, `tableStyle`) только для этой цели — для них назначается имя класса стиля CSS, а имя класса отображается как часть разметки, отображаемой вспомогательным приложением.</span><span class="sxs-lookup"><span data-stu-id="2bac8-334">The helper has a number of properties (for example, `tableStyle`) for just this purpose — you assign a CSS style class name to them, and that class name is rendered as part of the markup that's rendered by the helper.</span></span>

<span data-ttu-id="2bac8-335">Измените разметку `grid.GetHtml`, чтобы она теперь выглядела как следующий код:</span><span class="sxs-lookup"><span data-stu-id="2bac8-335">Change the `grid.GetHtml` markup so that it now looks like this code:</span></span>

[!code-css[Main](displaying-data/samples/sample6.css)]

<span data-ttu-id="2bac8-336">Новые возможности в том, что в метод `GetHtml` добавлены параметры `tableStyle`, `headerStyle`и `alternatingRowStyle`.</span><span class="sxs-lookup"><span data-stu-id="2bac8-336">What's new here is that you've added `tableStyle`, `headerStyle`, and `alternatingRowStyle` parameters to the `GetHtml` method.</span></span> <span data-ttu-id="2bac8-337">Для этих параметров были заданы имена стилей CSS, добавленных к моменту назад.</span><span class="sxs-lookup"><span data-stu-id="2bac8-337">These parameters have been set to the names of the CSS styles that you added a moment ago.</span></span>

<span data-ttu-id="2bac8-338">Запустите страницу, и на этот раз вы увидите сетку, которая выглядит гораздо менее простой, чем раньше.</span><span class="sxs-lookup"><span data-stu-id="2bac8-338">Run the page, and this time you see a grid that looks much less plain than before:</span></span>

![Отображение сетки, включающее параметры, для которых заданы имена классов CSS](displaying-data/_static/image20.png)

<span data-ttu-id="2bac8-340">Чтобы увидеть, что создает метод `GetHtml`, можно взглянуть на источник страницы в браузере.</span><span class="sxs-lookup"><span data-stu-id="2bac8-340">To see what the `GetHtml` method generated, you can look at the source of the page in the browser.</span></span> <span data-ttu-id="2bac8-341">Здесь мы не будем подробно рассматриваться, но важно отметить, что при указании таких параметров, как `tableStyle`, в сетке создаются HTML-теги следующего вида:</span><span class="sxs-lookup"><span data-stu-id="2bac8-341">We won't go into detail here, but the important point is that by specifying parameters like `tableStyle`, you caused the grid to generate HTML tags like the following:</span></span>

`<table class="grid">`

<span data-ttu-id="2bac8-342">К тегу `<table>` был добавлен атрибут `class`, который ссылается на одно из добавленных ранее правил CSS.</span><span class="sxs-lookup"><span data-stu-id="2bac8-342">The `<table>` tag has had a `class` attribute added to it that references one of the CSS rules that you added earlier.</span></span> <span data-ttu-id="2bac8-343">Этот код показывает базовый шаблон, &mdash; различные параметры для метода `GetHtml` позволяют ссылаться на классы CSS, которые затем создаются методом вместе с разметкой.</span><span class="sxs-lookup"><span data-stu-id="2bac8-343">This code shows you the basic pattern &mdash; different parameters for the `GetHtml` method let you reference CSS classes that the method then generates along with the markup.</span></span> <span data-ttu-id="2bac8-344">То, что вы выполняете с классами CSS, является готовым к вам.</span><span class="sxs-lookup"><span data-stu-id="2bac8-344">What you do with the CSS classes is up to you.</span></span>

## <a name="adding-paging"></a><span data-ttu-id="2bac8-345">Добавление разбиения на страницы</span><span class="sxs-lookup"><span data-stu-id="2bac8-345">Adding Paging</span></span>

<span data-ttu-id="2bac8-346">В качестве последней задачи в этом руководстве вы добавите разбиение по страницам к сетке.</span><span class="sxs-lookup"><span data-stu-id="2bac8-346">As the last task for this tutorial, you'll add paging to the grid.</span></span> <span data-ttu-id="2bac8-347">Сейчас у вас нет проблем с отображением всех фильмов одновременно.</span><span class="sxs-lookup"><span data-stu-id="2bac8-347">Right now it's no problem to display all your movies at once.</span></span> <span data-ttu-id="2bac8-348">Но если вы добавили сотни фильмов, отображение страницы будет иметь большую длину.</span><span class="sxs-lookup"><span data-stu-id="2bac8-348">But if you added hundreds of movies, the page display would get long.</span></span>

<span data-ttu-id="2bac8-349">В коде страницы измените строку, которая создает объект `WebGrid`, на следующий код:</span><span class="sxs-lookup"><span data-stu-id="2bac8-349">In the page code, change the line that creates the `WebGrid` object to the following code:</span></span>

[!code-csharp[Main](displaying-data/samples/sample7.cs)]

<span data-ttu-id="2bac8-350">Единственное отличие от ранее заключается в том, что добавлен параметр `rowsPerPage`, для которого задано значение 3.</span><span class="sxs-lookup"><span data-stu-id="2bac8-350">The only difference from before is that you've added a `rowsPerPage` parameter that's set to 3.</span></span>

<span data-ttu-id="2bac8-351">Запустите страницу.</span><span class="sxs-lookup"><span data-stu-id="2bac8-351">Run the page.</span></span> <span data-ttu-id="2bac8-352">В сетке отображаются три строки за раз, а также ссылки навигации, позволяющие пролистывать фильмы в базе данных:</span><span class="sxs-lookup"><span data-stu-id="2bac8-352">The grid displays 3 rows at a time, plus navigation links that let you page through the movies in your database:</span></span>

![Отображение сетки с разбиением на страницы](displaying-data/_static/image21.png)

## <a name="coming-up-next"></a><span data-ttu-id="2bac8-354">Далее</span><span class="sxs-lookup"><span data-stu-id="2bac8-354">Coming Up Next</span></span>

<span data-ttu-id="2bac8-355">В следующем руководстве вы узнаете, как использовать Razor и C# код для получения вводимых пользователем данных в форме.</span><span class="sxs-lookup"><span data-stu-id="2bac8-355">In the next tutorial, you'll learn how to use Razor and C# code to get user input in a form.</span></span> <span data-ttu-id="2bac8-356">Вы добавите поле поиска на страницу фильмов, чтобы можно было найти фильмы по названию или жанру.</span><span class="sxs-lookup"><span data-stu-id="2bac8-356">You'll add a search box to the Movies page so that you can find movies by title or genre.</span></span>

## <a name="complete-listing-for-movies-page"></a><span data-ttu-id="2bac8-357">Полный список для страницы фильмов</span><span class="sxs-lookup"><span data-stu-id="2bac8-357">Complete Listing for Movies Page</span></span>

[!code-cshtml[Main](displaying-data/samples/sample8.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="2bac8-358">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="2bac8-358">Additional Resources</span></span>

- [<span data-ttu-id="2bac8-359">Введение в веб-программирование ASP.NET с использованием синтаксиса Razor</span><span class="sxs-lookup"><span data-stu-id="2bac8-359">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)

> [!div class="step-by-step"]
> <span data-ttu-id="2bac8-360">[Назад](intro-to-web-pages-programming.md)
> [Вперед](form-basics.md)</span><span class="sxs-lookup"><span data-stu-id="2bac8-360">[Previous](intro-to-web-pages-programming.md)
[Next](form-basics.md)</span></span>
