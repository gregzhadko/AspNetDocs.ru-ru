---
uid: web-pages/overview/getting-started/11-adding-email-to-your-web-site
title: Отправка электронной почты с сайта веб-страницы ASP.NET (Razor) | Документация Майкрософт
author: Rick-Anderson
description: В этой главе объясняется, как отправить автоматизированное сообщение электронной почты с веб-сайта.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: fc49bcb9-f1a9-4048-8c3f-b60951853200
msc.legacyurl: /web-pages/overview/getting-started/11-adding-email-to-your-web-site
msc.type: authoredcontent
ms.openlocfilehash: 23e9717329525fb5a0ed505c9dc94505d4f9dbbe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78515328"
---
# <a name="sending-email-from-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="22df3-103">Отправка электронной почты с сайта веб-страницы ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="22df3-103">Sending Email from an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="22df3-104">от [Tom фитзмаккен](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="22df3-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="22df3-105">В этой статье объясняется, как отправить сообщение электронной почты с веб-сайта при использовании веб-страницы ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="22df3-105">This article explains how to send an email message from a website when you use ASP.NET Web Pages (Razor).</span></span>
> 
> <span data-ttu-id="22df3-106">Из этого руководства вы узнаете, как выполнять такие задачи:</span><span class="sxs-lookup"><span data-stu-id="22df3-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="22df3-107">Отправка сообщения электронной почты с веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="22df3-107">How to send an email message from your website.</span></span>
> - <span data-ttu-id="22df3-108">Как присоединить файл к сообщению электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-108">How to attach a file to an email message.</span></span>
> 
> <span data-ttu-id="22df3-109">Это функция ASP.NET, представленная в статье:</span><span class="sxs-lookup"><span data-stu-id="22df3-109">This is the ASP.NET feature introduced in the article:</span></span>
> 
> - <span data-ttu-id="22df3-110">Вспомогательный метод `WebMail`.</span><span class="sxs-lookup"><span data-stu-id="22df3-110">The `WebMail` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="22df3-111">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="22df3-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="22df3-112">Веб-страницы ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="22df3-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="22df3-113">Этот учебник также работает с веб-страницы ASP.NET 2.</span><span class="sxs-lookup"><span data-stu-id="22df3-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<a id="Sending_Email_Messages"></a>
## <a name="sending-email-messages-from-your-website"></a><span data-ttu-id="22df3-114">Отправка сообщений электронной почты с веб-сайта</span><span class="sxs-lookup"><span data-stu-id="22df3-114">Sending Email Messages from Your Website</span></span>

<span data-ttu-id="22df3-115">Существует ряд причин, по которым может потребоваться отправить электронное сообщение с веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="22df3-115">There are all sorts of reasons why you might need to send email from your website.</span></span> <span data-ttu-id="22df3-116">Вы можете отправлять пользователям сообщения о подтверждении или отправлять вам уведомления (например, о том, что зарегистрирован новый пользователь). `WebMail` вспомогательное приложение упрощает отправку электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-116">You might send confirmation messages to users, or you might send notifications to yourself (for example, that a new user has registered.) The `WebMail` helper makes it easy for you to send email.</span></span>

<span data-ttu-id="22df3-117">Для использования вспомогательного метода `WebMail` необходимо иметь доступ к SMTP-серверу.</span><span class="sxs-lookup"><span data-stu-id="22df3-117">To use the `WebMail` helper, you have to have access to an SMTP server.</span></span> <span data-ttu-id="22df3-118">(SMTP обозначает *протокол простого обмена электронной почтой*.) SMTP-сервер — это сервер электронной почты, который перенаправляет сообщения только на сервер &#8212; получателя. это исходящая сторона электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-118">(SMTP stands for *Simple Mail Transfer Protocol*.) An SMTP server is an email server that only forwards messages to the recipient's server &#8212; it's the outbound side of email.</span></span> <span data-ttu-id="22df3-119">Если для веб-сайта используется поставщик услуг размещения, то, скорее всего, он настроил электронную почту и сообщит вам, что такое имя SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-119">If you use a hosting provider for your website, they probably set you up with email and they can tell you what your SMTP server name is.</span></span> <span data-ttu-id="22df3-120">Если вы работаете внутри корпоративной сети, администратор или ИТ-отдел обычно предоставляют сведения о том, что именно вы можете использовать.</span><span class="sxs-lookup"><span data-stu-id="22df3-120">If you're working inside a corporate network, an administrator or your IT department can usually give you the information about an SMTP server that you can use.</span></span> <span data-ttu-id="22df3-121">Если вы работаете дома, вы даже сможете протестировать его с помощью обычного поставщика электронной почты, который может сообщить вам имя своего SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-121">If you're working at home, you might even be able to test using your ordinary email provider, who can tell you the name of their SMTP server.</span></span> <span data-ttu-id="22df3-122">Обычно требуется:</span><span class="sxs-lookup"><span data-stu-id="22df3-122">You typically need:</span></span>

- <span data-ttu-id="22df3-123">Имя SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-123">The name of the SMTP server.</span></span>
- <span data-ttu-id="22df3-124">Номер порта.</span><span class="sxs-lookup"><span data-stu-id="22df3-124">The port number.</span></span> <span data-ttu-id="22df3-125">Это почти всегда 25.</span><span class="sxs-lookup"><span data-stu-id="22df3-125">This is almost always 25.</span></span> <span data-ttu-id="22df3-126">Однако поставщик услуг Интернета может потребовать использовать порт 587.</span><span class="sxs-lookup"><span data-stu-id="22df3-126">However, your ISP may require you to use port 587.</span></span> <span data-ttu-id="22df3-127">Если для электронной почты используется протокол SSL, может потребоваться другой порт.</span><span class="sxs-lookup"><span data-stu-id="22df3-127">If you are using secure sockets layer (SSL) for email, you might need a different port.</span></span> <span data-ttu-id="22df3-128">Обратитесь к поставщику электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-128">Check with your email provider.</span></span>
- <span data-ttu-id="22df3-129">Учетные данные (имя пользователя, пароль).</span><span class="sxs-lookup"><span data-stu-id="22df3-129">Credentials (user name, password).</span></span>

<span data-ttu-id="22df3-130">В этой процедуре создаются две страницы.</span><span class="sxs-lookup"><span data-stu-id="22df3-130">In this procedure, you create two pages.</span></span> <span data-ttu-id="22df3-131">Первая страница имеет форму, которая позволяет пользователям ввести описание, как если бы оно заполнило форму технической поддержки.</span><span class="sxs-lookup"><span data-stu-id="22df3-131">The first page has a form that lets users enter a description, as if they were filling in a technical-support form.</span></span> <span data-ttu-id="22df3-132">Первая страница отправляет свои сведения на вторую страницу.</span><span class="sxs-lookup"><span data-stu-id="22df3-132">The first page submits its information to a second page.</span></span> <span data-ttu-id="22df3-133">На второй странице код извлекает сведения о пользователе и отправляет сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-133">In the second page, code extracts the user's information and sends an email message.</span></span> <span data-ttu-id="22df3-134">В нем также отображается сообщение, подтверждающее получение отчета о проблеме.</span><span class="sxs-lookup"><span data-stu-id="22df3-134">It also displays a message confirming that the problem report has been received.</span></span>

![[образ]](11-adding-email-to-your-web-site/_static/image1.jpg)

> [!NOTE]
> <span data-ttu-id="22df3-136">Чтобы сделать этот пример простым, код инициализирует вспомогательный модуль `WebMail` прямо на странице, где она используется.</span><span class="sxs-lookup"><span data-stu-id="22df3-136">To keep this example simple, the code initializes the `WebMail` helper right in the page where you use it.</span></span> <span data-ttu-id="22df3-137">Однако для реальных веб-сайтов лучше размещать код инициализации, подобный этому, в глобальном файле, чтобы инициализировать вспомогательный модуль `WebMail` для всех файлов на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="22df3-137">However, for real websites, it's a better idea to put initialization code like this in a global file, so that you initialize the `WebMail` helper for all files in your website.</span></span> <span data-ttu-id="22df3-138">Дополнительные сведения см. в разделе [Настройка поведения всего сайта для веб-страницы ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span><span class="sxs-lookup"><span data-stu-id="22df3-138">For more information, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span></span>

1. <span data-ttu-id="22df3-139">Создайте новый веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="22df3-139">Create a new website.</span></span>
2. <span data-ttu-id="22df3-140">Добавьте новую страницу с именем *EmailRequest. cshtml* и добавьте следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="22df3-140">Add a new page named *EmailRequest.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample1.html)]

    <span data-ttu-id="22df3-141">Обратите внимание, что атрибуту `action` элемента Form присвоено значение *ProcessRequest. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="22df3-141">Notice that the `action` attribute of the form element has been set to *ProcessRequest.cshtml*.</span></span> <span data-ttu-id="22df3-142">Это означает, что форма будет отправлена на эту страницу вместо возврата к текущей странице.</span><span class="sxs-lookup"><span data-stu-id="22df3-142">This means that the form will be submitted to that page instead of back to the current page.</span></span>
3. <span data-ttu-id="22df3-143">Добавьте на веб-сайт новую страницу с именем *ProcessRequest. cshtml* и добавьте следующий код и разметку:</span><span class="sxs-lookup"><span data-stu-id="22df3-143">Add a new page named *ProcessRequest.cshtml* to the website and add the following code and markup:</span></span>   

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample2.cshtml)]

    <span data-ttu-id="22df3-144">В коде вы получаете значения полей формы, которые были отправлены на страницу.</span><span class="sxs-lookup"><span data-stu-id="22df3-144">In the code, you get the values of the form fields that were submitted to the page.</span></span> <span data-ttu-id="22df3-145">Затем вызовите метод `Send` вспомогательного метода `WebMail`, чтобы создать и отправить сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-145">You then call the `WebMail` helper's `Send` method to create and send the email message.</span></span> <span data-ttu-id="22df3-146">В этом случае используемые значения состоят из текста, который объединяется со значениями, отправленными из формы.</span><span class="sxs-lookup"><span data-stu-id="22df3-146">In this case, the values to use are made up of text that you concatenate with the values that were submitted from the form.</span></span>

    <span data-ttu-id="22df3-147">Код для этой страницы находится внутри блока `try/catch`.</span><span class="sxs-lookup"><span data-stu-id="22df3-147">The code for this page is inside a `try/catch` block.</span></span> <span data-ttu-id="22df3-148">Если по какой-либо причине попытка отправить сообщение электронной почты не работает (например, неправильные параметры), код в блоке `catch` выполняется и присваивает переменной `errorMessage` значение произошедшей ошибки.</span><span class="sxs-lookup"><span data-stu-id="22df3-148">If for any reason the attempt to send an email doesn't work (for example, the settings aren't right), the code in the `catch` block runs and sets the `errorMessage` variable to the error that has occurred.</span></span> <span data-ttu-id="22df3-149">(Дополнительные сведения о блоках `try/catch` или тега `<text>` см. в статье [Введение в веб-страницы ASP.NET программирования с помощью синтаксиса Razor](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span><span class="sxs-lookup"><span data-stu-id="22df3-149">(For more information about `try/catch` blocks or the `<text>` tag, see [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span></span>

    <span data-ttu-id="22df3-150">В тексте страницы, если переменная `errorMessage` пуста (значение по умолчанию), пользователь видит сообщение об отправке сообщения электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-150">In the body of the page, if the `errorMessage` variable is empty (the default), the user sees a message that the email message has been sent.</span></span> <span data-ttu-id="22df3-151">Если переменная `errorMessage` имеет значение true, пользователь видит сообщение о том, что возникла проблема при отправке сообщения.</span><span class="sxs-lookup"><span data-stu-id="22df3-151">If the `errorMessage` variable is set to true, the user sees a message that there's been a problem sending the message.</span></span>

    <span data-ttu-id="22df3-152">Обратите внимание, что в части страницы, отображающей сообщение об ошибке, есть дополнительный тест: `if(debuggingFlag)`.</span><span class="sxs-lookup"><span data-stu-id="22df3-152">Notice that in the portion of the page that displays an error message, there's an additional test: `if(debuggingFlag)`.</span></span> <span data-ttu-id="22df3-153">Это переменная, которой можно присвоить значение true, если у вас возникают проблемы при отправке электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-153">This is a variable that you can set to true if you're having trouble sending email.</span></span> <span data-ttu-id="22df3-154">Если `debuggingFlag` имеет значение true и при отправке сообщения электронной почты возникла проблема, отображается дополнительное сообщение об ошибке, показывающее, что при попытке отправить сообщение электронной почты было сообщено о ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="22df3-154">When `debuggingFlag` is true, and if there's a problem sending email, an additional error message is displayed that shows whatever ASP.NET has reported when it tried to send the email message.</span></span> <span data-ttu-id="22df3-155">Предупреждение: сообщения об ошибках, ASP.NET отчеты о невозможности отправки сообщений электронной почты, могут быть универсальными.</span><span class="sxs-lookup"><span data-stu-id="22df3-155">Fair warning, though: the error messages that ASP.NET reports when it can't send an email message can be generic.</span></span> <span data-ttu-id="22df3-156">Например, если ASP.NET не удается связаться с сервером SMTP (например, из-за ошибки в имени сервера), то эта ошибка `Failure sending mail`.</span><span class="sxs-lookup"><span data-stu-id="22df3-156">For example, if ASP.NET can't contact the SMTP server (for example, because you made an error in the server name), the error is `Failure sending mail`.</span></span>

    > [!NOTE] 
    > 
    > <span data-ttu-id="22df3-157">**Важно!** При получении сообщения об ошибке из объекта исключения (`ex` в коде *) не следует выполнять регулярную* передачу этого сообщения пользователям.</span><span class="sxs-lookup"><span data-stu-id="22df3-157">**Important** When you get an error message from an exception object (`ex` in the code), do *not* routinely pass that message through to users.</span></span> <span data-ttu-id="22df3-158">Объекты исключений часто содержат сведения, которые не должны видеть пользователи, а также могут представлять собой уязвимости системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="22df3-158">Exception objects often include information that users should not see and that can even be a security vulnerability.</span></span> <span data-ttu-id="22df3-159">Вот почему этот код включает переменную `debuggingFlag`, которая используется в качестве параметра для вывода сообщения об ошибке и почему переменная по умолчанию имеет значение false.</span><span class="sxs-lookup"><span data-stu-id="22df3-159">That's why this code includes the variable `debuggingFlag` that's used as a switch to display the error message, and why the variable by default is set to false.</span></span> <span data-ttu-id="22df3-160">Следует присвоить этой переменной значение true (и, следовательно, выводить сообщение об ошибке) *только* в том случае, если возникла проблема с отправкой электронной почты и необходимо выполнить отладку.</span><span class="sxs-lookup"><span data-stu-id="22df3-160">You should set that variable to true (and therefore display the error message) *only* if you're having a problem with sending email and you need to debug.</span></span> <span data-ttu-id="22df3-161">После устранения каких либо проблем присвойте параметру `debuggingFlag` значение false.</span><span class="sxs-lookup"><span data-stu-id="22df3-161">Once you have fixed any problems, set `debuggingFlag` back to false.</span></span>

    <span data-ttu-id="22df3-162">Измените следующие параметры, связанные с электронной почтой, в коде:</span><span class="sxs-lookup"><span data-stu-id="22df3-162">Modify the following email related settings in the code:</span></span>

   - <span data-ttu-id="22df3-163">Присвойте `your-SMTP-host` имя SMTP-сервера, к которому у вас есть доступ.</span><span class="sxs-lookup"><span data-stu-id="22df3-163">Set `your-SMTP-host` to the name of the SMTP server that you have access to.</span></span>
   - <span data-ttu-id="22df3-164">Задайте `your-user-name-here` имя пользователя для учетной записи SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-164">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
   - <span data-ttu-id="22df3-165">Задайте `your-account-password` пароль для учетной записи SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-165">Set `your-account-password` to the password for your SMTP server account.</span></span>
   - <span data-ttu-id="22df3-166">Задайте для `your-email-address-here` собственный адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-166">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="22df3-167">Это адрес электронной почты, с которого отправляется сообщение.</span><span class="sxs-lookup"><span data-stu-id="22df3-167">This is the email address that the message is sent from.</span></span> <span data-ttu-id="22df3-168">(Некоторые поставщики электронной почты не позволяют указать другой адрес `From` и будут использовать имя пользователя в качестве адреса `From`.)</span><span class="sxs-lookup"><span data-stu-id="22df3-168">(Some email providers don't let you specify a different `From` address and will use your user name as the `From` address.)</span></span>

     > [!TIP] 
     > 
     > <a id="configuring_email_settings"></a>
     > ### <a name="configuring-email-settings"></a><span data-ttu-id="22df3-169">Настройка параметров электронной почты</span><span class="sxs-lookup"><span data-stu-id="22df3-169">Configuring Email Settings</span></span>
     > 
     > <span data-ttu-id="22df3-170">Иногда может быть очень трудно убедиться в наличии правильных параметров для SMTP-сервера, номера порта и т. д.</span><span class="sxs-lookup"><span data-stu-id="22df3-170">It can be a challenge sometimes to make sure you have the right settings for the SMTP server, port number, and so on.</span></span> <span data-ttu-id="22df3-171">Несколько советов:</span><span class="sxs-lookup"><span data-stu-id="22df3-171">Here are a few tips:</span></span>
     > 
     > - <span data-ttu-id="22df3-172">Имя SMTP-сервера часто имеет примерно `smtp.provider.com` или `smtp.provider.net`.</span><span class="sxs-lookup"><span data-stu-id="22df3-172">The SMTP server name is often something like `smtp.provider.com` or `smtp.provider.net`.</span></span> <span data-ttu-id="22df3-173">Однако при публикации сайта у поставщика услуг размещения на этом этапе имя SMTP-сервера может быть `localhost`.</span><span class="sxs-lookup"><span data-stu-id="22df3-173">However, if you publish your site to a hosting provider, the SMTP server name at that point might be `localhost`.</span></span> <span data-ttu-id="22df3-174">Это связано с тем, что после публикации и того, как сайт работает на сервере поставщика, почтовый сервер может быть локальным с точки зрения приложения.</span><span class="sxs-lookup"><span data-stu-id="22df3-174">This is because after you've published and your site is running on the provider's server, the email server might be local from the perspective of your application.</span></span> <span data-ttu-id="22df3-175">Это изменение в именах серверов может означать, что необходимо изменить имя SMTP-сервера как часть процесса публикации.</span><span class="sxs-lookup"><span data-stu-id="22df3-175">This change in server names might mean you have to change the SMTP server name as part of your publishing process.</span></span>
     > - <span data-ttu-id="22df3-176">Номер порта обычно равен 25.</span><span class="sxs-lookup"><span data-stu-id="22df3-176">The port number is usually 25.</span></span> <span data-ttu-id="22df3-177">Однако для некоторых поставщиков требуется использовать порт 587 или другой порт.</span><span class="sxs-lookup"><span data-stu-id="22df3-177">However, some providers require you to use port 587 or some other port.</span></span>
     > - <span data-ttu-id="22df3-178">Убедитесь, что используются правильные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="22df3-178">Make sure that you use the right credentials.</span></span> <span data-ttu-id="22df3-179">Если сайт опубликован на поставщике услуг размещения, используйте учетные данные, указанные поставщиком, для электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-179">If you've published your site to a hosting provider, use the credentials that the provider has specifically indicated are for email.</span></span> <span data-ttu-id="22df3-180">Они могут отличаться от учетных данных, используемых для публикации.</span><span class="sxs-lookup"><span data-stu-id="22df3-180">These might be different from the credentials you use to publish.</span></span>
     > - <span data-ttu-id="22df3-181">Иногда вам не нужны учетные данные.</span><span class="sxs-lookup"><span data-stu-id="22df3-181">Sometimes you don't need credentials at all.</span></span> <span data-ttu-id="22df3-182">Если вы отправляете электронную почту с помощью личного поставщика услуг Интернета, ваш поставщик электронной почты может уже узнавать ваши учетные данные.</span><span class="sxs-lookup"><span data-stu-id="22df3-182">If you're sending email using your personal ISP, your email provider might already know your credentials.</span></span> <span data-ttu-id="22df3-183">После публикации может потребоваться использовать другие учетные данные, чем при тестировании на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="22df3-183">After you publish, you might need to use different credentials than when you test on your local computer.</span></span>
     > - <span data-ttu-id="22df3-184">Если поставщик электронной почты использует шифрование, необходимо задать для `WebMail.EnableSsl` значение `true`.</span><span class="sxs-lookup"><span data-stu-id="22df3-184">If your email provider uses encryption, you have to set `WebMail.EnableSsl` to `true`.</span></span>
4. <span data-ttu-id="22df3-185">Запустите страницу *EmailRequest. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="22df3-185">Run the *EmailRequest.cshtml* page in a browser.</span></span> <span data-ttu-id="22df3-186">(Перед выполнением страницы убедитесь, что она выбрана в рабочей области **файлы** .)</span><span class="sxs-lookup"><span data-stu-id="22df3-186">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
5. <span data-ttu-id="22df3-187">Введите имя и описание проблемы, а затем нажмите кнопку Submit ( **Отправить** ).</span><span class="sxs-lookup"><span data-stu-id="22df3-187">Enter your name and a problem description, and then click the **Submit** button.</span></span> <span data-ttu-id="22df3-188">Вы будете перенаправлены на страницу *ProcessRequest. cshtml* , которая подтверждает сообщение и отправляет вам сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-188">You're redirected to the *ProcessRequest.cshtml* page, which confirms your message and which sends you an email message.</span></span> 

    ![[образ]](11-adding-email-to-your-web-site/_static/image2.jpg)

<a id="Sending_a_File"></a>
## <a name="sending-a-file-using-email"></a><span data-ttu-id="22df3-190">Отправка файла по электронной почте</span><span class="sxs-lookup"><span data-stu-id="22df3-190">Sending a File Using Email</span></span>

<span data-ttu-id="22df3-191">Также можно отправлять файлы, вложенные в сообщения электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-191">You can also send files that are attached to email messages.</span></span> <span data-ttu-id="22df3-192">В этой процедуре создается текстовый файл и две страницы HTML.</span><span class="sxs-lookup"><span data-stu-id="22df3-192">In this procedure, you create a text file and two HTML pages.</span></span> <span data-ttu-id="22df3-193">Этот текстовый файл будет использоваться как вложение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-193">You'll use the text file as an email attachment.</span></span>

1. <span data-ttu-id="22df3-194">На веб-сайте добавьте новый текстовый файл и назовите его *MyFile. txt*.</span><span class="sxs-lookup"><span data-stu-id="22df3-194">In the website, add a new text file and name it *MyFile.txt*.</span></span>
2. <span data-ttu-id="22df3-195">Скопируйте следующий текст и вставьте его в файл:</span><span class="sxs-lookup"><span data-stu-id="22df3-195">Copy the following text and paste it in the file:</span></span> 

    `Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.`
3. <span data-ttu-id="22df3-196">Создайте страницу с именем *sendfile. cshtml* и добавьте следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="22df3-196">Create a page named *SendFile.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample3.html)]
4. <span data-ttu-id="22df3-197">Создайте страницу с именем *процессфиле. cshtml* и добавьте следующую разметку:</span><span class="sxs-lookup"><span data-stu-id="22df3-197">Create a page named *ProcessFile.cshtml* and add the following markup:</span></span> 

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample4.cshtml)]
5. <span data-ttu-id="22df3-198">Измените следующие параметры, связанные с электронной почтой, в коде из примера:</span><span class="sxs-lookup"><span data-stu-id="22df3-198">Modify the following email related settings in the code from the example:</span></span>

    - <span data-ttu-id="22df3-199">Присвойте `your-SMTP-host` имя SMTP-сервера, к которому у вас есть доступ.</span><span class="sxs-lookup"><span data-stu-id="22df3-199">Set `your-SMTP-host` to the name of an SMTP server that you have access to.</span></span>
    - <span data-ttu-id="22df3-200">Задайте `your-user-name-here` имя пользователя для учетной записи SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-200">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
    - <span data-ttu-id="22df3-201">Задайте для `your-email-address-here` собственный адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-201">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="22df3-202">Это адрес электронной почты, с которого отправляется сообщение.</span><span class="sxs-lookup"><span data-stu-id="22df3-202">This is the email address that the message is sent from.</span></span>
    - <span data-ttu-id="22df3-203">Задайте `your-account-password` пароль для учетной записи SMTP-сервера.</span><span class="sxs-lookup"><span data-stu-id="22df3-203">Set `your-account-password` to the password for your SMTP server account.</span></span>
    - <span data-ttu-id="22df3-204">Задайте для `target-email-address-here` собственный адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="22df3-204">Set `target-email-address-here` to your own email address.</span></span> <span data-ttu-id="22df3-205">(Как и раньше, вы обычно отправляете сообщение электронной почты кому-то другому, но для тестирования его можно отправить самому себе.)</span><span class="sxs-lookup"><span data-stu-id="22df3-205">(As before, you'd normally send an email to someone else, but for testing, you can send it to yourself.)</span></span>
6. <span data-ttu-id="22df3-206">Запустите страницу *sendfile. cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="22df3-206">Run the *SendFile.cshtml* page in a browser.</span></span>
7. <span data-ttu-id="22df3-207">Введите имя, строку темы и имя текстового файла для присоединения (*MyFile. txt*).</span><span class="sxs-lookup"><span data-stu-id="22df3-207">Enter your name, a subject line, and the name of the text file to attach (*MyFile.txt*).</span></span>
8. <span data-ttu-id="22df3-208">Нажмите кнопку `Submit`.</span><span class="sxs-lookup"><span data-stu-id="22df3-208">Click the `Submit` button.</span></span> <span data-ttu-id="22df3-209">Как и ранее, вы будете перенаправлены на страницу *процессфиле. cshtml* , которая подтверждает сообщение и отправляет вам сообщение электронной почты с прикрепленным файлом.</span><span class="sxs-lookup"><span data-stu-id="22df3-209">As before, you're redirected to the *ProcessFile.cshtml* page, which confirms your message and which sends you an email message with the attached file.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="22df3-210">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="22df3-210">Additional Resources</span></span>

- [<span data-ttu-id="22df3-211">Руководство по устранению неполадок веб-страниц ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="22df3-211">ASP.NET Web Pages (Razor) Troubleshooting Guide</span></span>](https://go.microsoft.com/fwlink/?LinkId=253001)
- [<span data-ttu-id="22df3-212">Простой протокол обмена электронной почтой</span><span class="sxs-lookup"><span data-stu-id="22df3-212">Simple Mail Transfer Protocol</span></span>](https://msdn.microsoft.com/library/aa480435.aspx)
- [<span data-ttu-id="22df3-213">Настройка поведения на уровне сайта для веб-страницы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="22df3-213">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
