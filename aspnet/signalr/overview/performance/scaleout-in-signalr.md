---
uid: signalr/overview/performance/scaleout-in-signalr
title: Общие сведения о масштабировании в SignalR | Документация Майкрософт
author: bradygaster
description: Версии программного обеспечения используется в этом разделе 4.5 .NET SignalR для Visual Studio 2013 версии 2, предыдущие версии в этом разделе сведения о более ранних версиях...
ms.author: bradyg
ms.date: 06/10/2014
ms.assetid: 7e781fc1-1c1f-45a8-bc1d-338e96dbe9c9
msc.legacyurl: /signalr/overview/performance/scaleout-in-signalr
msc.type: authoredcontent
ms.openlocfilehash: 60ae0353745284796eb7e0ddb6397ecb48eceaf0
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036371"
---
<a name="introduction-to-scaleout-in-signalr"></a>Общие сведения о масштабировании в SignalR
====================
по [Майк Уоссон](https://github.com/MikeWasson), [Патрик Флетчера](https://github.com/pfletcher)

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> ## <a name="software-versions-used-in-this-topic"></a>Версии программного обеспечения, используемого в этом разделе
>
>
> - [Visual Studio 2013](https://my.visualstudio.com/Downloads?q=visual%20studio%202013)
> - .NET 4.5
> - SignalR версии 2
>
>
>
> ## <a name="previous-versions-of-this-topic"></a>Предыдущие версии этого раздела
>
> Сведения о более ранних версий SignalR, см. в разделе [более старых версий SignalR](../older-versions/index.md).
>
> ## <a name="questions-and-comments"></a>Вопросы и комментарии
>
> Оставьте свои отзывы на том, как вам понравилось, и этот учебник и что можно улучшить в комментариях в нижней части страницы. Если у вас есть вопросы, которые не имеют отношения к руководству, их можно разместить [форум по ASP.NET SignalR](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) или [StackOverflow.com](http://stackoverflow.com/).


Вообще говоря, существует два способа масштабировать веб-приложения: *масштаба* и *горизонтальное масштабирование*.

- Увеличить масштаб означает использование на больший сервер (или большего размера виртуальной Машины) с более ОЗУ, ЦП и т. д.
- Горизонтальное масштабирование означает добавление дополнительных серверов для обработки нагрузки.

Проблема с масштабированием в том, поспешно нажал ли ограничение на размер машины. Кроме этого вам нужно масштабировать. Тем не менее при масштабировании, клиенты могут перенаправляться на разных серверах. Клиент, который подключен к одному серверу не будет получать сообщения, отправленные с другого сервера.

![](scaleout-in-signalr/_static/image1.png)

Одним из решений является пересылки сообщений между серверами, используя компонент, называемый *объединительной платы*. С задней панели, который включен каждый экземпляр приложения отправляет сообщения объединительной плате и задней панели перенаправляет их в другие экземпляры приложения. (В области электроники, объединительной платы является группой parallel соединителей. Используя аналогию объединительной панели SignalR подключает несколько серверов.)

![](scaleout-in-signalr/_static/image2.png)

SignalR в настоящее время предоставляет три расширения:

- **Служебная шина Azure**. Служебная шина — это инфраструктура обмена сообщениями, которая позволяет компонентам для отправки сообщений в слабо связанным образом.
- **Redis**. Redis — это хранилище ключ значение в памяти. Redis поддерживает шаблона публикации/подписки («pub/sub») для отправки сообщений.
- **SQL Server**. На задней стороне SQL Server записывает сообщения в таблицы SQL. Задняя панель с компонентом Service Broker для эффективного обмена сообщениями. Тем не менее она также работает, если не включен компонент Service Broker.

Если вы развернете приложение в Azure, рассмотрите возможность использования объединительной платы Redis с помощью [кэша Redis для Azure](https://azure.microsoft.com/services/cache/). Если развертываются на ферме серверов, рассмотрите возможность SQL Server или Redis соединительных панелях.

В следующих разделах содержатся пошаговые учебники по каждой объединительной платы:

- [Масштабирование SignalR с помощью служебной шины Azure](scaleout-with-windows-azure-service-bus.md)
- [Масштабирование SignalR с помощью Redis](scaleout-with-redis.md)
- [Масштабирование SignalR с помощью SQL Server](scaleout-with-sql-server.md)

## <a name="implementation"></a>Реализация

В SignalR каждое сообщение отправляется через канал сообщений. Реализует канал сообщений [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) интерфейс, который предоставляет абстракцию публикации/подписки. Соединительных панелях работы, заменив значение по умолчанию **IMessageBus** с шиной предназначен для этой задней панели. Например, канал сообщений для Redis является [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), и он использует Redis [pub/sub](http://redis.io/topics/pubsub) механизм для отправки и получения сообщений.

Каждый экземпляр сервера подключается к задней панели через шину. При отправке сообщения, она переходит к задней панели и задней панели отправляет его на каждом сервере. Если сервер получает сообщение от объединительной платы, он помещает сообщение в локальном кэше. Затем сервер доставляет сообщения клиентам из своего локального кэша.

Для каждого клиентского соединения клиента выполняется в режиме чтения потока сообщений отслеживается с помощью курсора. (Курсор представляет позицию в потоке сообщений). Если клиент отключается, а затем снова подключается, шина запрашивает все сообщения, полученные после значения курсора клиента. То же самое происходит, когда соединение использует [долго опрашивающего](../getting-started/introduction-to-signalr.md#transports). После выполнения запроса долгого опроса, клиент открывает новое подключение и запрашивает сообщения, полученные после курсора.

Работает механизм курсора, даже если клиент направляется на другой сервер, на переподключение. Задняя панель учитывает всех серверов, и неважно, какой сервер, клиент подключается к.

## <a name="limitations"></a>Ограничения

Использование объединительной платы, пропускная способность максимальное сообщений является ниже, чем это, когда клиенты напрямую обмениваться данными с одного сервера узла. Том, что задней панели перенаправляет каждое сообщение на каждый узел, поэтому задней панели может стать узким местом. Является ли это ограничение проблемы зависит от приложения. Например Вот несколько типичных сценариев, SignalR.

- [Рассылка сервера](../getting-started/tutorial-server-broadcast-with-signalr.md) (например, биржевые сводки): Соединительных панелях хорошо подходят для этого сценария, так как сервер определяет скорость, с которой отправляются сообщения.
- [Клиент клиент](../getting-started/tutorial-getting-started-with-signalr.md) (например, чат): В этом случае задней панели может быть узким местом, если количество сообщений, масштабируется с количеством клиентов; то есть если увеличивается число сообщений, присоединить пропорционально как можно большего числа клиентов.
- [В реальном времени высокой частотой](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (например, в режиме реального времени игры): Задняя панель не рекомендуется для этого сценария.

## <a name="enabling-tracing-for-signalr-scaleout"></a>Включение трассировки для масштабирование SignalR

Чтобы включить трассировку для соединительных панелях, добавьте следующие разделы в файл web.config в корне **конфигурации** элемент:

[!code-html[Main](scaleout-in-signalr/samples/sample1.html)]
