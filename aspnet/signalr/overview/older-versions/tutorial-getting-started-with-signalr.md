---
uid: signalr/overview/older-versions/tutorial-getting-started-with-signalr
title: Учебник. Начало работы с SignalR 1.x | Документация Майкрософт
author: bradygaster
description: Использование ASP.NET SignalR для создания приложения разговора в режиме реального времени на странице HTML.
ms.author: bradyg
ms.date: 02/18/2013
ms.assetid: fdc3599a-5217-44c1-951f-0eec9812dce7
msc.legacyurl: /signalr/overview/older-versions/tutorial-getting-started-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 288f5017acde5a103460ace688933609fba0b02c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59391030"
---
# <a name="tutorial-getting-started-with-signalr-1x"></a>Учебник. Начало работы с SignalR 1.x

по [Флетчера Патрик](https://github.com/pfletcher), [Teebken Тим](https://github.com/timlt)

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> В этом учебнике содержатся сведения об использовании SignalR для создания приложения разговора в режиме реального времени. Следует добавить пустой веб-приложения ASP.NET SignalR и создать HTML-страницы для отправки и отображения сообщений.


## <a name="overview"></a>Обзор

В этом учебнике представлена разработки SignalR, демонстрирующий создание приложения простой чата на основе веб-обозревателя. Будет добавьте библиотеку SignalR в пустой веб-приложения ASP.NET, создайте класс концентратора для отправки сообщений клиентам и создать HTML-страницу, которая позволяет пользователям отправлять и получать сообщения. Похожий учебник, демонстрирующий создание приложения чата в MVC 4 с помощью представления MVC, см. в разделе [начало работы с SignalR и MVC 4](index.md).

> [!NOTE]
> Этом руководстве используется версия выпуска (1.x) SignalR. Сведения об изменениях между SignalR 1.x и 2.0, см. в разделе [проектов обновление SignalR 1.x](../releases/upgrading-signalr-1x-projects-to-20.md).

SignalR является библиотекой .NET с открытым исходным кодом для создания веб-приложений, требующих взаимодействия с пользователем в реальном времени или обновления данных в реальном времени. Примеры включают социальных приложений, многопользовательские игры, совместной работы и новости, погода бизнеса или финансовых обновления приложений. Они часто называются приложениями в реальном времени.

SignalR упрощает процесс создания приложений в реальном времени. Он включает библиотеку ASP.NET сервера и клиентскую библиотеку JavaScript, чтобы упростить управление соединениями между клиентом и сервером и Push-обновления содержимого для клиентов. Библиотека SignalR можно добавить в существующее приложение ASP.NET для достижения функциональности в режиме реального времени.

В данном учебнике показано следующие задачи разработки SignalR:

- Добавление библиотеки SignalR в веб-приложения ASP.NET.
- Создание класса концентратора для отправки содержимого клиентам.
- С помощью библиотеки jQuery SignalR на веб-странице для отправки сообщений и отобразить обновления от концентратора.

На следующем снимке экрана показано приложение чата, работающих в браузере. Каждого нового пользователя можно отправить комментарии и комментарии, добавленные после пользователь не присоединит чате см. в разделе.

![Экземпляры чата](tutorial-getting-started-with-signalr/_static/image1.png)

Разделы:

- [Настройка проекта](#setup)
- [Запуск образца](#run)
- [Изучите код](#code)
- [Следующие шаги](#next)

<a id="setup"></a>

## <a name="set-up-the-project"></a>Настройка проекта

В этом разделе показано, как создать пустой веб-приложения ASP.NET, добавьте SignalR и создание приложения чата.

Предварительные требования

- Visual Studio 2010 SP1 или 2012. Если у вас нет Visual Studio, см. в разделе [загрузок ASP.NET](https://www.asp.net/downloads) для получения бесплатного Visual Studio 2012 Express средства разработки.
- [Microsoft ASP.NET и веб-инструменты 2012.2](https://go.microsoft.com/fwlink/?LinkId=279941). Для Visual Studio 2012 этот установщик добавляет новые функции ASP.NET, включая шаблоны SignalR для Visual Studio. Для Visual Studio 2010 с пакетом обновления 1 установщик не доступен, но вам изучить учебник, установив пакет SignalR NuGet, как описано на шагах установки.

В следующих действиях используется Visual Studio 2012, чтобы создать пустое веб-приложение ASP.NET и добавить библиотека SignalR:

1. В Visual Studio создайте пустое веб-приложение ASP.NET.

    ![Создать пустой веб-узел](tutorial-getting-started-with-signalr/_static/image2.png)
2. Откройте **консоль диспетчера пакетов** , выбрав **инструменты | Диспетчер пакетов NuGet | Консоль диспетчера пакетов**. Введите следующую команду в окне консоли:

    `Install-Package Microsoft.AspNet.SignalR -Version 1.1.3`

    Эта команда устанавливает последнюю версию SignalR 1.x.
3. В **обозревателе решений**, щелкните правой кнопкой мыши проект, выберите **Add | Класс**. Назовите новый класс **ChatHub**.
4. В **обозревателе решений** узел скриптов. Библиотеки скрипта для jQuery и SignalR, отображаются в проект.

    ![Ссылки на библиотеку](tutorial-getting-started-with-signalr/_static/image3.png)
5. Замените код в **ChatHub** класса следующим кодом.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample1.cs)]
6. В **обозревателе решений**, щелкните правой кнопкой мыши проект, а затем нажмите кнопку **Add | Новый элемент**. В **Добавление нового элемента** диалоговом окне выберите **глобальный класс приложения** и нажмите кнопку **добавить**.

    ![Добавление глобального](tutorial-getting-started-with-signalr/_static/image4.png)
7. Добавьте следующий `using` инструкций после указанных `using` инструкций в классе Global.asax.cs.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample2.cs)]
8. Добавьте следующую строку кода в `Application_Start` метод глобального класса, чтобы зарегистрировать маршрут по умолчанию для концентраторов SignalR.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample3.cs)]
9. В **обозревателе решений**, щелкните правой кнопкой мыши проект, а затем нажмите кнопку **Add | Новый элемент**. В **Добавление нового элемента** HTML-страницу и щелкните диалоговое окно, выберите **добавить**.
10. В **обозревателе решений**, щелкните правой кнопкой мыши только что созданный HTML-страницы и нажмите кнопку **задать в качестве начальной страницы**.
11. Замените код по умолчанию в HTML-страницу следующий код.

    [!code-html[Main](tutorial-getting-started-with-signalr/samples/sample4.html)]
12. **Сохранить все** для проекта.

<a id="run"></a>

## <a name="run-the-sample"></a>Запуск образца

1. Нажмите клавишу F5, чтобы запустить проект в режиме отладки. HTML-страница загружается в экземпляре обозревателя и предлагает ввести имя пользователя.

    ![Введите имя пользователя](tutorial-getting-started-with-signalr/_static/image5.png)
2. Введите имя пользователя.
3. Скопируйте URL-адрес в адресной строке браузера и использовать его для открытия двух экземпляров дополнительные браузера. В каждом экземпляре обозревателя введите уникальное имя пользователя.
4. В каждом экземпляре браузера добавьте комментарий и нажмите кнопку **отправки**. Комментарии должны отображаться в все экземпляры браузера.

    > [!NOTE]
    > Это приложение на простом чате не ведет контекста обсуждения на сервере. Концентратор осуществляет широковещательную передачу комментарии для всех текущих пользователей. Пользователи, беседа позже будет видеть сообщения добавлены с момента их присоединения к.

    На следующем снимке экрана показано приложение чата в трех экземплярах обозревателя, все из которых обновляются, когда один экземпляр отправляет сообщение:

    ![Браузеры чата](tutorial-getting-started-with-signalr/_static/image6.png)
5. В **обозревателе решений**, проверять **документы скриптов** узел для запущенного приложения. Файл скрипта с именем **концентраторов** , библиотека SignalR динамически создает во время выполнения. Этот файл управляет обменом данных между jQuery-сценарий и код на стороне сервера.

    ![Созданный Центр сценариев](tutorial-getting-started-with-signalr/_static/image7.png)

<a id="code"></a>

## <a name="examine-the-code"></a>Изучите код

Приложение чата SignalR демонстрирует две основные задачи разработки SignalR: создание концентратора в качестве основной координации объекта на сервере и с помощью библиотеки jQuery SignalR для отправки и получения сообщений.

### <a name="signalr-hubs"></a>Концентраторы SignalR

В следующем образце кода **ChatHub** класс является производным от **Microsoft.AspNet.SignalR.Hub** класса. Наследование от **концентратора** класс является эффективным методом для построения приложения SignalR. Можно создавать открытые методы в классе концентратора и затем получить доступ к этих методов, вызывая их с помощью сценариев jQuery в веб-страницы.

В коде чата, клиенты вызывают **ChatHub.Send** метод для отправки нового сообщения. Концентратор в свою очередь отправляет сообщение всем клиентам, вызвав **Clients.All.broadcastMessage**.

**Отправки** метод демонстрирует несколько вещей понятия:

- Объявления открытых методов концентратора, таким образом, клиенты могут вызывать их.
- Используйте **Microsoft.AspNet.SignalR.Hub.Clients** динамических свойств для доступа к всех клиентов, подключенных к этой вещей.
- Вызов функции jQuery на стороне клиента (например, `broadcastMessage` функции) для обновления клиентов.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample5.cs)]

### <a name="signalr-and-jquery"></a>SignalR и jQuery

HTML-страницы в примере кода показано, как использовать библиотеку jQuery SignalR для взаимодействия с центром SignalR. Основные задачи в коде объявляется прокси-сервер для ссылки на центр, объявление функции, который сервер может обратиться к содержимому Push-уведомлений для клиентов и устанавливается подключение для отправки сообщений в концентратор.

В следующем коде объявляется прокси-сервер для концентратора.

[!code-javascript[Main](tutorial-getting-started-with-signalr/samples/sample6.js)]

> [!NOTE]
> В jQuery ссылку на класс сервера и его членах находится в верхний регистр. Ссылается на пример кода C# **ChatHub** класс в jQuery как **chatHub**.


Следующий код является, как создать функцию обратного вызова в скрипте. Класс концентратора на сервере вызывает эту функцию для отправки обновлений содержимого для каждого клиента. Две строки, кодировать в HTML содержимое перед его отображением являются необязательными и Показать простой способ предотвратить внедрение скрипта.

[!code-html[Main](tutorial-getting-started-with-signalr/samples/sample7.html)]

Ниже показано, как открыть соединение с концентратором. Код запускает подключение, а затем передает его функции, чтобы обрабатывать событие щелчка на **отправки** кнопку в HTML-страницы.

> [!NOTE]
> Такой подход гарантирует, что соединение установлено, перед выполнением обработчика событий.


[!code-javascript[Main](tutorial-getting-started-with-signalr/samples/sample8.js)]

<a id="next"></a>

## <a name="next-steps"></a>Следующие шаги

Вы узнали, что SignalR — это платформа для построения в режиме реального времени веб-приложений. Вы также узнали несколько задач разработки SignalR: Добавление в приложение ASP.NET SignalR, как создать класс концентратора и как отправлять и получать сообщения из концентратора.

Вы можете предоставить пример приложения в этом руководстве или других приложений SignalR через Интернет, развернув их у поставщика услуг размещения. Корпорация Майкрософт предлагает бесплатные услуг хостинга до 10 веб-сайтов в бесплатной [пробную учетную запись Windows Azure](https://www.windowsazure.com/pricing/free-trial/?WT.mc_id=A443DD604). Пошаговое руководство о том, как развернуть пример приложения SignalR, см. в разделе [публикации SignalR примера для начала работы как веб-сайта Windows Azure](https://blogs.msdn.com/b/timlee/archive/2013/02/27/deploy-the-signalr-getting-started-sample-as-a-windows-azure-web-site.aspx). Подробные сведения о развертывании веб-проекта Visual Studio для веб-сайта Windows Azure см. в разделе [развертывание приложения ASP.NET для веб-сайта Windows Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet). (Примечание: Транспорт WebSocket в настоящее время не поддерживается для Windows Azure веб-сайтов. Транспорт WebSocket, когда недоступен, SignalR использует другие доступные типы транспорта, как описано в разделе транспортов [введение к разделу SignalR](index.md).)

Для более сложных концепций разработки SignalR см. на следующих узлах SignalR исходный код и ресурсы:

- [Проект SignalR](http://signalr.net)
- [SignalR Github и примерами](https://github.com/SignalR/SignalR)
- [Вики-сайте SignalR](https://github.com/SignalR/SignalR/wiki)
