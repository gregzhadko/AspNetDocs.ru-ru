---
uid: signalr/overview/older-versions/troubleshooting
title: Устранение неполадок SignalR (SignalR 1.x) | Документация Майкрософт
author: bradygaster
description: В этой статье описаны распространенные проблемы с разработкой приложений SignalR.
ms.author: bradyg
ms.date: 06/05/2013
ms.assetid: 347210ba-c452-4feb-886f-b51d89f58971
msc.legacyurl: /signalr/overview/older-versions/troubleshooting
msc.type: authoredcontent
ms.openlocfilehash: 5f7ebf7cc6d6a65216021911fe77036357369980
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59389275"
---
# <a name="signalr-troubleshooting-signalr-1x"></a>Устранение неполадок SignalR (SignalR 1.x)

по [Патрик Флетчера](https://github.com/pfletcher)

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> В этом документе описаны распространенные проблемы с SignalR.


Этот документ содержит следующие разделы.

- [Вызов методов между клиентом и сервером без вмешательства пользователя завершается ошибкой](#connection)
- [Другие проблемы с подключением](#other)
- [Ошибки компиляции и на стороне сервера](#server)
- [Проблемы в Visual Studio](#vs)
- [Проблемы Internet Information Services](#iis)
- [Проблемы с Azure](#azure)

<a id="connection"></a>

## <a name="calling-methods-between-the-client-and-server-silently-fails"></a>Вызов методов между клиентом и сервером без вмешательства пользователя завершается ошибкой

В этом разделе описываются возможные причины вызова метода между клиентом и сервером, переход на другой без информативное сообщение об ошибке. В приложении SignalR, сервер не обладает информацией о методах, которые клиент реализует; Когда сервер вызывает клиентский метод, клиенту отправляются данные имени и параметров метода и этот метод выполняется только в том случае, если он существует в формате, который указан сервер. Если отсутствует соответствующий метод находится на стороне клиента, ничего не происходит, и сообщение об ошибке не возникает на сервере.

Для дальнейшей диагностики клиента методов не вызван, можно включить ведение журнала перед вызовом метода, метод start на концентраторе, чтобы увидеть, какие вызовы приходящие с сервера. Чтобы включить ведение журнала в приложении JavaScript, см. в разделе [как включить ведение журнала на стороне клиента (версия клиента JavaScript)](../guide-to-the-api/hubs-api-guide-javascript-client.md#logging). Чтобы включить ведение журнала в клиентском приложении .NET, см. в разделе [как включить ведение журнала на стороне клиента (версия клиента .NET)](../guide-to-the-api/hubs-api-guide-net-client.md#logging).

### <a name="misspelled-method-incorrect-method-signature-or-incorrect-hub-name"></a>Неправильно написанное метода Неверный метод подписи или имя неверные концентратора

Если имя или сигнатуру вызываемого метода полностью соответствует подходящего метода на стороне клиента, вызов завершится ошибкой. Убедитесь, что имя метода, который вызывается сервером совпадает имя метода на стороне клиента. Кроме того, SignalR создает прокси-сервера концентратора, с помощью методов стиле Camel, как и в JavaScript, поэтому вызов метода `SendMessage` на сервере будет называться `sendMessage` в прокси клиента. Если вы используете `HubName` атрибута в коде на стороне сервера, убедитесь, что имя, используемое совпадает имя, используемое для создания концентратора на стороне клиента. Если вы не используете `HubName` атрибут, убедитесь, что имя концентратора в клиенте JavaScript в стиле Camel, например chatHub вместо ChatHub.

### <a name="duplicate-method-name-on-client"></a>Повторяющееся имя метода на клиенте

Убедитесь, что у вас нет повторяющийся метод на клиенте, который отличается только регистром. Если клиентское приложение содержит метод с именем `sendMessage`, убедитесь, что не существует также метод, вызванный `SendMessage` также.

### <a name="missing-json-parser-on-the-client"></a>Отсутствуют средства синтаксического анализа JSON на стороне клиента

SignalR требуется средство синтаксического анализа JSON для сериализации вызовов между сервером и клиентом. Если клиент не имеет встроенные средства синтаксического анализа JSON (например, Internet Explorer 7), необходимо включить его в приложении. Вы можете скачать средство синтаксического анализа JSON [здесь](http://nuget.org/packages/json2).

### <a name="mixing-hub-and-persistentconnection-syntax"></a>Смешивание концентратора и PersistentConnection синтаксиса

SignalR использует две модели обмена данными: Концентраторы и PersistentConnections. Синтаксис вызова этих моделей связи отличается в клиентском коде. Если вы добавили концентратору в коде сервера, убедитесь, что весь код клиента использует синтаксис правильный концентратора.

**Клиентский код JavaScript, создающий PersistentConnection в клиент JavaScript**

[!code-javascript[Main](troubleshooting/samples/sample1.js)]

**Код клиента JavaScript, который создает прокси-сервер концентратора в клиент Javascript**

[!code-javascript[Main](troubleshooting/samples/sample2.js)]

**Серверный код на C#, соответствующий маршрут PersistentConnection**

[!code-csharp[Main](troubleshooting/samples/sample3.cs)]

**C#код сервера, которая сопоставляет маршрут к концентратору или для нескольких центров при наличии нескольких приложений**

[!code-csharp[Main](troubleshooting/samples/sample4.cs)]

### <a name="connection-started-before-subscriptions-are-added"></a>Подключение к работе перед добавлением подписки

Если подключение к концентратору запускается перед добавлением методов, которые могут вызываться с сервера на прокси-сервер, сообщения не будут приниматься. Следующий код JavaScript не запустится концентратор должным образом:

**Неверный код клиента JavaScript, который не позволит концентраторов принимать сообщения**

[!code-javascript[Main](troubleshooting/samples/sample5.js)]

Вместо этого добавьте метод подписки перед вызовом начала:

**Код клиента JavaScript, который правильно добавляет подписки к концентратору**

[!code-javascript[Main](troubleshooting/samples/sample6.js)]

### <a name="missing-method-name-on-the-hub-proxy"></a>Отсутствует имя метода в прокси-сервера концентратора

Убедитесь, что метод, определенный на сервере создана подписка на стороне клиента. Несмотря на то, что сервер определяет метод, он по-прежнему должны добавляться к прокси клиента. Методы могут добавляться на прокси-сервер клиента следующим образом (Обратите внимание, что добавляется метод `client` член концентратора, не концентратор напрямую):

**Код клиента JavaScript, который добавляет методы для прокси-сервера-концентратора**

[!code-javascript[Main](troubleshooting/samples/sample7.js)]

### <a name="hub-or-hub-methods-not-declared-as-public"></a>Концентратор или методов концентратора, не объявлен как Public

Чтобы быть видимым на клиенте, реализации концентратора и методов должны объявляться как `public`.

### <a name="accessing-hub-from-a-different-application"></a>Доступа к концентратору из другого приложения

Концентраторы SignalR может осуществляться только через приложения, реализующие клиентов SignalR. SignalR не может взаимодействовать с другими библиотеками обмен данными (например, SOAP или WCF веб-служб.) Если клиенты не SignalR доступен для целевой платформы, не может непосредственно доступ к конечной точки сервера.

### <a name="manually-serializing-data"></a>Вручную сериализации данных

SignalR будут автоматически использовать JSON для сериализации метод параметры здесь не нужно сделать это самостоятельно.

### <a name="remote-hub-method-not-executed-on-client-in-ondisconnected-function"></a>Не выполняется на клиенте в OnDisconnected функции удаленного метода концентратора

Это сделано намеренно. Когда `OnDisconnected` — вызове концентратора уже вошел `Disconnected` состояние, которое больше нельзя вызывать методы концентратора.

**Код сервера C#, который правильно выполняет код в событии OnDisconnected**

[!code-csharp[Main](troubleshooting/samples/sample8.cs)]

### <a name="connection-limit-reached"></a>Достигнут предел подключения

При использовании полной версии IIS в клиентской операционной системе, например Windows 7, накладывается ограничение в 10-подключений. При использовании операционной системы клиента, используйте IIS Express во избежание этого ограничения.

### <a name="cross-domain-connection-not-set-up-properly"></a>Подключение между доменами настроены неверно

Если соединение между доменами (соединение, для которого SignalR URL-адрес не находится в том же домене, что и страница размещения) не установлено правильно, соединение может выдать сбой без сообщения об ошибке. Сведения о том, как для обеспечения взаимодействия между доменами, см. в разделе [как для установления соединения между доменами](../guide-to-the-api/hubs-api-guide-javascript-client.md#crossdomain).

### <a name="connection-using-ntlm-active-directory-not-working-in-net-client"></a>Подключение с помощью NTLM (Active Directory) не работает в клиент .NET

Подключения в клиентском приложении .NET, которая использует безопасность домена может завершиться ошибкой, если подключение не настроено должным образом. Для использования SignalR в доменной среде, задайте свойство необходимые соединения следующим образом:

**Клиентский код на C#, реализующий учетные данные для подключения**

[!code-csharp[Main](troubleshooting/samples/sample9.cs)]

<a id="other"></a>

## <a name="other-connection-issues"></a>Другие проблемы с подключением

В этом разделе описываются причины и способы устранения конкретных проблем или сообщений об ошибках, возникающих во время подключения.

### <a name="start-must-be-called-before-data-can-be-sent-error"></a>Ошибка «Start должен вызываться перед отправкой данных»

Эта ошибка обычно возникает, если код ссылается на объекты SignalR, прежде чем подключение будет запущена. Присоединит для обработчиков и прочее, будут вызывать методы, определенные на сервере необходимо добавить после создания подключения. Обратите внимание, что вызов `Start` осуществляется асинхронно, поэтому код после вызова может выполняться до его завершения. Для добавления обработчиков, после подключения запуска полностью рекомендуется поместить их в функции обратного вызова, который передается как параметр метода start:

**Клиентский код JavaScript, который правильно добавляет обработчики событий, которые ссылаются на объекты SignalR**

[!code-javascript[Main](troubleshooting/samples/sample10.js?highlight=1)]

Эта ошибка также могут отображаться, если соединение останавливается, хотя по-прежнему ссылаются объекты SignalR.

### <a name="301-moved-permanently-or-302-moved-temporarily-error"></a>«301 перемещено навсегда» или «временно перемещен 302» ошибка

Эта ошибка может возникать, если проект содержит папку с именем SignalR, в которой будет мешать автоматически создается прокси-сервер. Чтобы избежать этой ошибки, не используйте папку с именем `SignalR` в приложении, или создание автоматического прокси-сервера включите off. См. в разделе [созданного прокси и что он делает для вас](../guide-to-the-api/hubs-api-guide-javascript-client.md#genproxy) для получения дополнительных сведений.

### <a name="403-forbidden-error-in-net-or-silverlight-client"></a>Ошибка «403 запрещено» в клиенте .NET и Silverlight

Эта ошибка может возникать в средах между доменами, взаимодействие между доменами не поддерживающих должным образом. Сведения о том, как для обеспечения взаимодействия между доменами, см. в разделе [как для установления соединения между доменами](../guide-to-the-api/hubs-api-guide-javascript-client.md#crossdomain). Для установления соединения между доменами в клиенте Silverlight, см. в разделе [междоменные подключения от клиентов Silverlight](../guide-to-the-api/hubs-api-guide-net-client.md#slcrossdomain).

### <a name="404-not-found-error"></a>Ошибка «404 не найдено»

Существует несколько причин этой проблемы. Проверьте все указанные ниже:

- **Адрес прокси-сервера концентратора ссылку неправильный формат:** Эта ошибка обычно возникает, если ссылку на созданный концентратор прокси-адрес имеет неправильный. Убедитесь, что ссылка на адрес центра создается правильно. См. в разделе [способ создания ссылок динамически формируемых прокси-](../guide-to-the-api/hubs-api-guide-javascript-client.md#dynamicproxy) подробные сведения.
- **Добавление маршрутов для приложения, прежде чем добавлять маршрут концентратора:** Если приложение использует другие маршруты, убедитесь, что первый маршрут добавлен вызов `MapHubs`.

### <a name="500-internal-server-error"></a>«500 Внутренняя ошибка сервера»

Это очень Общая ошибка, которая может иметь самые разнообразные причины. Сведения об ошибке должно отображаться в журнале событий сервера, или можно найти по отладку сервера. Более подробные сведения об ошибке можно получить, включив подробные сведения об ошибках на сервере. Дополнительные сведения см. в разделе [способ обработки ошибок в классе центр](../guide-to-the-api/hubs-api-guide-server.md#handleErrors).

### <a name="typeerror-lthubtypegt-is-undefined-error"></a>«TypeError: &lt;hubType&gt; не определено» ошибка

Это ошибка возникнет при вызове `MapHubs` не выполняется должным образом. См. в разделе [регистрация маршрута SignalR и настройте параметры SignalR](../guide-to-the-api/hubs-api-guide-server.md#route) Дополнительные сведения.

### <a name="jsonserializationexception-was-unhandled-by-user-code"></a>JsonSerializationException было обработано пользовательским кодом

Убедитесь, что параметры, которые можно отправить в методы содержит не поддерживают сериализацию типов (таких как дескрипторы файлов или подключения к базе данных). Если вам нужно использовать члены объекта на стороне сервера, вы не хотите отправить клиенту (либо для обеспечения безопасности, либо в целях сериализации), используйте `JSONIgnore` атрибута.

### <a name="protocol-error-unknown-transport-error"></a>«Ошибка протокола: Ошибка Неизвестный транспорта»

Эта ошибка может возникать, если клиент не поддерживает транспорты, которые использует SignalR. См. в разделе [транспорта и в случае ошибки](../getting-started/introduction-to-signalr.md#transports) сведения, на котором браузеры можно использовать с SignalR.

### <a name="javascript-hub-proxy-generation-has-been-disabled"></a>«Отключено создание прокси JavaScript концентратора.»

Эта ошибка возникает в том случае, если `DisableJavaScriptProxies` задается при также включая ссылку на динамически созданный прокси в `signalr/hubs`. Дополнительные сведения о создании прокси-сервер вручную, см. в разделе [созданный прокси и что он делает для вас](../guide-to-the-api/hubs-api-guide-javascript-client.md#genproxy).

### <a name="the-connection-id-is-in-the-incorrect-format-or-the-user-identity-cannot-change-during-an-active-signalr-connection-error"></a>«Идентификатор подключения имеет неправильный формат» или «удостоверение пользователя нельзя изменить во время подключения SignalR» ошибка

Эта ошибка может возникать, если используется проверка подлинности и выходе клиента, прежде чем подключение остановлен. Решение, необходимо остановить соединение перед при выходе клиента SignalR.

### <a name="uncaught-error-signalr-jquery-not-found-please-ensure-jquery-is-referenced-before-the-signalrjs-file-error"></a>«Никаким кодом не перехватывается ошибка: SignalR: jQuery не найден. Ошибка, убедитесь, что существует jQuery, прежде чем файл SignalR.js»

SignalR JavaScript клиенту требуется jQuery для выполнения. Убедитесь, что справочной информации для jQuery указан правильно, что путь, используемый является допустимым, и ссылку на jQuery предшествует ссылку SignalR.

### <a name="uncaught-typeerror-cannot-read-property-ltpropertygt-of-undefined-error"></a>«Неперехваченное TypeError: Не удается прочитать свойство "&lt;свойство&gt;" неопределенное» ошибка

Эта ошибка результатом отсутствия jQuery или центров прокси-сервера, правильность ссылок. Убедитесь, что справочной информации для jQuery и центров прокси-сервера указан правильно, что путь, используемый является допустимым, и ссылку на jQuery предшествует ссылку центров прокси-сервер. Ссылку по умолчанию на центров прокси-сервер должен иметь следующий вид:

**Код на стороне клиента HTML, который правильно ссылается на центров прокси-сервера**

[!code-html[Main](troubleshooting/samples/sample11.html)]

### <a name="runtimebinderexception-was-unhandled-by-user-code-error"></a>Ошибка «RuntimeBinderException было обработано пользовательским кодом»

Эта ошибка может возникать при неверные перегрузку `Hub.On` используется. Если метод имеет возвращаемое значение, тип возвращаемого значения необходимо указывать в качестве параметра универсального типа:

**Метод, определенный на клиенте (без созданный прокси-сервера)**

[!code-html[Main](troubleshooting/samples/sample12.html?highlight=1)]

### <a name="connection-id-is-inconsistent-or-connection-breaks-between-page-loads"></a>Идентификатор соединения не согласована, или разрыва соединения между загрузок страниц

Это сделано намеренно. Так как объект концентратора размещается в объект страницы, концентратор уничтожается при обновлении этой страницы. Приложению многостраничных для поддержания связи между пользователями и идентификаторов подключений, чтобы они будут согласованы между загрузок страниц. Идентификаторов подключений, которые могут храниться на сервере в любом `ConcurrentDictionary` объекта или базу данных.

### <a name="value-cannot-be-null-error"></a>Ошибка «Значение не может быть null»

Методы на стороне сервера с необязательными параметрами в настоящее время не поддерживаются; Если указан необязательный параметр, метод завершится с ошибкой. Дополнительные сведения см. в разделе [необязательные параметры](https://github.com/SignalR/SignalR/issues/324).

### <a name="firefox-cant-establish-a-connection-to-the-server-at-ltaddressgt-error-in-firebug"></a>«Firefox не удается установить подключение к серверу по адресу &lt;адрес&gt;"Ошибка в Firebug

Это сообщение об ошибке может отображаться в Firebug, если происходит сбой согласования транспорта WebSocket и вместо него используется другой протокол. Это сделано намеренно.

### <a name="the-remote-certificate-is-invalid-according-to-the-validation-procedure-error-in-net-client-application"></a>Ошибка «удаленный сертификат недействителен согласно процедуре проверки» в клиентском приложении .NET

Если сервер требует настраиваемых клиентских сертификатов, затем можно добавить x509certificate соединение перед выполнением запроса. Добавить сертификат для соединения с помощью `Connection.AddClientCertificate`.

### <a name="connection-drops-after-authentication-times-out"></a>После проверки подлинности истекает разрыва подключения

Это сделано намеренно. Учетные данные проверки подлинности нельзя изменить, если подключение активно; Чтобы обновить учетные данные, соединение необходимо остановить и перезапустить.

### <a name="onconnected-gets-called-twice-when-using-jquery-mobile"></a>OnConnected вызывается два раза в том случае, когда с помощью jQuery Mobile

jQuery Mobile `initializePage` функция принудительно выполняет скрипты на каждой странице, чтобы выполнить повторно, тем самым создавая второе подключение. Решения этой проблемы включают в себя:

- Включайте ссылку на jQuery Mobile перед в файле JavaScript.
- Отключить `initializePage` функции, задав `$.mobile.autoInitializePage = false`.
- Подождите, пока страница для завершения инициализации, прежде чем выполнять подключение.

### <a name="messages-are-delayed-in-silverlight-applications-using-server-sent-events"></a>Сообщения задержаны в приложениях Silverlight, с помощью отправки событий сервера

Сообщения задержаны в том случае, при использовании сервера пересылке событий Silverlight. Чтобы принудительно длинный опрос для использования вместо этого, используйте следующие параметры при запуске соединения.

[!code-css[Main](troubleshooting/samples/sample13.css)]

### <a name="permission-denied-using-forever-frame-protocol"></a>С помощью «Разрешение Denied» навсегда кадра протокола

Это известная проблема, описано [здесь](https://github.com/SignalR/SignalR/issues/1963). Эта проблема может возникать, используя последнюю версию библиотеки JQuery; обойти это можно понизить приложению JQuery 1.8.2.

<a id="server"></a>

## <a name="compilation-and-server-side-errors"></a>Ошибки компиляции и на стороне сервера

 В следующем разделе приведены возможные решения для компилятора и ошибки времени выполнения на стороне сервера. 

### <a name="reference-to-hub-instance-is-null"></a>Ссылка на экземпляр концентратора имеет значение null

Так как для каждого подключения, создается экземпляр концентратора не может создавать экземпляр концентратора в коде самостоятельно. Для вызова методов в концентратор из за пределами сам концентратор, см. в разделе [как вызывать методы клиента и управлять ими групп за пределами классу Hub](../guide-to-the-api/hubs-api-guide-server.md#callfromoutsidehub) способ получить ссылку на контекст концентратора.

### <a name="httpcontextcurrentsession-is-null"></a>HTTPContext.Current.Session имеет значение null

Это сделано намеренно. SignalR поддерживает состояние сеанса ASP.NET, так как Включение состояния сеанса нарушит дуплексного обмена сообщениями.

### <a name="no-suitable-method-to-override"></a>Нет метод, пригодный для переопределения

Эта ошибка может возникнуть при использовании кода из более старой документации и в блогах. Убедитесь, что вы не ссылаются на имена методов, которые изменились или устарели (например `OnConnectedAsync`).

### <a name="hostcontextextensionswebsocketserverurl-is-null"></a>HostContextExtensions.WebSocketServerUrl имеет значение null

Это сделано намеренно. Этот член является устаревшим и не должны использоваться.

### <a name="a-route-named-signalrhubs-is-already-in-the-route-collection-error"></a>Ошибка «маршрут с именем «signalr.hubs» уже находится в коллекции маршрутов»

Эта ошибка возникает, если `MapHubs` вызывается дважды вашим приложением. Некоторые приложения вызывают пример `MapHubs` непосредственно в файле глобального приложения; другим пользователям в вызове в класс-оболочку. Убедитесь, что приложение не оба.

<a id="vs"></a>

## <a name="visual-studio-issues"></a>Проблемы в Visual Studio

В этом разделе описываются проблемы, возникающие в Visual Studio.

### <a name="script-documents-node-does-not-appear-in-solution-explorer"></a>Сценарий узла "документы" не отображается в обозревателе решений

Некоторые из наших учебниках дать вам ссылки на узел «Документы скриптов» в обозревателе решений во время отладки. Этот узел создается в отладчике JavaScript и отображается только при отладке клиентов браузера Internet Explorer; узел не будет отображаться, если используются Chrome или Firefox. Отладчик JavaScript также не запустится, если выполняется другой отладчик клиента, такие как отладчик Silverlight.

### <a name="signalr-does-not-work-on-visual-studio-2008-or-earlier"></a>SignalR не работает в Visual Studio 2008 или более ранней версии

Это сделано намеренно. SignalR требуется платформа .NET Framework 4 или более поздней версии; для этого необходимо разрабатывать приложений SignalR в Visual Studio 2010 или более поздней версии.

<a id="iis"></a>

## <a name="iis-issues"></a>Проблемы с IIS

Этот раздел содержит проблемы с Internet Information Services.

### <a name="web-site-crashes-after-maphubs-call"></a>Веб-сайт аварийно завершает работу после вызова MapHubs

Эта проблема будет исправлена в последней версии SignalR. Убедитесь, что вы используете последнюю выпущенную версию SignalR путем обновления установки с помощью NuGet.

<a id="azure"></a>

## <a name="azure-issues"></a>Проблемы с Azure

Этот раздел содержит проблемы с Microsoft Azure.

### <a name="messages-are-not-received-through-the-azure-backplane-after-altering-topic-names"></a>Сообщения не принимаются через Azure задней панели после изменения имена разделов

Разделы, используемые Azure задней панели не предназначены для настройки пользователя.
