---
uid: visual-studio/overview/2013/release-notes
title: ASP.NET и веб-инструменты для визуальной студии 2013 Примечания к выпуску (ru) Документы Майкрософт
author: rick-anderson
description: В этом документе описывается выпуск ASP.NET и web Tools for Visual Studio 2013.
ms.author: riande
ms.date: 10/17/2013
ms.assetid: 08815768-2702-42ae-ae85-0a59934a11d1
msc.legacyurl: /visual-studio/overview/2013/release-notes
msc.type: authoredcontent
ms.openlocfilehash: 4494b4acdd30384e1def89b7fff9bad30933e38e
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81543500"
---
# <a name="aspnet-and-web-tools-for-visual-studio-2013-release-notes"></a>Заметки о выпуске ASP.NET and Web Tools для Visual Studio 2013

[корпорацией Майкрософт](https://github.com/microsoft)

> В этом документе описывается выпуск ASP.NET и web Tools for Visual Studio 2013.

## <a name="contents"></a>Содержимое

- [Примечания к установке](#TOC1)
- [Документация](#TOC2)
- [Требования к программному обеспечению](#TOC4)

### <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET и веб-инструменты для визуальной студии 2013

- [Один ASP.NET](#TOC6)
- [Новый опыт веб-проектов](#newproj)
- [ASP.NET Леса](#scaffold)
- [Привязывание к браузеру](#browser-link)
- [Улучшения веб-редактора визуальной студии](#web-editor)
- [Поддержка веб-приложений службы приложений Azure в визуальной студии](#waws)
- [Веб-публикации Улучшения](#publish)
- [NuGet 2.7](#nuget)
- [ASP.NET веб-формы](#TOC9)
- [ASP.NET MVC 5](#TOC10)
- [Веб-API ASP.NET 2](#TOC11)
- [ASP.NET SignalR](#TOC13)
- [ASP.NET Identity](#TOC8)
- [Компоненты Microsoft OWIN](#TOC7)
- [Entity Framework 6](#ef6)
- [ASP.NET бритва 3](#TOC14)
- [ASP.NET приложение Приостановить](#TOC15)
- [Известные проблемы и ломая изменения](#knownissues)

<a id="TOC1"></a>
## <a name="installation-notes"></a>Замечания по установке

ASP.NET и веб-инструменты для визуальной студии 2013 в комплекте в основной установщик и могут быть загружены [здесь](https://www.asp.net/downloads).

<a id="TOC2"></a>
## <a name="documentation"></a>Документация

Учебники и другая информация о ASP.NET и веб-инструменты для визуальной студии 2013 доступны на [веб-сайте ASP.NET](https://www.asp.net/).

<a id="TOC4"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

ASP.NET и веб-инструменты требует Visual Studio 2013.

<a id="TOC5"></a>
## <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET и веб-инструменты для визуальной студии 2013

В следующих разделах описаны функции, которые были введены в релизе.

<a id="TOC6"></a>
## <a name="one-aspnet"></a>Один ASP.NET

С выпуском Visual Studio 2013 мы сделали шаг к объединению опыта использования ASP.NET технологий, так что вы можете легко смешивать и сочетать те, которые вы хотите. Например, можно начать проект с помощью MVC и легко добавить страницы web Forms в проект позже или эшафот Web AIS в проекте Web Forms. Один ASP.NET это все о том, чтобы сделать его проще для вас, как разработчика, чтобы делать то, что вы любите в ASP.NET. Независимо от того, какую технологию вы выберете, вы можете быть уверены в том, что вы строите на доверенных базовых рамках One ASP.NET.

<a id="newproj"></a>
## <a name="new-web-project-experience"></a>Новый опыт веб-проектов

Мы расширили опыт создания новых веб-проектов в Visual Studio 2013. В диалоге **New ASP.NET Web Project** вы можете выбрать нужный тип проекта, настроить любую комбинацию технологий (Web Forms, MVC, Web API), настроить параметры аутентификации и добавить модульный проект тестирования.

![Проект «Новый ASP.NET»](release-notes/_static/image1.png)

Новый диалог позволяет изменять параметры аутентификации по умолчанию для многих шаблонов. Например, при создании проекта ASP.NET Web-форм можно выбрать любой из следующих вариантов:

- Без аутентификации
- Индивидуальные учетные записи пользователей (ASP.NET членство или в систему социального провайдера)
- Организационные учетные записи (Активный каталог в интернет-приложении)
- Аутентификация Windows (Активный каталог в интранет-приложении)

![Параметры проверки подлинности](release-notes/_static/image2.png)

Для получения дополнительной информации о новом процессе создания веб-проектов, см [ASP.NET.](creating-web-projects-in-visual-studio.md) Более подробную информацию о новых вариантах проверки подлинности можно узнать ASP.NET [identity](#TOC8) позже в этом документе.

<a id="scaffold"></a>
## <a name="aspnet-scaffolding"></a>ASP.NET Леса

ASP.NET Scaffolding — это платформа для генерации кода для ASP.NET веб-приложений. Это упрощает добавление шаблонного кода в проект, который взаимодействует с моделью данных.

В предыдущих версиях Visual Studio строительные леса ограничивались ASP.NET проектами MVC. С Visual Studio 2013 теперь вы можете использовать строительные леса для любого ASP.NET проекта, включая веб-формы. Visual Studio 2013 в настоящее время не поддерживает генерацию страниц для проекта Web Forms, но вы все еще можете использовать строительные леса с веб-формами, добавляя mVC зависимостей в проект. Поддержка создания страниц для веб-форм будет добавлена в будущем обновлении.

При использовании строительных лесов мы гарантируем, что все необходимые зависимости установлены в проекте. Например, если вы начинаете с проекта ASP.NET web Forms, а затем используете строительные леса для добавления контроллера Web API, необходимые пакеты и ссылки NuGet добавляются в ваш проект автоматически.

Чтобы добавить строительные леса MVC в проект Web Forms, добавьте **новый элемент Scaffolded** и выберите **MVC 5 Зависимости** в окне диалога. Есть два варианта для строительных лесов MVC; Минимальный и полный. Если вы выберете Minimal, в проект добавляются только пакеты и ссылки NuGet для ASP.NET MVC. При выборе опции Full добавлены минимальные зависимости, а также необходимые файлы содержимого для проекта MVC.

Поддержка контроллеров асин для строительных лесов использует новые функции async из Entity Framework 6.

Для получения дополнительной информации и учебников, см [ASP.NET Scaffolding Обзор](aspnet-scaffolding-overview.md).

<a id="browser-link"></a>
## <a name="browser-link--signalr-channel-between-browser-and-visual-studio"></a>Ссылка на браузер - канал SignalR между браузером и Visual Studio

Новая функция [Browser Link](using-browser-link.md) позволяет подключить несколько браузеров к Visual Studio и обновить их все, нажав кнопку в панели инструментов. Вы можете подключить несколько браузеров к сайту разработки, включая мобильные эмуляторы, и нажмите обновление, чтобы обновить все браузеры одновременно. Browser Link также предоставляет API, позволяющий разработчикам писать расширения Браузерной ссылки.

![](release-notes/_static/image3.png)

Позволяя разработчикам воспользоваться API Link Browser, становится возможным создавать очень продвинутые сценарии, которые пересекают границы между Visual Studio и любым подключенным браузером. Web Essentials использует API для создания интегрированного интерфейса между Visual Studio и инструментами разработчика браузера, удаленного управления мобильными эмуляторами и многое другое.

<a id="web-editor"></a>
## <a name="visual-studio-web-editor-enhancements"></a>Улучшения веб-редактора визуальной студии

Visual Studio 2013 включает в себя новый HTML-редактор для файлов Razor и HTML файлов в веб-приложениях. Новый HTML-редактор предоставляет единую единую схему на основе HTML5. Он имеет автоматическое завершение скобки, J'ury UI и AngularJS атрибут IntelliSense, атрибут IntelliSense группирования, ID и название класса Intellisense, и другие улучшения, включая лучшую производительность, форматирование и SmartTags.

Следующий скриншот демонстрирует использование атрибута Bootstrap IntelliSense в html-редакторе.

![Интеллект в HTML-редакторе](release-notes/_static/image4.png)

Visual Studio 2013 также поставляется с как CoffeeScript и LESS редакторов встроенных дюйма Редактор LESS поставляется со всеми классными функциями от редактора CSS и имеет специфический Intellisense для переменных и миксинов во всех документах LESS в цепочке. @import

<a id="waws"></a>
## <a name="azure-app-service-web-apps-support-in-visual-studio"></a>Поддержка веб-приложений службы приложений Azure в визуальной студии

В Visual Studio 2013 с Azure SDK для .NET 2.2 вы можете использовать **Server Explorer** для непосредственного взаимодействия с удаленными веб-приложениями. Вы можете войти в свою учетную запись Azure, создать новые веб-приложения, настроить приложения, просматривать журналы в реальном времени и многое другое. Вскоре после выхода SDK 2.2 вы сможете работать в режиме отладки удаленно в Azure. Большинство новых функций для Web Apps Azure App Service также работают в Visual Studio 2012 при установке текущего выпуска SDK Azure для .NET.

Дополнительные сведения см. в следующих ресурсах:

- [Создайте ASP.NET веб-приложение в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-get-started/)
- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/)

<a id="publish"></a>
## <a name="web-publish-enhancements"></a>Веб-публикации Улучшения

Visual Studio 2013 включает в себя новые и расширенные функции Web Publish. Вот некоторые из них:

- Легко [автоматизировать шифрование файлов Web.config.](https://go.microsoft.com/fwlink/?LinkId=325529) (Эта ссылка и следующие два пункта к документации по MSDN, которые могут быть доступны не до конца дня 10/17.)
- Легко [автоматизировать принятие приложения в автономном режиме во время развертывания.](https://go.microsoft.com/fwlink/?LinkId=325530)
- Нанастройка Web Deploy для [использования проверки файлов вместо последней измененной даты](https://go.microsoft.com/fwlink/?LinkId=325531) для определения того, какие файлы следует скопировать на сервер.
- Быстро публикуйте отдельные выбранные файлы (включая Web.config) при использовании методов публикации FTP или файловой системы, а также web Deploy.

Для получения дополнительной информации о ASP.NET веб-развертывание, см [ASP.NET сайте](https://go.microsoft.com/fwlink/?LinkId=322027).

<a id="nuget"></a>
## <a name="nuget-27"></a>NuGet 2.7

NuGet 2.7 включает в себя богатый набор новых функций, которые подробно описаны на [NuGet 2.7 Release Notes](http://docs.nuget.org/docs/release-notes/nuget-2.7).

Эта версия NuGet также устраняет необходимость предоставления явного согласия на функцию восстановления пакета NuGet для загрузки пакетов. Согласие (и связанный с ним флажок в диалоге предпочтений NuGet) теперь предоставляется путем установки NuGet. Теперь восстановление пакета просто работает по умолчанию.

<a id="TOC9"></a>
## <a name="aspnet-web-forms"></a>Веб-формы ASP.NET

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проекта Web Forms легко интегрируются с новым опытом One ASP.NET. Вы можете добавить поддержку MVC и Web API в проект Web Forms, а также настроить аутентификацию с помощью мастера создания проекта One ASP.NET. Для получения дополнительной информации, смотрите [Создание ASP.NET веб-проектов в Visual Studio 2013](creating-web-projects-in-visual-studio.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проекта Web Forms поддерживают новую платформу ASP.NET identity. Кроме того, шаблоны теперь поддерживают создание проекта интрасети web Forms. Для получения дополнительной [информации, см. Методы аутентификации](creating-web-projects-in-visual-studio.md#auth) в **создании ASP.NET веб-проектов в Visual Studio 2013**.

### <a name="bootstrap"></a>Начальная загрузка

Шаблоны Web Forms используют [Bootstrap,](http://twitter.github.io/bootstrap/) чтобы обеспечить гладкий и отзывчивый внешний вид, который можно легко настроить. Для получения дополнительной информации, [см. Bootstrap в Visual Studio 2013 веб-шаблоны проекта](creating-web-projects-in-visual-studio.md#bootstrap).

<a id="TOC10"></a>
## <a name="aspnet-mvc-5"></a>ASP.NET MVC 5

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проекта Web MVC легко интегрируются с новым опытом One ASP.NET. Вы можете настроить проект MVC и настроить аутентификацию с помощью мастера создания проекта One ASP.NET. Вступительный учебник для ASP.NET MVC 5 можно найти на [начало работы с ASP.NET MVC 5](../../../mvc/overview/getting-started/introduction/getting-started.md).

Для получения информации о модернизации проектов MVC 4 до MVC 5, [см. Как обновить ASP.NET MVC 4 и Web API проекта ASP.NET MVC 5 и Web API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проекта MVC были обновлены для использования ASP.NET Identity для проверки подлинности и управления идентификацией. Учебник с участием Facebook и Google аутентификации и нового aPI членства можно найти в [Создать ASP.NET MVC 5 App с Facebook и Google OAuth2 и OpenID Войти и](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md) создать ASP.NET [MVC приложение с auth и S'L DB и развернуть](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/)в Azure App Service .

### <a name="bootstrap"></a>Начальная загрузка

Шаблон проекта MVC был обновлен, чтобы использовать [Bootstrap,](http://getbootstrap.com/) чтобы обеспечить гладкий и отзывчивый внешний вид, что вы можете легко настроить. Для получения дополнительной информации, [см. Bootstrap в Visual Studio 2013 веб-шаблоны проекта](creating-web-projects-in-visual-studio.md#bootstrap).

### <a name="authentication-filters"></a>Фильтры аутентификации

Фильтры аутентификации — это новый вид фильтра в ASP.NET MVC, который работает до фильтрации авторизации в конвейере ASP.NET MVC и позволяет указывать логику аутентификации за действие, контроллер или глобально для всех контроллеров. Фильтры аутентификации обрабатывают учетные данные в запросе и предоставляют соответствующий принцип. Фильтры аутентификации могут также добавлять проблемы аутентификации в ответ на несанкционированные запросы.

### <a name="filter-overrides"></a>Фильтр переопределения

Теперь можно переопределить, какие фильтры применяются к данному методу действия или контроллеру, указав фильтр переопределения. Фильтры переопределения указывают набор типов фильтров, которые не должны быть запущены для заданной области (действия или контроллера). Это позволяет настроить фильтры, которые применяются глобально, но затем исключить некоторые глобальные фильтры от применения к конкретным действиям или контроллерам.

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

ASP.NET MVC теперь поддерживает атрибут разгрома, благодаря вкладу Тим [http://attributerouting.net](http://attributerouting.net)Ак колл, автор . При маршрутизации атрибутов вы можете указать свои маршруты, аннотируя свои действия и контроллеры.

<a id="TOC11"></a>
## <a name="aspnet-web-api-2"></a>Веб-API ASP.NET 2

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

ASP.NET Web API теперь поддерживает атрибут ывалии, благодаря вкладу [http://attributerouting.net](http://attributerouting.net)Тима Макколла, автора . При маршрутизации атрибутов можно указать маршруты Web API, аннотируя свои действия и контроллеры следующим образом:

[!code-csharp[Main](release-notes/samples/sample1.cs)]

Трассировка атрибутов дает вам больше контроля над URIs в вашем веб-API. Например, можно легко определить иерархию ресурсов с помощью одного контроллера API:

[!code-csharp[Main](release-notes/samples/sample2.cs)]

Маршрутирование атрибутов также обеспечивает удобный синтаксис для определения дополнительных параметров, значений по умолчанию и ограничений маршрута:

[!code-csharp[Main](release-notes/samples/sample3.cs)]

Для получения дополнительной информации о [Attribute Routing in Web API 2](../../../web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2.md)разгроме атрибутов см.

### <a name="oauth-20"></a>OAuth 2.0

Шаблоны проекта Web API и одностраничного приложения теперь поддерживают авторизацию с помощью OAuth 2.0. OAuth 2.0 является основой для авторизации доступа клиентов к защищенным ресурсам. Он работает для различных клиентов, включая браузеры и мобильные устройства.

Поддержка OAuth 2.0 основана на новых средствах обеспечения безопасности, предоставляемых компонентами Microsoft OWIN для проверки подлинности предъявителя и реализации роли сервера авторизации. Кроме того, клиенты могут быть авторизованы с помощью сервера авторизации организации, например Azure Active Directory или ADFS в Windows Server 2012 R2.

### <a name="odata-improvements"></a>Улучшения OData

**Поддержка $select, $expand, $batch и $value**

ASP.NET Web API OData теперь имеет полную поддержку $select, $expand и $value. Вы также можете использовать $batch для пакетирования запросов и обработки наборов изменений.

Варианты $select и $expand позволяют изменить форму данных, которые возвращаются из конечной точки OData. Для получения дополнительной информаци [$expand $selectи см.](../../../web-api/overview/odata-support-in-aspnet-web-api/using-select-expand-and-value.md)

**Улучшенная расширяемость**

Formatters OData теперь расширяются. Можно добавить метаданные о вводе Atom, поддержку именованных потоков и записей ссылок на мультимедиа, добавить аннотации экземпляров и настроить способы создания ссылок.

**Поддержка без шрифта**

Теперь можно создавать службы OData без необходимости определения типов CLR для типов сущностей. Вместо этого контроллеры OData могут принимать или возвращать экземпляры **IEdmObject,** которые являются фактами OData, сериализуются/десериализируются.

**Повторное использование существующей модели**

Если у вас уже есть существующая модель данных сущности (EDM), теперь ее можно использовать напрямую, вместо того, чтобы строить новую. Например, если вы используете рамки сущности, вы можете использовать EDM, который создает ДЛЯ вас EF.

### <a name="request-batching"></a>Запрос пакетирования

Пакетирование запроса объединяет несколько операций в один запрос HTTP POST, чтобы уменьшить сетевой трафик и обеспечить более плавный и менее болтливый пользовательский интерфейс. ASP.NET Web API теперь поддерживает несколько стратегий пакетирования запросов:

- Используйте $batch конечную точку службы OData.
- Упакуйте несколько запросов в один многокомпонентный запрос MIME.
- Используйте пользовательский формат пакетирования.

Для включения пакета запросов просто добавьте маршрут с обработчиком пакетирования в конфигурацию Web API:

[!code-csharp[Main](release-notes/samples/sample4.cs)]

Вы также можете контролировать, выполняются ли запросы или выполняются последовательно или в любом порядке.

### <a name="portable-aspnet-web-api-client"></a>Портативный клиент ASP.NET Web API

Теперь вы можете использовать ASP.NET веб-клиент API для создания портативных библиотек классов, которые работают в windows Store и Windows Phone 8 приложений. Вы также можете создать портативные предки, которые могут быть общими для всех клиентов и серверов.

### <a name="improved-testability"></a>Улучшенная тестируемость

Web API 2 значительно упрощает модульное тестирование контроллеров API. Просто мгновенно ваш контроллер API с сообщением запроса и конфигурации, а затем вызвать метод действия, который вы хотите проверить. Также легко издеваться над классом **UrlHelper** для методов действий, выполняющие генерацию ссылок.

### <a name="ihttpactionresult"></a>IHttpActionResult

Теперь вы можете реализовать IHttpActionResult для инкапсулировать результат ваших методов действий Web API. IHttpActionResult, возвращенный из метода действий Web API, выполняется ASP.NET время выполнения Web API для получения полученного сообщения ответа. IHttpActionResult может быть возвращен из любого действия Web API для упрощения модульного тестирования реализации Web API. Для удобства ряд реализаций IHttpActionResult предоставляется из коробки, включая результаты для возвращения определенных кодов статуса, отформатированного контента или ответов, согласованных с содержанием.

### <a name="httprequestcontext"></a>HttpRequestContext

Новый **HttpRequestContext** отслеживает любое состояние, которое привязано к запросу, но не сразу доступно из запроса. Например, можно использовать **HttpRequestContext** для получения данных маршрута, основного, связанного с запросом, сертификата клиента, **UrlHelper** и корня виртуального пути. Вы можете легко создать **HttpRequestContext** для целей модульного тестирования.

Поскольку основной для запроса вытекает с запросом вместо того, чтобы полагаться на **Thread.CurrentPrincipal,** основной теперь доступен в течение всего срока действия запроса, пока он находится в конвейере Web API.

### <a name="cors"></a>CORS

Благодаря еще одному большому вкладу Брока Аллена, ASP.NET теперь полностью поддерживает совместное использование запросов Cross Origin (CORS).

Параметры безопасности веб-браузера предотвращают отправку запросов AJAX с веб-страницы к другому домену. [CORS](http://www.w3.org/TR/cors/) является стандартом W3C, который позволяет серверу ослабить политику того же происхождения. С помощью CORS сервер может явным образом разрешить некоторые запросы независимо от источника, а другие — отклонить.

Web API 2 теперь поддерживает CORS, включая автоматическое обращение с предполетным запросом. Для получения дополнительной информации смотрите [включение запросов Cross-Origin в ASP.NET Web API](../../../web-api/overview/security/enabling-cross-origin-requests-in-web-api.md).

### <a name="authentication-filters"></a>Фильтры аутентификации

Фильтры аутентификации — это новый вид фильтра в ASP.NET Web API, который работает до фильтрации авторизации в ASP.NET конвейера Web API и позволяет указывать логику проверки подлинности за действие, контроллер или глобально для всех контроллеров. Фильтры аутентификации обрабатывают учетные данные в запросе и предоставляют соответствующий принцип. Фильтры аутентификации могут также добавлять проблемы аутентификации в ответ на несанкционированные запросы.

### <a name="filter-overrides"></a>Переопределения фильтра

Теперь можно переопределить, какие фильтры применяются к данному методу действия или контроллеру, указав фильтр переопределения. Фильтры переопределения указывают набор типов фильтров, которые не должны работать для заданной области (действия или контроллера). Это позволяет добавлять глобальные фильтры, но затем исключить некоторые из конкретных действий или контроллеров.

### <a name="owin-integration"></a>Интеграция OWIN

ASP.NET Web API теперь полностью поддерживает OWIN и может работать на любом хосте OWIN. Также включен **HostAuthenticationFilter,** который обеспечивает интеграцию с системой аутентификации OWIN.

С интеграцией OWIN вы можете самостоятельно размещать Web API в собственном процессе наряду с другими программами-посредниками OWIN, такими как SignalR. Для получения дополнительной информации см [ASP.NET.](../../../signalr/overview/deployment/tutorial-signalr-self-host.md)

<a id="TOC13"></a>
## <a name="aspnet-signalr-20"></a>ASP.NET СигналР 2.0

В следующих разделах описаны особенности SignalR 2.0.

- [Построен на OWIN](#builtonowin)
- [MapHubs и MapConnection теперь MapSignalR](#MapSignalR)
- [Поддержка кросс-домена](#crossdomain)
- [Поддержка iOS и Android через MonoTouch и MonoDroid](#mobile)
- [Портативный клиент .NET](#portable)
- [Новый пакет self-host](#selfhost)
- [Обратная поддержка сервера, совместимая с обратной памятью](#backwardcompat)
- [Удалена поддержка сервера для .NET 4.0](#remove40)
- [Отправка сообщения в список клиентов и групп](#messagelist)
- [Отправка сообщения конкретному пользователю](#sendtouser)
- [Улучшенная поддержка обработки ошибок](#errorhandling)
- [Упрощенное модульное тестирование концентраторов](#unittesting)
- [Обработка ошибок JavaScript](#javascripterror)

Например, как обновить существующий проект 1.x до SignalR 2.0, [см.](../../../signalr/overview/releases/upgrading-signalr-1x-projects-to-20.md)

<a id="builtonowin"></a>
### <a name="built-on-owin"></a>Построен на OWIN

SignalR 2.0 построен полностью на [OWIN (Открытый веб-интерфейс для .NET)](http://owin.org/). Это изменение делает процесс настройки SignalR гораздо более последовательным между веб-хостинга и самостоятельнох приложений SignalR, но также требует ряда изменений API.

<a id="MapSignalR"></a>

### <a name="maphubs-and-mapconnection-are-now-mapsignalr"></a>MapHubs и MapConnection теперь MapSignalR

Для совместимости со стандартами OWIN эти методы `MapSignalR`были переименованы в . `MapSignalR`вызов без параметров будет отображать `MapHubs` все концентраторы (как это делает в версии 1.x); для отображения отдельных объектов **PersistentConnection,** укажите тип соединения как параметр типа и расширение URL для соединения в качестве первого аргумента.

Метод `MapSignalR` называется в классе стартапов Owin. Visual Studio 2013 содержит новый шаблон для стартап-класса Owin; использовать этот шаблон, сделайте следующее:

1. Нажмите на проект правой кнопкой мыши
2. Выберите **Добавить,** **Новый пункт...**
3. Выберите **класс стартапа Owin.** Назовите новый класс **Startup.cs**.

В **web-приложении** класс запуска Owin, содержащий `MapSignalR` метод, затем добавляется в процесс запуска Owin с помощью записи в настройках приложения в файле Web.Config, как показано ниже.

В **самохознятом приложении**класс Startup передается `WebApp.Start` как параметр типа метода.

**Картирование концентраторов и соединений в SignalR 1.x (из глобального файла приложения в веб-приложении):** 

[!code-csharp[Main](release-notes/samples/sample5.cs)]

**Картирование концентраторов и соединений в SignalR 2.0 (из файла класса Owin Startup):** 

[!code-csharp[Main](release-notes/samples/sample6.cs)]

В **самохознящемся приложении**класс Startup передается как параметр типа для метода, `WebApp.Start` как показано ниже.

[!code-csharp[Main](release-notes/samples/sample7.cs)]

<a id="crossdomain"></a>

### <a name="cross-domain-support"></a>Поддержка кросс-домена

В SignalR 1.x запросы на перекрестный домен контролировались одним флагом EnableCrossDomain. Этот флаг контролировал запросы JSONP и CORS. Для большей гибкости вся поддержка CORS была удалена из серверного компонента SignalR (клиенты JavaScript по-прежнему используют CORS обычно, если обнаруживается, что браузер поддерживает его), и для поддержки этих сценариев было предоставлено новое промежуточное программное обеспечение OWIN.

В SignalR 2.0, если JSONP требуется для клиента (для поддержки запросов кросс-домена в `EnableJSONP` старых браузерах), он должен быть включен явно, установив на `HubConfiguration` объекте, как `true`показано ниже. JSONP отключен по умолчанию, так как он менее безопасен, чем CORS.

Чтобы добавить новое промежуточное программное обеспечение `Microsoft.Owin.Cors` CORS в SignalR `UseCors` 2.0, добавьте библиотеку в свой проект и позвоните перед программой SignalR, как показано в разделе ниже.

**Добавление в проект Microsoft.Owin.Cors:** Для установки этой библиотеки запустите следующую команду в консоли менеджера пакетов:

[!code-powershell[Main](release-notes/samples/sample8.ps1)]

Эта команда добавит версию пакета 2.0.0 в проект.

**Вызов UseCors**

Следующие фрагменты кода демонстрируют, как реализовать соединения кросс-домена в SignalR 1.x и 2.0.

**Реализация запросов кросс-домена в SignalR 1.x (из глобального файла приложения)**

[!code-csharp[Main](release-notes/samples/sample9.cs)]

**Реализация запросов кросс-домена в SignalR 2.0 (из файла кода C')**

Следующий код показывает, как включить CORS или JSONP в проекте SignalR 2.0. Этот образец `Map` `RunSignalR` кода `MapSignalR`использует и вместо , так что CORS промежуточное программное обеспечение работает только для `MapSignalR`запросов SignalR, которые требуют поддержки CORS (а не для всего трафика на пути, указанном в .) `Map` также может быть использован для любого другого промежуточного программного обеспечения, которое должно работать для конкретного приставки URL, а не для всего приложения.

[!code-csharp[Main](release-notes/samples/sample10.cs)]

<a id="mobile"></a>

### <a name="ios-and-android-support-via-monotouch-and-monodroid"></a>Поддержка iOS и Android через MonoTouch и MonoDroid

Поддержка была добавлена для клиентов iOS и Android с использованием компонентов MonoTouch и MonoDroid из [библиотеки Xamarin.](https://xamarin.com/) Для получения дополнительной информации о том, как их использовать, [см.](https://github.com/SignalR/SignalR/wiki/Building-Mono.Mobile.sln) Эти компоненты будут доступны в [магазине Xamarin,](https://store.xamarin.com/) когда будет выпущен релиз SignalR RTW.

<a id="portable"></a>Портативный клиент .NET

Чтобы лучше облегчить развитие кросс-платформы, клиенты Silverlight, WinRT и Windows Phone были заменены одним портативным клиентом .NET, который поддерживает следующие платформы:

- NET 4.5
- Silverlight 5
- WinRT (.NET для приложений магазина Windows)
- Windows Phone 8

<a id="selfhost"></a>

### <a name="new-self-host-package"></a>Новый пакет self-host

В настоящее время существует пакет NuGet, чтобы было легче начать работу с SignalR Self-Host (приложения SignalR, которые размещаются в процессе или другом приложении, а не размещаются на веб-сервере). Чтобы обновить проект самостоятельного размещения, построенный с помощью SignalR 1.x, удалите пакет Microsoft.AspNet.SignalR.Owin и добавьте пакет Microsoft.AspNet.SignalR.SelfHost. Для получения дополнительной информации о начале работы с пакетом самостоятельного хозяина, [см.](../../../signalr/overview/deployment/tutorial-signalr-self-host.md)

<a id="backwardcompat"></a>

### <a name="backward-compatible-server-support"></a>Обратная поддержка сервера, совместимая с обратной памятью

В предыдущих версиях SignalR версии пакета SignalR, используемые в клиенте и сервере, должны быть идентичными. Для поддержки приложений с толстыми клиентами, которые будет трудно обновить, SignalR 2.0 теперь поддерживает использование более новой версии сервера со старым клиентом. **Примечание: SignalR 2.0 не поддерживает серверы, построенные со старыми версиями с новыми клиентами.**

<a id="remove40"></a>

### <a name="removed-server-support-for-net-40"></a>Удалена поддержка сервера для .NET 4.0

SignalR 2.0 отказался от поддержки совместимости сервера с .NET 4.0. .NET 4.5 должен использоваться с серверами SignalR 2.0. Существует еще .NET 4.0 клиент для SignalR 2.0.

<a id="messagelist"></a>

### <a name="sending-a-message-to-a-list-of-clients-and-groups"></a>Отправка сообщения в список клиентов и групп

В SignalR 2.0 можно отправить сообщение, используя список идентирок клиента и группы. Следующие фрагменты кода демонстрируют, как это сделать.

**Отправка сообщения в список клиентов и групп с помощью PersistentConnection**

[!code-csharp[Main](release-notes/samples/sample11.cs)]

**Отправка сообщения в список клиентов и групп, использующих концентраторы**

[!code-csharp[Main](release-notes/samples/sample12.cs)]

<a id="sendtouser"></a>

### <a name="sending-a-message-to-a-specific-user"></a>Отправка сообщения конкретному пользователю

Эта функция позволяет пользователям указать, что userId основан на IRequest через новый интерфейс IUserIdProvider:

**Интерфейс IUserIdProvider**

[!code-csharp[Main](release-notes/samples/sample13.cs)]

По умолчанию будет осуществляться реализация, которая использует IPrincipal.Identity.Name пользователя в качестве имени пользователя.

В концентратах вы сможете отправлять сообщения этим пользователям через новый API:

**Использование API клиента.Пользователя**

[!code-csharp[Main](release-notes/samples/sample14.cs)]

<a id="errorhandling"></a>

### <a name="better-error-handling-support"></a>Улучшенная поддержка обработки ошибок

Теперь пользователи могут выбрасывать **HubException** из любого вызова концентратора. Конструктор **HubException** может принимать строку сообщения и объект дополнительных данных об ошибке. SignalR автоматически заследует исключение и отправляет его клиенту, где он будет использоваться для отклонения/отказа вызова метода концентратора.

Настройка **исключениях концентратора показывает** подробное отношение к **HubException,** отправляемого обратно клиенту или нет; он всегда отправляется.

**Код на стороне сервера, демонстрирующий отправку HubException клиенту**

[!code-csharp[Main](release-notes/samples/sample15.cs)]

**Клиентский код JavaScript, демонстрирующий ответ на HubException, отправленный с сервера**

[!code-html[Main](release-notes/samples/sample16.html)]

**клиентский код .NET, демонстрирующий ответ на HubException, отправленный с сервера**

[!code-csharp[Main](release-notes/samples/sample17.cs)]

<a id="unittesting"></a>

### <a name="easier-unit-testing-of-hubs"></a>Упрощенное модульное тестирование концентраторов

SignalR 2.0 включает `IHubCallerConnectionContext` в себя интерфейс, вызванный на концентраторы, что делает его легче создавать макет вызова стороны клиента. Следующие фрагменты кода демонстрируют, используя этот интерфейс с популярными тестовыми ремнями [xUnit.net](https://github.com/xunit/xunit) и [moq.](https://code.google.com/p/moq/)

**Модульное тестирование SignalR с xUnit.net**

[!code-csharp[Main](release-notes/samples/sample18.cs)]

**Модульное тестирование SignalR с moq**

[!code-csharp[Main](release-notes/samples/sample19.cs)]

<a id="javascripterror"></a>

### <a name="javascript-error-handling"></a>Обработка ошибок JavaScript

В SignalR 2.0 все обработки вызовов JavaScript возвращают объекты ошибок JavaScript вместо необработанных строк. Это позволяет SignalR передавать более богатую информацию обработчикам ошибок. Вы можете получить внутреннее `source` исключение из свойства ошибки.

**Клиентский код JavaScript, обрабатываемый исключением Start.Fail**

[!code-javascript[Main](release-notes/samples/sample20.js)]

<a id="TOC8"></a>
## <a name="aspnet-identity"></a>ASP.NET Identity

### <a name="new-aspnet-membership-system"></a>Новая система ASP.NET членства

ASP.NET Identity — это новая система членства для ASP.NET приложений. ASP.NET Identity упрощает интеграцию данных профиля пользователя с данными приложения. ASP.NET Identity также позволяет выбрать модель сохранения для профилей пользователей в приложении. Данные можно сохранять в базе данных SQL Server или другом хранилище, в том числе хранилищах данных NoSQL , таких как таблица хранилища Azure. Для получения дополнительной информации, см [Индивидуальные учетные записи пользователей](creating-web-projects-in-visual-studio.md#indauth) в **создании ASP.NET веб-проектов в Visual Studio 2013**.

### <a name="claims-based-authentication"></a>Проверка подлинности на основе утверждений

ASP.NET теперь поддерживает проверку подлинности на основе утверждений, где личность пользователя представлена как набор требований доверенного эмитента. Пользователи могут быть проверены с помощью имени пользователя и пароля, хранящегося в базе данных приложений, или с помощью поставщиков социальных идентификационных данных (например, учетных записей Майкрософт, Facebook, Google, Twitter), или с помощью организационных учетных записей через службы Azure Active Directory или Active Directory Federation Services (ADFS).

### <a name="integration-with-azure-active-directory-and-windows-server-active-directory"></a>Интеграция с активным каталогом Azure и активным каталогом Windows Server

Теперь можно создавать ASP.NET проекты, которые используют Active Directory Azure или Активный каталог Windows Server (AD) для проверки подлинности. Для получения дополнительной информации см [Организационная отчетность](creating-web-projects-in-visual-studio.md#orgauth) в **создании ASP.NET веб-проектов в Visual Studio 2013**.

### <a name="owin-integration"></a>Интеграция OWIN

ASP.NET аутентификация теперь основана на промежуточном программном обеспечении OWIN, которое может быть использовано на любом хосте на основе OWIN. Для получения дополнительной информации о [Microsoft OWIN Components](#TOC7) OWIN, см.

<a id="TOC7"></a>
## <a name="microsoft-owin-components"></a>Компоненты Microsoft OWIN

[Открытый веб-интерфейс для .NET](http://owin.org/) (OWIN) определяет абстракцию между веб-серверами .NET и веб-приложениями. OWIN отсоединяет веб-приложение с сервера, делая веб-приложения хост-агностиком. Например, можно разместить веб-приложение на основе OWIN в IIS или самостоятельно разместить его в пользовательском процессе.

Изменения, внесенные в компоненты Microsoft OWIN (также известный как проект Katana), включают новые компоненты сервера и хоста, новые библиотеки помощников и промежуточное программное обеспечение, а также новые программы по обеспечению подлинности.

Для получения дополнительной информации о OWIN и Катана, [см.](../../../aspnet/overview/owin-and-katana/index.md)

**Примечание: [приложения OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) не могут работать в классическом режиме IIS; они должны работать в интегрированном режиме.**

**Примечание: [приложения OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) должны быть запущены в полном доверии.**

### <a name="new-servers-and-hosts"></a>Новые серверы и хосты

С этим выпуском были добавлены новые компоненты для включения сценариев самостоятельного размещения. Эти компоненты включают следующие пакеты NuGet:

- **Microsoft.owin.host.httpListener**. Предоставляет сервер OWIN, который использует **HttpListener** для прослушивания запросов HTTP и направления их в конвейер OWIN.
- **Microsoft.Owin.Hosting** предоставляет библиотеку для разработчиков, которые хотят самостоятельно разместить конвейер OWIN в пользовательском процессе, например, консольное приложение или служба Windows.
- **OwinHost**. Обеспечивает автономный исполняемый, который `Microsoft.Owin.Hosting` обертывает и позволяет самостоятельно размещать конвейер OWIN без необходимости написания пользовательского приложения хоста.

Кроме того, `Microsoft.Owin.Host.SystemWeb` пакет теперь позволяет промежуточное программное обеспечение предоставлять подсказки серверу **SystemWeb,** указывая, что промежуточное программное обеспечение должно быть вызвано на определенном этапе ASP.NET конвейера. Эта функция особенно полезна для промежуточного программного обеспечения для проверки подлинности, которое должно работать на ранних стадиях ASP.NET конвейера.

### <a name="helper-libraries-and-middleware"></a>Библиотеки для помощников и промежуточного посуды

Хотя компоненты OWIN можно писать, используя только определения функции и `Microsoft.Owin` шрифта из спецификации OWIN, новый пакет предоставляет более удобный набор абстракций. Этот пакет объединяет несколько более ранних `Owin.Extensions`пакетов (например, , `Owin.Types`) в одну, хорошо структурированную модель объекта, которая затем может быть легко использована другими компонентами OWIN. В самом деле, большинство компонентов Microsoft OWIN в настоящее время используют этот пакет.

> [!NOTE]
> [Приложения OWIN](http://www.owin.org) не могут работать в классическом режиме IIS; они должны работать в интегрированном режиме.

> [!NOTE]
> [Заявки OWIN](http://www.owin.org) должны быть запущены в полном доверии.

Этот релиз также включает в себя пакет Microsoft.Owin.Diagnostics, который включает в себя промежуточное программное обеспечение для проверки запущенного приложения OWIN, а также промежуточное программное обеспечение для ошибок, чтобы помочь в расследовании сбоев.

### <a name="authentication-components"></a>Компоненты аутентификации

Доступны следующие компоненты аутентификации.

- **Microsoft.Owin.Security.ActiveDirectory**. Позволяет проводить аутентификацию с помощью локальных или облачных служб каталога.
- **Microsoft.Owin.Security.Cookies** обеспечивает аутентификацию с помощью файлов cookie. Этот пакет был `Microsoft.Owin.Security.Forms`ранее назван .
- **Microsoft.Owin.Security.Facebook** обеспечивает аутентификацию с помощью сервиса Facebook, основанного на OAuth.
- **Microsoft.Owin.Security.Google** обеспечивает аутентификацию с помощью сервиса Google OpenID.
- **Microsoft.Owin.Security.Jwt** обеспечивает аутентификацию с помощью токенов JWT.
- **Microsoft.Owin.Security.MicrosoftAccount** обеспечивает аутентификацию с помощью учетных записей Майкрософт.
- **Microsoft.Owin.Security.OAuth**. Предоставляет сервер авторизации OAuth, а также промежуточное программное обеспечение для проверки подлинности токенов носителя.
- **Microsoft.Owin.Security.Twitter** обеспечивает аутентификацию с помощью сервиса Twitter, основанного на OAuth.

Этот релиз также `Microsoft.Owin.Cors` включает в себя пакет, который содержит промежуточное программное обеспечение для обработки кросс-происхождения HTTP запросов.

> [!NOTE]
> Поддержка подписания JWT была удалена в финальной версии Visual Studio 2013.

<a id="ef6"></a>
## <a name="entity-framework-6"></a>Entity Framework 6

Список новых функций и других изменений в рамках entity Framework 6 можно узнать в [версии Entity Framework History.](https://msdn.com/data/jj574253)

<a id="TOC14"></a>
## <a name="aspnet-razor-3"></a>ASP.NET бритва 3

ASP.NET Razor 3 включает в себя следующие новые функции:

- Поддержка редактирования вкладок. Ранее команда **Format Document,** автоматическое отформатирование и автоматическое форматирование в Visual Studio работали неправильно при использовании опции **Keep Tabs.** Это изменение исправляет форматирование Visual Studio для кода Razor для форматирования вкладок.
- Поддержка правил переписывания URL при создании ссылок.
- Удаление прозрачного атрибута безопасности.
  > [!NOTE]
  > Это нарушение изменения, и делает Razor 3 несовместимы с MVC4 и ранее, в то время как Razor 2 несовместим с MVC5 или сборки, составленные против MVC5.

Razor 3 вопросы, зафиксированные в Visual Studio 2013 из предварительного релиза версии можно найти [здесь](https://aspnetwebstack.codeplex.com/workitem/list/advanced?keyword=&status=Resolved%7cClosed&type=All&priority=All&release=All%7cv5.0%2bPreview%7cv5.0%2bRC%7cv5.0%2bRTM&assignedTo=All&component=Web%2bPages%252fRazor&reasonClosed=Fixed&sortField=LastUpdatedDate&sortDirection=Descending&page=0).

<a id="TOC15"></a>
## <a name="aspnet-app-suspend"></a>ASP.NET приложение Приостановить

ASP.NET App Suspend — это функция, меняющая правила игры в системе .NET 4.5.1, которая коренным образом меняет пользовательский опыт и экономическую модель размещения большого количества ASP.NET сайтов на одной машине. Для получения дополнительной информации, см [ASP.NET App Приостановить - отзывчивый общий веб-хостинг .NET](https://blogs.msdn.com/b/dotnet/archive/2013/10/09/asp-net-app-suspend-responsive-shared-net-web-hosting.aspx).

<a id="knownissues"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и ломая изменения

В этом разделе описаны известные проблемы и изменения в ASP.NET и веб-инструменты для визуальной студии 2013.

### <a name="nuget"></a>NuGet

- [Восстановление нового пакета не работает на Mono при использовании файла SLN](https://nuget.codeplex.com/workitem/3596) - будет исправлено в предстоящей загрузке nuget.exe и обновлении [пакета NuGet.CommandLine.](http://www.nuget.org/packages/NuGet.CommandLine/)
- [Восстановление нового пакета не работает с проектами Wix](https://nuget.codeplex.com/workitem/3598) - будет исправлено в предстоящей загрузке nuget.exe и обновлении [пакета NuGet.CommandLine.](http://www.nuget.org/packages/NuGet.CommandLine/)
- [Автоматическое восстановление пакета не работает для проектов под папкой решения](https://nuget.codeplex.com/workitem/3625) - будет исправлено в NuGet 2.8.

### <a name="aspnet-web-api"></a>Веб-API ASP.NET

1. `ODataQueryOptions<T>.ApplyTo(IQueryable)`не возвращается `IQueryable<T>` всегда, как мы `$select` `$expand`добавили поддержку и .

    Наши предыдущие `ODataQueryOptions<T>` образцы для всегда `ApplyTo` casted значение возвращения от . `IQueryable<T>` Это работало ранее, потому что`$filter`параметры `$orderby` `$skip`запроса, которые мы поддерживали ранее (, , `$top`) не меняют форму запроса. Теперь, `$select` когда `$expand` мы поддерживаем `ApplyTo` и `IQueryable<T>` возвращение значение от не будет всегда.

    [!code-csharp[Main](release-notes/samples/sample21.cs)]

    Если вы используете образец кода из ранее, он будет `$select` `$expand`продолжать работать, если клиент не отправляет и . Однако, если вы `$select` `$expand` хотите поддержать, и вы должны изменить этот код к этому.

    [!code-csharp[Main](release-notes/samples/sample22.cs)]
2. **Request.Url или RequestContext.Url является недействительным во время пакетного запроса**

    В сценарии пакетирования **UrlHelper** аннулируется при доступе к **Request.Url** или **RequestContext.Url**.

    Эта проблема в настоящее время отслеживается здесь: [BatchRequestContext.Url является недействительным для пакетного запроса](http://aspnetwebstack.codeplex.com/workitem/1301).

    Решением этой проблемы является создание нового экземпляра **UrlHelper,** как в следующем примере:

    **Создание нового экземпляра UrlHelper**

    [!code-csharp[Main](release-notes/samples/sample23.cs)]

### <a name="aspnet-mvc"></a>ASP.NET MVC 3

1. При использовании MVC5 и OrgAuth, если у вас есть представления, которые делают проверку AntiForgerToken, вы можете встретить следующую ошибку при публикации данных в представлении:

    **Ошибка**.

    *Ошибка сервера в приложении «/».*

    <em>Претензия типа<http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier>' или<https://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider>' не присутствовала на предоставленной claimsIdentity. Для обеспечения поддержки токенов анти-подлога с помощью проверки подлинности на основе утверждений, пожалуйста, убедитесь, что настроенный поставщик претензий предоставляет обе эти требования в экземплярах ClaimsIdentity, которые он генерирует. Если настроенный поставщик претензий вместо этого использует другой тип претензий в качестве уникального идентификатора, его можно настроить, установив статическое свойство AntiForgeryConfig.UniqueClaimTypeIdentifier.</em>

    **Инструкции по решению**.

    Добавьте следующую строку в Global.asax, чтобы исправить это:

    `AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.Name;`

    Это будет исправлено для следующего релиза.
2. После обновления приложения MVC4 до MVC5 создайте решение и запустите его. Вы должны увидеть следующую ошибку:

    (А) System.Web.WebPages.Razor.Configuration.HostSection не может быть отлит на сайте «B'System.web.webPages.Razor.Configuration.HostSection». Type A originates from 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\windows\Microsoft.Net\assembly\GAC\_MSIL\System.Web.WebPages.Razor\v4.0\_2.0.0.0\_\_31bf3856ad364e35\System.Web.WebPages.Razor.dll'. Тип B происходит от 'System.Web.WebPages.Razor, Версия 3.0.0.0, Культура-нейтральная, PublicKeyToken-31bf3856ad364e35' в контексте 'По умолчанию' в месте 'C:'Windows-Microsoft.NET-Framework-v4.0.30319-Временный ASP.NET Файлы 005bbd0-e8b5908e-assembly-dl3-c9cbca63'f8910382\_6273ce01-System.Web.WebPages.Razor.dll'.

    Чтобы исправить вышеупомянутую ошибку, откройте *все* файлы Web.config (включая файлы в папке Views) в проекте и сделайте следующее:

   1. Обновление всех случаев версии "4.0.0.0. " "System.Web.Mvc" до "5.0.0.0.0".
   2. Обновление всех случаев версии "2.0.0.0.0" &quot;"System.Web.Helpers",&quot; &quot;System.Web.WebPages и&quot; System.web.web.WebPages.Razor до "3.0.0.0"

      Например, после внесения вышеуказанных изменений привязки сборки должны выглядеть следующим образом:

      [!code-xml[Main](release-notes/samples/sample24.xml)]

      Для получения информации о модернизации проектов MVC 4 до MVC 5, [см. Как обновить ASP.NET MVC 4 и Web API проекта ASP.NET MVC 5 и Web API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).
3. При использовании проверки на стороне клиента с помощью ненавязчивой валидации j'ery, сообщение о проверке иногда некорректно для элемента ввода HTML с числом типа. Ошибка проверки требуемого значения ("Необходимое поле возраста") отображается при входе недействительного номера вместо правильного сообщения о том, что требуется допустимый номер.

    Эта проблема обычно встречается с эшафот код для модели с целью собственности на Создание и отодвинет представления.

    Чтобы обойти этот вопрос, измените помощника редактора из:

    `@Html.EditorFor(person => person.Age)`

    на:

    `@Html.TextBoxFor(person => person.Age)`
4. ASP.NET MVC 5 больше не поддерживает частичное доверие. Проекты, связанные с файлами mVC или WebAPI, должны удалить атрибут [SecurityTransparent](https://msdn.microsoft.com/library/system.security.securitytransparentattribute.aspx) и атрибут [AllowPartiallyTrustedCallers.](https://msdn.microsoft.com/library/system.security.allowpartiallytrustedcallersattribute.aspx) Удаление этих атрибутов позволит устранить ошибки компилятора, такие как следующие.

    `Attempt by security transparent method ‘MyComponent' to access security critical type 'System.Web.Mvc.MvcHtmlString' failed. Assembly 'PagedList.Mvc, Version=4.3.0.0, Culture=neutral, PublicKeyToken=abbb863e9397c5e1' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model. Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception.`

    > Обратите внимание, что в качестве побочного эффекта вы не можете использовать сборки 4.0 и 5.0 в одном приложении. Вам нужно обновить все из них до 5.0.

### <a name="spa-template-with-facebook-authorization-may-cause-instability-in-ie-while-the-web-site-is-hosted-in-intranet-zone"></a>SPA Template с разрешением Facebook может вызвать нестабильность в IE, в то время как веб-сайт размещается в зоне интрасети

Шаблон SPA обеспечивает внешний вход в систему с Facebook. Когда проект, созданный с помощью шаблона, работает локально, входе может привести к сбою IE.

Решение.

1. Размещение веб-сайта в интернет-зоне; Или

2. Проверьте сценарий в браузере, кроме IE.

### <a name="web-forms-scaffolding"></a>Формирование шаблонов веб-форм

Веб-формы Scaffolding был удален из VS2013 и будет доступен в будущем обновлении Visual Studio. Тем не менее, вы все еще можете использовать леса в рамках проекта Web Forms, добавляя mVC зависимостей и генерации строительных лесов для MVC. Ваш проект будет содержать сочетание веб-форм и MVC.

Чтобы добавить MVC в проект Web Forms, добавьте новый элемент с эшафотами и выберите **зависимости MVC 5.** Выберите минимальный или полный в зависимости от того, нужны ли вам все файлы содержимого, такие как скрипты. Затем добавьте эшафот для MVC, который создаст представления и контроллер в вашем проекте.

### <a name="mvc-and-web-api-scaffolding---http-404-not-found-error"></a>MVC и Web API Scaffolding - HTTP 404, не найдена ошибка

Если при добавлении элемента с эшафотом в проект возникнет ошибка, возможно, ваш проект останется в несогласованном состоянии. Некоторые изменения, внесенные в строительные леса, будут отброшены назад, но другие изменения, такие как установленные пакеты NuGet, не будут отброшены назад. Если изменения конфигурации реаутинга откатываются, пользователи получат ошибку HTTP 404 при навигации по эшафотным элементам.

Обходное решение.

- Чтобы исправить эту ошибку для MVC, добавьте новый элемент леса и выберите MVC 5 зависимостей (минимальные или полные). Этот процесс добавит все необходимые изменения в проект.
- Чтобы исправить эту ошибку для Web API:

  1. Добавьте класс WebApiConfig в свой проект.

      [!code-csharp[Main](release-notes/samples/sample25.cs)]

      [!code-vb[Main](release-notes/samples/sample26.vb)]
  2. Нанастройка WebApiConfig.Register\_в методе запуска приложений в Global.asax следующим образом:

      [!code-csharp[Main](release-notes/samples/sample27.cs)]

      [!code-vb[Main](release-notes/samples/sample28.vb)]
