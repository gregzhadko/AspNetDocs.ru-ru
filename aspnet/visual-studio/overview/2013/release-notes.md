---
uid: visual-studio/overview/2013/release-notes
title: Заметки о выпуске Visual Studio 2013 ASP.NET and Web Tools | Документация Майкрософт
author: microsoft
description: В этом документе описывается выпуск ASP.NET and Web Tools для Visual Studio 2013.
ms.author: riande
ms.date: 10/17/2013
ms.assetid: 08815768-2702-42ae-ae85-0a59934a11d1
msc.legacyurl: /visual-studio/overview/2013/release-notes
msc.type: authoredcontent
ms.openlocfilehash: d8af9c8e7ee1316a5eac90c5959d07c628154e09
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78449526"
---
# <a name="aspnet-and-web-tools-for-visual-studio-2013-release-notes"></a>Заметки о выпуске ASP.NET and Web Tools для Visual Studio 2013

по [Майкрософт](https://github.com/microsoft)

> В этом документе описывается выпуск ASP.NET and Web Tools для Visual Studio 2013.

## <a name="contents"></a>Содержимое

- [Заметки об установке](#TOC1)
- [Документация](#TOC2)
- [Требования к программному обеспечению](#TOC4)

### <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые функции в ASP.NET and Web Tools для Visual Studio 2013

- [Один ASP.NET](#TOC6)
- [Новые возможности веб-проекта](#newproj)
- [Формирование шаблонов ASP.NET](#scaffold)
- [Привязывание к браузеру](#browser-link)
- [Усовершенствования веб-редактора Visual Studio](#web-editor)
- [Поддержка веб-приложений службы приложений Azure в Visual Studio](#waws)
- [Усовершенствования веб-публикации](#publish)
- [NuGet 2.7](#nuget)
- [Веб-формы ASP.NET](#TOC9)
- [ASP.NET MVC 5](#TOC10)
- [Веб-API ASP.NET 2](#TOC11)
- [ASP.NET SignalR](#TOC13)
- [ASP.NET Identity](#TOC8)
- [Компоненты Microsoft OWIN](#TOC7)
- [Entity Framework 6](#ef6)
- [ASP.NET Razor 3](#TOC14)
- [Приостановка приложения ASP.NET](#TOC15)
- [Известные проблемы и критические изменения](#knownissues)

<a id="TOC1"></a>
## <a name="installation-notes"></a>Замечания по установке

ASP.NET and Web Tools для Visual Studio 2013 объединены в основной установщик и могут быть скачаны [здесь](https://www.asp.net/downloads).

<a id="TOC2"></a>
## <a name="documentation"></a>Документация

Руководства и другие сведения о ASP.NET and Web Tools для Visual Studio 2013 доступны на [веб-сайте ASP.NET](https://www.asp.net/).

<a id="TOC4"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

Для ASP.NET and Web Tools требуется Visual Studio 2013.

<a id="TOC5"></a>
## <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые функции в ASP.NET and Web Tools для Visual Studio 2013

В следующих разделах описаны функции, которые появились в выпуске.

<a id="TOC6"></a>
## <a name="one-aspnet"></a>Один ASP.NET

Выпустив Visual Studio 2013, мы сделали шаг к объединению опыта использования технологий ASP.NET, чтобы вы могли легко сочетаться с нужными. Например, можно запустить проект с помощью MVC и легко добавить страницы веб-форм в проект позже или сформировать шаблоны веб-API в проекте веб-форм. Одна ASP.NETа — это все, что облегчит разработчикам работу с вами в ASP.NET. Независимо от выбранной технологии вы можете быть уверены, что вы создаете на основе доверенной базовой платформы одного ASP.NET.

<a id="newproj"></a>
## <a name="new-web-project-experience"></a>Новые возможности веб-проекта

Мы улучшили процесс создания новых веб-проектов в Visual Studio 2013. В диалоговом окне **новый веб-проект ASP.NET** можно выбрать нужный тип проекта, настроить любую комбинацию технологий (веб-формы, MVC, веб-API), настроить параметры проверки подлинности и добавить проект модульного теста.

![Новый проект ASP.NET](release-notes/_static/image1.png)

Новое диалоговое окно позволяет изменить параметры проверки подлинности по умолчанию для многих шаблонов. Например, при создании проекта веб-форм ASP.NET можно выбрать любой из следующих вариантов:

- Без аутентификации
- Учетные записи отдельных пользователей (ASP.NET членство или поставщик социальных сетей)
- Учетные записи организации (Active Directory в Интернет-приложении)
- Проверка подлинности Windows (Active Directory в приложении интрасети)

![Параметры проверки подлинности](release-notes/_static/image2.png)

Дополнительные сведения о новом процессе создания веб-проектов см. в разделе [Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md). Дополнительные сведения о новых параметрах проверки подлинности см. в разделе [ASP.NET Identity](#TOC8) далее в этом документе.

<a id="scaffold"></a>
## <a name="aspnet-scaffolding"></a>Формирование шаблонов ASP.NET

Формирование шаблонов ASP.NET — это платформа создания кода для веб-приложений ASP.NET. Это упрощает добавление в проект стандартного кода, взаимодействующего с моделью данных.

В предыдущих версиях Visual Studio формирование шаблонов было ограничено ASP.NET проектами MVC. С Visual Studio 2013 теперь можно использовать формирование шаблонов для любого проекта ASP.NET, включая веб-формы. Visual Studio 2013 в настоящее время не поддерживает создание страниц для проекта веб-форм, но вы по-прежнему можете использовать формирование шаблонов с веб-формами, добавляя зависимости MVC в проект. Поддержка создания страниц для веб-форм будет добавлена в будущем обновлении.

При использовании формирования шаблонов убедитесь, что в проекте установлены все необходимые зависимости. Например, если начать с проекта веб-форм ASP.NET, а затем использовать формирование шаблонов для добавления контроллера веб-API, необходимые пакеты NuGet и ссылки добавляются в проект автоматически.

Чтобы добавить формирование шаблонов MVC в проект веб-форм, добавьте новый шаблонный **элемент** и выберите **зависимости MVC 5** в диалоговом окне. Существует два варианта формирования шаблонов MVC. Минимальный и полный. Если выбрать минимум, в проект будут добавлены только пакеты NuGet и ссылки для ASP.NET MVC. Если выбран параметр Full, добавляются минимальные зависимости, а также необходимые файлы содержимого для проекта MVC.

Поддержка формирования шаблонов асинхронных контроллеров использует новые асинхронные функции из Entity Framework 6.

Дополнительные сведения и учебники см. в разделе [Общие сведения о формировании шаблонов ASP.NET](aspnet-scaffolding-overview.md).

<a id="browser-link"></a>
## <a name="browser-link--signalr-channel-between-browser-and-visual-studio"></a>Связь с браузером — канал SignalR между браузером и Visual Studio

Новая функция [связи с браузером](using-browser-link.md) позволяет подключать несколько браузеров к Visual Studio и обновлять их, нажимая кнопку на панели инструментов. Можно подключить несколько браузеров к сайту разработки, в том числе к мобильным эмуляторам, и нажать кнопку обновить, чтобы одновременно обновить все браузеры. Связь с браузером также предоставляет API, позволяющий разработчикам создавать расширения связи браузера.

![](release-notes/_static/image3.png)

Позволяя разработчикам воспользоваться преимуществами API связи с браузером, можно создать очень сложные сценарии, пересекающие границы между Visual Studio и любым браузером, который подключен. Web Essentials использует преимущества API для создания интегрированного интерфейса Visual Studio и средств разработчика браузера, удаленного управления мобильными эмуляторами и многое другое.

<a id="web-editor"></a>
## <a name="visual-studio-web-editor-enhancements"></a>Усовершенствования веб-редактора Visual Studio

Visual Studio 2013 включает новый редактор HTML для файлов Razor и HTML в веб-приложениях. Новый редактор HTML предоставляет единую унифицированную схему на основе HTML5. Она включает автоматическое завершение фигурных скобок, Пользовательский интерфейс jQuery и атрибут AngularJS IntelliSense, группирование IntelliSense для атрибутов, идентификатор и имя класса IntelliSense, а также другие улучшения, включая лучшую производительность, форматирование и Смарттагс.

На следующем снимке экрана показано использование атрибута начальной загрузки IntelliSense в редакторе HTML.

![IntelliSense в редакторе HTML](release-notes/_static/image4.png)

Visual Studio 2013 также поставляется с CoffeeScript и менее встроенными редакторами. Редактор с МЕНЬШИм временем поставляется со всеми замечательными функциями редактора CSS и имеет определенную IntelliSense для переменных и примеси во всех документах, меньших по объему в цепочке @import.

<a id="waws"></a>
## <a name="azure-app-service-web-apps-support-in-visual-studio"></a>Поддержка веб-приложений службы приложений Azure в Visual Studio

В Visual Studio 2013 с пакетом Azure SDK для .NET 2,2 можно использовать **Обозреватель сервера** , чтобы напрямую взаимодействовать с удаленными веб-приложениями. Вы можете войти в учетную запись Azure, создать новые веб-приложения, настроить приложения, просмотреть журналы в реальном времени и многое другое. Вскоре после выпуска пакета SDK 2,2 вы сможете работать в режиме отладки удаленно в Azure. Большинство новых функций для веб-приложений службы приложений Azure также работают в Visual Studio 2012 при установке текущего выпуска пакета Azure SDK для .NET.

Для получения дополнительных сведений см. следующие ресурсы:

- [Создание веб-приложения ASP.NET в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-get-started/)
- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/)

<a id="publish"></a>
## <a name="web-publish-enhancements"></a>Усовершенствования веб-публикации

Visual Studio 2013 включает новые и улучшенные функции веб-публикации. Вот некоторые из них:

- Легко [Автоматизируйте шифрование файлов Web. config](https://go.microsoft.com/fwlink/?LinkId=325529). (Эта ссылка и следующие две ссылки на документацию на MSDN, которая может быть недоступна до конца дня в 10/17.)
- Легко [Автоматизируйте перевод приложения в автономный режим во время развертывания](https://go.microsoft.com/fwlink/?LinkId=325530).
- Настройте веб-развертывание для [использования контрольной суммы файла вместо даты последнего изменения](https://go.microsoft.com/fwlink/?LinkId=325531) для определения файлов, которые должны быть скопированы на сервер.
- Быстрая публикация отдельных выбранных файлов (включая Web. config) при использовании методов публикации FTP или файловой системы, а также с веб-развертывание.

Дополнительные сведения о веб-развертывании ASP.NET см. [на сайте ASP.NET](https://go.microsoft.com/fwlink/?LinkId=322027).

<a id="nuget"></a>
## <a name="nuget-27"></a>NuGet 2.7

NuGet 2,7 включает широкий набор новых функций, которые подробно описаны в [заметках о выпуске NuGet 2,7](http://docs.nuget.org/docs/release-notes/nuget-2.7).

Эта версия NuGet также устраняет необходимость предоставления явного согласия на функцию восстановления пакетов NuGet для скачивания пакетов. Согласие (и связанный флажок в диалоговом окне предпочтений NuGet) теперь предоставляется путем установки NuGet. Теперь по умолчанию восстановление пакетов выполняется просто.

<a id="TOC9"></a>
## <a name="aspnet-web-forms"></a>Веб-формы ASP.NET

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проектов веб-форм тесно интегрируются с новым ASP.NET интерфейсом. В проект веб-форм можно добавить поддержку MVC и веб-API, а также настроить проверку подлинности с помощью мастера создания проекта ASP.NET. Дополнительные сведения см. [в разделе Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов веб-форм поддерживают новую платформу ASP.NET Identity. Кроме того, шаблоны теперь поддерживают создание проекта интрасети веб-форм. Дополнительные сведения см. в разделе [методы проверки подлинности](creating-web-projects-in-visual-studio.md#auth) при **создании веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="bootstrap"></a>Загрузке

Шаблоны веб-форм используют [начальную загрузку](http://twitter.github.io/bootstrap/) , чтобы обеспечить удобство и быстроту реагирования, которые можно легко настроить. Дополнительные сведения см. [в разделе Начальная загрузка в шаблонах веб-проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

<a id="TOC10"></a>
## <a name="aspnet-mvc-5"></a>ASP.NET MVC 5

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проектов веб-MVC легко интегрируются с новым ASP.NET интерфейсом. Вы можете настроить проект MVC и настроить проверку подлинности с помощью мастера создания проекта ASP.NET. Вводное руководство по ASP.NET MVC 5 можно найти по адресу [Начало работы с ASP.NET MVC 5](../../../mvc/overview/getting-started/introduction/getting-started.md).

Сведения об обновлении проектов MVC 4 до MVC 5 см. в статье [Обновление проекта ASP.NET MVC 4 и веб-API до ASP.NET MVC 5 и Web API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов MVC были обновлены для использования ASP.NET Identity для проверки подлинности и управления удостоверениями. Руководство по проверке подлинности Facebook и Google и новый API членства можно найти в статье [Создание приложения ASP.NET MVC 5 с помощью Facebook и Google OAuth2 и OpenID Connect вход](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md) и [Создание приложения ASP.NET MVC с проверкой подлинности и базой данных SQL и развертывание в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/).

### <a name="bootstrap"></a>Загрузке

Шаблон проекта MVC был обновлен для использования [начальной загрузки](http://getbootstrap.com/) , чтобы обеспечить удобство и скорость реагирования, которые можно легко настроить. Дополнительные сведения см. [в разделе Начальная загрузка в шаблонах веб-проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в ASP.NET MVC, который выполняется перед фильтрами авторизации в конвейере ASP.NET MVC и позволяет указать логику проверки подлинности для каждого действия, каждого контроллера или глобально для всех контроллеров. Фильтры аутентификации обрабатывают учетные данные в запросе и предоставляют соответствующий субъект. Фильтры аутентификации также могут добавлять проблемы проверки подлинности в ответ на несанкционированные запросы.

### <a name="filter-overrides"></a>Переопределение фильтров

Теперь можно переопределить фильтры, применяемые к конкретному методу действия или контроллеру, указав фильтр переопределения. Фильтры переопределения указывают набор типов фильтров, которые не должны выполняться для данной области (действия или контроллера). Это позволяет настроить фильтры, которые применяются глобально, но затем исключить определенные глобальные фильтры из применения к определенным действиям или контроллерам.

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

ASP.NET MVC теперь поддерживает маршрутизацию атрибутов благодаря вкладу в Тим Мккалл, автору [http://attributerouting.net](http://attributerouting.net). С помощью маршрутизации атрибутов можно указать маршруты, заменив свои действия и контроллеры.

<a id="TOC11"></a>
## <a name="aspnet-web-api-2"></a>Веб-API ASP.NET 2

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

Веб-API ASP.NET теперь поддерживает маршрутизацию атрибутов благодаря вкладу в Тим Мккалл, автору [http://attributerouting.net](http://attributerouting.net). С помощью маршрутизации атрибутов можно указать маршруты веб-API, заменив свои действия и контроллеры следующим образом:

[!code-csharp[Main](release-notes/samples/sample1.cs)]

Маршрутизация атрибутов обеспечивает более полный контроль над URI в веб-API. Например, можно легко определить иерархию ресурсов с помощью одного контроллера API:

[!code-csharp[Main](release-notes/samples/sample2.cs)]

Маршрутизация атрибутов также предоставляет удобный синтаксис для указания необязательных параметров, значений по умолчанию и ограничений маршрута:

[!code-csharp[Main](release-notes/samples/sample3.cs)]

Дополнительные сведения о маршрутизации атрибутов см. [в разделе Маршрутизация атрибутов в веб-API 2](../../../web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2.md).

### <a name="oauth-20"></a>OAuth 2.0

Шаблоны проектов веб-API и одностраничного приложения теперь поддерживают авторизацию с помощью OAuth 2,0. OAuth 2,0 — это платформа для авторизации доступа клиентов к защищенным ресурсам. Он работает для различных клиентов, включая браузеры и мобильные устройства.

Поддержка OAuth 2,0 основана на новом программном обеспечении безопасности, предоставляемом компонентами Microsoft OWIN для проверки подлинности носителя и реализации роли сервера авторизации. Кроме того, клиенты могут быть авторизованы с помощью сервера авторизации Организации, например Azure Active Directory или ADFS в Windows Server 2012 R2.

### <a name="odata-improvements"></a>Улучшения OData

**Поддержка $select, $expand, $batch и $value**

Веб-API ASP.NET OData теперь имеет полную поддержку $select, $expand и $value. Можно также использовать $batch для пакетирования запросов и обработки наборов изменений.

Параметры $select и $expand позволяют изменить форму данных, возвращаемых конечной точкой OData. Дополнительные сведения см. [в статье Введение в поддержку $SELECT и $Expand в веб-API OData](../../../web-api/overview/odata-support-in-aspnet-web-api/using-select-expand-and-value.md).

**Улучшенная расширяемость**

Модули форматирования OData теперь являются расширяемыми. Можно добавить метаданные записи Atom, поддерживать именованный поток и ссылки на мультимедиа, добавлять заметки экземпляра и настраивать способ создания ссылок.

**Поддержка без типа**

Теперь можно создавать службы OData без необходимости определения типов среды CLR для типов сущностей. Вместо этого контроллеры OData могут принимать или возвращать экземпляры **иедмобжект**, которые являются модулями форматирования OData для сериализации и десериализации.

**Повторное использование существующей модели**

Если у вас уже есть модель EDM, ее можно использовать напрямую, а не создавать новую. Например, если вы используете Entity Framework, можно использовать модель EDM, которую сборки EF.

### <a name="request-batching"></a>Пакетная обработка запросов

Пакетная обработка запросов объединяет несколько операций в один запрос HTTP POST, чтобы сократить сетевой трафик и предоставить более гладкий и неработающий пользовательский интерфейс. Веб-API ASP.NET теперь поддерживает несколько стратегий для пакетирования запросов:

- Используйте $batchную конечную точку службы OData.
- Упаковка нескольких запросов в один составной запрос MIME.
- Используйте пользовательский формат пакетной обработки.

Чтобы включить пакетную обработку запросов, просто добавьте маршрут с обработчиком пакетной обработки в конфигурацию веб-API:

[!code-csharp[Main](release-notes/samples/sample4.cs)]

Кроме того, можно управлять порядком или выполнением запросов или в любом порядке.

### <a name="portable-aspnet-web-api-client"></a>Портативный веб-API ASP.NET клиент

Теперь можно использовать клиент веб-API ASP.NET для создания переносимых библиотек классов, работающих в магазине Windows и приложениях Windows Phone 8. Можно также создавать переносимые модули форматирования, которые могут совместно использоваться клиентом и сервером.

### <a name="improved-testability"></a>Улучшенная пригодность для тестирования

Веб-API 2 значительно упрощает модульное тестирование контроллеров API. Просто создайте экземпляр контроллера API с сообщением запроса и конфигурацией, а затем вызовите метод действия, который вы хотите протестировать. Для методов действия, выполняющих создание ссылок, также легко создать макет класса **урлхелпер** .

### <a name="ihttpactionresult"></a>ихттпактионресулт

Теперь можно реализовать Ихттпактионресулт для инкапсуляции результатов своих методов действий веб-API. Ихттпактионресулт, возвращаемый методом действия веб-API, выполняется веб-API ASP.NETой средой выполнения для получения результирующего ответного сообщения. Ихттпактионресулт можно вернуть из любого действия веб-API, чтобы упростить модульное тестирование реализации веб-API. Для удобства предоставляется ряд реализаций Ихттпактионресулт, включая результаты возврата конкретных кодов состояния, форматированного содержимого или откликов, согласованных с содержимым.

### <a name="httprequestcontext"></a>HttpRequestContext

Новый **хттпрекуестконтекст** отслеживает любое состояние, привязанное к запросу, но не сразу же из запроса. Например, можно использовать **хттпрекуестконтекст** для получения данных маршрута, участника, связанного с запросом, сертификата клиента, **урлхелпер** и корня виртуального пути. Вы можете легко создать **хттпрекуестконтекст** для модульного тестирования.

Поскольку участник запроса помещается в запрос, а не полагается на **Thread. CurrentPrincipal**, участник теперь доступен в течение всего времени существования запроса, пока он находится в конвейере веб-API.

### <a name="cors"></a>CORS

Благодаря другому отличному вкладу Брок Аллен, ASP.NET теперь полностью поддерживает общий доступ к запросам между источниками (CORS).

Параметры безопасности веб-браузера предотвращают отправку запросов AJAX с веб-страницы к другому домену. [CORS](http://www.w3.org/TR/cors/) — это стандарт консорциума W3C, позволяющий серверу ослабить политику того же источника. С помощью CORS сервер может явным образом разрешить некоторые запросы независимо от источника, а другие — отклонить.

Веб-API 2 теперь поддерживает CORS, включая автоматическую обработку предпечатных запросов. Дополнительные сведения см. [в разделе Включение запросов между источниками в веб-API ASP.NET](../../../web-api/overview/security/enabling-cross-origin-requests-in-web-api.md).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в веб-API ASP.NET, который выполняется перед фильтрами авторизации в веб-API ASP.NET конвейере и позволяет указать логику проверки подлинности для каждого действия, каждого контроллера или глобально для всех контроллеров. Фильтры аутентификации обрабатывают учетные данные в запросе и предоставляют соответствующий субъект. Фильтры аутентификации также могут добавлять проблемы проверки подлинности в ответ на несанкционированные запросы.

### <a name="filter-overrides"></a>Переопределение фильтров

Теперь можно переопределить фильтры, применяемые к конкретному методу действия или контроллеру, указав фильтр переопределения. Фильтры переопределения указывают набор типов фильтров, которые не должны выполняться для данной области (действия или контроллера). Это позволяет добавлять глобальные фильтры, а затем исключать некоторые из определенных действий или контроллеров.

### <a name="owin-integration"></a>Интеграция OWIN

Веб-API ASP.NET теперь полностью поддерживает OWIN и может выполняться на любом узле, поддерживающем OWIN. Кроме того, в состав входит **HostAuthenticationFilter** , обеспечивающий интеграцию с системой проверки подлинности OWIN.

С помощью интеграции OWIN можно самостоятельно размещать веб-API в собственном процессе наряду с другим по промежуточного слоя OWIN, например SignalR. Дополнительные сведения см. [в разделе Использование OWIN для самостоятельного размещения веб-API ASP.NET](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="TOC13"></a>
## <a name="aspnet-signalr-20"></a>ASP.NET SignalR 2,0

В следующих разделах описываются функции SignalR 2,0.

- [На основе OWIN](#builtonowin)
- [Мафубс и Мапконнектион теперь Мапсигналр](#MapSignalR)
- [Поддержка между доменами](#crossdomain)
- [Поддержка iOS и Android через котушь и MonoDroid](#mobile)
- [Портативный клиент .NET](#portable)
- [Новый пакет с самостоятельным размещением](#selfhost)
- [Поддержка обратной совместимости сервера](#backwardcompat)
- [Удалена поддержка сервера для .NET 4,0](#remove40)
- [Отправка сообщения в список клиентов и групп](#messagelist)
- [Отправка сообщения определенному пользователю](#sendtouser)
- [Улучшенная поддержка обработки ошибок](#errorhandling)
- [Упрощенное модульное тестирование концентраторов](#unittesting)
- [Обработка ошибок JavaScript](#javascripterror)

Пример обновления существующего проекта 1. x до SignalR 2,0 см. в разделе [Обновление проекта SignalR 1. x](../../../signalr/overview/releases/upgrading-signalr-1x-projects-to-20.md).

<a id="builtonowin"></a>
### <a name="built-on-owin"></a>На основе OWIN

SignalR 2,0 полностью построен на [OWIN (открытый веб-интерфейс для .NET)](http://owin.org/). Это изменение делает процесс установки SignalR более согласованным в веб-размещенных и самостоятельных приложениях SignalR, но также требует некоторых изменений API.

<a id="MapSignalR"></a>

### <a name="maphubs-and-mapconnection-are-now-mapsignalr"></a>Мафубс и Мапконнектион теперь Мапсигналр

Для совместимости с стандартами OWIN эти методы были переименованы в `MapSignalR`. `MapSignalR`, вызванные без параметров, будут сопоставлять все концентраторы (как `MapHubs` в версии 1. x); чтобы отобразить отдельные объекты **персистентконнектион** , укажите тип соединения в качестве параметра типа и расширение URL-адреса для соединения в качестве первого аргумента.

Метод `MapSignalR` вызывается в классе запуска Owin. Visual Studio 2013 содержит новый шаблон для класса запуска Owin; чтобы использовать этот шаблон, выполните следующие действия.

1. Щелкните проект правой кнопкой мыши
2. Выберите **Добавить**, **новый элемент...**
3. Выберите **класс запуска Owin**. Назовите новый класс **Startup.CS**.

В **веб-приложении** класс запуска Owin, содержащий метод `MapSignalR`, затем добавляется в процесс запуска Owin с помощью записи в узле параметры приложения файла Web. config, как показано ниже.

В **собственном приложении**класс Startup передается как параметр типа метода `WebApp.Start`.

**Сопоставление концентраторов и соединений в SignalR 1. x (из глобального файла приложения в веб-приложении):** 

[!code-csharp[Main](release-notes/samples/sample5.cs)]

**Сопоставление концентраторов и соединений в SignalR 2,0 (из файла класса запуска Owin):** 

[!code-csharp[Main](release-notes/samples/sample6.cs)]

В **собственном приложении**класс Startup передается как параметр типа для метода `WebApp.Start`, как показано ниже.

[!code-csharp[Main](release-notes/samples/sample7.cs)]

<a id="crossdomain"></a>

### <a name="cross-domain-support"></a>Поддержка между доменами

В SignalR 1. x запросы между доменами управляются одним флагом Енаблекроссдомаин. Этот флаг управляет запросами JSONP и CORS. Для большей гибкости вся поддержка CORS была удалена из серверного компонента SignalR (клиенты JavaScript по-прежнему используют CORS обычным образом, если обнаружено, что браузер поддерживает его), а новое по промежуточного слоя OWIN доступно для поддержки этих сценариев.

В SignalR 2,0, если на клиенте требуется JSONP (для поддержки междоменных запросов в более старых браузерах), его необходимо включить явным образом, установив `EnableJSONP` для объекта `HubConfiguration` в значение `true`, как показано ниже. JSONP по умолчанию отключен, так как он менее безопасен, чем CORS.

Чтобы добавить новое по промежуточного слоя CORS в SignalR 2,0, добавьте в проект библиотеку `Microsoft.Owin.Cors` и вызовите `UseCors` перед по промежуточного слоя SignalR, как показано в разделе ниже.

**Добавление Microsoft. Owin. CORS в проект**. чтобы установить эту библиотеку, выполните в консоли диспетчера пакетов следующую команду:

[!code-powershell[Main](release-notes/samples/sample8.ps1)]

Эта команда добавит версию пакета 2.0.0 в проект.

**Вызов UseCors**

В следующих фрагментах кода показано, как реализовать междоменные соединения в SignalR 1. x и 2,0.

**Реализация запросов между доменами в SignalR 1. x (из глобального файла приложения)**

[!code-csharp[Main](release-notes/samples/sample9.cs)]

**Реализация запросов между доменами в SignalR 2,0 (из файла C# кода)**

В следующем коде показано, как включить CORS или JSONP в проекте SignalR 2,0. В этом примере кода используется `Map` и `RunSignalR` вместо `MapSignalR`, поэтому по промежуточного слоя CORS запускается только для запросов SignalR, требующих поддержки CORS (а не для всего трафика по пути, указанному в `MapSignalR`.) `Map` также можно использовать для любого другого по промежуточного слоя, которое должно выполняться для конкретного префикса URL-адреса, а не для всего приложения.

[!code-csharp[Main](release-notes/samples/sample10.cs)]

<a id="mobile"></a>

### <a name="ios-and-android-support-via-monotouch-and-monodroid"></a>Поддержка iOS и Android через котушь и MonoDroid

Добавлена поддержка для клиентов iOS и Android, использующих компоненты MonoDroid и с [библиотекой Xamarin](https://xamarin.com/). Дополнительные сведения об их использовании см. в разделе [Использование компонентов Xamarin](https://github.com/SignalR/SignalR/wiki/Building-Mono.Mobile.sln). Эти компоненты будут доступны в [магазине Xamarin](https://store.xamarin.com/) , когда будет доступен выпуск RTW SignalR.

<a id="portable"></a># # # Портативный клиент .NET

Для повышения эффективности разработки на разных платформах клиенты Silverlight, WinRT и Windows Phone были заменены на один портативный клиент .NET, поддерживающий следующие платформы:

- NET 4,5
- Silverlight 5
- WinRT (.NET для приложений Магазина Windows)
- Windows Phone 8

<a id="selfhost"></a>

### <a name="new-self-host-package"></a>Новый пакет с самостоятельным размещением

Теперь существует пакет NuGet, который упрощает начало работы с резидентными приложениями SignalR, размещенными в процессе или другом приложении, а не на веб-сервере. Чтобы обновить проект саморазмещения, созданный с помощью SignalR 1. x, удалите пакет Microsoft. AspNet. SignalR. Owin и добавьте пакет Microsoft. AspNet. SignalR. резидент. Дополнительные сведения о начале работы с пакетом с самостоятельным размещением см. в разделе [учебник. Саморазмещение SignalR](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="backwardcompat"></a>

### <a name="backward-compatible-server-support"></a>Поддержка обратной совместимости сервера

В предыдущих версиях SignalR версии пакета SignalR, используемого в клиенте и на сервере, должны быть идентичными. Для поддержки толстых клиентских приложений, которые трудно обновить, SignalR 2,0 теперь поддерживает использование более новой версии сервера с более старым клиентом. **Примечание. SignalR 2,0 не поддерживает серверы, созданные в более старых версиях с новыми клиентами.**

<a id="remove40"></a>

### <a name="removed-server-support-for-net-40"></a>Удалена поддержка сервера для .NET 4,0

SignalR 2,0 отбросил поддержку взаимодействия сервера с .NET 4,0. .NET 4,5 необходимо использовать с серверами SignalR 2,0. По-прежнему существует клиент .NET 4,0 для SignalR 2,0.

<a id="messagelist"></a>

### <a name="sending-a-message-to-a-list-of-clients-and-groups"></a>Отправка сообщения в список клиентов и групп

В SignalR 2,0 можно отправить сообщение, используя список идентификаторов клиентов и групп. В следующих фрагментах кода показано, как это сделать.

**Отправка сообщения в список клиентов и групп с помощью Персистентконнектион**

[!code-csharp[Main](release-notes/samples/sample11.cs)]

**Отправка сообщения в список клиентов и групп с помощью концентраторов**

[!code-csharp[Main](release-notes/samples/sample12.cs)]

<a id="sendtouser"></a>

### <a name="sending-a-message-to-a-specific-user"></a>Отправка сообщения определенному пользователю

Эта функция позволяет пользователям указать, какой идентификатор userId основан на IRequest с помощью нового интерфейса Иусеридпровидер:

**Интерфейс Иусеридпровидер**

[!code-csharp[Main](release-notes/samples/sample13.cs)]

По умолчанию будет реализована реализация, использующая в качестве имени пользователя IPrincipal.Identity.Name пользователя.

В центре вы сможете отправить сообщения этим пользователям через новый API:

**Использование API Clients. User**

[!code-csharp[Main](release-notes/samples/sample14.cs)]

<a id="errorhandling"></a>

### <a name="better-error-handling-support"></a>Улучшенная поддержка обработки ошибок

Теперь пользователи могут создавать **хубексцептион** из любого вызова концентратора. Конструктор **хубексцептион** может принимать строковые сообщения и объекты с дополнительными данными об ошибках. SignalR выполнит автоматическую сериализацию исключения и отправит его клиенту, где он будет использоваться для отклонения или отказа в вызове метода концентратора.

Параметр **Показывать подробные исключения концентратора** не влияет на **хубексцептион** , отправляемый обратно клиенту. Он всегда отправляется.

**Код на стороне сервера, демонстрирующий отправку Хубексцептион клиенту**

[!code-csharp[Main](release-notes/samples/sample15.cs)]

**Клиентский код JavaScript, демонстрирующий реагирование на Хубексцептион, отправленный с сервера**

[!code-html[Main](release-notes/samples/sample16.html)]

**Клиентский код .NET, демонстрирующий реагирование на Хубексцептион, отправленный с сервера**

[!code-csharp[Main](release-notes/samples/sample17.cs)]

<a id="unittesting"></a>

### <a name="easier-unit-testing-of-hubs"></a>Упрощенное модульное тестирование концентраторов

SignalR 2,0 включает интерфейс с именем `IHubCallerConnectionContext` в концентраторах, который упрощает создание фиктивных вызовов на стороне клиента. В следующих фрагментах кода демонстрируется использование этого интерфейса с популярными тестовыми тестами [xUnit.NET](https://github.com/xunit/xunit) и [MOQ](https://code.google.com/p/moq/).

**Модульное тестирование SignalR с xUnit.net**

[!code-csharp[Main](release-notes/samples/sample18.cs)]

**Модульное тестирование SignalR с MOQ**

[!code-csharp[Main](release-notes/samples/sample19.cs)]

<a id="javascripterror"></a>

### <a name="javascript-error-handling"></a>Обработка ошибок JavaScript

В SignalR 2,0 все обратные вызовы при обработке ошибок JavaScript возвращают объекты ошибок JavaScript вместо необработанных строк. Это позволяет SignalR передавать более подробные сведения обработчикам ошибок. Внутреннее исключение можно получить из свойства `source` ошибки.

**Клиентский код JavaScript, который обрабатывает исключение запуска. Fail**

[!code-javascript[Main](release-notes/samples/sample20.js)]

<a id="TOC8"></a>
## <a name="aspnet-identity"></a>ASP.NET Identity

### <a name="new-aspnet-membership-system"></a>Новая система членства ASP.NET

ASP.NET Identity — это новая система членства для приложений ASP.NET. ASP.NET Identity позволяет легко интегрировать данные пользовательского профиля с данными приложений. ASP.NET Identity также позволяет выбрать модель сохраняемости для профилей пользователей в приложении. Данные можно хранить в базе данных SQL Server или в другом хранилище данных, включая хранилища данных NoSQL, такие как таблицы службы хранилища Azure. Дополнительные сведения см. в разделе [учетные записи отдельных пользователей](creating-web-projects-in-visual-studio.md#indauth) при **создании веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="claims-based-authentication"></a>Проверка подлинности на основе утверждений

ASP.NET теперь поддерживает проверку подлинности на основе утверждений, где удостоверение пользователя представляется в виде набора утверждений от доверенного издателя. Пользователи могут пройти проверку подлинности с помощью имени пользователя и пароля, хранящихся в базе данных приложения, или с помощью поставщиков удостоверений социальных сетей (например, учетных записей Майкрософт, Facebook, Google, Twitter) или с помощью учетных записей организации с помощью Azure Active Directory или Службы федерации Active Directory (AD FS) (ADFS).

### <a name="integration-with-azure-active-directory-and-windows-server-active-directory"></a>Интеграция с Azure Active Directory и Windows Server Active Directory

Теперь можно создавать проекты ASP.NET, использующие Azure Active Directory или Windows Server Active Directory (AD) для проверки подлинности. Дополнительные сведения см. в статье [учетные записи организации](creating-web-projects-in-visual-studio.md#orgauth) в разделе **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="owin-integration"></a>Интеграция OWIN

Проверка подлинности ASP.NET теперь основана на промежуточном по OWIN, который можно использовать на любом узле, использующем OWIN. Дополнительные сведения о OWIN см. в следующем разделе о [компонентах Microsoft OWIN](#TOC7) .

<a id="TOC7"></a>
## <a name="microsoft-owin-components"></a>Компоненты Microsoft OWIN

[Открытый веб-интерфейс для .NET](http://owin.org/) (OWIN) определяет абстракцию между веб-серверами и веб-приложениями .NET. OWIN отделяет веб-приложение от сервера, делая веб-приложения независимыми от узла. Например, можно разместить веб-приложение на основе OWIN в IIS или самостоятельное размещение в пользовательском процессе.

Изменения, появившиеся в компонентах Microsoft OWIN (также известные как проект Katana), включают новые компоненты сервера и узла, новые вспомогательные библиотеки и по промежуточного слоя, а также новое по промежуточного слоя для проверки подлинности.

Дополнительные сведения о OWIN и Katana см. [в статье новые возможности в OWIN и Katana](../../../aspnet/overview/owin-and-katana/index.md).

**Примечание. приложения [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) не могут выполняться в КЛАССИЧЕСКОМ режиме IIS. они должны выполняться в интегрированном режиме.**

**Примечание. приложения [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) должны выполняться с полным доверием.**

### <a name="new-servers-and-hosts"></a>Новые серверы и узлы

В этом выпуске добавлены новые компоненты, позволяющие выполнять сценарии с самостоятельным размещением. К этим компонентам относятся следующие пакеты NuGet:

- **Microsoft. Owin. host. HttpListener**. Предоставляет сервер OWIN, использующий **HttpListener** для ПРОСЛУШИВАНИЯ HTTP-запросов и направления их в конвейер OWIN.
- **Microsoft. Owin. Hosting** предоставляет библиотеку для разработчиков, желающих самостоятельно размещать конвейер Owin в пользовательском процессе, например в консольном приложении или службе Windows.
- **Овинхост**. Предоставляет автономный исполняемый файл, который служит оболочкой для `Microsoft.Owin.Hosting` и позволяет самостоятельно размещать конвейер OWIN без необходимости писать Пользовательское ведущее приложение.

Кроме того, пакет `Microsoft.Owin.Host.SystemWeb` теперь позволяет по промежуточного слоя предоставлять указания на сервер **SystemWeb** , указывая, что по промежуточного слоя должно вызываться на определенном этапе конвейера ASP.NET. Эта функция особенно полезна для по промежуточного слоя проверки подлинности, которая должна выполняться на раннем этапе конвейера ASP.NET.

### <a name="helper-libraries-and-middleware"></a>Вспомогательные библиотеки и по промежуточного слоя

Несмотря на то, что вы можете писать компоненты OWIN, используя только определения функций и типов из спецификации OWIN, новый пакет `Microsoft.Owin` предоставляет более понятный набор абстракций. Этот пакет объединяет несколько более ранних пакетов (например, `Owin.Extensions`, `Owin.Types`) в единую, хорошо структурированную объектную модель, которую можно легко использовать в других компонентах OWIN. На самом деле, большинство компонентов Microsoft OWIN теперь используют этот пакет.

> [!NOTE]
> Приложения [OWIN](http://www.owin.org) не могут выполняться в КЛАССИЧЕСКОМ режиме IIS. они должны выполняться в интегрированном режиме.

> [!NOTE]
> Приложения [OWIN](http://www.owin.org) должны выполняться с полным доверием.

Этот выпуск также включает пакет Microsoft. Owin. Diagnostics, который включает по промежуточного слоя для проверки работающего приложения OWIN, а также промежуточное по страницы ошибок для изучения сбоев.

### <a name="authentication-components"></a>Компоненты проверки подлинности

Доступны следующие компоненты проверки подлинности.

- **Microsoft. Owin. Security. ActiveDirectory**. Включает проверку подлинности с помощью локальных или облачных служб каталогов.
- **Microsoft. Owin. Security. cookies** обеспечивает проверку подлинности с помощью файлов cookie. Этот пакет ранее назывался `Microsoft.Owin.Security.Forms`.
- **Microsoft. Owin. Security. Facebook** обеспечивает проверку подлинности с помощью службы на основе OAuth Facebook.
- **Microsoft. Owin. Security. Google** обеспечивает проверку подлинности с помощью службы на основе Google OpenID Connect.
- **Microsoft. Owin. Security. JWT** обеспечивает проверку подлинности с помощью маркеров JWT.
- **Microsoft. Owin. Security. MicrosoftAccount** включает проверку подлинности с помощью учетных записей Майкрософт.
- **Microsoft. Owin. Security. OAuth**. Предоставляет сервер авторизации OAuth, а также по промежуточного слоя для проверки подлинности токенов носителя.
- **Microsoft. Owin. Security. Twitter** обеспечивает проверку подлинности с помощью службы на основе OAuth в Twitter.

Этот выпуск также включает пакет `Microsoft.Owin.Cors`, который содержит по промежуточного слоя для обработки HTTP-запросов между источниками.

> [!NOTE]
> Поддержка подписывания JWT была удалена в окончательной версии Visual Studio 2013.

<a id="ef6"></a>
## <a name="entity-framework-6"></a>Entity Framework 6

Список новых функций и другие изменения в Entity Framework 6 см. в статье [Журнал версий Entity Framework](https://msdn.com/data/jj574253).

<a id="TOC14"></a>
## <a name="aspnet-razor-3"></a>ASP.NET Razor 3

ASP.NET Razor 3 включает следующие новые функции:

- Поддержка редактирования вкладок. Ранее команда **Формат документа** , автоматическое выделение отступов и автоформатирование в Visual Studio не работали должным образом при использовании параметра « **Сохранение вкладок** ». Это изменение исправляет форматирование Visual Studio для кода Razor для форматирования вкладок.
- Поддержка правил переопределения URL-адресов при создании ссылок.
- Удаление прозрачного атрибута безопасности.
  > [!NOTE]
  > Это критическое изменение и делает Razor 3 несовместимым с MVC4 и более ранними версиями, в то время как Razor 2 несовместим с MVC5 или сборками, скомпилированными для MVC5.

Проблемы Razor 3, исправленные в Visual Studio 2013 из предварительных версий, можно найти [здесь](https://aspnetwebstack.codeplex.com/workitem/list/advanced?keyword=&status=Resolved%7cClosed&type=All&priority=All&release=All%7cv5.0%2bPreview%7cv5.0%2bRC%7cv5.0%2bRTM&assignedTo=All&component=Web%2bPages%252fRazor&reasonClosed=Fixed&sortField=LastUpdatedDate&sortDirection=Descending&page=0).

<a id="TOC15"></a>
## <a name="aspnet-app-suspend"></a>Приостановка приложения ASP.NET

Приостановка приложения ASP.NET — это функция изменения игр в .NET Framework 4.5.1, которая радикально изменяет взаимодействие с пользователем и экономическая модель для размещения большого количества сайтов ASP.NET на одном компьютере. Дополнительные сведения см. в разделе [ASP.NET App Suspend — реагирование на общедоступное веб-размещение .NET](https://blogs.msdn.com/b/dotnet/archive/2013/10/09/asp-net-app-suspend-responsive-shared-net-web-hosting.aspx).

<a id="knownissues"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

В этом разделе описаны известные проблемы и критические изменения в ASP.NET and Web Tools для Visual Studio 2013.

### <a name="nuget"></a>NuGet

- [Восстановление нового пакета не работает на Mono при использовании файла SLN](https://nuget.codeplex.com/workitem/3596) — будет исправлено в предстоящем пакете NuGet. exe download и [пакет NuGet. commandline](http://www.nuget.org/packages/NuGet.CommandLine/) .
- [Восстановление нового пакета не работает с проектами WiX](https://nuget.codeplex.com/workitem/3598) — будет исправлено в предстоящем пакете NuGet. exe download и [пакет NuGet. commandline](http://www.nuget.org/packages/NuGet.CommandLine/) .
- [Автоматическое восстановление пакетов не работает для проектов в папке решения](https://nuget.codeplex.com/workitem/3625) — будет исправлено в NuGet 2,8.

### <a name="aspnet-web-api"></a>Веб-API ASP.NET

1. `ODataQueryOptions<T>.ApplyTo(IQueryable)` не возвращает `IQueryable<T>` всегда, так как добавлена поддержка `$select` и `$expand`.

    В предыдущих примерах для `ODataQueryOptions<T>` всегда приводится возвращаемое значение из `ApplyTo` к `IQueryable<T>`. Это работало раньше, поскольку параметры запроса, которые мы поддерживали ранее (`$filter`, `$orderby`, `$skip`, `$top`), не изменяют форму запроса. Теперь, когда мы поддерживаем `$select` и `$expand` возвращаемое значение из `ApplyTo` не будет `IQueryable<T>` всегда.

    [!code-csharp[Main](release-notes/samples/sample21.cs)]

    Если вы используете пример кода из предыдущих версий, он продолжит работать, если клиент не отправляет `$select` и `$expand`. Однако, если требуется поддержка `$select` и `$expand` необходимо изменить этот код на.

    [!code-csharp[Main](release-notes/samples/sample22.cs)]
2. **Request. URL или RequestContext. URL имеет значение null во время пакетного запроса**

    В сценарии пакетной обработки **урлхелпер** имеет значение null при доступе из **request. URL** или **RequestContext. URL**.

    Эта проблема в настоящее время находится здесь: [батчрекуестконтекст. URL имеет значение NULL для пакетного запроса](http://aspnetwebstack.codeplex.com/workitem/1301).

    Чтобы решить эту проблему, создайте новый экземпляр **урлхелпер**, как показано в следующем примере:

    **Создание нового экземпляра Урлхелпер**

    [!code-csharp[Main](release-notes/samples/sample23.cs)]

### <a name="aspnet-mvc"></a>ASP.NET MVC 3

1. При использовании MVC5 и Оргаус при наличии представлений, которые выполняют Антифоржертокен проверку, может возникнуть следующая ошибка при записи данных в представление:

    **Ошибка**.

    *Ошибка сервера в приложении "/".*

    <em>Утверждение типа "<http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier>" или "<https://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider>" отсутствует в указанном ClaimsIdentity. Чтобы включить поддержку маркеров защиты от подделки с проверкой подлинности на основе утверждений, убедитесь, что настроенный поставщик утверждений предоставляет оба этих утверждения в создаваемых экземплярах ClaimsIdentity. Если в настроенном поставщике утверждений используется другой тип утверждения в качестве уникального идентификатора, его можно настроить, задав статическое свойство Антифоржериконфиг. Уникуеклаимтипеидентифиер.</em>

    **Возможное решение**:

    Добавьте следующую строку в Global. asax, чтобы исправить ее:

    `AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.Name;`

    Это будет исправлено для следующего выпуска.
2. После обновления приложения MVC4 до MVC5 Создайте решение и запустите его. Вы увидите следующую ошибку:

    Конкретного System. Web. Web Pages. Razor. Configuration. Хостсектион не может быть приведен к [B] System. Web. веб-страницам. Razor. Configuration. Хостсектион. Тип, исходящий из "System. Web. веб-страниц. Razor, Version = 2.0.0.0, культура = Neutral, PublicKeyToken = 31bf3856ad364e35" в контексте "default" в расположении "К:\виндовс\микрософт.нет\ассембли\гак\_MSIL\System.Web.WebPages.Razor\v4.0\_2.0.0.0\_\_31bf3856ad364e35 \ System. Web. веб-Pages. Razor. dll". Тип B исходит из "System. Web. веб-страниц. Razor, Version = 3.0.0.0, культура = Neutral, PublicKeyToken = 31bf3856ad364e35" в контексте "default" в расположении "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6d05bbd0\e8b5908e\assembly\dl3\c9cbca63\f8910382\_6273ce01 \ System. Web. веб-Pages. Razor. dll".

    Чтобы устранить указанную выше ошибку, откройте *все* файлы Web. config (включая папки в папке Views) в проекте и выполните следующие действия.

   1. Обновление всех вхождений версии "4.0.0.0" из "System. Web. MVC" на "5.0.0.0".
   2. Обновление всех вхождений версии "2.0.0.0" для "System. Web. Вспомогательныеs", &quot;системных. Web. веб-страниц&quot; и &quot;System. Web. веб-страниц. Razor&quot; в "3.0.0.0"

      Например, после внесения приведенных выше изменений привязки сборок должны выглядеть следующим образом:

      [!code-xml[Main](release-notes/samples/sample24.xml)]

      Сведения об обновлении проектов MVC 4 до MVC 5 см. в статье [Обновление проекта ASP.NET MVC 4 и веб-API до ASP.NET MVC 5 и Web API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).
3. При использовании проверки на стороне клиента с некорректной проверкой jQuery сообщение о проверке иногда неверно для элемента ввода HTML с типом = "Number". Ошибка проверки для обязательного значения (поле Age является обязательной) отображается, если вместо правильного сообщения указано допустимое число, а не правильное сообщение.

    Эта проблема часто обнаруживается с шаблонным кодом для модели с целочисленным свойством в представлениях создания и редактирования.

    Чтобы обойти эту ошибку, измените вспомогательное приложение редактора:

    `@Html.EditorFor(person => person.Age)`

    на:

    `@Html.TextBoxFor(person => person.Age)`
4. ASP.NET MVC 5 больше не поддерживает частичное доверие. Проекты, связываемые с двоичными файлами MVC или WebAPI, должны удалить атрибут [SecurityTransparent](https://msdn.microsoft.com/library/system.security.securitytransparentattribute.aspx) и атрибут [AllowPartiallyTrustedCallers](https://msdn.microsoft.com/library/system.security.allowpartiallytrustedcallersattribute.aspx) . Удаление этих атрибутов приведет к исключению ошибок компилятора, как показано ниже.

    `Attempt by security transparent method ‘MyComponent' to access security critical type 'System.Web.Mvc.MvcHtmlString' failed. Assembly 'PagedList.Mvc, Version=4.3.0.0, Culture=neutral, PublicKeyToken=abbb863e9397c5e1' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model. Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception.`

    > Обратите внимание, что в качестве побочного результата нельзя использовать сборки 4,0 и 5,0 в одном приложении. Необходимо обновить все их до 5,0.

### <a name="spa-template-with-facebook-authorization-may-cause-instability-in-ie-while-the-web-site-is-hosted-in-intranet-zone"></a>Шаблон SPA с авторизацией Facebook может привести к нестабильной работе в IE, когда веб-узел размещается в зоне интрасети.

Шаблон SPA предоставляет внешний вход с помощью Facebook. Если проект, созданный с помощью шаблона, выполняется локально, то вход может привести к сбою IE.

Решение.

1. Размещение веб-сайта в зоне Интернета; ни

2. Протестируйте сценарий в браузере, отличном от IE.

### <a name="web-forms-scaffolding"></a>Формирование шаблонов веб-форм

Формирование шаблонов веб-форм было удалено из VS2013 и будет доступно в будущем обновлении Visual Studio. Тем не менее вы по-прежнему можете использовать формирование шаблонов в проекте веб-форм, добавив зависимости MVC и создав формирование шаблонов для MVC. Проект будет содержать сочетание веб-форм и MVC.

Чтобы добавить MVC в проект веб-форм, добавьте новый шаблонный элемент и выберите **зависимости MVC 5**. Выберите минимальное или полное значение в зависимости от того, требуются ли вам все файлы содержимого, например скрипты. Затем добавьте шаблонный элемент для MVC, который будет создавать представления и контроллер в проекте.

### <a name="mvc-and-web-api-scaffolding---http-404-not-found-error"></a>Формирование шаблонов MVC и веб-API — HTTP 404, ошибка "не найдено"

Если при добавлении шаблона элемента в проект возникает ошибка, возможно, проект будет оставаться в нестабильном состоянии. Откат некоторых изменений, внесенных в формирование шаблонов, будет выполнен, однако откат других изменений, таких как установленные пакеты NuGet, не будет отменен. При откате изменений конфигурации маршрутизации пользователи получат ошибку HTTP 404 при переходе к шаблонным элементам.

Обходное решение.

- Чтобы устранить эту ошибку для MVC, добавьте новый шаблонный элемент и выберите зависимости MVC 5 (минимальное или полное). Этот процесс добавит все необходимые изменения в проект.
- Чтобы устранить эту ошибку для веб-API, выполните следующие действия.

  1. Добавьте класс WebApiConfig в проект.

      [!code-csharp[Main](release-notes/samples/sample25.cs)]

      [!code-vb[Main](release-notes/samples/sample26.vb)]
  2. Настройте WebApiConfig. Register в методе запуска приложения\_в Global. asax следующим образом:

      [!code-csharp[Main](release-notes/samples/sample27.cs)]

      [!code-vb[Main](release-notes/samples/sample28.vb)]
