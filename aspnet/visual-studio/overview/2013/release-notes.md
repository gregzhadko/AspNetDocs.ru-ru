---
uid: visual-studio/overview/2013/release-notes
title: ASP.NET and Web Tools для заметки о выпуске Visual Studio 2013 | Документация Майкрософт
author: microsoft
description: В этом документе описывается в выпуске ASP.NET and Web Tools для Visual Studio 2013.
ms.author: riande
ms.date: 10/17/2013
ms.assetid: 08815768-2702-42ae-ae85-0a59934a11d1
msc.legacyurl: /visual-studio/overview/2013/release-notes
msc.type: authoredcontent
ms.openlocfilehash: 8234bd1b7eb74d9b03e507f00d9ad937314288be
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59411284"
---
# <a name="aspnet-and-web-tools-for-visual-studio-2013-release-notes"></a>Заметки о выпуске ASP.NET and Web Tools для Visual Studio 2013

по [Microsoft](https://github.com/microsoft)

> В этом документе описывается в выпуске ASP.NET and Web Tools для Visual Studio 2013.


## <a name="contents"></a>Описание

- [Замечания по установке](#TOC1)
- [Документация](#TOC2)
- [Требования к программному обеспечению](#TOC4)

### <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET and Web Tools для Visual Studio 2013

- [One ASP.NET](#TOC6)
- [Новый проект с веб-интерфейсом](#newproj)
- [Формирование шаблонов ASP.NET](#scaffold)
- [Привязывание к браузеру](#browser-link)
- [Усовершенствования редактора Visual Studio Web](#web-editor)
- [Поддержка веб-приложений службы приложений Azure, в Visual Studio](#waws)
- [Веб-публикация усовершенствования](#publish)
- [NuGet 2.7](#nuget)
- [Веб-форм ASP.NET](#TOC9)
- [ASP.NET MVC 5](#TOC10)
- [ASP.NET Web API 2](#TOC11)
- [ASP.NET SignalR](#TOC13)
- [ASP.NET Identity](#TOC8)
- [Компоненты Microsoft OWIN](#TOC7)
- [Entity Framework 6](#ef6)
- [ASP.NET Razor 3](#TOC14)
- [Приостановка приложения ASP.NET](#TOC15)
- [Известные проблемы и критические изменения](#knownissues)

<a id="TOC1"></a>
## <a name="installation-notes"></a>Замечания по установке

ASP.NET and Web Tools для Visual Studio 2013 объединяются в основной установки и могут быть загружены [здесь](https://www.asp.net/downloads).

<a id="TOC2"></a>
## <a name="documentation"></a>Документация

Учебники и другие сведения о ASP.NET and Web Tools для Visual Studio 2013 доступны из [веб-сайт ASP.NET](https://www.asp.net/).

<a id="TOC4"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

ASP.NET and Web Tools требуется Visual Studio 2013.

<a id="TOC5"></a>
## <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET and Web Tools для Visual Studio 2013

Ниже описаны возможности, представленные в выпуске.

<a id="TOC6"></a>
## <a name="one-aspnet"></a>One ASP.NET

С выпуском Visual Studio 2013 мы предприняли шагом вперед в унификации взаимодействия с помощью технологии ASP.NET, так что можно легко смешивать и сопоставлять те, которые вы хотите. Например можно запустить проект с помощью MVC и легко позже добавить в проект веб-страницах или сформировать шаблон веб-API в проекте веб-форм. One ASP.NET не заменит живого это упрощает для вас как разработчика для выполнения задач, которая вам нравится в ASP.NET. Независимо от того, Выбор технологии может быть уверены, что вы создаете на доверенных базовую платформу One ASP.NET.

<a id="newproj"></a>
## <a name="new-web-project-experience"></a>Новый проект с веб-интерфейсом

Мы усовершенствовали возможности создания новых веб-проектов в Visual Studio 2013. В **новый веб-проект ASP.NET** диалоговое окно, можно выбрать тип проекта, настроить любое сочетание технологий (веб-формы, MVC, веб-API), настройки параметров проверки подлинности и добавить проект модульного теста.

![Новый проект ASP.NET](release-notes/_static/image1.png)

Новое диалоговое окно позволяет изменить параметры проверки подлинности по умолчанию для многих из шаблонов. Например при создании проекта веб-форм ASP.NET можно выбрать любой из следующих параметров:

- Без проверки подлинности
- Учетные записи отдельных пользователей (членства ASP.NET или журнал поставщиков социальных сетей в)
- Учетные записи организации (Active Directory в веб-приложение)
- Проверка подлинности Windows (Active Directory в приложении интрасети)

![Параметры проверки подлинности](release-notes/_static/image2.png)

Дополнительные сведения о новых процесс создания веб-проектов, см. в разделе [Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md). Дополнительные сведения о новых способах проверки подлинности см. в разделе [ASP.NET Identity](#TOC8) далее в этом документе.

<a id="scaffold"></a>
## <a name="aspnet-scaffolding"></a>Формирование шаблонов ASP.NET

Формирование шаблонов ASP.NET — это платформа создания кода для веб-приложений ASP.NET. Он позволяет легко добавлять стандартный код в проект, который взаимодействует с моделью данных.

В предыдущих версиях Visual Studio формирование шаблонов был ограничен проекты ASP.NET MVC. С помощью Visual Studio 2013 теперь можно использовать формирование шаблонов для любого проекта ASP.NET, включая веб-форм. Visual Studio 2013 не поддерживает создание страниц для проекта веб-форм, но по-прежнему можно использовать формирование шаблонов веб-формы, Добавление зависимостей MVC в проект. Поддержка создания страниц для веб-формы будет добавлена в будущем обновлении.

При использовании формирования шаблонов, мы убедитесь, что все необходимые зависимости устанавливаются в проекте. Например если для создания проекта веб-форм ASP.NET, а затем использовать формирование шаблонов, чтобы добавить контроллер веб-API, необходимые пакеты NuGet и ссылки добавляются в проект автоматически.

Чтобы добавить формирование шаблонов MVC в проект веб-форм, добавьте **создать шаблонный элемент** и выберите **зависимостей MVC 5** в диалоговом окне. Существует два варианта для формирования шаблонов MVC; Минимальный и полной. Если выбрать минимальным, только пакеты NuGet и ссылки для ASP.NET MVC добавляются в проект. При выборе параметра «полная» добавляются минимальные зависимости, а также содержимого файлов, необходимых для проекта MVC.

Поддержка формирования шаблонов контроллеров async использует новые возможности async из Entity Framework 6.

Дополнительные сведения и учебники см. в разделе [Обзор формирование шаблонов ASP.NET](aspnet-scaffolding-overview.md).

<a id="browser-link"></a>
## <a name="browser-link--signalr-channel-between-browser-and-visual-studio"></a>Связь с браузером – SignalR канала между браузером и Visual Studio

Новый [связь с браузером](using-browser-link.md) функция позволяет подключиться к Visual Studio несколько браузеров и обновлять их все нажатием кнопки на панели инструментов. Можно подключиться несколько браузеров на сайт разработки, включая мобильных эмуляторов и щелкните "Обновить" для обновления все браузеры все одновременно. Связь с браузером также предоставляет API позволяет разработчикам писать расширения связь с браузером.

![](release-notes/_static/image3.png)

Позволяя разработчикам воспользоваться преимуществами API связи с браузером, появляется возможность создавать очень сложные сценарии, которые пересекает границы между Visual Studio и в любом браузере, который подключен. Web Essentials использует API для создания интегрированного интерфейса между Visual Studio и средств разработчика браузера, удаленного управления мобильных эмуляторов и многое другое.

<a id="web-editor"></a>
## <a name="visual-studio-web-editor-enhancements"></a>Усовершенствования редактора Visual Studio Web

Visual Studio 2013 включает в себя новый редактор HTML для Razor файлов и файлов HTML в веб-приложениях. Новый редактор HTML предоставляет единую унифицированную схему на базе HTML5. Автозавершение скобок, пользовательский Интерфейс jQuery и AngularJS атрибут IntelliSense, атрибут группирования IntelliSense, идентификатор и имя класса Intellisense и другие улучшения, включая производительность, форматирование и смарт-тегов.

Снимке экрана ниже показано использование атрибута начальной загрузки IntelliSense в редакторе HTML.

![IntelliSense в редакторе HTML](release-notes/_static/image4.png)

Visual Studio 2013 также поставляется с обоих CoffeeScript и МЕНЕЕ встроенные редакторы. Редактор LESS поставляется со всеми функциями "холодного" в редакторе CSS и есть определенные Intellisense для переменных и примеси по меньше документов @import цепочки.

<a id="waws"></a>
## <a name="azure-app-service-web-apps-support-in-visual-studio"></a>Поддержка веб-приложений службы приложений Azure, в Visual Studio

В Visual Studio 2013 с пакетом Azure SDK для .NET 2.2, можно использовать **обозревателя серверов** взаимодействовать непосредственно с удаленного веб-приложений. Вы можете войти в свою учетную запись Azure, создайте новый веб-приложений, настройка приложений, просматривать журналы в режиме реального времени и многое другое. Ожидается вскоре после SDK 2.2 будет отпущена, вы сможете запустить в режиме отладки в Azure удаленно. Большинство новых функций для веб-приложениях службы приложений Azure также работают в Visual Studio 2012 при установке текущего выпуска пакета Azure SDK для .NET.

Дополнительные сведения см. в следующих ресурсах:

- [Создание веб-приложение ASP.NET в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-get-started/)
- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/)

<a id="publish"></a>
## <a name="web-publish-enhancements"></a>Веб-публикация усовершенствования

Visual Studio 2013 содержит новые и усовершенствованные функции веб-публикации. Ниже приведены некоторые из них.

- Легко [автоматизировать шифрование файлов Web.config](https://go.microsoft.com/fwlink/?LinkId=325529). (Эта ссылка и следующие два указывают на документацию в библиотеке MSDN, могут быть недоступны, пока в конце дня на 10 и c ++ 17).
- Легко [автоматизировать перевод автономный режим во время развертывания приложения](https://go.microsoft.com/fwlink/?LinkId=325530).
- Настройка веб-развертывание для [использовать контрольной суммы файла вместо Дата последнего изменения](https://go.microsoft.com/fwlink/?LinkId=325531) для определения, какие файлы должны копироваться на сервер.
- Быстро публиковать отдельные выбранные файлы (включая Web.config), при использовании FTP или методов публикации файловой системы, а также веб-развертывания.

Дополнительные сведения о веб-развертывание ASP.NET, см. в разделе [веб-сайте ASP.NET](https://go.microsoft.com/fwlink/?LinkId=322027).

<a id="nuget"></a>
## <a name="nuget-27"></a>NuGet 2.7

NuGet 2.7 включает широкий набор новых функций, которые описаны подробно [заметки о выпуске NuGet 2.7](http://docs.nuget.org/docs/release-notes/nuget-2.7).

Эта версия NuGet также устраняет необходимость предоставить явное согласие для функции восстановления пакета NuGet для скачивания пакетов. Установка NuGet теперь предоставляется согласия (и соответствующие флажки в диалоговом окне параметров NuGet). Теперь восстановление пакетов просто работает по умолчанию.

<a id="TOC9"></a>
## <a name="aspnet-web-forms"></a>Веб-формы ASP.NET

### <a name="one-aspnet"></a>One ASP.NET

Шаблоны проектов веб-форм тесно интегрированы с новым интерфейсом One ASP.NET. Можно добавить для проекта веб-форм поддержку MVC и веб-API, и можно настроить проверку подлинности с помощью мастера создания проекта One ASP.NET. Дополнительные сведения см. в разделе [Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов веб-формы поддерживают новую платформу ASP.NET Identity. Кроме того эти шаблоны теперь поддерживают создание проектов веб-форм интрасети. Дополнительные сведения см. в разделе [методы проверки подлинности](creating-web-projects-in-visual-studio.md#auth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="bootstrap"></a>Начальная загрузка

В шаблонах веб-форм используется [Bootstrap](http://twitter.github.io/bootstrap/) для предоставления изящный и отвечает на запросы внешнего вида и поведения, вы можете легко настроить. Дополнительные сведения см. в разделе [начальной загрузки в шаблоны веб-проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

<a id="TOC10"></a>
## <a name="aspnet-mvc-5"></a>ASP.NET MVC 5

### <a name="one-aspnet"></a>One ASP.NET

Шаблоны проектов Web MVC тесно интегрированы с новым интерфейсом One ASP.NET. Можно настроить проект MVC и настроить проверку подлинности с помощью мастера создания проекта One ASP.NET. Вводное руководство в ASP.NET MVC 5 можно найти в [Приступая к работе с ASP.NET MVC 5](../../../mvc/overview/getting-started/introduction/getting-started.md).

Сведения об обновлении проектов MVC 4 до MVC 5 см. в разделе [обновление ASP.NET MVC 4 и проекта веб-API до ASP.NET MVC 5 и веб-API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов MVC были обновлены для использования ASP.NET Identity для проверки подлинности и управления удостоверениями. Учебник, проверки подлинности Facebook и Google и новый API членства можно найти в [Создание приложения ASP.NET MVC 5 с использованием Facebook и Google OAuth2 и OpenID единого входа](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md) и [Создание приложения ASP.NET MVC с проверкой подлинности и База данных SQL и развертывание в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/).

### <a name="bootstrap"></a>Начальная загрузка

Шаблон проекта MVC была обновлена для использования [Bootstrap](http://getbootstrap.com/) для предоставления изящный и отвечает на запросы внешнего вида и поведения, вы можете легко настроить. Дополнительные сведения см. в разделе [начальной загрузки в шаблоны веб-проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в ASP.NET MVC, запустите перед фильтры авторизации в конвейере ASP.NET MVC и позволяют пользователю указать проверки подлинности логики по действиям, конкретного контроллера, или глобально для всех контроллеров. Фильтры проверки подлинности обрабатывают учетные данные в запросе и укажите соответствующий субъект. В ответ на неавторизованные запросы, фильтры проверки подлинности можно также добавить проблемы проверки подлинности.

### <a name="filter-overrides"></a>Переопределения фильтра

Теперь можно переопределять, какие фильтры относятся к методу конкретного действия или контроллер, указав фильтром переопределения. Переопределение фильтры задать фильтр типов, которые не должны выполняться для данной области (действий или контроллера). Это позволяет настроить фильтры, которые применяются глобально, но затем исключить определенные глобальные фильтры от применения определенных действий или контроллеров.

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

ASP.NET MVC теперь поддерживает маршрутизации с помощью атрибутов благодаря вклад, Тим McCall, автор [ http://attributerouting.net ](http://attributerouting.net). С помощью маршрутизации с помощью атрибутов можно указать свои маршруты добавив аннотации для действия и контроллеры.

<a id="TOC11"></a>
## <a name="aspnet-web-api-2"></a>ASP.NET Web API 2

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

Веб-API ASP.NET теперь поддерживает маршрутизации с помощью атрибутов благодаря вклад, Тим McCall, автор [ http://attributerouting.net ](http://attributerouting.net). С помощью маршрутизации с помощью атрибутов можно указать свои маршруты веб-API добавив аннотации для действия и контроллеры следующим образом:

[!code-csharp[Main](release-notes/samples/sample1.cs)]

Маршрутизация с помощью атрибутов предоставляет больший контроль над коды URI в веб-API. Например можно легко определить иерархии ресурсов, с помощью одного контроллера API:

[!code-csharp[Main](release-notes/samples/sample2.cs)]

Маршрутизация с помощью атрибутов также предоставляет удобный синтаксис для указания необязательных параметров, значения по умолчанию и ограничения маршрута:

[!code-csharp[Main](release-notes/samples/sample3.cs)]

Дополнительные сведения о маршрутизации с помощью атрибутов, см. в разделе [маршрутизации с помощью атрибутов в веб-API 2](../../../web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2.md).

### <a name="oauth-20"></a>OAuth 2.0

Шаблоны проектов веб-API и одностраничных приложений теперь поддерживает авторизацию с помощью OAuth 2.0. OAuth 2.0 — это платформа для авторизации клиента доступа к защищенным ресурсам. Она работает для различных клиентов, включая браузеры и мобильные устройства.

Поддержка OAuth 2.0 основана на новых безопасности по промежуточного слоя, предоставляемые компоненты Microsoft OWIN для проверки подлинности носителя и реализация роль сервера авторизации. Кроме того клиенты можно авторизовать с помощью сервера авторизации организации, например Azure Active Directory или служб федерации Active Directory в Windows Server 2012 R2.

### <a name="odata-improvements"></a>Усовершенствования OData

**Развернуть поддержка $select, $, $batch и $value**

ASP.NET Web API OData теперь имеет полную поддержку для $select, $expand и $value. Можно также использовать $batch для запроса, пакетная обработка и обработка наборов изменений.

$Select и $expand разверните параметры, позволяющих настраивать формы данных, который возвращается из конечной точки OData. Дополнительные сведения см. в разделе [Introducing $select и $expand расширить поддержку в веб-API OData](../../../web-api/overview/odata-support-in-aspnet-web-api/using-select-expand-and-value.md).

**Улучшенная расширяемости**

Модули форматирования OData теперь являются расширяемыми. Можно добавить метаданных элемента Atom, поддержки именованного потока и мультимедиа записей связей, добавить заметки экземпляров и настраивать способ создания ссылки.

**Менее тип поддержки**

Теперь можно создавать службы OData без необходимости определять типы среды CLR для типов сущности. Вместо этого можно воспользоваться или возвращают экземпляры контроллеров OData **IEdmObject**, которые являются модули форматирования OData сериализации/десериализации.

**Повторное использование существующей модели**

Если вы уже существующей модели EDM (модель EDM), ее можно теперь повторно напрямую, вместо того, чтобы создать новое. Например если вы используете Entity Framework, можно использовать модели EDM, который EF создает для вас.

### <a name="request-batching"></a>Запрос пакетной обработки

Пакетная обработка запроса объединяет несколько операций в одном запросе HTTP POST сократить сетевой трафик и обеспечить плавное меньше множественных пользовательского интерфейса. Теперь веб-API ASP.NET поддерживает несколько стратегий для пакетной обработки запроса:

- Используйте $batch конечную точку службы OData.
- Упакуйте несколько запросов в один составной запрос MIME.
- Используйте настраиваемый формат пакетной обработки.

Чтобы включить пакетной обработки запросов, просто добавьте маршрут с пакетной обработки обработчиком в конфигурацию веб-API:

[!code-csharp[Main](release-notes/samples/sample4.cs)]

Вы также можете управлять ли запросы или выполняются последовательно или в любом порядке.

### <a name="portable-aspnet-web-api-client"></a>Переносимые ASP.NET веб-API клиента

Теперь клиент веб-API ASP.NET можно использовать для создания переносимых библиотек классов, которые работают в приложениях Windows Store и Windows Phone 8. Также можно создать переносимый модули форматирования, которые могут совместно использоваться клиентом и сервером.

### <a name="improved-testability"></a>Улучшенные возможности тестирования

Веб-API 2 упрощает его гораздо легче модульного тестирования контроллеры API. Просто создать экземпляр контроллера API с помощью сообщения запроса, а также конфигурации, а затем вызовите метод действия, которые вы хотите протестировать. Это также просто для макетирования **UrlHelper** класс для методов действий, которые выполняют компоновки.

### <a name="ihttpactionresult"></a>IHttpActionResult

Теперь вы можете реализовать IHttpActionResult для инкапсуляции результат своих методов действий веб-API. IHttpActionResult, возвращенный из метода действия, веб-API выполняется средой выполнения веб-API ASP.NET для создания результирующего ответного сообщения. IHttpActionResult могут быть возвращены из любого действия веб-API, чтобы упростить модульное тестирование реализации веб-API. Для удобства, в ряде реализаций IHttpActionResult предоставляются по умолчанию, в том числе результаты для возвращения конкретными кодами состояния в формате содержимого или согласование содержимого ответов.

### <a name="httprequestcontext"></a>HttpRequestContext

Новый **HttpRequestContext** отслеживает любое состояние, которое привязано к запросу, но не сразу становятся доступными из запроса. Например, можно использовать **HttpRequestContext** для получения данных маршрута, субъект, связанный с запросом, сертификат клиента, **UrlHelper** и корень виртуального пути. Вы можете легко создавать **HttpRequestContext** модульного тестирования.

Так как участника для запроса передается в запросе, а не полагаться на **Thread.CurrentPrincipal**, участника теперь доступен во время запроса, находящимся в конвейер веб-API.

### <a name="cors"></a>CORS

Благодаря другой огромный вклад из Брок Аллен ASP.NET теперь полностью поддерживает Cross происхождения запроса общего доступа.

Безопасность обозревателя запрещает отправку запросов AJAX в другой домен веб-страницы. [CORS](http://www.w3.org/TR/cors/) — это стандарт консорциума W3C, позволяющий серверу смягчить ограничения политики одного источника. С помощью CORS сервер может явным образом разрешить некоторые запросы независимо от источника а другие — отклонять.

Веб-API 2 теперь поддерживает CORS, включая автоматическую обработку предварительные запросы. Дополнительные сведения см. в разделе [Включение запросов о происхождении в веб-API ASP.NET](../../../web-api/overview/security/enabling-cross-origin-requests-in-web-api.md).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в веб-API ASP.NET, выполните перед фильтры авторизации в конвейер веб-API ASP.NET и позволяют пользователю указать проверки подлинности логики по действиям, конкретного контроллера, или глобально для всех контроллеров. Фильтры проверки подлинности обрабатывают учетные данные в запросе и укажите соответствующий субъект. В ответ на неавторизованные запросы, фильтры проверки подлинности можно также добавить проблемы проверки подлинности.

### <a name="filter-overrides"></a>Переопределения фильтра

Теперь можно переопределять, какие фильтры относятся к методу конкретного действия или контроллер, указав фильтром переопределения. Переопределение фильтры задать фильтр типов, которые не должны запускаться для данной области (действий или контроллера). Это позволяет добавить глобальные фильтры, но затем исключить некоторые из конкретных действий или контроллеров.

### <a name="owin-integration"></a>Интеграция OWIN

Веб-API ASP.NET теперь полностью поддерживает OWIN и могут выполняться на любом узле поддержкой OWIN. Кроме того, входит **HostAuthenticationFilter** , обеспечивает интеграцию с системой проверки подлинности OWIN.

С интеграцией OWIN можно самостоятельно размещать веб-API в собственном процессе наряду с другими по промежуточного слоя OWIN, таких как SignalR. Дополнительные сведения см. в разделе [использование OWIN для Self-Host ASP.NET Web API](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="TOC13"></a>
## <a name="aspnet-signalr-20"></a>ASP.NET SignalR 2.0

В следующих разделах функции SignalR 2.0.

- [Основанная на OWIN](#builtonowin)
- [MapHubs и MapConnection стали MapSignalR](#MapSignalR)
- [Поддержка между доменами](#crossdomain)
- [iOS и Android поддерживают через MonoTouch и MonoDroid](#mobile)
- [Клиент переносимой .NET](#portable)
- [Новый пакет резидентного размещения](#selfhost)
- [Поддержка обратной совместимостью сервера](#backwardcompat)
- [Удалена поддержка .NET 4.0 server](#remove40)
- [Отправка сообщения в список клиентов и группы](#messagelist)
- [Отправка сообщения конкретному пользователю](#sendtouser)
- [Улучшения поддержки обработки ошибок](#errorhandling)
- [Проще модульного тестирования концентраторов](#unittesting)
- [Обработка ошибок JavaScript](#javascripterror)

Пример того, как обновить существующий проект 1.x до SignalR 2.0, см. в разделе [обновление SignalR 1.x проекта](../../../signalr/overview/releases/upgrading-signalr-1x-projects-to-20.md).

<a id="builtonowin"></a>
### <a name="built-on-owin"></a>Основанная на OWIN

SignalR 2.0 с полностью встроены [OWIN (Open Web Interface for .NET)](http://owin.org/). Это изменение делает процесс установки для SignalR гораздо более согласованы между веб сервере и резидентных приложений SignalR, но также необходимое количество изменений API.

<a id="MapSignalR"></a>

### <a name="maphubs-and-mapconnection-are-now-mapsignalr"></a>MapHubs и MapConnection стали MapSignalR

Для обеспечения совместимости со стандартами OWIN, эти методы были переименованы в `MapSignalR`. `MapSignalR` вызывается без параметров будет сопоставлять все концентраторы (как `MapHubs` в версии 1.x); для сопоставления отдельных **PersistentConnection** объектов, указать тип соединения в качестве параметра типа и расширение URL-адрес для подключения как Первый аргумент.

`MapSignalR` Вызывается метод в класс запуска Owin. Visual Studio 2013 содержит новый шаблон для класса запуска Owin; Чтобы использовать этот шаблон, сделайте следующее:

1. Щелкните правой кнопкой мыши по проекту
2. Выберите **добавить**, **новый элемент...**
3. Выберите **класс запуска Owin**. Назовите новый класс **Startup.cs**.

В **веб-приложение,** содержащий класс запуска Owin `MapSignalR` метод добавляется в процесс запуска Owin используя запись в узел параметров приложения файла Web.Config, как показано ниже.

В **самостоятельных приложений**, класс Startup передается как параметр типа `WebApp.Start` метод.

**Сопоставление концентраторов и подключениями в SignalR 1.x (из файла глобальных приложений, веб-приложения):** 

[!code-csharp[Main](release-notes/samples/sample5.cs)]

**Сопоставление, концентраторы и подключения SignalR 2.0 (из файла класса запуска Owin):** 

[!code-csharp[Main](release-notes/samples/sample6.cs)]

В **самостоятельных приложений**, класс Startup передается как параметр типа для `WebApp.Start` метод, как показано ниже.

[!code-csharp[Main](release-notes/samples/sample7.cs)]

<a id="crossdomain"></a>

### <a name="cross-domain-support"></a>Поддержка между доменами

В SignalR 1.x, междоменные запросы были контролируются одного флага EnableCrossDomain. Этот флаг контролировать запросы JSONP и CORS. Для повышения гибкости, поддерживают все CORS был удален из серверного компонента SignalR (JavaScript клиенты по-прежнему использовать CORS обычно при его обнаружении, что он поддерживает браузер), а новый промежуточный слой OWIN стала доступной для поддержки следующих сценариев.

В SignalR 2.0, если JSONP требуется на клиентском компьютере (для поддержки запросов между доменами в старых браузерах), его необходимо явно включить, задав `EnableJSONP` на `HubConfiguration` объект `true`, как показано ниже. JSONP отключена по умолчанию, так как это менее безопасно, чем CORS.

Чтобы добавить нового по промежуточного слоя CORS в SignalR 2.0, добавьте `Microsoft.Owin.Cors` библиотеки в проект и вызов `UseCors` перед SignalR по промежуточного слоя, как показано в следующем разделе.

**Добавление в проект Microsoft.Owin.Cors**: Чтобы установить эту библиотеку, выполните следующую команду в консоли диспетчера пакетов:

[!code-powershell[Main](release-notes/samples/sample8.ps1)]

Эта команда добавит 2.0.0 версию пакета в проект.

**Вызов UseCors**

В следующих фрагментах кода демонстрируется реализация междоменных подключений в SignalR 1.x и 2.0.

**Реализация междоменных запросов в SignalR 1.x (из файла глобальных приложений)**

[!code-csharp[Main](release-notes/samples/sample9.cs)]

**Реализация междоменных запросов в SignalR 2.0 (из файла кода C#)**

Следующий код демонстрирует включение CORS и JSONP в проекте SignalR 2.0. Этот пример кода использует `Map` и `RunSignalR` вместо `MapSignalR`, таким образом, по промежуточного слоя CORS выполнялось только для запросов SignalR, которым требуется поддержка CORS (а не для всего трафика по пути, указанному в `MapSignalR`.) `Map` также может использоваться для любого другого по промежуточного слоя, должен быть запущен для указанного префикса URL-адрес, а не для всего приложения.

[!code-csharp[Main](release-notes/samples/sample10.cs)]

<a id="mobile"></a>

### <a name="ios-and-android-support-via-monotouch-and-monodroid"></a>iOS и Android поддерживают через MonoTouch и MonoDroid

Добавлена поддержка для клиентов iOS и Android с помощью компонентов MonoTouch и MonoDroid из [библиотека Xamarin](https://xamarin.com/). Дополнительные сведения о том, как их использовать, см. в разделе [с помощью компонентов Xamarin](https://github.com/SignalR/SignalR/wiki/Building-Mono.Mobile.sln). Эти компоненты будут доступны в [Xamarin Store](https://store.xamarin.com/) когда доступна в выпуске SignalR RTW.

<a id="portable"></a> ### Переносимого клиента .NET

Для дальнейшего упрощения кросс платформенной разработки, Silverlight, WinRT и клиенты Windows Phone были заменены одной переносимой .NET программы, которая поддерживает следующие платформы:

- NET 4.5
- Silverlight 5
- WinRT (.NET для приложений Windows Store)
- Windows Phone 8

<a id="selfhost"></a>

### <a name="new-self-host-package"></a>Новый пакет резидентного размещения

Сейчас пакет NuGet, чтобы было проще приступить к работе с Резидентное размещение SignalR (SignalR приложений, размещенных в процессе или другие приложения, а не, размещенного на веб-сервере). Чтобы обновить проект резидентного размещения, созданных с помощью SignalR 1.x, удалите пакет Microsoft.AspNet.SignalR.Owin и добавьте пакет Microsoft.AspNet.SignalR.SelfHost. Дополнительные сведения о начале работы с пакетом резидентного размещения см. в разделе [руководства: Резидентное размещение SignalR](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="backwardcompat"></a>

### <a name="backward-compatible-server-support"></a>Поддержка обратной совместимостью сервера

В предыдущих версиях SignalR, версии пакета SignalR, который используется в клиенте и сервере, должны быть идентичными. Чтобы обеспечить поддержку толстая клиентские приложения, которые будет трудно обновления, SignalR 2.0 поддерживает с помощью более новой версии сервера с более старого клиента. **Примечание. SignalR 2.0 не поддерживает серверы, созданные с помощью более старой версии с более новые клиенты.**

<a id="remove40"></a>

### <a name="removed-server-support-for-net-40"></a>Удалена поддержка .NET 4.0 server

SignalR 2.0 прекращена поддержка сервера взаимодействие с платформой .NET 4.0. .NET 4.5 необходимо использовать с серверами SignalR 2.0. По-прежнему является клиентом .NET 4.0 для SignalR 2.0.

<a id="messagelist"></a>

### <a name="sending-a-message-to-a-list-of-clients-and-groups"></a>Отправка сообщения в список клиентов и группы

В SignalR 2.0 можно отправить сообщение с использованием списка клиента и идентификатор группы. В следующих фрагментах кода показано, как это сделать.

**Отправка сообщения в список клиентов и групп с помощью PersistentConnection**

[!code-csharp[Main](release-notes/samples/sample11.cs)]

**Отправка сообщения в список клиентов и группы, использующие концентраторы**

[!code-csharp[Main](release-notes/samples/sample12.cs)]

<a id="sendtouser"></a>

### <a name="sending-a-message-to-a-specific-user"></a>Отправка сообщения конкретному пользователю

Эта функция позволяет пользователю указать, что такое идентификатор пользователя на IRequest через новый интерфейс IUserIdProvider основе:

**Интерфейс IUserIdProvider**

[!code-csharp[Main](release-notes/samples/sample13.cs)]

По умолчанию будет иметь реализацию, которая использует IPrincipal.Identity.Name пользователя в качестве имени пользователя.

В концентраторах вы сможете отправлять сообщения для этих пользователей с помощью нового API:

**С помощью Clients.User API**

[!code-csharp[Main](release-notes/samples/sample14.cs)]

<a id="errorhandling"></a>

### <a name="better-error-handling-support"></a>Улучшения поддержки обработки ошибок

Пользователи теперь могут создавать **HubException** из любого вызова концентратора. Конструктор **HubException** может занять строковое сообщение и объект дополнительные данные ошибки. SignalR будет автоматически сериализации исключения и отправить его клиенту, где он будет использоваться для отклонения или с ошибкой в вызов метода концентратора.

**Показать исключениях концентраторов подробные** параметр никак не влияет **HubException** отправляются обратно клиенту или нет; оно всегда отправляется.

**Серверный код, демонстрирующий отправке HubException клиенту**

[!code-csharp[Main](release-notes/samples/sample15.cs)]

**Клиентский код JavaScript, демонстрации, реагирование на HubException, отправленных с сервера**

[!code-html[Main](release-notes/samples/sample16.html)]

**Демонстрация реагирование на HubException, отправленных сервером код клиента .NET**

[!code-csharp[Main](release-notes/samples/sample17.cs)]

<a id="unittesting"></a>

### <a name="easier-unit-testing-of-hubs"></a>Проще модульного тестирования концентраторов

SignalR 2.0 включает в себя интерфейс `IHubCallerConnectionContext` на концентраторы, которые упрощают создание макетов клиента на стороне вызовов. В следующих фрагментах кода демонстрируется использование этого интерфейса с помощью популярных тестовой оснастки [xUnit.net](https://github.com/xunit/xunit) и [moq](https://code.google.com/p/moq/).

**Модульное тестирование SignalR с помощью xUnit.net**

[!code-csharp[Main](release-notes/samples/sample18.cs)]

**Модульное тестирование SignalR с помощью moq**

[!code-csharp[Main](release-notes/samples/sample19.cs)]

<a id="javascripterror"></a>

### <a name="javascript-error-handling"></a>Обработка ошибок JavaScript

В SignalR 2.0 все обратные вызовы для обработки ошибок JavaScript возвращают объекты ошибок JavaScript вместо неструктурированных строк. Это позволяет SignalR для передачи более полные сведения, чтобы обработчики ошибок. Можно получить во внутреннем исключении из `source` свойства ошибки.

**Клиентский код JavaScript, обрабатывающем исключение Start.Fail**

[!code-javascript[Main](release-notes/samples/sample20.js)]

<a id="TOC8"></a>
## <a name="aspnet-identity"></a>ASP.NET Identity

### <a name="new-aspnet-membership-system"></a>Новая система членства ASP.NET

ASP.NET Identity — это новая система членства для приложений ASP.NET. ASP.NET Identity позволяет легко интегрировать данные профиля пользователя с данными приложения. ASP.NET Identity позволяет выбирать модель сохраняемости для профилей пользователей в приложении. Данные можно хранить в базе данных SQL Server или другом хранилище данных, включая хранилищ данных NoSQL, таких как таблиц службы хранилища Azure. Дополнительные сведения см. в разделе [учетные записи отдельных пользователей](creating-web-projects-in-visual-studio.md#indauth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="claims-based-authentication"></a>Проверка подлинности на основе утверждений

ASP.NET теперь поддерживает аутентификации на основе утверждений, где удостоверение пользователя представляется как набор заявок от доверенного издателя. Пользователи могут быть прошедшего проверку подлинности с помощью имени пользователя и пароля, обслуживаемым в базе данных приложения или с помощью поставщиков удостоверений в социальных сетях (например: Microsoft учетных записей, Facebook, Google, Twitter), или с помощью учетных записей организации посредством Azure Active Directory или служб федерации Active Directory (ADFS).

### <a name="integration-with-azure-active-directory-and-windows-server-active-directory"></a>Интеграция с Azure Active Directory и Windows Server Active Directory

Теперь можно создать проекты ASP.NET, использующие Azure Active Directory или Windows Server Active Directory (AD) для проверки подлинности. Дополнительные сведения см. в разделе [учетные записи организации](creating-web-projects-in-visual-studio.md#orgauth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="owin-integration"></a>Интеграция OWIN

Проверка подлинности ASP.NET теперь основана на по промежуточного слоя OWIN, который может использоваться на любом узле на основе OWIN. Дополнительные сведения о OWIN см. в следующих [компоненты Microsoft OWIN](#TOC7) раздел.

<a id="TOC7"></a>
## <a name="microsoft-owin-components"></a>Компоненты Microsoft OWIN

[Открыть веб-интерфейс .NET](http://owin.org/) (OWIN) определяет абстракции между веб-серверов .NET и веб-приложений. OWIN отделяет веб-приложения с сервера, что делает веб приложения независимой от размещения. Например можно разместить OWIN веб-приложение в IIS или произвести Резидентное размещение в пользовательском процессе.

Изменения, внесенные в компоненты Microsoft OWIN (также известный как проект Katana) включать новые компоненты сервера и узел, новых вспомогательных библиотек и по промежуточного слоя и нового промежуточного по проверки подлинности.

Дополнительные сведения о OWIN и Katana см. в разделе [новые возможности в OWIN и Katana](../../../aspnet/overview/owin-and-katana/index.md).

**Примечание. [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) приложения не может работать в классическом режиме IIS; они должны выполняться в режиме интеграции с.**

**Примечание. [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) приложения должны выполняться в режиме полного доверия.**

### <a name="new-servers-and-hosts"></a>Новые серверы и узлы

В этом выпуске новые компоненты были добавлены для поддержки самостоятельного размещения сценариев. К этим компонентам относятся следующие пакеты NuGet:

- **Microsoft.Owin.Host.HttpListener**. Предоставляет серверу OWIN, который использует **HttpListener** для прослушивания HTTP-запросы и направлять их в конвейер OWIN.
- **Microsoft.Owin.Hosting** предоставляет библиотеку для разработчиков, которые хотят самостоятельно размещать конвейер OWIN в пользовательском процессе, такие как консольное приложение или службу Windows.
- **OwinHost**. Предоставляет отдельный исполняемый файл, который заключает в оболочку `Microsoft.Owin.Hosting` и позволяет самостоятельно размещать конвейер OWIN без необходимости написания пользовательского ведущего приложения.

Кроме того `Microsoft.Owin.Host.SystemWeb` теперь с помощью пакета по промежуточного слоя предоставить подсказки для **SystemWeb** сервера, указывающее, что по промежуточного слоя должны вызываться во время выполнения определенного этапа конвейера ASP.NET. Эта функция особенно полезна для промежуточного по проверки подлинности, который должен быть запущен на раннем этапе конвейера ASP.NET.

### <a name="helper-libraries-and-middleware"></a>Вспомогательных библиотек и по промежуточного слоя

Несмотря на то, что вы можете написать компоненты OWIN, используя только функции и тип определения из спецификации OWIN новый `Microsoft.Owin` пакет предоставляет удобный набор абстракций. Этот пакет объединяет несколько предыдущих пакетов (например, `Owin.Extensions`, `Owin.Types`) в модель единый, хорошо структурированный объект, который можно затем легко использовать другие компоненты OWIN. На самом деле большинство компоненты Microsoft OWIN теперь использовать этот пакет.

> [!NOTE]
> [OWIN](http://www.owin.org) приложения не может работать в классическом режиме IIS; они должны выполняться в режиме интеграции с.

> [!NOTE]
> [OWIN](http://www.owin.org) приложения должны выполняться в режиме полного доверия.

Этот выпуск также включает пакет Microsoft.Owin.Diagnostics, который включает по промежуточного слоя для проверки запущенного приложения OWIN, а также страницы ошибки по промежуточного слоя для осуществления исследования сбоев.

### <a name="authentication-components"></a>Компоненты проверки подлинности

Доступны следующие компоненты проверки подлинности.

- **Microsoft.Owin.Security.ActiveDirectory**. Включает проверку подлинности с помощью каталога локальных или облачных служб.
- **Microsoft.Owin.Security.Cookies** включает аутентификацию с помощью файлов cookie. Этот пакет ранее называлось `Microsoft.Owin.Security.Forms`.
- **Microsoft.Owin.Security.Facebook** включает аутентификацию с помощью Facebook OAuth-службу.
- **Microsoft.Owin.Security.Google** включает аутентификацию с помощью Google OpenID-службу.
- **Microsoft.Owin.Security.Jwt** включает аутентификацию с помощью маркеров JWT.
- **Microsoft.Owin.Security.MicrosoftAccount** включает аутентификацию с помощью учетных записей Майкрософт.
- **Microsoft.Owin.Security.OAuth**. Предоставляет сервер авторизации OAuth, а также по промежуточного слоя для проверки подлинности токенов носителя.
- **Microsoft.Owin.Security.Twitter** включает аутентификацию с помощью Twitter OAuth-службу.

Этот выпуск также включает `Microsoft.Owin.Cors` пакет, который содержит по промежуточного слоя для обработки HTTP-запросы независимо от источника.

> [!NOTE]
> В окончательной версии Visual Studio 2013 была удалена поддержка для подписывания JWT.

<a id="ef6"></a>
## <a name="entity-framework-6"></a>Entity Framework 6

Список новых возможностей и других изменений в Entity Framework 6, см. в разделе [журнал версий Entity Framework](https://msdn.com/data/jj574253).

<a id="TOC14"></a>
## <a name="aspnet-razor-3"></a>ASP.NET Razor 3

ASP.NET Razor 3 включает в себя следующие новые функции:

- Поддержка редактирования вкладки. Ранее **форматировать документ** команда автоматического отступа и автоматическое форматирование в Visual Studio не работала правильно при использовании **сохранять знаки табуляции** параметр. Это изменение устраняет форматирования кода Razor для табуляции, Visual Studio.
- Поддержка правил переопределения URL-адресов при генерации ссылок.
- Удаление атрибута прозрачное для безопасности.
  > [!NOTE]
  > Это является критическим изменением, а также приведет к несовместимости Razor 3 с MVC 4 и более ранних версий, хотя Razor 2 несовместим с MVC5 или сборки, скомпилированные MVC5.

Ошибки Razor 3 в Visual Studio 2013 с предварительных версий можно найти [здесь](https://aspnetwebstack.codeplex.com/workitem/list/advanced?keyword=&status=Resolved%7cClosed&type=All&priority=All&release=All%7cv5.0%2bPreview%7cv5.0%2bRC%7cv5.0%2bRTM&assignedTo=All&component=Web%2bPages%252fRazor&reasonClosed=Fixed&sortField=LastUpdatedDate&sortDirection=Descending&page=0).

<a id="TOC15"></a>
## <a name="aspnet-app-suspend"></a>Приостановка приложения ASP.NET

ASP.NET App Suspend — это функция меняют правила игры, в .NET Framework 4.5.1, радикально изменяющий взаимодействие с пользователем и Экономическая модель размещения большое количество веб-узлы ASP.NET на одном компьютере. Дополнительные сведения см. в разделе [общих ASP.NET App Suspend — быстро реагирующих веб-размещения .NET](https://blogs.msdn.com/b/dotnet/archive/2013/10/09/asp-net-app-suspend-responsive-shared-net-web-hosting.aspx).

<a id="knownissues"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

В этом разделе описываются известные проблемы и критические изменения в ASP.NET and Web Tools для Visual Studio 2013.

### <a name="nuget"></a>NuGet

- [Новый восстановление пакетов не работает на Mono, при использовании файла SLN](https://nuget.codeplex.com/workitem/3596) — будет устранена в предстоящем nuget.exe загрузки и [NuGet.CommandLine пакета](http://www.nuget.org/packages/NuGet.CommandLine/) обновления.
- [Новый восстановление пакетов не работает с проектами Wix](https://nuget.codeplex.com/workitem/3598) — будет устранена в предстоящем nuget.exe загрузки и [NuGet.CommandLine пакета](http://www.nuget.org/packages/NuGet.CommandLine/) обновления.
- [Автоматическое восстановление пакетов не работает для проектов в папке решения](https://nuget.codeplex.com/workitem/3625) — будет исправлена в NuGet 2.8.

### <a name="aspnet-web-api"></a>ASP.NET Web API

1. `ODataQueryOptions<T>.ApplyTo(IQueryable)` не возвращает `IQueryable<T>` всегда, так как мы добавили поддержку `$select` и `$expand`.

    Наших предыдущих примерах для `ODataQueryOptions<T>` всегда привести возвращаемое значение из `ApplyTo` для `IQueryable<T>`. Это работает ранее, так как параметры запроса, который мы поддерживали ранее (`$filter`, `$orderby`, `$skip`, `$top`) не изменяйте форму запроса. Теперь, когда мы поддерживаем `$select` и `$expand` возвращаемое значение из `ApplyTo` будет `IQueryable<T>` всегда.

    [!code-csharp[Main](release-notes/samples/sample21.cs)]

    Если вы используете образец кода из ранее, он будет продолжить работу, если клиент не отправляет `$select` и `$expand`. Тем не менее если вы хотите поддерживать `$select` и `$expand` необходимо изменить этот код на следующий.

    [!code-csharp[Main](release-notes/samples/sample22.cs)]
2. **Request.Url или RequestContext.Url имеет значение null во время пакетного запроса**

    В случае пакетирования **UrlHelper** имеет значение null, если доступ осуществляется из **Request.Url** или **RequestContext.Url**.

    В настоящее время эта проблема отслеживается здесь: [BatchRequestContext.Url имеет значение null для пакетной обработки запроса](http://aspnetwebstack.codeplex.com/workitem/1301).

    Возможным решением этой проблемы — создать новый экземпляр класса **UrlHelper**, как показано в следующем примере:

    **Создание нового экземпляра UrlHelper**

    [!code-csharp[Main](release-notes/samples/sample23.cs)]

### <a name="aspnet-mvc"></a>ASP.NET MVC

1. При использовании MVC 5 и OrgAuth, если имеются представления, которые выполняют проверки AntiForgerToken, часто встречаются следующие ошибки при отправке данных в представление:

    **Ошибка**:

    *Ошибка сервера в приложении «/».*

    <em>Утверждение типа "<http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier>«или»<http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider>" не был помещен в указанное ClaimsIdentity. Чтобы включить поддержку маркеров защиты от подделки с проверкой подлинности на основе утверждений, убедитесь, что оба эти заявки на экземплярах ClaimsIdentity, создаваемые им предоставляет поставщика утверждений, настроенный. Если вместо этого поставщика утверждений, настроенный использует с другим типом утверждения как уникальный идентификатор, его можно настроить, задав свойство AntiForgeryConfig.UniqueClaimTypeIdentifier.</em>

    **Инструкции по решению**:

    В файле Global.asax, чтобы устранить проблему, добавьте следующую строку:

    `AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.Name;`

    Это будет исправлено в следующем выпуске.
2. После обновления приложения MVC 4 до MVC 5, выполните сборку решения и запустите его. Вы должны увидеть следующую ошибку:

    [A] System.Web.WebPages.Razor.Configuration.HostSection не может быть приведен к [B]System.Web.WebPages.Razor.Configuration.HostSection. Тип A происходит из "System.Web.WebPages.Razor, версия = 2.0.0.0, Culture = neutral, PublicKeyToken = 31bf3856ad364e35" в контексте «Default» в расположении "C:\windows\Microsoft.Net\assembly\GAC\_MSIL\System.Web.WebPages.Razor\ версии 4.0\_2.0.0.0\_\_31bf3856ad364e35\System.Web.WebPages.Razor.dll ". Тип B происходит из "System.Web.WebPages.Razor, Version = 3.0.0.0, Culture = neutral, PublicKeyToken = 31bf3856ad364e35" в контексте «Default» в расположении "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6d05bbd0\ e8b5908e\assembly\dl3\c9cbca63\f8910382\_6273ce01\System.Web.WebPages.Razor.dll ".

    Чтобы устранить эту ошибку выше, откройте *все* файлы Web.config (в том числе тех, которые в папке Views) в проект и выполните следующее:

   1. Обновите все вхождения версии «4.0.0.0» «System.Web.Mvc» для «5.0.0.0».
   2. Обновить все вхождения версии «System.Web.Helpers», «2.0.0.0» &quot;System.Web.WebPages&quot; и &quot;System.Web.WebPages.Razor&quot; для «3.0.0.0»

      Например после внесения изменения привязок сборок должен выглядеть следующим образом:

      [!code-xml[Main](release-notes/samples/sample24.xml)]

      Сведения об обновлении проектов MVC 4 до MVC 5 см. в разделе [обновление ASP.NET MVC 4 и проекта веб-API до ASP.NET MVC 5 и веб-API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).
3. При использовании проверки на стороне клиента с скрипт ненавязчивой проверки jQuery, сообщение проверки иногда является неправильным для HTML-элемент input с типом = «number». Ошибка проверки для обязательное значение («The Age поле является обязательным») отображается при вводе недопустимого номера вместо правильного сообщения, что допустимое число является обязательным.

    Эта проблема часто встречаются с шаблонный код для модели с целочисленное свойство в представлениях Create и Edit.

    Чтобы обойти эту проблему, измените вспомогательный редактор из:

    `@Html.EditorFor(person => person.Age)`

    В:

    `@Html.TextBoxFor(person => person.Age)`
4. ASP.NET MVC 5 больше не поддерживает частичное доверие. Проекты, связывание с двоичными файлами MVC или веб-API следует удалить [SecurityTransparent](https://msdn.microsoft.com/library/system.security.securitytransparentattribute.aspx) атрибут и [AllowPartiallyTrustedCallers](https://msdn.microsoft.com/library/system.security.allowpartiallytrustedcallersattribute.aspx) атрибута. Удаление этих атрибутов, устраняющие следующие ошибки компилятора.

    `Attempt by security transparent method ‘MyComponent' to access security critical type 'System.Web.Mvc.MvcHtmlString' failed. Assembly 'PagedList.Mvc, Version=4.3.0.0, Culture=neutral, PublicKeyToken=abbb863e9397c5e1' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model. Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception.`

    > Обратите внимание на то, как побочный эффект этого не может использовать 4.0 и 5.0 сборки в одном приложении. Необходимо обновить все проекты до 5.0.

### <a name="spa-template-with-facebook-authorization-may-cause-instability-in-ie-while-the-web-site-is-hosted-in-intranet-zone"></a>Шаблон одностраничного приложения с Facebook авторизации может вызвать нестабильность в Internet Explorer, а веб-сайт размещается в зоне интрасети

Шаблон одностраничного приложения предоставляет внешнего журнала с помощью Facebook. Если проект, созданный с помощью шаблона выполняется локально, вход может привести к IE аварийное завершение работы.

Решение:

1. Веб-узел в зоне Интернета; или

2. Протестируйте сценарий в браузер, отличный от IE.

### <a name="web-forms-scaffolding"></a>Веб-форм формирование шаблонов

Формирование шаблонов форм, был удален из VS2013 и будут доступны в последующем обновлении Visual Studio. Тем не менее по-прежнему можно использовать формирование шаблонов в проекте веб-форм, Добавление зависимостей MVC и создание формирования шаблонов для MVC. Проект будет содержать сочетание Web Forms и MVC.

Чтобы добавить MVC в проект веб-форм, добавьте новый шаблонный элемент и выберите **зависимостей MVC 5**. Выберите минимальный или полный в зависимости от того, нужны ли все файлы содержимого, такие как сценарии. Затем добавление элемента формирования шаблонов для MVC, который будет создавать представления и контроллера в проекте.

### <a name="mvc-and-web-api-scaffolding---http-404-not-found-error"></a>MVC и API формирование шаблонов-HTTP 404 не найдено ошибок

Если возникает ошибка при добавлении элемента формирования шаблонов в проект, это возможно, ваш проект остается в несогласованном состоянии. Некоторые изменения, внесенные быть формирования шаблонов будет выполнен откат, но другие изменения, например установленные пакеты NuGet, не будет выполнен откат. Если откат изменения конфигурации маршрутизации, пользователи будут получать ошибку HTTP 404 при переход к сформированные элементы.

Решение

- Чтобы устранить эту ошибку для MVC, добавьте новый шаблонный элемент и выберите зависимостей MVC 5 (минимальное или полный). Этот процесс будет добавьте все необходимые изменения в проект.
- Чтобы устранить эту ошибку для веб-API:

  1. Добавление класса WebApiConfig в проект.

      [!code-csharp[Main](release-notes/samples/sample25.cs)]

      [!code-vb[Main](release-notes/samples/sample26.vb)]
  2. Настройка в приложении WebApiConfig.Register\_запустите метод в файле Global.asax, как показано ниже:

      [!code-csharp[Main](release-notes/samples/sample27.cs)]

      [!code-vb[Main](release-notes/samples/sample28.vb)]
