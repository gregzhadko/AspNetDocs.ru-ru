---
uid: web-api/overview/getting-started-with-aspnet-web-api/creating-api-help-pages
title: Создание страниц справки для веб-API ASP.NET-ASP.NET 4. x
author: MikeWasson
description: В этом руководстве с кодом показано, как создавать страницы справки для веб-API ASP.NET в ASP.NET 4. x.
ms.author: riande
ms.date: 04/01/2013
ms.custom: seoapril2019
ms.assetid: 0150e67b-c50d-4613-83ea-7b4ef8cacc5a
msc.legacyurl: /web-api/overview/getting-started-with-aspnet-web-api/creating-api-help-pages
msc.type: authoredcontent
ms.openlocfilehash: 8308dab8bd66aa8f5a3c5fb4133fc7a3df78f671
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78448620"
---
# <a name="creating-help-pages-for-aspnet-web-api"></a>Создание страниц справки для веб-API ASP.NET

по [Майк Уоссон](https://github.com/MikeWasson)

В этом руководстве с кодом показано, как создавать страницы справки для веб-API ASP.NET в ASP.NET 4. x.

При создании веб-API часто бывает полезно создать страницу справки, чтобы другие разработчики узнают, как вызывать API. Вы можете создать всю документацию вручную, но лучше создавать ее автоматически. Чтобы упростить эту задачу, веб-API ASP.NET предоставляет библиотеку для автоматического создания страниц справки во время выполнения.

![](creating-api-help-pages/_static/image1.png)

## <a name="creating-api-help-pages"></a>Создание страниц справки по API

Установите [обновление ASP.NET and Web Tools 2012,2](https://go.microsoft.com/fwlink/?LinkId=282650). Это обновление интегрирует страницы справки в шаблон проекта веб-API.

Затем создайте новый проект ASP.NET MVC 4 и выберите шаблон проекта веб-API. Шаблон проекта создает пример контроллера API с именем `ValuesController`. Шаблон также создает страницы справки API. Все файлы кода для страницы справки помещаются в папку Areas проекта.

![](creating-api-help-pages/_static/image2.png)

При запуске приложения на домашней странице содержится ссылка на страницу справки по API. На домашней странице относительный путь —/Хелп.

![](creating-api-help-pages/_static/image3.png)

Эта ссылка открывает страницу сводки API.

![](creating-api-help-pages/_static/image4.png)

Представление MVC для этой страницы определено в области/Хелппаже/views/Help/index. cshtml. Эту страницу можно изменить, чтобы изменить макет, введение, заголовок, стили и т. д.

Основная часть страницы — это таблица API-интерфейсов, сгруппированных по контроллеру. Записи таблицы создаются динамически с помощью интерфейса **иапиексплорер** . (Подробнее об этом интерфейсе я расскажу чуть позже.) При добавлении нового контроллера API таблица автоматически обновляется во время выполнения.

В столбце "API" перечислены метод HTTP и относительный URI. В столбце "Описание" содержится документация по каждому API. Изначально документация представляет собой просто текст заполнителя. В следующем разделе я покажу, как добавить документацию из комментариев XML.

Каждый API имеет ссылку на страницу с более подробными сведениями, включая примеры текстов запросов и ответов.

![](creating-api-help-pages/_static/image5.png)

## <a name="adding-help-pages-to-an-existing-project"></a>Добавление страниц справки в существующий проект

Страницы справки можно добавлять в существующий проект веб-API с помощью диспетчера пакетов NuGet. Этот параметр полезен при запуске из шаблона проекта, отличного от шаблонов веб-API.

В меню **Сервис** выберите **Диспетчер пакетов NuGet**, а затем выберите **консоль диспетчера пакетов**. В окне [консоли диспетчера пакетов](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) введите одну из следующих команд:

Для **C#** приложения: `Install-Package Microsoft.AspNet.WebApi.HelpPage`

Для **Visual Basic** приложения: `Install-Package Microsoft.AspNet.WebApi.HelpPage.VB`

Существует два пакета: один для C# и один для Visual Basic. Обязательно используйте тот, который соответствует вашему проекту.

Эта команда устанавливает необходимые сборки и добавляет представления MVC для страниц справки (расположенных в папке Areas/Хелппаже). Необходимо вручную добавить ссылку на страницу справки. Универсальный код ресурса (URI) —/Хелп. Чтобы создать ссылку в представлении Razor, добавьте следующее:

[!code-cshtml[Main](creating-api-help-pages/samples/sample1.cshtml)]

Кроме того, обязательно регистрируйте области. В файле Global. asax добавьте следующий код в метод **\_запуска приложения** , если он еще не существует:

[!code-csharp[Main](creating-api-help-pages/samples/sample2.cs?highlight=4)]

## <a name="adding-api-documentation"></a>Добавление документации по API

По умолчанию страницы справки содержат строки заполнителей для документации. Для создания документации можно использовать [Комментарии XML-документации](https://msdn.microsoft.com/library/b2s063f7.aspx) . Чтобы включить эту функцию, откройте файл Areas/Хелппаже/App\_Start/Хелппажеконфиг. cs и раскомментируйте следующую строку:

[!code-csharp[Main](creating-api-help-pages/samples/sample3.cs)]

Теперь включите XML-документацию. В обозреватель решений щелкните правой кнопкой мыши проект и выберите пункт **Свойства**. Выберите страницу **Сборка** .

![](creating-api-help-pages/_static/image6.png)

В разделе **выходные данные**проверьте **XML-файл документации**. В поле ввода введите "App\_Data/XmlDocument. XML".

![](creating-api-help-pages/_static/image7.png)

Затем откройте код контроллера API `ValuesController`, который определен в/Контроллерс/валуесконтроллер.КС. Добавьте в методы контроллера некоторые комментарии к документации. Пример:

[!code-csharp[Main](creating-api-help-pages/samples/sample4.cs)]

> [!NOTE]
> Совет. Если поместить курсор в строку над методом и ввести три косые черты, Visual Studio автоматически вставит XML-элементы. Затем можно ввести пустые значения.

Теперь выполните сборку и запуск приложения еще раз и перейдите на страницу справки. Строки документации должны присутствовать в таблице API.

![](creating-api-help-pages/_static/image8.png)

Страница справки считывает строки из XML-файла во время выполнения. (При развертывании приложения необходимо выполнить развертывание XML-файла.)

## <a name="under-the-hood"></a>Внутри

Страницы справки создаются на основе класса **апиексплорер** , который является частью платформы веб-API. Класс **апиексплорер** предоставляет необработанный материал для создания страницы справки. Для каждого API **апиексплорер** содержит **апидескриптион** , описывающий API. Для этой цели "API" определяется как сочетание метода HTTP и относительного URI. Например, вот несколько различных интерфейсов API:

- ПОЛУЧИТЬ/АПИ/Продуктс
- ПОЛУЧИТЬ/АПИ/Продуктс/{ИД}
- ОПУБЛИКОВАТЬ/АПИ/Продуктс

Если действие контроллера поддерживает несколько методов HTTP, **апиексплорер** обрабатывает каждый метод как отдельный API.

Чтобы скрыть API из **апиексплорер**, добавьте к действию атрибут **апиексплорерсеттингс** и задайте для *игнореапи* значение true.

[!code-csharp[Main](creating-api-help-pages/samples/sample5.cs)]

Можно также добавить этот атрибут к контроллеру, чтобы исключить весь контроллер.

Класс Апиексплорер получает строки документации из интерфейса **идокументатионпровидер** . Как было показано ранее, Библиотека страниц справки предоставляет **идокументатионпровидер** , который получает документацию из строк XML-документации. Код находится в/Ареас/хелппаже/ксмлдокументатионпровидер.КС. Вы можете получить документацию из другого источника, написав собственный **идокументатионпровидер**. Чтобы подключить ее, вызовите метод расширения **сетдокументатионпровидер** , определенный в **хелппажеконфигуратионекстенсионс**

**Апиексплорер** автоматически вызывает интерфейс **идокументатионпровидер** для получения строк документации для каждого API. Он сохраняет их в свойстве **Documentation** объектов **апидескриптион** и **апипараметердескриптион** .

## <a name="next-steps"></a>Next Steps

Вы не ограничены страницами справки, показанными здесь. На самом деле **апиексплорер** не ограничивается созданием страниц справки. Яо Хаун ссыл написала некоторые отличные записи в блоге, которые помогут вам обдуматься:

- [Добавление простого тестового клиента на страницу справки веб-API ASP.NET](https://blogs.msdn.com/b/yaohuang1/archive/2012/12/02/adding-a-simple-test-client-to-asp-net-web-api-help-page.aspx)
- [Обеспечение работы веб-API ASP.NETной страницы справки на самостоятельных размещенных службах](https://blogs.msdn.com/b/yaohuang1/archive/2012/12/20/making-asp-net-web-api-help-page-work-on-self-hosted-services.aspx)
- [Создание страницы справки (или клиента) во время разработки для веб-API ASP.NET](https://blogs.msdn.com/b/yaohuang1/archive/2013/01/20/design-time-generation-of-help-page-or-proxy-for-asp-net-web-api.aspx)
- [Расширенные настройки страницы справки](https://blogs.msdn.com/b/yaohuang1/archive/2012/12/10/asp-net-web-api-help-page-part-3-advanced-help-page-customizations.aspx)
