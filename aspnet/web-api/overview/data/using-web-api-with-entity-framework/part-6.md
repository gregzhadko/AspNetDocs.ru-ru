---
uid: web-api/overview/data/using-web-api-with-entity-framework/part-6
title: Создание клиента JavaScript | Документация Майкрософт
author: MikeWasson
description: ''
ms.author: riande
ms.date: 06/16/2014
ms.assetid: 20360326-b123-4b1e-abae-1d350edf4ce4
msc.legacyurl: /web-api/overview/data/using-web-api-with-entity-framework/part-6
msc.type: authoredcontent
ms.openlocfilehash: 74f2cc4e5e401d690042b05b028dfc0c46ae282a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78504726"
---
# <a name="create-the-javascript-client"></a>Создание клиента JavaScript

по [Майк Уоссон](https://github.com/MikeWasson)

[Скачать завершенный проект](https://github.com/MikeWasson/BookService)

В этом разделе вы создадите клиент для приложения, используя HTML, JavaScript и библиотеку [маскирования. js](http://knockoutjs.com/) . Клиентское приложение будет построено поэтапно:

- Отображение списка книг.
- Отображение сведений о книге.
- Добавление новой книги.

Библиотека маскирования использует шаблон Model-View-ViewModel (MVVM):

- **Модель** — это серверное представление данных в бизнес-домене (в нашем случае это книги и авторы).
- **Представление** — это уровень представления (HTML).
- **Модель представления** — это объект JavaScript, содержащий модели. Модель представления является абстракцией кода пользовательского интерфейса. Он не имеет сведений о представлении HTML. Вместо этого он представляет абстрактные функции представления, например &quot;список книг&quot;.

Представление привязано к модели представления. Обновления модели представления автоматически отражаются в представлении. Модель представления также получает события из представления, например нажатия кнопок.

![](part-6/_static/image1.png)

Такой подход упрощает изменение макета и пользовательского интерфейса приложения, так как вы можете изменить привязки, не переписывая код. Например, можно отобразить список элементов в виде `<ul>`, а затем изменить его позже на таблицу.

## <a name="add-the-knockout-library"></a>Добавление библиотеки маскирования

В Visual Studio в меню **Сервис** выберите **Диспетчер пакетов NuGet**. Затем щелкните **Консоль диспетчера пакетов**. В окне "Консоль диспетчера пакетов" введите следующую команду:

[!code-console[Main](part-6/samples/sample1.cmd)]

Эта команда добавляет файлы маскирования в папку Scripts.

## <a name="create-the-view-model"></a>Создание модели представления

Добавьте в папку Scripts файл JavaScript с именем App. js. (В обозреватель решений щелкните правой кнопкой мыши папку скрипты, выберите **Добавить**, а затем выберите пункт **файл JavaScript**.) Вставьте следующий код:

[!code-javascript[Main](part-6/samples/sample2.js)]

В маскировании класс `observable` обеспечивает привязку данных. Когда содержимое наблюдаемого изменения, наблюдаемое изменение уведомляет все элементы управления, привязанные к данным, поэтому они могут обновлять себя. (Класс `observableArray` — это версия *наблюдаемого*объекта.) Для начала наша модель представления имеет два observable:

- `books` содержит список книг.
- `error` содержит сообщение об ошибке при сбое вызова AJAX.

Метод `getAllBooks` делает вызов AJAX для получения списка книг. Затем он помещает результат в массив `books`.

Метод `ko.applyBindings` является частью библиотеки маскирования. Он принимает модель представления в качестве параметра и настраивает привязку данных.

## <a name="add-a-script-bundle"></a>Добавление пакета сценариев

Объединение — это функция в ASP.NET 4,5, которая упрощает объединение нескольких файлов в один файл. Объединение сокращает количество запросов к серверу, что может повысить время загрузки страницы.

Откройте файл App\_Start/Бундлеконфиг. cs. Добавьте следующий код в метод Регистербундлес.

[!code-csharp[Main](part-6/samples/sample3.cs)]

> [!div class="step-by-step"]
> [Назад](part-5.md)
> [Вперед](part-7.md)
