---
uid: web-api/overview/data/using-web-api-with-entity-framework/part-6
title: Создание клиента JavaScript | Документация Майкрософт
author: MikeWasson
description: ''
ms.author: riande
ms.date: 06/16/2014
ms.assetid: 20360326-b123-4b1e-abae-1d350edf4ce4
msc.legacyurl: /web-api/overview/data/using-web-api-with-entity-framework/part-6
msc.type: authoredcontent
ms.openlocfilehash: b5cb4d93c30ef80a48da48ffc51dd51411b1d0d0
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57057531"
---
<a name="create-the-javascript-client"></a>Создание клиента JavaScript
====================
по [Майк Уоссон](https://github.com/MikeWasson)

[Скачать завершенный проект](https://github.com/MikeWasson/BookService)

В этом разделе вы создадите клиент для приложения, с помощью HTML, JavaScript и [Knockout.js](http://knockoutjs.com/) библиотеки. Мы создадим клиентское приложение на этапах:

- Отображение списка книг.
- Отображение данных книги.
- Добавление новой книги.

Библиотеки Knockout используется шаблон Model-View-ViewModel (MVVM):

- **Модели** — это представление на сервере данные в предметной области бизнеса (в нашем случае книг и авторов).
- **Представление** является уровень представления (HTML).
- **Модель представления** — объект JavaScript, которая содержит модели. Модель представления — это абстракция код пользовательского интерфейса. Он не имеет сведений о представление HTML. Вместо этого он представляет абстрактные функции, представления, такие как &quot;список документации&quot;.

Представление данных привязан к модели представления. Обновления для модели представления автоматически отражаются в представлении. Модель представления также получает события из представления, например при нажатии кнопки.

![](part-6/_static/image1.png)

Этот подход упрощает изменение макета и внешнего пользовательского интерфейса приложения, так как привязки, можно изменить без необходимости переписывать код. Например, можно показать список элементов, как `<ul>`, затем изменить его позже в таблицу.

## <a name="add-the-knockout-library"></a>Добавление библиотеки Knockout

В Visual Studio из **средства** меню, выберите **диспетчер пакетов NuGet**. Затем выберите **консоль диспетчера пакетов**. В окне консоли диспетчера пакетов введите следующую команду:

[!code-console[Main](part-6/samples/sample1.cmd)]

Эта команда добавляет Knockout файлы в папку Scripts.

## <a name="create-the-view-model"></a>Создание модели представления

Добавьте файл JavaScript с именем app.js в папку Scripts. (В обозревателе решений щелкните правой кнопкой мыши папку «скрипты», выберите **добавить**, а затем выберите **файл JavaScript**.) Вставьте следующий код:

[!code-javascript[Main](part-6/samples/sample2.js)]

В Knockout `observable` класс обеспечивает привязку данных. При изменении содержимого наблюдаемый объект, наблюдаемый объект сообщает все элементы управления с привязкой к данным, чтобы они могли обновлять себя. ( `observableArray` Класс — это массив версия *наблюдаемый объект*.) Для начала наша модель представления имеет два наблюдаемых объекта:

- `books` содержит список книг.
- `error` содержит сообщение об ошибке при сбое вызова AJAX.

`getAllBooks` Метод выполняет вызов AJAX, чтобы получить список книг. Затем он помещает результат в `books` массива.

`ko.applyBindings` Метод является частью библиотеки Knockout. Он принимает модель представления как параметр и устанавливает привязку данных.

## <a name="add-a-script-bundle"></a>Добавьте пакет скриптов

Объединение — это функция в ASP.NET 4.5, который упрощает процесс соединить или объединить несколько файлов в один файл. Объединение уменьшает количество запросов к серверу, что повышает время загрузки страницы.

Откройте файл приложения\_Start/BundleConfig.cs. Добавьте следующий код в метод RegisterBundles.

[!code-csharp[Main](part-6/samples/sample3.cs)]

> [!div class="step-by-step"]
> [Назад](part-5.md)
> [Вперед](part-7.md)
