---
uid: single-page-application/overview/templates/backbonejs-template
title: Шаблон backbone | Документация Майкрософт
author: madskristensen
description: Шаблон Backbone.js SPA
ms.author: riande
ms.date: 04/04/2013
ms.assetid: 00aca413-f067-4108-9bd1-cf21e64a2646
msc.legacyurl: /single-page-application/overview/templates/backbonejs-template
msc.type: authoredcontent
ms.openlocfilehash: e5c98b7a9678f8251eccce05344c2014a769fc3b
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65113347"
---
# <a name="backbone-template"></a>Шаблон Backbone

по [Мэдсом Kristensen](https://github.com/madskristensen)

> Шаблон Backbone SPA было написано с Кази Манзур Рашид
> 
> [Загрузить шаблон Backbone.js SPA](https://go.microsoft.com/fwlink/?LinkId=293631)

Для начала работы, быстрого создания интерактивных клиентские веб-приложений с помощью предназначен данный шаблон Backbone.js SPA [Backbone.js.](http://backbonejs.org/)

Шаблон предоставляет начальной основу для разработки приложения Backbone.js в ASP.NET MVC. Изначально он предоставляет функции базового пользовательского входа в систему, включая сброс пароля регистрации, входа в систему пользователя и подтверждение пользователя с помощью шаблонов базовый адрес электронной почты.

Требования:

- [Обновление ASP.NET и веб-инструментами 2012.2](https://go.microsoft.com/fwlink/?LinkId=282650)

## <a name="create-a-backbone-template-project"></a>Создание проекта шаблона магистрали

Скачайте и установите шаблон, нажав кнопку "скачать" выше. Шаблон упаковывается в формате Visual Studio Extension (VSIX). Может потребоваться перезапустить Visual Studio.

В **шаблоны** области выберите **установленные шаблоны** и разверните **Visual C#** узла. В разделе **Visual C#** выберите **Web**. В списке шаблонов проектов выберите **веб-приложение ASP.NET MVC 4**. Имя проекта и нажмите кнопку **ОК**.

![](backbonejs-template/_static/image1.png)

В **новый проект** мастера можно выбрать проект SPA Backbone.js.

![](backbonejs-template/_static/image2.png)

Нажмите клавиши Ctrl-F5, чтобы построить и запустить приложение без отладки, или нажмите клавишу F5, чтобы запустить программу с отладкой.

![](backbonejs-template/_static/image3.png)

Нажав кнопку «Моя учетная запись» можно открыть страницу входа:

![](backbonejs-template/_static/image4.png)

## <a name="walkthrough-client-code"></a>Пошаговое руководство. Код клиента

Давайте начинается со стороны клиента. Сценарии приложений клиента находятся в папке ~/Scripts/application. Приложение создается на языке [TypeScript](http://www.typescriptlang.org/) (TS-файлы) которые компилируются в код JavaScript (JS-файлов).

**Приложение**

`Application` определяется в application.ts. Этот объект Инициализирует приложение и выступает в качестве корневого пространства имен. Это обеспечивает сведения о конфигурации и состояния, который совместно используется приложение, например является ли пользователь выполнил вход.

`application.start` Метод создает модальных представлений и присоединяет обработчики событий для события уровня приложения, например вход пользователя. Далее создается по умолчанию маршрутизатором и проверяет, задано ли любой URL-адрес на стороне клиента. Если нет, он перенаправляет на URL-адрес по умолчанию (#! /).

**События**

События всегда важны, при разработке слабо связанными компонентами. Приложения часто выполняют несколько операций в ответ на действия пользователя. Магистраль предоставляет встроенные события с компонентами, такими как модель, коллекции и представления. Вместо создания зависимостей между среди этих компонентов, в шаблоне используется модель «pub/sub»: `events` Объект, определенный в events.ts, выступает в роли концентратора событий для публикации и подписки на события приложения. `events` Объекта является единственным. Ниже показано, как подписаться на событие и последующего инициирования события:

[!code-csharp[Main](backbonejs-template/samples/sample1.cs)]

**Маршрутизатор**

В Backbone.js маршрутизатор предоставляет методы для маршрутизации страниц на стороне клиента и соединить их действия и события. Шаблон определяет одним маршрутизатором, в router.ts. Маршрутизатор создает activable представления и поддерживает состояние, при переключении представлений. (В следующем разделе описываются представления activable.) Изначально проект имеет два представления фиктивный, Home и About. Он также содержит представления не найдено, которая отображается в том случае, если маршрут не известен.

**Представления**

Представления определяются в ~/Scripts/application и представлений. Существует два вида представления activable и представления модальное диалоговое окно. Activable представления вызываются маршрутизатором. При отображении activable представление всех остальных activable представлений становятся неактивными. Создание представления "activable", расширение представления с `Activable` объекта:

[!code-javascript[Main](backbonejs-template/samples/sample2.js)]

Расширение с помощью `Activable` добавляет два новых метода в представление `activate` и `deactivate`. Маршрутизатор вызывает эти методы для активации и deactive представления.

Модальные представления реализуются как [Twitter Bootstrap](http://twitter.github.com/bootstrap/) создания дочерних модальных диалогов. `Membership` И `Profile` представления являются модальным. Модели представления может быть инициировано любые события приложения. Например, в `Navigation` показано представление, щелкнув ссылку «Моя учетная запись», либо `Membership` представления или `Profile` представление, в зависимости от того, вошел ли пользователь. `Navigation` Вкладывает щелкните обработчики событий, чтобы все дочерние элементы, имеющие `data-command` атрибута. Вот HTML-разметка:

[!code-html[Main](backbonejs-template/samples/sample3.html)]

Ниже приведен код в navigation.ts для подключения событий:

[!code-csharp[Main](backbonejs-template/samples/sample4.cs)]

**Модели**

Модели определяются в ~/Scripts/application/моделей. Все модели имеют три основных действия: атрибуты по умолчанию, правила проверки и конечную точку на стороне сервера. Вот типичный пример:

[!code-javascript[Main](backbonejs-template/samples/sample5.js)]

**Подключаемые модули**

Папка ~/Scripts/application/lib содержит несколько подключаемых модулей под рукой jQuery. В файле form.ts определяется подключаемый модуль для работы с данными формы. Часто необходимо сериализовать или десериализовать данные формы и какие-либо ошибки проверки модели. Подключаемый модуль form.ts содержит методы, такие как `serializeFields`, `deserializeFields`, и `showFieldErrors`. В следующем примере показано, как сериализовать форму в модель.

[!code-javascript[Main](backbonejs-template/samples/sample6.js)]

Подключаемый модуль flashbar.ts предоставляет различные виды сообщений обратной связи для пользователя. Методы являются `$.showSuccessbar`, `$.showErrorbar` и `$.showInfobar`. На самом деле его используется для отображения хорошо анимированных сообщения оповещения Twitter Bootstrap.

Подключаемый модуль confirm.ts заменяет браузера подтверждения, несмотря на то, что API немного отличаются:

[!code-javascript[Main](backbonejs-template/samples/sample7.js)]

## <a name="walkthrough-server-code"></a>Пошаговое руководство. Серверный код

Теперь давайте взглянем на стороне сервера.

**Контроллеры**

В одностраничное приложение сервер играет лишь малую роль в пользовательском интерфейсе. Как правило сервер отображает начальную страницу и затем отправляет и получает данные JSON.

Этот шаблон содержит два контроллера MVC: `HomeController` отображает начальную страницу, и `SupportsController` используется для подтверждения новых учетных записей пользователей и сбрасывать пароли. Все остальные контроллеры в шаблоне являются контроллерами веб-API ASP.NET, отправляющие и получающие данные JSON. По умолчанию контроллеры используют новый `WebSecurity` классом для выполнения задач, связанных с пользователем. Тем не менее они также имеют дополнительные конструкторы, которые позволяют передавать в делегаты для выполнения следующих задач. Это упрощает тестирование и позволяет заменить `WebSecurity` по-другому, используя контейнер IoC. Пример:

[!code-csharp[Main](backbonejs-template/samples/sample8.cs)]

## <a name="views"></a>Представления

Представления предназначены модульная структура: Каждый раздел страницы имеет свой собственный выделенный представление. В одностраничное приложение довольно часто для включения, у которых нет любой соответствующий контроллер представления. Представление можно включить путем вызова `@Html.Partial('myView')`, но это становится несколько занудным. Чтобы облегчить эту задачу, шаблон определяет вспомогательный метод, `IncludeClientViews`, который выполняет визуализацию всех представлений в указанной папке:

[!code-cshtml[Main](backbonejs-template/samples/sample9.cshtml)]

Если имя папки не указан, по умолчанию папка называется «ClientViews». Если представление вашего клиента также использует разделяемые представления, имя частичного представления с символа подчеркивания (например, `_SignUp`). `IncludeClientViews` Метод исключает все представления, имена которых начинаются с символа подчеркивания. Чтобы включить частичное представление в представление клиента, вызовите `Html.ClientView('SignUp')` вместо `Html.Partial('_SignUp')`.

**Отправка сообщения электронной почты**

Для отправки электронной почты, в шаблоне используется [почтовой](http://aboutcode.net/postal). Тем не менее, абстрагируется от остальной части кода с помощью почтовой `IMailer` интерфейс, поэтому вы можете легко заменить с другой реализацией. Шаблоны сообщений электронной почты, находятся в папке представления или сообщений электронной почты. Адрес электронной почты отправителя указан в файле web.config в `sender.email` ключ **appSettings** раздел. Кроме того, когда `debug="true"` в файле web.config, приложение не требует подтверждения электронной почты пользователя, для ускорения разработки.

## <a name="github"></a>GitHub

Можно также найти шаблон Backbone.js SPA на [GitHub](https://github.com/kazimanzurrashid/AspNetMvcBackboneJsSpa).
