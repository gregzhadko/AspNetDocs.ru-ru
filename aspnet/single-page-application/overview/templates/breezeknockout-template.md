---
uid: single-page-application/overview/templates/breezeknockout-template
title: Шаблон простого или маскирования | Документация Майкрософт
author: madskristensen
description: Шаблон одностраничного приложения с простым или маскированием
ms.author: riande
ms.date: 01/30/2013
ms.assetid: 3bd94827-3c59-448f-abc3-36e6df4858db
msc.legacyurl: /single-page-application/overview/templates/breezeknockout-template
msc.type: authoredcontent
ms.openlocfilehash: 5bb9ee8f758a25afa6baf3ccbaf7d5864754c7df
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78449748"
---
# <a name="breezeknockout-template"></a>Шаблон Breeze/Knockout

по [Мэдсом Кристенсеном](https://github.com/madskristensen)

> Шаблон MVC с непростой или маскированием был написан в результате перезвонка
> 
> [Скачайте шаблон MVC с непростой или маскированием](https://go.microsoft.com/fwlink/?LinkId=282649)

Вы слышали о «одностраничном приложении» (SPA) и подумали, что это такое. Хотя вы можете прочесть сведения о нем, вы, скорее, будете работать самостоятельно. Но у кого есть время загрузить пример? Если у вас есть Visual Studio, вы получите пример, который будет работать менее чем за 60 секунд с помощью шаблона ASP.NET MVC 4 "простой/маскированный одностраничный приложение".

![](http://www.breezejs.com/sites/all/images/spa-template/ZephyrRunning.png)

## <a name="what-is-the-breezeknockout-spa-template"></a>Что такое шаблон SPA с самым простостью и маскированием?

В большинстве шаблонов проектов создается схема приложения. Вы помещаете себя на эти кости, добавляя код и в конечном итоге доставляющие рабочее приложение. Шаблон SPA/unвыколачивание отличается. Он создает пример приложения для изучения. В нем демонстрируется разработка приложения с SPA и многие методы создания SPA.

Шаблон с непростостью и маскированием — это разновидность [шаблона KNOCKOUTJS Spa](../introduction/knockoutjs-template.md) , включенного в обновление ASP.NET and Web Tools 2012,2. Шаблон с самым раннее SPA создает приложение с тем же интерфейсом пользователя, но имеет другую реализацию, используя для управления данными очень просто.

Шаблон KnockoutJS SPA делает запросы на обслуживание с необработанными данными jQuery AJAX, которые подходят для простого приложения. Но более сложные приложения имеют более ресурсоемкие требования к управлению данными. Например, большинство приложений:

- Запросите и повторно запросите сервер во время сеанса расширенного пользователя.
- Добавление фильтров запросов, сортировки и разбиения на страницы.
- Совместное использование одних и тех же данных на нескольких экранах.
- Накапливать изменения во многих объектах, а затем сохранять их как единую транзакцию.
- Проверьте изменения на клиенте, чтобы пользователь мог исправить ошибки перед фиксацией изменений в базе данных.

Библиотека Бризежс обрабатывает эти дела, позволяя вам бесплатно разрабатывать логику приложения и взаимодействие с пользователем.

Просто [ **— это**](http://www.breezejs.com/?utm_source=ms-spa) библиотека с открытым исходным кодом для создания приложений с богатыми данными в JavaScript и HTML, типы приложений, которые в прошлом были доставлены как автономные приложения для настольных систем.

Шаблон упрощения и маскирования позволяет сделать первый важный шаг к более надежной инфраструктуре управления данными. В результате создается пример приложения Todo, которое идентично шаблону KnockoutJS SPA. На внутренней стороне он заменяет уровень данных AJAX с помощью простого, поэтому можно сравнить два подхода параллельно. Разумеется, это очень просто противокасается возможного простого приложения. Но вы увидите, насколько просто работает и насколько мало требуется для выполнения этого перехода.

Приступим.

## <a name="create-a-breezeknockout-template-project"></a>Создание проекта шаблона с непростой или маскированием

Скачайте и установите шаблон, нажав кнопку Загрузить выше. Шаблон упаковывается как файл расширения Visual Studio (VSIX). Возможно, потребуется перезапустить Visual Studio.

В области **шаблоны** выберите **Установленные шаблоны** и разверните узел  **C# визуального** элемента. В **разделе C#визуальный** элемент выберите **веб**. В списке шаблонов проектов выберите **ASP.NET MVC 4 веб-приложение**. Задайте для проекта имя и щелкните **ОК**.

В мастере **создания проектов** выберите команду просто **маскировать Spa**.

![](http://www.breezejs.com/sites/all/images/spa-template/SelectBreezeKOSpaTemplate.png)

Нажмите клавиши CTRL + F5, чтобы создать и запустить приложение без отладки, или нажмите клавишу F5 для запуска с отладкой.

![](http://www.breezejs.com/sites/all/images/spa-template/ZephyrRunning.png)

При первом запуске приложения отображается экран входа в систему. Щелкните ссылку "регистрация" и новую страницу глидес в представлении, где можно ввести имя пользователя и пароль. (Страницы входа и регистрации создаются с помощью ASP.NET MVC.) При отправке регистрационной формы сервер создает TodoList с двумя элементами для вашей учетной записи. После этого они будут представлены желтым примечанием.

![](http://www.breezejs.com/sites/all/images/spa-template/TodoList.png)

Теперь вы попадете на землю. Все отображаемые и работающие задачи, а также управление ими осуществляется на стороне клиента с помощью маскирования и упрощения. Просмотр приложения в качестве пользователя... но с глазом разработчика. Используйте средства разработчика в браузере для записи сетевого трафика. (В Internet Explorer: нажмите клавишу F12, выберите вкладку **сеть** и щелкните **начать запись**.) Теперь попробуйте выполнить следующие действия.

- Добавьте новый элемент TODO.
- Щелкните метку и измените заголовок элемента TODO.
- Установите флажок, чтобы пометить элемент как выполненный. Обратите внимание, что поле TextBox отключено, поэтому заголовок больше не редактируется.
- Щелкните значок "x" справа от метки. Элемент исчезает и удаляется из базы данных.
- Выберите другой элемент и очистите его заголовок. Вы получите ошибку проверки того, что заголовок является обязательным. После короткой паузы восстанавливается предыдущий заголовок.
- Введите смехотворно длинное название. Вы получите другую ошибку проверки того, что заголовок слишком длинный.
- Нажмите кнопку Add Todo List (добавить список дел). Слева от предыдущего списка появится новый список.
- Поиграйте с названием TodoList, активируя необходимые проверки и длину.
- Щелкните текстовое поле Title (заголовок), чтобы очистить сообщение об ошибке.
- Щелкните x в круге в правом верхнем углу, чтобы удалить TodoList и его Todos.

Логика проверки выполняется на стороне клиента. Атрибуты проверки в классах серверной модели распространяются на клиент и выполняются автоматически перед тем, как клиент свяжется с сервером.

Проверьте сетевой трафик. Обратите внимание, что при простом обнаружении ошибки не было вызовов к серверу. Каждое допустимое изменение привело к появлению запроса POST к "/АПИ/Тодо/савечанжес". Просто объединяет изменения и отправляет их вместе как один запрос к методу `SaveChanges` контроллера веб-API. Это отличается от шаблона KnockoutJS SPA, который делает запросы размещения, публикации и удаления для каждого элемента по отдельности.

## <a name="peek-inside"></a>Просмотр внутри

Это приложение имеет клиентскую часть и серверную часть. Стек на стороне клиента состоит из небольшого HTML-кода и сочетания модулей JavaScript приложения (в папке App) и сторонних библиотек JavaScript (в папке Scripts).

![](http://www.breezejs.com/sites/all/images/spa-template/ClientArchitecture.png)

Если вы проверили шаблон KnockoutJS SPA, это должно показаться очень знакомым. Сосредоточьтесь на синем прямоугольнике. Архитектура пользовательского интерфейса — модель-представление-ViewModel (MVVM), в которой мини-приложения HTML представления четко отделены от вспомогательного кода представления в модели представления. Система привязки данных (в этом случае — маскирование) координирует представление и модель представления, чтобы каждый мог выполнять свою работу без ведома других знаний.

Модель инкапсулирует данные TODO. Сущности в модели создаются с помощью неограниченных наблюдаемых свойств, поэтому их можно напрямую привязать к мини-приложениям в представлении. Модель представления запрашивает у контекста данных запрос на получение и сохранение сущностей модели. Контекст данных делегирует большую часть работы для простого выполнения.

Стек на стороне сервера состоит из кода разработчика и трех принципов библиотек .NET: веб-API, Entity Framework и Breeze.NET:

![](http://www.breezejs.com/sites/all/images/spa-template/ServerArchitecture.png)

Базовая архитектура аналогична шаблону KnockoutJS SPA. Однако реализация гораздо проще: DTO были удалены, а большая часть сведений о Entity Framework были делегированы Breeze.NET.

## <a name="next-steps"></a>Next Steps

Мы рекомендуем изучить код, посвященный [подробному рассказу](http://www.breezejs.com/spa-template?utm_source=ms-spa) о клиентах и серверных стеках на веб-сайте с самым широким объемом.

Вы можете попробовать воспроизвести запрос на стороне клиента с помощью простого запроса; Добавьте некоторые фильтры и сортировки. Вы можете добавить дополнительные свойства модели и дополнительные сущности, чтобы лучше понять сквозную разработку с SPA. Если вы уверены в проектировании, вы можете удалить функции TODO и заменить их собственными.

Вскоре вы будете готовы к следующему значительному шагу: Добавление экранов на стороне клиента и перемещение между ними. Вы оставляете этот шаблон защищенного ключа и перейдете к более полному стеку SPA, например, в [Папа (горячего Товел](https://github.com/johnpapa/HotTowel#readme "Горячий Товел"), который добавляет Durandal к простому и маскированному набору.
