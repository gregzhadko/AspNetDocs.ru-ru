---
uid: identity/overview/extensibility/overview-of-custom-storage-providers-for-aspnet-identity
title: Общие сведения о пользовательских поставщиков хранилищ для ASP.NET Identity | Документация Майкрософт
author: Rick-Anderson
description: ASP.NET Identity является расширяемой системой, что дает возможность создать собственный поставщик хранилища и подключить его к приложению без переработки приложения...
ms.author: riande
ms.date: 10/13/2014
ms.assetid: 681a9204-462e-4260-9a0b-19f0644d6ad7
msc.legacyurl: /identity/overview/extensibility/overview-of-custom-storage-providers-for-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: e7461098f93bf64d6ff0d0e4ecdb64338f96be8b
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57064061"
---
<a name="overview-of-custom-storage-providers-for-aspnet-identity"></a><span data-ttu-id="bc93f-103">Обзор пользовательских поставщиков хранилищ для ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="bc93f-103">Overview of Custom Storage Providers for ASP.NET Identity</span></span>
====================
<span data-ttu-id="bc93f-104">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="bc93f-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="bc93f-105">ASP.NET Identity — это расширяемая система, что дает возможность создать собственный поставщик хранилища и подключить его к приложению без переработки приложения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-105">ASP.NET Identity is an extensible system which enables you to create your own storage provider and plug it into your application without re-working the application.</span></span> <span data-ttu-id="bc93f-106">В этом разделе описывается создание поставщика настраиваемого хранилища для ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="bc93f-106">This topic describes how to create a customized storage provider for ASP.NET Identity.</span></span> <span data-ttu-id="bc93f-107">Он содержит важные основные понятия для создания собственного поставщика хранилища, но это не пошаговое руководство по реализации поставщика пользовательского хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-107">It covers the important concepts for creating your own storage provider, but it is not step-by-step walkthrough of implementing a custom storage provider.</span></span>
> 
> <span data-ttu-id="bc93f-108">Пример реализации поставщика пользовательского хранилища, см. в разделе [реализации настраиваемого поставщика хранилища удостоверений ASP.NET MySQL](implementing-a-custom-mysql-aspnet-identity-storage-provider.md).</span><span class="sxs-lookup"><span data-stu-id="bc93f-108">For an example of implementing a custom storage provider, see [Implementing a Custom MySQL ASP.NET Identity Storage Provider](implementing-a-custom-mysql-aspnet-identity-storage-provider.md).</span></span>
> 
> <span data-ttu-id="bc93f-109">Этот раздел был обновлен для удостоверения ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="bc93f-109">This topic was updated for ASP.NET Identity 2.0.</span></span>
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="bc93f-110">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="bc93f-110">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="bc93f-111">Visual Studio 2013 с обновлением 2</span><span class="sxs-lookup"><span data-stu-id="bc93f-111">Visual Studio 2013 with Update 2</span></span>
> - <span data-ttu-id="bc93f-112">ASP.NET Identity 2</span><span class="sxs-lookup"><span data-stu-id="bc93f-112">ASP.NET Identity 2</span></span>


## <a name="introduction"></a><span data-ttu-id="bc93f-113">Вступление</span><span class="sxs-lookup"><span data-stu-id="bc93f-113">Introduction</span></span>

<span data-ttu-id="bc93f-114">По умолчанию системы удостоверений ASP.NET хранит сведения о пользователе в базе данных SQL Server и использует Entity Framework Code First для создания базы данных.</span><span class="sxs-lookup"><span data-stu-id="bc93f-114">By default, the ASP.NET Identity system stores user information in a SQL Server database, and uses Entity Framework Code First to create the database.</span></span> <span data-ttu-id="bc93f-115">Для многих приложений этот способ работает хорошо.</span><span class="sxs-lookup"><span data-stu-id="bc93f-115">For many applications, this approach works well.</span></span> <span data-ttu-id="bc93f-116">Тем не менее вы можете использовать другой тип механизма сохраняемости, например хранилище таблиц Azure, или у вас уже таблиц базы данных со структурой, сильно отличается от реализации по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="bc93f-116">However, you may prefer to use a different type of persistence mechanism, such as Azure Table Storage, or you may already have database tables with a very different structure than the default implementation.</span></span> <span data-ttu-id="bc93f-117">В любом случае можно написать настраиваемый поставщик для вашего механизма хранения и подключить этот поставщик в приложение.</span><span class="sxs-lookup"><span data-stu-id="bc93f-117">In either case, you can write a customized provider for your storage mechanism and plug that provider into your application.</span></span>

<span data-ttu-id="bc93f-118">Удостоверение ASP.NET включается по умолчанию во многих из шаблонов Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="bc93f-118">ASP.NET Identity is included by default in many of the Visual Studio 2013 templates.</span></span> <span data-ttu-id="bc93f-119">Вы можете получать обновления в ASP.NET Identity через [пакета EntityFramework NuGet удостоверений Microsoft AspNet](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/).</span><span class="sxs-lookup"><span data-stu-id="bc93f-119">You can get updates to ASP.NET Identity through [Microsoft AspNet Identity EntityFramework NuGet package](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/).</span></span>

<span data-ttu-id="bc93f-120">Этот раздел включает следующие подразделы:</span><span class="sxs-lookup"><span data-stu-id="bc93f-120">This topic includes the following sections:</span></span>

- [<span data-ttu-id="bc93f-121">Общие сведения об архитектуре</span><span class="sxs-lookup"><span data-stu-id="bc93f-121">Understand the architecture</span></span>](#architecture)
- [<span data-ttu-id="bc93f-122">Интерпретация данных, которые хранятся</span><span class="sxs-lookup"><span data-stu-id="bc93f-122">Understand the data that is stored</span></span>](#data)
- [<span data-ttu-id="bc93f-123">Создание уровня доступа к данным</span><span class="sxs-lookup"><span data-stu-id="bc93f-123">Create the data access layer</span></span>](#dal)
- [<span data-ttu-id="bc93f-124">Настроить класс пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-124">Customize the user class</span></span>](#user)
- [<span data-ttu-id="bc93f-125">Настроить хранилище пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-125">Customize the user store</span></span>](#userstore)
- [<span data-ttu-id="bc93f-126">Настроить класс ролей</span><span class="sxs-lookup"><span data-stu-id="bc93f-126">Customize the role class</span></span>](#role)
- [<span data-ttu-id="bc93f-127">Настройка хранилища ролей</span><span class="sxs-lookup"><span data-stu-id="bc93f-127">Customize the role store</span></span>](#rolestore)
- [<span data-ttu-id="bc93f-128">Перенастройка приложения для использования нового поставщика хранилища</span><span class="sxs-lookup"><span data-stu-id="bc93f-128">Reconfigure application to use new storage provider</span></span>](#reconfigure)
- [<span data-ttu-id="bc93f-129">Другие реализации пользовательских поставщиков хранилищ</span><span class="sxs-lookup"><span data-stu-id="bc93f-129">Other implementations of custom storage providers</span></span>](#other)

<a id="architecture"></a>
## <a name="understand-the-architecture"></a><span data-ttu-id="bc93f-130">Общие сведения об архитектуре</span><span class="sxs-lookup"><span data-stu-id="bc93f-130">Understand the architecture</span></span>

<span data-ttu-id="bc93f-131">ASP.NET Identity состоит из классов, называемых диспетчеры и хранилищами.</span><span class="sxs-lookup"><span data-stu-id="bc93f-131">ASP.NET Identity consists of classes called managers and stores.</span></span> <span data-ttu-id="bc93f-132">Высокоуровневые классы, которые разработчик приложения использует для выполнения операций, таких как создание пользователя в систему ASP.NET Identity используются такие диспетчеры.</span><span class="sxs-lookup"><span data-stu-id="bc93f-132">Managers are high-level classes which an application developer uses to perform operations, such as creating a user, in the ASP.NET Identity system.</span></span> <span data-ttu-id="bc93f-133">Магазины являются классы более низкого уровня, которые указывают, как сущности, такие как пользователи и роли, сохраняются.</span><span class="sxs-lookup"><span data-stu-id="bc93f-133">Stores are lower-level classes that specify how entities, such as users and roles, are persisted.</span></span> <span data-ttu-id="bc93f-134">Магазины являются тесно связан с механизмом сохраняемости, но диспетчеры отделены от хранилища, то есть вы можете заменить механизм сохранения без нарушения работы всего приложения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-134">Stores are closely coupled with the persistence mechanism, but managers are decoupled from stores which means you can replace the persistence mechanism without disrupting the entire application.</span></span>

<span data-ttu-id="bc93f-135">На следующей схеме показано, как веб-приложения взаимодействует с диспетчерами и хранилищ взаимодействовать с уровня доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="bc93f-135">The following diagram shows how your web application interacts with the managers, and stores interact with the data access layer.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image1.png)

<span data-ttu-id="bc93f-136">Для создания поставщика хранилища, настроенного для ASP.NET Identity, необходимо создать источник данных, уровень доступа к данным и хранилища классы, которые взаимодействуют с этот уровень доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="bc93f-136">To create a customized storage provider for ASP.NET Identity, you have to create the data source, the data access layer, and the store classes that interact with this data access layer.</span></span> <span data-ttu-id="bc93f-137">Вы можете продолжать, использовать один и тот же диспетчер API-интерфейсы для выполнения операций с данными пользователя, но теперь, когда данные сохраняются в другой системе.</span><span class="sxs-lookup"><span data-stu-id="bc93f-137">You can continue using the same manager APIs to perform data operations on the user but now that data is saved to a different storage system.</span></span>

<span data-ttu-id="bc93f-138">Не нужно настраивать классы manager, так как при создании нового экземпляра UserManager или RoleManager его указать тип класса пользователя и передайте экземпляр класса store в качестве аргумента.</span><span class="sxs-lookup"><span data-stu-id="bc93f-138">You do not need to customize the manager classes because when creating a new instance of UserManager or RoleManager you provide the type of the user class and pass an instance of the store class as an argument.</span></span> <span data-ttu-id="bc93f-139">Такой подход позволяет подключить свои настраиваемые классы в существующую структуру.</span><span class="sxs-lookup"><span data-stu-id="bc93f-139">This approach enables you to plug your customized classes into the existing structure.</span></span> <span data-ttu-id="bc93f-140">Вы увидите, как создать экземпляр UserManager и RoleManager с классов настраиваемого хранилища в разделе [перенастроить приложение для использования нового поставщика хранилища](#reconfigure).</span><span class="sxs-lookup"><span data-stu-id="bc93f-140">You will see how to instantiate UserManager and RoleManager with your customized store classes in the section [Reconfigure application to use new storage provider](#reconfigure).</span></span>

<a id="data"></a>
## <a name="understand-the-data-that-is-stored"></a><span data-ttu-id="bc93f-141">Интерпретация данных, которые хранятся</span><span class="sxs-lookup"><span data-stu-id="bc93f-141">Understand the data that is stored</span></span>

<span data-ttu-id="bc93f-142">Для реализации поставщика пользовательского хранилища, необходимо понять типы данных, используемых в ASP.NET Identity и решить, какие из функций, необходимые для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-142">To implement a custom storage provider, you must understand the types of data used with ASP.NET Identity, and decide which features are relevant to your application.</span></span>

| <span data-ttu-id="bc93f-143">Данные</span><span class="sxs-lookup"><span data-stu-id="bc93f-143">Data</span></span> | <span data-ttu-id="bc93f-144">Описание:</span><span class="sxs-lookup"><span data-stu-id="bc93f-144">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bc93f-145">Users</span><span class="sxs-lookup"><span data-stu-id="bc93f-145">Users</span></span> | <span data-ttu-id="bc93f-146">Зарегистрированным пользователям вашего веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="bc93f-146">Registered users of your web site.</span></span> <span data-ttu-id="bc93f-147">Включает в себя имя пользователя идентификатор и пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-147">Includes the user Id and user name.</span></span> <span data-ttu-id="bc93f-148">Может включать хэшированный пароль, если пользователи входят с помощью учетных данных, относящихся к веб-узла (а не с помощью учетных данных с внешних сайтов, таких как Facebook) и метка безопасности, чтобы указать, изменилось ли что-либо учетные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-148">Might include a hashed password if users log in with credentials that are specific to your site (rather than using credentials from an external site like Facebook), and security stamp to indicate whether anything has changed in the user credentials.</span></span> <span data-ttu-id="bc93f-149">Может также включать адрес электронной почты, номер телефона, отвечает за включение двухфакторной проверки подлинности, текущее количество неудачных попыток входа, и является ли учетная запись заблокирована.</span><span class="sxs-lookup"><span data-stu-id="bc93f-149">Might also include email address, phone number, whether two factor authentication is enabled, the current number of failed logins, and whether an account has been locked.</span></span> |
| <span data-ttu-id="bc93f-150">Утверждения пользователей</span><span class="sxs-lookup"><span data-stu-id="bc93f-150">User Claims</span></span> | <span data-ttu-id="bc93f-151">Набор инструкций (или утверждения) о пользователе, которые представляют удостоверение пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-151">A set of statements (or claims) about the user that represent the user's identity.</span></span> <span data-ttu-id="bc93f-152">Можно включить большего выражения удостоверения пользователя, чем можно достичь с помощью ролей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-152">Can enable greater expression of the user's identity than can be achieved through roles.</span></span> |
| <span data-ttu-id="bc93f-153">Имена входа</span><span class="sxs-lookup"><span data-stu-id="bc93f-153">User Logins</span></span> | <span data-ttu-id="bc93f-154">Сведения о поставщике внешней проверки подлинности (например, Facebook) для использования при входе пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-154">Information about the external authentication provider (like Facebook) to use when logging in a user.</span></span> |
| <span data-ttu-id="bc93f-155">Роли</span><span class="sxs-lookup"><span data-stu-id="bc93f-155">Roles</span></span> | <span data-ttu-id="bc93f-156">Группы авторизации для веб-узла.</span><span class="sxs-lookup"><span data-stu-id="bc93f-156">Authorization groups for your site.</span></span> <span data-ttu-id="bc93f-157">Включает в себя имя роли идентификатора и роли (например, «Администратор» или «Employee»).</span><span class="sxs-lookup"><span data-stu-id="bc93f-157">Includes the role Id and role name (like "Admin" or "Employee").</span></span> |

<a id="dal"></a>
## <a name="create-the-data-access-layer"></a><span data-ttu-id="bc93f-158">Создание уровня доступа к данным</span><span class="sxs-lookup"><span data-stu-id="bc93f-158">Create the data access layer</span></span>

<span data-ttu-id="bc93f-159">В этом разделе предполагается, что вы знакомы с механизм сохраняемости, который вы собираетесь использовать и как создать сущности для этого механизма.</span><span class="sxs-lookup"><span data-stu-id="bc93f-159">This topic assumes you are familiar with the persistence mechanism that you are going to use and how to create entities for that mechanism.</span></span> <span data-ttu-id="bc93f-160">В этом разделе представлены сведения о том, как создать репозитории или классы доступа к данным; Вместо этого он предоставляет ряд предложений о проектные решения, что необходимо сделать при работе с ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="bc93f-160">This topic does not provide details about how to create the repositories or data access classes; instead, it provides some suggestions about the design decisions you need to make when working with ASP.NET Identity.</span></span>

<span data-ttu-id="bc93f-161">У вас есть много свободу при разработке в репозитории для настраиваемый поставщик хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-161">You have a lot of freedom when designing the repositories for a customized store provider.</span></span> <span data-ttu-id="bc93f-162">Необходимо только создавать репозитории для функций, которые предполагается использовать в приложении.</span><span class="sxs-lookup"><span data-stu-id="bc93f-162">You only need to create repositories for features that you intend to use in your application.</span></span> <span data-ttu-id="bc93f-163">Например если вы не используете ролей в приложении, вы не обязательно для создания хранилища для роли или пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-163">For example, if you are not using roles in your application, you do not need to create storage for roles or user roles.</span></span> <span data-ttu-id="bc93f-164">Технологии и инфраструктура может потребоваться структуру, которая существенно отличается от реализации по умолчанию ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="bc93f-164">Your technology and existing infrastructure may require a structure that is very different from the default implementation of ASP.NET Identity.</span></span> <span data-ttu-id="bc93f-165">В уровне доступа к данным необходимо предоставить логику для работы со структурой ваших репозиториев.</span><span class="sxs-lookup"><span data-stu-id="bc93f-165">In your data access layer, you provide the logic to work with the structure of your repositories.</span></span>

<span data-ttu-id="bc93f-166">Для реализации MySQL репозиториев данных для удостоверений ASP.NET 2.0, см. в разделе [MySQLIdentity.sql](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql).</span><span class="sxs-lookup"><span data-stu-id="bc93f-166">For a MySQL implemention of data repositories for ASP.NET Identity 2.0, see [MySQLIdentity.sql](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql).</span></span>

<span data-ttu-id="bc93f-167">В уровень доступа к данным необходимо предоставить логику для сохранения данных из удостоверения ASP.NET к источнику данных.</span><span class="sxs-lookup"><span data-stu-id="bc93f-167">In the data access layer, you provide the logic to save the data from ASP.NET Identity to your data source.</span></span> <span data-ttu-id="bc93f-168">Уровень доступа к данным для поставщика настраиваемого хранилища может включать следующие классы для хранения сведений о пользователях и роли.</span><span class="sxs-lookup"><span data-stu-id="bc93f-168">The data access layer for your customized storage provider might include the following classes to store user and role information.</span></span>

| <span data-ttu-id="bc93f-169">Класс</span><span class="sxs-lookup"><span data-stu-id="bc93f-169">Class</span></span> | <span data-ttu-id="bc93f-170">Описание</span><span class="sxs-lookup"><span data-stu-id="bc93f-170">Description</span></span> | <span data-ttu-id="bc93f-171">Пример</span><span class="sxs-lookup"><span data-stu-id="bc93f-171">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bc93f-172">Контекст</span><span class="sxs-lookup"><span data-stu-id="bc93f-172">Context</span></span> | <span data-ttu-id="bc93f-173">Инкапсулирует сведения для подключения к вашей механизм сохранения и выполнения запросов.</span><span class="sxs-lookup"><span data-stu-id="bc93f-173">Encapsulates the information to connect to your persistence mechanism and execute queries.</span></span> <span data-ttu-id="bc93f-174">Этот класс является центральным элементом слоя доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="bc93f-174">This class is central to your data access layer.</span></span> <span data-ttu-id="bc93f-175">Другие классы данных потребует экземпляр этого класса для выполнения своих операций.</span><span class="sxs-lookup"><span data-stu-id="bc93f-175">The other data classes will require an instance of this class to perform their operations.</span></span> <span data-ttu-id="bc93f-176">Также, будет инициализировать классы хранилища с экземпляром этого класса.</span><span class="sxs-lookup"><span data-stu-id="bc93f-176">You will also initialize your store classes with an instance of this class.</span></span> | [<span data-ttu-id="bc93f-177">MySQLDatabase</span><span class="sxs-lookup"><span data-stu-id="bc93f-177">MySQLDatabase</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/MySQLDatabase.cs) |
| <span data-ttu-id="bc93f-178">Хранилище пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-178">User Storage</span></span> | <span data-ttu-id="bc93f-179">Хранит и извлекает сведения о пользователе (например, хэш имени и пароля пользователя).</span><span class="sxs-lookup"><span data-stu-id="bc93f-179">Stores and retrieves user information (such as user name and password hash).</span></span> | [<span data-ttu-id="bc93f-180">UserTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="bc93f-180">UserTable (MySQL)</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserTable.cs) |
| <span data-ttu-id="bc93f-181">Роль хранилища</span><span class="sxs-lookup"><span data-stu-id="bc93f-181">Role Storage</span></span> | <span data-ttu-id="bc93f-182">Хранит и извлекает сведения о роли (например, имя роли).</span><span class="sxs-lookup"><span data-stu-id="bc93f-182">Stores and retrieves role information (such as the role name).</span></span> | [<span data-ttu-id="bc93f-183">RoleTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="bc93f-183">RoleTable (MySQL)</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleTable.cs) |
| <span data-ttu-id="bc93f-184">Хранилище объектов Userclaim</span><span class="sxs-lookup"><span data-stu-id="bc93f-184">UserClaims Storage</span></span> | <span data-ttu-id="bc93f-185">Сохраняет и извлекает информацию об утверждении пользователя (например, тип утверждения и значение).</span><span class="sxs-lookup"><span data-stu-id="bc93f-185">Stores and retrieves user claim information (such as the claim type and value).</span></span> | [<span data-ttu-id="bc93f-186">UserClaimsTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="bc93f-186">UserClaimsTable (MySQL)</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserClaimsTable.cs) |
| <span data-ttu-id="bc93f-187">Хранилище объектов userlogin</span><span class="sxs-lookup"><span data-stu-id="bc93f-187">UserLogins Storage</span></span> | <span data-ttu-id="bc93f-188">Хранит и извлекает данные для входа пользователя (например, внешний поставщик аутентификации).</span><span class="sxs-lookup"><span data-stu-id="bc93f-188">Stores and retrieves user login information (such as an external authentication provider).</span></span> | [<span data-ttu-id="bc93f-189">UserLoginsTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="bc93f-189">UserLoginsTable (MySQL)</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserLoginsTable.cs) |
| <span data-ttu-id="bc93f-190">Объем хранилища UserRole</span><span class="sxs-lookup"><span data-stu-id="bc93f-190">UserRole Storage</span></span> | <span data-ttu-id="bc93f-191">Хранит и извлекает какие роли, назначенные пользователю.</span><span class="sxs-lookup"><span data-stu-id="bc93f-191">Stores and retrieves which roles a user is assigned to.</span></span> | [<span data-ttu-id="bc93f-192">UserRoleTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="bc93f-192">UserRoleTable (MySQL)</span></span>](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserRoleTable.cs) |

<span data-ttu-id="bc93f-193">Опять же достаточно для реализации классов, которые планируется использовать в приложении.</span><span class="sxs-lookup"><span data-stu-id="bc93f-193">Again, you only need to implement the classes that you intend to use in your application.</span></span>

<span data-ttu-id="bc93f-194">В классы доступа к данным необходимо предоставить код для выполнения операций с данными для вашего конкретного сохраняемости механизма.</span><span class="sxs-lookup"><span data-stu-id="bc93f-194">In the data access classes, you provide code to perform data operations for your particular persistence mechanism.</span></span> <span data-ttu-id="bc93f-195">Например в реализации MySQL, UserTable класс содержит метод для вставки новой записи в таблице базы данных пользователей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-195">For example, within the MySQL implementation, the UserTable class contains a method to insert a new record into the Users database table.</span></span> <span data-ttu-id="bc93f-196">Переменная с именем `_database` является экземпляром класса MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="bc93f-196">The variable named `_database` is an instance of the MySQLDatabase class.</span></span>

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample1.cs)]

<span data-ttu-id="bc93f-197">После создания ваши классы доступа к данным, необходимо создать классы хранилища, которые вызывают конкретные методы в слое доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="bc93f-197">After creating your data access classes, you must create store classes that call the specific methods in the data access layer.</span></span>

<a id="user"></a>
## <a name="customize-the-user-class"></a><span data-ttu-id="bc93f-198">Настроить класс пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-198">Customize the user class</span></span>

<span data-ttu-id="bc93f-199">При реализации поставщика хранилища, необходимо создать класс пользователя, что эквивалентно [IdentityUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityuser(v=vs.108).aspx) в класс [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) пространство имен:</span><span class="sxs-lookup"><span data-stu-id="bc93f-199">When implementing your own storage provider, you must create a user class which is equivalent to the [IdentityUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityuser(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace:</span></span>

<span data-ttu-id="bc93f-200">В примере ниже показан класс IdentityUser, который необходимо создать и интерфейс для реализации этого класса.</span><span class="sxs-lookup"><span data-stu-id="bc93f-200">The following diagram shows the IdentityUser class that you must create and the interface to implement in this class.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image2.png)

<span data-ttu-id="bc93f-201">[IUser&lt;TKey&gt; ](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) интерфейс определяет свойства, которые UserManager предпринимается попытка вызова при выполнении запрошены операции.</span><span class="sxs-lookup"><span data-stu-id="bc93f-201">The [IUser&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) interface defines the properties that the UserManager attempts to call when performing requested operations.</span></span> <span data-ttu-id="bc93f-202">Интерфейс содержит два свойства - идентификатор и имя пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-202">The interface contains two properties - Id and UserName.</span></span> <span data-ttu-id="bc93f-203">[IUser&lt;TKey&gt; ](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) интерфейс позволяет указать тип ключа для пользователя с помощью универсального **TKey** параметра.</span><span class="sxs-lookup"><span data-stu-id="bc93f-203">The [IUser&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) interface enables you to specify the type of the key for the user through the generic **TKey** parameter.</span></span> <span data-ttu-id="bc93f-204">Тип идентификатора свойства совпадает со значением параметра TKey.</span><span class="sxs-lookup"><span data-stu-id="bc93f-204">The type of the Id property matches the value of the TKey parameter.</span></span>

<span data-ttu-id="bc93f-205">Также предоставляет инфраструктуру идентификации [IUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.iuser(v=vs.108).aspx) интерфейс (без универсального параметра) Если вы хотите использовать строковое значение для ключа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-205">The Identity framework also provides the [IUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.iuser(v=vs.108).aspx) interface (without the generic parameter) when you want to use a string value for the key.</span></span>

<span data-ttu-id="bc93f-206">IdentityUser класс, реализующий IUser и содержит дополнительные свойства или конструкторы для пользователей на веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="bc93f-206">The IdentityUser class implements IUser and contains any additional properties or constructors for users on your web site.</span></span> <span data-ttu-id="bc93f-207">В следующем примере показан класс IdentityUser, использующего целое число для ключа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-207">The following example shows an IdentityUser class that uses an integer for the key.</span></span> <span data-ttu-id="bc93f-208">Идентификатор поля задается **int** в соответствии с значением универсального параметра.</span><span class="sxs-lookup"><span data-stu-id="bc93f-208">The Id field is set to **int** to match the value of the generic parameter.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample2.cs)]

 <span data-ttu-id="bc93f-209">Полную реализацию, см. в разделе [IdentityUser (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityUser.cs).</span><span class="sxs-lookup"><span data-stu-id="bc93f-209">For a complete implementation, see [IdentityUser (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityUser.cs).</span></span> 

<a id="userstore"></a>
## <a name="customize-the-user-store"></a><span data-ttu-id="bc93f-210">Настроить хранилище пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-210">Customize the user store</span></span>

<span data-ttu-id="bc93f-211">Можно также создать UserStore класс, предоставляющий методы для всех операций с данными пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-211">You also create a UserStore class that provides the methods for all data operations on the user.</span></span> <span data-ttu-id="bc93f-212">Этот класс эквивалентно [UserStore&lt;TUser&gt; ](https://msdn.microsoft.com/library/dn315446(v=vs.108).aspx) в класс [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) пространства имен.</span><span class="sxs-lookup"><span data-stu-id="bc93f-212">This class is equivalent to the [UserStore&lt;TUser&gt;](https://msdn.microsoft.com/library/dn315446(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace.</span></span> <span data-ttu-id="bc93f-213">В классе UserStore реализации [IUserStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) и любые дополнительные интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="bc93f-213">In your UserStore class, you implement the [IUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) and any of the optional interfaces.</span></span> <span data-ttu-id="bc93f-214">Выберите дополнительные интерфейсы для реализации на основе функциональности, которую вы хотите предоставить в приложении.</span><span class="sxs-lookup"><span data-stu-id="bc93f-214">You select which optional interfaces to implement based on the functionality you wish to provide in your application.</span></span>

<span data-ttu-id="bc93f-215">На следующем рисунке необходимо создать класс UserStore и соответствующие интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="bc93f-215">The following image shows the UserStore class you must create and the relevant interfaces.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image3.png)

<span data-ttu-id="bc93f-216">Шаблон проекта по умолчанию в Visual Studio содержит код, который предполагается, что многие из дополнительного интерфейса были реализованы в хранилище пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-216">The default project template in Visual Studio contains code that assumes many of the optional interfaces have been implemented in the user store.</span></span> <span data-ttu-id="bc93f-217">Если вы используете шаблон по умолчанию с помощью настраиваемого пользовательского хранилища, необходимо реализовывать дополнительные интерфейсы в вашем хранилище пользователей или изменять код шаблона больше не вызывать методы в интерфейсах, не реализованный.</span><span class="sxs-lookup"><span data-stu-id="bc93f-217">If you are using the default template with a customized user store, you must either implement optional interfaces in your user store or alter the template code to no longer call methods in the interfaces you have not implemented.</span></span>

 <span data-ttu-id="bc93f-218">Приведенный ниже показан простой пользовательский класс хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-218">The following example shows a simple user store class.</span></span> <span data-ttu-id="bc93f-219">**TUser** универсальный параметр принимает тип класса пользователя, который обычно является класс IdentityUser, вы определили.</span><span class="sxs-lookup"><span data-stu-id="bc93f-219">The **TUser** generic parameter takes the type of your user class which usually is the IdentityUser class you defined.</span></span> <span data-ttu-id="bc93f-220">**TKey** универсальный параметр принимает тип ключа пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-220">The **TKey** generic parameter takes the type of your user key.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample3.cs)]

 <span data-ttu-id="bc93f-221">В этом примере конструктор, который принимает параметр с именем *базы данных* типа ExampleDatabase представлен только способ передачи в классе доступа данных.</span><span class="sxs-lookup"><span data-stu-id="bc93f-221">In this example, the constructor that takes a parameter named *database* of type ExampleDatabase is only an illustration of how to pass in your data access class.</span></span> <span data-ttu-id="bc93f-222">Например в реализации MySQL, этот конструктор принимает параметр типа MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="bc93f-222">For example, in the MySQL implementation, this constructor takes a parameter of type MySQLDatabase.</span></span> 

<span data-ttu-id="bc93f-223">В классе UserStore используйте классы доступа к данным, которые созданы для выполнения операций.</span><span class="sxs-lookup"><span data-stu-id="bc93f-223">Within your UserStore class, you use the data access classes that you created to perform operations.</span></span> <span data-ttu-id="bc93f-224">Например в реализации MySQL класс UserStore имеет метод CreateAsync, который использует экземпляр UserTable для вставки новой записи.</span><span class="sxs-lookup"><span data-stu-id="bc93f-224">For example, in the MySQL implementation, the UserStore class has the CreateAsync method which uses an instance of UserTable to insert a new record.</span></span> <span data-ttu-id="bc93f-225">**Вставить** метод **userTable** объект является тем же методом, который был показан в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="bc93f-225">The **Insert** method on the **userTable** object is the same method that was shown in the previous section.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample4.cs)]

### <a name="interfaces-to-implement-when-customizing-user-store"></a><span data-ttu-id="bc93f-226">Интерфейсы для реализации при настройке хранилища пользователя</span><span class="sxs-lookup"><span data-stu-id="bc93f-226">Interfaces to implement when customizing user store</span></span>

<span data-ttu-id="bc93f-227">На следующем рисунке показаны Дополнительные сведения о функциональных возможностях, определенные в каждом интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="bc93f-227">The next image shows more details about the functionality defined in each interface.</span></span> <span data-ttu-id="bc93f-228">Все интерфейсы, необязательные наследовать от IUserStore.</span><span class="sxs-lookup"><span data-stu-id="bc93f-228">All of the optional interfaces inherit from IUserStore.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image4.png)

- <span data-ttu-id="bc93f-229">**IUserStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-229">**IUserStore**</span></span>  
  <span data-ttu-id="bc93f-230">[IUserStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613278(v=vs.108).aspx) это единственный интерфейс, необходимо реализовать в вашем хранилище пользователей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-230">The [IUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613278(v=vs.108).aspx) interface is the only interface you must implement in your user store.</span></span> <span data-ttu-id="bc93f-231">Он определяет методы для создания, обновление, удаление и извлечение пользователей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-231">It defines methods for creating, updating, deleting, and retrieving users.</span></span>
- <span data-ttu-id="bc93f-232">**IUserClaimStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-232">**IUserClaimStore**</span></span>  
  <span data-ttu-id="bc93f-233">[IUserClaimStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613265(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать в вашем хранилище пользователей для включения заявок на доступ пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-233">The [IUserClaimStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613265(v=vs.108).aspx) interface defines the methods you must implement in your user store to enable user claims.</span></span> <span data-ttu-id="bc93f-234">Он содержит методы или добавления, удаления и получает утверждения пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-234">It contains methods or adding, removing and retrieving user claims.</span></span>
- <span data-ttu-id="bc93f-235">**IUserLoginStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-235">**IUserLoginStore**</span></span>  
  <span data-ttu-id="bc93f-236">[IUserLoginStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613272(v=vs.108).aspx) определяет методы, необходимо реализовать в вашем хранилище пользователей для включения внешних поставщиков проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="bc93f-236">The [IUserLoginStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613272(v=vs.108).aspx) defines the methods you must implement in your user store to enable external authentication providers.</span></span> <span data-ttu-id="bc93f-237">Он содержит методы для добавления, удаления и получения учетных данных для входа и метод для извлечения на основе сведений имени входа пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-237">It contains methods for adding, removing and retrieving user logins, and a method for retrieving a user based on the login information.</span></span>
- <span data-ttu-id="bc93f-238">**IUserRoleStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-238">**IUserRoleStore**</span></span>  
  <span data-ttu-id="bc93f-239">[IUserRoleStore&lt;TKey, TUser&gt; ](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать в вашем хранилище пользователей для сопоставления пользователей в роль.</span><span class="sxs-lookup"><span data-stu-id="bc93f-239">The [IUserRoleStore&lt;TKey, TUser&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) interface defines the methods you must implement in your user store to map a user to a role.</span></span> <span data-ttu-id="bc93f-240">Он содержит методы для добавления, удаления и получения ролей пользователя и метод для проверки, если пользователю назначена роль.</span><span class="sxs-lookup"><span data-stu-id="bc93f-240">It contains methods to add, remove, and retrieve a user's roles, and a method to check if a user is assigned to a role.</span></span>
- <span data-ttu-id="bc93f-241">**IUserPasswordStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-241">**IUserPasswordStore**</span></span>  
  <span data-ttu-id="bc93f-242">[IUserPasswordStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613273(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать в вашем хранилище пользователей для сохранения хэшированные пароли.</span><span class="sxs-lookup"><span data-stu-id="bc93f-242">The [IUserPasswordStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613273(v=vs.108).aspx) interface defines the methods you must implement in your user store to persist hashed passwords.</span></span> <span data-ttu-id="bc93f-243">Он содержит методы для получения и установки хэшированный пароль и метод, который указывает, ли пользователь задать пароль.</span><span class="sxs-lookup"><span data-stu-id="bc93f-243">It contains methods for getting and setting the hashed password, and a method that indicates whether the user has set a password.</span></span>
- <span data-ttu-id="bc93f-244">**IUserSecurityStampStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-244">**IUserSecurityStampStore**</span></span>  
  <span data-ttu-id="bc93f-245">[IUserSecurityStampStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613277(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать в вашем хранилище пользователей использовать метку безопасности для, указывающее, изменилось ли сведения об учетной записи пользователя .</span><span class="sxs-lookup"><span data-stu-id="bc93f-245">The [IUserSecurityStampStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613277(v=vs.108).aspx) interface defines the methods you must implement in your user store to use a security stamp for indicating whether the user's account information has changed.</span></span> <span data-ttu-id="bc93f-246">Эта метка обновляется, когда пользователь изменяет пароль, или добавляет или удаляет имена входа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-246">This stamp is updated when a user changes the password, or adds or removes logins.</span></span> <span data-ttu-id="bc93f-247">Он содержит методы для получения и установки метку безопасности.</span><span class="sxs-lookup"><span data-stu-id="bc93f-247">It contains methods for getting and setting the security stamp.</span></span>
- <span data-ttu-id="bc93f-248">**IUserTwoFactorStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-248">**IUserTwoFactorStore**</span></span>  
  <span data-ttu-id="bc93f-249">[IUserTwoFactorStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613279(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать для реализации двухфакторную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="bc93f-249">The [IUserTwoFactorStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613279(v=vs.108).aspx) interface defines the methods you must implement to implement two factor authentication.</span></span> <span data-ttu-id="bc93f-250">Он содержит методы для получения и установки ли двухфакторная проверка подлинности включена для пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-250">It contains methods for getting and setting whether two factor authentication is enabled for a user.</span></span>
- <span data-ttu-id="bc93f-251">**IUserPhoneNumberStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-251">**IUserPhoneNumberStore**</span></span>  
  <span data-ttu-id="bc93f-252">[IUserPhoneNumberStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613275(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать для хранения номеров телефонов пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-252">The [IUserPhoneNumberStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613275(v=vs.108).aspx) interface defines the methods you must implement to store user phone numbers.</span></span> <span data-ttu-id="bc93f-253">Он содержит методы для получения и установки, номер телефона и подтвержден ли номер телефона.</span><span class="sxs-lookup"><span data-stu-id="bc93f-253">It contains methods for getting and setting the phone number and whether the phone number is confirmed.</span></span>
- <span data-ttu-id="bc93f-254">**IUserEmailStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-254">**IUserEmailStore**</span></span>  
  <span data-ttu-id="bc93f-255">[IUserEmailStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613143(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать для хранения адреса электронной почты пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-255">The [IUserEmailStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613143(v=vs.108).aspx) interface defines the methods you must implement to store user email addresses.</span></span> <span data-ttu-id="bc93f-256">Он содержит методы для получения и задания, адрес электронной почты и подтвержден ли адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="bc93f-256">It contains methods for getting and setting the email address and whether the email is confirmed.</span></span>
- <span data-ttu-id="bc93f-257">**IUserLockoutStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-257">**IUserLockoutStore**</span></span>  
  <span data-ttu-id="bc93f-258">[IUserLockoutStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613271(v=vs.108).aspx) интерфейс определяет методы, необходимо реализовать для хранения сведений о блокировке учетной записи.</span><span class="sxs-lookup"><span data-stu-id="bc93f-258">The [IUserLockoutStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613271(v=vs.108).aspx) interface defines the methods you must implement to store information about locking an account.</span></span> <span data-ttu-id="bc93f-259">Он содержит методы для получения текущее количество неудачных попыток доступа, получение и параметр учетной записи могут быть заблокированы, получение и установка блокировке Дата окончания, увеличивая число неудачных попыток и сброс число неудачных попыток входа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-259">It contains methods for getting the current number of failed access attempts, getting and setting whether the account can be locked, getting and setting the lock out end date, incrementing the number of failed attempts, and resetting the number of failed attempts.</span></span>
- <span data-ttu-id="bc93f-260">**IQueryableUserStore**</span><span class="sxs-lookup"><span data-stu-id="bc93f-260">**IQueryableUserStore**</span></span>  
  <span data-ttu-id="bc93f-261">[IQueryableUserStore&lt;TUser, TKey&gt; ](https://msdn.microsoft.com/library/dn613267(v=vs.108).aspx) интерфейс определяет членов, необходимо реализовать для создания хранилища поддерживает запросы пользователя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-261">The [IQueryableUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613267(v=vs.108).aspx) interface defines the members you must implement to provide a queryable user store.</span></span> <span data-ttu-id="bc93f-262">Он содержит свойство, которое содержит поддерживает запросы пользователей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-262">It contains a property that holds the queryable users.</span></span>

  <span data-ttu-id="bc93f-263">Реализовать интерфейсы, которые требуются в приложении; Например IUserClaimStore, IUserLoginStore, IUserRoleStore, IUserPasswordStore и IUserSecurityStampStore интерфейсы, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="bc93f-263">You implement the interfaces that are needed in your application; such as, the IUserClaimStore, IUserLoginStore, IUserRoleStore, IUserPasswordStore, and IUserSecurityStampStore interfaces as shown below.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample5.cs)]

<span data-ttu-id="bc93f-264">Полная реализация (включая все интерфейсы), см. в разделе [UserStore (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserStore.cs).</span><span class="sxs-lookup"><span data-stu-id="bc93f-264">For a complete implementation (including all of interfaces), see [UserStore (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/UserStore.cs).</span></span>

### <a name="identityuserclaim-identityuserlogin-and-identityuserrole"></a><span data-ttu-id="bc93f-265">IdentityUserClaim IdentityUserLogin и IdentityUserRole</span><span class="sxs-lookup"><span data-stu-id="bc93f-265">IdentityUserClaim, IdentityUserLogin, and IdentityUserRole</span></span>

<span data-ttu-id="bc93f-266">Пространство имен Microsoft.AspNet.Identity.EntityFramework содержит реализации [IdentityUserClaim](https://msdn.microsoft.com/library/dn613250(v=vs.108).aspx), [IdentityUserLogin](https://msdn.microsoft.com/library/dn613251(v=vs.108).aspx), и [IdentityUserRole](https://msdn.microsoft.com/library/dn613252(v=vs.108).aspx) классы.</span><span class="sxs-lookup"><span data-stu-id="bc93f-266">The Microsoft.AspNet.Identity.EntityFramework namespace contains implementations of the [IdentityUserClaim](https://msdn.microsoft.com/library/dn613250(v=vs.108).aspx), [IdentityUserLogin](https://msdn.microsoft.com/library/dn613251(v=vs.108).aspx), and [IdentityUserRole](https://msdn.microsoft.com/library/dn613252(v=vs.108).aspx) classes.</span></span> <span data-ttu-id="bc93f-267">Если вы используете эти функции, можно создать собственные версии этих классов и определить свойства для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-267">If you are using these features, you may want to create your own versions of these classes and define the properties for your application.</span></span> <span data-ttu-id="bc93f-268">Тем не менее иногда бывает более эффективно не загружать эти сущности в памяти при выполнении основных операций (например, добавление или удаление утверждения пользователя).</span><span class="sxs-lookup"><span data-stu-id="bc93f-268">However, sometimes it is more efficient to not load these entities into memory when performing basic operations (such as adding or removing a user's claim).</span></span> <span data-ttu-id="bc93f-269">Вместо этого классы хранилища базы данных могут выполнять эти операции непосредственно на источнике данных.</span><span class="sxs-lookup"><span data-stu-id="bc93f-269">Instead, the backend store classes can execute these operations directly on the data source.</span></span> <span data-ttu-id="bc93f-270">Например метод UserStore.GetClaimsAsync() можно вызвать userClaimTable.FindByUserId(user. Метод ID) для выполнения запроса на который непосредственно таблицы и возвращает список утверждений.</span><span class="sxs-lookup"><span data-stu-id="bc93f-270">For example, the UserStore.GetClaimsAsync() method can call the userClaimTable.FindByUserId(user.Id) method to execute a query on that table directly and return a list of claims.</span></span>

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample6.cs)]

<a id="role"></a>
## <a name="customize-the-role-class"></a><span data-ttu-id="bc93f-271">Настроить класс ролей</span><span class="sxs-lookup"><span data-stu-id="bc93f-271">Customize the role class</span></span>

<span data-ttu-id="bc93f-272">При реализации поставщика хранилища, необходимо создать класс ролей, что эквивалентно [IdentityRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityrole(v=vs.108).aspx) в класс [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) пространство имен:</span><span class="sxs-lookup"><span data-stu-id="bc93f-272">When implementing your own storage provider, you must create a role class which is equivalent to the [IdentityRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityrole(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace:</span></span>

<span data-ttu-id="bc93f-273">В примере ниже показан класс IdentityRole, который необходимо создать и интерфейс для реализации этого класса.</span><span class="sxs-lookup"><span data-stu-id="bc93f-273">The following diagram shows the IdentityRole class that you must create and the interface to implement in this class.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image5.png)

<span data-ttu-id="bc93f-274">[IRole&lt;TKey&gt; ](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) интерфейс определяет свойства, которые RoleManager предпринимается попытка вызова при выполнении запрошены операции.</span><span class="sxs-lookup"><span data-stu-id="bc93f-274">The [IRole&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) interface defines the properties that the RoleManager attempts to call when performing requested operations.</span></span> <span data-ttu-id="bc93f-275">Интерфейс содержит два свойства - идентификатор и имя.</span><span class="sxs-lookup"><span data-stu-id="bc93f-275">The interface contains two properties - Id and Name.</span></span> <span data-ttu-id="bc93f-276">[IRole&lt;TKey&gt; ](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) интерфейс позволяет указать тип ключа для роли через универсальный **TKey** параметра.</span><span class="sxs-lookup"><span data-stu-id="bc93f-276">The [IRole&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) interface enables you to specify the type of the key for the role through the generic **TKey** parameter.</span></span> <span data-ttu-id="bc93f-277">Тип идентификатора свойства совпадает со значением параметра TKey.</span><span class="sxs-lookup"><span data-stu-id="bc93f-277">The type of the Id property matches the value of the TKey parameter.</span></span>

<span data-ttu-id="bc93f-278">Также предоставляет инфраструктуру идентификации [IRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.irole(v=vs.108).aspx) интерфейс (без универсального параметра) Если вы хотите использовать строковое значение для ключа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-278">The Identity framework also provides the [IRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.irole(v=vs.108).aspx) interface (without the generic parameter) when you want to use a string value for the key.</span></span>

<span data-ttu-id="bc93f-279">В следующем примере показан класс IdentityRole, использующего целое число для ключа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-279">The following example shows an IdentityRole class that uses an integer for the key.</span></span> <span data-ttu-id="bc93f-280">Поле идентификатора присваивается int в соответствии с значением универсального параметра.</span><span class="sxs-lookup"><span data-stu-id="bc93f-280">The Id field is set to int to match the value of the generic parameter.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample7.cs)]

 <span data-ttu-id="bc93f-281">Полную реализацию, см. в разделе [IdentityRole (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityRole.cs).</span><span class="sxs-lookup"><span data-stu-id="bc93f-281">For a complete implementation, see [IdentityRole (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/IdentityRole.cs).</span></span> 

<a id="rolestore"></a>
## <a name="customize-the-role-store"></a><span data-ttu-id="bc93f-282">Настройка хранилища ролей</span><span class="sxs-lookup"><span data-stu-id="bc93f-282">Customize the role store</span></span>

<span data-ttu-id="bc93f-283">Можно также создать RoleStore класс, предоставляющий методы для всех операций с данными для ролей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-283">You also create a RoleStore class that provides the methods for all data operations on roles.</span></span> <span data-ttu-id="bc93f-284">Этот класс эквивалентно [RoleStore&lt;TRole&gt; ](https://msdn.microsoft.com/library/dn468181(v=vs.108).aspx) класса в пространстве имен Microsoft.ASP.NET.Identity.EntityFramework.</span><span class="sxs-lookup"><span data-stu-id="bc93f-284">This class is equivalent to the [RoleStore&lt;TRole&gt;](https://msdn.microsoft.com/library/dn468181(v=vs.108).aspx) class in the Microsoft.ASP.NET.Identity.EntityFramework namespace.</span></span> <span data-ttu-id="bc93f-285">В классе RoleStore реализации [IRoleStore&lt;TRole, TKey&gt; ](https://msdn.microsoft.com/library/dn613266(v=vs.108).aspx) и при необходимости [IQueryableRoleStore&lt;TRole, TKey&gt; ](https://msdn.microsoft.com/library/dn613262(v=vs.108).aspx) интерфейс.</span><span class="sxs-lookup"><span data-stu-id="bc93f-285">In your RoleStore class, you implement the [IRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613266(v=vs.108).aspx) and optionally the [IQueryableRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613262(v=vs.108).aspx) interface.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image6.png)

<span data-ttu-id="bc93f-286">Пример класса роли хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-286">The following example shows a role store class.</span></span> <span data-ttu-id="bc93f-287">Универсальный параметр TRole принимает тип вашего класса роли, обычно это IdentityRole класса, который вы определили.</span><span class="sxs-lookup"><span data-stu-id="bc93f-287">The TRole generic parameter takes the type of your role class which usually is the IdentityRole class you defined.</span></span> <span data-ttu-id="bc93f-288">Универсальный параметр TKey принимает тип ключа вашей роли.</span><span class="sxs-lookup"><span data-stu-id="bc93f-288">The TKey generic parameter takes the type of your role key.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample8.cs)]

- <span data-ttu-id="bc93f-289">**IRoleStore&lt;TRole&gt;**</span><span class="sxs-lookup"><span data-stu-id="bc93f-289">**IRoleStore&lt;TRole&gt;**</span></span>  
  <span data-ttu-id="bc93f-290">[IRoleStore](https://msdn.microsoft.com/library/dn468195.aspx) интерфейс определяет методы для реализации в классе роли хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-290">The [IRoleStore](https://msdn.microsoft.com/library/dn468195.aspx) interface defines the methods to implement in your role store class.</span></span> <span data-ttu-id="bc93f-291">Он содержит методы для создания, обновления, удаления и извлечения ролей.</span><span class="sxs-lookup"><span data-stu-id="bc93f-291">It contains methods for creating, updating, deleting and retrieving roles.</span></span>
- <span data-ttu-id="bc93f-292">**RoleStore&lt;TRole&gt;**</span><span class="sxs-lookup"><span data-stu-id="bc93f-292">**RoleStore&lt;TRole&gt;**</span></span>  
  <span data-ttu-id="bc93f-293">Чтобы настроить RoleStore, создайте класс, реализующий интерфейс IRoleStore.</span><span class="sxs-lookup"><span data-stu-id="bc93f-293">To customize RoleStore, create a class that implements the IRoleStore interface.</span></span> <span data-ttu-id="bc93f-294">Достаточно для реализации этого класса, если используются роли в системе.</span><span class="sxs-lookup"><span data-stu-id="bc93f-294">You only have to implement this class if want to use roles on your system.</span></span> <span data-ttu-id="bc93f-295">Конструктор, который принимает параметр с именем *базы данных* типа ExampleDatabase представлен только способ передачи в классе доступа данных.</span><span class="sxs-lookup"><span data-stu-id="bc93f-295">The constructor that takes a parameter named *database* of type ExampleDatabase is only an illustration of how to pass in your data access class.</span></span> <span data-ttu-id="bc93f-296">Например в реализации MySQL, этот конструктор принимает параметр типа MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="bc93f-296">For example, in the MySQL implementation, this constructor takes a parameter of type MySQLDatabase.</span></span>  
  
  <span data-ttu-id="bc93f-297">Полную реализацию, см. в разделе [RoleStore (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleStore.cs) .</span><span class="sxs-lookup"><span data-stu-id="bc93f-297">For a complete implementation, see [RoleStore (MySQL)](https://aspnet.codeplex.com/SourceControl/latest#Samples/Identity/AspNet.Identity.MySQL/RoleStore.cs) .</span></span>

<a id="reconfigure"></a>
## <a name="reconfigure-application-to-use-new-storage-provider"></a><span data-ttu-id="bc93f-298">Перенастройка приложения для использования нового поставщика хранилища</span><span class="sxs-lookup"><span data-stu-id="bc93f-298">Reconfigure application to use new storage provider</span></span>

<span data-ttu-id="bc93f-299">Вы реализовали новый поставщику хранения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-299">You have implemented your new storage provider.</span></span> <span data-ttu-id="bc93f-300">Теперь необходимо настроить приложение для использования этого поставщика хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-300">Now, you must configure your application to use this storage provider.</span></span> <span data-ttu-id="bc93f-301">Если поставщик хранилища по умолчанию был включен в проект, необходимо удалить поставщик по умолчанию и заменить его с помощью поставщика.</span><span class="sxs-lookup"><span data-stu-id="bc93f-301">If the default storage provider was included in your project, you must remove the default provider and replace it with your provider.</span></span>

### <a name="replace-default-storage-provider-in-mvc-project"></a><span data-ttu-id="bc93f-302">Замена поставщика хранилища по умолчанию в проекте MVC</span><span class="sxs-lookup"><span data-stu-id="bc93f-302">Replace default storage provider in MVC project</span></span>

1. <span data-ttu-id="bc93f-303">В **управление пакетами NuGet** окно, удалите **Microsoft ASP.NET Identity EntityFramework** пакета.</span><span class="sxs-lookup"><span data-stu-id="bc93f-303">In the **Manage NuGet Packages** window, uninstall the **Microsoft ASP.NET Identity EntityFramework** package.</span></span> <span data-ttu-id="bc93f-304">Этот пакет можно найти, выполнив поиск Identity.EntityFramework в установленные пакеты.</span><span class="sxs-lookup"><span data-stu-id="bc93f-304">You can find this package by searching in the Installed packages for Identity.EntityFramework.</span></span>  
    <span data-ttu-id="bc93f-305">![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image7.png) Вам потребуется указать, если требуется, чтобы удалить Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="bc93f-305">![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image7.png) You will be asked if you also want to uninstall Entity Framework.</span></span> <span data-ttu-id="bc93f-306">Если не обязательно в других частях приложения, ее можно удалить.</span><span class="sxs-lookup"><span data-stu-id="bc93f-306">If you do not need it in other parts of your application, you can uninstall it.</span></span>
2. <span data-ttu-id="bc93f-307">В папке Models находится в файле IdentityModels.cs, удалите или закомментируйте **ApplicationUser** и **ApplicationDbContext** классы.</span><span class="sxs-lookup"><span data-stu-id="bc93f-307">In the IdentityModels.cs file in the Models folder, delete or comment out the **ApplicationUser** and **ApplicationDbContext** classes.</span></span> <span data-ttu-id="bc93f-308">В MVC-приложениях можно удалить весь файл IdentityModels.cs.</span><span class="sxs-lookup"><span data-stu-id="bc93f-308">In an MVC application, you can delete the entire IdentityModels.cs file.</span></span> <span data-ttu-id="bc93f-309">В приложении Web Forms удалить эти два класса, но убедитесь, что хранить вспомогательный класс, который также находится в файле IdentityModels.cs.</span><span class="sxs-lookup"><span data-stu-id="bc93f-309">In a Web Forms application, delete the two classes but make sure you keep the helper class that is also located in the IdentityModels.cs file.</span></span>
3. <span data-ttu-id="bc93f-310">Если поставщику хранения находится в отдельном проекте, добавьте ссылку на него в веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="bc93f-310">If your storage provider resides in a separate project, add a reference to it in your web application.</span></span>
4. <span data-ttu-id="bc93f-311">Замените все вхождения `using Microsoft.AspNet.Identity.EntityFramework;` с с помощью инструкции для пространства имен поставщика хранилища.</span><span class="sxs-lookup"><span data-stu-id="bc93f-311">Replace all references to `using Microsoft.AspNet.Identity.EntityFramework;` with a using statement for the namespace of your storage provider.</span></span>
5. <span data-ttu-id="bc93f-312">В **Startup.Auth.cs** измените **ConfigureAuth** метод для использования одного экземпляра соответствующий контекст.</span><span class="sxs-lookup"><span data-stu-id="bc93f-312">In the **Startup.Auth.cs** class, change the **ConfigureAuth** method to use a single instance of the appropriate context.</span></span> 

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample9.cs?highlight=3)]
6. <span data-ttu-id="bc93f-313">В приложении\_начала открытой вложенной папкой, **IdentityConfig.cs**.</span><span class="sxs-lookup"><span data-stu-id="bc93f-313">In the App\_Start folder, open **IdentityConfig.cs**.</span></span> <span data-ttu-id="bc93f-314">В классе ApplicationUserManager изменить **создать** метод для возврата руководитель пользователя, использующего хранилище пользовательских.</span><span class="sxs-lookup"><span data-stu-id="bc93f-314">In the ApplicationUserManager class, change the **Create** method to return a user manager that uses your customized user store.</span></span> 

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample10.cs?highlight=3)]
7. <span data-ttu-id="bc93f-315">Замените все вхождения **ApplicationUser** с **IdentityUser**.</span><span class="sxs-lookup"><span data-stu-id="bc93f-315">Replace all references to **ApplicationUser** with **IdentityUser**.</span></span>
8. <span data-ttu-id="bc93f-316">Проект по умолчанию включает в себя некоторые члены в класс пользователя, не определенные в интерфейсе IUser; Например, адрес электронной почты, PasswordHash и GenerateUserIdentityAsync.</span><span class="sxs-lookup"><span data-stu-id="bc93f-316">The default project includes some members in user class which are not defined in the IUser interface; such as Email, PasswordHash, and GenerateUserIdentityAsync.</span></span> <span data-ttu-id="bc93f-317">Если ваш класс пользователя нет этих членов, необходимо их реализации или изменить код, который использует эти элементы.</span><span class="sxs-lookup"><span data-stu-id="bc93f-317">If your user class does not have these members, you must either implement them or change the code that uses these members.</span></span>
9. <span data-ttu-id="bc93f-318">Если вы создали все экземпляры RoleManager, измените этот код, чтобы использовать новый класс RoleStore.</span><span class="sxs-lookup"><span data-stu-id="bc93f-318">If you have created any instances of RoleManager, change that code to use your new RoleStore class.</span></span>  

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample11.cs)]
10. <span data-ttu-id="bc93f-319">По умолчанию проект предназначен для пользователя классом, имеющим строковое значение для ключа.</span><span class="sxs-lookup"><span data-stu-id="bc93f-319">The default project is designed for a user class that has a string value for the key.</span></span> <span data-ttu-id="bc93f-320">Если ваш класс пользователя имеет другой тип ключа (например, целое число), необходимо изменить проект для работы с типом.</span><span class="sxs-lookup"><span data-stu-id="bc93f-320">If your user class has a different type for the key (such as an integer), you must change the project to work with your type.</span></span> <span data-ttu-id="bc93f-321">См. в разделе [изменение первичного ключа для пользователей в ASP.NET Identity](change-primary-key-for-users-in-aspnet-identity.md).</span><span class="sxs-lookup"><span data-stu-id="bc93f-321">See [Change Primary Key for Users in ASP.NET Identity](change-primary-key-for-users-in-aspnet-identity.md).</span></span>
11. <span data-ttu-id="bc93f-322">При необходимости, добавьте строку подключения в файле Web.config.</span><span class="sxs-lookup"><span data-stu-id="bc93f-322">If needed, add the connection string to the Web.config file.</span></span>

<a id="other"></a>
## <a name="other-resources"></a><span data-ttu-id="bc93f-323">Другие источники</span><span class="sxs-lookup"><span data-stu-id="bc93f-323">Other resources</span></span>

- <span data-ttu-id="bc93f-324">Блог: [Реализация ASP.NET Identity](http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx)</span><span class="sxs-lookup"><span data-stu-id="bc93f-324">Blog: [Implementing ASP.NET Identity](http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx)</span></span>
- <span data-ttu-id="bc93f-325">Руководство и GIT код: [Поставщик удостоверений Simple.Data Asp.Net](http://designcoderelease.blogspot.co.uk/2015/03/simpledata-aspnet-identity-provider.html)</span><span class="sxs-lookup"><span data-stu-id="bc93f-325">Tutorial and GIT code: [Simple.Data Asp.Net Identity Provider](http://designcoderelease.blogspot.co.uk/2015/03/simpledata-aspnet-identity-provider.html)</span></span>
- <span data-ttu-id="bc93f-326">Учебник:[настройке базовых учетных записей удостоверений и направить в базу данных внешнего](http://typecastexception.com/post/2013/10/27/Configuring-Db-Connection-and-Code-First-Migration-for-Identity-Accounts-in-ASPNET-MVC-5-and-Visual-Studio-2013.aspx).</span><span class="sxs-lookup"><span data-stu-id="bc93f-326">Tutorial:[Setting up the basic Identity accounts, and pointing them at an external DB](http://typecastexception.com/post/2013/10/27/Configuring-Db-Connection-and-Code-First-Migration-for-Identity-Accounts-in-ASPNET-MVC-5-and-Visual-Studio-2013.aspx).</span></span> <span data-ttu-id="bc93f-327">По [ @xivSolutions ](https://twitter.com/xivSolutions).</span><span class="sxs-lookup"><span data-stu-id="bc93f-327">By [@xivSolutions](https://twitter.com/xivSolutions).</span></span>
- <span data-ttu-id="bc93f-328">Учебник[: Реализация поставщика хранилища MySQL пользовательских ASP.NET Identity](implementing-a-custom-mysql-aspnet-identity-storage-provider.md)</span><span class="sxs-lookup"><span data-stu-id="bc93f-328">Tutorial[: Implementing a Custom MySQL ASP.NET Identity Storage Provider](implementing-a-custom-mysql-aspnet-identity-storage-provider.md)</span></span>
- <span data-ttu-id="bc93f-329">[Сущности CodeFluent](http://blog.codefluententities.com/2014/04/30/asp-net-identity-v2-and-codefluent-entities/) по [SoftFluent](http://www.softfluent.com/)</span><span class="sxs-lookup"><span data-stu-id="bc93f-329">[CodeFluent Entities](http://blog.codefluententities.com/2014/04/30/asp-net-identity-v2-and-codefluent-entities/) by [SoftFluent](http://www.softfluent.com/)</span></span>
- <span data-ttu-id="bc93f-330">[Хранилище таблиц Azure](https://www.nuget.org/packages/accidentalfish.aspnet.identity.azure/) , Джеймс Рэндалл.</span><span class="sxs-lookup"><span data-stu-id="bc93f-330">[Azure Table Storage](https://www.nuget.org/packages/accidentalfish.aspnet.identity.azure/) by James Randall.</span></span>
- <span data-ttu-id="bc93f-331">Хранилище таблиц Azure: [AspNet.Identity.TableStorage](https://github.com/stuartleeks/leeksnet.AspNet.Identity.TableStorage) по [ @stuartleeks ](https://twitter.com/stuartleeks).</span><span class="sxs-lookup"><span data-stu-id="bc93f-331">Azure Table Storage: [AspNet.Identity.TableStorage](https://github.com/stuartleeks/leeksnet.AspNet.Identity.TableStorage) by [@stuartleeks](https://twitter.com/stuartleeks).</span></span>
- [<span data-ttu-id="bc93f-332">CouchDB / Cloudant по Wertheim Дэниэл.</span><span class="sxs-lookup"><span data-stu-id="bc93f-332">CouchDB / Cloudant by Daniel Wertheim.</span></span>](https://github.com/danielwertheim/mycouch.aspnet.identity)
- <span data-ttu-id="bc93f-333">Эластичный кать[h: Удостоверения, эластичный](https://github.com/bmbsqd/elastic-identity) по Bombsquad AB.</span><span class="sxs-lookup"><span data-stu-id="bc93f-333">Elastic Searc[h: Elastic Identity](https://github.com/bmbsqd/elastic-identity) by Bombsquad AB.</span></span>
- <span data-ttu-id="bc93f-334">[MongoDB](http://www.nuget.org/packages/MongoDB.AspNet.Identity/) , Джонатан Sheely Джонатан Sheely.</span><span class="sxs-lookup"><span data-stu-id="bc93f-334">[MongoDB](http://www.nuget.org/packages/MongoDB.AspNet.Identity/) by Jonathan Sheely Jonathan Sheely.</span></span>
- <span data-ttu-id="bc93f-335">[NHibernate.AspNet.Identity](https://github.com/milesibastos/NHibernate.AspNet.Identity) по Antônio Milesi Bastos.</span><span class="sxs-lookup"><span data-stu-id="bc93f-335">[NHibernate.AspNet.Identity](https://github.com/milesibastos/NHibernate.AspNet.Identity) by Antônio Milesi Bastos.</span></span>
- <span data-ttu-id="bc93f-336">[RavenDB](http://www.nuget.org/packages/AspNet.Identity.RavenDB/1.0.0) по [ @tourismgeek ](https://twitter.com/tourismgeek).</span><span class="sxs-lookup"><span data-stu-id="bc93f-336">[RavenDB](http://www.nuget.org/packages/AspNet.Identity.RavenDB/1.0.0) by [@tourismgeek](https://twitter.com/tourismgeek).</span></span>
- <span data-ttu-id="bc93f-337">[RavenDB.AspNet.Identity](https://github.com/ILMServices/RavenDB.AspNet.Identity) по [ILMServices](http://www.ilmservice.com/).</span><span class="sxs-lookup"><span data-stu-id="bc93f-337">[RavenDB.AspNet.Identity](https://github.com/ILMServices/RavenDB.AspNet.Identity) by [ILMServices](http://www.ilmservice.com/).</span></span>
- <span data-ttu-id="bc93f-338">Redis: [Redis.AspNet.Identity](https://github.com/aminjam/Redis.AspNet.Identity)</span><span class="sxs-lookup"><span data-stu-id="bc93f-338">Redis: [Redis.AspNet.Identity](https://github.com/aminjam/Redis.AspNet.Identity)</span></span>
- <span data-ttu-id="bc93f-339">Шаблоны T4, для которого создается код EF» базы данных «сначала пользовательского хранилища: [AspNet.Identity.EntityFramework](https://github.com/cbfrank/AspNet.Identity.EntityFramework)</span><span class="sxs-lookup"><span data-stu-id="bc93f-339">T4 Templates to generate EF code for a "database first" user store: [AspNet.Identity.EntityFramework](https://github.com/cbfrank/AspNet.Identity.EntityFramework)</span></span>
